var HFe=Object.defineProperty;var qFe=(e,t,n)=>t in e?HFe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var WFe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var rl=(e,t,n)=>qFe(e,typeof t!="symbol"?t+"":t,n);var mKt=WFe((gXt,wte)=>{function GFe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function YFe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var k9={exports:{}},FS={},I9={exports:{}},mr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pne;function KFe(){if(pne)return mr;pne=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,p={};function g(U,Y,H){this.props=U,this.context=Y,this.refs=p,this.updater=H||h}g.prototype.isReactComponent={},g.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},g.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function v(){}v.prototype=g.prototype;function b(U,Y,H){this.props=U,this.context=Y,this.refs=p,this.updater=H||h}var w=b.prototype=new v;w.constructor=b,m(w,g.prototype),w.isPureReactComponent=!0;var E=Array.isArray,T=Object.prototype.hasOwnProperty,C={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(U,Y,H){var X,ee={},le=null,Ee=null;if(Y!=null)for(X in Y.ref!==void 0&&(Ee=Y.ref),Y.key!==void 0&&(le=""+Y.key),Y)T.call(Y,X)&&!S.hasOwnProperty(X)&&(ee[X]=Y[X]);var be=arguments.length-2;if(be===1)ee.children=H;else if(1<be){for(var Ce=Array(be),Oe=0;Oe<be;Oe++)Ce[Oe]=arguments[Oe+2];ee.children=Ce}if(U&&U.defaultProps)for(X in be=U.defaultProps,be)ee[X]===void 0&&(ee[X]=be[X]);return{$$typeof:e,type:U,key:le,ref:Ee,props:ee,_owner:C.current}}function R(U,Y){return{$$typeof:e,type:U.type,key:Y,ref:U.ref,props:U.props,_owner:U._owner}}function P(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function M(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(H){return Y[H]})}var B=/\/+/g;function L(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):Y.toString(36)}function z(U,Y,H,X,ee){var le=typeof U;(le==="undefined"||le==="boolean")&&(U=null);var Ee=!1;if(U===null)Ee=!0;else switch(le){case"string":case"number":Ee=!0;break;case"object":switch(U.$$typeof){case e:case t:Ee=!0}}if(Ee)return Ee=U,ee=ee(Ee),U=X===""?"."+L(Ee,0):X,E(ee)?(H="",U!=null&&(H=U.replace(B,"$&/")+"/"),z(ee,Y,H,"",function(Oe){return Oe})):ee!=null&&(P(ee)&&(ee=R(ee,H+(!ee.key||Ee&&Ee.key===ee.key?"":(""+ee.key).replace(B,"$&/")+"/")+U)),Y.push(ee)),1;if(Ee=0,X=X===""?".":X+":",E(U))for(var be=0;be<U.length;be++){le=U[be];var Ce=X+L(le,be);Ee+=z(le,Y,H,Ce,ee)}else if(Ce=d(U),typeof Ce=="function")for(U=Ce.call(U),be=0;!(le=U.next()).done;)le=le.value,Ce=X+L(le,be++),Ee+=z(le,Y,H,Ce,ee);else if(le==="object")throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ee}function G(U,Y,H){if(U==null)return U;var X=[],ee=0;return z(U,X,"","",function(le){return Y.call(H,le,ee++)}),X}function W(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(H){(U._status===0||U._status===-1)&&(U._status=1,U._result=H)},function(H){(U._status===0||U._status===-1)&&(U._status=2,U._result=H)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var te={current:null},Z={transition:null},re={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:Z,ReactCurrentOwner:C};function q(){throw Error("act(...) is not supported in production builds of React.")}return mr.Children={map:G,forEach:function(U,Y,H){G(U,function(){Y.apply(this,arguments)},H)},count:function(U){var Y=0;return G(U,function(){Y++}),Y},toArray:function(U){return G(U,function(Y){return Y})||[]},only:function(U){if(!P(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},mr.Component=g,mr.Fragment=n,mr.Profiler=i,mr.PureComponent=b,mr.StrictMode=r,mr.Suspense=u,mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,mr.act=q,mr.cloneElement=function(U,Y,H){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var X=m({},U.props),ee=U.key,le=U.ref,Ee=U._owner;if(Y!=null){if(Y.ref!==void 0&&(le=Y.ref,Ee=C.current),Y.key!==void 0&&(ee=""+Y.key),U.type&&U.type.defaultProps)var be=U.type.defaultProps;for(Ce in Y)T.call(Y,Ce)&&!S.hasOwnProperty(Ce)&&(X[Ce]=Y[Ce]===void 0&&be!==void 0?be[Ce]:Y[Ce])}var Ce=arguments.length-2;if(Ce===1)X.children=H;else if(1<Ce){be=Array(Ce);for(var Oe=0;Oe<Ce;Oe++)be[Oe]=arguments[Oe+2];X.children=be}return{$$typeof:e,type:U.type,key:ee,ref:le,props:X,_owner:Ee}},mr.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},mr.createElement=I,mr.createFactory=function(U){var Y=I.bind(null,U);return Y.type=U,Y},mr.createRef=function(){return{current:null}},mr.forwardRef=function(U){return{$$typeof:a,render:U}},mr.isValidElement=P,mr.lazy=function(U){return{$$typeof:c,_payload:{_status:-1,_result:U},_init:W}},mr.memo=function(U,Y){return{$$typeof:l,type:U,compare:Y===void 0?null:Y}},mr.startTransition=function(U){var Y=Z.transition;Z.transition={};try{U()}finally{Z.transition=Y}},mr.unstable_act=q,mr.useCallback=function(U,Y){return te.current.useCallback(U,Y)},mr.useContext=function(U){return te.current.useContext(U)},mr.useDebugValue=function(){},mr.useDeferredValue=function(U){return te.current.useDeferredValue(U)},mr.useEffect=function(U,Y){return te.current.useEffect(U,Y)},mr.useId=function(){return te.current.useId()},mr.useImperativeHandle=function(U,Y,H){return te.current.useImperativeHandle(U,Y,H)},mr.useInsertionEffect=function(U,Y){return te.current.useInsertionEffect(U,Y)},mr.useLayoutEffect=function(U,Y){return te.current.useLayoutEffect(U,Y)},mr.useMemo=function(U,Y){return te.current.useMemo(U,Y)},mr.useReducer=function(U,Y,H){return te.current.useReducer(U,Y,H)},mr.useRef=function(U){return te.current.useRef(U)},mr.useState=function(U){return te.current.useState(U)},mr.useSyncExternalStore=function(U,Y,H){return te.current.useSyncExternalStore(U,Y,H)},mr.useTransition=function(){return te.current.useTransition()},mr.version="18.3.1",mr}var mne;function KM(){return mne||(mne=1,I9.exports=KFe()),I9.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gne;function XFe(){if(gne)return FS;gne=1;var e=KM(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!o.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return FS.Fragment=n,FS.jsx=s,FS.jsxs=s,FS}var yne;function QFe(){return yne||(yne=1,k9.exports=XFe()),k9.exports}var A=QFe(),F=KM();const Gr=_c(F),JFe=GFe({__proto__:null,default:Gr},[F]);var QN={},R9={exports:{}},Xl={},N9={exports:{}},P9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vne;function ZFe(){return vne||(vne=1,function(e){function t(Z,re){var q=Z.length;Z.push(re);e:for(;0<q;){var U=q-1>>>1,Y=Z[U];if(0<i(Y,re))Z[U]=re,Z[q]=Y,q=U;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var re=Z[0],q=Z.pop();if(q!==re){Z[0]=q;e:for(var U=0,Y=Z.length,H=Y>>>1;U<H;){var X=2*(U+1)-1,ee=Z[X],le=X+1,Ee=Z[le];if(0>i(ee,q))le<Y&&0>i(Ee,ee)?(Z[U]=Ee,Z[le]=q,U=le):(Z[U]=ee,Z[X]=q,U=X);else if(le<Y&&0>i(Ee,q))Z[U]=Ee,Z[le]=q,U=le;else break e}}return re}function i(Z,re){var q=Z.sortIndex-re.sortIndex;return q!==0?q:Z.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,m=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Z){for(var re=n(l);re!==null;){if(re.callback===null)r(l);else if(re.startTime<=Z)r(l),re.sortIndex=re.expirationTime,t(u,re);else break;re=n(l)}}function E(Z){if(p=!1,w(Z),!m)if(n(u)!==null)m=!0,W(T);else{var re=n(l);re!==null&&te(E,re.startTime-Z)}}function T(Z,re){m=!1,p&&(p=!1,v(I),I=-1),h=!0;var q=d;try{for(w(re),f=n(u);f!==null&&(!(f.expirationTime>re)||Z&&!M());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var Y=U(f.expirationTime<=re);re=e.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(u)&&r(u),w(re)}else r(u);f=n(u)}if(f!==null)var H=!0;else{var X=n(l);X!==null&&te(E,X.startTime-re),H=!1}return H}finally{f=null,d=q,h=!1}}var C=!1,S=null,I=-1,R=5,P=-1;function M(){return!(e.unstable_now()-P<R)}function B(){if(S!==null){var Z=e.unstable_now();P=Z;var re=!0;try{re=S(!0,Z)}finally{re?L():(C=!1,S=null)}}else C=!1}var L;if(typeof b=="function")L=function(){b(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,G=z.port2;z.port1.onmessage=B,L=function(){G.postMessage(null)}}else L=function(){g(B,0)};function W(Z){S=Z,C||(C=!0,L())}function te(Z,re){I=g(function(){Z(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,W(T))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Z){switch(d){case 1:case 2:case 3:var re=3;break;default:re=d}var q=d;d=re;try{return Z()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,re){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var q=d;d=Z;try{return re()}finally{d=q}},e.unstable_scheduleCallback=function(Z,re,q){var U=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?U+q:U):q=U,Z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=q+Y,Z={id:c++,callback:re,priorityLevel:Z,startTime:q,expirationTime:Y,sortIndex:-1},q>U?(Z.sortIndex=q,t(l,Z),n(u)===null&&Z===n(l)&&(p?(v(I),I=-1):p=!0,te(E,q-U))):(Z.sortIndex=Y,t(u,Z),m||h||(m=!0,W(T))),Z},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(Z){var re=d;return function(){var q=d;d=re;try{return Z.apply(this,arguments)}finally{d=q}}}}(P9)),P9}var bne;function eMe(){return bne||(bne=1,N9.exports=ZFe()),N9.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xne;function tMe(){if(xne)return Xl;xne=1;var e=KM(),t=eMe();function n(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(y,x){s(y,x),s(y+"Capture",x)}function s(y,x){for(i[y]=x,y=0;y<x.length;y++)r.add(x[y])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(y){return u.call(f,y)?!0:u.call(c,y)?!1:l.test(y)?f[y]=!0:(c[y]=!0,!1)}function h(y,x,k,O){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return O?!1:k!==null?!k.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function m(y,x,k,O){if(x===null||typeof x>"u"||h(y,x,k,O))return!0;if(O)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function p(y,x,k,O,V,Q,se){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=O,this.attributeNamespace=V,this.mustUseProperty=k,this.propertyName=y,this.type=x,this.sanitizeURL=Q,this.removeEmptyString=se}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){g[y]=new p(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var x=y[0];g[x]=new p(x,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){g[y]=new p(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){g[y]=new p(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){g[y]=new p(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){g[y]=new p(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){g[y]=new p(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){g[y]=new p(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){g[y]=new p(y,5,!1,y.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new p(x,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new p(x,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var x=y.replace(v,b);g[x]=new p(x,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){g[y]=new p(y,1,!1,y.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){g[y]=new p(y,1,!1,y.toLowerCase(),null,!0,!0)});function w(y,x,k,O){var V=g.hasOwnProperty(x)?g[x]:null;(V!==null?V.type!==0:O||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(m(x,k,V,O)&&(k=null),O||V===null?d(x)&&(k===null?y.removeAttribute(x):y.setAttribute(x,""+k)):V.mustUseProperty?y[V.propertyName]=k===null?V.type===3?!1:"":k:(x=V.attributeName,O=V.attributeNamespace,k===null?y.removeAttribute(x):(V=V.type,k=V===3||V===4&&k===!0?"":""+k,O?y.setAttributeNS(O,x,k):y.setAttribute(x,k))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),C=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),M=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),Z=Symbol.iterator;function re(y){return y===null||typeof y!="object"?null:(y=Z&&y[Z]||y["@@iterator"],typeof y=="function"?y:null)}var q=Object.assign,U;function Y(y){if(U===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);U=x&&x[1]||""}return`
`+U+y}var H=!1;function X(y,x){if(!y||H)return"";H=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Qe){var O=Qe}Reflect.construct(y,[],x)}else{try{x.call()}catch(Qe){O=Qe}y.call(x.prototype)}else{try{throw Error()}catch(Qe){O=Qe}y()}}catch(Qe){if(Qe&&O&&typeof Qe.stack=="string"){for(var V=Qe.stack.split(`
`),Q=O.stack.split(`
`),se=V.length-1,_e=Q.length-1;1<=se&&0<=_e&&V[se]!==Q[_e];)_e--;for(;1<=se&&0<=_e;se--,_e--)if(V[se]!==Q[_e]){if(se!==1||_e!==1)do if(se--,_e--,0>_e||V[se]!==Q[_e]){var De=`
`+V[se].replace(" at new "," at ");return y.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",y.displayName)),De}while(1<=se&&0<=_e);break}}}finally{H=!1,Error.prepareStackTrace=k}return(y=y?y.displayName||y.name:"")?Y(y):""}function ee(y){switch(y.tag){case 5:return Y(y.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return y=X(y.type,!1),y;case 11:return y=X(y.type.render,!1),y;case 1:return y=X(y.type,!0),y;default:return""}}function le(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case S:return"Fragment";case C:return"Portal";case R:return"Profiler";case I:return"StrictMode";case L:return"Suspense";case z:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case M:return(y.displayName||"Context")+".Consumer";case P:return(y._context.displayName||"Context")+".Provider";case B:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case G:return x=y.displayName||null,x!==null?x:le(y.type)||"Memo";case W:x=y._payload,y=y._init;try{return le(y(x))}catch{}}return null}function Ee(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(x);case 8:return x===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function be(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function Ce(y){var x=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Oe(y){var x=Ce(y)?"checked":"value",k=Object.getOwnPropertyDescriptor(y.constructor.prototype,x),O=""+y[x];if(!y.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var V=k.get,Q=k.set;return Object.defineProperty(y,x,{configurable:!0,get:function(){return V.call(this)},set:function(se){O=""+se,Q.call(this,se)}}),Object.defineProperty(y,x,{enumerable:k.enumerable}),{getValue:function(){return O},setValue:function(se){O=""+se},stopTracking:function(){y._valueTracker=null,delete y[x]}}}}function me(y){y._valueTracker||(y._valueTracker=Oe(y))}function he(y){if(!y)return!1;var x=y._valueTracker;if(!x)return!0;var k=x.getValue(),O="";return y&&(O=Ce(y)?y.checked?"true":"false":y.value),y=O,y!==k?(x.setValue(y),!0):!1}function Fe(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}function Pe(y,x){var k=x.checked;return q({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??y._wrapperState.initialChecked})}function Je(y,x){var k=x.defaultValue==null?"":x.defaultValue,O=x.checked!=null?x.checked:x.defaultChecked;k=be(x.value!=null?x.value:k),y._wrapperState={initialChecked:O,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function ut(y,x){x=x.checked,x!=null&&w(y,"checked",x,!1)}function Ke(y,x){ut(y,x);var k=be(x.value),O=x.type;if(k!=null)O==="number"?(k===0&&y.value===""||y.value!=k)&&(y.value=""+k):y.value!==""+k&&(y.value=""+k);else if(O==="submit"||O==="reset"){y.removeAttribute("value");return}x.hasOwnProperty("value")?pt(y,x.type,k):x.hasOwnProperty("defaultValue")&&pt(y,x.type,be(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(y.defaultChecked=!!x.defaultChecked)}function tt(y,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var O=x.type;if(!(O!=="submit"&&O!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+y._wrapperState.initialValue,k||x===y.value||(y.value=x),y.defaultValue=x}k=y.name,k!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,k!==""&&(y.name=k)}function pt(y,x,k){(x!=="number"||Fe(y.ownerDocument)!==y)&&(k==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+k&&(y.defaultValue=""+k))}var Dt=Array.isArray;function St(y,x,k,O){if(y=y.options,x){x={};for(var V=0;V<k.length;V++)x["$"+k[V]]=!0;for(k=0;k<y.length;k++)V=x.hasOwnProperty("$"+y[k].value),y[k].selected!==V&&(y[k].selected=V),V&&O&&(y[k].defaultSelected=!0)}else{for(k=""+be(k),x=null,V=0;V<y.length;V++){if(y[V].value===k){y[V].selected=!0,O&&(y[V].defaultSelected=!0);return}x!==null||y[V].disabled||(x=y[V])}x!==null&&(x.selected=!0)}}function $t(y,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},x,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function oe(y,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(n(92));if(Dt(k)){if(1<k.length)throw Error(n(93));k=k[0]}x=k}x==null&&(x=""),k=x}y._wrapperState={initialValue:be(k)}}function xe(y,x){var k=be(x.value),O=be(x.defaultValue);k!=null&&(k=""+k,k!==y.value&&(y.value=k),x.defaultValue==null&&y.defaultValue!==k&&(y.defaultValue=k)),O!=null&&(y.defaultValue=""+O)}function Re(y){var x=y.textContent;x===y._wrapperState.initialValue&&x!==""&&x!==null&&(y.value=x)}function pe(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function we(y,x){return y==null||y==="http://www.w3.org/1999/xhtml"?pe(x):y==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var ke,Ge=function(y){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,O,V){MSApp.execUnsafeLocalFunction(function(){return y(x,k,O,V)})}:y}(function(y,x){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=x;else{for(ke=ke||document.createElement("div"),ke.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=ke.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;x.firstChild;)y.appendChild(x.firstChild)}});function Ve(y,x){if(x){var k=y.firstChild;if(k&&k===y.lastChild&&k.nodeType===3){k.nodeValue=x;return}}y.textContent=x}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rt=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(y){rt.forEach(function(x){x=x+y.charAt(0).toUpperCase()+y.substring(1),at[x]=at[y]})});function ln(y,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||at.hasOwnProperty(y)&&at[y]?(""+x).trim():x+"px"}function xn(y,x){y=y.style;for(var k in x)if(x.hasOwnProperty(k)){var O=k.indexOf("--")===0,V=ln(k,x[k],O);k==="float"&&(k="cssFloat"),O?y.setProperty(k,V):y[k]=V}}var rn=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bn(y,x){if(x){if(rn[y]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,y));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function Hn(y,x){if(y.indexOf("-")===-1)return typeof x.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $n=null;function Kr(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var Lr=null,Br=null,mi=null;function Er(y){if(y=Zs(y)){if(typeof Lr!="function")throw Error(n(280));var x=y.stateNode;x&&(x=Kw(x),Lr(y.stateNode,y.type,x))}}function Do(y){Br?mi?mi.push(y):mi=[y]:Br=y}function iu(){if(Br){var y=Br,x=mi;if(mi=Br=null,Er(y),x)for(y=0;y<x.length;y++)Er(x[y])}}function hs(y,x){return y(x)}function Ks(){}var Tr=!1;function li(y,x,k){if(Tr)return y(x,k);Tr=!0;try{return hs(y,x,k)}finally{Tr=!1,(Br!==null||mi!==null)&&(Ks(),iu())}}function Dr(y,x){var k=y.stateNode;if(k===null)return null;var O=Kw(k);if(O===null)return null;k=O[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(y=y.type,O=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!O;break e;default:y=!1}if(y)return null;if(k&&typeof k!="function")throw Error(n(231,x,typeof k));return k}var no=!1;if(a)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){no=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{no=!1}function gi(y,x,k,O,V,Q,se,_e,De){var Qe=Array.prototype.slice.call(arguments,3);try{x.apply(k,Qe)}catch(At){this.onError(At)}}var ko=!1,po=null,Ko=!1,Ea=null,Sc={onError:function(y){ko=!0,po=y}};function pr(y,x,k,O,V,Q,se,_e,De){ko=!1,po=null,gi.apply(Sc,arguments)}function ou(y,x,k,O,V,Q,se,_e,De){if(pr.apply(this,arguments),ko){if(ko){var Qe=po;ko=!1,po=null}else throw Error(n(198));Ko||(Ko=!0,Ea=Qe)}}function Ri(y){var x=y,k=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,x.flags&4098&&(k=x.return),y=x.return;while(y)}return x.tag===3?k:null}function ks(y){if(y.tag===13){var x=y.memoizedState;if(x===null&&(y=y.alternate,y!==null&&(x=y.memoizedState)),x!==null)return x.dehydrated}return null}function Xo(y){if(Ri(y)!==y)throw Error(n(188))}function Df(y){var x=y.alternate;if(!x){if(x=Ri(y),x===null)throw Error(n(188));return x!==y?null:y}for(var k=y,O=x;;){var V=k.return;if(V===null)break;var Q=V.alternate;if(Q===null){if(O=V.return,O!==null){k=O;continue}break}if(V.child===Q.child){for(Q=V.child;Q;){if(Q===k)return Xo(V),y;if(Q===O)return Xo(V),x;Q=Q.sibling}throw Error(n(188))}if(k.return!==O.return)k=V,O=Q;else{for(var se=!1,_e=V.child;_e;){if(_e===k){se=!0,k=V,O=Q;break}if(_e===O){se=!0,O=V,k=Q;break}_e=_e.sibling}if(!se){for(_e=Q.child;_e;){if(_e===k){se=!0,k=Q,O=V;break}if(_e===O){se=!0,O=Q,k=V;break}_e=_e.sibling}if(!se)throw Error(n(189))}}if(k.alternate!==O)throw Error(n(190))}if(k.tag!==3)throw Error(n(188));return k.stateNode.current===k?y:x}function Ac(y){return y=Df(y),y!==null?Dl(y):null}function Dl(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=Dl(y);if(x!==null)return x;y=y.sibling}return null}var kl=t.unstable_scheduleCallback,Yu=t.unstable_cancelCallback,Ku=t.unstable_shouldYield,Is=t.unstable_requestPaint,en=t.unstable_now,Bi=t.unstable_getCurrentPriorityLevel,mo=t.unstable_ImmediatePriority,ps=t.unstable_UserBlockingPriority,Ei=t.unstable_NormalPriority,su=t.unstable_LowPriority,Dd=t.unstable_IdlePriority,Il=null,Qo=null;function Qh(y){if(Qo&&typeof Qo.onCommitFiberRoot=="function")try{Qo.onCommitFiberRoot(Il,y,void 0,(y.current.flags&128)===128)}catch{}}var Jo=Math.clz32?Math.clz32:ye,ue=Math.log,Ae=Math.LN2;function ye(y){return y>>>=0,y===0?32:31-(ue(y)/Ae|0)|0}var $e=64,je=4194304;function Me(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function lt(y,x){var k=y.pendingLanes;if(k===0)return 0;var O=0,V=y.suspendedLanes,Q=y.pingedLanes,se=k&268435455;if(se!==0){var _e=se&~V;_e!==0?O=Me(_e):(Q&=se,Q!==0&&(O=Me(Q)))}else se=k&~V,se!==0?O=Me(se):Q!==0&&(O=Me(Q));if(O===0)return 0;if(x!==0&&x!==O&&!(x&V)&&(V=O&-O,Q=x&-x,V>=Q||V===16&&(Q&4194240)!==0))return x;if(O&4&&(O|=k&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=O;0<x;)k=31-Jo(x),V=1<<k,O|=y[k],x&=~V;return O}function wt(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tt(y,x){for(var k=y.suspendedLanes,O=y.pingedLanes,V=y.expirationTimes,Q=y.pendingLanes;0<Q;){var se=31-Jo(Q),_e=1<<se,De=V[se];De===-1?(!(_e&k)||_e&O)&&(V[se]=wt(_e,x)):De<=x&&(y.expiredLanes|=_e),Q&=~_e}}function _t(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function Ot(){var y=$e;return $e<<=1,!($e&4194240)&&($e=64),y}function Wt(y){for(var x=[],k=0;31>k;k++)x.push(y);return x}function On(y,x,k){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-Jo(x),y[x]=k}function dn(y,x){var k=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var O=y.eventTimes;for(y=y.expirationTimes;0<k;){var V=31-Jo(k),Q=1<<V;x[V]=0,O[V]=-1,y[V]=-1,k&=~Q}}function Qn(y,x){var k=y.entangledLanes|=x;for(y=y.entanglements;k;){var O=31-Jo(k),V=1<<O;V&x|y[O]&x&&(y[O]|=x),k&=~V}}var hn=0;function lr(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var Io,Ta,Rl,kd,Dc,Id=!1,ms=[],Yi=null,gs=null,Ca=null,kc=new Map,Sa=new Map,au=[],Vg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nl(y,x){switch(y){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":Ca=null;break;case"pointerover":case"pointerout":kc.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(x.pointerId)}}function ro(y,x,k,O,V,Q){return y===null||y.nativeEvent!==Q?(y={blockedOn:x,domEventName:k,eventSystemFlags:O,nativeEvent:Q,targetContainers:[V]},x!==null&&(x=Zs(x),x!==null&&Ta(x)),y):(y.eventSystemFlags|=O,x=y.targetContainers,V!==null&&x.indexOf(V)===-1&&x.push(V),y)}function Sv(y,x,k,O,V){switch(x){case"focusin":return Yi=ro(Yi,y,x,k,O,V),!0;case"dragenter":return gs=ro(gs,y,x,k,O,V),!0;case"mouseover":return Ca=ro(Ca,y,x,k,O,V),!0;case"pointerover":var Q=V.pointerId;return kc.set(Q,ro(kc.get(Q)||null,y,x,k,O,V)),!0;case"gotpointercapture":return Q=V.pointerId,Sa.set(Q,ro(Sa.get(Q)||null,y,x,k,O,V)),!0}return!1}function zm(y){var x=Of(y.target);if(x!==null){var k=Ri(x);if(k!==null){if(x=k.tag,x===13){if(x=ks(k),x!==null){y.blockedOn=x,Dc(y.priority,function(){Rl(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){y.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}y.blockedOn=null}function Ic(y){if(y.blockedOn!==null)return!1;for(var x=y.targetContainers;0<x.length;){var k=br(y.domEventName,y.eventSystemFlags,x[0],y.nativeEvent);if(k===null){k=y.nativeEvent;var O=new k.constructor(k.type,k);$n=O,k.target.dispatchEvent(O),$n=null}else return x=Zs(k),x!==null&&Ta(x),y.blockedOn=k,!1;x.shift()}return!0}function kf(y,x,k){Ic(y)&&k.delete(x)}function Hg(){Id=!1,Yi!==null&&Ic(Yi)&&(Yi=null),gs!==null&&Ic(gs)&&(gs=null),Ca!==null&&Ic(Ca)&&(Ca=null),kc.forEach(kf),Sa.forEach(kf)}function cr(y,x){y.blockedOn===x&&(y.blockedOn=null,Id||(Id=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Hg)))}function or(y){function x(V){return cr(V,y)}if(0<ms.length){cr(ms[0],y);for(var k=1;k<ms.length;k++){var O=ms[k];O.blockedOn===y&&(O.blockedOn=null)}}for(Yi!==null&&cr(Yi,y),gs!==null&&cr(gs,y),Ca!==null&&cr(Ca,y),kc.forEach(x),Sa.forEach(x),k=0;k<au.length;k++)O=au[k],O.blockedOn===y&&(O.blockedOn=null);for(;0<au.length&&(k=au[0],k.blockedOn===null);)zm(k),k.blockedOn===null&&au.shift()}var Rc=E.ReactCurrentBatchConfig,ve=!0;function Ie(y,x,k,O){var V=hn,Q=Rc.transition;Rc.transition=null;try{hn=1,on(y,x,k,O)}finally{hn=V,Rc.transition=Q}}function Ze(y,x,k,O){var V=hn,Q=Rc.transition;Rc.transition=null;try{hn=4,on(y,x,k,O)}finally{hn=V,Rc.transition=Q}}function on(y,x,k,O){if(ve){var V=br(y,x,k,O);if(V===null)LC(y,x,O,Jn,k),Nl(y,O);else if(Sv(V,y,x,k,O))O.stopPropagation();else if(Nl(y,O),x&4&&-1<Vg.indexOf(y)){for(;V!==null;){var Q=Zs(V);if(Q!==null&&Io(Q),Q=br(y,x,k,O),Q===null&&LC(y,x,O,Jn,k),Q===V)break;V=Q}V!==null&&O.stopPropagation()}else LC(y,x,O,null,k)}}var Jn=null;function br(y,x,k,O){if(Jn=null,y=Kr(O),y=Of(y),y!==null)if(x=Ri(y),x===null)y=null;else if(k=x.tag,k===13){if(y=ks(x),y!==null)return y;y=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null);return Jn=y,null}function Xr(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bi()){case mo:return 1;case ps:return 4;case Ei:case su:return 16;case Dd:return 536870912;default:return 16}default:return 16}}var pn=null,kr=null,jr=null;function Ro(){if(jr)return jr;var y,x=kr,k=x.length,O,V="value"in pn?pn.value:pn.textContent,Q=V.length;for(y=0;y<k&&x[y]===V[y];y++);var se=k-y;for(O=1;O<=se&&x[k-O]===V[Q-O];O++);return jr=V.slice(y,1<O?1-O:void 0)}function uu(y){var x=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&x===13&&(y=13)):y=x,y===10&&(y=13),32<=y||y===13?y:0}function Ni(){return!0}function If(){return!1}function go(y){function x(k,O,V,Q,se){this._reactName=k,this._targetInst=V,this.type=O,this.nativeEvent=Q,this.target=se,this.currentTarget=null;for(var _e in y)y.hasOwnProperty(_e)&&(k=y[_e],this[_e]=k?k(Q):Q[_e]);return this.isDefaultPrevented=(Q.defaultPrevented!=null?Q.defaultPrevented:Q.returnValue===!1)?Ni:If,this.isPropagationStopped=If,this}return q(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=Ni)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=Ni)},persist:function(){},isPersistent:Ni}),x}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Um=go(Pl),Nc=q({},Pl,{view:0,detail:0}),Pw=go(Nc),ys,Rd,Zo,Vm=q({},Nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==Zo&&(Zo&&y.type==="mousemove"?(ys=y.screenX-Zo.screenX,Rd=y.screenY-Zo.screenY):Rd=ys=0,Zo=y),ys)},movementY:function(y){return"movementY"in y?y.movementY:Rd}}),Hm=go(Vm),Ol=q({},Vm,{dataTransfer:0}),qm=go(Ol),Jh=q({},Nc,{relatedTarget:0}),oi=go(Jh),Pc=q({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),Oc=go(Pc),Ow=q({},Pl,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),qg=go(Ow),Fw=q({},Pl,{data:0}),Av=go(Fw),Wg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nd(y){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(y):(y=Wm[y])?!!x[y]:!1}function Rf(){return Nd}var N=q({},Nc,{key:function(y){if(y.key){var x=Wg[y.key]||y.key;if(x!=="Unidentified")return x}return y.type==="keypress"?(y=uu(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?Xs[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(y){return y.type==="keypress"?uu(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?uu(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),K=go(N),ne=q({},Vm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ce=go(ne),He=q({},Nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),nt=go(He),Ut=q({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wr=go(Ut),es=q({},Vm,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),xr=go(es),Qr=[9,13,27,32],io=a&&"CompositionEvent"in window,Qs=null;a&&"documentMode"in document&&(Qs=document.documentMode);var lu=a&&"TextEvent"in window&&!Qs,Zh=a&&(!io||Qs&&8<Qs&&11>=Qs),Gg=" ",KR=!1;function XR(y,x){switch(y){case"keyup":return Qr.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QR(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var Yg=!1;function Kg(y,x){switch(y){case"compositionend":return QR(x);case"keypress":return x.which!==32?null:(KR=!0,Gg);case"textInput":return y=x.data,y===Gg&&KR?null:y;default:return null}}function qL(y,x){if(Yg)return y==="compositionend"||!io&&XR(y,x)?(y=Ro(),jr=kr=pn=null,Yg=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Zh&&x.locale!=="ko"?null:x.data;default:return null}}var WL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mw(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x==="input"?!!WL[y.type]:x==="textarea"}function OC(y,x,k,O){Do(O),x=qw(x,"onChange"),0<x.length&&(k=new Um("onChange","change",null,k,O),y.push({event:k,listeners:x}))}var Fl=null,ep=null;function GL(y){iN(y,0)}function $w(y){var x=er(y);if(he(x))return y}function YL(y,x){if(y==="change")return x}var Gm=!1;if(a){var Xu;if(a){var Lw="oninput"in document;if(!Lw){var JR=document.createElement("div");JR.setAttribute("oninput","return;"),Lw=typeof JR.oninput=="function"}Xu=Lw}else Xu=!1;Gm=Xu&&(!document.documentMode||9<document.documentMode)}function ZR(){Fl&&(Fl.detachEvent("onpropertychange",eN),ep=Fl=null)}function eN(y){if(y.propertyName==="value"&&$w(ep)){var x=[];OC(x,ep,y,Kr(y)),li(GL,x)}}function KL(y,x,k){y==="focusin"?(ZR(),Fl=x,ep=k,Fl.attachEvent("onpropertychange",eN)):y==="focusout"&&ZR()}function XL(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return $w(ep)}function Xg(y,x){if(y==="click")return $w(x)}function Be(y,x){if(y==="input"||y==="change")return $w(x)}function ft(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var Xe=typeof Object.is=="function"?Object.is:ft;function Xt(y,x){if(Xe(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var k=Object.keys(y),O=Object.keys(x);if(k.length!==O.length)return!1;for(O=0;O<k.length;O++){var V=k[O];if(!u.call(x,V)||!Xe(y[V],x[V]))return!1}return!0}function jn(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function zr(y,x){var k=jn(y);y=0;for(var O;k;){if(k.nodeType===3){if(O=y+k.textContent.length,y<=x&&O>=x)return{node:k,offset:x-y};y=O}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=jn(k)}}function No(y,x){return y&&x?y===x?!0:y&&y.nodeType===3?!1:x&&x.nodeType===3?No(y,x.parentNode):"contains"in y?y.contains(x):y.compareDocumentPosition?!!(y.compareDocumentPosition(x)&16):!1:!1}function ci(){for(var y=window,x=Fe();x instanceof y.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)y=x.contentWindow;else break;x=Fe(y.document)}return x}function Dv(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x&&(x==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||x==="textarea"||y.contentEditable==="true")}function QL(y){var x=ci(),k=y.focusedElem,O=y.selectionRange;if(x!==k&&k&&k.ownerDocument&&No(k.ownerDocument.documentElement,k)){if(O!==null&&Dv(k)){if(x=O.start,y=O.end,y===void 0&&(y=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(y,k.value.length);else if(y=(x=k.ownerDocument||document)&&x.defaultView||window,y.getSelection){y=y.getSelection();var V=k.textContent.length,Q=Math.min(O.start,V);O=O.end===void 0?Q:Math.min(O.end,V),!y.extend&&Q>O&&(V=O,O=Q,Q=V),V=zr(k,Q);var se=zr(k,O);V&&se&&(y.rangeCount!==1||y.anchorNode!==V.node||y.anchorOffset!==V.offset||y.focusNode!==se.node||y.focusOffset!==se.offset)&&(x=x.createRange(),x.setStart(V.node,V.offset),y.removeAllRanges(),Q>O?(y.addRange(x),y.extend(se.node,se.offset)):(x.setEnd(se.node,se.offset),y.addRange(x)))}}for(x=[],y=k;y=y.parentNode;)y.nodeType===1&&x.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)y=x[k],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var Ml=a&&"documentMode"in document&&11>=document.documentMode,Pd=null,FC=null,Nf=null,Qg=!1;function kv(y,x,k){var O=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Qg||Pd==null||Pd!==Fe(O)||(O=Pd,"selectionStart"in O&&Dv(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),Nf&&Xt(Nf,O)||(Nf=O,O=qw(FC,"onSelect"),0<O.length&&(x=new Um("onSelect","select",null,x,k),y.push({event:x,listeners:O}),x.target=Pd)))}function Ur(y,x){var k={};return k[y.toLowerCase()]=x.toLowerCase(),k["Webkit"+y]="webkit"+x,k["Moz"+y]="moz"+x,k}var Jg={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionend:Ur("Transition","TransitionEnd")},Bw={},Iv={};a&&(Iv=document.createElement("div").style,"AnimationEvent"in window||(delete Jg.animationend.animation,delete Jg.animationiteration.animation,delete Jg.animationstart.animation),"TransitionEvent"in window||delete Jg.transitionend.transition);function jw(y){if(Bw[y])return Bw[y];if(!Jg[y])return y;var x=Jg[y],k;for(k in x)if(x.hasOwnProperty(k)&&k in Iv)return Bw[y]=x[k];return y}var tN=jw("animationend"),nN=jw("animationiteration"),Rv=jw("animationstart"),Od=jw("transitionend"),Nv=new Map,MC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fc(y,x){Nv.set(y,x),o(x,[y])}for(var zw=0;zw<MC.length;zw++){var Uw=MC[zw],Vw=Uw.toLowerCase(),rN=Uw[0].toUpperCase()+Uw.slice(1);Fc(Vw,"on"+rN)}Fc(tN,"onAnimationEnd"),Fc(nN,"onAnimationIteration"),Fc(Rv,"onAnimationStart"),Fc("dblclick","onDoubleClick"),Fc("focusin","onFocus"),Fc("focusout","onBlur"),Fc(Od,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ym=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fd));function Pv(y,x,k){var O=y.type||"unknown-event";y.currentTarget=k,ou(O,x,void 0,y),y.currentTarget=null}function iN(y,x){x=(x&4)!==0;for(var k=0;k<y.length;k++){var O=y[k],V=O.event;O=O.listeners;e:{var Q=void 0;if(x)for(var se=O.length-1;0<=se;se--){var _e=O[se],De=_e.instance,Qe=_e.currentTarget;if(_e=_e.listener,De!==Q&&V.isPropagationStopped())break e;Pv(V,_e,Qe),Q=De}else for(se=0;se<O.length;se++){if(_e=O[se],De=_e.instance,Qe=_e.currentTarget,_e=_e.listener,De!==Q&&V.isPropagationStopped())break e;Pv(V,_e,Qe),Q=De}}}if(Ko)throw y=Ea,Ko=!1,Ea=null,y}function Pi(y,x){var k=x[Yw];k===void 0&&(k=x[Yw]=new Set);var O=y+"__bubble";k.has(O)||(Hw(x,y,2,!1),k.add(O))}function $C(y,x,k){var O=0;x&&(O|=4),Hw(k,y,O,x)}var Km="_reactListening"+Math.random().toString(36).slice(2);function tp(y){if(!y[Km]){y[Km]=!0,r.forEach(function(k){k!=="selectionchange"&&(Ym.has(k)||$C(k,!1,y),$C(k,!0,y))});var x=y.nodeType===9?y:y.ownerDocument;x===null||x[Km]||(x[Km]=!0,$C("selectionchange",!1,x))}}function Hw(y,x,k,O){switch(Xr(x)){case 1:var V=Ie;break;case 4:V=Ze;break;default:V=on}k=V.bind(null,x,k,y),V=void 0,!no||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(V=!0),O?V!==void 0?y.addEventListener(x,k,{capture:!0,passive:V}):y.addEventListener(x,k,!0):V!==void 0?y.addEventListener(x,k,{passive:V}):y.addEventListener(x,k,!1)}function LC(y,x,k,O,V){var Q=O;if(!(x&1)&&!(x&2)&&O!==null)e:for(;;){if(O===null)return;var se=O.tag;if(se===3||se===4){var _e=O.stateNode.containerInfo;if(_e===V||_e.nodeType===8&&_e.parentNode===V)break;if(se===4)for(se=O.return;se!==null;){var De=se.tag;if((De===3||De===4)&&(De=se.stateNode.containerInfo,De===V||De.nodeType===8&&De.parentNode===V))return;se=se.return}for(;_e!==null;){if(se=Of(_e),se===null)return;if(De=se.tag,De===5||De===6){O=Q=se;continue e}_e=_e.parentNode}}O=O.return}li(function(){var Qe=Q,At=Kr(k),Nt=[];e:{var Et=Nv.get(y);if(Et!==void 0){var Qt=Um,an=y;switch(y){case"keypress":if(uu(k)===0)break e;case"keydown":case"keyup":Qt=K;break;case"focusin":an="focus",Qt=oi;break;case"focusout":an="blur",Qt=oi;break;case"beforeblur":case"afterblur":Qt=oi;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qt=Hm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qt=qm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qt=nt;break;case tN:case nN:case Rv:Qt=Oc;break;case Od:Qt=Wr;break;case"scroll":Qt=Pw;break;case"wheel":Qt=xr;break;case"copy":case"cut":case"paste":Qt=qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qt=ce}var cn=(x&4)!==0,so=!cn&&y==="scroll",qe=cn?Et!==null?Et+"Capture":null:Et;cn=[];for(var Le=Qe,Ye;Le!==null;){Ye=Le;var Lt=Ye.stateNode;if(Ye.tag===5&&Lt!==null&&(Ye=Lt,qe!==null&&(Lt=Dr(Le,qe),Lt!=null&&cn.push(Zg(Le,Lt,Ye)))),so)break;Le=Le.return}0<cn.length&&(Et=new Qt(Et,an,null,k,At),Nt.push({event:Et,listeners:cn}))}}if(!(x&7)){e:{if(Et=y==="mouseover"||y==="pointerover",Qt=y==="mouseout"||y==="pointerout",Et&&k!==$n&&(an=k.relatedTarget||k.fromElement)&&(Of(an)||an[Qu]))break e;if((Qt||Et)&&(Et=At.window===At?At:(Et=At.ownerDocument)?Et.defaultView||Et.parentWindow:window,Qt?(an=k.relatedTarget||k.toElement,Qt=Qe,an=an?Of(an):null,an!==null&&(so=Ri(an),an!==so||an.tag!==5&&an.tag!==6)&&(an=null)):(Qt=null,an=Qe),Qt!==an)){if(cn=Hm,Lt="onMouseLeave",qe="onMouseEnter",Le="mouse",(y==="pointerout"||y==="pointerover")&&(cn=ce,Lt="onPointerLeave",qe="onPointerEnter",Le="pointer"),so=Qt==null?Et:er(Qt),Ye=an==null?Et:er(an),Et=new cn(Lt,Le+"leave",Qt,k,At),Et.target=so,Et.relatedTarget=Ye,Lt=null,Of(At)===Qe&&(cn=new cn(qe,Le+"enter",an,k,At),cn.target=Ye,cn.relatedTarget=so,Lt=cn),so=Lt,Qt&&an)t:{for(cn=Qt,qe=an,Le=0,Ye=cn;Ye;Ye=ey(Ye))Le++;for(Ye=0,Lt=qe;Lt;Lt=ey(Lt))Ye++;for(;0<Le-Ye;)cn=ey(cn),Le--;for(;0<Ye-Le;)qe=ey(qe),Ye--;for(;Le--;){if(cn===qe||qe!==null&&cn===qe.alternate)break t;cn=ey(cn),qe=ey(qe)}cn=null}else cn=null;Qt!==null&&Po(Nt,Et,Qt,cn,!1),an!==null&&so!==null&&Po(Nt,so,an,cn,!0)}}e:{if(Et=Qe?er(Qe):window,Qt=Et.nodeName&&Et.nodeName.toLowerCase(),Qt==="select"||Qt==="input"&&Et.type==="file")var fn=YL;else if(Mw(Et))if(Gm)fn=Be;else{fn=XL;var Sn=KL}else(Qt=Et.nodeName)&&Qt.toLowerCase()==="input"&&(Et.type==="checkbox"||Et.type==="radio")&&(fn=Xg);if(fn&&(fn=fn(y,Qe))){OC(Nt,fn,k,At);break e}Sn&&Sn(y,Et,Qe),y==="focusout"&&(Sn=Et._wrapperState)&&Sn.controlled&&Et.type==="number"&&pt(Et,"number",Et.value)}switch(Sn=Qe?er(Qe):window,y){case"focusin":(Mw(Sn)||Sn.contentEditable==="true")&&(Pd=Sn,FC=Qe,Nf=null);break;case"focusout":Nf=FC=Pd=null;break;case"mousedown":Qg=!0;break;case"contextmenu":case"mouseup":case"dragend":Qg=!1,kv(Nt,k,At);break;case"selectionchange":if(Ml)break;case"keydown":case"keyup":kv(Nt,k,At)}var An;if(io)e:{switch(y){case"compositionstart":var Fn="onCompositionStart";break e;case"compositionend":Fn="onCompositionEnd";break e;case"compositionupdate":Fn="onCompositionUpdate";break e}Fn=void 0}else Yg?XR(y,k)&&(Fn="onCompositionEnd"):y==="keydown"&&k.keyCode===229&&(Fn="onCompositionStart");Fn&&(Zh&&k.locale!=="ko"&&(Yg||Fn!=="onCompositionStart"?Fn==="onCompositionEnd"&&Yg&&(An=Ro()):(pn=At,kr="value"in pn?pn.value:pn.textContent,Yg=!0)),Sn=qw(Qe,Fn),0<Sn.length&&(Fn=new Av(Fn,y,null,k,At),Nt.push({event:Fn,listeners:Sn}),An?Fn.data=An:(An=QR(k),An!==null&&(Fn.data=An)))),(An=lu?Kg(y,k):qL(y,k))&&(Qe=qw(Qe,"onBeforeInput"),0<Qe.length&&(At=new Av("onBeforeInput","beforeinput",null,k,At),Nt.push({event:At,listeners:Qe}),At.data=An))}iN(Nt,x)})}function Zg(y,x,k){return{instance:y,listener:x,currentTarget:k}}function qw(y,x){for(var k=x+"Capture",O=[];y!==null;){var V=y,Q=V.stateNode;V.tag===5&&Q!==null&&(V=Q,Q=Dr(y,k),Q!=null&&O.unshift(Zg(y,Q,V)),Q=Dr(y,x),Q!=null&&O.push(Zg(y,Q,V))),y=y.return}return O}function ey(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function Po(y,x,k,O,V){for(var Q=x._reactName,se=[];k!==null&&k!==O;){var _e=k,De=_e.alternate,Qe=_e.stateNode;if(De!==null&&De===O)break;_e.tag===5&&Qe!==null&&(_e=Qe,V?(De=Dr(k,Q),De!=null&&se.unshift(Zg(k,De,_e))):V||(De=Dr(k,Q),De!=null&&se.push(Zg(k,De,_e)))),k=k.return}se.length!==0&&y.push({event:x,listeners:se})}var Js=/\r\n?/g,JL=/\u0000|\uFFFD/g;function oN(y){return(typeof y=="string"?y:""+y).replace(Js,`
`).replace(JL,"")}function Ov(y,x,k){if(x=oN(x),oN(y)!==x&&k)throw Error(n(425))}function Ww(){}var Fv=null,Xm=null;function Mv(y,x){return y==="textarea"||y==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var np=typeof setTimeout=="function"?setTimeout:void 0,$v=typeof clearTimeout=="function"?clearTimeout:void 0,ty=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof ty<"u"?function(y){return ty.resolve(null).then(y).catch(ny)}:np;function ny(y){setTimeout(function(){throw y})}function BC(y,x){var k=x,O=0;do{var V=k.nextSibling;if(y.removeChild(k),V&&V.nodeType===8)if(k=V.data,k==="/$"){if(O===0){y.removeChild(V),or(x);return}O--}else k!=="$"&&k!=="$?"&&k!=="$!"||O++;k=V}while(k);or(x)}function rp(y){for(;y!=null;y=y.nextSibling){var x=y.nodeType;if(x===1||x===3)break;if(x===8){if(x=y.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return y}function sN(y){y=y.previousSibling;for(var x=0;y;){if(y.nodeType===8){var k=y.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return y;x--}else k==="/$"&&x++}y=y.previousSibling}return null}var ry=Math.random().toString(36).slice(2),Pf="__reactFiber$"+ry,ip="__reactProps$"+ry,Qu="__reactContainer$"+ry,Yw="__reactEvents$"+ry,ae="__reactListeners$"+ry,iy="__reactHandles$"+ry;function Of(y){var x=y[Pf];if(x)return x;for(var k=y.parentNode;k;){if(x=k[Qu]||k[Pf]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(y=sN(y);y!==null;){if(k=y[Pf])return k;y=sN(y)}return x}y=k,k=y.parentNode}return null}function Zs(y){return y=y[Pf]||y[Qu],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function er(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(n(33))}function Kw(y){return y[ip]||null}var jC=[],oy=-1;function cu(y){return{current:y}}function Oi(y){0>oy||(y.current=jC[oy],jC[oy]=null,oy--)}function Ti(y,x){oy++,jC[oy]=y.current,y.current=x}var op={},ea=cu(op),fu=cu(!1),Aa=op;function sy(y,x){var k=y.type.contextTypes;if(!k)return op;var O=y.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===x)return O.__reactInternalMemoizedMaskedChildContext;var V={},Q;for(Q in k)V[Q]=x[Q];return O&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=V),V}function du(y){return y=y.childContextTypes,y!=null}function Xw(){Oi(fu),Oi(ea)}function aN(y,x,k){if(ea.current!==op)throw Error(n(168));Ti(ea,x),Ti(fu,k)}function uN(y,x,k){var O=y.stateNode;if(x=x.childContextTypes,typeof O.getChildContext!="function")return k;O=O.getChildContext();for(var V in O)if(!(V in x))throw Error(n(108,Ee(y)||"Unknown",V));return q({},k,O)}function $l(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||op,Aa=ea.current,Ti(ea,y),Ti(fu,fu.current),!0}function lN(y,x,k){var O=y.stateNode;if(!O)throw Error(n(169));k?(y=uN(y,x,Aa),O.__reactInternalMemoizedMergedChildContext=y,Oi(fu),Oi(ea),Ti(ea,y)):Oi(fu),Ti(fu,k)}var Md=null,Qw=!1,zC=!1;function cN(y){Md===null?Md=[y]:Md.push(y)}function Qm(y){Qw=!0,cN(y)}function sp(){if(!zC&&Md!==null){zC=!0;var y=0,x=hn;try{var k=Md;for(hn=1;y<k.length;y++){var O=k[y];do O=O(!0);while(O!==null)}Md=null,Qw=!1}catch(V){throw Md!==null&&(Md=Md.slice(y+1)),kl(mo,sp),V}finally{hn=x,zC=!1}}return null}var ay=[],ta=0,Jw=null,Zw=0,Ll=[],Bl=0,Jm=null,Ff=1,Mf="";function Zm(y,x){ay[ta++]=Zw,ay[ta++]=Jw,Jw=y,Zw=x}function fN(y,x,k){Ll[Bl++]=Ff,Ll[Bl++]=Mf,Ll[Bl++]=Jm,Jm=y;var O=Ff;y=Mf;var V=32-Jo(O)-1;O&=~(1<<V),k+=1;var Q=32-Jo(x)+V;if(30<Q){var se=V-V%5;Q=(O&(1<<se)-1).toString(32),O>>=se,V-=se,Ff=1<<32-Jo(x)+V|k<<V|O,Mf=Q+y}else Ff=1<<Q|k<<V|O,Mf=y}function Lv(y){y.return!==null&&(Zm(y,1),fN(y,1,0))}function e0(y){for(;y===Jw;)Jw=ay[--ta],ay[ta]=null,Zw=ay[--ta],ay[ta]=null;for(;y===Jm;)Jm=Ll[--Bl],Ll[Bl]=null,Mf=Ll[--Bl],Ll[Bl]=null,Ff=Ll[--Bl],Ll[Bl]=null}var na=null,Ju=null,Fi=!1,Mc=null;function $f(y,x){var k=Wl(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=y,x=y.deletions,x===null?(y.deletions=[k],y.flags|=16):x.push(k)}function e_(y,x){switch(y.tag){case 5:var k=y.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(y.stateNode=x,na=y,Ju=rp(x.firstChild),!0):!1;case 6:return x=y.pendingProps===""||x.nodeType!==3?null:x,x!==null?(y.stateNode=x,na=y,Ju=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=Jm!==null?{id:Ff,overflow:Mf}:null,y.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Wl(18,null,null,0),k.stateNode=x,k.return=y,y.child=k,na=y,Ju=null,!0):!1;default:return!1}}function $d(y){return(y.mode&1)!==0&&(y.flags&128)===0}function hu(y){if(Fi){var x=Ju;if(x){var k=x;if(!e_(y,x)){if($d(y))throw Error(n(418));x=rp(k.nextSibling);var O=na;x&&e_(y,x)?$f(O,k):(y.flags=y.flags&-4097|2,Fi=!1,na=y)}}else{if($d(y))throw Error(n(418));y.flags=y.flags&-4097|2,Fi=!1,na=y}}}function dN(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;na=y}function Bv(y){if(y!==na)return!1;if(!Fi)return dN(y),Fi=!0,!1;var x;if((x=y.tag!==3)&&!(x=y.tag!==5)&&(x=y.type,x=x!=="head"&&x!=="body"&&!Mv(y.type,y.memoizedProps)),x&&(x=Ju)){if($d(y))throw UC(),Error(n(418));for(;x;)$f(y,x),x=rp(x.nextSibling)}if(dN(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));e:{for(y=y.nextSibling,x=0;y;){if(y.nodeType===8){var k=y.data;if(k==="/$"){if(x===0){Ju=rp(y.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}y=y.nextSibling}Ju=null}}else Ju=na?rp(y.stateNode.nextSibling):null;return!0}function UC(){for(var y=Ju;y;)y=rp(y.nextSibling)}function Lf(){Ju=na=null,Fi=!1}function Bf(y){Mc===null?Mc=[y]:Mc.push(y)}var hN=E.ReactCurrentBatchConfig;function jv(y,x,k){if(y=k.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(n(309));var O=k.stateNode}if(!O)throw Error(n(147,y));var V=O,Q=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===Q?x.ref:(x=function(se){var _e=V.refs;se===null?delete _e[Q]:_e[Q]=se},x._stringRef=Q,x)}if(typeof y!="string")throw Error(n(284));if(!k._owner)throw Error(n(290,y))}return y}function t0(y,x){throw y=Object.prototype.toString.call(x),Error(n(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function pN(y){var x=y._init;return x(y._payload)}function VC(y){function x(qe,Le){if(y){var Ye=qe.deletions;Ye===null?(qe.deletions=[Le],qe.flags|=16):Ye.push(Le)}}function k(qe,Le){if(!y)return null;for(;Le!==null;)x(qe,Le),Le=Le.sibling;return null}function O(qe,Le){for(qe=new Map;Le!==null;)Le.key!==null?qe.set(Le.key,Le):qe.set(Le.index,Le),Le=Le.sibling;return qe}function V(qe,Le){return qe=Vc(qe,Le),qe.index=0,qe.sibling=null,qe}function Q(qe,Le,Ye){return qe.index=Ye,y?(Ye=qe.alternate,Ye!==null?(Ye=Ye.index,Ye<Le?(qe.flags|=2,Le):Ye):(qe.flags|=2,Le)):(qe.flags|=1048576,Le)}function se(qe){return y&&qe.alternate===null&&(qe.flags|=2),qe}function _e(qe,Le,Ye,Lt){return Le===null||Le.tag!==6?(Le=kS(Ye,qe.mode,Lt),Le.return=qe,Le):(Le=V(Le,Ye),Le.return=qe,Le)}function De(qe,Le,Ye,Lt){var fn=Ye.type;return fn===S?At(qe,Le,Ye.props.children,Lt,Ye.key):Le!==null&&(Le.elementType===fn||typeof fn=="object"&&fn!==null&&fn.$$typeof===W&&pN(fn)===Le.type)?(Lt=V(Le,Ye.props),Lt.ref=jv(qe,Le,Ye),Lt.return=qe,Lt):(Lt=F_(Ye.type,Ye.key,Ye.props,null,qe.mode,Lt),Lt.ref=jv(qe,Le,Ye),Lt.return=qe,Lt)}function Qe(qe,Le,Ye,Lt){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==Ye.containerInfo||Le.stateNode.implementation!==Ye.implementation?(Le=IS(Ye,qe.mode,Lt),Le.return=qe,Le):(Le=V(Le,Ye.children||[]),Le.return=qe,Le)}function At(qe,Le,Ye,Lt,fn){return Le===null||Le.tag!==7?(Le=d0(Ye,qe.mode,Lt,fn),Le.return=qe,Le):(Le=V(Le,Ye),Le.return=qe,Le)}function Nt(qe,Le,Ye){if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Le=kS(""+Le,qe.mode,Ye),Le.return=qe,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case T:return Ye=F_(Le.type,Le.key,Le.props,null,qe.mode,Ye),Ye.ref=jv(qe,null,Le),Ye.return=qe,Ye;case C:return Le=IS(Le,qe.mode,Ye),Le.return=qe,Le;case W:var Lt=Le._init;return Nt(qe,Lt(Le._payload),Ye)}if(Dt(Le)||re(Le))return Le=d0(Le,qe.mode,Ye,null),Le.return=qe,Le;t0(qe,Le)}return null}function Et(qe,Le,Ye,Lt){var fn=Le!==null?Le.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return fn!==null?null:_e(qe,Le,""+Ye,Lt);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case T:return Ye.key===fn?De(qe,Le,Ye,Lt):null;case C:return Ye.key===fn?Qe(qe,Le,Ye,Lt):null;case W:return fn=Ye._init,Et(qe,Le,fn(Ye._payload),Lt)}if(Dt(Ye)||re(Ye))return fn!==null?null:At(qe,Le,Ye,Lt,null);t0(qe,Ye)}return null}function Qt(qe,Le,Ye,Lt,fn){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number")return qe=qe.get(Ye)||null,_e(Le,qe,""+Lt,fn);if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case T:return qe=qe.get(Lt.key===null?Ye:Lt.key)||null,De(Le,qe,Lt,fn);case C:return qe=qe.get(Lt.key===null?Ye:Lt.key)||null,Qe(Le,qe,Lt,fn);case W:var Sn=Lt._init;return Qt(qe,Le,Ye,Sn(Lt._payload),fn)}if(Dt(Lt)||re(Lt))return qe=qe.get(Ye)||null,At(Le,qe,Lt,fn,null);t0(Le,Lt)}return null}function an(qe,Le,Ye,Lt){for(var fn=null,Sn=null,An=Le,Fn=Le=0,rs=null;An!==null&&Fn<Ye.length;Fn++){An.index>Fn?(rs=An,An=null):rs=An.sibling;var Vr=Et(qe,An,Ye[Fn],Lt);if(Vr===null){An===null&&(An=rs);break}y&&An&&Vr.alternate===null&&x(qe,An),Le=Q(Vr,Le,Fn),Sn===null?fn=Vr:Sn.sibling=Vr,Sn=Vr,An=rs}if(Fn===Ye.length)return k(qe,An),Fi&&Zm(qe,Fn),fn;if(An===null){for(;Fn<Ye.length;Fn++)An=Nt(qe,Ye[Fn],Lt),An!==null&&(Le=Q(An,Le,Fn),Sn===null?fn=An:Sn.sibling=An,Sn=An);return Fi&&Zm(qe,Fn),fn}for(An=O(qe,An);Fn<Ye.length;Fn++)rs=Qt(An,qe,Fn,Ye[Fn],Lt),rs!==null&&(y&&rs.alternate!==null&&An.delete(rs.key===null?Fn:rs.key),Le=Q(rs,Le,Fn),Sn===null?fn=rs:Sn.sibling=rs,Sn=rs);return y&&An.forEach(function(vp){return x(qe,vp)}),Fi&&Zm(qe,Fn),fn}function cn(qe,Le,Ye,Lt){var fn=re(Ye);if(typeof fn!="function")throw Error(n(150));if(Ye=fn.call(Ye),Ye==null)throw Error(n(151));for(var Sn=fn=null,An=Le,Fn=Le=0,rs=null,Vr=Ye.next();An!==null&&!Vr.done;Fn++,Vr=Ye.next()){An.index>Fn?(rs=An,An=null):rs=An.sibling;var vp=Et(qe,An,Vr.value,Lt);if(vp===null){An===null&&(An=rs);break}y&&An&&vp.alternate===null&&x(qe,An),Le=Q(vp,Le,Fn),Sn===null?fn=vp:Sn.sibling=vp,Sn=vp,An=rs}if(Vr.done)return k(qe,An),Fi&&Zm(qe,Fn),fn;if(An===null){for(;!Vr.done;Fn++,Vr=Ye.next())Vr=Nt(qe,Vr.value,Lt),Vr!==null&&(Le=Q(Vr,Le,Fn),Sn===null?fn=Vr:Sn.sibling=Vr,Sn=Vr);return Fi&&Zm(qe,Fn),fn}for(An=O(qe,An);!Vr.done;Fn++,Vr=Ye.next())Vr=Qt(An,qe,Fn,Vr.value,Lt),Vr!==null&&(y&&Vr.alternate!==null&&An.delete(Vr.key===null?Fn:Vr.key),Le=Q(Vr,Le,Fn),Sn===null?fn=Vr:Sn.sibling=Vr,Sn=Vr);return y&&An.forEach(function(y9){return x(qe,y9)}),Fi&&Zm(qe,Fn),fn}function so(qe,Le,Ye,Lt){if(typeof Ye=="object"&&Ye!==null&&Ye.type===S&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case T:e:{for(var fn=Ye.key,Sn=Le;Sn!==null;){if(Sn.key===fn){if(fn=Ye.type,fn===S){if(Sn.tag===7){k(qe,Sn.sibling),Le=V(Sn,Ye.props.children),Le.return=qe,qe=Le;break e}}else if(Sn.elementType===fn||typeof fn=="object"&&fn!==null&&fn.$$typeof===W&&pN(fn)===Sn.type){k(qe,Sn.sibling),Le=V(Sn,Ye.props),Le.ref=jv(qe,Sn,Ye),Le.return=qe,qe=Le;break e}k(qe,Sn);break}else x(qe,Sn);Sn=Sn.sibling}Ye.type===S?(Le=d0(Ye.props.children,qe.mode,Lt,Ye.key),Le.return=qe,qe=Le):(Lt=F_(Ye.type,Ye.key,Ye.props,null,qe.mode,Lt),Lt.ref=jv(qe,Le,Ye),Lt.return=qe,qe=Lt)}return se(qe);case C:e:{for(Sn=Ye.key;Le!==null;){if(Le.key===Sn)if(Le.tag===4&&Le.stateNode.containerInfo===Ye.containerInfo&&Le.stateNode.implementation===Ye.implementation){k(qe,Le.sibling),Le=V(Le,Ye.children||[]),Le.return=qe,qe=Le;break e}else{k(qe,Le);break}else x(qe,Le);Le=Le.sibling}Le=IS(Ye,qe.mode,Lt),Le.return=qe,qe=Le}return se(qe);case W:return Sn=Ye._init,so(qe,Le,Sn(Ye._payload),Lt)}if(Dt(Ye))return an(qe,Le,Ye,Lt);if(re(Ye))return cn(qe,Le,Ye,Lt);t0(qe,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"?(Ye=""+Ye,Le!==null&&Le.tag===6?(k(qe,Le.sibling),Le=V(Le,Ye),Le.return=qe,qe=Le):(k(qe,Le),Le=kS(Ye,qe.mode,Lt),Le.return=qe,qe=Le),se(qe)):k(qe,Le)}return so}var oo=VC(!0),t_=VC(!1),zv=cu(null),Zu=null,ap=null,uy=null;function Ld(){uy=ap=Zu=null}function n_(y){var x=zv.current;Oi(zv),y._currentValue=x}function Rs(y,x,k){for(;y!==null;){var O=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,O!==null&&(O.childLanes|=x)):O!==null&&(O.childLanes&x)!==x&&(O.childLanes|=x),y===k)break;y=y.return}}function up(y,x){Zu=y,uy=ap=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&x&&(ka=!0),y.firstContext=null)}function jl(y){var x=y._currentValue;if(uy!==y)if(y={context:y,memoizedValue:x,next:null},ap===null){if(Zu===null)throw Error(n(308));ap=y,Zu.dependencies={lanes:0,firstContext:y}}else ap=ap.next=y;return x}var n0=null;function HC(y){n0===null?n0=[y]:n0.push(y)}function r_(y,x,k,O){var V=x.interleaved;return V===null?(k.next=k,HC(x)):(k.next=V.next,V.next=k),x.interleaved=k,Bd(y,O)}function Bd(y,x){y.lanes|=x;var k=y.alternate;for(k!==null&&(k.lanes|=x),k=y,y=y.return;y!==null;)y.childLanes|=x,k=y.alternate,k!==null&&(k.childLanes|=x),k=y,y=y.return;return k.tag===3?k.stateNode:null}var zl=!1;function i_(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mN(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function jd(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function Ul(y,x,k){var O=y.updateQueue;if(O===null)return null;if(O=O.shared,Ir&2){var V=O.pending;return V===null?x.next=x:(x.next=V.next,V.next=x),O.pending=x,Bd(y,k)}return V=O.interleaved,V===null?(x.next=x,HC(O)):(x.next=V.next,V.next=x),O.interleaved=x,Bd(y,k)}function o_(y,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var O=x.lanes;O&=y.pendingLanes,k|=O,x.lanes=k,Qn(y,k)}}function gN(y,x){var k=y.updateQueue,O=y.alternate;if(O!==null&&(O=O.updateQueue,k===O)){var V=null,Q=null;if(k=k.firstBaseUpdate,k!==null){do{var se={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};Q===null?V=Q=se:Q=Q.next=se,k=k.next}while(k!==null);Q===null?V=Q=x:Q=Q.next=x}else V=Q=x;k={baseState:O.baseState,firstBaseUpdate:V,lastBaseUpdate:Q,shared:O.shared,effects:O.effects},y.updateQueue=k;return}y=k.lastBaseUpdate,y===null?k.firstBaseUpdate=x:y.next=x,k.lastBaseUpdate=x}function ly(y,x,k,O){var V=y.updateQueue;zl=!1;var Q=V.firstBaseUpdate,se=V.lastBaseUpdate,_e=V.shared.pending;if(_e!==null){V.shared.pending=null;var De=_e,Qe=De.next;De.next=null,se===null?Q=Qe:se.next=Qe,se=De;var At=y.alternate;At!==null&&(At=At.updateQueue,_e=At.lastBaseUpdate,_e!==se&&(_e===null?At.firstBaseUpdate=Qe:_e.next=Qe,At.lastBaseUpdate=De))}if(Q!==null){var Nt=V.baseState;se=0,At=Qe=De=null,_e=Q;do{var Et=_e.lane,Qt=_e.eventTime;if((O&Et)===Et){At!==null&&(At=At.next={eventTime:Qt,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var an=y,cn=_e;switch(Et=x,Qt=k,cn.tag){case 1:if(an=cn.payload,typeof an=="function"){Nt=an.call(Qt,Nt,Et);break e}Nt=an;break e;case 3:an.flags=an.flags&-65537|128;case 0:if(an=cn.payload,Et=typeof an=="function"?an.call(Qt,Nt,Et):an,Et==null)break e;Nt=q({},Nt,Et);break e;case 2:zl=!0}}_e.callback!==null&&_e.lane!==0&&(y.flags|=64,Et=V.effects,Et===null?V.effects=[_e]:Et.push(_e))}else Qt={eventTime:Qt,lane:Et,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},At===null?(Qe=At=Qt,De=Nt):At=At.next=Qt,se|=Et;if(_e=_e.next,_e===null){if(_e=V.shared.pending,_e===null)break;Et=_e,_e=Et.next,Et.next=null,V.lastBaseUpdate=Et,V.shared.pending=null}}while(!0);if(At===null&&(De=Nt),V.baseState=De,V.firstBaseUpdate=Qe,V.lastBaseUpdate=At,x=V.shared.interleaved,x!==null){V=x;do se|=V.lane,V=V.next;while(V!==x)}else Q===null&&(V.shared.lanes=0);hp|=se,y.lanes=se,y.memoizedState=Nt}}function qC(y,x,k){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var O=y[x],V=O.callback;if(V!==null){if(O.callback=null,O=k,typeof V!="function")throw Error(n(191,V));V.call(O)}}}var Uv={},jf=cu(Uv),Vv=cu(Uv),cy=cu(Uv);function zd(y){if(y===Uv)throw Error(n(174));return y}function WC(y,x){switch(Ti(cy,x),Ti(Vv,y),Ti(jf,Uv),y=x.nodeType,y){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:we(null,"");break;default:y=y===8?x.parentNode:x,x=y.namespaceURI||null,y=y.tagName,x=we(x,y)}Oi(jf),Ti(jf,x)}function lp(){Oi(jf),Oi(Vv),Oi(cy)}function GC(y){zd(cy.current);var x=zd(jf.current),k=we(x,y.type);x!==k&&(Ti(Vv,y),Ti(jf,k))}function s_(y){Vv.current===y&&(Oi(jf),Oi(Vv))}var ji=cu(0);function r0(y){for(var x=y;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var YC=[];function a_(){for(var y=0;y<YC.length;y++)YC[y]._workInProgressVersionPrimary=null;YC.length=0}var Hv=E.ReactCurrentDispatcher,KC=E.ReactCurrentBatchConfig,cp=0,Ki=null,yo=null,ts=null,fy=!1,qv=!1,i0=0,sr=0;function ra(){throw Error(n(321))}function XC(y,x){if(x===null)return!1;for(var k=0;k<x.length&&k<y.length;k++)if(!Xe(y[k],x[k]))return!1;return!0}function o0(y,x,k,O,V,Q){if(cp=Q,Ki=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Hv.current=y===null||y.memoizedState===null?e9:p_,y=k(O,V),qv){Q=0;do{if(qv=!1,i0=0,25<=Q)throw Error(n(301));Q+=1,ts=yo=null,x.updateQueue=null,Hv.current=my,y=k(O,V)}while(qv)}if(Hv.current=h_,x=yo!==null&&yo.next!==null,cp=0,ts=yo=Ki=null,fy=!1,x)throw Error(n(300));return y}function u_(){var y=i0!==0;return i0=0,y}function zf(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ts===null?Ki.memoizedState=ts=y:ts=ts.next=y,ts}function Vl(){if(yo===null){var y=Ki.alternate;y=y!==null?y.memoizedState:null}else y=yo.next;var x=ts===null?Ki.memoizedState:ts.next;if(x!==null)ts=x,yo=y;else{if(y===null)throw Error(n(310));yo=y,y={memoizedState:yo.memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},ts===null?Ki.memoizedState=ts=y:ts=ts.next=y}return ts}function ia(y,x){return typeof x=="function"?x(y):x}function QC(y){var x=Vl(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=y;var O=yo,V=O.baseQueue,Q=k.pending;if(Q!==null){if(V!==null){var se=V.next;V.next=Q.next,Q.next=se}O.baseQueue=V=Q,k.pending=null}if(V!==null){Q=V.next,O=O.baseState;var _e=se=null,De=null,Qe=Q;do{var At=Qe.lane;if((cp&At)===At)De!==null&&(De=De.next={lane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),O=Qe.hasEagerState?Qe.eagerState:y(O,Qe.action);else{var Nt={lane:At,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null};De===null?(_e=De=Nt,se=O):De=De.next=Nt,Ki.lanes|=At,hp|=At}Qe=Qe.next}while(Qe!==null&&Qe!==Q);De===null?se=O:De.next=_e,Xe(O,x.memoizedState)||(ka=!0),x.memoizedState=O,x.baseState=se,x.baseQueue=De,k.lastRenderedState=O}if(y=k.interleaved,y!==null){V=y;do Q=V.lane,Ki.lanes|=Q,hp|=Q,V=V.next;while(V!==y)}else V===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function dy(y){var x=Vl(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=y;var O=k.dispatch,V=k.pending,Q=x.memoizedState;if(V!==null){k.pending=null;var se=V=V.next;do Q=y(Q,se.action),se=se.next;while(se!==V);Xe(Q,x.memoizedState)||(ka=!0),x.memoizedState=Q,x.baseQueue===null&&(x.baseState=Q),k.lastRenderedState=Q}return[Q,O]}function l_(){}function JC(y,x){var k=Ki,O=Vl(),V=x(),Q=!Xe(O.memoizedState,V);if(Q&&(O.memoizedState=V,ka=!0),O=O.queue,Uf(Ud.bind(null,k,O,y),[y]),O.getSnapshot!==x||Q||ts!==null&&ts.memoizedState.tag&1){if(k.flags|=2048,hy(9,pu.bind(null,k,O,V,x),void 0,null),bs===null)throw Error(n(349));cp&30||ZC(k,x,V)}return V}function ZC(y,x,k){y.flags|=16384,y={getSnapshot:x,value:k},x=Ki.updateQueue,x===null?(x={lastEffect:null,stores:null},Ki.updateQueue=x,x.stores=[y]):(k=x.stores,k===null?x.stores=[y]:k.push(y))}function pu(y,x,k,O){x.value=k,x.getSnapshot=O,c_(x)&&eS(y)}function Ud(y,x,k){return k(function(){c_(x)&&eS(y)})}function c_(y){var x=y.getSnapshot;y=y.value;try{var k=x();return!Xe(y,k)}catch{return!0}}function eS(y){var x=Bd(y,1);x!==null&&Uc(x,y,1,-1)}function Wv(y){var x=zf();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:y},x.queue=y,y=y.dispatch=_N.bind(null,Ki,y),[x.memoizedState,y]}function hy(y,x,k,O){return y={tag:y,create:x,destroy:k,deps:O,next:null},x=Ki.updateQueue,x===null?(x={lastEffect:null,stores:null},Ki.updateQueue=x,x.lastEffect=y.next=y):(k=x.lastEffect,k===null?x.lastEffect=y.next=y:(O=k.next,k.next=y,y.next=O,x.lastEffect=y)),y}function f_(){return Vl().memoizedState}function Gv(y,x,k,O){var V=zf();Ki.flags|=y,V.memoizedState=hy(1|x,k,void 0,O===void 0?null:O)}function py(y,x,k,O){var V=Vl();O=O===void 0?null:O;var Q=void 0;if(yo!==null){var se=yo.memoizedState;if(Q=se.destroy,O!==null&&XC(O,se.deps)){V.memoizedState=hy(x,k,Q,O);return}}Ki.flags|=y,V.memoizedState=hy(1|x,k,Q,O)}function d_(y,x){return Gv(8390656,8,y,x)}function Uf(y,x){return py(2048,8,y,x)}function yN(y,x){return py(4,2,y,x)}function Vd(y,x){return py(4,4,y,x)}function tS(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function nS(y,x,k){return k=k!=null?k.concat([y]):null,py(4,4,tS.bind(null,x,y),k)}function Yv(){}function vN(y,x){var k=Vl();x=x===void 0?null:x;var O=k.memoizedState;return O!==null&&x!==null&&XC(x,O[1])?O[0]:(k.memoizedState=[y,x],y)}function bN(y,x){var k=Vl();x=x===void 0?null:x;var O=k.memoizedState;return O!==null&&x!==null&&XC(x,O[1])?O[0]:(y=y(),k.memoizedState=[y,x],y)}function xN(y,x,k){return cp&21?(Xe(k,x)||(k=Ot(),Ki.lanes|=k,hp|=k,y.baseState=!0),x):(y.baseState&&(y.baseState=!1,ka=!0),y.memoizedState=k)}function wN(y,x){var k=hn;hn=k!==0&&4>k?k:4,y(!0);var O=KC.transition;KC.transition={};try{y(!1),x()}finally{hn=k,KC.transition=O}}function rS(){return Vl().memoizedState}function ZL(y,x,k){var O=gp(y);if(k={lane:O,action:k,hasEagerState:!1,eagerState:null,next:null},iS(y))Da(x,k);else if(k=r_(y,x,k,O),k!==null){var V=Na();Uc(k,y,O,V),$c(k,x,O)}}function _N(y,x,k){var O=gp(y),V={lane:O,action:k,hasEagerState:!1,eagerState:null,next:null};if(iS(y))Da(x,V);else{var Q=y.alternate;if(y.lanes===0&&(Q===null||Q.lanes===0)&&(Q=x.lastRenderedReducer,Q!==null))try{var se=x.lastRenderedState,_e=Q(se,k);if(V.hasEagerState=!0,V.eagerState=_e,Xe(_e,se)){var De=x.interleaved;De===null?(V.next=V,HC(x)):(V.next=De.next,De.next=V),x.interleaved=V;return}}catch{}finally{}k=r_(y,x,V,O),k!==null&&(V=Na(),Uc(k,y,O,V),$c(k,x,O))}}function iS(y){var x=y.alternate;return y===Ki||x!==null&&x===Ki}function Da(y,x){qv=fy=!0;var k=y.pending;k===null?x.next=x:(x.next=k.next,k.next=x),y.pending=x}function $c(y,x,k){if(k&4194240){var O=x.lanes;O&=y.pendingLanes,k|=O,x.lanes=k,Qn(y,k)}}var h_={readContext:jl,useCallback:ra,useContext:ra,useEffect:ra,useImperativeHandle:ra,useInsertionEffect:ra,useLayoutEffect:ra,useMemo:ra,useReducer:ra,useRef:ra,useState:ra,useDebugValue:ra,useDeferredValue:ra,useTransition:ra,useMutableSource:ra,useSyncExternalStore:ra,useId:ra,unstable_isNewReconciler:!1},e9={readContext:jl,useCallback:function(y,x){return zf().memoizedState=[y,x===void 0?null:x],y},useContext:jl,useEffect:d_,useImperativeHandle:function(y,x,k){return k=k!=null?k.concat([y]):null,Gv(4194308,4,tS.bind(null,x,y),k)},useLayoutEffect:function(y,x){return Gv(4194308,4,y,x)},useInsertionEffect:function(y,x){return Gv(4,2,y,x)},useMemo:function(y,x){var k=zf();return x=x===void 0?null:x,y=y(),k.memoizedState=[y,x],y},useReducer:function(y,x,k){var O=zf();return x=k!==void 0?k(x):x,O.memoizedState=O.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},O.queue=y,y=y.dispatch=ZL.bind(null,Ki,y),[O.memoizedState,y]},useRef:function(y){var x=zf();return y={current:y},x.memoizedState=y},useState:Wv,useDebugValue:Yv,useDeferredValue:function(y){return zf().memoizedState=y},useTransition:function(){var y=Wv(!1),x=y[0];return y=wN.bind(null,y[1]),zf().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,k){var O=Ki,V=zf();if(Fi){if(k===void 0)throw Error(n(407));k=k()}else{if(k=x(),bs===null)throw Error(n(349));cp&30||ZC(O,x,k)}V.memoizedState=k;var Q={value:k,getSnapshot:x};return V.queue=Q,d_(Ud.bind(null,O,Q,y),[y]),O.flags|=2048,hy(9,pu.bind(null,O,Q,k,x),void 0,null),k},useId:function(){var y=zf(),x=bs.identifierPrefix;if(Fi){var k=Mf,O=Ff;k=(O&~(1<<32-Jo(O)-1)).toString(32)+k,x=":"+x+"R"+k,k=i0++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=sr++,x=":"+x+"r"+k.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},p_={readContext:jl,useCallback:vN,useContext:jl,useEffect:Uf,useImperativeHandle:nS,useInsertionEffect:yN,useLayoutEffect:Vd,useMemo:bN,useReducer:QC,useRef:f_,useState:function(){return QC(ia)},useDebugValue:Yv,useDeferredValue:function(y){var x=Vl();return xN(x,yo.memoizedState,y)},useTransition:function(){var y=QC(ia)[0],x=Vl().memoizedState;return[y,x]},useMutableSource:l_,useSyncExternalStore:JC,useId:rS,unstable_isNewReconciler:!1},my={readContext:jl,useCallback:vN,useContext:jl,useEffect:Uf,useImperativeHandle:nS,useInsertionEffect:yN,useLayoutEffect:Vd,useMemo:bN,useReducer:dy,useRef:f_,useState:function(){return dy(ia)},useDebugValue:Yv,useDeferredValue:function(y){var x=Vl();return yo===null?x.memoizedState=y:xN(x,yo.memoizedState,y)},useTransition:function(){var y=dy(ia)[0],x=Vl().memoizedState;return[y,x]},useMutableSource:l_,useSyncExternalStore:JC,useId:rS,unstable_isNewReconciler:!1};function Hl(y,x){if(y&&y.defaultProps){x=q({},x),y=y.defaultProps;for(var k in y)x[k]===void 0&&(x[k]=y[k]);return x}return x}function m_(y,x,k,O){x=y.memoizedState,k=k(O,x),k=k==null?x:q({},x,k),y.memoizedState=k,y.lanes===0&&(y.updateQueue.baseState=k)}var g_={isMounted:function(y){return(y=y._reactInternals)?Ri(y)===y:!1},enqueueSetState:function(y,x,k){y=y._reactInternals;var O=Na(),V=gp(y),Q=jd(O,V);Q.payload=x,k!=null&&(Q.callback=k),x=Ul(y,Q,V),x!==null&&(Uc(x,y,V,O),o_(x,y,V))},enqueueReplaceState:function(y,x,k){y=y._reactInternals;var O=Na(),V=gp(y),Q=jd(O,V);Q.tag=1,Q.payload=x,k!=null&&(Q.callback=k),x=Ul(y,Q,V),x!==null&&(Uc(x,y,V,O),o_(x,y,V))},enqueueForceUpdate:function(y,x){y=y._reactInternals;var k=Na(),O=gp(y),V=jd(k,O);V.tag=2,x!=null&&(V.callback=x),x=Ul(y,V,O),x!==null&&(Uc(x,y,O,k),o_(x,y,O))}};function oS(y,x,k,O,V,Q,se){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(O,Q,se):x.prototype&&x.prototype.isPureReactComponent?!Xt(k,O)||!Xt(V,Q):!0}function s0(y,x,k){var O=!1,V=op,Q=x.contextType;return typeof Q=="object"&&Q!==null?Q=jl(Q):(V=du(x)?Aa:ea.current,O=x.contextTypes,Q=(O=O!=null)?sy(y,V):op),x=new x(k,Q),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=g_,y.stateNode=x,x._reactInternals=y,O&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=V,y.__reactInternalMemoizedMaskedChildContext=Q),x}function gy(y,x,k,O){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,O),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,O),x.state!==y&&g_.enqueueReplaceState(x,x.state,null)}function sS(y,x,k,O){var V=y.stateNode;V.props=k,V.state=y.memoizedState,V.refs={},i_(y);var Q=x.contextType;typeof Q=="object"&&Q!==null?V.context=jl(Q):(Q=du(x)?Aa:ea.current,V.context=sy(y,Q)),V.state=y.memoizedState,Q=x.getDerivedStateFromProps,typeof Q=="function"&&(m_(y,x,Q,k),V.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(x=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),x!==V.state&&g_.enqueueReplaceState(V,V.state,null),ly(y,k,V,O),V.state=y.memoizedState),typeof V.componentDidMount=="function"&&(y.flags|=4194308)}function a0(y,x){try{var k="",O=x;do k+=ee(O),O=O.return;while(O);var V=k}catch(Q){V=`
Error generating stack: `+Q.message+`
`+Q.stack}return{value:y,source:x,stack:V,digest:null}}function y_(y,x,k){return{value:y,source:null,stack:k??null,digest:x??null}}function yy(y,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var EN=typeof WeakMap=="function"?WeakMap:Map;function Kv(y,x,k){k=jd(-1,k),k.tag=3,k.payload={element:null};var O=x.value;return k.callback=function(){D_||(D_=!0,_S=O),yy(y,x)},k}function v_(y,x,k){k=jd(-1,k),k.tag=3;var O=y.type.getDerivedStateFromError;if(typeof O=="function"){var V=x.value;k.payload=function(){return O(V)},k.callback=function(){yy(y,x)}}var Q=y.stateNode;return Q!==null&&typeof Q.componentDidCatch=="function"&&(k.callback=function(){yy(y,x),typeof O!="function"&&(pp===null?pp=new Set([this]):pp.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})}),k}function Xv(y,x,k){var O=y.pingCache;if(O===null){O=y.pingCache=new EN;var V=new Set;O.set(x,V)}else V=O.get(x),V===void 0&&(V=new Set,O.set(x,V));V.has(k)||(V.add(k),y=u9.bind(null,y,x,k),x.then(y,y))}function TN(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function aS(y,x,k,O,V){return y.mode&1?(y.flags|=65536,y.lanes=V,y):(y===x?y.flags|=65536:(y.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=jd(-1,1),x.tag=2,Ul(k,x,1))),k.lanes|=1),y)}var b_=E.ReactCurrentOwner,ka=!1;function Ns(y,x,k,O){x.child=y===null?t_(x,null,k,O):oo(x,y.child,k,O)}function CN(y,x,k,O,V){k=k.render;var Q=x.ref;return up(x,V),O=o0(y,x,k,O,Q,V),k=u_(),y!==null&&!ka?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~V,Lc(y,x,V)):(Fi&&k&&Lv(x),x.flags|=1,Ns(y,x,O,V),x.child)}function uS(y,x,k,O,V){if(y===null){var Q=k.type;return typeof Q=="function"&&!O_(Q)&&Q.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=Q,Vf(y,x,Q,O,V)):(y=F_(k.type,null,O,x,x.mode,V),y.ref=x.ref,y.return=x,x.child=y)}if(Q=y.child,!(y.lanes&V)){var se=Q.memoizedProps;if(k=k.compare,k=k!==null?k:Xt,k(se,O)&&y.ref===x.ref)return Lc(y,x,V)}return x.flags|=1,y=Vc(Q,O),y.ref=x.ref,y.return=x,x.child=y}function Vf(y,x,k,O,V){if(y!==null){var Q=y.memoizedProps;if(Xt(Q,O)&&y.ref===x.ref)if(ka=!1,x.pendingProps=O=Q,(y.lanes&V)!==0)y.flags&131072&&(ka=!0);else return x.lanes=y.lanes,Lc(y,x,V)}return fS(y,x,k,O,V)}function lS(y,x,k){var O=x.pendingProps,V=O.children,Q=y!==null?y.memoizedState:null;if(O.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(wy,tl),tl|=k;else{if(!(k&1073741824))return y=Q!==null?Q.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null,transitions:null},x.updateQueue=null,Ti(wy,tl),tl|=y,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=Q!==null?Q.baseLanes:k,Ti(wy,tl),tl|=O}else Q!==null?(O=Q.baseLanes|k,x.memoizedState=null):O=k,Ti(wy,tl),tl|=O;return Ns(y,x,V,k),x.child}function cS(y,x){var k=x.ref;(y===null&&k!==null||y!==null&&y.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function fS(y,x,k,O,V){var Q=du(k)?Aa:ea.current;return Q=sy(x,Q),up(x,V),k=o0(y,x,k,O,Q,V),O=u_(),y!==null&&!ka?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~V,Lc(y,x,V)):(Fi&&O&&Lv(x),x.flags|=1,Ns(y,x,k,V),x.child)}function dS(y,x,k,O,V){if(du(k)){var Q=!0;$l(x)}else Q=!1;if(up(x,V),x.stateNode===null)w_(y,x),s0(x,k,O),sS(x,k,O,V),O=!0;else if(y===null){var se=x.stateNode,_e=x.memoizedProps;se.props=_e;var De=se.context,Qe=k.contextType;typeof Qe=="object"&&Qe!==null?Qe=jl(Qe):(Qe=du(k)?Aa:ea.current,Qe=sy(x,Qe));var At=k.getDerivedStateFromProps,Nt=typeof At=="function"||typeof se.getSnapshotBeforeUpdate=="function";Nt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(_e!==O||De!==Qe)&&gy(x,se,O,Qe),zl=!1;var Et=x.memoizedState;se.state=Et,ly(x,O,se,V),De=x.memoizedState,_e!==O||Et!==De||fu.current||zl?(typeof At=="function"&&(m_(x,k,At,O),De=x.memoizedState),(_e=zl||oS(x,k,_e,O,Et,De,Qe))?(Nt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(x.flags|=4194308)):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=O,x.memoizedState=De),se.props=O,se.state=De,se.context=Qe,O=_e):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),O=!1)}else{se=x.stateNode,mN(y,x),_e=x.memoizedProps,Qe=x.type===x.elementType?_e:Hl(x.type,_e),se.props=Qe,Nt=x.pendingProps,Et=se.context,De=k.contextType,typeof De=="object"&&De!==null?De=jl(De):(De=du(k)?Aa:ea.current,De=sy(x,De));var Qt=k.getDerivedStateFromProps;(At=typeof Qt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(_e!==Nt||Et!==De)&&gy(x,se,O,De),zl=!1,Et=x.memoizedState,se.state=Et,ly(x,O,se,V);var an=x.memoizedState;_e!==Nt||Et!==an||fu.current||zl?(typeof Qt=="function"&&(m_(x,k,Qt,O),an=x.memoizedState),(Qe=zl||oS(x,k,Qe,O,Et,an,De)||!1)?(At||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(O,an,De),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(O,an,De)),typeof se.componentDidUpdate=="function"&&(x.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof se.componentDidUpdate!="function"||_e===y.memoizedProps&&Et===y.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||_e===y.memoizedProps&&Et===y.memoizedState||(x.flags|=1024),x.memoizedProps=O,x.memoizedState=an),se.props=O,se.state=an,se.context=De,O=Qe):(typeof se.componentDidUpdate!="function"||_e===y.memoizedProps&&Et===y.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||_e===y.memoizedProps&&Et===y.memoizedState||(x.flags|=1024),O=!1)}return hS(y,x,k,O,Q,V)}function hS(y,x,k,O,V,Q){cS(y,x);var se=(x.flags&128)!==0;if(!O&&!se)return V&&lN(x,k,!1),Lc(y,x,Q);O=x.stateNode,b_.current=x;var _e=se&&typeof k.getDerivedStateFromError!="function"?null:O.render();return x.flags|=1,y!==null&&se?(x.child=oo(x,y.child,null,Q),x.child=oo(x,null,_e,Q)):Ns(y,x,_e,Q),x.memoizedState=O.state,V&&lN(x,k,!0),x.child}function SN(y){var x=y.stateNode;x.pendingContext?aN(y,x.pendingContext,x.pendingContext!==x.context):x.context&&aN(y,x.context,!1),WC(y,x.containerInfo)}function Hf(y,x,k,O,V){return Lf(),Bf(V),x.flags|=256,Ns(y,x,k,O),x.child}var Qv={dehydrated:null,treeContext:null,retryLane:0};function Jv(y){return{baseLanes:y,cachePool:null,transitions:null}}function x_(y,x,k){var O=x.pendingProps,V=ji.current,Q=!1,se=(x.flags&128)!==0,_e;if((_e=se)||(_e=y!==null&&y.memoizedState===null?!1:(V&2)!==0),_e?(Q=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(V|=1),Ti(ji,V&1),y===null)return hu(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(x.mode&1?y.data==="$!"?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(se=O.children,y=O.fallback,Q?(O=x.mode,Q=x.child,se={mode:"hidden",children:se},!(O&1)&&Q!==null?(Q.childLanes=0,Q.pendingProps=se):Q=M_(se,O,0,null),y=d0(y,O,k,null),Q.return=x,y.return=x,Q.sibling=y,x.child=Q,x.child.memoizedState=Jv(k),x.memoizedState=Qv,y):vy(x,se));if(V=y.memoizedState,V!==null&&(_e=V.dehydrated,_e!==null))return In(y,x,se,O,_e,V,k);if(Q){Q=O.fallback,se=x.mode,V=y.child,_e=V.sibling;var De={mode:"hidden",children:O.children};return!(se&1)&&x.child!==V?(O=x.child,O.childLanes=0,O.pendingProps=De,x.deletions=null):(O=Vc(V,De),O.subtreeFlags=V.subtreeFlags&14680064),_e!==null?Q=Vc(_e,Q):(Q=d0(Q,se,k,null),Q.flags|=2),Q.return=x,O.return=x,O.sibling=Q,x.child=O,O=Q,Q=x.child,se=y.child.memoizedState,se=se===null?Jv(k):{baseLanes:se.baseLanes|k,cachePool:null,transitions:se.transitions},Q.memoizedState=se,Q.childLanes=y.childLanes&~k,x.memoizedState=Qv,O}return Q=y.child,y=Q.sibling,O=Vc(Q,{mode:"visible",children:O.children}),!(x.mode&1)&&(O.lanes=k),O.return=x,O.sibling=null,y!==null&&(k=x.deletions,k===null?(x.deletions=[y],x.flags|=16):k.push(y)),x.child=O,x.memoizedState=null,O}function vy(y,x){return x=M_({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function Hd(y,x,k,O){return O!==null&&Bf(O),oo(x,y.child,null,k),y=vy(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function In(y,x,k,O,V,Q,se){if(k)return x.flags&256?(x.flags&=-257,O=y_(Error(n(422))),Hd(y,x,se,O)):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(Q=O.fallback,V=x.mode,O=M_({mode:"visible",children:O.children},V,0,null),Q=d0(Q,V,se,null),Q.flags|=2,O.return=x,Q.return=x,O.sibling=Q,x.child=O,x.mode&1&&oo(x,y.child,null,se),x.child.memoizedState=Jv(se),x.memoizedState=Qv,Q);if(!(x.mode&1))return Hd(y,x,se,null);if(V.data==="$!"){if(O=V.nextSibling&&V.nextSibling.dataset,O)var _e=O.dgst;return O=_e,Q=Error(n(419)),O=y_(Q,O,void 0),Hd(y,x,se,O)}if(_e=(se&y.childLanes)!==0,ka||_e){if(O=bs,O!==null){switch(se&-se){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=V&(O.suspendedLanes|se)?0:V,V!==0&&V!==Q.retryLane&&(Q.retryLane=V,Bd(y,V),Uc(O,y,V,-1))}return DS(),O=y_(Error(n(421))),Hd(y,x,se,O)}return V.data==="$?"?(x.flags|=128,x.child=y.child,x=l9.bind(null,y),V._reactRetry=x,null):(y=Q.treeContext,Ju=rp(V.nextSibling),na=x,Fi=!0,Mc=null,y!==null&&(Ll[Bl++]=Ff,Ll[Bl++]=Mf,Ll[Bl++]=Jm,Ff=y.id,Mf=y.overflow,Jm=x),x=vy(x,O.children),x.flags|=4096,x)}function Zv(y,x,k){y.lanes|=x;var O=y.alternate;O!==null&&(O.lanes|=x),Rs(y.return,x,k)}function eb(y,x,k,O,V){var Q=y.memoizedState;Q===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:O,tail:k,tailMode:V}:(Q.isBackwards=x,Q.rendering=null,Q.renderingStartTime=0,Q.last=O,Q.tail=k,Q.tailMode=V)}function fp(y,x,k){var O=x.pendingProps,V=O.revealOrder,Q=O.tail;if(Ns(y,x,O.children,k),O=ji.current,O&2)O=O&1|2,x.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&Zv(y,k,x);else if(y.tag===19)Zv(y,k,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}O&=1}if(Ti(ji,O),!(x.mode&1))x.memoizedState=null;else switch(V){case"forwards":for(k=x.child,V=null;k!==null;)y=k.alternate,y!==null&&r0(y)===null&&(V=k),k=k.sibling;k=V,k===null?(V=x.child,x.child=null):(V=k.sibling,k.sibling=null),eb(x,!1,V,k,Q);break;case"backwards":for(k=null,V=x.child,x.child=null;V!==null;){if(y=V.alternate,y!==null&&r0(y)===null){x.child=V;break}y=V.sibling,V.sibling=k,k=V,V=y}eb(x,!0,k,null,Q);break;case"together":eb(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function w_(y,x){!(x.mode&1)&&y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2)}function Lc(y,x,k){if(y!==null&&(x.dependencies=y.dependencies),hp|=x.lanes,!(k&x.childLanes))return null;if(y!==null&&x.child!==y.child)throw Error(n(153));if(x.child!==null){for(y=x.child,k=Vc(y,y.pendingProps),x.child=k,k.return=x;y.sibling!==null;)y=y.sibling,k=k.sibling=Vc(y,y.pendingProps),k.return=x;k.sibling=null}return x.child}function AN(y,x,k){switch(x.tag){case 3:SN(x),Lf();break;case 5:GC(x);break;case 1:du(x.type)&&$l(x);break;case 4:WC(x,x.stateNode.containerInfo);break;case 10:var O=x.type._context,V=x.memoizedProps.value;Ti(zv,O._currentValue),O._currentValue=V;break;case 13:if(O=x.memoizedState,O!==null)return O.dehydrated!==null?(Ti(ji,ji.current&1),x.flags|=128,null):k&x.child.childLanes?x_(y,x,k):(Ti(ji,ji.current&1),y=Lc(y,x,k),y!==null?y.sibling:null);Ti(ji,ji.current&1);break;case 19:if(O=(k&x.childLanes)!==0,y.flags&128){if(O)return fp(y,x,k);x.flags|=128}if(V=x.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),Ti(ji,ji.current),O)break;return null;case 22:case 23:return x.lanes=0,lS(y,x,k)}return Lc(y,x,k)}var Ps,pS,DN,mS;Ps=function(y,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)y.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},pS=function(){},DN=function(y,x,k,O){var V=y.memoizedProps;if(V!==O){y=x.stateNode,zd(jf.current);var Q=null;switch(k){case"input":V=Pe(y,V),O=Pe(y,O),Q=[];break;case"select":V=q({},V,{value:void 0}),O=q({},O,{value:void 0}),Q=[];break;case"textarea":V=$t(y,V),O=$t(y,O),Q=[];break;default:typeof V.onClick!="function"&&typeof O.onClick=="function"&&(y.onclick=Ww)}bn(k,O);var se;k=null;for(Qe in V)if(!O.hasOwnProperty(Qe)&&V.hasOwnProperty(Qe)&&V[Qe]!=null)if(Qe==="style"){var _e=V[Qe];for(se in _e)_e.hasOwnProperty(se)&&(k||(k={}),k[se]="")}else Qe!=="dangerouslySetInnerHTML"&&Qe!=="children"&&Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&Qe!=="autoFocus"&&(i.hasOwnProperty(Qe)?Q||(Q=[]):(Q=Q||[]).push(Qe,null));for(Qe in O){var De=O[Qe];if(_e=V!=null?V[Qe]:void 0,O.hasOwnProperty(Qe)&&De!==_e&&(De!=null||_e!=null))if(Qe==="style")if(_e){for(se in _e)!_e.hasOwnProperty(se)||De&&De.hasOwnProperty(se)||(k||(k={}),k[se]="");for(se in De)De.hasOwnProperty(se)&&_e[se]!==De[se]&&(k||(k={}),k[se]=De[se])}else k||(Q||(Q=[]),Q.push(Qe,k)),k=De;else Qe==="dangerouslySetInnerHTML"?(De=De?De.__html:void 0,_e=_e?_e.__html:void 0,De!=null&&_e!==De&&(Q=Q||[]).push(Qe,De)):Qe==="children"?typeof De!="string"&&typeof De!="number"||(Q=Q||[]).push(Qe,""+De):Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Qe)?(De!=null&&Qe==="onScroll"&&Pi("scroll",y),Q||_e===De||(Q=[])):(Q=Q||[]).push(Qe,De))}k&&(Q=Q||[]).push("style",k);var Qe=Q;(x.updateQueue=Qe)&&(x.flags|=4)}},mS=function(y,x,k,O){k!==O&&(x.flags|=4)};function tb(y,x){if(!Fi)switch(y.tailMode){case"hidden":x=y.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?y.tail=null:k.sibling=null;break;case"collapsed":k=y.tail;for(var O=null;k!==null;)k.alternate!==null&&(O=k),k=k.sibling;O===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:O.sibling=null}}function Os(y){var x=y.alternate!==null&&y.alternate.child===y.child,k=0,O=0;if(x)for(var V=y.child;V!==null;)k|=V.lanes|V.childLanes,O|=V.subtreeFlags&14680064,O|=V.flags&14680064,V.return=y,V=V.sibling;else for(V=y.child;V!==null;)k|=V.lanes|V.childLanes,O|=V.subtreeFlags,O|=V.flags,V.return=y,V=V.sibling;return y.subtreeFlags|=O,y.childLanes=k,x}function t9(y,x,k){var O=x.pendingProps;switch(e0(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Os(x),null;case 1:return du(x.type)&&Xw(),Os(x),null;case 3:return O=x.stateNode,lp(),Oi(fu),Oi(ea),a_(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(y===null||y.child===null)&&(Bv(x)?x.flags|=4:y===null||y.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,Mc!==null&&(CS(Mc),Mc=null))),pS(y,x),Os(x),null;case 5:s_(x);var V=zd(cy.current);if(k=x.type,y!==null&&x.stateNode!=null)DN(y,x,k,O,V),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!O){if(x.stateNode===null)throw Error(n(166));return Os(x),null}if(y=zd(jf.current),Bv(x)){O=x.stateNode,k=x.type;var Q=x.memoizedProps;switch(O[Pf]=x,O[ip]=Q,y=(x.mode&1)!==0,k){case"dialog":Pi("cancel",O),Pi("close",O);break;case"iframe":case"object":case"embed":Pi("load",O);break;case"video":case"audio":for(V=0;V<Fd.length;V++)Pi(Fd[V],O);break;case"source":Pi("error",O);break;case"img":case"image":case"link":Pi("error",O),Pi("load",O);break;case"details":Pi("toggle",O);break;case"input":Je(O,Q),Pi("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!Q.multiple},Pi("invalid",O);break;case"textarea":oe(O,Q),Pi("invalid",O)}bn(k,Q),V=null;for(var se in Q)if(Q.hasOwnProperty(se)){var _e=Q[se];se==="children"?typeof _e=="string"?O.textContent!==_e&&(Q.suppressHydrationWarning!==!0&&Ov(O.textContent,_e,y),V=["children",_e]):typeof _e=="number"&&O.textContent!==""+_e&&(Q.suppressHydrationWarning!==!0&&Ov(O.textContent,_e,y),V=["children",""+_e]):i.hasOwnProperty(se)&&_e!=null&&se==="onScroll"&&Pi("scroll",O)}switch(k){case"input":me(O),tt(O,Q,!0);break;case"textarea":me(O),Re(O);break;case"select":case"option":break;default:typeof Q.onClick=="function"&&(O.onclick=Ww)}O=V,x.updateQueue=O,O!==null&&(x.flags|=4)}else{se=V.nodeType===9?V:V.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=pe(k)),y==="http://www.w3.org/1999/xhtml"?k==="script"?(y=se.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof O.is=="string"?y=se.createElement(k,{is:O.is}):(y=se.createElement(k),k==="select"&&(se=y,O.multiple?se.multiple=!0:O.size&&(se.size=O.size))):y=se.createElementNS(y,k),y[Pf]=x,y[ip]=O,Ps(y,x,!1,!1),x.stateNode=y;e:{switch(se=Hn(k,O),k){case"dialog":Pi("cancel",y),Pi("close",y),V=O;break;case"iframe":case"object":case"embed":Pi("load",y),V=O;break;case"video":case"audio":for(V=0;V<Fd.length;V++)Pi(Fd[V],y);V=O;break;case"source":Pi("error",y),V=O;break;case"img":case"image":case"link":Pi("error",y),Pi("load",y),V=O;break;case"details":Pi("toggle",y),V=O;break;case"input":Je(y,O),V=Pe(y,O),Pi("invalid",y);break;case"option":V=O;break;case"select":y._wrapperState={wasMultiple:!!O.multiple},V=q({},O,{value:void 0}),Pi("invalid",y);break;case"textarea":oe(y,O),V=$t(y,O),Pi("invalid",y);break;default:V=O}bn(k,V),_e=V;for(Q in _e)if(_e.hasOwnProperty(Q)){var De=_e[Q];Q==="style"?xn(y,De):Q==="dangerouslySetInnerHTML"?(De=De?De.__html:void 0,De!=null&&Ge(y,De)):Q==="children"?typeof De=="string"?(k!=="textarea"||De!=="")&&Ve(y,De):typeof De=="number"&&Ve(y,""+De):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?De!=null&&Q==="onScroll"&&Pi("scroll",y):De!=null&&w(y,Q,De,se))}switch(k){case"input":me(y),tt(y,O,!1);break;case"textarea":me(y),Re(y);break;case"option":O.value!=null&&y.setAttribute("value",""+be(O.value));break;case"select":y.multiple=!!O.multiple,Q=O.value,Q!=null?St(y,!!O.multiple,Q,!1):O.defaultValue!=null&&St(y,!!O.multiple,O.defaultValue,!0);break;default:typeof V.onClick=="function"&&(y.onclick=Ww)}switch(k){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Os(x),null;case 6:if(y&&x.stateNode!=null)mS(y,x,y.memoizedProps,O);else{if(typeof O!="string"&&x.stateNode===null)throw Error(n(166));if(k=zd(cy.current),zd(jf.current),Bv(x)){if(O=x.stateNode,k=x.memoizedProps,O[Pf]=x,(Q=O.nodeValue!==k)&&(y=na,y!==null))switch(y.tag){case 3:Ov(O.nodeValue,k,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&Ov(O.nodeValue,k,(y.mode&1)!==0)}Q&&(x.flags|=4)}else O=(k.nodeType===9?k:k.ownerDocument).createTextNode(O),O[Pf]=x,x.stateNode=O}return Os(x),null;case 13:if(Oi(ji),O=x.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(Fi&&Ju!==null&&x.mode&1&&!(x.flags&128))UC(),Lf(),x.flags|=98560,Q=!1;else if(Q=Bv(x),O!==null&&O.dehydrated!==null){if(y===null){if(!Q)throw Error(n(318));if(Q=x.memoizedState,Q=Q!==null?Q.dehydrated:null,!Q)throw Error(n(317));Q[Pf]=x}else Lf(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;Os(x),Q=!1}else Mc!==null&&(CS(Mc),Mc=null),Q=!0;if(!Q)return x.flags&65536?x:null}return x.flags&128?(x.lanes=k,x):(O=O!==null,O!==(y!==null&&y.memoizedState!==null)&&O&&(x.child.flags|=8192,x.mode&1&&(y===null||ji.current&1?ns===0&&(ns=3):DS())),x.updateQueue!==null&&(x.flags|=4),Os(x),null);case 4:return lp(),pS(y,x),y===null&&tp(x.stateNode.containerInfo),Os(x),null;case 10:return n_(x.type._context),Os(x),null;case 17:return du(x.type)&&Xw(),Os(x),null;case 19:if(Oi(ji),Q=x.memoizedState,Q===null)return Os(x),null;if(O=(x.flags&128)!==0,se=Q.rendering,se===null)if(O)tb(Q,!1);else{if(ns!==0||y!==null&&y.flags&128)for(y=x.child;y!==null;){if(se=r0(y),se!==null){for(x.flags|=128,tb(Q,!1),O=se.updateQueue,O!==null&&(x.updateQueue=O,x.flags|=4),x.subtreeFlags=0,O=k,k=x.child;k!==null;)Q=k,y=O,Q.flags&=14680066,se=Q.alternate,se===null?(Q.childLanes=0,Q.lanes=y,Q.child=null,Q.subtreeFlags=0,Q.memoizedProps=null,Q.memoizedState=null,Q.updateQueue=null,Q.dependencies=null,Q.stateNode=null):(Q.childLanes=se.childLanes,Q.lanes=se.lanes,Q.child=se.child,Q.subtreeFlags=0,Q.deletions=null,Q.memoizedProps=se.memoizedProps,Q.memoizedState=se.memoizedState,Q.updateQueue=se.updateQueue,Q.type=se.type,y=se.dependencies,Q.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),k=k.sibling;return Ti(ji,ji.current&1|2),x.child}y=y.sibling}Q.tail!==null&&en()>u0&&(x.flags|=128,O=!0,tb(Q,!1),x.lanes=4194304)}else{if(!O)if(y=r0(se),y!==null){if(x.flags|=128,O=!0,k=y.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),tb(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!se.alternate&&!Fi)return Os(x),null}else 2*en()-Q.renderingStartTime>u0&&k!==1073741824&&(x.flags|=128,O=!0,tb(Q,!1),x.lanes=4194304);Q.isBackwards?(se.sibling=x.child,x.child=se):(k=Q.last,k!==null?k.sibling=se:x.child=se,Q.last=se)}return Q.tail!==null?(x=Q.tail,Q.rendering=x,Q.tail=x.sibling,Q.renderingStartTime=en(),x.sibling=null,k=ji.current,Ti(ji,O?k&1|2:k&1),x):(Os(x),null);case 22:case 23:return AS(),O=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==O&&(x.flags|=8192),O&&x.mode&1?tl&1073741824&&(Os(x),x.subtreeFlags&6&&(x.flags|=8192)):Os(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function n9(y,x){switch(e0(x),x.tag){case 1:return du(x.type)&&Xw(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return lp(),Oi(fu),Oi(ea),a_(),y=x.flags,y&65536&&!(y&128)?(x.flags=y&-65537|128,x):null;case 5:return s_(x),null;case 13:if(Oi(ji),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Lf()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return Oi(ji),null;case 4:return lp(),null;case 10:return n_(x.type._context),null;case 22:case 23:return AS(),null;case 24:return null;default:return null}}var __=!1,zi=!1,Ia=typeof WeakSet=="function"?WeakSet:Set,tn=null;function by(y,x){var k=y.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(O){Xi(y,x,O)}else k.current=null}function nb(y,x,k){try{k()}catch(O){Xi(y,x,O)}}var kN=!1;function r9(y,x){if(Fv=ve,y=ci(),Dv(y)){if("selectionStart"in y)var k={start:y.selectionStart,end:y.selectionEnd};else e:{k=(k=y.ownerDocument)&&k.defaultView||window;var O=k.getSelection&&k.getSelection();if(O&&O.rangeCount!==0){k=O.anchorNode;var V=O.anchorOffset,Q=O.focusNode;O=O.focusOffset;try{k.nodeType,Q.nodeType}catch{k=null;break e}var se=0,_e=-1,De=-1,Qe=0,At=0,Nt=y,Et=null;t:for(;;){for(var Qt;Nt!==k||V!==0&&Nt.nodeType!==3||(_e=se+V),Nt!==Q||O!==0&&Nt.nodeType!==3||(De=se+O),Nt.nodeType===3&&(se+=Nt.nodeValue.length),(Qt=Nt.firstChild)!==null;)Et=Nt,Nt=Qt;for(;;){if(Nt===y)break t;if(Et===k&&++Qe===V&&(_e=se),Et===Q&&++At===O&&(De=se),(Qt=Nt.nextSibling)!==null)break;Nt=Et,Et=Nt.parentNode}Nt=Qt}k=_e===-1||De===-1?null:{start:_e,end:De}}else k=null}k=k||{start:0,end:0}}else k=null;for(Xm={focusedElem:y,selectionRange:k},ve=!1,tn=x;tn!==null;)if(x=tn,y=x.child,(x.subtreeFlags&1028)!==0&&y!==null)y.return=x,tn=y;else for(;tn!==null;){x=tn;try{var an=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(an!==null){var cn=an.memoizedProps,so=an.memoizedState,qe=x.stateNode,Le=qe.getSnapshotBeforeUpdate(x.elementType===x.type?cn:Hl(x.type,cn),so);qe.__reactInternalSnapshotBeforeUpdate=Le}break;case 3:var Ye=x.stateNode.containerInfo;Ye.nodeType===1?Ye.textContent="":Ye.nodeType===9&&Ye.documentElement&&Ye.removeChild(Ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Lt){Xi(x,x.return,Lt)}if(y=x.sibling,y!==null){y.return=x.return,tn=y;break}tn=x.return}return an=kN,kN=!1,an}function qd(y,x,k){var O=x.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var V=O=O.next;do{if((V.tag&y)===y){var Q=V.destroy;V.destroy=void 0,Q!==void 0&&nb(x,k,Q)}V=V.next}while(V!==O)}}function rb(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&y)===y){var O=k.create;k.destroy=O()}k=k.next}while(k!==x)}}function E_(y){var x=y.ref;if(x!==null){var k=y.stateNode;switch(y.tag){case 5:y=k;break;default:y=k}typeof x=="function"?x(y):x.current=y}}function IN(y){var x=y.alternate;x!==null&&(y.alternate=null,IN(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&(delete x[Pf],delete x[ip],delete x[Yw],delete x[ae],delete x[iy])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function RN(y){return y.tag===5||y.tag===3||y.tag===4}function NN(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||RN(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function gS(y,x,k){var O=y.tag;if(O===5||O===6)y=y.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(y,x):k.insertBefore(y,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(y,k)):(x=k,x.appendChild(y)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=Ww));else if(O!==4&&(y=y.child,y!==null))for(gS(y,x,k),y=y.sibling;y!==null;)gS(y,x,k),y=y.sibling}function T_(y,x,k){var O=y.tag;if(O===5||O===6)y=y.stateNode,x?k.insertBefore(y,x):k.appendChild(y);else if(O!==4&&(y=y.child,y!==null))for(T_(y,x,k),y=y.sibling;y!==null;)T_(y,x,k),y=y.sibling}var vs=null,Bc=!1;function qf(y,x,k){for(k=k.child;k!==null;)yS(y,x,k),k=k.sibling}function yS(y,x,k){if(Qo&&typeof Qo.onCommitFiberUnmount=="function")try{Qo.onCommitFiberUnmount(Il,k)}catch{}switch(k.tag){case 5:zi||by(k,x);case 6:var O=vs,V=Bc;vs=null,qf(y,x,k),vs=O,Bc=V,vs!==null&&(Bc?(y=vs,k=k.stateNode,y.nodeType===8?y.parentNode.removeChild(k):y.removeChild(k)):vs.removeChild(k.stateNode));break;case 18:vs!==null&&(Bc?(y=vs,k=k.stateNode,y.nodeType===8?BC(y.parentNode,k):y.nodeType===1&&BC(y,k),or(y)):BC(vs,k.stateNode));break;case 4:O=vs,V=Bc,vs=k.stateNode.containerInfo,Bc=!0,qf(y,x,k),vs=O,Bc=V;break;case 0:case 11:case 14:case 15:if(!zi&&(O=k.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){V=O=O.next;do{var Q=V,se=Q.destroy;Q=Q.tag,se!==void 0&&(Q&2||Q&4)&&nb(k,x,se),V=V.next}while(V!==O)}qf(y,x,k);break;case 1:if(!zi&&(by(k,x),O=k.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=k.memoizedProps,O.state=k.memoizedState,O.componentWillUnmount()}catch(_e){Xi(k,x,_e)}qf(y,x,k);break;case 21:qf(y,x,k);break;case 22:k.mode&1?(zi=(O=zi)||k.memoizedState!==null,qf(y,x,k),zi=O):qf(y,x,k);break;default:qf(y,x,k)}}function xy(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var k=y.stateNode;k===null&&(k=y.stateNode=new Ia),x.forEach(function(O){var V=c9.bind(null,y,O);k.has(O)||(k.add(O),O.then(V,V))})}}function el(y,x){var k=x.deletions;if(k!==null)for(var O=0;O<k.length;O++){var V=k[O];try{var Q=y,se=x,_e=se;e:for(;_e!==null;){switch(_e.tag){case 5:vs=_e.stateNode,Bc=!1;break e;case 3:vs=_e.stateNode.containerInfo,Bc=!0;break e;case 4:vs=_e.stateNode.containerInfo,Bc=!0;break e}_e=_e.return}if(vs===null)throw Error(n(160));yS(Q,se,V),vs=null,Bc=!1;var De=V.alternate;De!==null&&(De.return=null),V.return=null}catch(Qe){Xi(V,x,Qe)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)vS(x,y),x=x.sibling}function vS(y,x){var k=y.alternate,O=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(el(x,y),jc(y),O&4){try{qd(3,y,y.return),rb(3,y)}catch(cn){Xi(y,y.return,cn)}try{qd(5,y,y.return)}catch(cn){Xi(y,y.return,cn)}}break;case 1:el(x,y),jc(y),O&512&&k!==null&&by(k,k.return);break;case 5:if(el(x,y),jc(y),O&512&&k!==null&&by(k,k.return),y.flags&32){var V=y.stateNode;try{Ve(V,"")}catch(cn){Xi(y,y.return,cn)}}if(O&4&&(V=y.stateNode,V!=null)){var Q=y.memoizedProps,se=k!==null?k.memoizedProps:Q,_e=y.type,De=y.updateQueue;if(y.updateQueue=null,De!==null)try{_e==="input"&&Q.type==="radio"&&Q.name!=null&&ut(V,Q),Hn(_e,se);var Qe=Hn(_e,Q);for(se=0;se<De.length;se+=2){var At=De[se],Nt=De[se+1];At==="style"?xn(V,Nt):At==="dangerouslySetInnerHTML"?Ge(V,Nt):At==="children"?Ve(V,Nt):w(V,At,Nt,Qe)}switch(_e){case"input":Ke(V,Q);break;case"textarea":xe(V,Q);break;case"select":var Et=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!Q.multiple;var Qt=Q.value;Qt!=null?St(V,!!Q.multiple,Qt,!1):Et!==!!Q.multiple&&(Q.defaultValue!=null?St(V,!!Q.multiple,Q.defaultValue,!0):St(V,!!Q.multiple,Q.multiple?[]:"",!1))}V[ip]=Q}catch(cn){Xi(y,y.return,cn)}}break;case 6:if(el(x,y),jc(y),O&4){if(y.stateNode===null)throw Error(n(162));V=y.stateNode,Q=y.memoizedProps;try{V.nodeValue=Q}catch(cn){Xi(y,y.return,cn)}}break;case 3:if(el(x,y),jc(y),O&4&&k!==null&&k.memoizedState.isDehydrated)try{or(x.containerInfo)}catch(cn){Xi(y,y.return,cn)}break;case 4:el(x,y),jc(y);break;case 13:el(x,y),jc(y),V=y.child,V.flags&8192&&(Q=V.memoizedState!==null,V.stateNode.isHidden=Q,!Q||V.alternate!==null&&V.alternate.memoizedState!==null||(wS=en())),O&4&&xy(y);break;case 22:if(At=k!==null&&k.memoizedState!==null,y.mode&1?(zi=(Qe=zi)||At,el(x,y),zi=Qe):el(x,y),jc(y),O&8192){if(Qe=y.memoizedState!==null,(y.stateNode.isHidden=Qe)&&!At&&y.mode&1)for(tn=y,At=y.child;At!==null;){for(Nt=tn=At;tn!==null;){switch(Et=tn,Qt=Et.child,Et.tag){case 0:case 11:case 14:case 15:qd(4,Et,Et.return);break;case 1:by(Et,Et.return);var an=Et.stateNode;if(typeof an.componentWillUnmount=="function"){O=Et,k=Et.return;try{x=O,an.props=x.memoizedProps,an.state=x.memoizedState,an.componentWillUnmount()}catch(cn){Xi(O,k,cn)}}break;case 5:by(Et,Et.return);break;case 22:if(Et.memoizedState!==null){dp(Nt);continue}}Qt!==null?(Qt.return=Et,tn=Qt):dp(Nt)}At=At.sibling}e:for(At=null,Nt=y;;){if(Nt.tag===5){if(At===null){At=Nt;try{V=Nt.stateNode,Qe?(Q=V.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none"):(_e=Nt.stateNode,De=Nt.memoizedProps.style,se=De!=null&&De.hasOwnProperty("display")?De.display:null,_e.style.display=ln("display",se))}catch(cn){Xi(y,y.return,cn)}}}else if(Nt.tag===6){if(At===null)try{Nt.stateNode.nodeValue=Qe?"":Nt.memoizedProps}catch(cn){Xi(y,y.return,cn)}}else if((Nt.tag!==22&&Nt.tag!==23||Nt.memoizedState===null||Nt===y)&&Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===y)break e;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===y)break e;At===Nt&&(At=null),Nt=Nt.return}At===Nt&&(At=null),Nt.sibling.return=Nt.return,Nt=Nt.sibling}}break;case 19:el(x,y),jc(y),O&4&&xy(y);break;case 21:break;default:el(x,y),jc(y)}}function jc(y){var x=y.flags;if(x&2){try{e:{for(var k=y.return;k!==null;){if(RN(k)){var O=k;break e}k=k.return}throw Error(n(160))}switch(O.tag){case 5:var V=O.stateNode;O.flags&32&&(Ve(V,""),O.flags&=-33);var Q=NN(y);T_(y,Q,V);break;case 3:case 4:var se=O.stateNode.containerInfo,_e=NN(y);gS(y,_e,se);break;default:throw Error(n(161))}}catch(De){Xi(y,y.return,De)}y.flags&=-3}x&4096&&(y.flags&=-4097)}function C_(y,x,k){tn=y,bS(y)}function bS(y,x,k){for(var O=(y.mode&1)!==0;tn!==null;){var V=tn,Q=V.child;if(V.tag===22&&O){var se=V.memoizedState!==null||__;if(!se){var _e=V.alternate,De=_e!==null&&_e.memoizedState!==null||zi;_e=__;var Qe=zi;if(__=se,(zi=De)&&!Qe)for(tn=V;tn!==null;)se=tn,De=se.child,se.tag===22&&se.memoizedState!==null?PN(V):De!==null?(De.return=se,tn=De):PN(V);for(;Q!==null;)tn=Q,bS(Q),Q=Q.sibling;tn=V,__=_e,zi=Qe}zc(y)}else V.subtreeFlags&8772&&Q!==null?(Q.return=V,tn=Q):zc(y)}}function zc(y){for(;tn!==null;){var x=tn;if(x.flags&8772){var k=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:zi||rb(5,x);break;case 1:var O=x.stateNode;if(x.flags&4&&!zi)if(k===null)O.componentDidMount();else{var V=x.elementType===x.type?k.memoizedProps:Hl(x.type,k.memoizedProps);O.componentDidUpdate(V,k.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var Q=x.updateQueue;Q!==null&&qC(x,Q,O);break;case 3:var se=x.updateQueue;if(se!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}qC(x,se,k)}break;case 5:var _e=x.stateNode;if(k===null&&x.flags&4){k=_e;var De=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":De.autoFocus&&k.focus();break;case"img":De.src&&(k.src=De.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Qe=x.alternate;if(Qe!==null){var At=Qe.memoizedState;if(At!==null){var Nt=At.dehydrated;Nt!==null&&or(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}zi||x.flags&512&&E_(x)}catch(Et){Xi(x,x.return,Et)}}if(x===y){tn=null;break}if(k=x.sibling,k!==null){k.return=x.return,tn=k;break}tn=x.return}}function dp(y){for(;tn!==null;){var x=tn;if(x===y){tn=null;break}var k=x.sibling;if(k!==null){k.return=x.return,tn=k;break}tn=x.return}}function PN(y){for(;tn!==null;){var x=tn;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{rb(4,x)}catch(De){Xi(x,k,De)}break;case 1:var O=x.stateNode;if(typeof O.componentDidMount=="function"){var V=x.return;try{O.componentDidMount()}catch(De){Xi(x,V,De)}}var Q=x.return;try{E_(x)}catch(De){Xi(x,Q,De)}break;case 5:var se=x.return;try{E_(x)}catch(De){Xi(x,se,De)}}}catch(De){Xi(x,x.return,De)}if(x===y){tn=null;break}var _e=x.sibling;if(_e!==null){_e.return=x.return,tn=_e;break}tn=x.return}}var ON=Math.ceil,S_=E.ReactCurrentDispatcher,xS=E.ReactCurrentOwner,ql=E.ReactCurrentBatchConfig,Ir=0,bs=null,Oo=null,Fs=0,tl=0,wy=cu(0),ns=0,ib=null,hp=0,ob=0,A_=0,sb=null,mu=null,wS=0,u0=1/0,Wd=null,D_=!1,_S=null,pp=null,k_=!1,mp=null,Ra=0,ab=0,ES=null,I_=-1,ub=0;function Na(){return Ir&6?en():I_!==-1?I_:I_=en()}function gp(y){return y.mode&1?Ir&2&&Fs!==0?Fs&-Fs:hN.transition!==null?(ub===0&&(ub=Ot()),ub):(y=hn,y!==0||(y=window.event,y=y===void 0?16:Xr(y.type)),y):1}function Uc(y,x,k,O){if(50<ab)throw ab=0,ES=null,Error(n(185));On(y,k,O),(!(Ir&2)||y!==bs)&&(y===bs&&(!(Ir&2)&&(ob|=k),ns===4&&yp(y,Fs)),gu(y,O),k===1&&Ir===0&&!(x.mode&1)&&(u0=en()+500,Qw&&sp()))}function gu(y,x){var k=y.callbackNode;Tt(y,x);var O=lt(y,y===bs?Fs:0);if(O===0)k!==null&&Yu(k),y.callbackNode=null,y.callbackPriority=0;else if(x=O&-O,y.callbackPriority!==x){if(k!=null&&Yu(k),x===1)y.tag===0?Qm(FN.bind(null,y)):cN(FN.bind(null,y)),Gw(function(){!(Ir&6)&&sp()}),k=null;else{switch(lr(O)){case 1:k=mo;break;case 4:k=ps;break;case 16:k=Ei;break;case 536870912:k=Dd;break;default:k=Ei}k=UN(k,R_.bind(null,y))}y.callbackPriority=x,y.callbackNode=k}}function R_(y,x){if(I_=-1,ub=0,Ir&6)throw Error(n(327));var k=y.callbackNode;if(_y()&&y.callbackNode!==k)return null;var O=lt(y,y===bs?Fs:0);if(O===0)return null;if(O&30||O&y.expiredLanes||x)x=N_(y,O);else{x=O;var V=Ir;Ir|=2;var Q=$N();(bs!==y||Fs!==x)&&(Wd=null,u0=en()+500,c0(y,x));do try{s9();break}catch(_e){MN(y,_e)}while(!0);Ld(),S_.current=Q,Ir=V,Oo!==null?x=0:(bs=null,Fs=0,x=ns)}if(x!==0){if(x===2&&(V=_t(y),V!==0&&(O=V,x=TS(y,V))),x===1)throw k=ib,c0(y,0),yp(y,O),gu(y,en()),k;if(x===6)yp(y,O);else{if(V=y.current.alternate,!(O&30)&&!i9(V)&&(x=N_(y,O),x===2&&(Q=_t(y),Q!==0&&(O=Q,x=TS(y,Q))),x===1))throw k=ib,c0(y,0),yp(y,O),gu(y,en()),k;switch(y.finishedWork=V,y.finishedLanes=O,x){case 0:case 1:throw Error(n(345));case 2:f0(y,mu,Wd);break;case 3:if(yp(y,O),(O&130023424)===O&&(x=wS+500-en(),10<x)){if(lt(y,0)!==0)break;if(V=y.suspendedLanes,(V&O)!==O){Na(),y.pingedLanes|=y.suspendedLanes&V;break}y.timeoutHandle=np(f0.bind(null,y,mu,Wd),x);break}f0(y,mu,Wd);break;case 4:if(yp(y,O),(O&4194240)===O)break;for(x=y.eventTimes,V=-1;0<O;){var se=31-Jo(O);Q=1<<se,se=x[se],se>V&&(V=se),O&=~Q}if(O=V,O=en()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*ON(O/1960))-O,10<O){y.timeoutHandle=np(f0.bind(null,y,mu,Wd),O);break}f0(y,mu,Wd);break;case 5:f0(y,mu,Wd);break;default:throw Error(n(329))}}}return gu(y,en()),y.callbackNode===k?R_.bind(null,y):null}function TS(y,x){var k=sb;return y.current.memoizedState.isDehydrated&&(c0(y,x).flags|=256),y=N_(y,x),y!==2&&(x=mu,mu=k,x!==null&&CS(x)),y}function CS(y){mu===null?mu=y:mu.push.apply(mu,y)}function i9(y){for(var x=y;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var O=0;O<k.length;O++){var V=k[O],Q=V.getSnapshot;V=V.value;try{if(!Xe(Q(),V))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function yp(y,x){for(x&=~A_,x&=~ob,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var k=31-Jo(x),O=1<<k;y[k]=-1,x&=~O}}function FN(y){if(Ir&6)throw Error(n(327));_y();var x=lt(y,0);if(!(x&1))return gu(y,en()),null;var k=N_(y,x);if(y.tag!==0&&k===2){var O=_t(y);O!==0&&(x=O,k=TS(y,O))}if(k===1)throw k=ib,c0(y,0),yp(y,x),gu(y,en()),k;if(k===6)throw Error(n(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,f0(y,mu,Wd),gu(y,en()),null}function SS(y,x){var k=Ir;Ir|=1;try{return y(x)}finally{Ir=k,Ir===0&&(u0=en()+500,Qw&&sp())}}function l0(y){mp!==null&&mp.tag===0&&!(Ir&6)&&_y();var x=Ir;Ir|=1;var k=ql.transition,O=hn;try{if(ql.transition=null,hn=1,y)return y()}finally{hn=O,ql.transition=k,Ir=x,!(Ir&6)&&sp()}}function AS(){tl=wy.current,Oi(wy)}function c0(y,x){y.finishedWork=null,y.finishedLanes=0;var k=y.timeoutHandle;if(k!==-1&&(y.timeoutHandle=-1,$v(k)),Oo!==null)for(k=Oo.return;k!==null;){var O=k;switch(e0(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&Xw();break;case 3:lp(),Oi(fu),Oi(ea),a_();break;case 5:s_(O);break;case 4:lp();break;case 13:Oi(ji);break;case 19:Oi(ji);break;case 10:n_(O.type._context);break;case 22:case 23:AS()}k=k.return}if(bs=y,Oo=y=Vc(y.current,null),Fs=tl=x,ns=0,ib=null,A_=ob=hp=0,mu=sb=null,n0!==null){for(x=0;x<n0.length;x++)if(k=n0[x],O=k.interleaved,O!==null){k.interleaved=null;var V=O.next,Q=k.pending;if(Q!==null){var se=Q.next;Q.next=V,O.next=se}k.pending=O}n0=null}return y}function MN(y,x){do{var k=Oo;try{if(Ld(),Hv.current=h_,fy){for(var O=Ki.memoizedState;O!==null;){var V=O.queue;V!==null&&(V.pending=null),O=O.next}fy=!1}if(cp=0,ts=yo=Ki=null,qv=!1,i0=0,xS.current=null,k===null||k.return===null){ns=1,ib=x,Oo=null;break}e:{var Q=y,se=k.return,_e=k,De=x;if(x=Fs,_e.flags|=32768,De!==null&&typeof De=="object"&&typeof De.then=="function"){var Qe=De,At=_e,Nt=At.tag;if(!(At.mode&1)&&(Nt===0||Nt===11||Nt===15)){var Et=At.alternate;Et?(At.updateQueue=Et.updateQueue,At.memoizedState=Et.memoizedState,At.lanes=Et.lanes):(At.updateQueue=null,At.memoizedState=null)}var Qt=TN(se);if(Qt!==null){Qt.flags&=-257,aS(Qt,se,_e,Q,x),Qt.mode&1&&Xv(Q,Qe,x),x=Qt,De=Qe;var an=x.updateQueue;if(an===null){var cn=new Set;cn.add(De),x.updateQueue=cn}else an.add(De);break e}else{if(!(x&1)){Xv(Q,Qe,x),DS();break e}De=Error(n(426))}}else if(Fi&&_e.mode&1){var so=TN(se);if(so!==null){!(so.flags&65536)&&(so.flags|=256),aS(so,se,_e,Q,x),Bf(a0(De,_e));break e}}Q=De=a0(De,_e),ns!==4&&(ns=2),sb===null?sb=[Q]:sb.push(Q),Q=se;do{switch(Q.tag){case 3:Q.flags|=65536,x&=-x,Q.lanes|=x;var qe=Kv(Q,De,x);gN(Q,qe);break e;case 1:_e=De;var Le=Q.type,Ye=Q.stateNode;if(!(Q.flags&128)&&(typeof Le.getDerivedStateFromError=="function"||Ye!==null&&typeof Ye.componentDidCatch=="function"&&(pp===null||!pp.has(Ye)))){Q.flags|=65536,x&=-x,Q.lanes|=x;var Lt=v_(Q,_e,x);gN(Q,Lt);break e}}Q=Q.return}while(Q!==null)}BN(k)}catch(fn){x=fn,Oo===k&&k!==null&&(Oo=k=k.return);continue}break}while(!0)}function $N(){var y=S_.current;return S_.current=h_,y===null?h_:y}function DS(){(ns===0||ns===3||ns===2)&&(ns=4),bs===null||!(hp&268435455)&&!(ob&268435455)||yp(bs,Fs)}function N_(y,x){var k=Ir;Ir|=2;var O=$N();(bs!==y||Fs!==x)&&(Wd=null,c0(y,x));do try{o9();break}catch(V){MN(y,V)}while(!0);if(Ld(),Ir=k,S_.current=O,Oo!==null)throw Error(n(261));return bs=null,Fs=0,ns}function o9(){for(;Oo!==null;)LN(Oo)}function s9(){for(;Oo!==null&&!Ku();)LN(Oo)}function LN(y){var x=zN(y.alternate,y,tl);y.memoizedProps=y.pendingProps,x===null?BN(y):Oo=x,xS.current=null}function BN(y){var x=y;do{var k=x.alternate;if(y=x.return,x.flags&32768){if(k=n9(k,x),k!==null){k.flags&=32767,Oo=k;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{ns=6,Oo=null;return}}else if(k=t9(k,x,tl),k!==null){Oo=k;return}if(x=x.sibling,x!==null){Oo=x;return}Oo=x=y}while(x!==null);ns===0&&(ns=5)}function f0(y,x,k){var O=hn,V=ql.transition;try{ql.transition=null,hn=1,a9(y,x,k,O)}finally{ql.transition=V,hn=O}return null}function a9(y,x,k,O){do _y();while(mp!==null);if(Ir&6)throw Error(n(327));k=y.finishedWork;var V=y.finishedLanes;if(k===null)return null;if(y.finishedWork=null,y.finishedLanes=0,k===y.current)throw Error(n(177));y.callbackNode=null,y.callbackPriority=0;var Q=k.lanes|k.childLanes;if(dn(y,Q),y===bs&&(Oo=bs=null,Fs=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||k_||(k_=!0,UN(Ei,function(){return _y(),null})),Q=(k.flags&15990)!==0,k.subtreeFlags&15990||Q){Q=ql.transition,ql.transition=null;var se=hn;hn=1;var _e=Ir;Ir|=4,xS.current=null,r9(y,k),vS(k,y),QL(Xm),ve=!!Fv,Xm=Fv=null,y.current=k,C_(k),Is(),Ir=_e,hn=se,ql.transition=Q}else y.current=k;if(k_&&(k_=!1,mp=y,Ra=V),Q=y.pendingLanes,Q===0&&(pp=null),Qh(k.stateNode),gu(y,en()),x!==null)for(O=y.onRecoverableError,k=0;k<x.length;k++)V=x[k],O(V.value,{componentStack:V.stack,digest:V.digest});if(D_)throw D_=!1,y=_S,_S=null,y;return Ra&1&&y.tag!==0&&_y(),Q=y.pendingLanes,Q&1?y===ES?ab++:(ab=0,ES=y):ab=0,sp(),null}function _y(){if(mp!==null){var y=lr(Ra),x=ql.transition,k=hn;try{if(ql.transition=null,hn=16>y?16:y,mp===null)var O=!1;else{if(y=mp,mp=null,Ra=0,Ir&6)throw Error(n(331));var V=Ir;for(Ir|=4,tn=y.current;tn!==null;){var Q=tn,se=Q.child;if(tn.flags&16){var _e=Q.deletions;if(_e!==null){for(var De=0;De<_e.length;De++){var Qe=_e[De];for(tn=Qe;tn!==null;){var At=tn;switch(At.tag){case 0:case 11:case 15:qd(8,At,Q)}var Nt=At.child;if(Nt!==null)Nt.return=At,tn=Nt;else for(;tn!==null;){At=tn;var Et=At.sibling,Qt=At.return;if(IN(At),At===Qe){tn=null;break}if(Et!==null){Et.return=Qt,tn=Et;break}tn=Qt}}}var an=Q.alternate;if(an!==null){var cn=an.child;if(cn!==null){an.child=null;do{var so=cn.sibling;cn.sibling=null,cn=so}while(cn!==null)}}tn=Q}}if(Q.subtreeFlags&2064&&se!==null)se.return=Q,tn=se;else e:for(;tn!==null;){if(Q=tn,Q.flags&2048)switch(Q.tag){case 0:case 11:case 15:qd(9,Q,Q.return)}var qe=Q.sibling;if(qe!==null){qe.return=Q.return,tn=qe;break e}tn=Q.return}}var Le=y.current;for(tn=Le;tn!==null;){se=tn;var Ye=se.child;if(se.subtreeFlags&2064&&Ye!==null)Ye.return=se,tn=Ye;else e:for(se=Le;tn!==null;){if(_e=tn,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:rb(9,_e)}}catch(fn){Xi(_e,_e.return,fn)}if(_e===se){tn=null;break e}var Lt=_e.sibling;if(Lt!==null){Lt.return=_e.return,tn=Lt;break e}tn=_e.return}}if(Ir=V,sp(),Qo&&typeof Qo.onPostCommitFiberRoot=="function")try{Qo.onPostCommitFiberRoot(Il,y)}catch{}O=!0}return O}finally{hn=k,ql.transition=x}}return!1}function P_(y,x,k){x=a0(k,x),x=Kv(y,x,1),y=Ul(y,x,1),x=Na(),y!==null&&(On(y,1,x),gu(y,x))}function Xi(y,x,k){if(y.tag===3)P_(y,y,k);else for(;x!==null;){if(x.tag===3){P_(x,y,k);break}else if(x.tag===1){var O=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(pp===null||!pp.has(O))){y=a0(k,y),y=v_(x,y,1),x=Ul(x,y,1),y=Na(),x!==null&&(On(x,1,y),gu(x,y));break}}x=x.return}}function u9(y,x,k){var O=y.pingCache;O!==null&&O.delete(x),x=Na(),y.pingedLanes|=y.suspendedLanes&k,bs===y&&(Fs&k)===k&&(ns===4||ns===3&&(Fs&130023424)===Fs&&500>en()-wS?c0(y,0):A_|=k),gu(y,x)}function jN(y,x){x===0&&(y.mode&1?(x=je,je<<=1,!(je&130023424)&&(je=4194304)):x=1);var k=Na();y=Bd(y,x),y!==null&&(On(y,x,k),gu(y,k))}function l9(y){var x=y.memoizedState,k=0;x!==null&&(k=x.retryLane),jN(y,k)}function c9(y,x){var k=0;switch(y.tag){case 13:var O=y.stateNode,V=y.memoizedState;V!==null&&(k=V.retryLane);break;case 19:O=y.stateNode;break;default:throw Error(n(314))}O!==null&&O.delete(x),jN(y,k)}var zN;zN=function(y,x,k){if(y!==null)if(y.memoizedProps!==x.pendingProps||fu.current)ka=!0;else{if(!(y.lanes&k)&&!(x.flags&128))return ka=!1,AN(y,x,k);ka=!!(y.flags&131072)}else ka=!1,Fi&&x.flags&1048576&&fN(x,Zw,x.index);switch(x.lanes=0,x.tag){case 2:var O=x.type;w_(y,x),y=x.pendingProps;var V=sy(x,ea.current);up(x,k),V=o0(null,x,O,y,V,k);var Q=u_();return x.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,du(O)?(Q=!0,$l(x)):Q=!1,x.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,i_(x),V.updater=g_,x.stateNode=V,V._reactInternals=x,sS(x,O,y,k),x=hS(null,x,O,!0,Q,k)):(x.tag=0,Fi&&Q&&Lv(x),Ns(null,x,V,k),x=x.child),x;case 16:O=x.elementType;e:{switch(w_(y,x),y=x.pendingProps,V=O._init,O=V(O._payload),x.type=O,V=x.tag=d9(O),y=Hl(O,y),V){case 0:x=fS(null,x,O,y,k);break e;case 1:x=dS(null,x,O,y,k);break e;case 11:x=CN(null,x,O,y,k);break e;case 14:x=uS(null,x,O,Hl(O.type,y),k);break e}throw Error(n(306,O,""))}return x;case 0:return O=x.type,V=x.pendingProps,V=x.elementType===O?V:Hl(O,V),fS(y,x,O,V,k);case 1:return O=x.type,V=x.pendingProps,V=x.elementType===O?V:Hl(O,V),dS(y,x,O,V,k);case 3:e:{if(SN(x),y===null)throw Error(n(387));O=x.pendingProps,Q=x.memoizedState,V=Q.element,mN(y,x),ly(x,O,null,k);var se=x.memoizedState;if(O=se.element,Q.isDehydrated)if(Q={element:O,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},x.updateQueue.baseState=Q,x.memoizedState=Q,x.flags&256){V=a0(Error(n(423)),x),x=Hf(y,x,O,k,V);break e}else if(O!==V){V=a0(Error(n(424)),x),x=Hf(y,x,O,k,V);break e}else for(Ju=rp(x.stateNode.containerInfo.firstChild),na=x,Fi=!0,Mc=null,k=t_(x,null,O,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Lf(),O===V){x=Lc(y,x,k);break e}Ns(y,x,O,k)}x=x.child}return x;case 5:return GC(x),y===null&&hu(x),O=x.type,V=x.pendingProps,Q=y!==null?y.memoizedProps:null,se=V.children,Mv(O,V)?se=null:Q!==null&&Mv(O,Q)&&(x.flags|=32),cS(y,x),Ns(y,x,se,k),x.child;case 6:return y===null&&hu(x),null;case 13:return x_(y,x,k);case 4:return WC(x,x.stateNode.containerInfo),O=x.pendingProps,y===null?x.child=oo(x,null,O,k):Ns(y,x,O,k),x.child;case 11:return O=x.type,V=x.pendingProps,V=x.elementType===O?V:Hl(O,V),CN(y,x,O,V,k);case 7:return Ns(y,x,x.pendingProps,k),x.child;case 8:return Ns(y,x,x.pendingProps.children,k),x.child;case 12:return Ns(y,x,x.pendingProps.children,k),x.child;case 10:e:{if(O=x.type._context,V=x.pendingProps,Q=x.memoizedProps,se=V.value,Ti(zv,O._currentValue),O._currentValue=se,Q!==null)if(Xe(Q.value,se)){if(Q.children===V.children&&!fu.current){x=Lc(y,x,k);break e}}else for(Q=x.child,Q!==null&&(Q.return=x);Q!==null;){var _e=Q.dependencies;if(_e!==null){se=Q.child;for(var De=_e.firstContext;De!==null;){if(De.context===O){if(Q.tag===1){De=jd(-1,k&-k),De.tag=2;var Qe=Q.updateQueue;if(Qe!==null){Qe=Qe.shared;var At=Qe.pending;At===null?De.next=De:(De.next=At.next,At.next=De),Qe.pending=De}}Q.lanes|=k,De=Q.alternate,De!==null&&(De.lanes|=k),Rs(Q.return,k,x),_e.lanes|=k;break}De=De.next}}else if(Q.tag===10)se=Q.type===x.type?null:Q.child;else if(Q.tag===18){if(se=Q.return,se===null)throw Error(n(341));se.lanes|=k,_e=se.alternate,_e!==null&&(_e.lanes|=k),Rs(se,k,x),se=Q.sibling}else se=Q.child;if(se!==null)se.return=Q;else for(se=Q;se!==null;){if(se===x){se=null;break}if(Q=se.sibling,Q!==null){Q.return=se.return,se=Q;break}se=se.return}Q=se}Ns(y,x,V.children,k),x=x.child}return x;case 9:return V=x.type,O=x.pendingProps.children,up(x,k),V=jl(V),O=O(V),x.flags|=1,Ns(y,x,O,k),x.child;case 14:return O=x.type,V=Hl(O,x.pendingProps),V=Hl(O.type,V),uS(y,x,O,V,k);case 15:return Vf(y,x,x.type,x.pendingProps,k);case 17:return O=x.type,V=x.pendingProps,V=x.elementType===O?V:Hl(O,V),w_(y,x),x.tag=1,du(O)?(y=!0,$l(x)):y=!1,up(x,k),s0(x,O,V),sS(x,O,V,k),hS(null,x,O,!0,y,k);case 19:return fp(y,x,k);case 22:return lS(y,x,k)}throw Error(n(156,x.tag))};function UN(y,x){return kl(y,x)}function f9(y,x,k,O){this.tag=y,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wl(y,x,k,O){return new f9(y,x,k,O)}function O_(y){return y=y.prototype,!(!y||!y.isReactComponent)}function d9(y){if(typeof y=="function")return O_(y)?1:0;if(y!=null){if(y=y.$$typeof,y===B)return 11;if(y===G)return 14}return 2}function Vc(y,x){var k=y.alternate;return k===null?(k=Wl(y.tag,x,y.key,y.mode),k.elementType=y.elementType,k.type=y.type,k.stateNode=y.stateNode,k.alternate=y,y.alternate=k):(k.pendingProps=x,k.type=y.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=y.flags&14680064,k.childLanes=y.childLanes,k.lanes=y.lanes,k.child=y.child,k.memoizedProps=y.memoizedProps,k.memoizedState=y.memoizedState,k.updateQueue=y.updateQueue,x=y.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=y.sibling,k.index=y.index,k.ref=y.ref,k}function F_(y,x,k,O,V,Q){var se=2;if(O=y,typeof y=="function")O_(y)&&(se=1);else if(typeof y=="string")se=5;else e:switch(y){case S:return d0(k.children,V,Q,x);case I:se=8,V|=8;break;case R:return y=Wl(12,k,x,V|2),y.elementType=R,y.lanes=Q,y;case L:return y=Wl(13,k,x,V),y.elementType=L,y.lanes=Q,y;case z:return y=Wl(19,k,x,V),y.elementType=z,y.lanes=Q,y;case te:return M_(k,V,Q,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case P:se=10;break e;case M:se=9;break e;case B:se=11;break e;case G:se=14;break e;case W:se=16,O=null;break e}throw Error(n(130,y==null?y:typeof y,""))}return x=Wl(se,k,x,V),x.elementType=y,x.type=O,x.lanes=Q,x}function d0(y,x,k,O){return y=Wl(7,y,O,x),y.lanes=k,y}function M_(y,x,k,O){return y=Wl(22,y,O,x),y.elementType=te,y.lanes=k,y.stateNode={isHidden:!1},y}function kS(y,x,k){return y=Wl(6,y,null,x),y.lanes=k,y}function IS(y,x,k){return x=Wl(4,y.children!==null?y.children:[],y.key,x),x.lanes=k,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function h9(y,x,k,O,V){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.identifierPrefix=O,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function RS(y,x,k,O,V,Q,se,_e,De){return y=new h9(y,x,k,_e,De),x===1?(x=1,Q===!0&&(x|=8)):x=0,Q=Wl(3,null,null,x),y.current=Q,Q.stateNode=y,Q.memoizedState={element:O,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},i_(Q),y}function p9(y,x,k){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:O==null?null:""+O,children:y,containerInfo:x,implementation:k}}function VN(y){if(!y)return op;y=y._reactInternals;e:{if(Ri(y)!==y||y.tag!==1)throw Error(n(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(du(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(y.tag===1){var k=y.type;if(du(k))return uN(y,k,x)}return x}function HN(y,x,k,O,V,Q,se,_e,De){return y=RS(k,O,!0,y,V,Q,se,_e,De),y.context=VN(null),k=y.current,O=Na(),V=gp(k),Q=jd(O,V),Q.callback=x??null,Ul(k,Q,V),y.current.lanes=V,On(y,V,O),gu(y,O),y}function $_(y,x,k,O){var V=x.current,Q=Na(),se=gp(V);return k=VN(k),x.context===null?x.context=k:x.pendingContext=k,x=jd(Q,se),x.payload={element:y},O=O===void 0?null:O,O!==null&&(x.callback=O),y=Ul(V,x,se),y!==null&&(Uc(y,V,se,Q),o_(y,V,se)),se}function L_(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function qN(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var k=y.retryLane;y.retryLane=k!==0&&k<x?k:x}}function NS(y,x){qN(y,x),(y=y.alternate)&&qN(y,x)}var WN=typeof reportError=="function"?reportError:function(y){console.error(y)};function PS(y){this._internalRoot=y}lb.prototype.render=PS.prototype.render=function(y){var x=this._internalRoot;if(x===null)throw Error(n(409));$_(y,x,null,null)},lb.prototype.unmount=PS.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var x=y.containerInfo;l0(function(){$_(null,y,null,null)}),x[Qu]=null}};function lb(y){this._internalRoot=y}lb.prototype.unstable_scheduleHydration=function(y){if(y){var x=kd();y={blockedOn:null,target:y,priority:x};for(var k=0;k<au.length&&x!==0&&x<au[k].priority;k++);au.splice(k,0,y),k===0&&zm(y)}};function B_(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function j_(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function GN(){}function m9(y,x,k,O,V){if(V){if(typeof O=="function"){var Q=O;O=function(){var Qe=L_(se);Q.call(Qe)}}var se=HN(x,O,y,0,null,!1,!1,"",GN);return y._reactRootContainer=se,y[Qu]=se.current,tp(y.nodeType===8?y.parentNode:y),l0(),se}for(;V=y.lastChild;)y.removeChild(V);if(typeof O=="function"){var _e=O;O=function(){var Qe=L_(De);_e.call(Qe)}}var De=RS(y,0,!1,null,null,!1,!1,"",GN);return y._reactRootContainer=De,y[Qu]=De.current,tp(y.nodeType===8?y.parentNode:y),l0(function(){$_(x,De,k,O)}),De}function z_(y,x,k,O,V){var Q=k._reactRootContainer;if(Q){var se=Q;if(typeof V=="function"){var _e=V;V=function(){var De=L_(se);_e.call(De)}}$_(x,se,y,V)}else se=m9(k,x,y,V,O);return L_(se)}Io=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var k=Me(x.pendingLanes);k!==0&&(Qn(x,k|1),gu(x,en()),!(Ir&6)&&(u0=en()+500,sp()))}break;case 13:l0(function(){var O=Bd(y,1);if(O!==null){var V=Na();Uc(O,y,1,V)}}),NS(y,1)}},Ta=function(y){if(y.tag===13){var x=Bd(y,134217728);if(x!==null){var k=Na();Uc(x,y,134217728,k)}NS(y,134217728)}},Rl=function(y){if(y.tag===13){var x=gp(y),k=Bd(y,x);if(k!==null){var O=Na();Uc(k,y,x,O)}NS(y,x)}},kd=function(){return hn},Dc=function(y,x){var k=hn;try{return hn=y,x()}finally{hn=k}},Lr=function(y,x,k){switch(x){case"input":if(Ke(y,k),x=k.name,k.type==="radio"&&x!=null){for(k=y;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var O=k[x];if(O!==y&&O.form===y.form){var V=Kw(O);if(!V)throw Error(n(90));he(O),Ke(O,V)}}}break;case"textarea":xe(y,k);break;case"select":x=k.value,x!=null&&St(y,!!k.multiple,x,!1)}},hs=SS,Ks=l0;var U_={usingClientEntryPoint:!1,Events:[Zs,er,Kw,Do,iu,SS]},cb={findFiberByHostInstance:Of,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g9={bundleType:cb.bundleType,version:cb.version,rendererPackageName:cb.rendererPackageName,rendererConfig:cb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=Ac(y),y===null?null:y.stateNode},findFiberByHostInstance:cb.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var V_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!V_.isDisabled&&V_.supportsFiber)try{Il=V_.inject(g9),Qo=V_}catch{}}return Xl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U_,Xl.createPortal=function(y,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B_(x))throw Error(n(200));return p9(y,x,null,k)},Xl.createRoot=function(y,x){if(!B_(y))throw Error(n(299));var k=!1,O="",V=WN;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(O=x.identifierPrefix),x.onRecoverableError!==void 0&&(V=x.onRecoverableError)),x=RS(y,1,!1,null,null,k,!1,O,V),y[Qu]=x.current,tp(y.nodeType===8?y.parentNode:y),new PS(x)},Xl.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(n(188)):(y=Object.keys(y).join(","),Error(n(268,y)));return y=Ac(x),y=y===null?null:y.stateNode,y},Xl.flushSync=function(y){return l0(y)},Xl.hydrate=function(y,x,k){if(!j_(x))throw Error(n(200));return z_(null,y,x,!0,k)},Xl.hydrateRoot=function(y,x,k){if(!B_(y))throw Error(n(405));var O=k!=null&&k.hydratedSources||null,V=!1,Q="",se=WN;if(k!=null&&(k.unstable_strictMode===!0&&(V=!0),k.identifierPrefix!==void 0&&(Q=k.identifierPrefix),k.onRecoverableError!==void 0&&(se=k.onRecoverableError)),x=HN(x,null,y,1,k??null,V,!1,Q,se),y[Qu]=x.current,tp(y),O)for(y=0;y<O.length;y++)k=O[y],V=k._getVersion,V=V(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,V]:x.mutableSourceEagerHydrationData.push(k,V);return new lb(x)},Xl.render=function(y,x,k){if(!j_(x))throw Error(n(200));return z_(null,y,x,!1,k)},Xl.unmountComponentAtNode=function(y){if(!j_(y))throw Error(n(40));return y._reactRootContainer?(l0(function(){z_(null,null,y,!1,function(){y._reactRootContainer=null,y[Qu]=null})}),!0):!1},Xl.unstable_batchedUpdates=SS,Xl.unstable_renderSubtreeIntoContainer=function(y,x,k,O){if(!j_(k))throw Error(n(200));if(y==null||y._reactInternals===void 0)throw Error(n(38));return z_(y,x,k,!1,O)},Xl.version="18.3.1-next-f1338f8080-20240426",Xl}var wne;function H0e(){if(wne)return R9.exports;wne=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),R9.exports=tMe(),R9.exports}var _ne;function nMe(){if(_ne)return QN;_ne=1;var e=H0e();return QN.createRoot=e.createRoot,QN.hydrateRoot=e.hydrateRoot,QN}var rMe=nMe();const iMe=_c(rMe);var kp=function(){return kp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},kp.apply(this,arguments)};function pI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function oMe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var d4="right-scroll-bar-position",h4="width-before-scroll-bar",sMe="with-scroll-bars-hidden",aMe="--removed-body-scroll-bar-size";function O9(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function uMe(e,t){var n=F.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var lMe=typeof window<"u"?F.useLayoutEffect:F.useEffect,Ene=new WeakMap;function cMe(e,t){var n=uMe(null,function(r){return e.forEach(function(i){return O9(i,r)})});return lMe(function(){var r=Ene.get(n);if(r){var i=new Set(r),o=new Set(e),s=n.current;i.forEach(function(a){o.has(a)||O9(a,null)}),o.forEach(function(a){i.has(a)||O9(a,s)})}Ene.set(n,e)},[e]),n}function fMe(e){return e}function dMe(e,t){t===void 0&&(t=fMe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var s=t(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var u=function(){var c=s;s=[],c.forEach(o)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){s.push(c),l()},filter:function(c){return s=s.filter(c),n}}}};return i}function hMe(e){e===void 0&&(e={});var t=dMe(null);return t.options=kp({async:!0,ssr:!1},e),t}var q0e=function(e){var t=e.sideCar,n=pI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return F.createElement(r,kp({},n))};q0e.isSideCarExport=!0;function pMe(e,t){return e.useMedium(t),q0e}var W0e=hMe(),F9=function(){},XM=F.forwardRef(function(e,t){var n=F.useRef(null),r=F.useState({onScrollCapture:F9,onWheelCapture:F9,onTouchMoveCapture:F9}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,g=e.as,v=g===void 0?"div":g,b=e.gapMode,w=pI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,T=cMe([n,t]),C=kp(kp({},w),i);return F.createElement(F.Fragment,null,c&&F.createElement(E,{sideCar:W0e,removeScrollBar:l,shards:f,noIsolation:h,inert:m,setCallbacks:o,allowPinchZoom:!!p,lockRef:n,gapMode:b}),s?F.cloneElement(F.Children.only(a),kp(kp({},C),{ref:T})):F.createElement(v,kp({},C,{className:u,ref:T}),a))});XM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};XM.classNames={fullWidth:h4,zeroRight:d4};var G0e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function mMe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=G0e();return t&&e.setAttribute("nonce",t),e}function gMe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function yMe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var vMe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=mMe())&&(gMe(t,n),yMe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},bMe=function(){var e=vMe();return function(t,n){F.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},xMe=function(){var e=bMe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},wMe={left:0,top:0,right:0,gap:0},M9=function(e){return parseInt(e||"",10)||0},_Me=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[M9(n),M9(r),M9(i)]},EMe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return wMe;var t=_Me(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},TMe=xMe(),GE="data-scroll-locked",CMe=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(sMe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(GE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(d4,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(h4,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(d4," .").concat(d4,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(h4," .").concat(h4,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(GE,`] {
    `).concat(aMe,": ").concat(a,`px;
  }
`)},Tne=function(){var e=parseInt(document.body.getAttribute(GE)||"0",10);return isFinite(e)?e:0},SMe=function(){F.useEffect(function(){return document.body.setAttribute(GE,(Tne()+1).toString()),function(){var e=Tne()-1;e<=0?document.body.removeAttribute(GE):document.body.setAttribute(GE,e.toString())}},[])},AMe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;SMe();var o=F.useMemo(function(){return EMe(i)},[i]);return F.createElement(TMe,{styles:CMe(o,!t,i,n?"":"!important")})};function DMe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=G0e();return t&&e.setAttribute("nonce",t),e}function kMe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function IMe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var RMe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=DMe())&&(kMe(t,n),IMe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},NMe=function(){var e=RMe();return function(t,n){F.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},PMe=function(){var e=NMe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},Tz=!1;if(typeof window<"u")try{var JN=Object.defineProperty({},"passive",{get:function(){return Tz=!0,!0}});window.addEventListener("test",JN,JN),window.removeEventListener("test",JN,JN)}catch{Tz=!1}var W_=Tz?{passive:!1}:!1,OMe=function(e){return e.tagName==="TEXTAREA"},Y0e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!OMe(e)&&n[t]==="visible")},FMe=function(e){return Y0e(e,"overflowY")},MMe=function(e){return Y0e(e,"overflowX")},Cne=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=K0e(e,r);if(i){var o=X0e(e,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$Me=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},LMe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},K0e=function(e,t){return e==="v"?FMe(t):MMe(t)},X0e=function(e,t){return e==="v"?$Me(t):LMe(t)},BMe=function(e,t){return e==="h"&&t==="rtl"?-1:1},jMe=function(e,t,n,r,i){var o=BMe(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,u=t.contains(a),l=!1,c=s>0,f=0,d=0;do{var h=X0e(e,a),m=h[0],p=h[1],g=h[2],v=p-g-o*m;(m||v)&&K0e(e,a)&&(f+=v,d+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},ZN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Sne=function(e){return[e.deltaX,e.deltaY]},Ane=function(e){return e&&"current"in e?e.current:e},zMe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},UMe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},VMe=0,G_=[];function HMe(e){var t=F.useRef([]),n=F.useRef([0,0]),r=F.useRef(),i=F.useState(VMe++)[0],o=F.useState(PMe)[0],s=F.useRef(e);F.useEffect(function(){s.current=e},[e]),F.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var p=oMe([e.lockRef.current],(e.shards||[]).map(Ane),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=F.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!s.current.allowPinchZoom;var v=ZN(p),b=n.current,w="deltaX"in p?p.deltaX:b[0]-v[0],E="deltaY"in p?p.deltaY:b[1]-v[1],T,C=p.target,S=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in p&&S==="h"&&C.type==="range")return!1;var I=Cne(S,C);if(!I)return!0;if(I?T=S:(T=S==="v"?"h":"v",I=Cne(S,C)),!I)return!1;if(!r.current&&"changedTouches"in p&&(w||E)&&(r.current=T),!T)return!0;var R=r.current||T;return jMe(R,g,p,R==="h"?w:E)},[]),u=F.useCallback(function(p){var g=p;if(!(!G_.length||G_[G_.length-1]!==o)){var v="deltaY"in g?Sne(g):ZN(g),b=t.current.filter(function(T){return T.name===g.type&&(T.target===g.target||g.target===T.shadowParent)&&zMe(T.delta,v)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(s.current.shards||[]).map(Ane).filter(Boolean).filter(function(T){return T.contains(g.target)}),E=w.length>0?a(g,w[0]):!s.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=F.useCallback(function(p,g,v,b){var w={name:p,delta:g,target:v,should:b,shadowParent:qMe(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(E){return E!==w})},1)},[]),c=F.useCallback(function(p){n.current=ZN(p),r.current=void 0},[]),f=F.useCallback(function(p){l(p.type,Sne(p),p.target,a(p,e.lockRef.current))},[]),d=F.useCallback(function(p){l(p.type,ZN(p),p.target,a(p,e.lockRef.current))},[]);F.useEffect(function(){return G_.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,W_),document.addEventListener("touchmove",u,W_),document.addEventListener("touchstart",c,W_),function(){G_=G_.filter(function(p){return p!==o}),document.removeEventListener("wheel",u,W_),document.removeEventListener("touchmove",u,W_),document.removeEventListener("touchstart",c,W_)}},[]);var h=e.removeScrollBar,m=e.inert;return F.createElement(F.Fragment,null,m?F.createElement(o,{styles:UMe(i)}):null,h?F.createElement(AMe,{gapMode:e.gapMode}):null)}function qMe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const WMe=pMe(W0e,HMe);var b2=F.forwardRef(function(e,t){return F.createElement(XM,kp({},e,{ref:t,sideCar:WMe}))});b2.classNames=XM.classNames;function Li(e){return Object.keys(e)}function $9(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Wq(e,t){const n={...e},r=t;return $9(e)&&$9(t)&&Object.keys(t).forEach(i=>{$9(r[i])&&i in e?n[i]=Wq(n[i],r[i]):n[i]=r[i]}),n}function GMe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function YMe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function tk(e){const t=YMe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function L9(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Q0e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?L9(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(o=>n(o)).join(",");if(r.includes(" "))return r.split(" ").map(o=>n(o)).join(" ");if(r.includes(e))return t?L9(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const o=`${Number(i)/16}${e}`;return t?L9(o):o}}return r}return n}const et=Q0e("rem",{shouldScale:!0}),t6=Q0e("em");function Y1(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function J0e(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function K1(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==F.Fragment:!1}function nu(e){const t=F.createContext(null);return[({children:i,value:o})=>A.jsx(t.Provider,{value:o,children:i}),()=>{const i=F.useContext(t);if(i===null)throw new Error(e);return i}]}function X1(e=null){const t=F.createContext(e);return[({children:i,value:o})=>A.jsx(t.Provider,{value:o,children:i}),()=>F.useContext(t)]}function n6(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function r6(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function KMe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function XMe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function QMe(e,t,n){return r6(e,n)===r6(t,n)}function Gq({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:o="rtl",orientation:s}){return a=>{var m;n==null||n(a);const u=Array.from(((m=r6(a.currentTarget,e))==null?void 0:m.querySelectorAll(t))||[]).filter(p=>QMe(a.currentTarget,p,e)),l=u.findIndex(p=>a.currentTarget===p),c=XMe(l,u,r),f=KMe(l,u,r),d=o==="rtl"?f:c,h=o==="rtl"?c:f;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const p=u.length-1;!u[p].disabled&&u[p].focus();break}}}}const JMe={app:100,modal:200,popover:300,overlay:400,max:9999};function Ec(e){return JMe[e]}const Cz=()=>{};function ZMe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Cz:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Zn(e,t="size",n=!0){if(e!==void 0)return J0e(e)?n?et(e):e:`var(--${t}-${e})`}function Cs(e){return Zn(e,"mantine-spacing")}function wi(e){return e===void 0?"var(--mantine-radius-default)":Zn(e,"mantine-radius")}function Ka(e){return Zn(e,"mantine-font-size")}function Z0e(e){return Zn(e,"mantine-line-height",!1)}function Yq(e){if(e)return Zn(e,"mantine-shadow",!1)}function Fp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function Kq(e,t){return e in t?tk(t[e]):tk(e)}function nk(e,t){const n=e.map(r=>({value:r,px:Kq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function ch(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function e5e(e,t,n){var r;return n?Array.from(((r=r6(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function t5e(){const[e,t]=F.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Ip(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function YE(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function jy(e){const t=F.useRef(e);return F.useEffect(()=>{t.current=e}),F.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const n5e=()=>{};function QM(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=jy(e),o=F.useRef(0),s=Object.assign(F.useCallback((...a)=>{window.clearTimeout(o.current);const u=()=>{o.current!==0&&(o.current=0,i(...a))};s.flush=u,o.current=window.setTimeout(u,n)},[i,n]),{flush:n5e});return F.useEffect(()=>()=>{window.clearTimeout(o.current),r&&s.flush()},[s,r]),s}const Dne=["mousedown","touchstart"];function r5e(e,t,n){const r=F.useRef(null);return F.useEffect(()=>{const i=o=>{const{target:s}=o??{};if(Array.isArray(n)){const a=(s==null?void 0:s.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(s)&&s.tagName!=="HTML";n.every(l=>!!l&&!o.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(s)&&e()};return(t||Dne).forEach(o=>document.addEventListener(o,i)),()=>{(t||Dne).forEach(o=>document.removeEventListener(o,i))}},[r,e,n]),r}function i5e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function o5e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function s5e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=F.useState(n?t:o5e(e)),o=F.useRef(null);return F.useEffect(()=>{if("matchMedia"in window)return o.current=window.matchMedia(e),i(o.current.matches),i5e(o.current,s=>i(s.matches))},[e]),r}const Gx=typeof document<"u"?F.useLayoutEffect:F.useEffect;function nm(e,t){const n=F.useRef(!1);F.useEffect(()=>()=>{n.current=!1},[]),F.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function ege({opened:e,shouldReturnFocus:t=!0}){const n=F.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return nm(()=>{let i=-1;const o=s=>{s.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",o),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",o)}},[e,t]),r}const a5e=/input|select|textarea|button|object/,tge="a, input, select, textarea, button, object, [tabindex]";function u5e(e){return e.style.display==="none"}function l5e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(u5e(n))return!1;n=n.parentNode}return!0}function nge(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Sz(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(nge(e));return(a5e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&l5e(e)}function rge(e){const t=nge(e);return(Number.isNaN(t)||t>=0)&&Sz(e)}function c5e(e){return Array.from(e.querySelectorAll(tge)).filter(rge)}function f5e(e,t){const n=c5e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let o=r===i.activeElement||e===i.activeElement;const s=i.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(o=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===s.getAttribute("name")).includes(r)),!o)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function d5e(e=!0){const t=F.useRef(null),n=i=>{let o=i.querySelector("[data-autofocus]");if(!o){const s=Array.from(i.querySelectorAll(tge));o=s.find(rge)||s.find(Sz)||null,!o&&Sz(i)&&(o=i)}o&&o.focus({preventScroll:!0})},r=F.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return F.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=o=>{o.key==="Tab"&&t.current&&f5e(t.current,o)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const h5e=e=>(e+1)%1e6;function p5e(){const[,e]=F.useReducer(h5e,0);return e}const m5e=Gr.useId||(()=>{});function g5e(){const e=m5e();return e?`mantine-${e.replace(/:/g,"")}`:""}function Cl(e){const t=g5e(),[n,r]=F.useState(t);return Gx(()=>{r(YE())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function ige(e,t,n){F.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function i6(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function oge(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=i6(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():i6(r,null)}),t.clear()}}}function Ws(...e){return F.useCallback(oge(...e),e)}function y5e(e,t,n="ltr"){const r=F.useRef(null),i=F.useRef(!1),o=F.useRef(!1),s=F.useRef(0),[a,u]=F.useState(!1);return F.useEffect(()=>{i.current=!0},[]),F.useEffect(()=>{var b,w;const l=({x:E,y:T})=>{cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const S=Ip((E-C.left)/C.width,0,1);e({x:n==="ltr"?S:1-S,y:Ip((T-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",p),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)},d=()=>{!o.current&&i.current&&(o.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{o.current&&i.current&&(o.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},m=E=>{d(),E.preventDefault(),p(E)},p=E=>l({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),d(),v(E)},v=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",m),(w=r.current)==null||w.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",m),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ya({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,o]=F.useState(t!==void 0?t:n),s=(a,...u)=>{o(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,s,!1]}function JM(e,t){return s5e("(prefers-reduced-motion: reduce)",e,t)}const v5e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function mI(e){const t=F.useRef(0),n=F.useRef(null),[r,i]=F.useState(v5e),o=F.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const a=s[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return F.useEffect(()=>(n.current&&(o==null||o.observe(n.current,e)),()=>{o==null||o.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function b5e(e){const[t,{width:n,height:r}]=mI(e);return{ref:t,width:n,height:r}}function Xq(e=!1,t){const{onOpen:n,onClose:r}={},[i,o]=F.useState(e),s=F.useCallback(()=>{o(l=>l||(n==null||n(),!0))},[n]),a=F.useCallback(()=>{o(l=>l&&(r==null||r(),!1))},[r]),u=F.useCallback(()=>{i?a():s()},[a,s,i]);return[i,{open:s,close:a,toggle:u}]}function x5e(e){const t=F.useRef(void 0);return F.useEffect(()=>{t.current=e},[e]),t.current}function w5e(e,t){const n=jy(e),r=F.useRef(null),i=F.useRef(null),o=F.useRef(!0),s=F.useRef(t),a=F.useRef(-1),u=()=>window.clearTimeout(a.current),l=F.useCallback((...d)=>{n(...d),r.current=d,i.current=d,o.current=!1},[n]),c=F.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,s.current)):o.current=!0},[l]),f=F.useCallback((...d)=>{o.current?(l(...d),a.current=window.setTimeout(c,s.current)):r.current=d},[l,c]);return F.useEffect(()=>{s.current=t},[t]),[f,u]}function _5e(e,t){const[n,r]=F.useState(e),[i,o]=w5e(r,t);return F.useEffect(()=>o,[]),[n,i]}function E5e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function T5e(e){function t(r){const i=Object.keys(r).reduce((o,s)=>(o[`${e}:${s}`]=a=>r[s](a.detail),o),{});Gx(()=>(Object.keys(i).forEach(o=>{window.removeEventListener(o,i[o]),window.addEventListener(o,i[o])}),()=>Object.keys(i).forEach(o=>{window.removeEventListener(o,i[o])})),[i])}function n(r){return(...i)=>E5e(`${e}:${String(r)}`,i[0])}return[t,n]}var C5e={};function S5e(){return typeof process<"u"&&C5e?"production":"development"}function kne(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function ZM(e){var n;const t=Gr.version;return typeof Gr.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function sge(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=sge(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ls(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=sge(e))&&(r&&(r+=" "),r+=t);return r}const A5e={};function D5e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=ls(t[r],i):t[r]=i})}),t}function e5({theme:e,classNames:t,props:n,stylesCtx:r}){const o=(Array.isArray(t)?t:[t]).map(s=>typeof s=="function"?s(e,n,r):s||A5e);return D5e(o)}function o6({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((o,s)=>typeof s=="function"?{...o,...s(e,n,r)}:{...o,...s},{})}const age=F.createContext(null);function Q1(){const e=F.useContext(age);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function k5e(){return Q1().cssVariablesResolver}function I5e(){return Q1().classNamesPrefix}function Qq(){return Q1().getStyleNonce}function R5e(){return Q1().withStaticClasses}function N5e(){return Q1().headless}function P5e(){var e;return(e=Q1().stylesTransform)==null?void 0:e.sx}function O5e(){var e;return(e=Q1().stylesTransform)==null?void 0:e.styles}function F5e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function M5e(e){let t=e.replace("#","");if(t.length===3){const s=t.split("");t=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(t.length===8){const s=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:s}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,o=n&255;return{r,g:i,b:o,a:1}}function $5e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function L5e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,o=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*o-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=o-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:s||1}}function Jq(e){return F5e(e)?M5e(e):e.startsWith("rgb")?$5e(e):e.startsWith("hsl")?L5e(e):{r:0,g:0,b:0,a:1}}function e3(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:o}=Jq(e),s=1-t,a=u=>Math.round(u*s);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${o})`}function rk(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function B9(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function B5e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function j5e(e){if(e.startsWith("oklch("))return(B5e(e)||0)/100;const{r:t,g:n,b:r}=Jq(e),i=t/255,o=n/255,s=r/255,a=B9(i),u=B9(o),l=B9(s);return .2126*a+.7152*u+.0722*l}function MS(e,t=.179){return e.startsWith("var(")?!1:j5e(e)>t}function wm({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:MS(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:MS(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:MS(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),o=i?Number(i):void 0,s=r in t.colors;if(s){const a=o!==void 0?t.colors[r][o]:t.colors[r][rk(t,n||"light")];return{color:r,value:a,shade:o,isThemeColor:s,isLight:MS(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${o}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:s,isLight:MS(e,t.luminanceThreshold),shade:o,variable:void 0}}function qi(e,t){const n=wm({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Az(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=qi(n.from,t),i=qi(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Ep(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${o}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=Jq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Y_=Ep,z5e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const o=wm({color:e,theme:t}),s=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=s&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${et(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:a,border:`${et(1)} solid transparent`}:{background:e,hover:e3(e,.1),color:a,border:`${et(1)} solid transparent`}}if(n==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${et(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:Ep(a,.1),hover:Ep(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${et(1)} solid transparent`}}return{background:Ep(e,.1),hover:Ep(e,.12),color:e,border:`${et(1)} solid transparent`}}if(n==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${et(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Ep(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${et(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:Ep(e,.05),color:e,border:`${et(1)} solid ${e}`};if(n==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${et(1)} solid transparent`};const a=t.colors[o.color][o.shade];return{background:"transparent",hover:Ep(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${et(1)} solid transparent`}}return{background:"transparent",hover:Ep(e,.12),color:e,border:`${et(1)} solid transparent`}}return n==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${et(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${et(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${et(1)} solid transparent`}:n==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:e3(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${et(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:e3(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${et(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:e3(t.white,.01),color:e,border:`${et(1)} solid transparent`}:n==="gradient"?{background:Az(r,t),hover:Az(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${et(1)} solid var(--mantine-color-default-border)`}:{}},U5e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Ine="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Zq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:U5e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:z5e,autoContrast:!1,luminanceThreshold:.3,fontFamily:Ine,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Ine,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:et(34),lineHeight:"1.3"},h2:{fontSize:et(26),lineHeight:"1.35"},h3:{fontSize:et(22),lineHeight:"1.4"},h4:{fontSize:et(18),lineHeight:"1.45"},h5:{fontSize:et(16),lineHeight:"1.5"},h6:{fontSize:et(14),lineHeight:"1.5"}}},fontSizes:{xs:et(12),sm:et(14),md:et(16),lg:et(18),xl:et(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:et(2),sm:et(4),md:et(8),lg:et(16),xl:et(32)},spacing:{xs:et(10),sm:et(12),md:et(16),lg:et(20),xl:et(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${et(1)} ${et(3)} rgba(0, 0, 0, 0.05), 0 ${et(1)} ${et(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${et(1)} ${et(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${et(10)} ${et(15)} ${et(-5)}, rgba(0, 0, 0, 0.04) 0 ${et(7)} ${et(7)} ${et(-5)}`,md:`0 ${et(1)} ${et(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${et(20)} ${et(25)} ${et(-5)}, rgba(0, 0, 0, 0.04) 0 ${et(10)} ${et(10)} ${et(-5)}`,lg:`0 ${et(1)} ${et(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${et(28)} ${et(23)} ${et(-7)}, rgba(0, 0, 0, 0.04) 0 ${et(12)} ${et(12)} ${et(-7)}`,xl:`0 ${et(1)} ${et(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${et(36)} ${et(28)} ${et(-7)}, rgba(0, 0, 0, 0.04) 0 ${et(17)} ${et(17)} ${et(-7)}`},other:{},components:{}};function Rne(e){return e==="auto"||e==="dark"||e==="light"}function V5e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Rne(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Rne(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const H5e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Nne="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function j9(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Pne(e){if(!(e.primaryColor in e.colors))throw new Error(H5e);if(typeof e.primaryShade=="object"&&(!j9(e.primaryShade.dark)||!j9(e.primaryShade.light)))throw new Error(Nne);if(typeof e.primaryShade=="number"&&!j9(e.primaryShade))throw new Error(Nne)}function q5e(e,t){var r;if(!t)return Pne(e),e;const n=Wq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Pne(n),n}const eW=F.createContext(null),W5e=()=>F.useContext(eW)||Zq;function As(){const e=F.useContext(eW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function uge({theme:e,children:t,inherit:n=!0}){const r=W5e(),i=F.useMemo(()=>q5e(n?r:Zq,e),[e,r,n]);return A.jsx(eW.Provider,{value:i,children:t})}uge.displayName="@mantine/core/MantineThemeProvider";function G5e(){const e=As(),t=Qq(),n=Li(e.breakpoints).reduce((r,i)=>{const o=e.breakpoints[i].includes("px"),s=tk(e.breakpoints[i]),a=o?`${s-.1}px`:t6(s-.1),u=o?`${s}px`:t6(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return A.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function z9(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function $S(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function Y5e(e,t){const n=z9(e.variables),r=n?$S(t,n):"",i=z9(e.dark),o=z9(e.light),s=i?$S(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=o?$S(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Yx({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&wm({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function One(e,t){return Yx({color:e.colors[e.primaryColor][rk(e,t)],theme:e,autoContrast:null})}function t3({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=rk(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Y_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Y_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Y_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const o=rk(e,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${o})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${o===9?8:o+1})`,[`--mantine-color-${r}-light`]:Y_(e.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${r}-light-hover`]:Y_(e.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(o-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(o-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Y_(e.colors[t][Math.max(o-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...s}:s}function K5e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function K_(e,t,n){Li(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const lge=e=>{const t=rk(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:et(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":One(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":One(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};K_(r.variables,e.breakpoints,"breakpoint"),K_(r.variables,e.spacing,"spacing"),K_(r.variables,e.fontSizes,"font-size"),K_(r.variables,e.lineHeights,"line-height"),K_(r.variables,e.shadows,"shadow"),K_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((o,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${e.primaryColor}-${s})`}),Li(e.colors).forEach(o=>{const s=e.colors[o];if(K5e(s)){Object.assign(r.light,t3({theme:e,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,t3({theme:e,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,u)=>{r.variables[`--mantine-color-${o}-${u}`]=a}),Object.assign(r.light,t3({theme:e,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,t3({theme:e,color:o,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Li(i).forEach(o=>{r.variables[`--mantine-${o}-font-size`]=i[o].fontSize,r.variables[`--mantine-${o}-line-height`]=i[o].lineHeight,r.variables[`--mantine-${o}-font-weight`]=i[o].fontWeight||e.headings.fontWeight}),r};function X5e({theme:e,generator:t}){const n=lge(e),r=t==null?void 0:t(e);return r?Wq(n,r):n}const U9=lge(Zq);function Q5e(e){const t={variables:{},light:{},dark:{}};return Li(e.variables).forEach(n=>{U9.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Li(e.light).forEach(n=>{U9.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Li(e.dark).forEach(n=>{U9.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function J5e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function cge({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=As(),r=Qq(),i=k5e(),o=X5e({theme:n,generator:i}),s=e===":root"&&t,a=s?Q5e(o):o,u=Y5e(a,e);return u?A.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${s?"":J5e(e)}`}}):null}cge.displayName="@mantine/CssVariables";function Z5e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function X_(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function e8e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=F.useRef(null),[o,s]=F.useState(()=>e.get(t)),a=r||o,u=F.useCallback(c=>{r||(X_(c,n),s(c),e.set(c))},[e.set,a,r]),l=F.useCallback(()=>{s(t),X_(t,n),e.clear()},[e.clear,t]);return F.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Gx(()=>{X_(e.get(t),n)},[]),F.useEffect(()=>{var f;if(r)return X_(r,n),()=>{};r===void 0&&X_(o,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{o==="auto"&&X_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[o,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function t8e({respectReducedMotion:e,getRootElement:t}){Gx(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Z5e();function fge({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:o=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=V5e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:m}){const{colorScheme:p,setColorScheme:g,clearColorScheme:v}=e8e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return t8e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),A.jsx(age.Provider,{value:{colorScheme:p,setColorScheme:g,clearColorScheme:v,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:m},children:A.jsxs(uge,{theme:e,children:[s&&A.jsx(cge,{cssVariablesSelector:a,deduplicateCssVariables:o}),i&&A.jsx(G5e,{}),t]})})}fge.displayName="@mantine/core/MantineProvider";function Kx({classNames:e,styles:t,props:n,stylesCtx:r}){const i=As();return{resolvedClassNames:e5({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:o6({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const n8e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function r8e({theme:e,options:t,unstyled:n}){return ls((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||n8e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function i8e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return e5({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Fne({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return e5({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function o8e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function s8e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function a8e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function u8e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(o=>{var s,a;return(a=e5({theme:t,classNames:(s=t.components[o])==null?void 0:s.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function l8e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function c8e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:o,classes:s,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:m}){return ls(r8e({theme:e,options:t,unstyled:a||h}),u8e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),l8e({options:t,classes:s,selector:r,unstyled:a}),Fne({selector:r,stylesCtx:f,theme:e,classNames:o,props:c}),Fne({selector:r,stylesCtx:f,theme:e,classNames:m,props:c}),i8e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),o8e({rootSelector:l,selector:r,className:u}),s8e({selector:r,classes:s,unstyled:a||h}),d&&!h&&a8e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function f8e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(o=>{var s;return o6({theme:e,styles:(s=e.components[o])==null?void 0:s.styles,props:n,stylesCtx:r})[i]}).reduce((o,s)=>({...o,...s}),{})}function Dz({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Dz({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function d8e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Y1(n[r])}}),t),{})}function h8e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:o,themeName:s,headless:a}){var u;return(u=d8e([a?{}:t==null?void 0:t(n,r,i),...s.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[o]}function p8e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:o,rootSelector:s,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&f8e({theme:e,themeName:t,props:i,stylesCtx:o,selector:n}),...!d&&o6({theme:e,styles:a,props:i,stylesCtx:o})[n],...!d&&o6({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:o})[n],...h8e({theme:e,props:i,stylesCtx:o,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...s===n?Dz({style:u,theme:e}):null,...Dz({style:r==null?void 0:r.style,theme:e})}}function m8e({props:e,stylesCtx:t,themeName:n}){var s;const r=As(),i=(s=O5e())==null?void 0:s();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function nn({name:e,classes:t,props:n,stylesCtx:r,className:i,style:o,rootSelector:s="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=As(),h=I5e(),m=R5e(),p=N5e(),g=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:b}=m8e({props:n,stylesCtx:r,themeName:g});return(w,E)=>({className:c8e({theme:d,options:E,themeName:g,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:m,headless:p,transformedStyles:b([E==null?void 0:E.styles,l])}),style:p8e({theme:d,themeName:g,selector:w,options:E,props:n,stylesCtx:r,rootSelector:s,styles:l,style:o,vars:c,varsResolver:f,headless:p,withStylesTransform:v})})}function CT(e,t){return typeof e=="boolean"?e:t.autoContrast}function ot(e,t,n){var s;const r=As(),i=(s=r.components[e])==null?void 0:s.defaultProps,o=typeof i=="function"?i(r):i;return{...t,...o,...Y1(n)}}function V9(e){return Li(e).reduce((t,n)=>e[n]!==void 0?`${t}${GMe(n)}:${e[n]};`:t,"").trim()}function g8e({selector:e,styles:t,media:n,container:r}){const i=t?V9(t):"",o=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${V9(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${V9(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${o.join("")}${s.join("")}`.trim()}function Xx(e){const t=Qq();return A.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:g8e(e)}})}function Qx(e){const{m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:m,pl:p,pr:g,pe:v,ps:b,bd:w,bg:E,c:T,opacity:C,ff:S,fz:I,fw:R,lts:P,ta:M,lh:B,fs:L,tt:z,td:G,w:W,miw:te,maw:Z,h:re,mih:q,mah:U,bgsz:Y,bgp:H,bgr:X,bga:ee,pos:le,top:Ee,left:be,bottom:Ce,right:Oe,inset:me,display:he,flex:Fe,hiddenFrom:Pe,visibleFrom:Je,lightHidden:ut,darkHidden:Ke,sx:tt,...pt}=e;return{styleProps:Y1({m:t,mx:n,my:r,mt:i,mb:o,ml:s,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:m,pl:p,pr:g,pe:v,ps:b,bd:w,bg:E,c:T,opacity:C,ff:S,fz:I,fw:R,lts:P,ta:M,lh:B,fs:L,tt:z,td:G,w:W,miw:te,maw:Z,h:re,mih:q,mah:U,bgsz:Y,bgp:H,bgr:X,bga:ee,pos:le,top:Ee,left:be,bottom:Ce,right:Oe,inset:me,display:he,flex:Fe,hiddenFrom:Pe,visibleFrom:Je,lightHidden:ut,darkHidden:Ke,sx:tt}),rest:pt}}const y8e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function tW(e,t){const n=wm({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function v8e(e,t){const n=wm({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:tW(e,t)}function b8e(e,t){if(typeof e=="number")return et(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(s=>s.trim()!=="");let o=`${et(n)}`;return r&&(o+=` ${r}`),i.length>0&&(o+=` ${tW(i.join(" "),t)}`),o.trim()}return e}const Mne={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function x8e(e){return typeof e=="string"&&e in Mne?Mne[e]:e}const w8e=["h1","h2","h3","h4","h5","h6"];function _8e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&w8e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?et(e):e}function E8e(e){return e}const T8e=["h1","h2","h3","h4","h5","h6"];function C8e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&T8e.includes(e)?`var(--mantine-${e}-line-height)`:e}function S8e(e){return typeof e=="number"?et(e):e}function A8e(e,t){if(typeof e=="number")return et(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return et(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const H9={color:tW,textColor:v8e,fontSize:_8e,spacing:A8e,identity:E8e,size:S8e,lineHeight:C8e,fontFamily:x8e,border:b8e};function $ne(e){return e.replace("(min-width: ","").replace("em)","")}function D8e({media:e,...t}){const r=Object.keys(e).sort((i,o)=>Number($ne(i))-Number($ne(o))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function k8e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function I8e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function R8e(e){return typeof e=="object"&&e!==null?Li(e).filter(t=>t!=="base"):[]}function N8e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function dge({styleProps:e,data:t,theme:n}){return D8e(Li(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const o=t[i],s=Array.isArray(o.property)?o.property:[o.property],a=I8e(e[i]);if(!k8e(e[i]))return s.forEach(l=>{r.inlineStyles[l]=H9[o.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=R8e(e[i]);return s.forEach(l=>{a&&(r.styles[l]=H9[o.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:H9[o.type](N8e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function gI(){return`__m__-${F.useId().replace(/:/g,"")}`}function nW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...nW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function hge(e){return e.startsWith("data-")?e:`data-${e}`}function P8e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[hge(n)]=e[n]),t},{})}function pge(e){return e?typeof e=="string"?{[hge(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...pge(n)}),{}):P8e(e):null}function kz(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...kz(r,t)}),{}):typeof e=="function"?e(t):e??{}}function O8e({theme:e,style:t,vars:n,styleProps:r}){const i=kz(t,e),o=kz(n,e);return{...i,...o,...r}}const mge=F.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:o,size:s,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},m)=>{var I;const p=As(),g=e||"div",{styleProps:v,rest:b}=Qx(h),w=P5e(),E=(I=w==null?void 0:w())==null?void 0:I(v.sx),T=gI(),C=dge({styleProps:v,theme:p,data:y8e}),S={ref:m,style:O8e({theme:p,style:t,vars:n,styleProps:C.inlineStyles}),className:ls(r,E,{[T]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":J0e(s)?void 0:s||void 0,size:d,...pge(o),...b};return A.jsxs(A.Fragment,{children:[C.hasResponsiveStyles&&A.jsx(Xx,{selector:`.${T}`,styles:C.styles,media:C.media}),typeof f=="function"?f(S):A.jsx(g,{...S})]})});mge.displayName="@mantine/core/Box";const Ue=mge;function gge(e){return e}function F8e(e){const t=e;return n=>{const r=F.forwardRef((i,o)=>A.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Rt(e){const t=F.forwardRef(e);return t.extend=gge,t.withProps=n=>{const r=F.forwardRef((i,o)=>A.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ds(e){const t=F.forwardRef(e);return t.withProps=n=>{const r=F.forwardRef((i,o)=>A.jsx(t,{...n,...i,ref:o}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=gge,t}const M8e=F.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function J1(){return F.useContext(M8e)}var t5=H0e();const IA=_c(t5);function $8e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function q9(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const LS=typeof window<"u"&&window.requestAnimationFrame;function L8e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=F.useRef(null),o=0,s={display:"none",height:0,overflow:"hidden"},[a,u]=F.useState(r?{}:s),l=m=>{t5.flushSync(()=>u(m))},c=m=>{l(p=>({...p,...m}))};function f(m){const p=e||$8e(m);return{transition:`height ${p}ms ${t}, opacity ${p}ms ${t}`}}nm(()=>{typeof LS=="function"&&LS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),LS(()=>{const m=q9(i);c({...f(m),height:m})})}:()=>{const m=q9(i);c({...f(m),willChange:"height",height:m}),LS(()=>c({height:o,overflow:"hidden"}))})},[r]);const d=m=>{if(!(m.target!==i.current||m.propertyName!=="height"))if(r){const p=q9(i);p===a.height?l({}):c({height:p}),n()}else a.height===o&&(l(s),n())};function h({style:m={},refKey:p="ref",...g}={}){const v=g[p];return{"aria-hidden":!r,...g,[p]:oge(i,v),onTransitionEnd:d,style:{boxSizing:"border-box",...m,...a}}}return h}const B8e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},n5=Rt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:o,style:s,onTransitionEnd:a,animateOpacity:u,...l}=ot("Collapse",B8e,e),c=As(),f=JM(),h=(c.respectReducedMotion?f:!1)?0:i,m=L8e({opened:r,transitionDuration:h,transitionTimingFunction:o,onTransitionEnd:a});return h===0?r?A.jsx(Ue,{...l,children:n}):null:A.jsx(Ue,{...m({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${o}`:"none",...nW(s,c)},ref:t,...l}),children:n})});n5.displayName="@mantine/core/Collapse";const[j8e,gd]=nu("ScrollArea.Root component was not found in tree");function x2(e,t){const n=jy(t);Gx(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const z8e=F.forwardRef((e,t)=>{const{style:n,...r}=e,i=gd(),[o,s]=F.useState(0),[a,u]=F.useState(0),l=!!(o&&a);return x2(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),x2(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),s(c)}),l?A.jsx("div",{...r,ref:t,style:{...n,width:o,height:a}}):null}),U8e=F.forwardRef((e,t)=>{const n=gd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?A.jsx(z8e,{...e,ref:t}):null}),V8e={scrollHideDelay:1e3,type:"hover"},yge=F.forwardRef((e,t)=>{const n=ot("ScrollAreaRoot",V8e,e),{type:r,scrollHideDelay:i,scrollbars:o,...s}=n,[a,u]=F.useState(null),[l,c]=F.useState(null),[f,d]=F.useState(null),[h,m]=F.useState(null),[p,g]=F.useState(null),[v,b]=F.useState(0),[w,E]=F.useState(0),[T,C]=F.useState(!1),[S,I]=F.useState(!1),R=Ws(t,P=>u(P));return A.jsx(j8e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:m,scrollbarXEnabled:T,onScrollbarXEnabledChange:C,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:I,onCornerWidthChange:b,onCornerHeightChange:E},children:A.jsx(Ue,{...s,ref:R,__vars:{"--sa-corner-width":o!=="xy"?"0px":`${v}px`,"--sa-corner-height":o!=="xy"?"0px":`${w}px`}})})});yge.displayName="@mantine/core/ScrollAreaRoot";function vge(e,t){const n=e/t;return Number.isNaN(n)?0:n}function r5(e){const t=vge(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function bge(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function H8e(e,[t,n]){return Math.min(n,Math.max(t,e))}function Lne(e,t,n="ltr"){const r=r5(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,s=t.content-t.viewport,a=o-r,u=n==="ltr"?[0,s]:[s*-1,0],l=H8e(e,u);return bge([0,s],[0,a])(l)}function q8e(e,t,n,r="ltr"){const i=r5(n),o=i/2,s=t||o,a=i-s,u=n.scrollbar.paddingStart+s,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return bge([u,l],f)(e)}function xge(e,t){return e>0&&e<t}function s6(e){return e?parseInt(e,10):0}function nx(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[W8e,wge]=nu("ScrollAreaScrollbar was not found in tree"),_ge=F.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=gd(),[h,m]=F.useState(null),p=Ws(t,I=>m(I)),g=F.useRef(null),v=F.useRef(""),{viewport:b}=d,w=n.content-n.viewport,E=jy(l),T=jy(a),C=QM(c,10),S=I=>{if(g.current){const R=I.clientX-g.current.left,P=I.clientY-g.current.top;u({x:R,y:P})}};return F.useEffect(()=>{const I=R=>{const P=R.target;(h==null?void 0:h.contains(P))&&E(R,w)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[b,h,w,E]),F.useEffect(T,[n,T]),x2(h,C),x2(d.content,C),A.jsx(W8e,{value:{scrollbar:h,hasThumb:r,onThumbChange:jy(i),onThumbPointerUp:jy(o),onThumbPositionChange:T,onThumbPointerDown:jy(s)},children:A.jsx("div",{...f,ref:p,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:nx(e.onPointerDown,I=>{I.preventDefault(),I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(I))}),onPointerMove:nx(e.onPointerMove,S),onPointerUp:nx(e.onPointerUp,I=>{I.preventDefault();const R=I.target;R.hasPointerCapture(I.pointerId)&&R.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=v.current,g.current=null})})})}),Ege=F.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...o}=e,s=gd(),[a,u]=F.useState(),l=F.useRef(null),c=Ws(t,l,s.onScrollbarXChange);return F.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),A.jsx(_ge,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${r5(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),xge(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:s6(a.paddingLeft),paddingEnd:s6(a.paddingRight)}})}})});Ege.displayName="@mantine/core/ScrollAreaScrollbarX";const Tge=F.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...o}=e,s=gd(),[a,u]=F.useState(),l=F.useRef(null),c=Ws(t,l,s.onScrollbarYChange);return F.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),A.jsx(_ge,{...o,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${r5(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),xge(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:s6(a.paddingTop),paddingEnd:s6(a.paddingBottom)}})}})});Tge.displayName="@mantine/core/ScrollAreaScrollbarY";const i5=F.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=J1(),o=gd(),s=F.useRef(null),a=F.useRef(0),[u,l]=F.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=vge(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{s.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,m)=>q8e(h,a.current,u,m);return n==="horizontal"?A.jsx(Ege,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollLeft,m=Lne(h,u,i);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=d(h,i))}}):n==="vertical"?A.jsx(Tge,{...f,ref:t,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollTop,m=Lne(h,u);u.scrollbar.size===0?s.current.style.setProperty("--thumb-opacity","0"):s.current.style.setProperty("--thumb-opacity","1"),s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=d(h))}}):null});i5.displayName="@mantine/core/ScrollAreaScrollbarVisible";const rW=F.forwardRef((e,t)=>{const n=gd(),{forceMount:r,...i}=e,[o,s]=F.useState(!1),a=e.orientation==="horizontal",u=QM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;s(a?l:c)}},10);return x2(n.viewport,u),x2(n.content,u),r||o?A.jsx(i5,{"data-state":o?"visible":"hidden",...i,ref:t}):null});rW.displayName="@mantine/core/ScrollAreaScrollbarAuto";const Cge=F.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gd(),[o,s]=F.useState(!1);return F.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),s(!0)},c=()=>{u=window.setTimeout(()=>s(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||o?A.jsx(rW,{"data-state":o?"visible":"hidden",...r,ref:t}):null});Cge.displayName="@mantine/core/ScrollAreaScrollbarHover";const G8e=F.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gd(),o=e.orientation==="horizontal",[s,a]=F.useState("hidden"),u=QM(()=>a("idle"),100);return F.useEffect(()=>{if(s==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[s,i.scrollHideDelay]),F.useEffect(()=>{const{viewport:l}=i,c=o?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,o,u]),n||s!=="hidden"?A.jsx(i5,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:nx(e.onPointerEnter,()=>a("interacting")),onPointerLeave:nx(e.onPointerLeave,()=>a("idle"))}):null}),Iz=F.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=gd(),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:s}=i,a=e.orientation==="horizontal";return F.useEffect(()=>(a?o(!0):s(!0),()=>{a?o(!1):s(!1)}),[a,o,s]),i.type==="hover"?A.jsx(Cge,{...r,ref:t,forceMount:n}):i.type==="scroll"?A.jsx(G8e,{...r,ref:t,forceMount:n}):i.type==="auto"?A.jsx(rW,{...r,ref:t,forceMount:n}):i.type==="always"?A.jsx(i5,{...r,ref:t}):null});Iz.displayName="@mantine/core/ScrollAreaScrollbar";function Y8e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},s=n.left!==o.left,a=n.top!==o.top;(s||a)&&t(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Sge=F.forwardRef((e,t)=>{const{style:n,...r}=e,i=gd(),o=wge(),{onThumbPositionChange:s}=o,a=Ws(t,c=>o.onThumbChange(c)),u=F.useRef(void 0),l=QM(()=>{u.current&&(u.current(),u.current=void 0)},100);return F.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Y8e(c,s);u.current=d,s()}};return s(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,s]),A.jsx("div",{"data-state":o.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:nx(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,m=c.clientY-d.top;o.onThumbPointerDown({x:h,y:m})}),onPointerUp:nx(e.onPointerUp,o.onThumbPointerUp)})});Sge.displayName="@mantine/core/ScrollAreaThumb";const Rz=F.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=wge();return n||i.hasThumb?A.jsx(Sge,{ref:t,...r}):null});Rz.displayName="@mantine/core/ScrollAreaThumb";const Age=F.forwardRef(({children:e,style:t,...n},r)=>{const i=gd(),o=Ws(r,i.onViewportChange);return A.jsx(Ue,{...n,ref:o,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:A.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Age.displayName="@mantine/core/ScrollAreaViewport";var iW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Dge={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},K8e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":et(t)}}),ag=Rt((e,t)=>{const n=ot("ScrollArea",Dge,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:m,children:p,offsetScrollbars:g,scrollbars:v,onBottomReached:b,onTopReached:w,...E}=n,[T,C]=F.useState(!1),S=nn({name:"ScrollArea",props:n,classes:iW,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:K8e});return A.jsxs(yge,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:v,...S("root"),...E,children:[A.jsx(Age,{...d,...S("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":v||void 0,onScroll:I=>{var B;(B=d==null?void 0:d.onScroll)==null||B.call(d,I),m==null||m({x:I.currentTarget.scrollLeft,y:I.currentTarget.scrollTop});const{scrollTop:R,scrollHeight:P,clientHeight:M}=I.currentTarget;R-(P-M)>=0&&(b==null||b()),R===0&&(w==null||w())},children:p}),(v==="xy"||v==="x")&&A.jsx(Iz,{...S("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:A.jsx(Rz,{...S("thumb")})}),(v==="xy"||v==="y")&&A.jsx(Iz,{...S("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:A.jsx(Rz,{...S("thumb")})}),A.jsx(U8e,{...S("corner"),"data-hovered":T||void 0,"data-hidden":c==="never"||void 0})]})});ag.displayName="@mantine/core/ScrollArea";const oW=Rt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:o,scrollHideDelay:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:m,scrollbars:p,style:g,vars:v,onBottomReached:b,onTopReached:w,...E}=ot("ScrollAreaAutosize",Dge,e);return A.jsx(Ue,{...E,ref:t,style:[{display:"flex",overflow:"auto"},g],children:A.jsx(Ue,{style:{display:"flex",flexDirection:"column",flex:1},children:A.jsx(ag,{classNames:r,styles:i,scrollHideDelay:s,scrollbarSize:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:m,vars:v,scrollbars:p,onBottomReached:b,onTopReached:w,children:n})})})});ag.classes=iW;oW.displayName="@mantine/core/ScrollAreaAutosize";oW.classes=iW;ag.Autosize=oW;var kge={root:"m_87cf2631"};const X8e={__staticSelector:"UnstyledButton"},gf=Ds((e,t)=>{const n=ot("UnstyledButton",X8e,e),{className:r,component:i="button",__staticSelector:o,unstyled:s,classNames:a,styles:u,style:l,...c}=n,f=nn({name:o,props:n,classes:kge,className:r,style:l,classNames:a,styles:u,unstyled:s});return A.jsx(Ue,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});gf.classes=kge;gf.displayName="@mantine/core/UnstyledButton";var Ige={root:"m_515a97f8"};const Q8e={},sW=Rt((e,t)=>{const n=ot("VisuallyHidden",Q8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,...l}=n,c=nn({name:"VisuallyHidden",classes:Ige,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a});return A.jsx(Ue,{component:"span",ref:t,...c("root"),...l})});sW.classes=Ige;sW.displayName="@mantine/core/VisuallyHidden";var Rge={root:"m_1b7284a3"};const J8e={},Z8e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:wi(t),"--paper-shadow":Yq(n)}}),ST=Ds((e,t)=>{const n=ot("Paper",J8e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...m}=n,p=nn({name:"Paper",props:n,classes:Rge,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:Z8e});return A.jsx(Ue,{ref:t,mod:[{"data-with-border":u},h],...p("root"),variant:d,...m})});ST.classes=Rge;ST.displayName="@mantine/core/Paper";function o5(){return typeof window<"u"}function Nge(e){return Pge(e)?(e.nodeName||"").toLowerCase():"#document"}function AT(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function e$e(e){var t;return(t=(Pge(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Pge(e){return o5()?e instanceof Node||e instanceof AT(e).Node:!1}function ic(e){return o5()?e instanceof Element||e instanceof AT(e).Element:!1}function aW(e){return o5()?e instanceof HTMLElement||e instanceof AT(e).HTMLElement:!1}function Nz(e){return!o5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof AT(e).ShadowRoot}function t$e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Bne(e){return["html","body","#document"].includes(Nge(e))}function n$e(e){return AT(e).getComputedStyle(e)}function r$e(e){if(Nge(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Nz(e)&&e.host||e$e(e);return Nz(t)?t.host:t}function jne(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ik(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Nz(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Oge(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Fge(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function i$e(e){return a$e()?!1:!zne()&&e.width===0&&e.height===0||zne()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function o$e(){return/apple/i.test(navigator.vendor)}function zne(){const e=/android/i;return e.test(Oge())||e.test(Fge())}function s$e(){return Oge().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function a$e(){return Fge().includes("jsdom/")}function Pz(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function u$e(e){return"nativeEvent"in e}function l$e(e){return e.matches("html,body")}function Wb(e){return(e==null?void 0:e.ownerDocument)||document}function W9(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function _E(e){return"composedPath"in e?e.composedPath()[0]:e.target}const c$e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function f$e(e){return aW(e)&&e.matches(c$e)}const nf=Math.min,Au=Math.max,a6=Math.round,n3=Math.floor,v1=e=>({x:e,y:e}),d$e={left:"right",right:"left",bottom:"top",top:"bottom"},h$e={start:"end",end:"start"};function Oz(e,t,n){return Au(e,nf(t,n))}function ug(e,t){return typeof e=="function"?e(t):e}function Sh(e){return e.split("-")[0]}function DT(e){return e.split("-")[1]}function uW(e){return e==="x"?"y":"x"}function lW(e){return e==="y"?"height":"width"}function Jx(e){return["top","bottom"].includes(Sh(e))?"y":"x"}function cW(e){return uW(Jx(e))}function p$e(e,t,n){n===void 0&&(n=!1);const r=DT(e),i=cW(e),o=lW(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=u6(s)),[s,u6(s)]}function m$e(e){const t=u6(e);return[Fz(e),t,Fz(t)]}function Fz(e){return e.replace(/start|end/g,t=>h$e[t])}function g$e(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function y$e(e,t,n,r){const i=DT(e);let o=g$e(Sh(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(Fz)))),o}function u6(e){return e.replace(/left|right|bottom|top/g,t=>d$e[t])}function v$e(e){return{top:0,right:0,bottom:0,left:0,...e}}function fW(e){return typeof e!="number"?v$e(e):{top:e,right:e,bottom:e,left:e}}function w2(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Une(e,t,n){let{reference:r,floating:i}=e;const o=Jx(t),s=cW(t),a=lW(s),u=Sh(t),l=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(DT(t)){case"start":h[s]-=d*(n&&l?-1:1);break;case"end":h[s]+=d*(n&&l?-1:1);break}return h}const b$e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Une(l,r,u),d=r,h={},m=0;for(let p=0;p<a.length;p++){const{name:g,fn:v}=a[p],{x:b,y:w,data:E,reset:T}=await v({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:s,elements:{reference:e,floating:t}});c=b??c,f=w??f,h={...h,[g]:{...h[g],...E}},T&&m<=50&&(m++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(l=T.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:f}=Une(l,d,u)),p=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function dW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=ug(t,e),m=fW(h),g=a[d?f==="floating"?"reference":"floating":f],v=w2(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(g)))==null||n?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},T=w2(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(v.top-T.top+m.top)/E.y,bottom:(T.bottom-v.bottom+m.bottom)/E.y,left:(v.left-T.left+m.left)/E.x,right:(T.right-v.right+m.right)/E.x}}const x$e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=ug(e,t)||{};if(l==null)return{};const f=fW(c),d={x:n,y:r},h=cW(i),m=lW(h),p=await s.getDimensions(l),g=h==="y",v=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",E=o.reference[m]+o.reference[h]-d[h]-o.floating[m],T=d[h]-o.reference[h],C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let S=C?C[w]:0;(!S||!await(s.isElement==null?void 0:s.isElement(C)))&&(S=a.floating[w]||o.floating[m]);const I=E/2-T/2,R=S/2-p[m]/2-1,P=nf(f[v],R),M=nf(f[b],R),B=P,L=S-p[m]-M,z=S/2-p[m]/2+I,G=Oz(B,z,L),W=!u.arrow&&DT(i)!=null&&z!==G&&o.reference[m]/2-(z<B?P:M)-p[m]/2<0,te=W?z<B?z-B:z-L:0;return{[h]:d[h]+te,data:{[h]:G,centerOffset:z-G-te,...W&&{alignmentOffset:te}},reset:W}}}),w$e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...g}=ug(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Sh(i),b=Sh(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!p?[u6(a)]:m$e(a));!d&&m!=="none"&&E.push(...y$e(a,p,m,w));const T=[a,...E],C=await dW(t,g),S=[];let I=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&S.push(C[v]),f){const B=p$e(i,s,w);S.push(C[B[0]],C[B[1]])}if(I=[...I,{placement:i,overflows:S}],!S.every(B=>B<=0)){var R,P;const B=(((R=o.flip)==null?void 0:R.index)||0)+1,L=T[B];if(L)return{data:{index:B,overflows:I},reset:{placement:L}};let z=(P=I.filter(G=>G.overflows[0]<=0).sort((G,W)=>G.overflows[1]-W.overflows[1])[0])==null?void 0:P.placement;if(!z)switch(h){case"bestFit":{var M;const G=(M=I.map(W=>[W.placement,W.overflows.filter(te=>te>0).reduce((te,Z)=>te+Z,0)]).sort((W,te)=>W[1]-te[1])[0])==null?void 0:M[0];G&&(z=G);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function Mge(e){const t=nf(...e.map(o=>o.left)),n=nf(...e.map(o=>o.top)),r=Au(...e.map(o=>o.right)),i=Au(...e.map(o=>o.bottom));return{x:t,y:n,width:r-t,height:i-n}}function _$e(e){const t=e.slice().sort((i,o)=>i.y-o.y),n=[];let r=null;for(let i=0;i<t.length;i++){const o=t[i];!r||o.y-r.y>r.height/2?n.push([o]):n[n.length-1].push(o),r=o}return n.map(i=>w2(Mge(i)))}const E$e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:o,strategy:s}=t,{padding:a=2,x:u,y:l}=ug(e,t),c=Array.from(await(o.getClientRects==null?void 0:o.getClientRects(r.reference))||[]),f=_$e(c),d=w2(Mge(c)),h=fW(a);function m(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Jx(n)==="y"){const P=f[0],M=f[f.length-1],B=Sh(n)==="top",L=P.top,z=M.bottom,G=B?P.left:M.left,W=B?P.right:M.right,te=W-G,Z=z-L;return{top:L,bottom:z,left:G,right:W,width:te,height:Z,x:G,y:L}}const g=Sh(n)==="left",v=Au(...f.map(P=>P.right)),b=nf(...f.map(P=>P.left)),w=f.filter(P=>g?P.left===b:P.right===v),E=w[0].top,T=w[w.length-1].bottom,C=b,S=v,I=S-C,R=T-E;return{top:E,bottom:T,left:C,right:S,width:I,height:R,x:C,y:E}}return d}const p=await o.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:s});return i.reference.x!==p.reference.x||i.reference.y!==p.reference.y||i.reference.width!==p.reference.width||i.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};async function T$e(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Sh(n),a=DT(n),u=Jx(n)==="y",l=["left","top"].includes(s)?-1:1,c=o&&u?-1:1,f=ug(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof m=="number"&&(h=a==="end"?m*-1:m),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const C$e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,u=await T$e(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:s}}}}},S$e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...u}=ug(e,t),l={x:n,y:r},c=await dW(t,u),f=Jx(Sh(i)),d=uW(f);let h=l[d],m=l[f];if(o){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[g],w=h-c[v];h=Oz(b,h,w)}if(s){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=m+c[g],w=m-c[v];m=Oz(b,m,w)}const p=a.fn({...t,[d]:h,[f]:m});return{...p,data:{x:p.x-n,y:p.y-r}}}}},A$e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=ug(e,t),c={x:n,y:r},f=Jx(i),d=uW(f);let h=c[d],m=c[f];const p=ug(a,t),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(u){const w=d==="y"?"height":"width",E=o.reference[d]-o.floating[w]+g.mainAxis,T=o.reference[d]+o.reference[w]-g.mainAxis;h<E?h=E:h>T&&(h=T)}if(l){var v,b;const w=d==="y"?"width":"height",E=["top","left"].includes(Sh(i)),T=o.reference[f]-o.floating[w]+(E&&((v=s.offset)==null?void 0:v[f])||0)+(E?0:g.crossAxis),C=o.reference[f]+o.reference[w]+(E?0:((b=s.offset)==null?void 0:b[f])||0)-(E?g.crossAxis:0);m<T?m=T:m>C&&(m=C)}return{[d]:h,[f]:m}}}},D$e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:o}=t,{apply:s=()=>{},...a}=ug(e,t),u=await dW(t,a),l=Sh(n),c=DT(n),f=Jx(n)==="y",{width:d,height:h}=r.floating;let m,p;l==="top"||l==="bottom"?(m=l,p=c===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(p=l,m=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,v=d-u.left-u.right,b=nf(h-u[m],g),w=nf(d-u[p],v),E=!t.middlewareData.shift;let T=b,C=w;if(f?C=c||E?nf(w,v):v:T=c||E?nf(b,g):g,E&&!c){const I=Au(u.left,0),R=Au(u.right,0),P=Au(u.top,0),M=Au(u.bottom,0);f?C=d-2*(I!==0||R!==0?I+R:Au(u.left,u.right)):T=h-2*(P!==0||M!==0?P+M:Au(u.top,u.bottom))}await s({...t,availableWidth:C,availableHeight:T});const S=await i.getDimensions(o.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function kT(e){return $ge(e)?(e.nodeName||"").toLowerCase():"#document"}function cf(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sg(e){var t;return(t=($ge(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $ge(e){return e instanceof Node||e instanceof cf(e).Node}function rm(e){return e instanceof Element||e instanceof cf(e).Element}function im(e){return e instanceof HTMLElement||e instanceof cf(e).HTMLElement}function Vne(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cf(e).ShadowRoot}function yI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ah(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function k$e(e){return["table","td","th"].includes(kT(e))}function hW(e){const t=pW(),n=Ah(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function I$e(e){let t=b1(e);for(;im(t)&&!_2(t);){if(hW(t))return t;t=b1(t)}return null}function pW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _2(e){return["html","body","#document"].includes(kT(e))}function Ah(e){return cf(e).getComputedStyle(e)}function s5(e){return rm(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function b1(e){if(kT(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Vne(e)&&e.host||Sg(e);return Vne(t)?t.host:t}function Lge(e){const t=b1(e);return _2(t)?e.ownerDocument?e.ownerDocument.body:e.body:im(t)&&yI(t)?t:Lge(t)}function G0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Lge(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=cf(i);return o?t.concat(s,s.visualViewport||[],yI(i)?i:[],s.frameElement&&n?G0(s.frameElement):[]):t.concat(i,G0(i,[],n))}function Bge(e){const t=Ah(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=im(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=a6(n)!==o||a6(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function mW(e){return rm(e)?e:e.contextElement}function KE(e){const t=mW(e);if(!im(t))return v1(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Bge(t);let s=(o?a6(n.width):n.width)/r,a=(o?a6(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const R$e=v1(0);function jge(e){const t=cf(e);return!pW()||!t.visualViewport?R$e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function N$e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==cf(e)?!1:t}function mx(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=mW(e);let s=v1(1);t&&(r?rm(r)&&(s=KE(r)):s=KE(e));const a=N$e(o,n,r)?jge(o):v1(0);let u=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const d=cf(o),h=r&&rm(r)?cf(r):r;let m=d,p=m.frameElement;for(;p&&r&&h!==m;){const g=KE(p),v=p.getBoundingClientRect(),b=Ah(p),w=v.left+(p.clientLeft+parseFloat(b.paddingLeft))*g.x,E=v.top+(p.clientTop+parseFloat(b.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=w,l+=E,m=cf(p),p=m.frameElement}}return w2({width:c,height:f,x:u,y:l})}const P$e=[":popover-open",":modal"];function gW(e){return P$e.some(t=>{try{return e.matches(t)}catch{return!1}})}function O$e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=Sg(r),a=t?gW(t.floating):!1;if(r===s||a&&o)return n;let u={scrollLeft:0,scrollTop:0},l=v1(1);const c=v1(0),f=im(r);if((f||!f&&!o)&&((kT(r)!=="body"||yI(s))&&(u=s5(r)),im(r))){const d=mx(r);l=KE(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function F$e(e){return Array.from(e.getClientRects())}function zge(e){return mx(Sg(e)).left+s5(e).scrollLeft}function M$e(e){const t=Sg(e),n=s5(e),r=e.ownerDocument.body,i=Au(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Au(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+zge(e);const a=-n.scrollTop;return Ah(r).direction==="rtl"&&(s+=Au(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function $$e(e,t){const n=cf(e),r=Sg(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,u=0;if(i){o=i.width,s=i.height;const l=pW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:o,height:s,x:a,y:u}}function L$e(e,t){const n=mx(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=im(e)?KE(e):v1(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,u=i*o.x,l=r*o.y;return{width:s,height:a,x:u,y:l}}function Hne(e,t,n){let r;if(t==="viewport")r=$$e(e,n);else if(t==="document")r=M$e(Sg(e));else if(rm(t))r=L$e(t,n);else{const i=jge(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return w2(r)}function Uge(e,t){const n=b1(e);return n===t||!rm(n)||_2(n)?!1:Ah(n).position==="fixed"||Uge(n,t)}function B$e(e,t){const n=t.get(e);if(n)return n;let r=G0(e,[],!1).filter(a=>rm(a)&&kT(a)!=="body"),i=null;const o=Ah(e).position==="fixed";let s=o?b1(e):e;for(;rm(s)&&!_2(s);){const a=Ah(s),u=hW(s);!u&&a.position==="fixed"&&(i=null),(o?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||yI(s)&&!u&&Uge(e,s))?r=r.filter(c=>c!==s):i=a,s=b1(s)}return t.set(e,r),r}function j$e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?gW(t)?[]:B$e(t,this._c):[].concat(n),r],a=s[0],u=s.reduce((l,c)=>{const f=Hne(t,c,i);return l.top=Au(f.top,l.top),l.right=nf(f.right,l.right),l.bottom=nf(f.bottom,l.bottom),l.left=Au(f.left,l.left),l},Hne(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function z$e(e){const{width:t,height:n}=Bge(e);return{width:t,height:n}}function U$e(e,t,n){const r=im(t),i=Sg(t),o=n==="fixed",s=mx(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const u=v1(0);if(r||!r&&!o)if((kT(t)!=="body"||yI(i))&&(a=s5(t)),r){const f=mx(t,!0,o,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=zge(i));const l=s.left+a.scrollLeft-u.x,c=s.top+a.scrollTop-u.y;return{x:l,y:c,width:s.width,height:s.height}}function G9(e){return Ah(e).position==="static"}function qne(e,t){return!im(e)||Ah(e).position==="fixed"?null:t?t(e):e.offsetParent}function Vge(e,t){const n=cf(e);if(gW(e))return n;if(!im(e)){let i=b1(e);for(;i&&!_2(i);){if(rm(i)&&!G9(i))return i;i=b1(i)}return n}let r=qne(e,t);for(;r&&k$e(r)&&G9(r);)r=qne(r,t);return r&&_2(r)&&G9(r)&&!hW(r)?n:r||I$e(e)||n}const V$e=async function(e){const t=this.getOffsetParent||Vge,n=this.getDimensions,r=await n(e.floating);return{reference:U$e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function H$e(e){return Ah(e).direction==="rtl"}const q$e={convertOffsetParentRelativeRectToViewportRelativeRect:O$e,getDocumentElement:Sg,getClippingRect:j$e,getOffsetParent:Vge,getElementRects:V$e,getClientRects:F$e,getDimensions:z$e,getScale:KE,isElement:rm,isRTL:H$e};function W$e(e,t){let n=null,r;const i=Sg(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),o();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=n3(c),m=n3(i.clientWidth-(l+f)),p=n3(i.clientHeight-(c+d)),g=n3(l),b={rootMargin:-h+"px "+-m+"px "+-p+"px "+-g+"px",threshold:Au(0,nf(1,u))||1};let w=!0;function E(T){const C=T[0].intersectionRatio;if(C!==u){if(!w)return s();C?s(!1,C):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return s(!0),o}function G$e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=mW(e),c=i||o?[...l?G0(l):[],...G0(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),o&&v.addEventListener("resize",n)});const f=l&&a?W$e(l,n):null;let d=-1,h=null;s&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let m,p=u?mx(e):null;u&&g();function g(){const v=mx(e);p&&(v.x!==p.x||v.y!==p.y||v.width!==p.width||v.height!==p.height)&&n(),p=v,m=requestAnimationFrame(g)}return n(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",n),o&&b.removeEventListener("resize",n)}),f==null||f(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(m)}}const Y$e=C$e,K$e=S$e,X$e=w$e,Q$e=D$e,Wne=x$e,J$e=E$e,Z$e=A$e,eLe=(e,t,n)=>{const r=new Map,i={platform:q$e,...n},o={...i.platform,_c:r};return b$e(e,t,{...i,platform:o})};var p4=typeof document<"u"?F.useLayoutEffect:F.useEffect;function l6(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!l6(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!l6(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Hge(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Gne(e,t){const n=Hge(e);return Math.round(t*n)/n}function Y9(e){const t=F.useRef(e);return p4(()=>{t.current=e}),t}function tLe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=F.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=F.useState(r);l6(d,r)||h(r);const[m,p]=F.useState(null),[g,v]=F.useState(null),b=F.useCallback(Z=>{Z!==C.current&&(C.current=Z,p(Z))},[]),w=F.useCallback(Z=>{Z!==S.current&&(S.current=Z,v(Z))},[]),E=o||m,T=s||g,C=F.useRef(null),S=F.useRef(null),I=F.useRef(c),R=u!=null,P=Y9(u),M=Y9(i),B=Y9(l),L=F.useCallback(()=>{if(!C.current||!S.current)return;const Z={placement:t,strategy:n,middleware:d};M.current&&(Z.platform=M.current),eLe(C.current,S.current,Z).then(re=>{const q={...re,isPositioned:B.current!==!1};z.current&&!l6(I.current,q)&&(I.current=q,t5.flushSync(()=>{f(q)}))})},[d,t,n,M,B]);p4(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(Z=>({...Z,isPositioned:!1})))},[l]);const z=F.useRef(!1);p4(()=>(z.current=!0,()=>{z.current=!1}),[]),p4(()=>{if(E&&(C.current=E),T&&(S.current=T),E&&T){if(P.current)return P.current(E,T,L);L()}},[E,T,L,P,R]);const G=F.useMemo(()=>({reference:C,floating:S,setReference:b,setFloating:w}),[b,w]),W=F.useMemo(()=>({reference:E,floating:T}),[E,T]),te=F.useMemo(()=>{const Z={position:n,left:0,top:0};if(!W.floating)return Z;const re=Gne(W.floating,c.x),q=Gne(W.floating,c.y);return a?{...Z,transform:"translate("+re+"px, "+q+"px)",...Hge(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:re,top:q}},[n,a,W.floating,c.x,c.y]);return F.useMemo(()=>({...c,update:L,refs:G,elements:W,floatingStyles:te}),[c,L,G,W,te])}const nLe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Wne({element:r.current,padding:i}).fn(n):{}:r?Wne({element:r,padding:i}).fn(n):{}}}},qge=(e,t)=>({...Y$e(e),options:[e,t]}),yW=(e,t)=>({...K$e(e),options:[e,t]}),Yne=(e,t)=>({...Z$e(e),options:[e,t]}),c6=(e,t)=>({...X$e(e),options:[e,t]}),rLe=(e,t)=>({...Q$e(e),options:[e,t]}),wD=(e,t)=>({...J$e(e),options:[e,t]}),Wge=(e,t)=>({...nLe(e),options:[e,t]}),Gge={...JFe},iLe=Gge.useInsertionEffect,oLe=iLe||(e=>e());function N0(e){const t=F.useRef(()=>{});return oLe(()=>{t.current=e}),F.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Up=typeof document<"u"?F.useLayoutEffect:F.useEffect;let Kne=!1,sLe=0;const Xne=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+sLe++;function aLe(){const[e,t]=F.useState(()=>Kne?Xne():void 0);return Up(()=>{e==null&&t(Xne())},[]),F.useEffect(()=>{Kne=!0},[]),e}const uLe=Gge.useId,Yge=uLe||aLe;function lLe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const cLe=F.createContext(null),fLe=F.createContext(null),vW=()=>{var e;return((e=F.useContext(cLe))==null?void 0:e.id)||null},bW=()=>F.useContext(fLe);function xW(e){return"data-floating-ui-"+e}function K9(e){const t=F.useRef(e);return Up(()=>{t.current=e}),t}const Qne=xW("safe-polygon");function m4(e,t,n){return n&&!Pz(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function dLe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:s}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=bW(),m=vW(),p=K9(l),g=K9(u),v=K9(n),b=F.useRef(),w=F.useRef(-1),E=F.useRef(),T=F.useRef(-1),C=F.useRef(!0),S=F.useRef(!1),I=F.useRef(()=>{}),R=F.useRef(!1),P=F.useCallback(()=>{var te;const Z=(te=i.current.openEvent)==null?void 0:te.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[i]);F.useEffect(()=>{if(!a)return;function te(Z){let{open:re}=Z;re||(clearTimeout(w.current),clearTimeout(T.current),C.current=!0,R.current=!1)}return o.on("openchange",te),()=>{o.off("openchange",te)}},[a,o]),F.useEffect(()=>{if(!a||!p.current||!n)return;function te(re){P()&&r(!1,re,"hover")}const Z=Wb(s.floating).documentElement;return Z.addEventListener("mouseleave",te),()=>{Z.removeEventListener("mouseleave",te)}},[s.floating,n,r,a,p,P]);const M=F.useCallback(function(te,Z,re){Z===void 0&&(Z=!0),re===void 0&&(re="hover");const q=m4(g.current,"close",b.current);q&&!E.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,te,re),q)):Z&&(clearTimeout(w.current),r(!1,te,re))},[g,r]),B=N0(()=>{I.current(),E.current=void 0}),L=N0(()=>{if(S.current){const te=Wb(s.floating).body;te.style.pointerEvents="",te.removeAttribute(Qne),S.current=!1}}),z=N0(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);F.useEffect(()=>{if(!a)return;function te(U){if(clearTimeout(w.current),C.current=!1,c&&!Pz(b.current)||f>0&&!m4(g.current,"open"))return;const Y=m4(g.current,"open",b.current);Y?w.current=window.setTimeout(()=>{v.current||r(!0,U,"hover")},Y):n||r(!0,U,"hover")}function Z(U){if(z())return;I.current();const Y=Wb(s.floating);if(clearTimeout(T.current),R.current=!1,p.current&&i.current.floatingContext){n||clearTimeout(w.current),E.current=p.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){L(),B(),z()||M(U,!0,"safe-polygon")}});const X=E.current;Y.addEventListener("mousemove",X),I.current=()=>{Y.removeEventListener("mousemove",X)};return}(b.current==="touch"?!ik(s.floating,U.relatedTarget):!0)&&M(U)}function re(U){z()||i.current.floatingContext&&(p.current==null||p.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){L(),B(),z()||M(U)}})(U))}if(ic(s.domReference)){var q;const U=s.domReference;return n&&U.addEventListener("mouseleave",re),(q=s.floating)==null||q.addEventListener("mouseleave",re),d&&U.addEventListener("mousemove",te,{once:!0}),U.addEventListener("mouseenter",te),U.addEventListener("mouseleave",Z),()=>{var Y;n&&U.removeEventListener("mouseleave",re),(Y=s.floating)==null||Y.removeEventListener("mouseleave",re),d&&U.removeEventListener("mousemove",te),U.removeEventListener("mouseenter",te),U.removeEventListener("mouseleave",Z)}}},[s,a,e,c,f,d,M,B,L,r,n,v,h,g,p,i,z]),Up(()=>{var te;if(a&&n&&(te=p.current)!=null&&te.__options.blockPointerEvents&&P()){S.current=!0;const re=s.floating;if(ic(s.domReference)&&re){var Z;const q=Wb(s.floating).body;q.setAttribute(Qne,"");const U=s.domReference,Y=h==null||(Z=h.nodesRef.current.find(H=>H.id===m))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return Y&&(Y.style.pointerEvents=""),q.style.pointerEvents="none",U.style.pointerEvents="auto",re.style.pointerEvents="auto",()=>{q.style.pointerEvents="",U.style.pointerEvents="",re.style.pointerEvents=""}}}},[a,n,m,s,h,p,P]),Up(()=>{n||(b.current=void 0,R.current=!1,B(),L())},[n,B,L]),F.useEffect(()=>()=>{B(),clearTimeout(w.current),clearTimeout(T.current),L()},[a,s.domReference,B,L]);const G=F.useMemo(()=>{function te(Z){b.current=Z.pointerType}return{onPointerDown:te,onPointerEnter:te,onMouseMove(Z){const{nativeEvent:re}=Z;function q(){!C.current&&!v.current&&r(!0,re,"hover")}c&&!Pz(b.current)||n||f===0||R.current&&Z.movementX**2+Z.movementY**2<2||(clearTimeout(T.current),b.current==="touch"?q():(R.current=!0,T.current=window.setTimeout(q,f)))}}},[c,r,n,v,f]),W=F.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(te){z()||M(te.nativeEvent,!1)}}),[M,z]);return F.useMemo(()=>a?{reference:G,floating:W}:{},[a,G,W])}const Mz=()=>{},Kge=F.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Mz,setState:Mz,isInstantPhase:!1}),Xge=()=>F.useContext(Kge);function hLe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,o]=F.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=F.useRef(null),a=F.useCallback(u=>{o({currentId:u})},[]);return Up(()=>{i.currentId?s.current===null?s.current=i.currentId:i.isInstantPhase||o({isInstantPhase:!0}):(i.isInstantPhase&&o({isInstantPhase:!1}),s.current=null)},[i.currentId,i.isInstantPhase]),F.createElement(Kge.Provider,{value:F.useMemo(()=>({...i,setState:o,setCurrentId:a}),[i,a])},t)}function pLe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:o,enabled:s=!0}=t,a=o??i,u=Xge(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return Up(()=>{s&&l&&(d({delay:{open:1,close:m4(f,"close")}}),l!==a&&r(!1))},[s,a,r,d,l,f]),Up(()=>{function m(){r(!1),d({delay:f,currentId:null})}if(s&&l&&!n&&l===a){if(h){const p=window.setTimeout(m,h);return()=>{clearTimeout(p)}}m()}},[s,n,d,l,a,r,f,h]),Up(()=>{s&&(c===Mz||!n||c(a))},[s,n,c,a]),u}function X9(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var a;return i.parentId===s.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const mLe="data-floating-ui-focusable",gLe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},yLe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Jne=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function vLe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:m}=t,p=bW(),g=N0(typeof u=="function"?u:()=>!1),v=typeof u=="function"?g:u,b=F.useRef(!1),w=F.useRef(!1),{escapeKey:E,outsidePress:T}=Jne(h),{escapeKey:C,outsidePress:S}=Jne(m),I=F.useRef(!1),R=N0(G=>{var W;if(!n||!s||!a||G.key!=="Escape"||I.current)return;const te=(W=o.current.floatingContext)==null?void 0:W.nodeId,Z=p?X9(p.nodesRef.current,te):[];if(!E&&(G.stopPropagation(),Z.length>0)){let re=!0;if(Z.forEach(q=>{var U;if((U=q.context)!=null&&U.open&&!q.context.dataRef.current.__escapeKeyBubbles){re=!1;return}}),!re)return}r(!1,u$e(G)?G.nativeEvent:G,"escape-key")}),P=N0(G=>{var W;const te=()=>{var Z;R(G),(Z=_E(G))==null||Z.removeEventListener("keydown",te)};(W=_E(G))==null||W.addEventListener("keydown",te)}),M=N0(G=>{var W;const te=b.current;b.current=!1;const Z=w.current;if(w.current=!1,l==="click"&&Z||te||typeof v=="function"&&!v(G))return;const re=_E(G),q="["+xW("inert")+"]",U=Wb(i.floating).querySelectorAll(q);let Y=ic(re)?re:null;for(;Y&&!Bne(Y);){const le=r$e(Y);if(Bne(le)||!ic(le))break;Y=le}if(U.length&&ic(re)&&!l$e(re)&&!ik(re,i.floating)&&Array.from(U).every(le=>!ik(Y,le)))return;if(aW(re)&&z){const le=re.clientWidth>0&&re.scrollWidth>re.clientWidth,Ee=re.clientHeight>0&&re.scrollHeight>re.clientHeight;let be=Ee&&G.offsetX>re.clientWidth;if(Ee&&n$e(re).direction==="rtl"&&(be=G.offsetX<=re.offsetWidth-re.clientWidth),be||le&&G.offsetY>re.clientHeight)return}const H=(W=o.current.floatingContext)==null?void 0:W.nodeId,X=p&&X9(p.nodesRef.current,H).some(le=>{var Ee;return W9(G,(Ee=le.context)==null?void 0:Ee.elements.floating)});if(W9(G,i.floating)||W9(G,i.domReference)||X)return;const ee=p?X9(p.nodesRef.current,H):[];if(ee.length>0){let le=!0;if(ee.forEach(Ee=>{var be;if((be=Ee.context)!=null&&be.open&&!Ee.context.dataRef.current.__outsidePressBubbles){le=!1;return}}),!le)return}r(!1,G,"outside-press")}),B=N0(G=>{var W;const te=()=>{var Z;M(G),(Z=_E(G))==null||Z.removeEventListener(l,te)};(W=_E(G))==null||W.addEventListener(l,te)});F.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=E,o.current.__outsidePressBubbles=T;let G=-1;function W(U){r(!1,U,"ancestor-scroll")}function te(){window.clearTimeout(G),I.current=!0}function Z(){G=window.setTimeout(()=>{I.current=!1},t$e()?5:0)}const re=Wb(i.floating);a&&(re.addEventListener("keydown",C?P:R,C),re.addEventListener("compositionstart",te),re.addEventListener("compositionend",Z)),v&&re.addEventListener(l,S?B:M,S);let q=[];return d&&(ic(i.domReference)&&(q=G0(i.domReference)),ic(i.floating)&&(q=q.concat(G0(i.floating))),!ic(i.reference)&&i.reference&&i.reference.contextElement&&(q=q.concat(G0(i.reference.contextElement)))),q=q.filter(U=>{var Y;return U!==((Y=re.defaultView)==null?void 0:Y.visualViewport)}),q.forEach(U=>{U.addEventListener("scroll",W,{passive:!0})}),()=>{a&&(re.removeEventListener("keydown",C?P:R,C),re.removeEventListener("compositionstart",te),re.removeEventListener("compositionend",Z)),v&&re.removeEventListener(l,S?B:M,S),q.forEach(U=>{U.removeEventListener("scroll",W)}),window.clearTimeout(G)}},[o,i,a,v,l,n,r,d,s,E,T,R,C,P,M,S,B]),F.useEffect(()=>{b.current=!1},[v,l]);const L=F.useMemo(()=>({onKeyDown:R,[gLe[f]]:G=>{c&&r(!1,G.nativeEvent,"reference-press")}}),[R,r,c,f]),z=F.useMemo(()=>({onKeyDown:R,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[yLe[l]]:()=>{b.current=!0}}),[R,l]);return F.useMemo(()=>s?{reference:L,floating:z}:{},[s,L,z])}function bLe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Yge(),o=F.useRef({}),[s]=F.useState(()=>lLe()),a=vW()!=null,[u,l]=F.useState(r.reference),c=N0((h,m,p)=>{o.current.openEvent=h?m:void 0,s.emit("openchange",{open:h,event:m,reason:p,nested:a}),n==null||n(h,m,p)}),f=F.useMemo(()=>({setPositionReference:l}),[]),d=F.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return F.useMemo(()=>({dataRef:o,open:t,onOpenChange:c,elements:d,events:s,floatingId:i,refs:f}),[t,c,d,s,i,f])}function wW(e){e===void 0&&(e={});const{nodeId:t}=e,n=bLe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=F.useState(null),[a,u]=F.useState(null),c=(i==null?void 0:i.domReference)||o,f=F.useRef(null),d=bW();Up(()=>{c&&(f.current=c)},[c]);const h=tLe({...e,elements:{...i,...a&&{reference:a}}}),m=F.useCallback(w=>{const E=ic(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),p=F.useCallback(w=>{(ic(w)||w===null)&&(f.current=w,s(w)),(ic(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!ic(w))&&h.refs.setReference(w)},[h.refs]),g=F.useMemo(()=>({...h.refs,setReference:p,setPositionReference:m,domReference:f}),[h.refs,p,m]),v=F.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=F.useMemo(()=>({...h,...r,refs:g,elements:v,nodeId:t}),[h,g,v,t,r]);return Up(()=>{r.dataRef.current.floatingContext=b;const w=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);w&&(w.context=b)}),F.useMemo(()=>({...h,context:b,refs:g,elements:v}),[h,g,v,b])}function xLe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:o,elements:s}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=F.useRef(!1),c=F.useRef(),f=F.useRef(!0);F.useEffect(()=>{if(!a)return;const h=AT(s.domReference);function m(){!n&&aW(s.domReference)&&s.domReference===jne(Wb(s.domReference))&&(l.current=!0)}function p(){f.current=!0}return h.addEventListener("blur",m),h.addEventListener("keydown",p,!0),()=>{h.removeEventListener("blur",m),h.removeEventListener("keydown",p,!0)}},[s.domReference,n,a]),F.useEffect(()=>{if(!a)return;function h(m){let{reason:p}=m;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),F.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=F.useMemo(()=>({onPointerDown(h){i$e(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const m=_E(h.nativeEvent);if(u&&ic(m))try{if(o$e()&&s$e())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!f.current&&!f$e(m))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const m=h.relatedTarget,p=h.nativeEvent,g=ic(m)&&m.hasAttribute(xW("focus-guard"))&&m.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var v;const b=jne(s.domReference?s.domReference.ownerDocument:document);!m&&b===s.domReference||ik((v=o.current.floatingContext)==null?void 0:v.refs.floating.current,b)||ik(s.domReference,b)||g||r(!1,p,"focus")})}}),[o,s.domReference,r,u]);return F.useMemo(()=>a?{reference:d}:{},[a,d])}const Zne="active",ere="selected";function Q9(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[Zne]:s,[ere]:a,...u}=e;o=u}return{...n==="floating"&&{tabIndex:-1,[mLe]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Zne,ere].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),s[l]=function(){for(var d,h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];return(d=r.get(l))==null?void 0:d.map(g=>g(...m)).find(g=>g!==void 0)}}}else s[l]=c}),s),{})}}function wLe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=F.useCallback(a=>Q9(a,e,"reference"),t),o=F.useCallback(a=>Q9(a,e,"floating"),n),s=F.useCallback(a=>Q9(a,e,"item"),r);return F.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const _Le=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function ELe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,a=(n=_Le.get(s))!=null?n:s,u=Yge(),c=vW()!=null,f=F.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,s]),d=F.useMemo(()=>{const m={id:i,...a&&{role:a}};return a==="tooltip"||s==="label"?m:{...m,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,s]),h=F.useCallback(m=>{let{active:p,selected:g}=m;const v={role:"option",...p&&{id:i+"-option"}};switch(s){case"select":return{...v,"aria-selected":p&&g};case"combobox":return{...v,...p&&{"aria-selected":!0}}}return{}},[i,s]);return F.useMemo(()=>o?{reference:f,floating:d,item:h}:{},[o,f,d,h])}function Qge(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function tre(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function nre(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const TLe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function CLe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:o,arrowY:s,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[TLe[u]]:r},f=-t/2;return u==="left"?{...c,...tre(l,s,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...tre(l,s,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...nre(l,o,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...nre(l,o,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const _W=F.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:o,arrowX:s,arrowY:a,style:u,...l},c)=>{const{dir:f}=J1();return o?A.jsx("div",{...l,ref:c,style:{...u,...CLe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:s,arrowY:a})}}):null});_W.displayName="@mantine/core/FloatingArrow";var Jge={root:"m_9814e45f"};const SLe={zIndex:Ec("modal")},ALe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:o,zIndex:s})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Ep(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${et(i)})`:void 0,"--overlay-radius":o===void 0?void 0:wi(o),"--overlay-z-index":s==null?void 0:s.toString()}}),E2=Ds((e,t)=>{const n=ot("Overlay",SLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:m,blur:p,color:g,backgroundOpacity:v,mod:b,...w}=n,E=nn({name:"Overlay",props:n,classes:Jge,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:ALe});return A.jsx(Ue,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],...w,children:f})});E2.classes=Jge;E2.displayName="@mantine/core/Overlay";function DLe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const kLe={},Zge=F.forwardRef((e,t)=>{const{children:n,target:r,...i}=ot("Portal",kLe,e),[o,s]=F.useState(!1),a=F.useRef(null);return Gx(()=>(s(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:DLe(i),i6(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!o||!a.current?null:t5.createPortal(A.jsx(A.Fragment,{children:n}),a.current)});Zge.displayName="@mantine/core/Portal";function Z1({withinPortal:e=!0,children:t,...n}){return e?A.jsx(Zge,{...n,children:t}):A.jsx(A.Fragment,{children:t})}Z1.displayName="@mantine/core/OptionalPortal";const BS=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),r3={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...BS("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...BS("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...BS("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...BS("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...BS("top"),common:{transformOrigin:"top right"}}},rre={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function ILe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in r3?{transitionProperty:r3[e].transitionProperty,...i,...r3[e].common,...r3[e][rre[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[rre[t]]}}function RLe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:o,onEntered:s,onExited:a,enterDelay:u,exitDelay:l}){const c=As(),f=JM(),d=c.respectReducedMotion?f:!1,[h,m]=F.useState(d?0:e),[p,g]=F.useState(r?"entered":"exited"),v=F.useRef(-1),b=F.useRef(-1),w=F.useRef(-1),E=C=>{const S=C?i:o,I=C?s:a;window.clearTimeout(v.current);const R=d?0:C?e:t;m(R),R===0?(typeof S=="function"&&S(),typeof I=="function"&&I(),g(C?"entered":"exited")):w.current=requestAnimationFrame(()=>{IA.flushSync(()=>{g(C?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof S=="function"&&S(),g(C?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof I=="function"&&I(),g(C?"entered":"exited")},R)})})},T=C=>{if(window.clearTimeout(b.current),typeof(C?u:l)!="number"){E(C);return}b.current=window.setTimeout(()=>{E(C)},C?u:l)};return nm(()=>{T(r)},[r]),F.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:h,transitionStatus:p,transitionTimingFunction:n||"ease"}}function _m({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:o,timingFunction:s="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:m,transitionTimingFunction:p}=RLe({mounted:i,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?A.jsx(A.Fragment,{children:o({})}):e?o({display:"none"}):null:m==="exited"?e?o({display:"none"}):null:A.jsx(A.Fragment,{children:o(ILe({transition:t,duration:h,state:m,timingFunction:p}))})}_m.displayName="@mantine/core/Transition";const[NLe,eye]=nu("Popover component was not found in the tree");function a5({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=d5e(t),o=Ws(i,r);return K1(e)?F.cloneElement(e,{[n]:o}):e}function tye(e){return A.jsx(sW,{tabIndex:-1,"data-autofocus":!0,...e})}a5.displayName="@mantine/core/FocusTrap";tye.displayName="@mantine/core/FocusTrapInitialFocus";a5.InitialFocus=tye;var nye={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const PLe={},EW=Rt((e,t)=>{var g,v,b,w;const n=ot("PopoverDropdown",PLe,e),{className:r,style:i,vars:o,children:s,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=eye(),h=ege({opened:d.opened,shouldReturnFocus:d.returnFocus}),m=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},p=Ws(t,d.floating);return d.disabled?null:A.jsx(Z1,{...d.portalProps,withinPortal:d.withinPortal,children:A.jsx(_m,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((v=d.transitionProps)==null?void 0:v.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(w=d.transitionProps)==null?void 0:w.duration,children:E=>A.jsx(a5,{active:d.trapFocus&&d.opened,innerRef:p,children:A.jsxs(Ue,{...m,...f,variant:u,onKeyDownCapture:ZMe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:et(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[s,A.jsx(_W,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});EW.classes=nye;EW.displayName="@mantine/core/PopoverDropdown";const OLe={refProp:"ref",popupType:"dialog"},rye=Rt((e,t)=>{const{children:n,refProp:r,popupType:i,...o}=ot("PopoverTarget",OLe,e);if(!K1(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=o,a=eye(),u=Ws(a.reference,ZM(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return F.cloneElement(n,{...s,...l,...a.targetProps,className:ls(a.targetProps.className,s.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});rye.displayName="@mantine/core/PopoverTarget";function iye({opened:e,floating:t,position:n,positionDependencies:r}){const[i,o]=F.useState(0);F.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return G$e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),nm(()=>{t.update()},r),nm(()=>{o(s=>s+1)},[e])}function FLe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function MLe(e,t){const n=FLe(e.middlewares),r=[qge(e.offset)];return n.shift&&r.push(yW(typeof n.shift=="boolean"?{limiter:Yne(),padding:5}:{limiter:Yne(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?c6():c6(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?wD():wD(n.inline)),r.push(Wge({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(rLe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:o,availableHeight:s,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:o,availableHeight:s,...a}):Object.assign(l,{maxWidth:`${o}px`,maxHeight:`${s}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function $Le(e){const[t,n]=ya({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=F.useRef(t),i=()=>{t&&n(!1)},o=()=>n(!t),s=wW({strategy:e.strategy,placement:e.position,middleware:MLe(e,()=>s)});return iye({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),nm(()=>{var a;(a=e.onPositionChange)==null||a.call(e,s.placement)},[s.placement]),nm(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:o}}const LLe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ec("popover"),__staticSelector:"Popover",width:"max-content"},BLe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:wi(t),"--popover-shadow":Yq(n)}});function Xa(e){var xe,Re,pe,we,ke,Ge;const t=ot("Popover",LLe,e),{children:n,position:r,offset:i,onPositionChange:o,positionDependencies:s,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:m,arrowOffset:p,arrowRadius:g,arrowPosition:v,unstyled:b,classNames:w,styles:E,closeOnClickOutside:T,withinPortal:C,portalProps:S,closeOnEscape:I,clickOutsideEvents:R,trapFocus:P,onClose:M,onOpen:B,onChange:L,zIndex:z,radius:G,shadow:W,id:te,defaultOpened:Z,__staticSelector:re,withRoles:q,disabled:U,returnFocus:Y,variant:H,keepMounted:X,vars:ee,floatingStrategy:le,withOverlay:Ee,overlayProps:be,...Ce}=t,Oe=nn({name:re,props:t,classes:nye,classNames:w,styles:E,unstyled:b,rootSelector:"dropdown",vars:ee,varsResolver:BLe}),{resolvedStyles:me}=Kx({classNames:w,styles:E,props:t}),he=F.useRef(null),[Fe,Pe]=F.useState(null),[Je,ut]=F.useState(null),{dir:Ke}=J1(),tt=Cl(te),pt=$Le({middlewares:d,width:f,position:Qge(Ke,r),offset:typeof i=="number"?i+(h?m/2:0):i,arrowRef:he,arrowOffset:p,onPositionChange:o,positionDependencies:s,opened:a,defaultOpened:Z,onChange:L,onOpen:B,onClose:M,strategy:le});r5e(()=>T&&pt.onClose(),R,[Fe,Je]);const Dt=F.useCallback(Ve=>{Pe(Ve),pt.floating.refs.setReference(Ve)},[pt.floating.refs.setReference]),St=F.useCallback(Ve=>{ut(Ve),pt.floating.refs.setFloating(Ve)},[pt.floating.refs.setFloating]),$t=F.useCallback(()=>{var Ve;(Ve=u==null?void 0:u.onExited)==null||Ve.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),oe=F.useCallback(()=>{var Ve;(Ve=u==null?void 0:u.onEntered)==null||Ve.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return A.jsxs(NLe,{value:{returnFocus:Y,disabled:U,controlled:pt.controlled,reference:Dt,floating:St,x:pt.floating.x,y:pt.floating.y,arrowX:(pe=(Re=(xe=pt.floating)==null?void 0:xe.middlewareData)==null?void 0:Re.arrow)==null?void 0:pe.x,arrowY:(Ge=(ke=(we=pt.floating)==null?void 0:we.middlewareData)==null?void 0:ke.arrow)==null?void 0:Ge.y,opened:pt.opened,arrowRef:he,transitionProps:{...u,onExited:$t,onEntered:oe},width:f,withArrow:h,arrowSize:m,arrowOffset:p,arrowRadius:g,arrowPosition:v,placement:pt.floating.placement,trapFocus:P,withinPortal:C,portalProps:S,zIndex:z,radius:G,shadow:W,closeOnEscape:I,onClose:pt.onClose,onToggle:pt.onToggle,getTargetId:()=>`${tt}-target`,getDropdownId:()=>`${tt}-dropdown`,withRoles:q,targetProps:Ce,__staticSelector:re,classNames:w,styles:E,unstyled:b,variant:H,keepMounted:X,getStyles:Oe,resolvedStyles:me,floatingStrategy:le},children:[n,Ee&&A.jsx(_m,{transition:"fade",mounted:pt.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Ve=>A.jsx(Z1,{withinPortal:C,children:A.jsx(E2,{...be,...Oe("overlay",{className:be==null?void 0:be.className,style:[Ve,be==null?void 0:be.style]})})})})]})}Xa.Target=rye;Xa.Dropdown=EW;Xa.displayName="@mantine/core/Popover";Xa.extend=e=>e;var fh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const oye=F.forwardRef(({className:e,...t},n)=>A.jsxs(Ue,{component:"span",className:ls(fh.barsLoader,e),...t,ref:n,children:[A.jsx("span",{className:fh.bar}),A.jsx("span",{className:fh.bar}),A.jsx("span",{className:fh.bar})]}));oye.displayName="@mantine/core/Bars";const sye=F.forwardRef(({className:e,...t},n)=>A.jsxs(Ue,{component:"span",className:ls(fh.dotsLoader,e),...t,ref:n,children:[A.jsx("span",{className:fh.dot}),A.jsx("span",{className:fh.dot}),A.jsx("span",{className:fh.dot})]}));sye.displayName="@mantine/core/Dots";const aye=F.forwardRef(({className:e,...t},n)=>A.jsx(Ue,{component:"span",className:ls(fh.ovalLoader,e),...t,ref:n}));aye.displayName="@mantine/core/Oval";const uye={bars:oye,oval:aye,dots:sye},jLe={loaders:uye,type:"oval"},zLe=(e,{size:t,color:n})=>({root:{"--loader-size":Zn(t,"loader-size"),"--loader-color":n?qi(n,e):void 0}}),Em=Rt((e,t)=>{const n=ot("Loader",jLe,e),{size:r,color:i,type:o,vars:s,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:m,...p}=n,g=nn({name:"Loader",props:n,classes:fh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:s,varsResolver:zLe});return m?A.jsx(Ue,{...g("root"),ref:t,...p,children:m}):A.jsx(Ue,{...g("root"),ref:t,component:d[o],variant:h,size:r,...p})});Em.defaultLoaders=uye;Em.classes=fh;Em.displayName="@mantine/core/Loader";var IT={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const ire={orientation:"horizontal"},ULe=(e,{borderWidth:t})=>({group:{"--ai-border-width":et(t)}}),TW=Rt((e,t)=>{const n=ot("ActionIconGroup",ire,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=ot("ActionIconGroup",ire,e),m=nn({name:"ActionIconGroup",props:n,classes:IT,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:l,varsResolver:ULe,rootSelector:"group"});return A.jsx(Ue,{...m("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});TW.classes=IT;TW.displayName="@mantine/core/ActionIconGroup";const ore={},VLe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:o,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":Zn(s,"section-height"),"--section-padding-x":Zn(s,"section-padding-x"),"--section-fz":Ka(s),"--section-radius":t===void 0?void 0:wi(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},CW=Rt((e,t)=>{const n=ot("ActionIconGroupSection",ore,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=ot("ActionIconGroupSection",ore,e),m=nn({name:"ActionIconGroupSection",props:n,classes:IT,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,varsResolver:VLe,rootSelector:"groupSection"});return A.jsx(Ue,{...m("groupSection"),ref:t,variant:l,...h})});CW.classes=IT;CW.displayName="@mantine/core/ActionIconGroupSection";const HLe={},qLe=(e,{size:t,radius:n,variant:r,gradient:i,color:o,autoContrast:s})=>{const a=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":Zn(t,"ai-size"),"--ai-radius":n===void 0?void 0:wi(n),"--ai-bg":o||r?a.background:void 0,"--ai-hover":o||r?a.hover:void 0,"--ai-hover-color":o||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":o||r?a.border:void 0}}},ev=Ds((e,t)=>{const n=ot("ActionIcon",HLe,e),{className:r,unstyled:i,variant:o,classNames:s,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:m,gradient:p,vars:g,children:v,disabled:b,"data-disabled":w,autoContrast:E,mod:T,...C}=n,S=nn({name:["ActionIcon",m],props:n,className:r,style:u,classes:IT,classNames:s,styles:a,unstyled:i,vars:g,varsResolver:qLe});return A.jsxs(gf,{...S("root",{active:!b&&!l&&!w}),...C,unstyled:i,variant:o,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},T],children:[A.jsx(_m,{mounted:!!l,transition:"slide-down",duration:150,children:I=>A.jsx(Ue,{component:"span",...S("loader",{style:I}),"aria-hidden":!0,children:A.jsx(Em,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),A.jsx(Ue,{component:"span",mod:{loading:l},...S("icon"),children:v})]})});ev.classes=IT;ev.displayName="@mantine/core/ActionIcon";ev.Group=TW;ev.GroupSection=CW;const lye=F.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>A.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:A.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));lye.displayName="@mantine/core/CloseIcon";var cye={root:"m_86a44da5","root--subtle":"m_220c80f2"};const WLe={variant:"subtle"},GLe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Zn(t,"cb-size"),"--cb-radius":n===void 0?void 0:wi(n),"--cb-icon-size":et(r)}}),tv=Ds((e,t)=>{const n=ot("CloseButton",WLe,e),{iconSize:r,children:i,vars:o,radius:s,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:m,icon:p,mod:g,__staticSelector:v,...b}=n,w=nn({name:v||"CloseButton",props:n,className:a,style:l,classes:cye,classNames:u,styles:c,unstyled:f,vars:o,varsResolver:GLe});return A.jsxs(gf,{ref:t,...b,unstyled:f,variant:m,disabled:h,mod:[{disabled:h||d},g],...w("root",{variant:m,active:!h&&!d}),children:[p||A.jsx(lye,{}),i]})});tv.classes=cye;tv.displayName="@mantine/core/CloseButton";function YLe(e){return F.Children.toArray(e).filter(Boolean)}var fye={root:"m_4081bf90"};const KLe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},XLe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:o,wrap:s},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Cs(r),"--group-align":i,"--group-justify":o,"--group-wrap":s}}),ui=Rt((e,t)=>{const n=ot("Group",KLe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:m,vars:p,variant:g,__size:v,mod:b,...w}=n,E=YLe(u),T=E.length,C=Cs(l??"md"),I={childWidth:`calc(${100/T}% - (${C} - ${C} / ${T}))`},R=nn({name:"Group",props:n,stylesCtx:I,className:i,style:o,classes:fye,classNames:r,styles:s,unstyled:a,vars:p,varsResolver:XLe});return A.jsx(Ue,{...R("root"),ref:t,variant:g,mod:[{grow:h},b],size:v,...w,children:E})});ui.classes=fye;ui.displayName="@mantine/core/Group";const[QLe,Ag]=nu("ModalBase component was not found in tree");function JLe({opened:e,transitionDuration:t}){const[n,r]=F.useState(e),i=F.useRef(-1),s=JM()?0:t;return F.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):s===0?r(!1):i.current=window.setTimeout(()=>r(!1),s),()=>window.clearTimeout(i.current)),[e,s]),n}function ZLe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:o,returnFocus:s}){const a=Cl(e),[u,l]=F.useState(!1),[c,f]=F.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=JLe({opened:n,transitionDuration:d});return ige("keydown",m=>{var p;m.key==="Escape"&&i&&n&&((p=m.target)==null?void 0:p.getAttribute("data-mantine-stop-propagation"))!=="true"&&o()},{capture:!0}),ege({opened:n,shouldReturnFocus:r&&s}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const dye=F.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:o,onEnterTransitionEnd:s,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:m,zIndex:p,shadow:g,padding:v,__vars:b,unstyled:w,removeScrollProps:E,...T},C)=>{const{_id:S,titleMounted:I,bodyMounted:R,shouldLockScroll:P,setTitleMounted:M,setBodyMounted:B}=ZLe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:L,...z}=E||{};return A.jsx(Z1,{...d,withinPortal:f,children:A.jsx(QLe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:o,onEnterTransitionEnd:s,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${S}-title`,getBodyId:()=>`${S}-body`,titleMounted:I,bodyMounted:R,setTitleMounted:M,setBodyMounted:B,trapFocus:a,closeOnEscape:u,zIndex:p,unstyled:w},children:A.jsx(b2,{enabled:P&&h,...z,children:A.jsx(Ue,{ref:C,...T,__vars:{...b,"--mb-z-index":(p||Ec("modal")).toString(),"--mb-shadow":Yq(g),"--mb-padding":Cs(v)},children:m})},L)})})});dye.displayName="@mantine/core/ModalBase";function e9e(){const e=Ag();return F.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var T2={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const hye=F.forwardRef(({className:e,...t},n)=>{const r=e9e(),i=Ag();return A.jsx(Ue,{ref:n,...t,id:r,className:ls({[T2.body]:!i.unstyled},e)})});hye.displayName="@mantine/core/ModalBaseBody";const pye=F.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Ag();return A.jsx(tv,{ref:r,...n,onClick:o=>{i.onClose(),t==null||t(o)},className:ls({[T2.close]:!i.unstyled},e),unstyled:i.unstyled})});pye.displayName="@mantine/core/ModalBaseCloseButton";const mye=F.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...o},s)=>{const a=Ag();return A.jsx(_m,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>A.jsx("div",{...n,className:ls({[T2.inner]:!a.unstyled},n.className),children:A.jsx(a5,{active:a.opened&&a.trapFocus,innerRef:s,children:A.jsx(ST,{...o,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:ls({[T2.content]:!a.unstyled},t),unstyled:a.unstyled,children:o.children})})})})});mye.displayName="@mantine/core/ModalBaseContent";const gye=F.forwardRef(({className:e,...t},n)=>{const r=Ag();return A.jsx(Ue,{component:"header",ref:n,className:ls({[T2.header]:!r.unstyled},e),...t})});gye.displayName="@mantine/core/ModalBaseHeader";const t9e={duration:200,timingFunction:"ease",transition:"fade"};function n9e(e){const t=Ag();return{...t9e,...t.transitionProps,...e}}const yye=F.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},o)=>{const s=Ag(),a=n9e(t);return A.jsx(_m,{mounted:r!==void 0?r:s.opened,...a,transition:"fade",children:u=>A.jsx(E2,{ref:o,fixed:!0,style:[n,u],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{e==null||e(l),s.closeOnClickOutside&&s.onClose()},...i})})});yye.displayName="@mantine/core/ModalBaseOverlay";function r9e(){const e=Ag();return F.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const vye=F.forwardRef(({className:e,...t},n)=>{const r=r9e(),i=Ag();return A.jsx(Ue,{component:"h2",ref:n,className:ls({[T2.title]:!i.unstyled},e),...t,id:r})});vye.displayName="@mantine/core/ModalBaseTitle";function i9e({children:e}){return A.jsx(A.Fragment,{children:e})}const[o9e,s9e]=X1({size:"sm"}),a9e={},bye=Rt((e,t)=>{const n=ot("InputClearButton",a9e,e),{size:r,variant:i,vars:o,classNames:s,styles:a,...u}=n,l=s9e(),{resolvedClassNames:c,resolvedStyles:f}=Kx({classNames:s,styles:a,props:n});return A.jsx(tv,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});bye.displayName="@mantine/core/InputClearButton";const[u9e,RT]=X1({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var yd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const sre={},l9e=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Ka(t)} - ${et(2)})`}}),u5=Rt((e,t)=>{const n=ot("InputDescription",sre,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=ot("InputDescription",sre,n),m=RT(),p=nn({name:["InputWrapper",c],props:n,classes:yd,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"description",vars:u,varsResolver:l9e}),g=f&&(m==null?void 0:m.getStyles)||p;return A.jsx(Ue,{component:"p",ref:t,variant:d,size:l,...g("description",m!=null&&m.getStyles?{className:i,style:o}:void 0),...h})});u5.classes=yd;u5.displayName="@mantine/core/InputDescription";const c9e={},f9e=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Ka(t)} - ${et(2)})`}}),l5=Rt((e,t)=>{const n=ot("InputError",c9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,m=nn({name:["InputWrapper",c],props:n,classes:yd,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"error",vars:u,varsResolver:f9e}),p=RT(),g=f&&(p==null?void 0:p.getStyles)||m;return A.jsx(Ue,{component:"p",ref:t,variant:d,size:l,...g("error",p!=null&&p.getStyles?{className:i,style:o}:void 0),...h})});l5.classes=yd;l5.displayName="@mantine/core/InputError";const are={labelElement:"label"},d9e=(e,{size:t})=>({label:{"--input-label-size":Ka(t),"--input-asterisk-color":void 0}}),c5=Rt((e,t)=>{const n=ot("InputLabel",are,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:m,__staticSelector:p,variant:g,mod:v,...b}=ot("InputLabel",are,n),w=nn({name:["InputWrapper",p],props:n,classes:yd,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"label",vars:u,varsResolver:d9e}),E=RT(),T=(E==null?void 0:E.getStyles)||w;return A.jsxs(Ue,{...T("label",E!=null&&E.getStyles?{className:i,style:o}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},v],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...b,children:[m,f&&A.jsx("span",{...T("required"),"aria-hidden":!0,children:" *"})]})});c5.classes=yd;c5.displayName="@mantine/core/InputLabel";const ure={},SW=Rt((e,t)=>{const n=ot("InputPlaceholder",ure,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=ot("InputPlaceholder",ure,n),m=nn({name:["InputPlaceholder",l],props:n,classes:yd,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"placeholder"});return A.jsx(Ue,{...m("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});SW.classes=yd;SW.displayName="@mantine/core/InputPlaceholder";function h9e(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),o=e.slice(r+1),s=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&o.includes("description")||n&&o.includes("error"),offsetTop:s}}const p9e={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},m9e=(e,{size:t})=>({label:{"--input-label-size":Ka(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Ka(t)} - ${et(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Ka(t)} - ${et(2)})`}}),AW=Rt((e,t)=>{const n=ot("InputWrapper",p9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:m,error:p,description:g,labelProps:v,descriptionProps:b,errorProps:w,labelElement:E,children:T,withAsterisk:C,id:S,required:I,__stylesApiProps:R,mod:P,...M}=n,B=nn({name:["InputWrapper",f],props:R||n,classes:yd,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:m9e}),L={size:l,variant:c,__staticSelector:f},z=Cl(S),G=typeof C=="boolean"?C:I,W=(w==null?void 0:w.id)||`${z}-error`,te=(b==null?void 0:b.id)||`${z}-description`,Z=z,re=!!p&&typeof p!="boolean",q=!!g,U=`${re?W:""} ${q?te:""}`,Y=U.trim().length>0?U.trim():void 0,H=(v==null?void 0:v.id)||`${z}-label`,X=m&&A.jsx(c5,{labelElement:E,id:H,htmlFor:Z,required:G,...L,...v,children:m},"label"),ee=q&&A.jsx(u5,{...b,...L,size:(b==null?void 0:b.size)||L.size,id:(b==null?void 0:b.id)||te,children:g},"description"),le=A.jsx(F.Fragment,{children:d(T)},"input"),Ee=re&&F.createElement(l5,{...w,...L,size:(w==null?void 0:w.size)||L.size,key:"error",id:(w==null?void 0:w.id)||W},p),be=h.map(Ce=>{switch(Ce){case"label":return X;case"input":return le;case"description":return ee;case"error":return Ee;default:return null}});return A.jsx(u9e,{value:{getStyles:B,describedBy:Y,inputId:Z,labelId:H,...h9e(h,{hasDescription:q,hasError:re})},children:A.jsx(Ue,{ref:t,variant:c,size:l,mod:[{error:!!p},P],...B("root"),...M,children:be})})});AW.classes=yd;AW.displayName="@mantine/core/InputWrapper";const g9e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},y9e=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Zn(t.size,"input-height"),"--input-fz":Ka(t.size),"--input-radius":t.radius===void 0?void 0:wi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?et(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?et(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Zn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),ki=Ds((e,t)=>{const n=ot("Input",g9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:m,leftSection:p,leftSectionProps:g,leftSectionWidth:v,rightSection:b,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:T,leftSectionPointerEvents:C,variant:S,vars:I,pointer:R,multiline:P,radius:M,id:B,withAria:L,withErrorStyles:z,mod:G,inputSize:W,__clearSection:te,__clearable:Z,__defaultRightSection:re,...q}=n,{styleProps:U,rest:Y}=Qx(q),H=RT(),X={offsetBottom:H==null?void 0:H.offsetBottom,offsetTop:H==null?void 0:H.offsetTop},ee=nn({name:["Input",l],props:c||n,classes:yd,className:i,style:o,classNames:r,styles:s,unstyled:a,stylesCtx:X,rootSelector:"wrapper",vars:I,varsResolver:y9e}),le=L?{required:u,disabled:m,"aria-invalid":!!h,"aria-describedby":H==null?void 0:H.describedBy,id:(H==null?void 0:H.inputId)||B}:{},Ee=b||Z&&te||re;return A.jsx(o9e,{value:{size:f||"sm"},children:A.jsxs(Ue,{...ee("wrapper"),...U,...d,mod:[{error:!!h&&z,pointer:R,disabled:m,multiline:P,"data-with-right-section":!!b,"data-with-left-section":!!p},G],variant:S,size:f,children:[p&&A.jsx("div",{...g,"data-position":"left",...ee("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:p}),A.jsx(Ue,{component:"input",...Y,...le,ref:t,required:u,mod:{disabled:m,error:!!h&&z},variant:S,__size:W,...ee("input")}),Ee&&A.jsx("div",{...w,"data-position":"right",...ee("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:Ee})]})})});ki.classes=yd;ki.Wrapper=AW;ki.Label=c5;ki.Error=l5;ki.Description=u5;ki.Placeholder=SW;ki.ClearButton=bye;ki.displayName="@mantine/core/Input";function v9e(e,t,n){const r=ot(e,t,n),{label:i,description:o,error:s,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:m,labelProps:p,descriptionProps:g,wrapperProps:v,id:b,size:w,style:E,inputContainer:T,inputWrapperOrder:C,withAsterisk:S,variant:I,vars:R,mod:P,...M}=r,{styleProps:B,rest:L}=Qx(M),z={label:i,description:o,error:s,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:m,labelProps:p,descriptionProps:g,unstyled:f,styles:l,size:w,style:E,inputContainer:T,inputWrapperOrder:C,withAsterisk:S,variant:I,id:b,mod:P,...v};return{...L,classNames:u,styles:l,unstyled:f,wrapperProps:{...z,...B},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:s,variant:I,id:b}}}const b9e={__staticSelector:"InputBase",withAria:!0},vd=Ds((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=v9e("InputBase",b9e,e);return A.jsx(ki.Wrapper,{...r,children:A.jsx(ki,{...n,...i,ref:t})})});vd.classes={...ki.classes,...ki.Wrapper.classes};vd.displayName="@mantine/core/InputBase";const x9e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var xye={root:"m_8bffd616"};const w9e={},un=Ds((e,t)=>{const n=ot("Flex",w9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:m,direction:p,...g}=n,v=nn({name:"Flex",classes:xye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u}),b=As(),w=gI(),E=dge({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:m,direction:p},theme:b,data:x9e});return A.jsxs(A.Fragment,{children:[E.hasResponsiveStyles&&A.jsx(Xx,{selector:`.${w}`,styles:E.styles,media:E.media}),A.jsx(Ue,{ref:t,...v("root",{className:w,style:Y1(E.inlineStyles)}),...g})]})});un.classes=xye;un.displayName="@mantine/core/Flex";const[_9e,DW]=nu("Accordion component was not found in the tree");function f5({style:e,size:t=16,...n}){return A.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:et(t),height:et(t),display:"block"},...n,children:A.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}f5.displayName="@mantine/core/AccordionChevron";const[E9e,wye]=nu("Accordion.Item component was not found in the tree");var vI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const T9e={},kW=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...m}=ot("AccordionControl",T9e,e),{value:p}=wye(),g=DW(),v=g.isItemActive(p),b=typeof g.order=="number",w=`h${g.order}`,E=A.jsxs(gf,{...m,...g.getStyles("control",{className:r,classNames:n,style:i,styles:o,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:v,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:T=>{l==null||l(T),g.onChange(p)},type:"button",disabled:d,"aria-expanded":v,"aria-controls":g.getRegionId(p),id:g.getControlId(p),onKeyDown:Gq({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[A.jsx(Ue,{component:"span",mod:{rotate:!g.disableChevronRotation&&v,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:o}),children:a||g.chevron}),A.jsx("span",{...g.getStyles("label",{classNames:n,styles:o}),children:f}),u&&A.jsx(Ue,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:o}),children:u})]});return b?A.jsx(w,{...g.getStyles("itemTitle",{classNames:n,styles:o}),children:E}):E});kW.displayName="@mantine/core/AccordionControl";kW.classes=vI;const C9e={},IW=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,value:a,mod:u,...l}=ot("AccordionItem",C9e,e),c=DW();return A.jsx(E9e,{value:{value:a},children:A.jsx(Ue,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:o,style:i,variant:c.variant}),...l})})});IW.displayName="@mantine/core/AccordionItem";IW.classes=vI;const S9e={},RW=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,children:a,...u}=ot("AccordionPanel",S9e,e),{value:l}=wye(),c=DW();return A.jsx(n5,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:o}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:A.jsx("div",{...c.getStyles("content",{classNames:n,styles:o}),children:a})})});RW.displayName="@mantine/core/AccordionPanel";RW.classes=vI;const A9e={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:A.jsx(f5,{})},D9e=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:et(n),"--accordion-radius":r===void 0?void 0:wi(r)}});function Su(e){const t=ot("Accordion",A9e,e),{classNames:n,className:r,style:i,styles:o,unstyled:s,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:m,transitionDuration:p,disableChevronRotation:g,chevronPosition:v,chevronSize:b,order:w,chevron:E,variant:T,radius:C,...S}=t,I=Cl(h),[R,P]=ya({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),M=z=>Array.isArray(R)?R.includes(z):z===R,B=z=>{const G=Array.isArray(R)?R.includes(z)?R.filter(W=>W!==z):[...R,z]:z===R?null:z;P(G)},L=nn({name:"Accordion",classes:vI,props:t,className:r,style:i,classNames:n,styles:o,unstyled:s,vars:a,varsResolver:D9e});return A.jsx(_9e,{value:{isItemActive:M,onChange:B,getControlId:n6(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:n6(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:p,disableChevronRotation:g,chevronPosition:v,order:w,chevron:E,loop:m,getStyles:L,variant:T,unstyled:s},children:A.jsx(Ue,{...L("root"),id:I,...S,variant:T,"data-accordion":!0,children:u})})}const k9e=e=>e;Su.extend=k9e;Su.withProps=F8e(Su);Su.classes=vI;Su.displayName="@mantine/core/Accordion";Su.Item=IW;Su.Panel=RW;Su.Control=kW;Su.Chevron=f5;var _ye={root:"m_7f854edf"};const I9e={position:{bottom:0,right:0},zIndex:Ec("modal"),withinPortal:!0},R9e=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":et(n==null?void 0:n.top),"--affix-left":et(n==null?void 0:n.left),"--affix-bottom":et(n==null?void 0:n.bottom),"--affix-right":et(n==null?void 0:n.right)}}),NW=Rt((e,t)=>{const n=ot("Affix",I9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,m=nn({name:"Affix",classes:_ye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:R9e});return A.jsx(Z1,{...l,withinPortal:f,children:A.jsx(Ue,{ref:t,...m("root"),...h})})});NW.classes=_ye;NW.displayName="@mantine/core/Affix";var Eye={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const N9e={},P9e=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:wi(t),"--alert-bg":n||r?o.background:void 0,"--alert-color":o.color,"--alert-bd":n||r?o.border:void 0}}},Y0=Rt((e,t)=>{const n=ot("Alert",N9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:m,withCloseButton:p,onClose:g,closeButtonLabel:v,variant:b,autoContrast:w,...E}=n,T=nn({name:"Alert",classes:Eye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:P9e}),C=Cl(h),S=f&&`${C}-title`||void 0,I=`${C}-body`;return A.jsx(Ue,{id:C,...T("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":I,"aria-labelledby":S,children:A.jsxs("div",{...T("wrapper"),children:[m&&A.jsx("div",{...T("icon"),children:m}),A.jsxs("div",{...T("body"),children:[f&&A.jsx("div",{...T("title"),"data-with-close-button":p||void 0,children:A.jsx("span",{id:S,...T("label"),children:f})}),d&&A.jsx("div",{id:I,...T("message"),"data-variant":b,children:d})]}),p&&A.jsx(tv,{...T("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":v,unstyled:a})]})})});Y0.classes=Eye;Y0.displayName="@mantine/core/Alert";var Tye={root:"m_b6d8b162"};function O9e(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const F9e={inherit:!1},M9e=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:o})=>({root:{"--text-fz":Ka(i),"--text-lh":Z0e(i),"--text-gradient":t==="gradient"?Az(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":o?qi(o,e):void 0}}),ct=Ds((e,t)=>{const n=ot("Text",F9e,e),{lineClamp:r,truncate:i,inline:o,inherit:s,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:m,unstyled:p,variant:g,mod:v,size:b,...w}=n,E=nn({name:["Text",l],props:n,classes:Tye,className:f,style:d,classNames:h,styles:m,unstyled:p,vars:c,varsResolver:M9e});return A.jsx(Ue,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":O9e(i),"data-line-clamp":typeof r=="number","data-inline":o,"data-inherit":s},v],size:b,...w})});ct.classes=Tye;ct.displayName="@mantine/core/Text";var Cye={root:"m_849cf0da"};const $9e={underline:"hover"},NT=Ds((e,t)=>{const{underline:n,className:r,unstyled:i,mod:o,...s}=ot("Anchor",$9e,e);return A.jsx(ct,{component:"a",ref:t,className:ls({[Cye.root]:!i},r),...s,mod:[{underline:n},o],__staticSelector:"Anchor",unstyled:i})});NT.classes=Cye;NT.displayName="@mantine/core/Anchor";const[L9e,PT]=nu("AppShell was not found in tree");var nv={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const B9e={},PW=Rt((e,t)=>{const n=ot("AppShellAside",B9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PT();return h.disabled?null:A.jsx(Ue,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});PW.classes=nv;PW.displayName="@mantine/core/AppShellAside";const j9e={},OW=Rt((e,t)=>{var m;const n=ot("AppShellFooter",j9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PT();return h.disabled?null:A.jsx(Ue,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:ls({[b2.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-footer-z-index":(m=c??h.zIndex)==null?void 0:m.toString()}})});OW.classes=nv;OW.displayName="@mantine/core/AppShellFooter";const z9e={},FW=Rt((e,t)=>{var m;const n=ot("AppShellHeader",z9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PT();return h.disabled?null:A.jsx(Ue,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:ls({[b2.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-header-z-index":(m=c??h.zIndex)==null?void 0:m.toString()}})});FW.classes=nv;FW.displayName="@mantine/core/AppShellHeader";const U9e={},MW=Rt((e,t)=>{const n=ot("AppShellMain",U9e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=PT();return A.jsx(Ue,{component:"main",ref:t,...l.getStyles("main",{className:i,style:o,classNames:r,styles:s}),...u})});MW.classes=nv;MW.displayName="@mantine/core/AppShellMain";function bI(e){return typeof e=="object"?e.base:e}function xI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function wI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function V9e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const o=r==null?void 0:r.width,s="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),xI(o)){const f=et(bI(o));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(wI(o)&&(typeof o.base<"u"&&(e["--app-shell-aside-width"]=et(o.base),e["--app-shell-aside-offset"]=et(o.base)),Li(o).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=et(o[f]),t[f]["--app-shell-aside-offset"]=et(o[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=s,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Kq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=s,n[f]["--app-shell-aside-transform-rtl"]=a}}function H9e({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",o=(n==null?void 0:n.offset)??!0;if(xI(r)){const s=et(bI(r));e["--app-shell-footer-height"]=s,o&&(e["--app-shell-footer-offset"]=s)}wI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=et(r.base),o&&(e["--app-shell-footer-offset"]=et(r.base))),Li(r).forEach(s=>{s!=="base"&&(t[s]=t[s]||{},t[s]["--app-shell-footer-height"]=et(r[s]),o&&(t[s]["--app-shell-footer-offset"]=et(r[s])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function q9e({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",o=(n==null?void 0:n.offset)??!0;if(xI(r)){const s=et(bI(r));e["--app-shell-header-height"]=s,o&&(e["--app-shell-header-offset"]=s)}wI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=et(r.base),o&&(e["--app-shell-header-offset"]=et(r.base))),Li(r).forEach(s=>{s!=="base"&&(t[s]=t[s]||{},t[s]["--app-shell-header-height"]=et(r[s]),o&&(t[s]["--app-shell-header-offset"]=et(r[s])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function W9e({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const o=r==null?void 0:r.width,s="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),xI(o)){const f=et(bI(o));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(wI(o)&&(typeof o.base<"u"&&(e["--app-shell-navbar-width"]=et(o.base),e["--app-shell-navbar-offset"]=et(o.base)),Li(o).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=et(o[f]),t[f]["--app-shell-navbar-offset"]=et(o[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=s,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Kq(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=s,n[f]["--app-shell-navbar-transform-rtl"]=a}}function J9(e){return Number(e)===0?"0px":Cs(e)}function G9e({padding:e,baseStyles:t,minMediaStyles:n}){xI(e)&&(t["--app-shell-padding"]=J9(bI(e))),wI(e)&&(e.base&&(t["--app-shell-padding"]=J9(e.base)),Li(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=J9(e[r]))}))}function Y9e({navbar:e,header:t,footer:n,aside:r,padding:i,theme:o}){const s={},a={},u={};W9e({baseStyles:u,minMediaStyles:s,maxMediaStyles:a,navbar:e,theme:o}),V9e({baseStyles:u,minMediaStyles:s,maxMediaStyles:a,aside:r,theme:o}),q9e({baseStyles:u,minMediaStyles:s,header:t}),H9e({baseStyles:u,minMediaStyles:s,footer:n}),G9e({baseStyles:u,minMediaStyles:s,padding:i});const l=nk(Li(s),o.breakpoints).map(d=>({query:`(min-width: ${t6(d.px)})`,styles:s[d.value]})),c=nk(Li(a),o.breakpoints).map(d=>({query:`(max-width: ${t6(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function K9e({navbar:e,header:t,aside:n,footer:r,padding:i}){const o=As(),s=Q1(),{media:a,baseStyles:u}=Y9e({navbar:e,header:t,footer:r,aside:n,padding:i,theme:o});return A.jsx(Xx,{media:a,styles:u,selector:s.cssVariablesSelector})}const X9e={},$W=Rt((e,t)=>{const n=ot("AppShellNavbar",X9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=PT();return h.disabled?null:A.jsx(Ue,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:s,style:o}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});$W.classes=nv;$W.displayName="@mantine/core/AppShellNavbar";const Q9e={},LW=Ds((e,t)=>{const n=ot("AppShellSection",Q9e,e),{classNames:r,className:i,style:o,styles:s,vars:a,grow:u,mod:l,...c}=n,f=PT();return A.jsx(Ue,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:o,classNames:r,styles:s}),...c})});LW.classes=nv;LW.displayName="@mantine/core/AppShellSection";function J9e({transitionDuration:e,disabled:t}){const[n,r]=F.useState(!0),i=F.useRef(-1),o=F.useRef(-1);return ige("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>F.startTransition(()=>{r(!1)}),200)}),Gx(()=>{r(!0),clearTimeout(o.current),o.current=window.setTimeout(()=>F.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const Z9e={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Ec("app")},eBe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Ci=Rt((e,t)=>{const n=ot("AppShell",Z9e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:m,zIndex:p,layout:g,disabled:v,aside:b,footer:w,offsetScrollbars:E=g!=="alt",mod:T,...C}=n,S=nn({name:"AppShell",classes:nv,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:eBe}),I=J9e({disabled:v,transitionDuration:d});return A.jsxs(L9e,{value:{getStyles:S,withBorder:c,zIndex:p,disabled:v,offsetScrollbars:E},children:[A.jsx(K9e,{navbar:l,header:m,aside:b,footer:w,padding:f}),A.jsx(Ue,{ref:t,...S("root"),mod:[{resizing:I,layout:g,disabled:v},T],...C})]})});Ci.classes=nv;Ci.displayName="@mantine/core/AppShell";Ci.Navbar=$W;Ci.Header=FW;Ci.Main=MW;Ci.Aside=PW;Ci.Footer=OW;Ci.Section=LW;function Sye(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Sye(t))}:e}function Aye(e){return e?e.map(t=>Sye(t)):[]}function BW(e){return e.reduce((t,n)=>"group"in n?{...t,...BW(n.items)}:(t[n.value]=n,t),{})}var pc={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const tBe={error:null},nBe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Zn(t,"combobox-chevron-size")}}),jW=Rt((e,t)=>{const n=ot("ComboboxChevron",tBe,e),{size:r,error:i,style:o,className:s,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=nn({name:"ComboboxChevron",classes:pc,props:n,style:o,className:s,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:nBe,rootSelector:"chevron"});return A.jsx(Ue,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:A.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});jW.classes=pc;jW.displayName="@mantine/core/ComboboxChevron";const[rBe,bd]=nu("Combobox component was not found in tree"),Dye=F.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},o)=>A.jsx(ki.ClearButton,{ref:o,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:s=>{s.preventDefault(),t==null||t(s)},onClick:s=>{r(),n==null||n(s)}}));Dye.displayName="@mantine/core/ComboboxClearButton";const iBe={},zW=Rt((e,t)=>{const{classNames:n,styles:r,className:i,style:o,hidden:s,...a}=ot("ComboboxDropdown",iBe,e),u=bd();return A.jsx(Xa.Dropdown,{...a,ref:t,role:"presentation","data-hidden":s||void 0,...u.getStyles("dropdown",{className:i,style:o,classNames:n,styles:r})})});zW.classes=pc;zW.displayName="@mantine/core/ComboboxDropdown";const oBe={refProp:"ref"},kye=Rt((e,t)=>{const{children:n,refProp:r}=ot("ComboboxDropdownTarget",oBe,e);if(bd(),!K1(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return A.jsx(Xa.Target,{ref:t,refProp:r,children:n})});kye.displayName="@mantine/core/ComboboxDropdownTarget";const sBe={},UW=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ot("ComboboxEmpty",sBe,e),u=bd();return A.jsx(Ue,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:o,style:i}),...a})});UW.classes=pc;UW.displayName="@mantine/core/ComboboxEmpty";function VW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:o}){const s=bd(),[a,u]=F.useState(null),l=f=>{if(e==null||e(f),!s.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),s.store.dropdownOpened?u(s.store.selectNextOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),s.store.dropdownOpened?u(s.store.selectPreviousOption()):(s.store.openDropdown("keyboard"),u(s.store.selectActiveOption()),s.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=s.store.getSelectedOptionIndex();s.store.dropdownOpened&&d!==-1?(f.preventDefault(),s.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),s.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&s.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),s.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(s.store.listId&&s.store.dropdownOpened)||void 0,"aria-controls":s.store.dropdownOpened?s.store.listId:void 0,"aria-activedescendant":s.store.dropdownOpened&&a||void 0,autoComplete:o,"data-expanded":s.store.dropdownOpened||void 0,"data-mantine-stop-propagation":s.store.dropdownOpened||void 0}:{},onKeyDown:l}}const aBe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Iye=Rt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:o,withExpandedAttribute:s,targetType:a,autoComplete:u,...l}=ot("ComboboxEventsTarget",aBe,e);if(!K1(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=bd(),f=VW({targetType:a,withAriaAttributes:o,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:u});return F.cloneElement(n,{...f,...l,[r]:Ws(t,c.store.targetRef,ZM(n))})});Iye.displayName="@mantine/core/ComboboxEventsTarget";const uBe={},HW=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ot("ComboboxFooter",uBe,e),u=bd();return A.jsx(Ue,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:o}),...a,onMouseDown:l=>{l.preventDefault()}})});HW.classes=pc;HW.displayName="@mantine/core/ComboboxFooter";const lBe={},qW=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,children:a,label:u,...l}=ot("ComboboxGroup",lBe,e),c=bd();return A.jsxs(Ue,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:o}),...l,children:[u&&A.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:o}),children:u}),a]})});qW.classes=pc;qW.displayName="@mantine/core/ComboboxGroup";const cBe={},WW=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ot("ComboboxHeader",cBe,e),u=bd();return A.jsx(Ue,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:o}),...a,onMouseDown:l=>{l.preventDefault()}})});WW.classes=pc;WW.displayName="@mantine/core/ComboboxHeader";function Rye({value:e,valuesDivider:t=",",...n}){return A.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Rye.displayName="@mantine/core/ComboboxHiddenInput";const fBe={},GW=Rt((e,t)=>{const n=ot("ComboboxOption",fBe,e),{classNames:r,className:i,style:o,styles:s,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:m,mod:p,...g}=n,v=bd(),b=F.useId(),w=l||b;return A.jsx(Ue,{...v.getStyles("option",{className:i,classNames:r,styles:s,style:o}),...g,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":m},p],role:"option",onClick:E=>{var T;h?E.preventDefault():((T=v.onOptionSubmit)==null||T.call(v,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{v.resetSelectionOnOptionHover&&v.store.resetSelectedOption(),d==null||d(E)}})});GW.classes=pc;GW.displayName="@mantine/core/ComboboxOption";const dBe={},YW=Rt((e,t)=>{const n=ot("ComboboxOptions",dBe,e),{classNames:r,className:i,style:o,styles:s,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=bd(),d=Cl(a);return F.useEffect(()=>{f.store.setListId(d)},[d]),A.jsx(Ue,{ref:t,...f.getStyles("options",{className:i,style:o,classNames:r,styles:s}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});YW.classes=pc;YW.displayName="@mantine/core/ComboboxOptions";const hBe={withAriaAttributes:!0,withKeyboardNavigation:!0},KW=Rt((e,t)=>{const n=ot("ComboboxSearch",hBe,e),{classNames:r,styles:i,unstyled:o,vars:s,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=bd(),h=d.getStyles("search"),m=VW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return A.jsx(ki,{ref:Ws(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...m,...f,__staticSelector:"Combobox"})});KW.classes=pc;KW.displayName="@mantine/core/ComboboxSearch";const pBe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Nye=Rt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:o,withExpandedAttribute:s,targetType:a,autoComplete:u,...l}=ot("ComboboxTarget",pBe,e);if(!K1(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=bd(),f=VW({targetType:a,withAriaAttributes:o,withKeyboardNavigation:i,withExpandedAttribute:s,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=F.cloneElement(n,{...f,...l});return A.jsx(Xa.Target,{ref:Ws(t,c.store.targetRef),children:d})});Nye.displayName="@mantine/core/ComboboxTarget";function mBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function gBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function yBe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function XW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:o=!0,scrollBehavior:s="instant"}={}){const[a,u]=ya({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=F.useRef(null),c=F.useRef(-1),f=F.useRef(null),d=F.useRef(null),h=F.useRef(-1),m=F.useRef(-1),p=F.useRef(-1),g=F.useCallback((W="unknown")=>{a||(u(!0),i==null||i(W))},[u,i,a]),v=F.useCallback((W="unknown")=>{a&&(u(!1),r==null||r(W))},[u,r,a]),b=F.useCallback((W="unknown")=>{a?v(W):g(W)},[v,g,a]),w=F.useCallback(()=>{const W=document.querySelector(`#${l.current} [data-combobox-selected]`);W==null||W.removeAttribute("data-combobox-selected"),W==null||W.removeAttribute("aria-selected")},[]),E=F.useCallback(W=>{const te=document.getElementById(l.current),Z=te==null?void 0:te.querySelectorAll("[data-combobox-option]");if(!Z)return null;const re=W>=Z.length?0:W<0?Z.length-1:W;return c.current=re,Z!=null&&Z[re]&&!Z[re].hasAttribute("data-combobox-disabled")?(w(),Z[re].setAttribute("data-combobox-selected","true"),Z[re].setAttribute("aria-selected","true"),Z[re].scrollIntoView({block:"nearest",behavior:s}),Z[re].id):null},[s,w]),T=F.useCallback(()=>{const W=document.querySelector(`#${l.current} [data-combobox-active]`);if(W){const te=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=Array.from(te).findIndex(re=>re===W);return E(Z)}return E(0)},[E]),C=F.useCallback(()=>E(gBe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),o)),[E,o]),S=F.useCallback(()=>E(mBe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),o)),[E,o]),I=F.useCallback(()=>E(yBe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),R=F.useCallback((W="selected",te)=>{p.current=window.setTimeout(()=>{var q;const Z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),re=Array.from(Z).findIndex(U=>U.hasAttribute(`data-combobox-${W}`));c.current=re,te!=null&&te.scrollIntoView&&((q=Z[re])==null||q.scrollIntoView({block:"nearest",behavior:s}))},0)},[]),P=F.useCallback(()=>{c.current=-1,w()},[w]),M=F.useCallback(()=>{const W=document.querySelectorAll(`#${l.current} [data-combobox-option]`),te=W==null?void 0:W[c.current];te==null||te.click()},[]),B=F.useCallback(W=>{l.current=W},[]),L=F.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),z=F.useCallback(()=>{m.current=window.setTimeout(()=>d.current.focus(),0)},[]),G=F.useCallback(()=>c.current,[]);return F.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(m.current),window.clearTimeout(p.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:v,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:G,selectOption:E,selectFirstOption:I,selectActiveOption:T,selectNextOption:C,selectPreviousOption:S,resetSelectedOption:P,updateSelectedOptionIndex:R,listId:l.current,setListId:B,clickSelectedOption:M,searchRef:f,focusSearchInput:L,targetRef:d,focusTarget:z}}const vBe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},bBe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Ka(t),"--combobox-option-padding":Zn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:et(n),"--combobox-option-fz":Ka(t),"--combobox-option-padding":Zn(t,"combobox-option-padding")}});function Or(e){const t=ot("Combobox",vBe,e),{classNames:n,styles:r,unstyled:i,children:o,store:s,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:m,...p}=t,g=XW(),v=s||g,b=nn({name:h||"Combobox",classes:pc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:bBe}),w=()=>{l==null||l(),v.closeDropdown()};return A.jsx(rBe,{value:{getStyles:b,store:v,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:m},children:A.jsx(Xa,{opened:v.dropdownOpened,...p,onChange:E=>!E&&w(),withRoles:!1,unstyled:i,children:o})})}const xBe=e=>e;Or.extend=xBe;Or.classes=pc;Or.displayName="@mantine/core/Combobox";Or.Target=Nye;Or.Dropdown=zW;Or.Options=YW;Or.Option=GW;Or.Search=KW;Or.Empty=UW;Or.Chevron=jW;Or.Footer=HW;Or.Header=WW;Or.EventsTarget=Iye;Or.DropdownTarget=kye;Or.Group=qW;Or.ClearButton=Dye;Or.HiddenInput=Rye;var Pye={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Oye=Pye,d5=F.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:o,children:s,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:m="div",labelElement:p="label",variant:g,style:v,vars:b,mod:w,...E},T)=>{const C=nn({name:e,props:t,className:n,style:v,classes:Pye,classNames:r,styles:i,unstyled:o});return A.jsx(Ue,{...C("root"),ref:T,__vars:{"--label-fz":Ka(d),"--label-lh":Zn(d,"label-lh")},mod:[{"label-position":h},w],variant:g,size:d,...E,children:A.jsxs(Ue,{component:m,htmlFor:m==="label"?l:void 0,...C("body"),children:[s,A.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&A.jsx(Ue,{component:p,htmlFor:p==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&A.jsx(ki.Description,{size:d,__inheritStyles:!1,...C("description"),children:u}),f&&typeof f!="boolean"&&A.jsx(ki.Error,{size:d,__inheritStyles:!1,...C("error"),children:f})]})]})})});d5.displayName="@mantine/core/InlineInput";const Fye=F.createContext(null),wBe=Fye.Provider,Mye=()=>F.useContext(Fye),[_Be,EBe]=X1();var $ye={card:"m_26775b0a"};const TBe={withBorder:!0},CBe=(e,{radius:t})=>({card:{"--card-radius":wi(t)}}),QW=Rt((e,t)=>{const n=ot("CheckboxCard",TBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:m,onChange:p,...g}=n,v=nn({name:"CheckboxCard",classes:$ye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:CBe,rootSelector:"card"}),b=Mye(),w=typeof l=="boolean"?l:b?b.value.includes(d||""):void 0,[E,T]=ya({value:w,defaultValue:m,finalValue:!1,onChange:p});return A.jsx(_Be,{value:{checked:E},children:A.jsx(gf,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"checkbox","aria-checked":E,onClick:C=>{h==null||h(C),b==null||b.onChange(d||""),T(!E)}})})});QW.displayName="@mantine/core/CheckboxCard";QW.classes=$ye;function JW({children:e,role:t}){const n=RT();return n?A.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):A.jsx(A.Fragment,{children:e})}const SBe={},ZW=Rt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,readOnly:u,...l}=ot("CheckboxGroup",SBe,e),[c,f]=ya({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const m=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(m)?c.filter(p=>p!==m):[...c,m])};return A.jsx(wBe,{value:{value:c,onChange:d,size:o},children:A.jsx(ki.Wrapper,{size:o,ref:t,...s,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:A.jsx(JW,{role:"group",children:a})})})});ZW.classes=ki.Wrapper.classes;ZW.displayName="@mantine/core/CheckboxGroup";function Lye({size:e,style:t,...n}){const r=e!==void 0?{width:et(e),height:et(e),...t}:t;return A.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:A.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Bye({indeterminate:e,...t}){return e?A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:A.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):A.jsx(Lye,{...t})}var jye={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const ABe={icon:Bye},DBe=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=wm({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Zn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:wi(t),"--checkbox-color":o==="outline"?u:qi(n,e),"--checkbox-icon-color":i?qi(i,e):CT(s,e)?Yx({color:n,theme:e,autoContrast:s}):void 0}}},eG=Rt((e,t)=>{const n=ot("CheckboxIndicator",ABe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:m,checked:p,mod:g,variant:v,disabled:b,...w}=n,E=l,T=nn({name:"CheckboxIndicator",classes:jye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:DBe,rootSelector:"indicator"}),C=EBe(),S=typeof p=="boolean"||typeof c=="boolean"?p||c:(C==null?void 0:C.checked)||!1;return A.jsx(Ue,{ref:t,...T("indicator",{variant:v}),variant:v,mod:[{checked:S,disabled:b},g],...w,children:A.jsx(E,{indeterminate:c,...T("icon")})})});eG.displayName="@mantine/core/CheckboxIndicator";eG.classes=jye;var zye={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const kBe={labelPosition:"right",icon:Bye},IBe=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=wm({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Zn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:wi(t),"--checkbox-color":o==="outline"?u:qi(n,e),"--checkbox-icon-color":i?qi(i,e):CT(s,e)?Yx({color:n,theme:e,autoContrast:s}):void 0}}},Ru=Rt((e,t)=>{const n=ot("Checkbox",kBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:m,checked:p,labelPosition:g,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:C,rootRef:S,iconColor:I,onChange:R,autoContrast:P,mod:M,...B}=n,L=Mye(),z=d||(L==null?void 0:L.size),G=C,W=nn({name:"Checkbox",props:n,classes:zye,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:IBe}),{styleProps:te,rest:Z}=Qx(B),re=Cl(f),q=L?{checked:L.value.includes(Z.value),onChange:U=>{L.onChange(U),R==null||R(U)}}:{};return A.jsx(d5,{...W("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:re,size:z,labelPosition:g,label:c,description:v,error:b,disabled:w,classNames:r,styles:s,unstyled:a,"data-checked":q.checked||p||void 0,variant:E,ref:S,mod:M,...te,...m,children:A.jsxs(Ue,{...W("inner"),mod:{"data-label-position":g},children:[A.jsx(Ue,{component:"input",id:re,ref:t,checked:p,disabled:w,mod:{error:!!b,indeterminate:T},...W("input",{focusable:!0,variant:E}),onChange:R,...Z,...q,type:"checkbox"}),A.jsx(G,{indeterminate:T,...W("icon")})]})})});Ru.classes={...zye,...Oye};Ru.displayName="@mantine/core/Checkbox";Ru.Group=ZW;Ru.Indicator=eG;Ru.Card=QW;function C2(e){return"group"in e}function Uye({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let o=0;o<e.length;o+=1){const s=e[o];if(i.length===n)return i;C2(s)&&i.push({group:s.group,items:Uye({options:s.items,search:t,limit:n-i.length})}),C2(s)||s.label.toLowerCase().includes(r)&&i.push(s)}return i}function RBe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Vye(e,t=new Set){if(Array.isArray(e))for(const n of e)if(C2(n))Vye(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function NBe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Hye({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:o}){if(!C2(e)){const a=NBe(n,e.value),u=t&&a&&A.jsx(Lye,{className:pc.optionsDropdownCheckIcon}),l=A.jsxs(A.Fragment,{children:[r==="left"&&u,A.jsx("span",{children:e.label}),r==="right"&&u]});return A.jsx(Or.Option,{value:e.value,disabled:e.disabled,className:ls({[pc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof o=="function"?o({option:e,checked:a}):l})}const s=e.items.map(a=>A.jsx(Hye,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:o},a.value));return A.jsx(Or.Group,{label:e.group,children:s})}function qye({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:o,maxDropdownHeight:s,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:m,renderOption:p,scrollAreaProps:g,"aria-label":v}){Vye(e);const w=typeof i=="string"?(r||Uye)({options:e,search:u?i:"",limit:o??1/0}):e,E=RBe(w),T=w.map(C=>A.jsx(Hye,{data:C,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:p},C2(C)?C.group:C.value));return A.jsx(Or.Dropdown,{hidden:t||n&&E,children:A.jsxs(Or.Options,{labelledBy:m,"aria-label":v,children:[a?A.jsx(ag.Autosize,{mah:s??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:T}):T,E&&d&&A.jsx(Or.Empty,{children:d})]})})}var Wye={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const PBe={},OBe=(e,{radius:t,color:n,gradient:r,variant:i,size:o,autoContrast:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{root:{"--badge-height":Zn(o,"badge-height"),"--badge-padding-x":Zn(o,"badge-padding-x"),"--badge-fz":Zn(o,"badge-fz"),"--badge-radius":t===void 0?void 0:wi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?qi(n,e):void 0}}},yh=Ds((e,t)=>{const n=ot("Badge",PBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:m,variant:p,fullWidth:g,autoContrast:v,circle:b,mod:w,...E}=n,T=nn({name:"Badge",props:n,classes:Wye,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:OBe});return A.jsxs(Ue,{variant:p,mod:[{block:g,circle:b,"with-right-section":!!h,"with-left-section":!!d},w],...T("root",{variant:p}),ref:t,...E,children:[d&&A.jsx("span",{...T("section"),"data-position":"left",children:d}),A.jsx("span",{...T("label"),children:m}),h&&A.jsx("span",{...T("section"),"data-position":"right",children:h})]})});yh.classes=Wye;yh.displayName="@mantine/core/Badge";var OT={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const lre={orientation:"horizontal"},FBe=(e,{borderWidth:t})=>({group:{"--button-border-width":et(t)}}),tG=Rt((e,t)=>{const n=ot("ButtonGroup",lre,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=ot("ButtonGroup",lre,e),m=nn({name:"ButtonGroup",props:n,classes:OT,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:l,varsResolver:FBe,rootSelector:"group"});return A.jsx(Ue,{...m("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});tG.classes=OT;tG.displayName="@mantine/core/ButtonGroup";const cre={},MBe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:o,size:s})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{groupSection:{"--section-height":Zn(s,"section-height"),"--section-padding-x":Zn(s,"section-padding-x"),"--section-fz":s!=null&&s.includes("compact")?Ka(s.replace("compact-","")):Ka(s),"--section-radius":t===void 0?void 0:wi(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},nG=Rt((e,t)=>{const n=ot("ButtonGroupSection",cre,e),{className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=ot("ButtonGroupSection",cre,e),m=nn({name:"ButtonGroupSection",props:n,classes:OT,className:r,style:i,classNames:o,styles:s,unstyled:a,vars:u,varsResolver:MBe,rootSelector:"groupSection"});return A.jsx(Ue,{...m("groupSection"),ref:t,variant:l,...h})});nG.classes=OT;nG.displayName="@mantine/core/ButtonGroupSection";const $Be={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${et(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},LBe={},BBe=(e,{radius:t,color:n,gradient:r,variant:i,size:o,justify:s,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":Zn(o,"button-height"),"--button-padding-x":Zn(o,"button-padding-x"),"--button-fz":o!=null&&o.includes("compact")?Ka(o.replace("compact-","")):Ka(o),"--button-radius":t===void 0?void 0:wi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},wn=Ds((e,t)=>{const n=ot("Button",LBe,e),{style:r,vars:i,className:o,color:s,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:m,loaderProps:p,gradient:g,classNames:v,styles:b,unstyled:w,"data-disabled":E,autoContrast:T,mod:C,...S}=n,I=nn({name:"Button",props:n,classes:OT,className:o,style:r,classNames:v,styles:b,unstyled:w,vars:i,varsResolver:BBe}),R=!!l,P=!!c;return A.jsxs(gf,{ref:t,...I("root",{active:!a&&!m&&!E}),unstyled:w,variant:d,disabled:a||m,mod:[{disabled:a||E,loading:m,block:f,"with-left-section":R,"with-right-section":P},C],...S,children:[A.jsx(_m,{mounted:!!m,transition:$Be,duration:150,children:M=>A.jsx(Ue,{component:"span",...I("loader",{style:M}),"aria-hidden":!0,children:A.jsx(Em,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...p})})}),A.jsxs("span",{...I("inner"),children:[l&&A.jsx(Ue,{component:"span",...I("section"),mod:{position:"left"},children:l}),A.jsx(Ue,{component:"span",mod:{loading:m},...I("label"),children:u}),c&&A.jsx(Ue,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});wn.classes=OT;wn.displayName="@mantine/core/Button";wn.Group=tG;wn.GroupSection=nG;const[jBe,zBe]=nu("Card component was not found in tree");var rG={root:"m_e615b15f",section:"m_599a2148"};const UBe={},h5=Ds((e,t)=>{const n=ot("CardSection",UBe,e),{classNames:r,className:i,style:o,styles:s,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=zBe();return A.jsx(Ue,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:o,styles:s,classNames:r}),...f})});h5.classes=rG;h5.displayName="@mantine/core/CardSection";const VBe={},HBe=(e,{padding:t})=>({root:{"--card-padding":Cs(t)}}),FT=Ds((e,t)=>{const n=ot("Card",VBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=nn({name:"Card",props:n,classes:rG,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:HBe}),h=F.Children.toArray(l),m=h.map((p,g)=>typeof p=="object"&&p&&"type"in p&&p.type===h5?F.cloneElement(p,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):p);return A.jsx(jBe,{value:{getStyles:d},children:A.jsx(ST,{ref:t,unstyled:a,...d("root"),...f,children:m})})});FT.classes=rG;FT.displayName="@mantine/core/Card";FT.Section=h5;var Gye={root:"m_4451eb3a"};const qBe={},xi=Ds((e,t)=>{const n=ot("Center",qBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=nn({name:"Center",props:n,classes:Gye,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u});return A.jsx(Ue,{ref:t,mod:[{inline:l},c],...d("root"),...f})});xi.classes=Gye;xi.displayName="@mantine/core/Center";var Yye={root:"m_b183c0a2"};const WBe={},GBe=(e,{color:t})=>({root:{"--code-bg":t?qi(t,e):void 0}}),_D=Rt((e,t)=>{const n=ot("Code",WBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,m=nn({name:"Code",props:n,classes:Yye,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:GBe});return A.jsx(Ue,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...m("root"),...h,dir:"ltr"})});_D.classes=Yye;_D.displayName="@mantine/core/Code";var Kye={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const fre={withShadow:!0},YBe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:wi(t),"--cs-size":et(n)}}),iG=Ds((e,t)=>{const n=ot("ColorSwatch",fre,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:m,...p}=ot("ColorSwatch",fre,n),g=nn({name:"ColorSwatch",props:n,classes:Kye,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:YBe});return A.jsxs(Ue,{ref:t,variant:m,size:c,...g("root",{focusable:!0}),...p,children:[A.jsx("span",{...g("alphaOverlay")}),d&&A.jsx("span",{...g("shadowOverlay")}),A.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),A.jsx("span",{...g("childrenOverlay"),children:h})]})});iG.classes=Kye;iG.displayName="@mantine/core/ColorSwatch";var Xye={root:"m_7485cace"};const KBe={},XBe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Zn(t,"container-size")}}),lg=Rt((e,t)=>{const n=ot("Container",KBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=nn({name:"Container",classes:Xye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:XBe});return A.jsx(Ue,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});lg.classes=Xye;lg.displayName="@mantine/core/Container";var Qye={root:"m_3eebeb36",label:"m_9e365f20"};const QBe={orientation:"horizontal"},JBe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?qi(t,e):void 0,"--divider-border-style":n,"--divider-size":Zn(r,"divider-size")}}),Zx=Rt((e,t)=>{const n=ot("Divider",QBe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...m}=n,p=nn({name:"Divider",classes:Qye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:JBe});return A.jsx(Ue,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...p("root"),...m,role:"separator",children:f&&A.jsx(Ue,{component:"span",mod:{position:d},...p("label"),children:f})})});Zx.classes=Qye;Zx.displayName="@mantine/core/Divider";function ZBe({open:e,close:t,openDelay:n,closeDelay:r}){const i=F.useRef(-1),o=F.useRef(-1),s=()=>{window.clearTimeout(i.current),window.clearTimeout(o.current)},a=()=>{s(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{s(),r===0||r===void 0?t():o.current=window.setTimeout(t,r)};return F.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:u}}const[dre,Jye]=nu("Grid component was not found in tree"),$z=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,hre=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":$z(e,t),pre=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},mre=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function e7e({span:e,order:t,offset:n,selector:r}){var h;const i=As(),o=Jye(),s=o.breakpoints||i.breakpoints,u=ch(e)===void 0?12:ch(e),l=Y1({"--col-order":(h=ch(t))==null?void 0:h.toString(),"--col-flex-grow":pre(u,o.grow),"--col-flex-basis":$z(u,o.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":hre(u,o.columns,o.grow),"--col-offset":mre(ch(n),o.columns)}),c=Li(s).reduce((m,p)=>{var g;return m[p]||(m[p]={}),typeof t=="object"&&t[p]!==void 0&&(m[p]["--col-order"]=(g=t[p])==null?void 0:g.toString()),typeof e=="object"&&e[p]!==void 0&&(m[p]["--col-flex-grow"]=pre(e[p],o.grow),m[p]["--col-flex-basis"]=$z(e[p],o.columns),m[p]["--col-width"]=e[p]==="content"?"auto":void 0,m[p]["--col-max-width"]=hre(e[p],o.columns,o.grow)),typeof n=="object"&&n[p]!==void 0&&(m[p]["--col-offset"]=mre(n[p],o.columns)),m},{}),d=nk(Li(c),s).filter(m=>Li(c[m.value]).length>0).map(m=>({query:o.type==="container"?`mantine-grid (min-width: ${s[m.value]})`:`(min-width: ${s[m.value]})`,styles:c[m.value]}));return A.jsx(Xx,{styles:l,media:o.type==="container"?void 0:d,container:o.type==="container"?d:void 0,selector:r})}var oG={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const t7e={span:12},sG=Rt((e,t)=>{const n=ot("GridCol",t7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,span:u,order:l,offset:c,...f}=n,d=Jye(),h=gI();return A.jsxs(A.Fragment,{children:[A.jsx(e7e,{selector:`.${h}`,span:u,order:l,offset:c}),A.jsx(Ue,{ref:t,...d.getStyles("col",{className:ls(i,h),style:o,classNames:r,styles:s}),...f})]})});sG.classes=oG;sG.displayName="@mantine/core/GridCol";function gre({gutter:e,selector:t,breakpoints:n,type:r}){const i=As(),o=n||i.breakpoints,s=Y1({"--grid-gutter":Cs(ch(e))}),a=Li(o).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=Cs(e[f])),c),{}),l=nk(Li(a),o).filter(c=>Li(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${o[c.value]})`:`(min-width: ${o[c.value]})`,styles:a[c.value]}));return A.jsx(Xx,{styles:s,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const n7e={gutter:"md",grow:!1,columns:12},r7e=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Mp=Rt((e,t)=>{const n=ot("Grid",n7e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:m,breakpoints:p,type:g,...v}=n,b=nn({name:"Grid",classes:oG,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:r7e}),w=gI();return g==="container"&&p?A.jsxs(dre,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:p,type:g},children:[A.jsx(gre,{selector:`.${w}`,...n}),A.jsx("div",{...b("container"),children:A.jsx(Ue,{ref:t,...b("root",{className:w}),...v,children:A.jsx("div",{...b("inner"),children:m})})})]}):A.jsxs(dre,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:p,type:g},children:[A.jsx(gre,{selector:`.${w}`,...n}),A.jsx(Ue,{ref:t,...b("root",{className:w}),...v,children:A.jsx("div",{...b("inner"),children:m})})]})});Mp.classes=oG;Mp.displayName="@mantine/core/Grid";Mp.Col=sG;var Zye={root:"m_9e117634"};const i7e={},o7e=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:wi(t),"--image-object-fit":n}}),rv=Ds((e,t)=>{const n=ot("Image",i7e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:m,...p}=n,[g,v]=F.useState(!c);F.useEffect(()=>v(!c),[c]);const b=nn({name:"Image",classes:Zye,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:o7e});return g&&h?A.jsx(Ue,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",m],...p}):A.jsx(Ue,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),v(!0)},mod:m,...p})});rv.classes=Zye;rv.displayName="@mantine/core/Image";function Lz(){return Lz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lz.apply(null,arguments)}function s7e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var a7e=F.useLayoutEffect,u7e=function(t){var n=F.useRef(t);return a7e(function(){n.current=t}),n},yre=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},l7e=function(t,n){var r=F.useRef();return F.useCallback(function(i){t.current=i,r.current&&yre(r.current,null),r.current=n,n&&yre(n,i)},[n])},vre={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},c7e=function(t){Object.keys(vre).forEach(function(n){t.style.setProperty(n,vre[n],"important")})},bre=c7e,il=null,xre=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function f7e(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),il||(il=document.createElement("textarea"),il.setAttribute("tabindex","-1"),il.setAttribute("aria-hidden","true"),bre(il)),il.parentNode===null&&document.body.appendChild(il);var i=e.paddingSize,o=e.borderSize,s=e.sizingStyle,a=s.boxSizing;Object.keys(s).forEach(function(d){var h=d;il.style[h]=s[h]}),bre(il),il.value=t;var u=xre(il,e);il.value=t,u=xre(il,e),il.value="x";var l=il.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+o),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+o),u=Math.min(f,u),[u,l]}var wre=function(){},d7e=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},h7e=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],p7e=!!document.documentElement.currentStyle,m7e=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=d7e(h7e,n),i=r.boxSizing;if(i==="")return null;p7e&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var o=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:o,borderSize:s}},g7e=m7e;function e1e(e,t,n){var r=u7e(n);F.useLayoutEffect(function(){var i=function(s){return r.current(s)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var y7e=function(t){e1e(window,"resize",t)},v7e=function(t){e1e(document.fonts,"loadingdone",t)},b7e=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],x7e=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,o=t.minRows,s=t.onChange,a=s===void 0?wre:s,u=t.onHeightChange,l=u===void 0?wre:u,c=s7e(t,b7e),f=c.value!==void 0,d=F.useRef(null),h=l7e(d,n),m=F.useRef(0),p=F.useRef(),g=function(){var w=d.current,E=r&&p.current?p.current:g7e(w);if(E){p.current=E;var T=f7e(E,w.value||w.placeholder||"x",o,i),C=T[0],S=T[1];m.current!==C&&(m.current=C,w.style.setProperty("height",C+"px","important"),l(C,{rowHeight:S}))}},v=function(w){f||g(),a(w)};return F.useLayoutEffect(g),y7e(g),v7e(g),F.createElement("textarea",Lz({},c,{onChange:v,ref:h}))},w7e=F.forwardRef(x7e);const _7e={},aG=Rt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:o,resize:s,...a}=ot("Textarea",_7e,e),u=n&&S5e()!=="test",l=u?{maxRows:r,minRows:i}:{};return A.jsx(vd,{component:u?w7e:"textarea",ref:t,...a,__staticSelector:o||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":s},...l})});aG.classes=vd.classes;aG.displayName="@mantine/core/Textarea";const[E7e,T7e]=nu("List component was not found in tree");var uG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const C7e={},lG=Rt((e,t)=>{const n=ot("ListItem",C7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,icon:u,children:l,mod:c,...f}=n,d=T7e(),h=u||d.icon,m={classNames:r,styles:s};return A.jsx(Ue,{...d.getStyles("item",{...m,className:i,style:o}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:A.jsxs("div",{...d.getStyles("itemWrapper",m),children:[h&&A.jsx("span",{...d.getStyles("itemIcon",m),children:h}),A.jsx("span",{...d.getStyles("itemLabel",m),children:l})]})})});lG.classes=uG;lG.displayName="@mantine/core/ListItem";const S7e={type:"unordered"},A7e=(e,{size:t,spacing:n})=>({root:{"--list-fz":Ka(t),"--list-lh":Z0e(t),"--list-spacing":Cs(n)}}),vh=Rt((e,t)=>{const n=ot("List",S7e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:m,listStyleType:p,mod:g,...v}=n,b=nn({name:"List",classes:uG,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:A7e});return A.jsx(E7e,{value:{center:m,icon:d,getStyles:b},children:A.jsx(Ue,{...b("root",{style:{listStyleType:p}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...v,children:l})})});vh.classes=uG;vh.displayName="@mantine/core/List";vh.Item=lG;var t1e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const _re={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Ec("overlay")},D7e=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),yf=Rt((e,t)=>{const n=ot("LoadingOverlay",_re,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...m}=n,p=As(),g=nn({name:"LoadingOverlay",classes:t1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:D7e}),v={..._re.overlayProps,...f};return A.jsx(_m,{transition:"fade",...l,mounted:!!d,children:b=>A.jsxs(Ue,{...g("root",{style:b}),ref:t,...m,children:[A.jsx(Em,{...g("loader"),unstyled:a,...c}),A.jsx(E2,{...v,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||p.white}),A.jsx(E2,{...v,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||p.colors.dark[5]})]})})});yf.classes=t1e;yf.displayName="@mantine/core/LoadingOverlay";const[k7e,_I]=nu("Menu component was not found in the tree");var MT={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const I7e={},cG=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ot("MenuDivider",I7e,e),u=_I();return A.jsx(Ue,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:o,classNames:n}),...a})});cG.classes=MT;cG.displayName="@mantine/core/MenuDivider";const R7e={},fG=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=ot("MenuDropdown",R7e,e),d=F.useRef(null),h=_I(),m=Fp(l,v=>{var b,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(b=d.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),p=Fp(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=Fp(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return A.jsxs(Xa.Dropdown,{...f,onMouseEnter:p,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:Ws(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:o,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[A.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});fG.classes=MT;fG.displayName="@mantine/core/MenuDropdown";const N7e={},dG=Ds((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=ot("MenuItem",N7e,e),m=_I(),p=As(),{dir:g}=J1(),v=F.useRef(null),b=m.getItemIndex(v.current),w=h,E=Fp(w.onMouseLeave,()=>m.setHovered(-1)),T=Fp(w.onMouseEnter,()=>m.setHovered(m.getItemIndex(v.current))),C=Fp(w.onClick,()=>{typeof u=="boolean"?u&&m.closeDropdownImmediately():m.closeOnItemClick&&m.closeDropdownImmediately()}),S=Fp(w.onFocus,()=>m.setHovered(m.getItemIndex(v.current))),I=a?p.variantColorResolver({color:a,theme:p,variant:"light"}):void 0,R=a?wm({color:a,theme:p}):null;return A.jsxs(gf,{...h,unstyled:m.unstyled,tabIndex:m.menuItemTabIndex,onFocus:S,...m.getStyles("item",{className:r,style:i,styles:o,classNames:n}),ref:Ws(v,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":m.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:T,onMouseLeave:E,onClick:C,onKeyDown:Gq({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:m.loop,dir:g,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":R!=null&&R.isThemeColor&&(R==null?void 0:R.shade)===void 0?`var(--mantine-color-${R.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&A.jsx("div",{...m.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"left",children:l}),f&&A.jsx("div",{...m.getStyles("itemLabel",{styles:o,classNames:n}),children:f}),c&&A.jsx("div",{...m.getStyles("itemSection",{styles:o,classNames:n}),"data-position":"right",children:c})]})});dG.classes=MT;dG.displayName="@mantine/core/MenuItem";const P7e={},hG=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ot("MenuLabel",P7e,e),u=_I();return A.jsx(Ue,{ref:t,...u.getStyles("label",{className:r,style:i,styles:o,classNames:n}),...a})});hG.classes=MT;hG.displayName="@mantine/core/MenuLabel";const O7e={refProp:"ref"},n1e=F.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=ot("MenuTarget",O7e,e);if(!K1(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=_I(),s=n.props,a=Fp(s.onClick,()=>{o.trigger==="click"?o.toggleDropdown():o.trigger==="click-hover"&&(o.setOpenedViaClick(!0),o.opened||o.openDropdown())}),u=Fp(s.onMouseEnter,()=>(o.trigger==="hover"||o.trigger==="click-hover")&&o.openDropdown()),l=Fp(s.onMouseLeave,()=>{(o.trigger==="hover"||o.trigger==="click-hover"&&!o.openedViaClick)&&o.closeDropdown()});return A.jsx(Xa.Target,{refProp:r,popupType:"menu",ref:t,...i,children:F.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0})})});n1e.displayName="@mantine/core/MenuTarget";const F7e={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function cl(e){const t=ot("Menu",F7e,e),{children:n,onOpen:r,onClose:i,opened:o,defaultOpened:s,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:m,classNames:p,styles:g,unstyled:v,variant:b,vars:w,menuItemTabIndex:E,keepMounted:T,...C}=t,S=nn({name:"Menu",classes:MT,props:t,classNames:p,styles:g,unstyled:v}),[I,{setHovered:R,resetHovered:P}]=t5e(),[M,B]=ya({value:o,defaultValue:s,finalValue:!1,onChange:u}),[L,z]=F.useState(!1),G=()=>{B(!1),z(!1),M&&(i==null||i())},W=()=>{B(!0),!M&&(r==null||r())},te=()=>{M?G():W()},{openDropdown:Z,closeDropdown:re}=ZBe({open:W,close:G,closeDelay:m,openDelay:h}),q=H=>e5e("[data-menu-item]","[data-menu-dropdown]",H),{resolvedClassNames:U,resolvedStyles:Y}=Kx({classNames:p,styles:g,props:t});return nm(()=>{P()},[M]),A.jsx(k7e,{value:{getStyles:S,opened:M,toggleDropdown:te,getItemIndex:q,hovered:I,setHovered:R,openedViaClick:L,setOpenedViaClick:z,closeOnItemClick:l,closeDropdown:d==="click"?G:re,openDropdown:d==="click"?W:Z,closeDropdownImmediately:G,loop:c,trigger:d,unstyled:v,menuItemTabIndex:E},children:A.jsx(Xa,{...C,opened:M,onChange:te,defaultOpened:s,trapFocus:T?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:Y,unstyled:v,variant:b,keepMounted:T,children:n})})}cl.extend=e=>e;cl.classes=MT;cl.displayName="@mantine/core/Menu";cl.Item=dG;cl.Label=hG;cl.Dropdown=fG;cl.Target=n1e;cl.Divider=cG;const[M7e,$T]=nu("Modal component was not found in tree");var Dg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const $7e={},p5=Rt((e,t)=>{const n=ot("ModalBody",$7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=$T();return A.jsx(hye,{ref:t,...l.getStyles("body",{classNames:r,style:o,styles:s,className:i}),...u})});p5.classes=Dg;p5.displayName="@mantine/core/ModalBody";const L7e={},m5=Rt((e,t)=>{const n=ot("ModalCloseButton",L7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=$T();return A.jsx(pye,{ref:t,...l.getStyles("close",{classNames:r,style:o,styles:s,className:i}),...u})});m5.classes=Dg;m5.displayName="@mantine/core/ModalCloseButton";const B7e={},g5=Rt((e,t)=>{const n=ot("ModalContent",B7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,children:u,__hidden:l,...c}=n,f=$T(),d=f.scrollAreaComponent||i9e;return A.jsx(mye,{...f.getStyles("content",{className:i,style:o,styles:s,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:o,styles:s,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:A.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${et(f.yOffset)} * 2))`},children:u})})});g5.classes=Dg;g5.displayName="@mantine/core/ModalContent";const j7e={},y5=Rt((e,t)=>{const n=ot("ModalHeader",j7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=$T();return A.jsx(gye,{ref:t,...l.getStyles("header",{classNames:r,style:o,styles:s,className:i}),...u})});y5.classes=Dg;y5.displayName="@mantine/core/ModalHeader";const z7e={},v5=Rt((e,t)=>{const n=ot("ModalOverlay",z7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=$T();return A.jsx(yye,{ref:t,...l.getStyles("overlay",{classNames:r,style:o,styles:s,className:i}),...u})});v5.classes=Dg;v5.displayName="@mantine/core/ModalOverlay";const U7e={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},V7e=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:wi(t),"--modal-size":Zn(n,"modal-size"),"--modal-y-offset":et(r),"--modal-x-offset":et(i)}}),b5=Rt((e,t)=>{const n=ot("ModalRoot",U7e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:m,__staticSelector:p,...g}=n,v=nn({name:p,classes:Dg,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:V7e});return A.jsx(M7e,{value:{yOffset:l,scrollAreaComponent:c,getStyles:v,fullScreen:d},children:A.jsx(dye,{ref:t,...v("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});b5.classes=Dg;b5.displayName="@mantine/core/ModalRoot";const[H7e,q7e]=X1();function r1e({children:e}){const[t,n]=F.useState([]),[r,i]=F.useState(Ec("modal"));return A.jsx(H7e,{value:{stack:t,addModal:(o,s)=>{n(a=>[...new Set([...a,o])]),i(a=>typeof s=="number"&&typeof a=="number"?Math.max(a,s):a)},removeModal:o=>n(s=>s.filter(a=>a!==o)),getZIndex:o=>`calc(${r} + ${t.indexOf(o)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}r1e.displayName="@mantine/core/ModalStack";const W7e={},x5=Rt((e,t)=>{const n=ot("ModalTitle",W7e,e),{classNames:r,className:i,style:o,styles:s,vars:a,...u}=n,l=$T();return A.jsx(vye,{ref:t,...l.getStyles("title",{classNames:r,style:o,styles:s,className:i}),...u})});x5.classes=Dg;x5.displayName="@mantine/core/ModalTitle";const G7e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Co=Rt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:o,closeButtonProps:s,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=ot("Modal",G7e,e),h=q7e(),m=!!n||o,p=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:l;return F.useEffect(()=>{h&&c&&(l?h.addModal(c,f||Ec("modal")):h.removeModal(c))},[l,c,f]),A.jsxs(b5,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...p,children:[r&&A.jsx(v5,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),A.jsxs(g5,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[m&&A.jsxs(y5,{children:[n&&A.jsx(x5,{children:n}),o&&A.jsx(m5,{...s})]}),A.jsx(p5,{children:a})]})]})});Co.classes=Dg;Co.displayName="@mantine/core/Modal";Co.Root=b5;Co.Overlay=v5;Co.Content=g5;Co.Body=p5;Co.Header=y5;Co.Title=x5;Co.CloseButton=m5;Co.Stack=r1e;const[Y7e,pG]=X1(),[K7e,X7e]=X1();var w5={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Q7e={},J7e=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Zn(t):Zn(n,"pg-gap")}}),mG=Rt((e,t)=>{const n=ot("PillGroup",Q7e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=pG(),h=(d==null?void 0:d.size)||l||void 0,m=nn({name:"PillGroup",classes:w5,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:J7e,stylesCtx:{size:h},rootSelector:"group"});return A.jsx(K7e,{value:{size:h,disabled:c},children:A.jsx(Ue,{ref:t,size:h,...m("group"),...f})})});mG.classes=w5;mG.displayName="@mantine/core/PillGroup";const Z7e={variant:"default"},eje=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Zn(n,"pill-fz"),"--pill-height":Zn(n,"pill-height"),"--pill-radius":t===void 0?void 0:wi(t)}}),ok=Rt((e,t)=>{const n=ot("Pill",Z7e,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:m,size:p,disabled:g,mod:v,...b}=n,w=X7e(),E=pG(),T=p||(w==null?void 0:w.size)||void 0,C=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",S=nn({name:"Pill",classes:w5,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:eje,stylesCtx:{size:T}});return A.jsxs(Ue,{component:"span",ref:t,variant:C,size:T,...S("root",{variant:C}),mod:[{"with-remove":f&&!g,disabled:g||(w==null?void 0:w.disabled)},v],...b,children:[A.jsx("span",{...S("label"),children:c}),f&&A.jsx(tv,{variant:"transparent",radius:m,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var R;I.preventDefault(),I.stopPropagation(),(R=h==null?void 0:h.onMouseDown)==null||R.call(h,I)},onClick:I=>{var R;I.stopPropagation(),d==null||d(),(R=h==null?void 0:h.onClick)==null||R.call(h,I)}})]})});ok.classes=w5;ok.displayName="@mantine/core/Pill";ok.Group=mG;var i1e={field:"m_45c4369d"};const tje={type:"visible"},gG=Rt((e,t)=>{const n=ot("PillsInputField",tje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...m}=n,p=pG(),g=RT(),v=nn({name:"PillsInputField",classes:i1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,rootSelector:"field"}),b=c||(p==null?void 0:p.disabled);return A.jsx(Ue,{component:"input",ref:Ws(t,p==null?void 0:p.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...v("field"),...m,id:(g==null?void 0:g.inputId)||f,"aria-invalid":p==null?void 0:p.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:w=>!d&&w.stopPropagation()})});gG.classes=i1e;gG.displayName="@mantine/core/PillsInputField";const nje={},f6=Rt((e,t)=>{const n=ot("PillsInput",nje,e),{children:r,onMouseDown:i,onClick:o,size:s,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=F.useRef(null);return A.jsx(Y7e,{value:{fieldRef:d,size:s,disabled:a,hasError:!!l,variant:c},children:A.jsx(vd,{size:s,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var m;h.preventDefault(),i==null||i(h),(m=d.current)==null||m.focus()},onClick:h=>{var m;h.preventDefault(),o==null||o(h),(m=d.current)==null||m.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});f6.displayName="@mantine/core/PillsInput";f6.Field=gG;function rje({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,o)=>(C2(o)?i.push({group:o.group,items:o.items.filter(s=>n.indexOf(s.value.toLowerCase().trim())===-1)}):n.indexOf(o.value.toLowerCase().trim())===-1&&i.push(o),i),[])}const ije={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},yG=Rt((e,t)=>{const n=ot("MultiSelect",ije,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:m,data:p,dropdownOpened:g,defaultDropdownOpened:v,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:E,onOptionSubmit:T,comboboxProps:C,filter:S,limit:I,withScrollArea:R,maxDropdownHeight:P,searchValue:M,defaultSearchValue:B,onSearchChange:L,readOnly:z,disabled:G,onFocus:W,onBlur:te,onPaste:Z,radius:re,rightSection:q,rightSectionWidth:U,rightSectionPointerEvents:Y,rightSectionProps:H,leftSection:X,leftSectionWidth:ee,leftSectionPointerEvents:le,leftSectionProps:Ee,inputContainer:be,inputWrapperOrder:Ce,withAsterisk:Oe,labelProps:me,descriptionProps:he,errorProps:Fe,wrapperProps:Pe,description:Je,label:ut,error:Ke,maxValues:tt,searchable:pt,nothingFoundMessage:Dt,withCheckIcon:St,checkIconPosition:$t,hidePickedOptions:oe,withErrorStyles:xe,name:Re,form:pe,id:we,clearable:ke,clearButtonProps:Ge,hiddenInputProps:Ve,placeholder:at,hiddenInputValuesDivider:rt,required:ln,mod:xn,renderOption:rn,onRemove:bn,onClear:Hn,scrollAreaProps:$n,...Kr}=n,Lr=Cl(we),Br=Aye(p),mi=BW(Br),Er=XW({opened:g,defaultOpened:v,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),Er.resetSelectedOption()}}),{styleProps:Do,rest:{type:iu,autoComplete:hs,...Ks}}=Qx(Kr),[Tr,li]=ya({value:c,defaultValue:f,finalValue:[],onChange:d}),[Dr,no]=ya({value:M,defaultValue:B,finalValue:"",onChange:L}),vr=nn({name:"MultiSelect",classes:{},props:n,classNames:r,styles:s,unstyled:a}),{resolvedClassNames:gi,resolvedStyles:ko}=Kx({props:n,styles:s,classNames:r}),po=pr=>{h==null||h(pr),pr.key===" "&&!pt&&(pr.preventDefault(),Er.toggleDropdown()),pr.key==="Backspace"&&Dr.length===0&&Tr.length>0&&(bn==null||bn(Tr[Tr.length-1]),li(Tr.slice(0,Tr.length-1)))},Ko=Tr.map((pr,ou)=>{var Ri,ks;return A.jsx(ok,{withRemoveButton:!z&&!((Ri=mi[pr])!=null&&Ri.disabled),onRemove:()=>{li(Tr.filter(Xo=>pr!==Xo)),bn==null||bn(pr)},unstyled:a,disabled:G,...vr("pill"),children:((ks=mi[pr])==null?void 0:ks.label)||pr},`${pr}-${ou}`)});F.useEffect(()=>{E&&Er.selectFirstOption()},[E,Tr]);const Ea=A.jsx(Or.ClearButton,{...Ge,onClear:()=>{Hn==null||Hn(),li([]),no("")}}),Sc=rje({data:Br,value:Tr});return A.jsxs(A.Fragment,{children:[A.jsxs(Or,{store:Er,classNames:gi,styles:ko,unstyled:a,size:l,readOnly:z,__staticSelector:"MultiSelect",onOptionSubmit:pr=>{T==null||T(pr),no(""),Er.updateSelectedOptionIndex("selected"),Tr.includes(mi[pr].value)?(li(Tr.filter(ou=>ou!==mi[pr].value)),bn==null||bn(mi[pr].value)):Tr.length<tt&&li([...Tr,mi[pr].value])},...C,children:[A.jsx(Or.DropdownTarget,{children:A.jsx(f6,{...Do,__staticSelector:"MultiSelect",classNames:gi,styles:ko,unstyled:a,size:l,className:i,style:o,variant:m,disabled:G,radius:re,__defaultRightSection:A.jsx(Or.Chevron,{size:l,error:Ke,unstyled:a}),__clearSection:Ea,__clearable:ke&&Tr.length>0&&!G&&!z,rightSection:q,rightSectionPointerEvents:Y||(Ea?"all":"none"),rightSectionWidth:U,rightSectionProps:H,leftSection:X,leftSectionWidth:ee,leftSectionPointerEvents:le,leftSectionProps:Ee,inputContainer:be,inputWrapperOrder:Ce,withAsterisk:Oe,labelProps:me,descriptionProps:he,errorProps:Fe,wrapperProps:Pe,description:Je,label:ut,error:Ke,multiline:!0,withErrorStyles:xe,__stylesApiProps:{...n,rightSectionPointerEvents:Y||(Ea?"all":"none"),multiline:!0},pointer:!pt,onClick:()=>pt?Er.openDropdown():Er.toggleDropdown(),"data-expanded":Er.dropdownOpened||void 0,id:Lr,required:ln,mod:xn,children:A.jsxs(ok.Group,{disabled:G,unstyled:a,...vr("pillsList"),children:[Ko,A.jsx(Or.EventsTarget,{autoComplete:hs,children:A.jsx(f6.Field,{...Ks,ref:t,id:Lr,placeholder:at,type:!pt&&!at?"hidden":"visible",...vr("inputField"),unstyled:a,onFocus:pr=>{W==null||W(pr),pt&&Er.openDropdown()},onBlur:pr=>{te==null||te(pr),Er.closeDropdown(),no("")},onKeyDown:po,value:Dr,onChange:pr=>{no(pr.currentTarget.value),pt&&Er.openDropdown(),E&&Er.selectFirstOption()},disabled:G,readOnly:z||!pt,pointer:!pt})})]})})}),A.jsx(qye,{data:oe?Sc:Br,hidden:z||G,filter:S,search:Dr,limit:I,hiddenWhenEmpty:!Dt,withScrollArea:R,maxDropdownHeight:P,filterOptions:pt,value:Tr,checkIconPosition:$t,withCheckIcon:St,nothingFoundMessage:Dt,unstyled:a,labelId:ut?`${Lr}-label`:void 0,"aria-label":ut?void 0:Kr["aria-label"],renderOption:rn,scrollAreaProps:$n})]}),A.jsx(Or.HiddenInput,{name:Re,valuesDivider:rt,value:Tr,form:pe,disabled:G,...Ve})]})});yG.classes={...vd.classes,...Or.classes};yG.displayName="@mantine/core/MultiSelect";var o1e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const oje={},sje=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const o=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?o.background:void 0,"--nl-hover":n||t?o.hover:void 0,"--nl-color":n||t?o.color:void 0},children:{"--nl-offset":Cs(r)}}},_5=Ds((e,t)=>{const n=ot("NavLink",oje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:m,disabled:p,leftSection:g,rightSection:v,label:b,description:w,disableRightSectionRotation:E,noWrap:T,childrenOffset:C,onKeyDown:S,autoContrast:I,mod:R,...P}=n,M=nn({name:"NavLink",props:n,classes:o1e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:sje}),[B,L]=ya({value:l,defaultValue:c,finalValue:!1,onChange:f}),z=!!d,G=W=>{h==null||h(W),z&&(W.preventDefault(),L(!B))};return A.jsxs(A.Fragment,{children:[A.jsxs(gf,{...M("root"),component:"a",ref:t,onClick:G,onKeyDown:W=>{S==null||S(W),W.nativeEvent.code==="Space"&&z&&(W.preventDefault(),L(!B))},unstyled:a,mod:[{disabled:p,active:m,expanded:B},R],...P,children:[g&&A.jsx(Ue,{component:"span",...M("section"),mod:{position:"left"},children:g}),A.jsxs(Ue,{...M("body"),mod:{"no-wrap":T},children:[A.jsx(Ue,{component:"span",...M("label"),children:b}),A.jsx(Ue,{component:"span",mod:{active:m},...M("description"),children:w})]}),(z||v)&&A.jsx(Ue,{...M("section"),component:"span",mod:{rotate:B&&!E,position:"right"},children:z?v||A.jsx(f5,{...M("chevron")}):v})]}),z&&A.jsx(n5,{in:B,...M("collapse"),children:A.jsx("div",{...M("children"),children:d})})]})});_5.classes=o1e;_5.displayName="@mantine/core/NavLink";var s1e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const aje={withCloseButton:!0},uje=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:wi(t),"--notification-color":n?qi(n,e):void 0}}),vG=Rt((e,t)=>{const n=ot("Notification",aje,e),{className:r,color:i,radius:o,loading:s,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:m,style:p,styles:g,unstyled:v,variant:b,vars:w,mod:E,...T}=n,C=nn({name:"Notification",classes:s1e,props:n,className:r,style:p,classNames:m,styles:g,unstyled:v,vars:w,varsResolver:uje});return A.jsxs(Ue,{...C("root"),mod:[{"data-with-icon":!!c||s,"data-with-border":u},E],ref:t,variant:b,...T,role:"alert",children:[c&&!s&&A.jsx("div",{...C("icon"),children:c}),s&&A.jsx(Em,{size:28,color:i,...C("loader")}),A.jsxs("div",{...C("body"),children:[l&&A.jsx("div",{...C("title"),children:l}),A.jsx(Ue,{...C("description"),mod:{"data-with-title":!!l},children:f})]}),a&&A.jsx(tv,{iconSize:16,color:"gray",...h,unstyled:v,onClick:d,...C("closeButton")})]})});vG.classes=s1e;vG.displayName="@mantine/core/Notification";function a1e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var sk;(function(e){e.event="event",e.props="prop"})(sk||(sk={}));function zy(){}function lje(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(o,s){return o===t[s]})||(t=r,n=e.apply(void 0,r)),n}}function ak(e){return!!(e||"").match(/\d/)}function XE(e){return e==null}function cje(e){return typeof e=="number"&&isNaN(e)}function u1e(e){return XE(e)||cje(e)||typeof e=="number"&&!isFinite(e)}function l1e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function fje(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function dje(e,t,n){var r=fje(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function hje(e){var t=F.useRef(e);t.current=e;var n=F.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function bG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),o=i[0],s=i[1]||"";return{beforeDecimal:o,afterDecimal:s,hasNegation:n,addNegation:r}}function pje(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function c1e(e,t,n){for(var r="",i=n?"0":"",o=0;o<=t-1;o++)r+=e[o]||i;return r}function Ere(e,t){return Array(t+1).join(e)}function f1e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],o=r[1];if(o=Number(o),!o)return n+i;i=i.replace(".","");var s=1+o,a=i.length;return s<0?i="0."+Ere("0",Math.abs(s))+i:s>=a?i=i+Ere("0",s-a):i=(i.substring(0,s)||"0")+"."+i.substring(s),n+i}function Tre(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=bG(e),o=i.beforeDecimal,s=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(s||"0")),l=s.length<=t?"0."+s:u.toFixed(t),c=l.split("."),f=o;o&&Number(c[0])&&(f=o.split("").reverse().reduce(function(p,g,v){return p.length>v?(Number(p[0])+Number(g)).toString()+p.substring(1,p.length):g+p},c[0]));var d=c1e(c[1]||"",t,n),h=a?"-":"",m=r?".":"";return""+h+f+m+d}function Lb(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var d1e=lje(function(e,t){for(var n=0,r=0,i=e.length,o=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[o-1-r]&&o-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:o-r}}}),mje=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function gje(e,t,n){return Math.min(Math.max(e,t),n)}function Z9(e){return Math.max(e.selectionStart,e.selectionEnd)}function yje(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function vje(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function bje(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function xje(e,t,n,r,i,o,s){s===void 0&&(s=bje);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var m=0,p=c;m<p;m++){var g=s({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:m});if(g&&f[m]!==!0){d[h]=m,f[m]=!0;break}}}for(var v=r;v<l&&(d[v]===-1||!o(n[v]));)v++;var b=v===l||d[v]===-1?c:d[v];for(v=r-1;v>0&&d[v]===-1;)v--;var w=v===-1||d[v]===-1?0:d[v]+1;return w>b?b:r-w<b-r?w:b}function Cre(e,t,n,r){var i=e.length;if(t=gje(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function wje(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(ak(e[n])||ak(e[n-1]));return t}function h1e(e,t,n,r,i,o){o===void 0&&(o=zy);var s=hje(function(m,p){var g,v;return u1e(m)?(v="",g=""):typeof m=="number"||p?(v=typeof m=="number"?f1e(m):m,g=r(v)):(v=i(m,void 0),g=r(v)),{formattedValue:g,numAsString:v}}),a=F.useState(function(){return s(XE(e)?t:e,n)}),u=a[0],l=a[1],c=function(m,p){m.formattedValue!==u.formattedValue&&l({formattedValue:m.formattedValue,numAsString:m.value}),o(m,p)},f=e,d=n;XE(e)&&(f=u.numAsString,d=!0);var h=s(f,d);return F.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function _je(e){return e.replace(/[^0-9]/g,"")}function Eje(e){return e}function Tje(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,o=e.getInputRef,s=e.format;s===void 0&&(s=Eje);var a=e.removeFormatting;a===void 0&&(a=_je);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=zy);var h=e.onKeyDown;h===void 0&&(h=zy);var m=e.onMouseUp;m===void 0&&(m=zy);var p=e.onFocus;p===void 0&&(p=zy);var g=e.onBlur;g===void 0&&(g=zy);var v=e.value,b=e.getCaretBoundary;b===void 0&&(b=wje);var w=e.isValidInputCharacter;w===void 0&&(w=ak);var E=e.isCharacterSame,T=a1e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=h1e(v,u,!!l,s,a,c),S=C[0],I=S.formattedValue,R=S.numAsString,P=C[1],M=F.useRef(),B=F.useRef({formattedValue:I,numAsString:R}),L=function(Ke,tt){B.current={formattedValue:Ke.formattedValue,numAsString:Ke.value},P(Ke,tt)},z=F.useState(!1),G=z[0],W=z[1],te=F.useRef(null),Z=F.useRef({setCaretTimeout:null,focusTimeout:null});F.useEffect(function(){return W(!0),function(){clearTimeout(Z.current.setCaretTimeout),clearTimeout(Z.current.focusTimeout)}},[]);var re=s,q=function(Ke,tt){var pt=parseFloat(tt);return{formattedValue:Ke,value:tt,floatValue:isNaN(pt)?void 0:pt}},U=function(Ke,tt,pt){Ke.selectionStart===0&&Ke.selectionEnd===Ke.value.length||(Lb(Ke,tt),Z.current.setCaretTimeout=setTimeout(function(){Ke.value===pt&&Ke.selectionStart!==tt&&Lb(Ke,tt)},0))},Y=function(Ke,tt,pt){return Cre(Ke,tt,b(Ke),pt)},H=function(Ke,tt,pt){var Dt=b(tt),St=xje(tt,I,Ke,pt,Dt,w,E);return St=Cre(tt,St,Dt),St},X=function(Ke){var tt=Ke.formattedValue;tt===void 0&&(tt="");var pt=Ke.input,Dt=Ke.source,St=Ke.event,$t=Ke.numAsString,oe;if(pt){var xe=Ke.inputValue||pt.value,Re=Z9(pt);pt.value=tt,oe=H(xe,tt,Re),oe!==void 0&&U(pt,oe,tt)}tt!==I&&L(q(tt,$t),{event:St,source:Dt})};F.useEffect(function(){var Ke=B.current,tt=Ke.formattedValue,pt=Ke.numAsString;(I!==tt||R!==pt)&&L(q(I,R),{event:void 0,source:sk.props})},[I,R]);var ee=te.current?Z9(te.current):void 0,le=typeof window<"u"?F.useLayoutEffect:F.useEffect;le(function(){var Ke=te.current;if(I!==B.current.formattedValue&&Ke){var tt=H(B.current.formattedValue,I,ee);Ke.value=I,U(Ke,tt,I)}},[I]);var Ee=function(Ke,tt,pt){var Dt=tt.target,St=M.current?mje(M.current,Dt.selectionEnd):d1e(I,Ke),$t=Object.assign(Object.assign({},St),{lastValue:I}),oe=a(Ke,$t),xe=re(oe);if(oe=a(xe,void 0),f&&!f(q(xe,oe))){var Re=tt.target,pe=Z9(Re),we=H(Ke,I,pe);return Re.value=I,U(Re,we,I),!1}return X({formattedValue:xe,numAsString:oe,inputValue:Ke,event:tt,source:pt,input:tt.target}),!0},be=function(Ke,tt){tt===void 0&&(tt=0);var pt=Ke.selectionStart,Dt=Ke.selectionEnd;M.current={selectionStart:pt,selectionEnd:Dt+tt}},Ce=function(Ke){var tt=Ke.target,pt=tt.value,Dt=Ee(pt,Ke,sk.event);Dt&&d(Ke),M.current=void 0},Oe=function(Ke){var tt=Ke.target,pt=Ke.key,Dt=tt.selectionStart,St=tt.selectionEnd,$t=tt.value;$t===void 0&&($t="");var oe;pt==="ArrowLeft"||pt==="Backspace"?oe=Math.max(Dt-1,0):pt==="ArrowRight"?oe=Math.min(Dt+1,$t.length):pt==="Delete"&&(oe=Dt);var xe=0;pt==="Delete"&&Dt===St&&(xe=1);var Re=pt==="ArrowLeft"||pt==="ArrowRight";if(oe===void 0||Dt!==St&&!Re){h(Ke),be(tt,xe);return}var pe=oe;if(Re){var we=pt==="ArrowLeft"?"left":"right";pe=Y($t,oe,we),pe!==oe&&Ke.preventDefault()}else pt==="Delete"&&!w($t[oe])?pe=Y($t,oe,"right"):pt==="Backspace"&&!w($t[oe])&&(pe=Y($t,oe,"left"));pe!==oe&&U(tt,pe,$t),h(Ke),be(tt,xe)},me=function(Ke){var tt=Ke.target,pt=function(){var Dt=tt.selectionStart,St=tt.selectionEnd,$t=tt.value;if($t===void 0&&($t=""),Dt===St){var oe=Y($t,Dt);oe!==Dt&&U(tt,oe,$t)}};pt(),requestAnimationFrame(function(){pt()}),m(Ke),be(tt)},he=function(Ke){Ke.persist&&Ke.persist();var tt=Ke.target,pt=Ke.currentTarget;te.current=tt,Z.current.focusTimeout=setTimeout(function(){var Dt=tt.selectionStart,St=tt.selectionEnd,$t=tt.value;$t===void 0&&($t="");var oe=Y($t,Dt);oe!==Dt&&!(Dt===0&&St===$t.length)&&U(tt,oe,$t),p(Object.assign(Object.assign({},Ke),{currentTarget:pt}))},0)},Fe=function(Ke){te.current=null,clearTimeout(Z.current.focusTimeout),clearTimeout(Z.current.setCaretTimeout),g(Ke)},Pe=G&&yje()?"numeric":void 0,Je=Object.assign({inputMode:Pe},T,{type:t,value:I,onChange:Ce,onKeyDown:Oe,onMouseUp:me,onFocus:he,onBlur:Fe});if(n==="text")return i?Gr.createElement(Gr.Fragment,null,i(I,T)||null):Gr.createElement("span",Object.assign({},T,{ref:o}),I);if(r){var ut=r;return Gr.createElement(ut,Object.assign({},Je,{ref:o}))}return Gr.createElement("input",Object.assign({},Je,{ref:o}))}function Sre(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var o=t.suffix;o===void 0&&(o="");var s=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=E5(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=bG(e,s),h=d.beforeDecimal,m=d.afterDecimal,p=d.addNegation;return n!==void 0&&(m=c1e(m,n,!!r)),l&&(h=dje(h,l,a)),i&&(h=i+h),o&&(m=m+o),p&&(h="-"+h),e=h+(f&&c||"")+m,e}function E5(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function Cje(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),o=r.test(e);return e=e.replace(/-/g,""),i&&!o&&t&&(e="-"+e),e}function Sje(e,t){return new RegExp("(^-)|[0-9]|"+l1e(e),"g")}function Aje(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function Dje(e,t,n){var r;t===void 0&&(t=vje(e));var i=n.allowNegative,o=n.prefix;o===void 0&&(o="");var s=n.suffix;s===void 0&&(s="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=E5(n),h=d.allowedDecimalSeparators,m=d.decimalSeparator,p=e[f]===m;if(ak(e)&&(e===o||e===s)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":m;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var v=function(te,Z,re){var q=!1,U=!1;o.startsWith("-")?q=!1:te.startsWith("--")?(q=!1,U=!0):s.startsWith("-")&&te.length===s.length?q=!1:te[0]==="-"&&(q=!0);var Y=q?1:0;return U&&(Y=2),Y&&(te=te.substring(Y),Z-=Y,re-=Y),{value:te,start:Z,end:re,hasNegation:q}},b=v(e,c,f),w=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var E=v(t.lastValue,u.start,u.end),T=E.start,C=E.end,S=E.value,I=e.substring(c,f);e.length&&S.length&&(T>S.length-s.length||C<o.length)&&!(I&&s.startsWith(I))&&(e=S);var R=0;e.startsWith(o)?R+=o.length:c<o.length&&(R=c),e=e.substring(R),f-=R;var P=e.length,M=e.length-s.length;e.endsWith(s)?P=M:(f>M||f>e.length-s.length)&&(P=f),e=e.substring(0,P),e=Cje(w?"-"+e:e,i),e=(e.match(Sje(m))||[]).join("");var B=e.indexOf(m);e=e.replace(new RegExp(l1e(m),"g"),function(te,Z){return Z===B?".":""});var L=bG(e,i),z=L.beforeDecimal,G=L.afterDecimal,W=L.addNegation;return l.end-l.start<u.end-u.start&&z===""&&p&&!parseFloat(G)&&(e=W?"-":""),e}function kje(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),o=e[0]==="-";i.fill(!1,0,n.length+(o?1:0));var s=e.length;return i.fill(!1,s-r.length+1,s+1),i}function Ije(e){var t=E5(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var o=e.allowNegative;if(o===void 0&&(o=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&o&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+o+`
    `),o=!1),Object.assign(Object.assign({},e),{allowNegative:o})}function Rje(e){e=Ije(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=zy);var o=e.onBlur;o===void 0&&(o=zy);var s=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,m=a1e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),p=E5(e),g=p.decimalSeparator,v=p.allowedDecimalSeparators,b=function(W){return Sre(W,e)},w=function(W,te){return Dje(W,te,e)},E=XE(f)?c:f,T=d??Aje(E,l,t);XE(f)?XE(c)||(T=T||typeof c=="number"):T=T||typeof f=="number";var C=function(W){return u1e(W)?W:(typeof W=="number"&&(W=f1e(W)),T&&typeof a=="number"?Tre(W,a,!!u):W)},S=h1e(C(f),C(c),!!T,b,w,h),I=S[0],R=I.numAsString,P=I.formattedValue,M=S[1],B=function(W){var te=W.target,Z=W.key,re=te.selectionStart,q=te.selectionEnd,U=te.value;if(U===void 0&&(U=""),(Z==="Backspace"||Z==="Delete")&&q<l.length){W.preventDefault();return}if(re!==q){i(W);return}Z==="Backspace"&&U[0]==="-"&&re===l.length+1&&n&&Lb(te,1),a&&u&&(Z==="Backspace"&&U[re-1]===g?(Lb(te,re-1),W.preventDefault()):Z==="Delete"&&U[re]===g&&W.preventDefault()),v!=null&&v.includes(Z)&&U[re]===g&&Lb(te,re+1);var Y=s===!0?",":s;Z==="Backspace"&&U[re-1]===Y&&Lb(te,re-1),Z==="Delete"&&U[re]===Y&&Lb(te,re+1),i(W)},L=function(W){var te=R;if(te.match(/\d/g)||(te=""),r||(te=pje(te)),u&&a&&(te=Tre(te,a,u)),te!==R){var Z=Sre(te,e);M({formattedValue:Z,value:te,floatValue:parseFloat(te)},{event:W,source:sk.event})}o(W)},z=function(W){return W===g?!0:ak(W)},G=function(W){var te=W.currentValue,Z=W.lastValue,re=W.formattedValue,q=W.currentValueIndex,U=W.formattedValueIndex,Y=te[q],H=re[U],X=d1e(Z,te),ee=X.to,le=function(Ee){return w(Ee).indexOf(".")+l.length};return f===0&&u&&a&&te[ee.start]===g&&le(te)<q&&le(re)>U?!1:q>=ee.start&&q<ee.end&&v&&v.includes(Y)&&H===g?!0:Y===H};return Object.assign(Object.assign({},m),{value:P,valueIsNumericString:!1,isValidInputCharacter:z,isCharacterSame:G,onValueChange:M,format:b,removeFormatting:w,getCaretBoundary:function(W){return kje(W,e)},onKeyDown:B,onBlur:L})}function Nje(e){var t=Rje(e);return Gr.createElement(Tje,Object.assign({},t))}function Are({direction:e,style:t,...n}){return A.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:A.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Bz={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const Pje=/^(0\.0*|-0(\.0*)?)$/,Oje=/^-?0\d+(\.\d+)?\.?$/;function jz(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function eB(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||jz(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function Fje(e){return e.toString().replace(".","").length}function Mje(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&Fje(t)<14&&t!==""}function Dre(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const $je={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},Lje=(e,{size:t})=>({controls:{"--ni-chevron-size":Zn(t,"ni-chevron-size")}}),xG=Rt((e,t)=>{const n=ot("NumberInput",$je,e),{className:r,classNames:i,styles:o,unstyled:s,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:m,hideControls:p,rightSection:g,isAllowed:v,clampBehavior:b,onBlur:w,allowDecimal:E,decimalScale:T,onKeyDown:C,onKeyDownCapture:S,handlersRef:I,startValue:R,disabled:P,rightSectionPointerEvents:M,allowNegative:B,readOnly:L,size:z,rightSectionWidth:G,stepHoldInterval:W,stepHoldDelay:te,allowLeadingZeros:Z,withKeyboardEvents:re,trimLeadingZeroesOnBlur:q,...U}=n,Y=nn({name:"NumberInput",classes:Bz,props:n,classNames:i,styles:o,unstyled:s,vars:a,varsResolver:Lje}),{resolvedClassNames:H,resolvedStyles:X}=Kx({classNames:i,styles:o,props:n}),[ee,le]=ya({value:c,defaultValue:f,finalValue:"",onChange:u}),Ee=te!==void 0&&W!==void 0,be=F.useRef(null),Ce=F.useRef(null),Oe=F.useRef(0),me=(oe,xe)=>{xe.source==="event"&&le(Mje(oe.floatValue,oe.value)&&!Pje.test(oe.value)&&!(Z&&Oje.test(oe.value))?oe.floatValue:oe.value),l==null||l(oe,xe)},he=oe=>{const xe=String(oe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return xe?Math.max(0,(xe[1]?xe[1].length:0)-(xe[2]?+xe[2]:0)):0},Fe=oe=>{be.current&&typeof oe<"u"&&be.current.setSelectionRange(oe,oe)},Pe=F.useRef(Cz);Pe.current=()=>{if(!eB(ee))return;let oe;const xe=he(ee),Re=he(m),pe=Math.max(xe,Re),we=10**pe;if(!jz(ee)&&(typeof ee!="number"||Number.isNaN(ee)))oe=Ip(R,h,d);else if(d!==void 0){const Ge=(Math.round(Number(ee)*we)+Math.round(m*we))/we;oe=Ge<=d?Ge:d}else oe=(Math.round(Number(ee)*we)+Math.round(m*we))/we;const ke=oe.toFixed(pe);le(parseFloat(ke)),l==null||l({floatValue:parseFloat(ke),formattedValue:ke,value:ke},{source:"increment"}),setTimeout(()=>{var Ge;return Fe((Ge=be.current)==null?void 0:Ge.value.length)},0)};const Je=F.useRef(Cz);Je.current=()=>{if(!eB(ee))return;let oe;const xe=h!==void 0?h:B?Number.MIN_SAFE_INTEGER:0,Re=he(ee),pe=he(m),we=Math.max(Re,pe),ke=10**we;if(!jz(ee)&&typeof ee!="number"||Number.isNaN(ee))oe=Ip(R,xe,d);else{const Ve=(Math.round(Number(ee)*ke)-Math.round(m*ke))/ke;oe=xe!==void 0&&Ve<xe?xe:Ve}const Ge=oe.toFixed(we);le(parseFloat(Ge)),l==null||l({floatValue:parseFloat(Ge),formattedValue:Ge,value:Ge},{source:"decrement"}),setTimeout(()=>{var Ve;return Fe((Ve=be.current)==null?void 0:Ve.value.length)},0)};const ut=oe=>{C==null||C(oe),!(L||!re)&&(oe.key==="ArrowUp"&&(oe.preventDefault(),Pe.current()),oe.key==="ArrowDown"&&(oe.preventDefault(),Je.current()))},Ke=oe=>{if(S==null||S(oe),oe.key==="Backspace"){const xe=be.current;xe.selectionStart===0&&xe.selectionStart===xe.selectionEnd&&(oe.preventDefault(),window.setTimeout(()=>Fe(0),0))}};i6(I,{increment:Pe.current,decrement:Je.current});const tt=oe=>{oe?Pe.current():Je.current(),Oe.current+=1},pt=oe=>{if(tt(oe),Ee){const xe=typeof W=="number"?W:W(Oe.current);Ce.current=window.setTimeout(()=>pt(oe),xe)}},Dt=(oe,xe)=>{var Re;oe.preventDefault(),(Re=be.current)==null||Re.focus(),tt(xe),Ee&&(Ce.current=window.setTimeout(()=>pt(xe),te))},St=()=>{Ce.current&&window.clearTimeout(Ce.current),Ce.current=null,Oe.current=0},$t=A.jsxs("div",{...Y("controls"),children:[A.jsx(gf,{...Y("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof ee=="number"&&d!==void 0&&ee>=d,mod:{direction:"up"},onMouseDown:oe=>oe.preventDefault(),onPointerDown:oe=>{Dt(oe,!0)},onPointerUp:St,onPointerLeave:St,children:A.jsx(Are,{direction:"up"})}),A.jsx(gf,{...Y("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof ee=="number"&&h!==void 0&&ee<=h,mod:{direction:"down"},onMouseDown:oe=>oe.preventDefault(),onPointerDown:oe=>{Dt(oe,!1)},onPointerUp:St,onPointerLeave:St,children:A.jsx(Are,{direction:"down"})})]});return A.jsx(vd,{component:Nje,allowNegative:B,className:ls(Bz.root,r),size:z,...U,readOnly:L,disabled:P,value:ee,getInputRef:Ws(t,be),onValueChange:me,rightSection:p||L||!eB(ee)?g:g||$t,classNames:H,styles:X,unstyled:s,__staticSelector:"NumberInput",decimalScale:E?T:0,onKeyDown:ut,onKeyDownCapture:Ke,rightSectionPointerEvents:M??(P?"none":void 0),rightSectionWidth:G??`var(--ni-right-section-width-${z||"sm"})`,allowLeadingZeros:Z,onBlur:oe=>{if(w==null||w(oe),b==="blur"&&typeof ee=="number"&&Ip(ee,h,d)!==ee&&le(Ip(ee,h,d)),q&&typeof ee=="string"&&he(ee)<15){const xe=ee.replace(/^0+/,""),Re=parseFloat(xe);le(Number.isNaN(Re)||Re>Number.MAX_SAFE_INTEGER?xe:Ip(Re,h,d))}},isAllowed:oe=>b==="strict"?v?v(oe)&&Dre(oe.floatValue,h,d):Dre(oe.floatValue,h,d):v?v(oe):!0})});xG.classes={...vd.classes,...Bz};xG.displayName="@mantine/core/NumberInput";const[Bje,p1e]=nu("Progress.Root component was not found in tree");var EI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const jje={},wG=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,...a}=ot("ProgressLabel",jje,e),u=p1e();return A.jsx(Ue,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:o}),...a})});wG.classes=EI;wG.displayName="@mantine/core/ProgressLabel";const zje={},Uje=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Zn(t,"progress-size"),"--progress-radius":n===void 0?void 0:wi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),T5=Rt((e,t)=>{const n=ot("ProgressRoot",zje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=nn({name:"Progress",classes:EI,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Uje});return A.jsx(Bje,{value:{getStyles:d,autoContrast:l},children:A.jsx(Ue,{ref:t,...d("root"),...f})})});T5.classes=EI;T5.displayName="@mantine/core/ProgressRoot";const Vje={withAria:!0},C5=Rt((e,t)=>{const{classNames:n,className:r,style:i,styles:o,vars:s,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=ot("ProgressSection",Vje,e),m=p1e(),p=As(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return A.jsx(Ue,{ref:t,...m.getStyles("section",{className:r,classNames:n,styles:o,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":qi(l,p),"--progress-label-color":CT(m.autoContrast,p)?Yx({color:l,theme:p,autoContrast:m.autoContrast}):void 0}})});C5.classes=EI;C5.displayName="@mantine/core/ProgressSection";const Hje={},LT=Rt((e,t)=>{const n=ot("Progress",Hje,e),{value:r,classNames:i,styles:o,vars:s,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Kx({classNames:i,styles:o,props:n});return A.jsx(T5,{ref:t,classNames:d,styles:h,vars:s,...f,children:A.jsx(C5,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});LT.classes=EI;LT.displayName="@mantine/core/Progress";LT.Section=C5;LT.Root=T5;LT.Label=wG;const[qje,m1e]=X1(),[Wje,Gje]=X1();var g1e={card:"m_9dc8ae12"};const Yje={withBorder:!0},Kje=(e,{radius:t})=>({card:{"--card-radius":wi(t)}}),_G=Rt((e,t)=>{const n=ot("RadioCard",Yje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:m,onKeyDown:p,...g}=n,v=nn({name:"RadioCard",classes:g1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Kje,rootSelector:"card"}),{dir:b}=J1(),w=m1e(),E=typeof l=="boolean"?l:(w==null?void 0:w.value)===d||!1,T=m||(w==null?void 0:w.name),C=S=>{if(p==null||p(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${T||"__mantine"}"]`)),R=I.findIndex(B=>B===S.target),P=R+1>=I.length?0:R+1,M=R-1<0?I.length-1:R-1;S.nativeEvent.code==="ArrowDown"&&(I[P].focus(),I[P].click()),S.nativeEvent.code==="ArrowUp"&&(I[M].focus(),I[M].click()),S.nativeEvent.code==="ArrowLeft"&&(I[b==="ltr"?M:P].focus(),I[b==="ltr"?M:P].click()),S.nativeEvent.code==="ArrowRight"&&(I[b==="ltr"?P:M].focus(),I[b==="ltr"?P:M].click())}};return A.jsx(Wje,{value:{checked:E},children:A.jsx(gf,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"radio","aria-checked":E,name:T,onClick:S=>{h==null||h(S),w==null||w.onChange(d||"")},onKeyDown:C})})});_G.displayName="@mantine/core/RadioCard";_G.classes=g1e;const Xje={},S5=Rt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,name:u,readOnly:l,...c}=ot("RadioGroup",Xje,e),f=Cl(u),[d,h]=ya({value:n,defaultValue:r,finalValue:"",onChange:i}),m=p=>!l&&h(typeof p=="string"?p:p.currentTarget.value);return A.jsx(qje,{value:{value:d,onChange:m,size:o,name:f},children:A.jsx(ki.Wrapper,{size:o,ref:t,...s,...c,labelElement:"div",__staticSelector:"RadioGroup",children:A.jsx(JW,{role:"radiogroup",children:a})})})});S5.classes=ki.Wrapper.classes;S5.displayName="@mantine/core/RadioGroup";function y1e({size:e,style:t,...n}){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:et(e),height:et(e),...t},"aria-hidden":!0,...n,children:A.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var v1e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const Qje={icon:y1e},Jje=(e,{radius:t,color:n,size:r,iconColor:i,variant:o,autoContrast:s})=>{const a=wm({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Zn(r,"radio-size"),"--radio-radius":t===void 0?void 0:wi(t),"--radio-color":o==="outline"?u:qi(n,e),"--radio-icon-size":Zn(r,"radio-icon-size"),"--radio-icon-color":i?qi(i,e):CT(s,e)?Yx({color:n,theme:e,autoContrast:s}):void 0}}},EG=Rt((e,t)=>{const n=ot("RadioIndicator",Qje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:m,mod:p,variant:g,disabled:v,...b}=n,w=l,E=nn({name:"RadioIndicator",classes:v1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Jje,rootSelector:"indicator"}),T=Gje(),C=typeof m=="boolean"?m:(T==null?void 0:T.checked)||!1;return A.jsx(Ue,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:v},p],...b,children:A.jsx(w,{...E("icon")})})});EG.displayName="@mantine/core/RadioIndicator";EG.classes=v1e;var b1e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Zje={labelPosition:"right"},eze=(e,{size:t,radius:n,color:r,iconColor:i,variant:o,autoContrast:s})=>{const a=wm({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Zn(t,"radio-size"),"--radio-radius":n===void 0?void 0:wi(n),"--radio-color":o==="outline"?u:qi(r,e),"--radio-icon-color":i?qi(i,e):CT(s,e)?Yx({color:r,theme:e,autoContrast:s}):void 0,"--radio-icon-size":Zn(t,"radio-icon-size")}}},od=Rt((e,t)=>{const n=ot("Radio",Zje,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:m,radius:p,color:g,variant:v,disabled:b,wrapperProps:w,icon:E=y1e,rootRef:T,iconColor:C,onChange:S,mod:I,...R}=n,P=nn({name:"Radio",classes:b1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:eze}),M=m1e(),B=(M==null?void 0:M.size)??c,L=n.size?c:B,{styleProps:z,rest:G}=Qx(R),W=Cl(l),te=M?{checked:M.value===G.value,name:G.name??M.name,onChange:Z=>{M.onChange(Z),S==null||S(Z)}}:{};return A.jsx(d5,{...P("root"),__staticSelector:"Radio",__stylesApiProps:n,id:W,size:L,labelPosition:d,label:f,description:h,error:m,disabled:b,classNames:r,styles:s,unstyled:a,"data-checked":te.checked||void 0,variant:v,ref:T,mod:I,...z,...w,children:A.jsxs(Ue,{...P("inner"),mod:{"label-position":d},children:[A.jsx(Ue,{...P("radio",{focusable:!0,variant:v}),onChange:S,...G,...te,component:"input",mod:{error:!!m},ref:t,id:W,disabled:b,type:"radio"}),A.jsx(E,{...P("icon"),"aria-hidden":!0})]})})});od.classes=b1e;od.displayName="@mantine/core/Radio";od.Group=S5;od.Card=_G;od.Indicator=EG;const tze={duration:100,transition:"fade"};function nze(e,t){return{...tze,...t,...e}}function rze({offset:e,position:t,defaultOpened:n}){const[r,i]=F.useState(n),o=F.useRef(null),{x:s,y:a,elements:u,refs:l,update:c,placement:f}=wW({placement:t,middleware:[yW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,m=F.useCallback(({clientX:p,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:g,left:p+d,top:g+h,right:p,bottom:g}}})},[u.reference]);return F.useEffect(()=>{if(l.floating.current){const p=o.current;p.addEventListener("mousemove",m);const g=G0(l.floating.current);return g.forEach(v=>{v.addEventListener("scroll",c)}),()=>{p.removeEventListener("mousemove",m),g.forEach(v=>{v.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,m,r]),{handleMouseMove:m,x:s,y:a,opened:r,setOpened:i,boundaryRef:o,floating:l.setFloating}}var A5={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const ize={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Ec("popover")},oze=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:wi(t),"--tooltip-bg":n?qi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),TG=Rt((e,t)=>{const n=ot("TooltipFloating",ize,e),{children:r,refProp:i,withinPortal:o,style:s,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:m,position:p,multiline:g,zIndex:v,disabled:b,defaultOpened:w,variant:E,vars:T,portalProps:C,...S}=n,I=As(),R=nn({name:"TooltipFloating",props:n,classes:A5,className:a,style:s,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:T,varsResolver:oze}),{handleMouseMove:P,x:M,y:B,opened:L,boundaryRef:z,floating:G,setOpened:W}=rze({offset:m,position:p,defaultOpened:w});if(!K1(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const te=Ws(z,ZM(r),t),Z=r.props,re=U=>{var Y;(Y=Z.onMouseEnter)==null||Y.call(Z,U),P(U),W(!0)},q=U=>{var Y;(Y=Z.onMouseLeave)==null||Y.call(Z,U),W(!1)};return A.jsxs(A.Fragment,{children:[A.jsx(Z1,{...C,withinPortal:o,children:A.jsx(Ue,{...S,...R("tooltip",{style:{...nW(s,I),zIndex:v,display:!b&&L?"block":"none",top:(B&&Math.round(B))??"",left:(M&&Math.round(M))??""}}),variant:E,ref:G,mod:{multiline:g},children:h})}),F.cloneElement(r,{...Z,[i]:te,onMouseEnter:re,onMouseLeave:q})]})});TG.classes=A5;TG.displayName="@mantine/core/TooltipFloating";const x1e=F.createContext(!1),sze=x1e.Provider,aze=()=>F.useContext(x1e),uze={openDelay:0,closeDelay:0};function CG(e){const{openDelay:t,closeDelay:n,children:r}=ot("TooltipGroup",uze,e);return A.jsx(sze,{value:!0,children:A.jsx(hLe,{delay:{open:t,close:n},children:r})})}CG.displayName="@mantine/core/TooltipGroup";CG.extend=e=>e;function lze(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function cze(e){const t=lze(e.middlewares),n=[qge(e.offset)];return t.shift&&n.push(yW(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?c6():c6(t.flip)),n.push(Wge({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?wD():wD(t.inline)):e.inline&&n.push(wD()),n}function fze(e){var C,S,I;const[t,n]=F.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,o=aze(),s=Cl(),{delay:a,currentId:u,setCurrentId:l}=Xge(),c=F.useCallback(R=>{n(R),R&&l(s)},[l,s]),{x:f,y:d,context:h,refs:m,update:p,placement:g,middlewareData:{arrow:{x:v,y:b}={}}}=wW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:cze(e)});pLe(h,{id:s});const{getReferenceProps:w,getFloatingProps:E}=wLe([dLe(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:o?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),xLe(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),ELe(h,{role:"tooltip"}),vLe(h,{enabled:typeof e.opened>"u"})]);iye({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:m,update:p}}),nm(()=>{var R;(R=e.onPositionChange)==null||R.call(e,g)},[g]);const T=i&&u&&u!==s;return{x:f,y:d,arrowX:v,arrowY:b,reference:m.setReference,floating:m.setFloating,getFloatingProps:E,getReferenceProps:w,isGroupPhase:T,opened:i,placement:g}}const kre={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ec("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},dze=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:wi(t),"--tooltip-bg":n?qi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ji=Rt((e,t)=>{const n=ot("Tooltip",kre,e),{children:r,position:i,refProp:o,label:s,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:m,classNames:p,styles:g,unstyled:v,style:b,className:w,withArrow:E,arrowSize:T,arrowOffset:C,arrowRadius:S,arrowPosition:I,offset:R,transitionProps:P,multiline:M,events:B,zIndex:L,disabled:z,positionDependencies:G,onClick:W,onMouseEnter:te,onMouseLeave:Z,inline:re,variant:q,keepMounted:U,vars:Y,portalProps:H,mod:X,floatingStrategy:ee,middlewares:le,...Ee}=ot("Tooltip",kre,n),{dir:be}=J1(),Ce=F.useRef(null),Oe=fze({position:Qge(be,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:B,arrowRef:Ce,arrowOffset:C,offset:typeof R=="number"?R+(E?T/2:0):R,positionDependencies:[...G,r],inline:re,strategy:ee,middlewares:le}),me=nn({name:"Tooltip",props:n,classes:A5,className:w,style:b,classNames:p,styles:g,unstyled:v,rootSelector:"tooltip",vars:Y,varsResolver:dze});if(!K1(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const he=Ws(Oe.reference,ZM(r),t),Fe=nze(P,{duration:100,transition:"fade"}),Pe=r.props;return A.jsxs(A.Fragment,{children:[A.jsx(Z1,{...H,withinPortal:d,children:A.jsx(_m,{...Fe,keepMounted:U,mounted:!z&&!!Oe.opened,duration:Oe.isGroupPhase?10:Fe.duration,children:Je=>A.jsxs(Ue,{...Ee,"data-fixed":ee==="fixed"||void 0,variant:q,mod:[{multiline:M},X],...Oe.getFloatingProps({ref:Oe.floating,className:me("tooltip").className,style:{...me("tooltip").style,...Je,zIndex:L,top:Oe.y??0,left:Oe.x??0}}),children:[s,A.jsx(_W,{ref:Ce,arrowX:Oe.arrowX,arrowY:Oe.arrowY,visible:E,position:Oe.placement,arrowSize:T,arrowOffset:C,arrowRadius:S,arrowPosition:I,...me("arrow")})]})})}),F.cloneElement(r,Oe.getReferenceProps({onClick:W,onMouseEnter:te,onMouseLeave:Z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[o]:he,className:ls(w,Pe.className),...Pe}))]})});Ji.classes=A5;Ji.displayName="@mantine/core/Tooltip";Ji.Floating=TG;Ji.Group=CG;const hze={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},BT=Rt((e,t)=>{const n=ot("Select",hze,e),{classNames:r,styles:i,unstyled:o,vars:s,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:m,data:p,value:g,defaultValue:v,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:E,readOnly:T,disabled:C,filter:S,limit:I,withScrollArea:R,maxDropdownHeight:P,size:M,searchable:B,rightSection:L,checkIconPosition:z,withCheckIcon:G,nothingFoundMessage:W,name:te,form:Z,searchValue:re,defaultSearchValue:q,onSearchChange:U,allowDeselect:Y,error:H,rightSectionPointerEvents:X,id:ee,clearable:le,clearButtonProps:Ee,hiddenInputProps:be,renderOption:Ce,onClear:Oe,autoComplete:me,scrollAreaProps:he,__defaultRightSection:Fe,__clearSection:Pe,__clearable:Je,...ut}=n,Ke=F.useMemo(()=>Aye(p),[p]),tt=F.useMemo(()=>BW(Ke),[Ke]),pt=Cl(ee),[Dt,St,$t]=ya({value:g,defaultValue:v,finalValue:null,onChange:m}),oe=typeof Dt=="string"?tt[Dt]:void 0,xe=x5e(oe),[Re,pe]=ya({value:re,defaultValue:q,finalValue:oe?oe.label:"",onChange:U}),we=XW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),we.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),we.resetSelectedOption()}}),{resolvedClassNames:ke,resolvedStyles:Ge}=Kx({props:n,styles:i,classNames:r});F.useEffect(()=>{b&&we.selectFirstOption()},[b,Dt]),F.useEffect(()=>{g===null&&pe(""),typeof g=="string"&&oe&&((xe==null?void 0:xe.value)!==oe.value||(xe==null?void 0:xe.label)!==oe.label)&&pe(oe.label)},[g,oe]);const Ve=A.jsx(Or.ClearButton,{...Ee,onClear:()=>{St(null,null),pe(""),Oe==null||Oe()}});return A.jsxs(A.Fragment,{children:[A.jsxs(Or,{store:we,__staticSelector:"Select",classNames:ke,styles:Ge,unstyled:o,readOnly:T,onOptionSubmit:at=>{w==null||w(at);const rt=Y&&tt[at].value===Dt?null:tt[at],ln=rt?rt.value:null;ln!==Dt&&St(ln,rt),!$t&&pe(typeof ln=="string"&&(rt==null?void 0:rt.label)||""),we.closeDropdown()},size:M,...E,children:[A.jsx(Or.Target,{targetType:B?"input":"button",autoComplete:me,children:A.jsx(vd,{id:pt,ref:t,__defaultRightSection:A.jsx(Or.Chevron,{size:M,error:H,unstyled:o}),__clearSection:Ve,__clearable:le&&!!Dt&&!C&&!T,rightSection:L,rightSectionPointerEvents:X||(Ve?"all":"none"),...ut,size:M,__staticSelector:"Select",disabled:C,readOnly:T||!B,value:Re,onChange:at=>{pe(at.currentTarget.value),we.openDropdown(),b&&we.selectFirstOption()},onFocus:at=>{B&&we.openDropdown(),f==null||f(at)},onBlur:at=>{var rt;B&&we.closeDropdown(),pe(Dt!=null&&((rt=tt[Dt])==null?void 0:rt.label)||""),d==null||d(at)},onClick:at=>{B?we.openDropdown():we.toggleDropdown(),h==null||h(at)},classNames:ke,styles:Ge,unstyled:o,pointer:!B,error:H})}),A.jsx(qye,{data:Ke,hidden:T||C,filter:S,search:Re,limit:I,hiddenWhenEmpty:!W,withScrollArea:R,maxDropdownHeight:P,filterOptions:B&&(oe==null?void 0:oe.label)!==Re,value:Dt,checkIconPosition:z,withCheckIcon:G,nothingFoundMessage:W,unstyled:o,labelId:ut.label?`${pt}-label`:void 0,"aria-label":ut.label?void 0:ut["aria-label"],renderOption:Ce,scrollAreaProps:he})]}),A.jsx(Or.HiddenInput,{value:Dt,name:te,form:Z,disabled:C,...be})]})});BT.classes={...vd.classes,...Or.classes};BT.displayName="@mantine/core/Select";function pze({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=As(),o=t===void 0?e:t,s=Y1({"--sg-spacing-x":Cs(ch(e)),"--sg-spacing-y":Cs(ch(o)),"--sg-cols":(c=ch(n))==null?void 0:c.toString()}),a=Li(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Cs(e[d])),typeof o=="object"&&o[d]!==void 0&&(f[d]["--sg-spacing-y"]=Cs(o[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=nk(Li(a),i.breakpoints).filter(f=>Li(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return A.jsx(Xx,{styles:s,media:l,selector:r})}function tB(e){return typeof e=="object"&&e!==null?Li(e):[]}function mze(e){return e.sort((t,n)=>tk(t)-tk(n))}function gze({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...tB(e),...tB(t),...tB(n)]));return mze(r)}function yze({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,o=Y1({"--sg-spacing-x":Cs(ch(e)),"--sg-spacing-y":Cs(ch(i)),"--sg-cols":(l=ch(n))==null?void 0:l.toString()}),s=gze({spacing:e,verticalSpacing:t,cols:n}),a=s.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Cs(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Cs(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=s.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return A.jsx(Xx,{styles:o,container:u,selector:r})}var w1e={container:"m_925c2d2c",root:"m_2415a157"};const vze={cols:1,spacing:"md",type:"media"},SG=Rt((e,t)=>{const n=ot("SimpleGrid",vze,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,m=nn({name:"SimpleGrid",classes:w1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u}),p=gI();return d==="container"?A.jsxs(A.Fragment,{children:[A.jsx(yze,{...n,selector:`.${p}`}),A.jsx("div",{...m("container"),children:A.jsx(Ue,{ref:t,...m("root",{className:p}),...h})})]}):A.jsxs(A.Fragment,{children:[A.jsx(pze,{...n,selector:`.${p}`}),A.jsx(Ue,{ref:t,...m("root",{className:p}),...h})]})});SG.classes=w1e;SG.displayName="@mantine/core/SimpleGrid";const[bze,D5]=nu("SliderProvider was not found in tree"),_1e=F.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:o,...s},a)=>{const{getStyles:u}=D5();return A.jsx(Ue,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...s})});_1e.displayName="@mantine/core/SliderRoot";const E1e=F.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:o,onMouseDown:s,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:m,children:p=null,disabled:g},v)=>{const{getStyles:b}=D5(),[w,E]=F.useState(!1),T=l||o||w||h&&m;return A.jsxs(Ue,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:v,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:o,disabled:g},onFocus:C=>{E(!0),typeof f=="function"&&f(C)},onBlur:C=>{E(!1),typeof d=="function"&&d(C)},onTouchStart:s,onMouseDown:s,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[p,A.jsx(_m,{mounted:i!=null&&!!T,transition:"fade",duration:0,...u,children:C=>A.jsx("div",{...b("label",{style:C}),children:i})})]})});E1e.displayName="@mantine/core/SliderThumb";function T1e({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function xze({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function C1e({marks:e,min:t,max:n,disabled:r,value:i,offset:o,inverted:s}){const{getStyles:a}=D5();if(!e)return null;const u=e.map((l,c)=>F.createElement(Ue,{...a("markWrapper"),__vars:{"--mark-offset":`${T1e({value:l.value,min:t,max:n})}%`},key:c},A.jsx(Ue,{...a("mark"),mod:{filled:xze({mark:l,value:i,offset:o,inverted:s}),disabled:r}}),l.label&&A.jsx("div",{...a("markLabel"),children:l.label})));return A.jsx("div",{children:u})}C1e.displayName="@mantine/core/SliderMarks";function S1e({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:o,containerProps:s,...a}){const{getStyles:u}=D5();return A.jsx(Ue,{...u("trackContainer"),mod:{disabled:r},...s,children:A.jsxs(Ue,{...u("track"),mod:{inverted:o,disabled:r},children:[A.jsx(Ue,{mod:{inverted:o,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,A.jsx(C1e,{...a,offset:i,disabled:r,inverted:o})]})})}S1e.displayName="@mantine/core/SliderTrack";function wze({value:e,containerWidth:t,min:n,max:r,step:i,precision:o}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return o!==void 0?Number(l.toFixed(o)):l}function i3(e,t){return parseFloat(e.toFixed(t))}function _ze(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function nB(e,t){const r=[...t].sort((i,o)=>i.value-o.value).find(i=>i.value>e);return r?r.value:e}function rB(e,t){const r=[...t].sort((i,o)=>o.value-i.value).find(i=>i.value<e);return r?r.value:e}function Ire(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function Rre(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var A1e={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const Eze={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Tze=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Zn(t,"slider-size"),"--slider-color":n?qi(n,e):void 0,"--slider-radius":i===void 0?void 0:wi(i),"--slider-thumb-size":r!==void 0?et(r):"calc(var(--slider-size) * 2)"}}),AG=Rt((e,t)=>{const n=ot("Slider",Eze,e),{classNames:r,styles:i,value:o,onChange:s,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:m,marks:p,label:g,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,thumbChildren:T,disabled:C,unstyled:S,scale:I,inverted:R,className:P,style:M,vars:B,hiddenInputProps:L,restrictToMarks:z,thumbProps:G,...W}=n,te=nn({name:"Slider",props:n,classes:A1e,classNames:r,className:P,styles:i,style:M,vars:B,varsResolver:Tze,unstyled:S}),{dir:Z}=J1(),[re,q]=F.useState(!1),[U,Y]=ya({value:typeof o=="number"?Ip(o,l,c):o,defaultValue:typeof h=="number"?Ip(h,l,c):h,finalValue:Ip(0,l,c),onChange:s}),H=F.useRef(U),X=F.useRef(null),ee=F.useRef(null),le=T1e({value:U,min:l,max:c}),Ee=I(U),be=typeof g=="function"?g(Ee):g,Ce=d??_ze(f),Oe=F.useCallback(({x:Pe})=>{if(!C){const Je=wze({value:Pe,min:l,max:c,step:f,precision:Ce});Y(z&&(p!=null&&p.length)?kne(Je,p.map(ut=>ut.value)):Je),H.current=Je}},[C,l,c,f,Ce,Y,p,z]),{ref:me,active:he}=y5e(Oe,{onScrubEnd:()=>a==null?void 0:a(z&&(p!=null&&p.length)?kne(H.current,p.map(Pe=>Pe.value)):H.current)},Z),Fe=Pe=>{var Je,ut,Ke,tt,pt,Dt;if(!C)switch(Pe.key){case"ArrowUp":{if(Pe.preventDefault(),(Je=ee.current)==null||Je.focus(),z&&p){const $t=nB(U,p);Y($t),a==null||a($t);break}const St=i3(Math.min(Math.max(U+f,l),c),Ce);Y(St),a==null||a(St);break}case"ArrowRight":{if(Pe.preventDefault(),(ut=ee.current)==null||ut.focus(),z&&p){const $t=Z==="rtl"?rB(U,p):nB(U,p);Y($t),a==null||a($t);break}const St=i3(Math.min(Math.max(Z==="rtl"?U-f:U+f,l),c),Ce);Y(St),a==null||a(St);break}case"ArrowDown":{if(Pe.preventDefault(),(Ke=ee.current)==null||Ke.focus(),z&&p){const $t=rB(U,p);Y($t),a==null||a($t);break}const St=i3(Math.min(Math.max(U-f,l),c),Ce);Y(St),a==null||a(St);break}case"ArrowLeft":{if(Pe.preventDefault(),(tt=ee.current)==null||tt.focus(),z&&p){const $t=Z==="rtl"?nB(U,p):rB(U,p);Y($t),a==null||a($t);break}const St=i3(Math.min(Math.max(Z==="rtl"?U+f:U-f,l),c),Ce);Y(St),a==null||a(St);break}case"Home":{if(Pe.preventDefault(),(pt=ee.current)==null||pt.focus(),z&&p){Y(Ire(p)),a==null||a(Ire(p));break}Y(l),a==null||a(l);break}case"End":{if(Pe.preventDefault(),(Dt=ee.current)==null||Dt.focus(),z&&p){Y(Rre(p)),a==null||a(Rre(p));break}Y(c),a==null||a(c);break}}};return A.jsx(bze,{value:{getStyles:te},children:A.jsxs(_1e,{...W,ref:Ws(t,X),onKeyDownCapture:Fe,onMouseDownCapture:()=>{var Pe;return(Pe=X.current)==null?void 0:Pe.focus()},size:u,disabled:C,children:[A.jsx(S1e,{inverted:R,offset:0,filled:le,marks:p,min:l,max:c,value:Ee,disabled:C,containerProps:{ref:me,onMouseEnter:E?()=>q(!0):void 0,onMouseLeave:E?()=>q(!1):void 0},children:A.jsx(E1e,{max:c,min:l,value:Ee,position:le,dragging:he,label:be,ref:ee,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,isHovered:re,disabled:C,...G,children:T})}),A.jsx("input",{type:"hidden",name:m,value:Ee,...L})]})})});AG.classes=A1e;AG.displayName="@mantine/core/Slider";const Cze={},ff=Rt((e,t)=>{const{w:n,h:r,miw:i,mih:o,...s}=ot("Space",Cze,e);return A.jsx(Ue,{ref:t,...s,w:n,miw:i??n,h:r,mih:o??r})});ff.displayName="@mantine/core/Space";var D1e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const Sze={maxHeight:100,initialState:!1},Aze=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),DG=Rt((e,t)=>{const n=ot("Spoiler",Sze,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:m,transitionDuration:p,id:g,expanded:v,onExpandedChange:b,...w}=n,E=nn({name:"Spoiler",classes:D1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Aze}),T=Cl(g),C=`${T}-region`,[S,I]=ya({value:v,defaultValue:l,finalValue:!1,onChange:b}),{ref:R,height:P}=b5e(),M=S?f:d,B=M!==null&&c<P;return A.jsxs(Ue,{...E("root"),id:T,ref:t,"data-has-spoiler":B||void 0,...w,children:[B&&A.jsx(NT,{component:"button",type:"button",ref:m,onClick:()=>I(!S),"aria-expanded":S,"aria-controls":C,...E("control"),children:M}),A.jsx("div",{...E("content",{style:{maxHeight:S?P?et(P):void 0:et(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:A.jsx("div",{ref:R,children:h})})]})});DG.classes=D1e;DG.displayName="@mantine/core/Spoiler";var k1e={root:"m_6d731127"};const Dze={gap:"md",align:"stretch",justify:"flex-start"},kze=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Cs(t),"--stack-align":n,"--stack-justify":r}}),qo=Rt((e,t)=>{const n=ot("Stack",Dze,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,m=nn({name:"Stack",props:n,classes:k1e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:kze});return A.jsx(Ue,{ref:t,...m("root"),variant:d,...h})});qo.classes=k1e;qo.displayName="@mantine/core/Stack";const I1e=F.createContext(null),Ize=I1e.Provider,Rze=()=>F.useContext(I1e),Nze={},kG=Rt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:o,wrapperProps:s,children:a,readOnly:u,...l}=ot("SwitchGroup",Nze,e),[c,f]=ya({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const m=h.currentTarget.value;!u&&f(c.includes(m)?c.filter(p=>p!==m):[...c,m])};return A.jsx(Ize,{value:{value:c,onChange:d,size:o},children:A.jsx(ki.Wrapper,{size:o,ref:t,...s,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:A.jsx(JW,{role:"group",children:a})})})});kG.classes=ki.Wrapper.classes;kG.displayName="@mantine/core/SwitchGroup";var R1e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Pze={labelPosition:"right"},Oze=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:wi(t),"--switch-height":Zn(r,"switch-height"),"--switch-width":Zn(r,"switch-width"),"--switch-thumb-size":Zn(r,"switch-thumb-size"),"--switch-label-font-size":Zn(r,"switch-label-font-size"),"--switch-track-label-padding":Zn(r,"switch-track-label-padding"),"--switch-color":n?qi(n,e):void 0}}),rx=Rt((e,t)=>{const n=ot("Switch",Pze,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:m,radius:p,wrapperProps:g,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:C,error:S,disabled:I,variant:R,rootRef:P,mod:M,...B}=n,L=Rze(),z=m||(L==null?void 0:L.size),G=nn({name:"Switch",props:n,classes:R1e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Oze}),{styleProps:W,rest:te}=Qx(B),Z=Cl(h),re=L?{checked:L.value.includes(te.value),onChange:L.onChange}:{},[q,U]=ya({value:re.checked??b,defaultValue:w,finalValue:!1});return A.jsxs(d5,{...G("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Z,size:z,labelPosition:T,label:c,description:C,error:S,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:s,unstyled:a,"data-checked":re.checked||b||void 0,variant:R,ref:P,mod:M,...W,...g,children:[A.jsx("input",{...te,disabled:I,checked:q,"data-checked":re.checked||b||void 0,onChange:Y=>{var H;L?(H=re.onChange)==null||H.call(re,Y):E==null||E(Y),U(Y.currentTarget.checked)},id:Z,ref:t,type:"checkbox",role:"switch",...G("input")}),A.jsxs(Ue,{"aria-hidden":"true",mod:{error:S,"label-position":T,"without-labels":!d&&!f},...G("track"),children:[A.jsx(Ue,{component:"span",mod:"reduce-motion",...G("thumb"),children:v}),A.jsx("span",{...G("trackLabel"),children:q?d:f})]})]})});rx.classes={...R1e,...Oye};rx.displayName="@mantine/core/Switch";rx.Group=kG;const[Fze,Mze]=nu("Table component was not found in the tree");var TI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function $ze(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function ew(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Rt((i,o)=>{const s=ot(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=s,d=Mze();return A.jsx(Ue,{component:e,ref:o,...$ze(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:s}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=TI,r}const zz=ew("th",{columnBorder:!0}),N1e=ew("td",{columnBorder:!0}),g4=ew("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),P1e=ew("thead",{stickyHeader:!0}),O1e=ew("tbody"),F1e=ew("tfoot"),M1e=ew("caption",{captionSide:!0});function IG({data:e}){return A.jsxs(A.Fragment,{children:[e.caption&&A.jsx(M1e,{children:e.caption}),e.head&&A.jsx(P1e,{children:A.jsx(g4,{children:e.head.map((t,n)=>A.jsx(zz,{children:t},n))})}),e.body&&A.jsx(O1e,{children:e.body.map((t,n)=>A.jsx(g4,{children:t.map((r,i)=>A.jsx(N1e,{children:r},i))},n))}),e.foot&&A.jsx(F1e,{children:A.jsx(g4,{children:e.foot.map((t,n)=>A.jsx(zz,{children:t},n))})})]})}IG.displayName="@mantine/core/TableDataRenderer";const Lze={type:"scrollarea"},Bze=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":et(t),"--table-overflow":n==="native"?"auto":void 0}}),RG=Rt((e,t)=>{const n=ot("TableScrollContainer",Lze,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=nn({name:"TableScrollContainer",classes:TI,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:Bze,rootSelector:"scrollContainer"});return A.jsx(Ue,{component:f==="scrollarea"?ag:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:A.jsx("div",{...h("scrollContainerInner"),children:l})})});RG.classes=TI;RG.displayName="@mantine/core/TableScrollContainer";const jze={withRowBorders:!0,verticalSpacing:7},zze=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:o,stripedColor:s,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Cs(r),"--table-vertical-spacing":Cs(i),"--table-border-color":o?qi(o,e):void 0,"--table-striped-color":u&&s?qi(s,e):void 0,"--table-highlight-on-hover-color":l&&a?qi(a,e):void 0,"--table-sticky-header-offset":f?et(c):void 0}}),Dn=Rt((e,t)=>{const n=ot("Table",jze,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:m,highlightOnHover:p,withColumnBorders:g,withRowBorders:v,withTableBorder:b,borderColor:w,layout:E,variant:T,data:C,children:S,stickyHeader:I,stickyHeaderOffset:R,mod:P,tabularNums:M,...B}=n,L=nn({name:"Table",props:n,className:i,style:o,classes:TI,classNames:r,styles:s,unstyled:a,rootSelector:"table",vars:u,varsResolver:zze});return A.jsx(Fze,{value:{getStyles:L,stickyHeader:I,striped:m===!0?"odd":m||void 0,highlightOnHover:p,withColumnBorders:g,withRowBorders:v,captionSide:f||"bottom"},children:A.jsx(Ue,{component:"table",variant:T,ref:t,mod:[{"data-with-table-border":b,"data-tabular-nums":M},P],...L("table"),...B,children:S||!!C&&A.jsx(IG,{data:C})})})});Dn.classes=TI;Dn.displayName="@mantine/core/Table";Dn.Td=N1e;Dn.Th=zz;Dn.Tr=g4;Dn.Thead=P1e;Dn.Tbody=O1e;Dn.Tfoot=F1e;Dn.Caption=M1e;Dn.ScrollContainer=RG;Dn.DataRenderer=IG;const[Uze,NG]=nu("Tabs component was not found in the tree");var CI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Vze={},PG=Rt((e,t)=>{const n=ot("TabsList",Vze,e),{children:r,className:i,grow:o,justify:s,classNames:a,styles:u,style:l,mod:c,...f}=n,d=NG();return A.jsx(Ue,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:o,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":s},children:r})});PG.classes=CI;PG.displayName="@mantine/core/TabsList";const Hze={},OG=Rt((e,t)=>{const n=ot("TabsPanel",Hze,e),{children:r,className:i,value:o,classNames:s,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=NG(),h=d.value===o,m=d.keepMounted||c||h?r:null;return A.jsx(Ue,{...f,...d.getStyles("panel",{className:i,classNames:s,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(o),"aria-labelledby":d.getTabId(o),children:m})});OG.classes=CI;OG.displayName="@mantine/core/TabsPanel";const qze={},FG=Rt((e,t)=>{const n=ot("TabsTab",qze,e),{className:r,children:i,rightSection:o,leftSection:s,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:m,vars:p,mod:g,tabIndex:v,...b}=n,w=As(),{dir:E}=J1(),T=NG(),C=a===T.value,S=R=>{T.onChange(T.allowTabDeactivation&&a===T.value?null:a),u==null||u(R)},I={classNames:h,styles:m,props:n};return A.jsxs(gf,{...b,...T.getStyles("tab",{className:r,style:d,variant:T.variant,...I}),disabled:c,unstyled:T.unstyled,variant:T.variant,mod:[{active:C,disabled:c,orientation:T.orientation,inverted:T.inverted,placement:T.orientation==="vertical"&&T.placement},g],ref:t,role:"tab",id:T.getTabId(a),"aria-selected":C,tabIndex:v||C||T.value===null?0:-1,"aria-controls":T.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?qi(f,w):void 0},onKeyDown:Gq({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:T.activateTabWithKeyboard,loop:T.loop,orientation:T.orientation||"horizontal",dir:E,onKeyDown:l}),children:[s&&A.jsx("span",{...T.getStyles("tabSection",I),"data-position":"left",children:s}),i&&A.jsx("span",{...T.getStyles("tabLabel",I),children:i}),o&&A.jsx("span",{...T.getStyles("tabSection",I),"data-position":"right",children:o})]})});FG.classes=CI;FG.displayName="@mantine/core/TabsTab";const Nre="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Wze={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Gze=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":wi(t),"--tabs-color":qi(n,e),"--tabs-text-color":CT(r,e)?Yx({color:n,theme:e,autoContrast:r}):void 0}}),Nr=Rt((e,t)=>{const n=ot("Tabs",Wze,e),{defaultValue:r,value:i,onChange:o,orientation:s,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:m,inverted:p,placement:g,keepMounted:v,classNames:b,styles:w,unstyled:E,className:T,style:C,vars:S,autoContrast:I,mod:R,...P}=n,M=Cl(l),[B,L]=ya({value:i,defaultValue:r,finalValue:null,onChange:o}),z=nn({name:"Tabs",props:n,classes:CI,className:T,style:C,classNames:b,styles:w,unstyled:E,vars:S,varsResolver:Gze});return A.jsx(Uze,{value:{placement:g,value:B,orientation:s,id:M,loop:u,activateTabWithKeyboard:c,getTabId:n6(`${M}-tab`,Nre),getPanelId:n6(`${M}-panel`,Nre),onChange:L,allowTabDeactivation:f,variant:d,color:h,radius:m,inverted:p,keepMounted:v,unstyled:E,getStyles:z},children:A.jsx(Ue,{ref:t,id:M,variant:d,mod:[{orientation:s,inverted:s==="horizontal"&&p,placement:s==="vertical"&&g},R],...z("root"),...P,children:a})})});Nr.classes=CI;Nr.displayName="@mantine/core/Tabs";Nr.Tab=FG;Nr.Panel=OG;Nr.List=PG;const Yze={},M0=Rt((e,t)=>{const n=ot("TextInput",Yze,e);return A.jsx(vd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});M0.classes=vd.classes;M0.displayName="@mantine/core/TextInput";const Kze=["h1","h2","h3","h4","h5","h6"],Xze=["xs","sm","md","lg","xl"];function Qze(e,t){const n=t!==void 0?t:`h${e}`;return Kze.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:Xze.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:et(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var $1e={root:"m_8a5d1357"};const Jze={order:1},Zze=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const o=Qze(t,n);return{root:{"--title-fw":o.fontWeight,"--title-lh":o.lineHeight,"--title-fz":o.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},zo=Rt((e,t)=>{const n=ot("Title",Jze,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:m,...p}=n,g=nn({name:"Title",props:n,classes:$1e,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:Zze});return[1,2,3,4,5,6].includes(u)?A.jsx(Ue,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},m],size:c,...p}):null});zo.classes=$1e;zo.displayName="@mantine/core/Title";function eUe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(o=>o(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function tUe(e){return F.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function nUe(e,t,n){const r=[],i=[],o={};for(const s of e){const a=s.position||t;o[a]=o[a]||0,o[a]+=1,o[a]<=n?i.push(s):r.push(s)}return{notifications:i,queue:r}}const rUe=()=>eUe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),tw=rUe(),iUe=(e=tw)=>tUe(e);function jT(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=nUe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function oUe(e,t=tw){const n=e.id||YE();return jT(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function L1e(e,t=tw){return jT(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function sUe(e,t=tw){return jT(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function aUe(e=tw){jT(e,()=>[])}function uUe(e=tw){jT(e,t=>t.slice(0,e.getState().limit))}const nw={show:oUe,hide:L1e,update:sUe,clean:aUe,cleanQueue:uUe,updateState:jT};function Uz(){return Uz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uz.apply(null,arguments)}function B1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Vz(e,t){return Vz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Vz(e,t)}function j1e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Vz(e,t)}var iB={exports:{}},oB,Pre;function lUe(){if(Pre)return oB;Pre=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return oB=e,oB}var sB,Ore;function cUe(){if(Ore)return sB;Ore=1;var e=lUe();function t(){}function n(){}return n.resetWarningCache=t,sB=function(){function r(s,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},sB}var Fre;function fUe(){return Fre||(Fre=1,iB.exports=cUe()()),iB.exports}var dUe=fUe();const Mre=_c(dUe),$re={disabled:!1},d6=Gr.createContext(null);var hUe=function(t){return t.scrollTop},RA="unmounted",Ab="exited",Db="entering",EE="entered",Hz="exiting",kg=function(e){j1e(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,u;return o.appearStatus=null,r.in?a?(u=Ab,o.appearStatus=Db):u=EE:r.unmountOnExit||r.mountOnEnter?u=RA:u=Ab,o.state={status:u},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===RA?{status:Ab}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==Db&&s!==EE&&(o=Db):(s===Db||s===EE)&&(o=Hz)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===Db){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:IA.findDOMNode(this);s&&hUe(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ab&&this.setState({status:RA})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[IA.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!s||$re.disabled){this.safeSetState({status:EE},function(){o.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Db},function(){o.props.onEntering(l,c),o.onTransitionEnd(d,function(){o.safeSetState({status:EE},function(){o.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:IA.findDOMNode(this);if(!o||$re.disabled){this.safeSetState({status:Ab},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Hz},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:Ab},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:IA.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===RA)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=B1e(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Gr.createElement(d6.Provider,{value:null},typeof s=="function"?s(i,a):Gr.cloneElement(Gr.Children.only(s),a))},t}(Gr.Component);kg.contextType=d6;kg.propTypes={};function Q_(){}kg.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Q_,onEntering:Q_,onEntered:Q_,onExit:Q_,onExiting:Q_,onExited:Q_};kg.UNMOUNTED=RA;kg.EXITED=Ab;kg.ENTERING=Db;kg.ENTERED=EE;kg.EXITING=Hz;function pUe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MG(e,t){var n=function(o){return t&&F.isValidElement(o)?t(o):o},r=Object.create(null);return e&&F.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function mUe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var o in e)o in t?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var u in t){if(r[u])for(s=0;s<r[u].length;s++){var l=r[u][s];a[r[u][s]]=n(l)}a[u]=n(u)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function Gb(e,t,n){return n[t]!=null?n[t]:e.props[t]}function gUe(e,t){return MG(e.children,function(n){return F.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Gb(n,"appear",e),enter:Gb(n,"enter",e),exit:Gb(n,"exit",e)})})}function yUe(e,t,n){var r=MG(e.children),i=mUe(t,r);return Object.keys(i).forEach(function(o){var s=i[o];if(F.isValidElement(s)){var a=o in t,u=o in r,l=t[o],c=F.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[o]=F.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:Gb(s,"exit",e),enter:Gb(s,"enter",e)}):!u&&a&&!c?i[o]=F.cloneElement(s,{in:!1}):u&&a&&F.isValidElement(l)&&(i[o]=F.cloneElement(s,{onExited:n.bind(null,s),in:l.props.in,exit:Gb(s,"exit",e),enter:Gb(s,"enter",e)}))}}),i}var vUe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},bUe={component:"div",childFactory:function(t){return t}},Py=function(e){j1e(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=o.handleExited.bind(pUe(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,u=o.firstRender;return{children:u?gUe(i,a):yUe(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=MG(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var u=Uz({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=B1e(i,["component","childFactory"]),u=this.state.contextValue,l=vUe(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?Gr.createElement(d6.Provider,{value:u},l):Gr.createElement(d6.Provider,{value:u},Gr.createElement(o,a,l))},t}(Gr.Component);Py.propTypes={};Py.defaultProps=bUe;const z1e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function xUe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),z1e.reduce((n,r)=>(n[r]=[],n),{}))}const Lre={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},wUe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function _Ue({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,o]=n.split("-"),s=o==="center"?`${i}-center`:o,a={opacity:0,maxHeight:t,transform:Lre[s],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:wUe[s]},l={opacity:0,maxHeight:0,transform:Lre[s]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function EUe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const U1e=F.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:o,message:s,...a}=e,u=EUe(n,e.autoClose),l=F.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return F.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),F.useEffect(()=>(d(),c),[u]),A.jsx(vG,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:s})});U1e.displayName="@mantine/notifications/NotificationContainer";var V1e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const TUe=kg,CUe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Ec("overlay"),store:tw,withinPortal:!0},SUe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":et(n)}}),Ig=Rt((e,t)=>{const n=ot("Notifications",CUe,e),{classNames:r,className:i,style:o,styles:s,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:m,zIndex:p,store:g,portalProps:v,withinPortal:b,...w}=n,E=As(),T=iUe(g),C=p5e(),S=JM(),I=F.useRef({}),R=F.useRef(0),M=(E.respectReducedMotion?S:!1)?1:f,B=nn({name:"Notifications",classes:V1e,props:n,className:i,style:o,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:SUe});F.useEffect(()=>{g==null||g.updateState(G=>({...G,limit:m||5,defaultPosition:l}))},[m,l]),nm(()=>{T.notifications.length>R.current&&setTimeout(()=>C(),0),R.current=T.notifications.length},[T.notifications]);const L=xUe(T.notifications,l),z=z1e.reduce((G,W)=>(G[W]=L[W].map(({style:te,...Z})=>A.jsx(TUe,{timeout:M,onEnter:()=>I.current[Z.id].offsetHeight,nodeRef:{current:I.current[Z.id]},children:re=>A.jsx(U1e,{ref:q=>{I.current[Z.id]=q},data:Z,onHide:q=>L1e(q,g),autoClose:c,...B("notification",{style:{..._Ue({state:re,position:W,transitionDuration:M,maxHeight:h}),...te}})})},Z.id)),G),{});return A.jsxs(Z1,{withinPortal:b,...v,children:[A.jsx(Ue,{...B("root"),"data-position":"top-center",ref:t,...w,children:A.jsx(Py,{children:z["top-center"]})}),A.jsx(Ue,{...B("root"),"data-position":"top-left",...w,children:A.jsx(Py,{children:z["top-left"]})}),A.jsx(Ue,{...B("root",{className:b2.classNames.fullWidth}),"data-position":"top-right",...w,children:A.jsx(Py,{children:z["top-right"]})}),A.jsx(Ue,{...B("root",{className:b2.classNames.fullWidth}),"data-position":"bottom-right",...w,children:A.jsx(Py,{children:z["bottom-right"]})}),A.jsx(Ue,{...B("root"),"data-position":"bottom-left",...w,children:A.jsx(Py,{children:z["bottom-left"]})}),A.jsx(Ue,{...B("root"),"data-position":"bottom-center",...w,children:A.jsx(Py,{children:z["bottom-center"]})})]})});Ig.classes=V1e;Ig.displayName="@mantine/notifications/Notifications";Ig.show=nw.show;Ig.hide=nw.hide;Ig.update=nw.update;Ig.clean=nw.clean;Ig.cleanQueue=nw.cleanQueue;Ig.updateState=nw.updateState;const H1e=F.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Go=()=>F.useContext(H1e);function AUe({children:e}){const[t,n]=F.useState(void 0),r=F.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return A.jsx(H1e.Provider,{value:r,children:e})}var jS={},Bre;function DUe(){if(Bre)return jS;Bre=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.parse=s,jS.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function s(d,h){const m=new o,p=d.length;if(p<2)return m;const g=(h==null?void 0:h.decode)||c;let v=0;do{const b=d.indexOf("=",v);if(b===-1)break;const w=d.indexOf(";",v),E=w===-1?p:w;if(b>E){v=d.lastIndexOf(";",b-1)+1;continue}const T=a(d,v,b),C=u(d,b,T),S=d.slice(T,C);if(m[S]===void 0){let I=a(d,b+1,E),R=u(d,E,I);const P=g(d.slice(I,R));m[S]=P}v=E+1}while(v<p);return m}function a(d,h,m){do{const p=d.charCodeAt(h);if(p!==32&&p!==9)return h}while(++h<m);return m}function u(d,h,m){for(;h>m;){const p=d.charCodeAt(--h);if(p!==32&&p!==9)return h+1}return m}function l(d,h,m){const p=(m==null?void 0:m.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const g=p(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let v=d+"="+g;if(!m)return v;if(m.maxAge!==void 0){if(!Number.isInteger(m.maxAge))throw new TypeError(`option maxAge is invalid: ${m.maxAge}`);v+="; Max-Age="+m.maxAge}if(m.domain){if(!n.test(m.domain))throw new TypeError(`option domain is invalid: ${m.domain}`);v+="; Domain="+m.domain}if(m.path){if(!r.test(m.path))throw new TypeError(`option path is invalid: ${m.path}`);v+="; Path="+m.path}if(m.expires){if(!f(m.expires)||!Number.isFinite(m.expires.valueOf()))throw new TypeError(`option expires is invalid: ${m.expires}`);v+="; Expires="+m.expires.toUTCString()}if(m.httpOnly&&(v+="; HttpOnly"),m.secure&&(v+="; Secure"),m.partitioned&&(v+="; Partitioned"),m.priority)switch(typeof m.priority=="string"?m.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${m.priority}`)}if(m.sameSite)switch(typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${m.sameSite}`)}return v}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return jS}DUe();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jre="popstate";function kUe(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return qz("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:uk(i)}return RUe(t,n,null,e)}function fo(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ud(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function IUe(){return Math.random().toString(36).substring(2,10)}function zre(e,t){return{usr:e.state,key:e.key,idx:t}}function qz(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?zT(t):t,state:n,key:t&&t.key||r||IUe()}}function uk({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function zT(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function RUe(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",u=null,l=c();l==null&&(l=0,s.replaceState({...s.state,idx:l},""));function c(){return(s.state||{idx:null}).idx}function f(){a="POP";let g=c(),v=g==null?null:g-l;l=g,u&&u({action:a,location:p.location,delta:v})}function d(g,v){a="PUSH";let b=qz(p.location,g,v);l=c()+1;let w=zre(b,l),E=p.createHref(b);try{s.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}o&&u&&u({action:a,location:p.location,delta:1})}function h(g,v){a="REPLACE";let b=qz(p.location,g,v);l=c();let w=zre(b,l),E=p.createHref(b);s.replaceState(w,"",E),o&&u&&u({action:a,location:p.location,delta:0})}function m(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:uk(g);return b=b.replace(/ $/,"%20"),fo(v,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,v)}let p={get action(){return a},get location(){return e(i,s)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(jre,f),u=g,()=>{i.removeEventListener(jre,f),u=null}},createHref(g){return t(i,g)},createURL:m,encodeLocation(g){let v=m(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(g){return s.go(g)}};return p}function q1e(e,t,n="/"){return NUe(e,t,n,!1)}function NUe(e,t,n,r){let i=typeof t=="string"?zT(t):t,o=x1(i.pathname||"/",n);if(o==null)return null;let s=W1e(e);PUe(s);let a=null;for(let u=0;a==null&&u<s.length;++u){let l=HUe(o);a=UUe(s[u],l,r)}return a}function W1e(e,t=[],n=[],r=""){let i=(o,s,a)=>{let u={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};u.relativePath.startsWith("/")&&(fo(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=K0([r,u.relativePath]),c=n.concat(u);o.children&&o.children.length>0&&(fo(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),W1e(o.children,t,c,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:jUe(l,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let u of G1e(o.path))i(o,s,u)}),t}function G1e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=G1e(r.join("/")),a=[];return a.push(...s.map(u=>u===""?o:[o,u].join("/"))),i&&a.push(...s),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function PUe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:zUe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var OUe=/^:[\w-]+$/,FUe=3,MUe=2,$Ue=1,LUe=10,BUe=-2,Ure=e=>e==="*";function jUe(e,t){let n=e.split("/"),r=n.length;return n.some(Ure)&&(r+=BUe),t&&(r+=MUe),n.filter(i=>!Ure(i)).reduce((i,o)=>i+(OUe.test(o)?FUe:o===""?$Ue:LUe),r)}function zUe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function UUe(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=o==="/"?t:t.slice(o.length)||"/",f=h6({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=h6({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),s.push({params:i,pathname:K0([o,f.pathname]),pathnameBase:YUe(K0([o,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(o=K0([o,f.pathnameBase]))}return s}function h6(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=VUe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let m=a[d]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:e}}function VUe(e,t=!1,n=!0){ud(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function HUe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ud(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function x1(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function qUe(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?zT(e):e;return{pathname:n?n.startsWith("/")?n:WUe(n,t):t,search:KUe(r),hash:XUe(i)}}function WUe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function aB(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GUe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $G(e){let t=GUe(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function LG(e,t,n,r=!1){let i;typeof e=="string"?i=zT(e):(i={...e},fo(!i.pathname||!i.pathname.includes("?"),aB("?","pathname","search",i)),fo(!i.pathname||!i.pathname.includes("#"),aB("#","pathname","hash",i)),fo(!i.search||!i.search.includes("#"),aB("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let f=t.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=qUe(i,a),l=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var K0=e=>e.join("/").replace(/\/\/+/g,"/"),YUe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KUe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,XUe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function QUe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Y1e=["POST","PUT","PATCH","DELETE"];new Set(Y1e);var JUe=["GET",...Y1e];new Set(JUe);var UT=F.createContext(null);UT.displayName="DataRouter";var k5=F.createContext(null);k5.displayName="DataRouterState";var K1e=F.createContext({isTransitioning:!1});K1e.displayName="ViewTransition";var ZUe=F.createContext(new Map);ZUe.displayName="Fetchers";var eVe=F.createContext(null);eVe.displayName="Await";var $h=F.createContext(null);$h.displayName="Navigation";var SI=F.createContext(null);SI.displayName="Location";var xd=F.createContext({outlet:null,matches:[],isDataRoute:!1});xd.displayName="Route";var BG=F.createContext(null);BG.displayName="RouteError";function jG(e,{relative:t}={}){fo(VT(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=F.useContext($h),{hash:i,pathname:o,search:s}=AI(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:K0([n,o])),r.createHref({pathname:a,search:s,hash:i})}function VT(){return F.useContext(SI)!=null}function wd(){return fo(VT(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(SI).location}var X1e="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Q1e(e){F.useContext($h).static||F.useLayoutEffect(e)}function Lh(){let{isDataRoute:e}=F.useContext(xd);return e?pVe():tVe()}function tVe(){fo(VT(),"useNavigate() may be used only in the context of a <Router> component.");let e=F.useContext(UT),{basename:t,navigator:n}=F.useContext($h),{matches:r}=F.useContext(xd),{pathname:i}=wd(),o=JSON.stringify($G(r)),s=F.useRef(!1);return Q1e(()=>{s.current=!0}),F.useCallback((u,l={})=>{if(ud(s.current,X1e),!s.current)return;if(typeof u=="number"){n.go(u);return}let c=LG(u,JSON.parse(o),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:K0([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,o,i,e])}var nVe=F.createContext(null);function rVe(e){let t=F.useContext(xd).outlet;return t&&F.createElement(nVe.Provider,{value:e},t)}function om(){let{matches:e}=F.useContext(xd),t=e[e.length-1];return t?t.params:{}}function AI(e,{relative:t}={}){let{matches:n}=F.useContext(xd),{pathname:r}=wd(),i=JSON.stringify($G(n));return F.useMemo(()=>LG(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function J1e(e,t){return Z1e(e,t)}function Z1e(e,t,n,r){var v;fo(VT(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=F.useContext($h),{matches:o}=F.useContext(xd),s=o[o.length-1],a=s?s.params:{},u=s?s.pathname:"/",l=s?s.pathnameBase:"/",c=s&&s.route;{let b=c&&c.path||"";eve(u,!c||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=wd(),d;if(t){let b=typeof t=="string"?zT(t):t;fo(l==="/"||((v=b.pathname)==null?void 0:v.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${b.pathname}" was given in the \`location\` prop.`),d=b}else d=f;let h=d.pathname||"/",m=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let p=q1e(e,{pathname:m});ud(c||p!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),ud(p==null||p[p.length-1].route.element!==void 0||p[p.length-1].route.Component!==void 0||p[p.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=uVe(p&&p.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:K0([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:K0([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return t&&g?F.createElement(SI.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function iVe(){let e=hVe(),t=QUe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:o},"ErrorBoundary")," or"," ",F.createElement("code",{style:o},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),n?F.createElement("pre",{style:i},n):null,s)}var oVe=F.createElement(iVe,null),sVe=class extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?F.createElement(xd.Provider,{value:this.props.routeContext},F.createElement(BG.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aVe({routeContext:e,match:t,children:n}){let r=F.useContext(UT);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),F.createElement(xd.Provider,{value:e},n)}function uVe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(l=>l.route.id&&(o==null?void 0:o[l.route.id])!==void 0);fo(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let s=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,m=null;n&&(f=o&&l.route.id?o[l.route.id]:void 0,h=l.route.errorElement||oVe,s&&(a<0&&c===0?(eve("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,m=null):a===c&&(d=!0,m=l.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,c+1)),g=()=>{let v;return f?v=h:d?v=m:l.route.Component?v=F.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=u,F.createElement(aVe,{match:l,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?F.createElement(sVe,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function zG(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lVe(e){let t=F.useContext(UT);return fo(t,zG(e)),t}function cVe(e){let t=F.useContext(k5);return fo(t,zG(e)),t}function fVe(e){let t=F.useContext(xd);return fo(t,zG(e)),t}function UG(e){let t=fVe(e),n=t.matches[t.matches.length-1];return fo(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function dVe(){return UG("useRouteId")}function hVe(){var r;let e=F.useContext(BG),t=cVe("useRouteError"),n=UG("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function pVe(){let{router:e}=lVe("useNavigate"),t=UG("useNavigate"),n=F.useRef(!1);return Q1e(()=>{n.current=!0}),F.useCallback(async(i,o={})=>{ud(n.current,X1e),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var Vre={};function eve(e,t,n){!t&&!Vre[e]&&(Vre[e]=!0,ud(!1,n))}F.memo(mVe);function mVe({routes:e,future:t,state:n}){return Z1e(e,void 0,n,t)}function VG({to:e,replace:t,state:n,relative:r}){fo(VT(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=F.useContext($h);ud(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=F.useContext(xd),{pathname:s}=wd(),a=Lh(),u=LG(e,$G(o),s,r==="path"),l=JSON.stringify(u);return F.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function gVe(e){return rVe(e.context)}function kb(e){fo(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yVe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){fo(!VT(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),a=F.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof n=="string"&&(n=zT(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=F.useMemo(()=>{let m=x1(u,s);return m==null?null:{location:{pathname:m,search:l,hash:c,state:f,key:d},navigationType:r}},[s,u,l,c,f,d,r]);return ud(h!=null,`<Router basename="${s}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:F.createElement($h.Provider,{value:a},F.createElement(SI.Provider,{children:t,value:h}))}function vVe({children:e,location:t}){return J1e(Wz(e),t)}function Wz(e,t=[]){let n=[];return F.Children.forEach(e,(r,i)=>{if(!F.isValidElement(r))return;let o=[...t,i];if(r.type===F.Fragment){n.push.apply(n,Wz(r.props.children,o));return}fo(r.type===kb,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fo(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Wz(r.props.children,o)),n.push(s)}),n}var y4="get",v4="application/x-www-form-urlencoded";function I5(e){return e!=null&&typeof e.tagName=="string"}function bVe(e){return I5(e)&&e.tagName.toLowerCase()==="button"}function xVe(e){return I5(e)&&e.tagName.toLowerCase()==="form"}function wVe(e){return I5(e)&&e.tagName.toLowerCase()==="input"}function _Ve(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EVe(e,t){return e.button===0&&(!t||t==="_self")&&!_Ve(e)}function Gz(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function TVe(e,t){let n=Gz(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(o=>{n.append(i,o)})}),n}var o3=null;function CVe(){if(o3===null)try{new FormData(document.createElement("form"),0),o3=!1}catch{o3=!0}return o3}var SVe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uB(e){return e!=null&&!SVe.has(e)?(ud(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${v4}"`),null):e}function AVe(e,t){let n,r,i,o,s;if(xVe(e)){let a=e.getAttribute("action");r=a?x1(a,t):null,n=e.getAttribute("method")||y4,i=uB(e.getAttribute("enctype"))||v4,o=new FormData(e)}else if(bVe(e)||wVe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?x1(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||y4,i=uB(e.getAttribute("formenctype"))||uB(a.getAttribute("enctype"))||v4,o=new FormData(a,e),!CVe()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";o.append(`${d}x`,"0"),o.append(`${d}y`,"0")}else l&&o.append(l,f)}}else{if(I5(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=y4,r=null,i=v4,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}function HG(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function DVe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kVe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function IVe(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await DVe(o,n);return s.links?s.links():[]}return[]}));return OVe(r.flat(1).filter(kVe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Hre(e,t,n,r,i,o){let s=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return o==="assets"?t.filter((u,l)=>s(u,l)||a(u,l)):o==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(s(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function RVe(e,t){return NVe(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function NVe(e){return[...new Set(e)]}function PVe(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function OVe(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(PVe(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function FVe(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function MVe(){let e=F.useContext(UT);return HG(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $Ve(){let e=F.useContext(k5);return HG(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var qG=F.createContext(void 0);qG.displayName="FrameworkContext";function tve(){let e=F.useContext(qG);return HG(e,"You must render this element inside a <HydratedRouter> element"),e}function LVe(e,t){let n=F.useContext(qG),[r,i]=F.useState(!1),[o,s]=F.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=F.useRef(null);F.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let p=v=>{v.forEach(b=>{s(b.isIntersecting)})},g=new IntersectionObserver(p,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),F.useEffect(()=>{if(r){let p=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(p)}}},[r]);let h=()=>{i(!0)},m=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,d,{}]:[o,d,{onFocus:zS(a,h),onBlur:zS(u,m),onMouseEnter:zS(l,h),onMouseLeave:zS(c,m),onTouchStart:zS(f,h)}]:[!1,d,{}]}function zS(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function BVe({page:e,...t}){let{router:n}=MVe(),r=F.useMemo(()=>q1e(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?F.createElement(zVe,{page:e,matches:r,...t}):null}function jVe(e){let{manifest:t,routeModules:n}=tve(),[r,i]=F.useState([]);return F.useEffect(()=>{let o=!1;return IVe(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function zVe({page:e,matches:t,...n}){let r=wd(),{manifest:i,routeModules:o}=tve(),{loaderData:s,matches:a}=$Ve(),u=F.useMemo(()=>Hre(e,t,a,i,r,"data"),[e,t,a,i,r]),l=F.useMemo(()=>Hre(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=F.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,m=!1;if(t.forEach(g=>{var b;let v=i.routes[g.route.id];!v||!v.hasLoader||(!u.some(w=>w.route.id===g.route.id)&&g.route.id in s&&((b=o[g.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?m=!0:h.add(g.route.id))}),h.size===0)return[];let p=FVe(e);return m&&h.size>0&&p.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[p.pathname+p.search]},[s,r,i,u,t,e,o]),f=F.useMemo(()=>RVe(l,i),[l,i]),d=jVe(l);return F.createElement(F.Fragment,null,c.map(h=>F.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>F.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:m})=>F.createElement("link",{key:h,...m})))}function UVe(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var nve=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nve&&(window.__reactRouterVersion="7.1.3")}catch{}function VVe({basename:e,children:t,window:n}){let r=F.useRef();r.current==null&&(r.current=kUe({window:n,v5Compat:!0}));let i=r.current,[o,s]=F.useState({action:i.action,location:i.location}),a=F.useCallback(u=>{F.startTransition(()=>s(u))},[s]);return F.useLayoutEffect(()=>i.listen(a),[i,a]),F.createElement(yVe,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var rve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ive=F.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:m}=F.useContext($h),p=typeof l=="string"&&rve.test(l),g,v=!1;if(typeof l=="string"&&p&&(g=l,nve))try{let R=new URL(window.location.href),P=l.startsWith("//")?new URL(R.protocol+l):new URL(l),M=x1(P.pathname,m);P.origin===R.origin&&M!=null?l=M+P.search+P.hash:v=!0}catch{ud(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=jG(l,{relative:i}),[w,E,T]=LVe(r,d),C=GVe(l,{replace:s,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function S(R){t&&t(R),R.defaultPrevented||C(R)}let I=F.createElement("a",{...d,...T,href:g||b,onClick:v||o?t:S,ref:UVe(h,E),target:u,"data-discover":!p&&n==="render"?"true":void 0});return w&&!p?F.createElement(F.Fragment,null,I,F.createElement(BVe,{page:b})):I});ive.displayName="Link";var HVe=F.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:u,...l},c){let f=AI(s,{relative:l.relative}),d=wd(),h=F.useContext(k5),{navigator:m,basename:p}=F.useContext($h),g=h!=null&&JVe(f)&&a===!0,v=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=d.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&p&&(w=x1(w,p)||w);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let T=b===v||!i&&b.startsWith(v)&&b.charAt(E)==="/",C=w!=null&&(w===v||!i&&w.startsWith(v)&&w.charAt(v.length)==="/"),S={isActive:T,isPending:C,isTransitioning:g},I=T?t:void 0,R;typeof r=="function"?R=r(S):R=[r,T?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let P=typeof o=="function"?o(S):o;return F.createElement(ive,{...l,"aria-current":I,className:R,ref:c,style:P,to:s,viewTransition:a},typeof u=="function"?u(S):u)});HVe.displayName="NavLink";var qVe=F.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=y4,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let m=XVe(),p=QVe(a,{relative:l}),g=s.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&rve.test(a),b=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,T=(E==null?void 0:E.getAttribute("formmethod"))||s;m(E||w.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:o,relative:l,preventScrollReset:c,viewTransition:f})};return F.createElement("form",{ref:h,method:g,action:p,onSubmit:r?u:b,...d,"data-discover":!v&&e==="render"?"true":void 0})});qVe.displayName="Form";function WVe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ove(e){let t=F.useContext(UT);return fo(t,WVe(e)),t}function GVe(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=Lh(),u=wd(),l=AI(e,{relative:o});return F.useCallback(c=>{if(EVe(c,t)){c.preventDefault();let f=n!==void 0?n:uk(u)===uk(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[u,a,l,n,r,t,e,i,o,s])}function Rg(e){ud(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=F.useRef(Gz(e)),n=F.useRef(!1),r=wd(),i=F.useMemo(()=>TVe(r.search,n.current?null:t.current),[r.search]),o=Lh(),s=F.useCallback((a,u)=>{const l=Gz(typeof a=="function"?a(i):a);n.current=!0,o("?"+l,u)},[o,i]);return[i,s]}var YVe=0,KVe=()=>`__${String(++YVe)}__`;function XVe(){let{router:e}=ove("useSubmit"),{basename:t}=F.useContext($h),n=dVe();return F.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:u,body:l}=AVe(r,t);if(i.navigate===!1){let c=i.fetcherKey||KVe();await e.fetch(c,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function QVe(e,{relative:t}={}){let{basename:n}=F.useContext($h),r=F.useContext(xd);fo(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...AI(e||".",{relative:t})},s=wd();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();o.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:K0([n,o.pathname])),uk(o)}function JVe(e,t={}){let n=F.useContext(K1e);fo(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ove("useViewTransitionState"),i=AI(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=x1(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=x1(n.nextLocation.pathname,r)||n.nextLocation.pathname;return h6(i.pathname,s)!=null||h6(i.pathname,o)!=null}new TextEncoder;const WG=F.createContext(null);WG.displayName="@mantine/modals/ModalsContext";function ZVe(){const e=F.useContext(WG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function eHe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:o=!0,groupProps:s,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=ZVe(),h=p=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(p)),typeof a=="function"&&a(),o&&d.closeModal(e)},m=p=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(p)),typeof u=="function"&&u(),i&&d.closeModal(e)};return A.jsxs(A.Fragment,{children:[l&&A.jsx(Ue,{mb:"md",children:l}),A.jsxs(ui,{mt:l?0:"md",justify:"flex-end",...s,children:[A.jsx(wn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),A.jsx(wn,{...n,onClick:m,children:(n==null?void 0:n.children)||f})]})]})}const[tHe,GG]=T5e("mantine-modals"),qre=e=>{const t=e.modalId||YE();return GG("openConfirmModal")({...e,modalId:t}),t};GG("closeModal");GG("closeAllModals");function Wre(e,t){var n,r,i,o;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(o=(i=e.props).onClose)==null||o.call(i)}function nHe(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(o=>o.id===t.modalId);if(!r)return e;Wre(r,t.canceled);const i=e.modals.filter(o=>o.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Wre(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,o=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),s=((n=e.current)==null?void 0:n.id)===r&&o.find(a=>a.id===r)||e.current;return{...e,modals:o,current:s}}default:return e}}function rHe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:o,closeOnCancel:s,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:o,closeOnCancel:s,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function iHe({children:e,modalProps:t,labels:n,modals:r}){const[i,o]=F.useReducer(nHe,{modals:[],current:null}),s=F.useRef(i);s.current=i;const a=F.useCallback(b=>{o({type:"CLOSE_ALL",canceled:b})},[s,o]),u=F.useCallback(({modalId:b,...w})=>{const E=b||YE();return o({type:"OPEN",modal:{id:E,type:"content",props:w}}),E},[o]),l=F.useCallback(({modalId:b,...w})=>{const E=b||YE();return o({type:"OPEN",modal:{id:E,type:"confirm",props:w}}),E},[o]),c=F.useCallback((b,{modalId:w,...E})=>{const T=w||YE();return o({type:"OPEN",modal:{id:T,type:"context",props:E,ctx:b}}),T},[o]),f=F.useCallback((b,w)=>{o({type:"CLOSE",modalId:b,canceled:w})},[s,o]),d=F.useCallback(({modalId:b,...w})=>{o({type:"UPDATE",modalId:b,newProps:w})},[o]),h=F.useCallback(({modalId:b,...w})=>{o({type:"UPDATE",modalId:b,newProps:w})},[o]);tHe({openModal:u,openConfirmModal:l,openContextModal:({modal:b,...w})=>c(b,w),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const m={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},p=()=>{const b=s.current.current;switch(b==null?void 0:b.type){case"context":{const{innerProps:w,...E}=b.props,T=r[b.ctx];return{modalProps:E,content:A.jsx(T,{innerProps:w,context:m,id:b.id})}}case"confirm":{const{modalProps:w,confirmProps:E}=rHe(b.props);return{modalProps:w,content:A.jsx(eHe,{...E,id:b.id,labels:b.props.labels||n})}}case"content":{const{children:w,...E}=b.props;return{modalProps:E,content:w}}default:return{modalProps:{},content:null}}},{modalProps:g,content:v}=p();return A.jsxs(WG.Provider,{value:m,children:[A.jsx(Co,{zIndex:Ec("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var b;return f((b=i.current)==null?void 0:b.id)},children:v}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oHe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=(e,t,n,r)=>{const i=F.forwardRef(({color:o="currentColor",size:s=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>F.createElement("svg",{ref:d,...oHe[e],width:s,height:s,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:o}:{strokeWidth:a,stroke:o},...f},[u&&F.createElement("title",{key:"svg-title"},u),...r.map(([h,m])=>F.createElement(h,m)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sHe=Gn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aHe=Gn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ED=Gn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gre=Gn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yre=Gn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uHe=Gn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lHe=Gn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cHe=Gn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fHe=Gn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dHe=Gn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hHe=Gn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sve=Gn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R5=Gn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pHe=Gn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mHe=Gn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gHe=Gn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yHe=Gn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vHe=Gn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bHe=Gn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xHe=Gn("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wHe=Gn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YG=Gn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _He=Gn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ave=Gn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EHe=Gn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var THe=Gn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CHe=Gn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SHe=Gn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AHe=Gn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uve=Gn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DHe=Gn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kHe=Gn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IHe=Gn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RHe=Gn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NHe=Gn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lve=Gn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PHe=Gn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cve=Gn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OHe=Gn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fve=Gn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KG=Gn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kre=Gn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DI=Gn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FHe=Gn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MHe=Gn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $He=Gn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function dve(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const va="/correlation-study/";function Xre(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const s=n.slice(i,r).trim();(s||!o)&&t.push(s),i=r+1,r=n.indexOf(",",i)}return t}function hve(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const LHe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,BHe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jHe={};function Qre(e,t){return(jHe.jsx?BHe:LHe).test(e)}const zHe=/[ \t\n\f\r]/g;function UHe(e){return typeof e=="object"?e.type==="text"?Jre(e.value):!1:Jre(e)}function Jre(e){return e.replace(zHe,"")===""}class kI{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}kI.prototype.property={};kI.prototype.normal={};kI.prototype.space=null;function pve(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new kI(n,r,t)}function lk(e){return e.toLowerCase()}let _d=class{constructor(t,n){this.property=t,this.attribute=n}};_d.prototype.space=null;_d.prototype.boolean=!1;_d.prototype.booleanish=!1;_d.prototype.overloadedBoolean=!1;_d.prototype.number=!1;_d.prototype.commaSeparated=!1;_d.prototype.spaceSeparated=!1;_d.prototype.commaOrSpaceSeparated=!1;_d.prototype.mustUseProperty=!1;_d.prototype.defined=!1;let VHe=0;const nr=rw(),ws=rw(),mve=rw(),jt=rw(),Ui=rw(),QE=rw(),Kc=rw();function rw(){return 2**++VHe}const Yz=Object.freeze(Object.defineProperty({__proto__:null,boolean:nr,booleanish:ws,commaOrSpaceSeparated:Kc,commaSeparated:QE,number:jt,overloadedBoolean:mve,spaceSeparated:Ui},Symbol.toStringTag,{value:"Module"})),lB=Object.keys(Yz);class XG extends _d{constructor(t,n,r,i){let o=-1;if(super(t,n),Zre(this,"space",i),typeof r=="number")for(;++o<lB.length;){const s=lB[o];Zre(this,lB[o],(r&Yz[s])===Yz[s])}}}XG.prototype.defined=!0;function Zre(e,t,n){n&&(e[t]=n)}const HHe={}.hasOwnProperty;function HT(e){const t={},n={};let r;for(r in e.properties)if(HHe.call(e.properties,r)){const i=e.properties[r],o=new XG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[lk(r)]=r,n[lk(o.attribute)]=r}return new kI(t,n,e.space)}const gve=HT({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),yve=HT({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function vve(e,t){return t in e?e[t]:t}function bve(e,t){return vve(e,t.toLowerCase())}const xve=HT({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:bve,properties:{xmlns:null,xmlnsXLink:null}}),wve=HT({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ws,ariaAutoComplete:null,ariaBusy:ws,ariaChecked:ws,ariaColCount:jt,ariaColIndex:jt,ariaColSpan:jt,ariaControls:Ui,ariaCurrent:null,ariaDescribedBy:Ui,ariaDetails:null,ariaDisabled:ws,ariaDropEffect:Ui,ariaErrorMessage:null,ariaExpanded:ws,ariaFlowTo:Ui,ariaGrabbed:ws,ariaHasPopup:null,ariaHidden:ws,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ui,ariaLevel:jt,ariaLive:null,ariaModal:ws,ariaMultiLine:ws,ariaMultiSelectable:ws,ariaOrientation:null,ariaOwns:Ui,ariaPlaceholder:null,ariaPosInSet:jt,ariaPressed:ws,ariaReadOnly:ws,ariaRelevant:null,ariaRequired:ws,ariaRoleDescription:Ui,ariaRowCount:jt,ariaRowIndex:jt,ariaRowSpan:jt,ariaSelected:ws,ariaSetSize:jt,ariaSort:null,ariaValueMax:jt,ariaValueMin:jt,ariaValueNow:jt,ariaValueText:null,role:null}}),qHe=HT({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:bve,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:QE,acceptCharset:Ui,accessKey:Ui,action:null,allow:null,allowFullScreen:nr,allowPaymentRequest:nr,allowUserMedia:nr,alt:null,as:null,async:nr,autoCapitalize:null,autoComplete:Ui,autoFocus:nr,autoPlay:nr,blocking:Ui,capture:null,charSet:null,checked:nr,cite:null,className:Ui,cols:jt,colSpan:null,content:null,contentEditable:ws,controls:nr,controlsList:Ui,coords:jt|QE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nr,defer:nr,dir:null,dirName:null,disabled:nr,download:mve,draggable:ws,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nr,formTarget:null,headers:Ui,height:jt,hidden:nr,high:jt,href:null,hrefLang:null,htmlFor:Ui,httpEquiv:Ui,id:null,imageSizes:null,imageSrcSet:null,inert:nr,inputMode:null,integrity:null,is:null,isMap:nr,itemId:null,itemProp:Ui,itemRef:Ui,itemScope:nr,itemType:Ui,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nr,low:jt,manifest:null,max:null,maxLength:jt,media:null,method:null,min:null,minLength:jt,multiple:nr,muted:nr,name:null,nonce:null,noModule:nr,noValidate:nr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nr,optimum:jt,pattern:null,ping:Ui,placeholder:null,playsInline:nr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:nr,referrerPolicy:null,rel:Ui,required:nr,reversed:nr,rows:jt,rowSpan:jt,sandbox:Ui,scope:null,scoped:nr,seamless:nr,selected:nr,shadowRootClonable:nr,shadowRootDelegatesFocus:nr,shadowRootMode:null,shape:null,size:jt,sizes:null,slot:null,span:jt,spellCheck:ws,src:null,srcDoc:null,srcLang:null,srcSet:null,start:jt,step:null,style:null,tabIndex:jt,target:null,title:null,translate:null,type:null,typeMustMatch:nr,useMap:null,value:ws,width:jt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ui,axis:null,background:null,bgColor:null,border:jt,borderColor:null,bottomMargin:jt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nr,declare:nr,event:null,face:null,frame:null,frameBorder:null,hSpace:jt,leftMargin:jt,link:null,longDesc:null,lowSrc:null,marginHeight:jt,marginWidth:jt,noResize:nr,noHref:nr,noShade:nr,noWrap:nr,object:null,profile:null,prompt:null,rev:null,rightMargin:jt,rules:null,scheme:null,scrolling:ws,standby:null,summary:null,text:null,topMargin:jt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:jt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nr,disableRemotePlayback:nr,prefix:null,property:null,results:jt,security:null,unselectable:null}}),WHe=HT({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:vve,properties:{about:Kc,accentHeight:jt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:jt,amplitude:jt,arabicForm:null,ascent:jt,attributeName:null,attributeType:null,azimuth:jt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:jt,by:null,calcMode:null,capHeight:jt,className:Ui,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:jt,diffuseConstant:jt,direction:null,display:null,dur:null,divisor:jt,dominantBaseline:null,download:nr,dx:null,dy:null,edgeMode:null,editable:null,elevation:jt,enableBackground:null,end:null,event:null,exponent:jt,externalResourcesRequired:null,fill:null,fillOpacity:jt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:QE,g2:QE,glyphName:QE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:jt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:jt,horizOriginX:jt,horizOriginY:jt,id:null,ideographic:jt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:jt,k:jt,k1:jt,k2:jt,k3:jt,k4:jt,kernelMatrix:Kc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:jt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:jt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:jt,overlineThickness:jt,paintOrder:null,panose1:null,path:null,pathLength:jt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ui,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:jt,pointsAtY:jt,pointsAtZ:jt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Kc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Kc,rev:Kc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Kc,requiredFeatures:Kc,requiredFonts:Kc,requiredFormats:Kc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:jt,specularExponent:jt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:jt,strikethroughThickness:jt,string:null,stroke:null,strokeDashArray:Kc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:jt,strokeOpacity:jt,strokeWidth:null,style:null,surfaceScale:jt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Kc,tabIndex:jt,tableValues:null,target:null,targetX:jt,targetY:jt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Kc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:jt,underlineThickness:jt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:jt,values:null,vAlphabetic:jt,vMathematical:jt,vectorEffect:null,vHanging:jt,vIdeographic:jt,version:null,vertAdvY:jt,vertOriginX:jt,vertOriginY:jt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:jt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),GHe=/^data[-\w.:]+$/i,eie=/-[a-z]/g,YHe=/[A-Z]/g;function N5(e,t){const n=lk(t);let r=t,i=_d;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&GHe.test(t)){if(t.charAt(4)==="-"){const o=t.slice(5).replace(eie,XHe);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=t.slice(4);if(!eie.test(o)){let s=o.replace(YHe,KHe);s.charAt(0)!=="-"&&(s="-"+s),t="data"+s}}i=XG}return new i(r,t)}function KHe(e){return"-"+e.toLowerCase()}function XHe(e){return e.charAt(1).toUpperCase()}const QHe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},II=pve([yve,gve,xve,wve,qHe],"html"),iv=pve([yve,gve,xve,wve,WHe],"svg");function tie(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function _ve(e){return e.join(" ").trim()}var US={},cB,nie;function JHe(){if(nie)return cB;nie=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";cB=function(p,g){if(typeof p!="string")throw new TypeError("First argument must be a string");if(!p)return[];g=g||{};var v=1,b=1;function w(L){var z=L.match(t);z&&(v+=z.length);var G=L.lastIndexOf(u);b=~G?L.length-G:b+L.length}function E(){var L={line:v,column:b};return function(z){return z.position=new T(L),I(),z}}function T(L){this.start=L,this.end={line:v,column:b},this.source=g.source}T.prototype.content=p;function C(L){var z=new Error(g.source+":"+v+":"+b+": "+L);if(z.reason=L,z.filename=g.source,z.line=v,z.column=b,z.source=p,!g.silent)throw z}function S(L){var z=L.exec(p);if(z){var G=z[0];return w(G),p=p.slice(G.length),z}}function I(){S(n)}function R(L){var z;for(L=L||[];z=P();)z!==!1&&L.push(z);return L}function P(){var L=E();if(!(l!=p.charAt(0)||c!=p.charAt(1))){for(var z=2;f!=p.charAt(z)&&(c!=p.charAt(z)||l!=p.charAt(z+1));)++z;if(z+=2,f===p.charAt(z-1))return C("End of comment missing");var G=p.slice(2,z-2);return b+=2,w(G),p=p.slice(z),b+=2,L({type:d,comment:G})}}function M(){var L=E(),z=S(r);if(z){if(P(),!S(i))return C("property missing ':'");var G=S(o),W=L({type:h,property:m(z[0].replace(e,f)),value:G?m(G[0].replace(e,f)):f});return S(s),W}}function B(){var L=[];R(L);for(var z;z=M();)z!==!1&&(L.push(z),R(L));return L}return I(),B()};function m(p){return p?p.replace(a,f):f}return cB}var rie;function ZHe(){if(rie)return US;rie=1;var e=US.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(US,"__esModule",{value:!0});var t=e(JHe());function n(r,i){var o=null;if(!r||typeof r!="string")return o;var s=(0,t.default)(r),a=typeof i=="function";return s.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(o=o||{},o[l]=c)}}),o}return US.default=n,US}var eqe=ZHe();const iie=_c(eqe),tqe=iie.default||iie,P5=Eve("end"),Tm=Eve("start");function Eve(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function nqe(e){const t=Tm(e),n=P5(e);if(t&&n)return{start:t,end:n}}function TD(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?oie(e.position):"start"in e||"end"in e?oie(e):"line"in e||"column"in e?Kz(e):""}function Kz(e){return sie(e&&e.line)+":"+sie(e&&e.column)}function oie(e){return Kz(e&&e.start)+"-"+Kz(e&&e.end)}function sie(e){return e&&typeof e=="number"?e:1}class qu extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",o={},s=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof t=="string"?i=t:!o.cause&&t&&(s=!0,i=t.message,o.cause=t),!o.ruleId&&!o.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?o.ruleId=r:(o.source=r.slice(0,u),o.ruleId=r.slice(u+1))}if(!o.place&&o.ancestors&&o.ancestors){const u=o.ancestors[o.ancestors.length-1];u&&(o.place=u.position)}const a=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=TD(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=s&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}qu.prototype.file="";qu.prototype.name="";qu.prototype.reason="";qu.prototype.message="";qu.prototype.stack="";qu.prototype.column=void 0;qu.prototype.line=void 0;qu.prototype.ancestors=void 0;qu.prototype.cause=void 0;qu.prototype.fatal=void 0;qu.prototype.place=void 0;qu.prototype.ruleId=void 0;qu.prototype.source=void 0;const QG={}.hasOwnProperty,rqe=new Map,iqe=/[A-Z]/g,oqe=/-([a-z])/g,sqe=new Set(["table","tbody","thead","tfoot","tr"]),aqe=new Set(["td","th"]),Tve="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function uqe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=gqe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=mqe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?iv:II,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},o=Cve(i,e,void 0);return o&&typeof o!="string"?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function Cve(e,t,n){if(t.type==="element")return lqe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return cqe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return dqe(e,t,n);if(t.type==="mdxjsEsm")return fqe(e,t);if(t.type==="root")return hqe(e,t,n);if(t.type==="text")return pqe(e,t)}function lqe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=iv,e.schema=i),e.ancestors.push(t);const o=Ave(e,t.tagName,!1),s=yqe(e,t);let a=ZG(e,t);return sqe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!UHe(u):!0})),Sve(e,s,o,t),JG(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}function cqe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}ck(e,t.position)}function fqe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);ck(e,t.position)}function dqe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=iv,e.schema=i),e.ancestors.push(t);const o=t.name===null?e.Fragment:Ave(e,t.name,!0),s=vqe(e,t),a=ZG(e,t);return Sve(e,s,o,t),JG(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}function hqe(e,t,n){const r={};return JG(r,ZG(e,t)),e.create(t,e.Fragment,r,n)}function pqe(e,t){return t.value}function Sve(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function JG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function mqe(e,t,n){return r;function r(i,o,s,a){const l=Array.isArray(s.children)?n:t;return a?l(o,s,a):l(o,s)}}function gqe(e,t){return n;function n(r,i,o,s){const a=Array.isArray(o.children),u=Tm(r);return t(i,o,s,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function yqe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&QG.call(t.properties,i)){const o=bqe(e,i,t.properties[i]);if(o){const[s,a]=o;e.tableCellAlignToStyle&&s==="align"&&typeof a=="string"&&aqe.has(t.tagName)?r=a:n[s]=a}}if(r){const o=n.style||(n.style={});o[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function vqe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const o=r.data.estree.body[0];o.type;const s=o.expression;s.type;const a=s.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else ck(e,t.position);else{const i=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,o=e.evaluater.evaluateExpression(a.expression)}else ck(e,t.position);else o=r.value===null?!0:r.value;n[i]=o}return n}function ZG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:rqe;for(;++r<t.children.length;){const o=t.children[r];let s;if(e.passKeys){const u=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(u){const l=i.get(u)||0;s=u+"-"+l,i.set(u,l+1)}}const a=Cve(e,o,s);a!==void 0&&n.push(a)}return n}function bqe(e,t,n){const r=N5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?hve(n):_ve(n)),r.property==="style"){let i=typeof n=="object"?n:xqe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=wqe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?QHe[r.property]||r.property:r.attribute,n]}}function xqe(e,t){const n={};try{tqe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const o=i,s=new qu("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Tve+"#cannot-parse-style-attribute",s}}return n;function r(i,o){let s=i;s.slice(0,2)!=="--"&&(s.slice(0,4)==="-ms-"&&(s="ms-"+s.slice(4)),s=s.replace(oqe,Eqe)),n[s]=o}}function Ave(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let o=-1,s;for(;++o<i.length;){const a=Qre(i[o])?{type:"Identifier",name:i[o]}:{type:"Literal",value:i[o]};s=s?{type:"MemberExpression",object:s,property:a,computed:!!(o&&a.type==="Literal"),optional:!1}:a}r=s}else r=Qre(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return QG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);ck(e)}function ck(e,t){const n=new qu("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Tve+"#cannot-handle-mdx-estrees-without-createevaluater",n}function wqe(e){const t={};let n;for(n in e)QG.call(e,n)&&(t[_qe(n)]=e[n]);return t}function _qe(e){let t=e.replace(iqe,Tqe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Eqe(e,t){return t.toUpperCase()}function Tqe(e){return"-"+e.toLowerCase()}const fB={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Cqe={};function Sqe(e,t){const n=Cqe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Dve(e,r,i)}function Dve(e,t,n){if(Aqe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return aie(e.children,t,n)}return Array.isArray(e)?aie(e,t,n):""}function aie(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Dve(e[i],t,n);return r.join("")}function Aqe(e){return!!(e&&typeof e=="object")}const uie=document.createElement("i");function eY(e){const t="&"+e+";";uie.innerHTML=t;const n=uie.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function cg(e,t,n,r){const i=e.length;let o=0,s;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(t,n),e.splice(...s);else for(n&&e.splice(t,n);o<r.length;)s=r.slice(o,o+1e4),s.unshift(t,0),e.splice(...s),o+=1e4,t+=1e4}function Xf(e,t){return e.length>0?(cg(e,e.length,0,t),e):t}const lie={}.hasOwnProperty;function Dqe(e){const t={};let n=-1;for(;++n<e.length;)kqe(t,e[n]);return t}function kqe(e,t){let n;for(n in t){const i=(lie.call(e,n)?e[n]:void 0)||(e[n]={}),o=t[n];let s;if(o)for(s in o){lie.call(i,s)||(i[s]=[]);const a=o[s];Iqe(i[s],Array.isArray(a)?a:a?[a]:[])}}}function Iqe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);cg(e,0,0,r)}function kve(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function JE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Rp=ov(/[A-Za-z]/),rf=ov(/[\dA-Za-z]/),Rqe=ov(/[#-'*+\--9=?A-Z^-~]/);function Xz(e){return e!==null&&(e<32||e===127)}const Qz=ov(/\d/),Nqe=ov(/[\dA-Fa-f]/),Pqe=ov(/[!-/:-@[-`{-~]/);function zn(e){return e!==null&&e<-2}function fc(e){return e!==null&&(e<0||e===32)}function si(e){return e===-2||e===-1||e===32}const Oqe=ov(new RegExp("\\p{P}|\\p{S}","u")),Fqe=ov(/\s/);function ov(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function qT(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(o===37&&rf(e.charCodeAt(n+1))&&rf(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const a=e.charCodeAt(n+1);o<56320&&a>56319&&a<57344?(s=String.fromCharCode(o,a),i=1):s=""}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Hi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return s;function s(u){return si(u)?(e.enter(n),a(u)):t(u)}function a(u){return si(u)&&o++<i?(e.consume(u),a):(e.exit(n),t(u))}}const Mqe={tokenize:$qe};function $qe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Hi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),o(a)}function o(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,s(a)}function s(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return zn(a)?(e.consume(a),e.exit("chunkText"),o):(e.consume(a),s)}}const Lqe={tokenize:Bqe},cie={tokenize:jqe};function Bqe(e){const t=this,n=[];let r=0,i,o,s;return a;function a(w){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let T=E,C;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){C=t.events[T][1].end;break}v(r);let S=E;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},C),S++;return cg(t.events,T+1,0,t.events.slice(E)),t.events.length=S,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return m(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(cie,c,f)(w)}function c(w){return i&&b(),v(r),d(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,s=t.now().offset,m(w)}function d(w){return t.containerState={},e.attempt(cie,h,m)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),d(w)}function m(w){if(w===null){i&&b(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:i}),p(w)}function p(w){if(w===null){g(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return zn(w)?(e.consume(w),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),p)}function g(w,E){const T=t.sliceStream(w);if(E&&T.push(null),w.previous=o,o&&(o.next=w),o=w,i.defineSkip(w.start),i.write(T),t.parser.lazy[w.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<s&&(!i.events[C][1].end||i.events[C][1].end.offset>s))return;const S=t.events.length;let I=S,R,P;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(R){P=t.events[I][1].end;break}R=!0}for(v(r),C=S;C<t.events.length;)t.events[C][1].end=Object.assign({},P),C++;cg(t.events,I+1,0,t.events.slice(S)),t.events.length=C}}function v(w){let E=n.length;for(;E-- >w;){const T=n[E];t.containerState=T[1],T[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),o=void 0,i=void 0,t.containerState._closeFlow=void 0}}function jqe(e,t,n){return Hi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function fie(e){if(e===null||fc(e)||Fqe(e))return 1;if(Oqe(e))return 2}function tY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Jz={name:"attention",tokenize:Uqe,resolveAll:zqe};function zqe(e,t){let n=-1,r,i,o,s,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);die(f,-u),die(d,u),s={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},o={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},s.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},s.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Xf(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Xf(l,[["enter",i,t],["enter",s,t],["exit",s,t],["enter",o,t]]),l=Xf(l,tY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Xf(l,[["exit",o,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Xf(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,cg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Uqe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=fie(r);let o;return s;function s(u){return o=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===o)return e.consume(u),a;const l=e.exit("attentionSequence"),c=fie(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(o===42?f:f&&(i||!d)),l._close=!!(o===42?d:d&&(c||!f)),t(u)}}function die(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Vqe={name:"autolink",tokenize:Hqe};function Hqe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),o}function o(h){return Rp(h)?(e.consume(h),s):h===64?n(h):l(h)}function s(h){return h===43||h===45||h===46||rf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||rf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Xz(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):Rqe(h)?(e.consume(h),l):n(h)}function c(h){return rf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||rf(h))&&r++<63){const m=h===45?d:f;return e.consume(h),m}return n(h)}}const O5={tokenize:qqe,partial:!0};function qqe(e,t,n){return r;function r(o){return si(o)?Hi(e,i,"linePrefix")(o):i(o)}function i(o){return o===null||zn(o)?t(o):n(o)}}const Ive={name:"blockQuote",tokenize:Wqe,continuation:{tokenize:Gqe},exit:Yqe};function Wqe(e,t,n){const r=this;return i;function i(s){if(s===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(s),e.exit("blockQuoteMarker"),o}return n(s)}function o(s){return si(s)?(e.enter("blockQuotePrefixWhitespace"),e.consume(s),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(s))}}function Gqe(e,t,n){const r=this;return i;function i(s){return si(s)?Hi(e,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):o(s)}function o(s){return e.attempt(Ive,t,n)(s)}}function Yqe(e){e.exit("blockQuote")}const Rve={name:"characterEscape",tokenize:Kqe};function Kqe(e,t,n){return r;function r(o){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(o),e.exit("escapeMarker"),i}function i(o){return Pqe(o)?(e.enter("characterEscapeValue"),e.consume(o),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(o)}}const Nve={name:"characterReference",tokenize:Xqe};function Xqe(e,t,n){const r=this;let i=0,o,s;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),o=31,s=rf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),o=6,s=Nqe,c):(e.enter("characterReferenceValue"),o=7,s=Qz,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return s===rf&&!eY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return s(f)&&i++<o?(e.consume(f),c):n(f)}}const hie={tokenize:Jqe,partial:!0},pie={name:"codeFenced",tokenize:Qqe,concrete:!0};function Qqe(e,t,n){const r=this,i={tokenize:T,partial:!0};let o=0,s=0,a;return u;function u(C){return l(C)}function l(C){const S=r.events[r.events.length-1];return o=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(s++,e.consume(C),c):s<3?n(C):(e.exit("codeFencedFenceSequence"),si(C)?Hi(e,f,"whitespace")(C):f(C))}function f(C){return C===null||zn(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(hie,p,E)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||zn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(C)):si(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Hi(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),d)}function h(C){return C===null||zn(C)?f(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===null||zn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(e.consume(C),m)}function p(C){return e.attempt(i,E,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),v}function v(C){return o>0&&si(C)?Hi(e,b,"linePrefix",o+1)(C):b(C)}function b(C){return C===null||zn(C)?e.check(hie,p,E)(C):(e.enter("codeFlowValue"),w(C))}function w(C){return C===null||zn(C)?(e.exit("codeFlowValue"),b(C)):(e.consume(C),w)}function E(C){return e.exit("codeFenced"),t(C)}function T(C,S,I){let R=0;return P;function P(G){return C.enter("lineEnding"),C.consume(G),C.exit("lineEnding"),M}function M(G){return C.enter("codeFencedFence"),si(G)?Hi(C,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):B(G)}function B(G){return G===a?(C.enter("codeFencedFenceSequence"),L(G)):I(G)}function L(G){return G===a?(R++,C.consume(G),L):R>=s?(C.exit("codeFencedFenceSequence"),si(G)?Hi(C,z,"whitespace")(G):z(G)):I(G)}function z(G){return G===null||zn(G)?(C.exit("codeFencedFence"),S(G)):I(G)}}}function Jqe(e,t,n){const r=this;return i;function i(s){return s===null?n(s):(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}const dB={name:"codeIndented",tokenize:eWe},Zqe={tokenize:tWe,partial:!0};function eWe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Hi(e,o,"linePrefix",5)(l)}function o(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(l):n(l)}function s(l){return l===null?u(l):zn(l)?e.attempt(Zqe,s,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||zn(l)?(e.exit("codeFlowValue"),s(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function tWe(e,t,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):zn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),i):Hi(e,o,"linePrefix",5)(s)}function o(s){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):zn(s)?i(s):n(s)}}const nWe={name:"codeText",tokenize:oWe,resolve:rWe,previous:iWe};function rWe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function iWe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function oWe(e,t,n){let r=0,i,o;return s;function s(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(o=e.enter("codeTextSequence"),i=0,c(f)):zn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||zn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(o.type="codeTextData",l(f))}}class sWe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const o=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&VS(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),VS(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),VS(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);VS(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);VS(this.left,n.reverse())}}}function VS(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Pve(e){const t={};let n=-1,r,i,o,s,a,u,l;const c=new sWe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,o=0,o<u.length&&u[o][1].type==="lineEndingBlank"&&(o+=2),o<u.length&&u[o][1].type==="content"))for(;++o<u.length&&u[o][1].type!=="content";)u[o][1].type==="chunkText"&&(u[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,aWe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(o=n,i=void 0;o--&&(s=c.get(o),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank");)s[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=o);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return cg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function aWe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,u=[],l={};let c,f,d=-1,h=n,m=0,p=0;const g=[p];for(;h;){for(;e.get(++i)[1]!==h;);o.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&s.defineSkip(h.start),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(c),h._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(p=d+1,g.push(p),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(s.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const v=a.slice(g[d],g[d+1]),b=o.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),d=-1;++d<u.length;)l[m+u[d][0]]=m+u[d][1],m+=u[d][1]-u[d][0]-1;return l}const uWe={tokenize:fWe,resolve:cWe},lWe={tokenize:dWe,partial:!0};function cWe(e){return Pve(e),e}function fWe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?o(a):zn(a)?e.check(lWe,s,o)(a):(e.consume(a),i)}function o(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function s(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function dWe(e,t,n){const r=this;return i;function i(s){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),Hi(e,o,"linePrefix")}function o(s){if(s===null||zn(s))return n(s);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(s):e.interrupt(r.parser.constructs.flow,n,t)(s)}}function Ove(e,t,n,r,i,o,s,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(v){return v===60?(e.enter(r),e.enter(i),e.enter(o),e.consume(v),e.exit(o),d):v===null||v===32||v===41||Xz(v)?n(v):(e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),p(v))}function d(v){return v===62?(e.enter(o),e.consume(v),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(a),d(v)):v===null||v===60||zn(v)?n(v):(e.consume(v),v===92?m:h)}function m(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function p(v){return!c&&(v===null||v===41||fc(v))?(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(v)):c<l&&v===40?(e.consume(v),c++,p):v===41?(e.consume(v),c--,p):v===null||v===32||v===40||Xz(v)?n(v):(e.consume(v),v===92?g:p)}function g(v){return v===40||v===41||v===92?(e.consume(v),p):p(v)}}function Fve(e,t,n,r,i,o){const s=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(o),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in s.parser.constructs?n(h):h===93?(e.exit(o),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):zn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||zn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!si(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Mve(e,t,n,r,i,o){let s;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),s=d===40?41:d,u):n(d)}function u(d){return d===s?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(o),l(d))}function l(d){return d===s?(e.exit(o),u(s)):d===null?n(d):zn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Hi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===s||d===null||zn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===s||d===92?(e.consume(d),c):c(d)}}function CD(e,t){let n;return r;function r(i){return zn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):si(i)?Hi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const hWe={name:"definition",tokenize:mWe},pWe={tokenize:gWe,partial:!0};function mWe(e,t,n){const r=this;let i;return o;function o(h){return e.enter("definition"),s(h)}function s(h){return Fve.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=JE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return fc(h)?CD(e,l)(h):l(h)}function l(h){return Ove(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(pWe,f,f)(h)}function f(h){return si(h)?Hi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||zn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function gWe(e,t,n){return r;function r(a){return fc(a)?CD(e,i)(a):n(a)}function i(a){return Mve(e,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function o(a){return si(a)?Hi(e,s,"whitespace")(a):s(a)}function s(a){return a===null||zn(a)?t(a):n(a)}}const yWe={name:"hardBreakEscape",tokenize:vWe};function vWe(e,t,n){return r;function r(o){return e.enter("hardBreakEscape"),e.consume(o),i}function i(o){return zn(o)?(e.exit("hardBreakEscape"),t(o)):n(o)}}const bWe={name:"headingAtx",tokenize:wWe,resolve:xWe};function xWe(e,t){let n=e.length-2,r=3,i,o;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},o={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},cg(e,r,n-r+1,[["enter",i,t],["enter",o,t],["exit",o,t],["exit",i,t]])),e}function wWe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),o(c)}function o(c){return e.enter("atxHeadingSequence"),s(c)}function s(c){return c===35&&r++<6?(e.consume(c),s):c===null||fc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||zn(c)?(e.exit("atxHeading"),t(c)):si(c)?Hi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||fc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const _We=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],mie=["pre","script","style","textarea"],EWe={name:"htmlFlow",tokenize:AWe,resolveTo:SWe,concrete:!0},TWe={tokenize:kWe,partial:!0},CWe={tokenize:DWe,partial:!0};function SWe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function AWe(e,t,n){const r=this;let i,o,s,a,u;return l;function l(H){return c(H)}function c(H){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(H),f}function f(H){return H===33?(e.consume(H),d):H===47?(e.consume(H),o=!0,p):H===63?(e.consume(H),i=3,r.interrupt?t:q):Rp(H)?(e.consume(H),s=String.fromCharCode(H),g):n(H)}function d(H){return H===45?(e.consume(H),i=2,h):H===91?(e.consume(H),i=5,a=0,m):Rp(H)?(e.consume(H),i=4,r.interrupt?t:q):n(H)}function h(H){return H===45?(e.consume(H),r.interrupt?t:q):n(H)}function m(H){const X="CDATA[";return H===X.charCodeAt(a++)?(e.consume(H),a===X.length?r.interrupt?t:B:m):n(H)}function p(H){return Rp(H)?(e.consume(H),s=String.fromCharCode(H),g):n(H)}function g(H){if(H===null||H===47||H===62||fc(H)){const X=H===47,ee=s.toLowerCase();return!X&&!o&&mie.includes(ee)?(i=1,r.interrupt?t(H):B(H)):_We.includes(s.toLowerCase())?(i=6,X?(e.consume(H),v):r.interrupt?t(H):B(H)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(H):o?b(H):w(H))}return H===45||rf(H)?(e.consume(H),s+=String.fromCharCode(H),g):n(H)}function v(H){return H===62?(e.consume(H),r.interrupt?t:B):n(H)}function b(H){return si(H)?(e.consume(H),b):P(H)}function w(H){return H===47?(e.consume(H),P):H===58||H===95||Rp(H)?(e.consume(H),E):si(H)?(e.consume(H),w):P(H)}function E(H){return H===45||H===46||H===58||H===95||rf(H)?(e.consume(H),E):T(H)}function T(H){return H===61?(e.consume(H),C):si(H)?(e.consume(H),T):w(H)}function C(H){return H===null||H===60||H===61||H===62||H===96?n(H):H===34||H===39?(e.consume(H),u=H,S):si(H)?(e.consume(H),C):I(H)}function S(H){return H===u?(e.consume(H),u=null,R):H===null||zn(H)?n(H):(e.consume(H),S)}function I(H){return H===null||H===34||H===39||H===47||H===60||H===61||H===62||H===96||fc(H)?T(H):(e.consume(H),I)}function R(H){return H===47||H===62||si(H)?w(H):n(H)}function P(H){return H===62?(e.consume(H),M):n(H)}function M(H){return H===null||zn(H)?B(H):si(H)?(e.consume(H),M):n(H)}function B(H){return H===45&&i===2?(e.consume(H),W):H===60&&i===1?(e.consume(H),te):H===62&&i===4?(e.consume(H),U):H===63&&i===3?(e.consume(H),q):H===93&&i===5?(e.consume(H),re):zn(H)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(TWe,Y,L)(H)):H===null||zn(H)?(e.exit("htmlFlowData"),L(H)):(e.consume(H),B)}function L(H){return e.check(CWe,z,Y)(H)}function z(H){return e.enter("lineEnding"),e.consume(H),e.exit("lineEnding"),G}function G(H){return H===null||zn(H)?L(H):(e.enter("htmlFlowData"),B(H))}function W(H){return H===45?(e.consume(H),q):B(H)}function te(H){return H===47?(e.consume(H),s="",Z):B(H)}function Z(H){if(H===62){const X=s.toLowerCase();return mie.includes(X)?(e.consume(H),U):B(H)}return Rp(H)&&s.length<8?(e.consume(H),s+=String.fromCharCode(H),Z):B(H)}function re(H){return H===93?(e.consume(H),q):B(H)}function q(H){return H===62?(e.consume(H),U):H===45&&i===2?(e.consume(H),q):B(H)}function U(H){return H===null||zn(H)?(e.exit("htmlFlowData"),Y(H)):(e.consume(H),U)}function Y(H){return e.exit("htmlFlow"),t(H)}}function DWe(e,t,n){const r=this;return i;function i(s){return zn(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),o):n(s)}function o(s){return r.parser.lazy[r.now().line]?n(s):t(s)}}function kWe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(O5,t,n)}}const IWe={name:"htmlText",tokenize:RWe};function RWe(e,t,n){const r=this;let i,o,s;return a;function a(q){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(q),u}function u(q){return q===33?(e.consume(q),l):q===47?(e.consume(q),T):q===63?(e.consume(q),w):Rp(q)?(e.consume(q),I):n(q)}function l(q){return q===45?(e.consume(q),c):q===91?(e.consume(q),o=0,m):Rp(q)?(e.consume(q),b):n(q)}function c(q){return q===45?(e.consume(q),h):n(q)}function f(q){return q===null?n(q):q===45?(e.consume(q),d):zn(q)?(s=f,te(q)):(e.consume(q),f)}function d(q){return q===45?(e.consume(q),h):f(q)}function h(q){return q===62?W(q):q===45?d(q):f(q)}function m(q){const U="CDATA[";return q===U.charCodeAt(o++)?(e.consume(q),o===U.length?p:m):n(q)}function p(q){return q===null?n(q):q===93?(e.consume(q),g):zn(q)?(s=p,te(q)):(e.consume(q),p)}function g(q){return q===93?(e.consume(q),v):p(q)}function v(q){return q===62?W(q):q===93?(e.consume(q),v):p(q)}function b(q){return q===null||q===62?W(q):zn(q)?(s=b,te(q)):(e.consume(q),b)}function w(q){return q===null?n(q):q===63?(e.consume(q),E):zn(q)?(s=w,te(q)):(e.consume(q),w)}function E(q){return q===62?W(q):w(q)}function T(q){return Rp(q)?(e.consume(q),C):n(q)}function C(q){return q===45||rf(q)?(e.consume(q),C):S(q)}function S(q){return zn(q)?(s=S,te(q)):si(q)?(e.consume(q),S):W(q)}function I(q){return q===45||rf(q)?(e.consume(q),I):q===47||q===62||fc(q)?R(q):n(q)}function R(q){return q===47?(e.consume(q),W):q===58||q===95||Rp(q)?(e.consume(q),P):zn(q)?(s=R,te(q)):si(q)?(e.consume(q),R):W(q)}function P(q){return q===45||q===46||q===58||q===95||rf(q)?(e.consume(q),P):M(q)}function M(q){return q===61?(e.consume(q),B):zn(q)?(s=M,te(q)):si(q)?(e.consume(q),M):R(q)}function B(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),i=q,L):zn(q)?(s=B,te(q)):si(q)?(e.consume(q),B):(e.consume(q),z)}function L(q){return q===i?(e.consume(q),i=void 0,G):q===null?n(q):zn(q)?(s=L,te(q)):(e.consume(q),L)}function z(q){return q===null||q===34||q===39||q===60||q===61||q===96?n(q):q===47||q===62||fc(q)?R(q):(e.consume(q),z)}function G(q){return q===47||q===62||fc(q)?R(q):n(q)}function W(q){return q===62?(e.consume(q),e.exit("htmlTextData"),e.exit("htmlText"),t):n(q)}function te(q){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),Z}function Z(q){return si(q)?Hi(e,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):re(q)}function re(q){return e.enter("htmlTextData"),s(q)}}const nY={name:"labelEnd",tokenize:$We,resolveTo:MWe,resolveAll:FWe},NWe={tokenize:LWe},PWe={tokenize:BWe},OWe={tokenize:jWe};function FWe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function MWe(e,t){let n=e.length,r=0,i,o,s,a;for(;n--;)if(i=e[n][1],o){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(o=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const u={type:e[o][1].type==="labelLink"?"link":"image",start:Object.assign({},e[o][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[o][1].start),end:Object.assign({},e[s][1].end)},c={type:"labelText",start:Object.assign({},e[o+r+2][1].end),end:Object.assign({},e[s-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Xf(a,e.slice(o+1,o+r+3)),a=Xf(a,[["enter",c,t]]),a=Xf(a,tY(t.parser.constructs.insideSpan.null,e.slice(o+r+4,s-3),t)),a=Xf(a,[["exit",c,t],e[s-2],e[s-1],["exit",l,t]]),a=Xf(a,e.slice(s+1)),a=Xf(a,[["exit",u,t]]),cg(e,o,e.length,a),e}function $We(e,t,n){const r=this;let i=r.events.length,o,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){o=r.events[i][1];break}return a;function a(d){return o?o._inactive?f(d):(s=r.parser.defined.includes(JE(r.sliceSerialize({start:o.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(NWe,c,s?c:f)(d):d===91?e.attempt(PWe,c,s?l:f)(d):s?c(d):f(d)}function l(d){return e.attempt(OWe,c,f)(d)}function c(d){return t(d)}function f(d){return o._balanced=!0,n(d)}}function LWe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return fc(f)?CD(e,o)(f):o(f)}function o(f){return f===41?c(f):Ove(e,s,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function s(f){return fc(f)?CD(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Mve(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return fc(f)?CD(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function BWe(e,t,n){const r=this;return i;function i(a){return Fve.call(r,e,o,s,"reference","referenceMarker","referenceString")(a)}function o(a){return r.parser.defined.includes(JE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function s(a){return n(a)}}function jWe(e,t,n){return r;function r(o){return e.enter("reference"),e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),i}function i(o){return o===93?(e.enter("referenceMarker"),e.consume(o),e.exit("referenceMarker"),e.exit("reference"),t):n(o)}}const zWe={name:"labelStartImage",tokenize:UWe,resolveAll:nY.resolveAll};function UWe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),o}function o(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),s):n(a)}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const VWe={name:"labelStartLink",tokenize:HWe,resolveAll:nY.resolveAll};function HWe(e,t,n){const r=this;return i;function i(s){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelLink"),o}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):t(s)}}const hB={name:"lineEnding",tokenize:qWe};function qWe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Hi(e,t,"linePrefix")}}const b4={name:"thematicBreak",tokenize:WWe};function WWe(e,t,n){let r=0,i;return o;function o(l){return e.enter("thematicBreak"),s(l)}function s(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||zn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),si(l)?Hi(e,a,"whitespace")(l):a(l))}}const Zl={name:"list",tokenize:KWe,continuation:{tokenize:XWe},exit:JWe},GWe={tokenize:ZWe,partial:!0},YWe={tokenize:QWe,partial:!0};function KWe(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return a;function a(h){const m=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Qz(h)){if(r.containerState.type||(r.containerState.type=m,e.enter(m,{_container:!0})),m==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(b4,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Qz(h)&&++s<10?(e.consume(h),u):(!r.interrupt||s<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(O5,r.interrupt?n:c,e.attempt(GWe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,o++,d(h)}function f(h){return si(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function XWe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(O5,i,o);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Hi(e,t,"listItemIndent",r.containerState.size+1)(a)}function o(a){return r.containerState.furtherBlankLines||!si(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(YWe,t,s)(a))}function s(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Hi(e,e.attempt(Zl,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function QWe(e,t,n){const r=this;return Hi(e,i,"listItemIndent",r.containerState.size+1);function i(o){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?t(o):n(o)}}function JWe(e){e.exit(this.containerState.type)}function ZWe(e,t,n){const r=this;return Hi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(o){const s=r.events[r.events.length-1];return!si(o)&&s&&s[1].type==="listItemPrefixWhitespace"?t(o):n(o)}}const gie={name:"setextUnderline",tokenize:tGe,resolveTo:eGe};function eGe(e,t){let n=e.length,r,i,o;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!o&&e[n][1].type==="definition"&&(o=n);const s={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[o][1].end)):e[r][1]=s,e.push(["exit",s,t]),e}function tGe(e,t,n){const r=this;let i;return o;function o(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,s(l)):n(l)}function s(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),si(l)?Hi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||zn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const nGe={tokenize:rGe};function rGe(e){const t=this,n=e.attempt(O5,r,e.attempt(this.parser.constructs.flowInitial,i,Hi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(uWe,i)),"linePrefix")));return n;function r(o){if(o===null){e.consume(o);return}return e.enter("lineEndingBlank"),e.consume(o),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(o){if(o===null){e.consume(o);return}return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const iGe={resolveAll:Lve()},oGe=$ve("string"),sGe=$ve("text");function $ve(e){return{tokenize:t,resolveAll:Lve(e==="text"?aGe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],o=n.attempt(i,s,a);return s;function s(c){return l(c)?o(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),o(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Lve(e){return t;function t(n,r){let i=-1,o;for(;++i<=n.length;)o===void 0?n[i]&&n[i][1].type==="data"&&(o=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==o+2&&(n[o][1].end=n[i-1][1].end,n.splice(o+2,i-o-2),i=o+2),o=void 0);return e?e(n,r):n}}function aGe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let o=i.length,s=-1,a=0,u;for(;o--;){const l=i[o];if(typeof l=="string"){for(s=l.length;l.charCodeAt(s-1)===32;)a++,s--;if(s)break;s=-1}else if(l===-2)u=!0,a++;else if(l!==-1){o++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+o,_bufferIndex:o?s:r.start._bufferIndex+s},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function uGe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let s=[],a=[];const u={consume:b,enter:w,exit:E,attempt:S(T),check:S(C),interrupt:S(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:m,defineSkip:p,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&o.push(t),l;function f(M){return s=Xf(s,M),g(),s[s.length-1]!==null?[]:(I(t,0),l.events=tY(o,l.events,l),l.events)}function d(M,B){return cGe(h(M),B)}function h(M){return lGe(s,M)}function m(){const{line:M,column:B,offset:L,_index:z,_bufferIndex:G}=r;return{line:M,column:B,offset:L,_index:z,_bufferIndex:G}}function p(M){i[M.line]=M.column,P()}function g(){let M;for(;r._index<s.length;){const B=s[r._index];if(typeof B=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<B.length;)v(B.charCodeAt(r._bufferIndex));else v(B)}}function v(M){c=c(M)}function b(M){zn(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,P()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=M}function w(M,B){const L=B||{};return L.type=M,L.start=m(),l.events.push(["enter",L,l]),a.push(L),L}function E(M){const B=a.pop();return B.end=m(),l.events.push(["exit",B,l]),B}function T(M,B){I(M,B.from)}function C(M,B){B.restore()}function S(M,B){return L;function L(z,G,W){let te,Z,re,q;return Array.isArray(z)?Y(z):"tokenize"in z?Y([z]):U(z);function U(le){return Ee;function Ee(be){const Ce=be!==null&&le[be],Oe=be!==null&&le.null,me=[...Array.isArray(Ce)?Ce:Ce?[Ce]:[],...Array.isArray(Oe)?Oe:Oe?[Oe]:[]];return Y(me)(be)}}function Y(le){return te=le,Z=0,le.length===0?W:H(le[Z])}function H(le){return Ee;function Ee(be){return q=R(),re=le,le.partial||(l.currentConstruct=le),le.name&&l.parser.constructs.disable.null.includes(le.name)?ee():le.tokenize.call(B?Object.assign(Object.create(l),B):l,u,X,ee)(be)}}function X(le){return M(re,q),G}function ee(le){return q.restore(),++Z<te.length?H(te[Z]):W}}}function I(M,B){M.resolveAll&&!o.includes(M)&&o.push(M),M.resolve&&cg(l.events,B,l.events.length-B,M.resolve(l.events.slice(B),l)),M.resolveTo&&(l.events=M.resolveTo(l.events,l))}function R(){const M=m(),B=l.previous,L=l.currentConstruct,z=l.events.length,G=Array.from(a);return{restore:W,from:z};function W(){r=M,l.previous=B,l.currentConstruct=L,l.events.length=z,a=G,P()}}function P(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function lGe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const a=s[0];typeof a=="string"?s[0]=a.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}function cGe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if(typeof o=="string")s=o;else switch(o){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=t?" ":"	";break}case-1:{if(!t&&i)continue;s=" ";break}default:s=String.fromCharCode(o)}i=o===-2,r.push(s)}return r.join("")}const fGe={42:Zl,43:Zl,45:Zl,48:Zl,49:Zl,50:Zl,51:Zl,52:Zl,53:Zl,54:Zl,55:Zl,56:Zl,57:Zl,62:Ive},dGe={91:hWe},hGe={[-2]:dB,[-1]:dB,32:dB},pGe={35:bWe,42:b4,45:[gie,b4],60:EWe,61:gie,95:b4,96:pie,126:pie},mGe={38:Nve,92:Rve},gGe={[-5]:hB,[-4]:hB,[-3]:hB,33:zWe,38:Nve,42:Jz,60:[Vqe,IWe],91:VWe,92:[yWe,Rve],93:nY,95:Jz,96:nWe},yGe={null:[Jz,iGe]},vGe={null:[42,95]},bGe={null:[]},xGe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:vGe,contentInitial:dGe,disable:bGe,document:fGe,flow:pGe,flowInitial:hGe,insideSpan:yGe,string:mGe,text:gGe},Symbol.toStringTag,{value:"Module"}));function wGe(e){const n=Dqe([xGe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Mqe),document:i(Lqe),flow:i(nGe),string:i(oGe),text:i(sGe)};return r;function i(o){return s;function s(a){return uGe(r,o,a)}}}function _Ge(e){for(;!Pve(e););return e}const yie=/[\0\t\n\r]/g;function EGe(){let e=1,t="",n=!0,r;return i;function i(o,s,a){const u=[];let l,c,f,d,h;for(o=t+(typeof o=="string"?o.toString():new TextDecoder(s||void 0).decode(o)),f=0,t="",n&&(o.charCodeAt(0)===65279&&f++,n=void 0);f<o.length;){if(yie.lastIndex=f,l=yie.exec(o),d=l&&l.index!==void 0?l.index:o.length,h=o.charCodeAt(d),!l){t=o.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(o.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const TGe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function CGe(e){return e.replace(TGe,SGe)}function SGe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),o=i===120||i===88;return kve(n.slice(o?2:1),o?16:10)}return eY(n)||e}const Bve={}.hasOwnProperty;function AGe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),DGe(n)(_Ge(wGe(n).document().write(EGe()(e,t,!0))))}function DGe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(pt),autolinkProtocol:R,autolinkEmail:R,atxHeading:o(Je),blockQuote:o(Oe),characterEscape:R,characterReference:R,codeFenced:o(me),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(me,s),codeText:o(he,s),codeTextData:R,data:R,codeFlowValue:R,definition:o(Fe),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Pe),hardBreakEscape:o(ut),hardBreakTrailing:o(ut),htmlFlow:o(Ke,s),htmlFlowData:R,htmlText:o(Ke,s),htmlTextData:R,image:o(tt),label:s,link:o(pt),listItem:o(St),listItemValue:d,listOrdered:o(Dt,f),listUnordered:o(Dt),paragraph:o($t),reference:H,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Je),strong:o(oe),thematicBreak:o(Re)},exit:{atxHeading:u(),atxHeadingSequence:T,autolink:u(),autolinkEmail:Ce,autolinkProtocol:be,blockQuote:u(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:le,characterReference:Ee,codeFenced:u(g),codeFencedFence:p,codeFencedFenceInfo:h,codeFencedFenceMeta:m,codeFlowValue:P,codeIndented:u(v),codeText:u(G),codeTextData:P,data:P,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(B),hardBreakTrailing:u(B),htmlFlow:u(L),htmlFlowData:P,htmlText:u(z),htmlTextData:P,image:u(te),label:re,labelText:Z,lineEnding:M,link:u(W),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:X,resourceDestinationString:q,resourceTitleString:U,resource:Y,setextHeading:u(I),setextHeadingLineSequence:S,setextHeadingText:C,strong:u(),thematicBreak:u()}};jve(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let we={type:"root",children:[]};const ke={stack:[we],tokenStack:[],config:t,enter:a,exit:l,buffer:s,resume:c,data:n},Ge=[];let Ve=-1;for(;++Ve<pe.length;)if(pe[Ve][1].type==="listOrdered"||pe[Ve][1].type==="listUnordered")if(pe[Ve][0]==="enter")Ge.push(Ve);else{const at=Ge.pop();Ve=i(pe,at,Ve)}for(Ve=-1;++Ve<pe.length;){const at=t[pe[Ve][0]];Bve.call(at,pe[Ve][1].type)&&at[pe[Ve][1].type].call(Object.assign({sliceSerialize:pe[Ve][2].sliceSerialize},ke),pe[Ve][1])}if(ke.tokenStack.length>0){const at=ke.tokenStack[ke.tokenStack.length-1];(at[1]||vie).call(ke,void 0,at[0])}for(we.position={start:Ty(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:Ty(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},Ve=-1;++Ve<t.transforms.length;)we=t.transforms[Ve](we)||we;return we}function i(pe,we,ke){let Ge=we-1,Ve=-1,at=!1,rt,ln,xn,rn;for(;++Ge<=ke;){const bn=pe[Ge];switch(bn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{bn[0]==="enter"?Ve++:Ve--,rn=void 0;break}case"lineEndingBlank":{bn[0]==="enter"&&(rt&&!rn&&!Ve&&!xn&&(xn=Ge),rn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:rn=void 0}if(!Ve&&bn[0]==="enter"&&bn[1].type==="listItemPrefix"||Ve===-1&&bn[0]==="exit"&&(bn[1].type==="listUnordered"||bn[1].type==="listOrdered")){if(rt){let Hn=Ge;for(ln=void 0;Hn--;){const $n=pe[Hn];if($n[1].type==="lineEnding"||$n[1].type==="lineEndingBlank"){if($n[0]==="exit")continue;ln&&(pe[ln][1].type="lineEndingBlank",at=!0),$n[1].type="lineEnding",ln=Hn}else if(!($n[1].type==="linePrefix"||$n[1].type==="blockQuotePrefix"||$n[1].type==="blockQuotePrefixWhitespace"||$n[1].type==="blockQuoteMarker"||$n[1].type==="listItemIndent"))break}xn&&(!ln||xn<ln)&&(rt._spread=!0),rt.end=Object.assign({},ln?pe[ln][1].start:bn[1].end),pe.splice(ln||Ge,0,["exit",rt,bn[2]]),Ge++,ke++}if(bn[1].type==="listItemPrefix"){const Hn={type:"listItem",_spread:!1,start:Object.assign({},bn[1].start),end:void 0};rt=Hn,pe.splice(Ge,0,["enter",Hn,bn[2]]),Ge++,ke++,xn=void 0,rn=!0}}}return pe[we][1]._spread=at,ke}function o(pe,we){return ke;function ke(Ge){a.call(this,pe(Ge),Ge),we&&we.call(this,Ge)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(pe,we,ke){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([we,ke]),pe.position={start:Ty(we.start),end:void 0}}function u(pe){return we;function we(ke){pe&&pe.call(this,ke),l.call(this,ke)}}function l(pe,we){const ke=this.stack.pop(),Ge=this.tokenStack.pop();if(Ge)Ge[0].type!==pe.type&&(we?we.call(this,pe,Ge[0]):(Ge[1]||vie).call(this,pe,Ge[0]));else throw new Error("Cannot close `"+pe.type+"` ("+TD({start:pe.start,end:pe.end})+"): its not open");ke.position.end=Ty(pe.end)}function c(){return Sqe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const we=this.stack[this.stack.length-2];we.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.lang=pe}function m(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.meta=pe}function p(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.value=pe.replace(/(\r?\n|\r)$/g,"")}function b(pe){const we=this.resume(),ke=this.stack[this.stack.length-1];ke.label=we,ke.identifier=JE(this.sliceSerialize(pe)).toLowerCase()}function w(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.title=pe}function E(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.url=pe}function T(pe){const we=this.stack[this.stack.length-1];if(!we.depth){const ke=this.sliceSerialize(pe).length;we.depth=ke}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function S(pe){const we=this.stack[this.stack.length-1];we.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function R(pe){const ke=this.stack[this.stack.length-1].children;let Ge=ke[ke.length-1];(!Ge||Ge.type!=="text")&&(Ge=xe(),Ge.position={start:Ty(pe.start),end:void 0},ke.push(Ge)),this.stack.push(Ge)}function P(pe){const we=this.stack.pop();we.value+=this.sliceSerialize(pe),we.position.end=Ty(pe.end)}function M(pe){const we=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ke=we.children[we.children.length-1];ke.position.end=Ty(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(we.type)&&(R.call(this,pe),P.call(this,pe))}function B(){this.data.atHardBreak=!0}function L(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.value=pe}function z(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.value=pe}function G(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.value=pe}function W(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=we,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function te(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=we,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function Z(pe){const we=this.sliceSerialize(pe),ke=this.stack[this.stack.length-2];ke.label=CGe(we),ke.identifier=JE(we).toLowerCase()}function re(){const pe=this.stack[this.stack.length-1],we=this.resume(),ke=this.stack[this.stack.length-1];if(this.data.inReference=!0,ke.type==="link"){const Ge=pe.children;ke.children=Ge}else ke.alt=we}function q(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.url=pe}function U(){const pe=this.resume(),we=this.stack[this.stack.length-1];we.title=pe}function Y(){this.data.inReference=void 0}function H(){this.data.referenceType="collapsed"}function X(pe){const we=this.resume(),ke=this.stack[this.stack.length-1];ke.label=we,ke.identifier=JE(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function ee(pe){this.data.characterReferenceType=pe.type}function le(pe){const we=this.sliceSerialize(pe),ke=this.data.characterReferenceType;let Ge;ke?(Ge=kve(we,ke==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ge=eY(we);const Ve=this.stack[this.stack.length-1];Ve.value+=Ge}function Ee(pe){const we=this.stack.pop();we.position.end=Ty(pe.end)}function be(pe){P.call(this,pe);const we=this.stack[this.stack.length-1];we.url=this.sliceSerialize(pe)}function Ce(pe){P.call(this,pe);const we=this.stack[this.stack.length-1];we.url="mailto:"+this.sliceSerialize(pe)}function Oe(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function he(){return{type:"inlineCode",value:""}}function Fe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Pe(){return{type:"emphasis",children:[]}}function Je(){return{type:"heading",depth:0,children:[]}}function ut(){return{type:"break"}}function Ke(){return{type:"html",value:""}}function tt(){return{type:"image",title:null,url:"",alt:null}}function pt(){return{type:"link",title:null,url:"",children:[]}}function Dt(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function St(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function $t(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function xe(){return{type:"text",value:""}}function Re(){return{type:"thematicBreak"}}}function Ty(e){return{line:e.line,column:e.column,offset:e.offset}}function jve(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?jve(e,r):kGe(e,r)}}function kGe(e,t){let n;for(n in t)if(Bve.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function vie(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+TD({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+TD({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+TD({start:t.start,end:t.end})+") is still open")}function IGe(e){const t=this;t.parser=n;function n(r){return AGe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function RGe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function NGe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function PGe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function OGe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function FGe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function MGe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=qT(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function $Ge(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function LGe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function zve(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&o.type==="text"?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function BGe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return zve(e,t);const i={src:qT(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)}function jGe(e,t){const n={src:qT(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function zGe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function UGe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return zve(e,t);const i={href:qT(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function VGe(e,t){const n={href:qT(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function HGe(e,t,n){const r=e.all(t),i=n?qGe(n):Uve(t),o={},s=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?s.push(...c.children):s.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&s.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,l),e.applyData(t,l)}function qGe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Uve(n[r])}return t}function Uve(e){const t=e.spread;return t??e.children.length>1}function WGe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)}function GGe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function YGe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function KGe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XGe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Tm(t.children[1]),u=P5(t.children[t.children.length-1]);a&&u&&(s.position={start:a,end:u}),i.push(s)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)}function QGe(e,t,n){const r=n?n.children:void 0,o=(r?r.indexOf(t):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,a=s?s.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=s?s[u]:void 0;h&&(d.align=h);let m={type:"element",tagName:o,properties:d,children:[]};f&&(m.children=e.all(f),e.patch(f,m),m=e.applyData(f,m)),l.push(m)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function JGe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const bie=9,xie=32;function ZGe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(wie(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(wie(t.slice(i),i>0,!1)),o.join("")}function wie(e,t,n){let r=0,i=e.length;if(t){let o=e.codePointAt(r);for(;o===bie||o===xie;)r++,o=e.codePointAt(r)}if(n){let o=e.codePointAt(i-1);for(;o===bie||o===xie;)i--,o=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function eYe(e,t){const n={type:"text",value:ZGe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function tYe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const nYe={blockquote:RGe,break:NGe,code:PGe,delete:OGe,emphasis:FGe,footnoteReference:MGe,heading:$Ge,html:LGe,imageReference:BGe,image:jGe,inlineCode:zGe,linkReference:UGe,link:VGe,listItem:HGe,list:WGe,paragraph:GGe,root:YGe,strong:KGe,table:XGe,tableCell:JGe,tableRow:QGe,text:eYe,thematicBreak:tYe,toml:s3,yaml:s3,definition:s3,footnoteDefinition:s3};function s3(){}const Vve=-1,F5=0,p6=1,m6=2,rY=3,iY=4,oY=5,sY=6,Hve=7,qve=8,_ie=typeof self=="object"?self:globalThis,rYe=(e,t)=>{const n=(i,o)=>(e.set(o,i),i),r=i=>{if(e.has(i))return e.get(i);const[o,s]=t[i];switch(o){case F5:case Vve:return n(s,i);case p6:{const a=n([],i);for(const u of s)a.push(r(u));return a}case m6:{const a=n({},i);for(const[u,l]of s)a[r(u)]=r(l);return a}case rY:return n(new Date(s),i);case iY:{const{source:a,flags:u}=s;return n(new RegExp(a,u),i)}case oY:{const a=n(new Map,i);for(const[u,l]of s)a.set(r(u),r(l));return a}case sY:{const a=n(new Set,i);for(const u of s)a.add(r(u));return a}case Hve:{const{name:a,message:u}=s;return n(new _ie[a](u),i)}case qve:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i)}return n(new _ie[o](s),i)};return r},Eie=e=>rYe(new Map,e)(0),J_="",{toString:iYe}={},{keys:oYe}=Object,HS=e=>{const t=typeof e;if(t!=="object"||!e)return[F5,t];const n=iYe.call(e).slice(8,-1);switch(n){case"Array":return[p6,J_];case"Object":return[m6,J_];case"Date":return[rY,J_];case"RegExp":return[iY,J_];case"Map":return[oY,J_];case"Set":return[sY,J_]}return n.includes("Array")?[p6,n]:n.includes("Error")?[Hve,n]:[m6,n]},a3=([e,t])=>e===F5&&(t==="function"||t==="symbol"),sYe=(e,t,n,r)=>{const i=(s,a)=>{const u=r.push(s)-1;return n.set(a,u),u},o=s=>{if(n.has(s))return n.get(s);let[a,u]=HS(s);switch(a){case F5:{let c=s;switch(u){case"bigint":a=qve,c=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Vve],s)}return i([a,c],s)}case p6:{if(u)return i([u,[...s]],s);const c=[],f=i([a,c],s);for(const d of s)c.push(o(d));return f}case m6:{if(u)switch(u){case"BigInt":return i([u,s.toString()],s);case"Boolean":case"Number":case"String":return i([u,s.valueOf()],s)}if(t&&"toJSON"in s)return o(s.toJSON());const c=[],f=i([a,c],s);for(const d of oYe(s))(e||!a3(HS(s[d])))&&c.push([o(d),o(s[d])]);return f}case rY:return i([a,s.toISOString()],s);case iY:{const{source:c,flags:f}=s;return i([a,{source:c,flags:f}],s)}case oY:{const c=[],f=i([a,c],s);for(const[d,h]of s)(e||!(a3(HS(d))||a3(HS(h))))&&c.push([o(d),o(h)]);return f}case sY:{const c=[],f=i([a,c],s);for(const d of s)(e||!a3(HS(d)))&&c.push(o(d));return f}}const{message:l}=s;return i([a,{name:u,message:l}],s)};return o},Tie=(e,{json:t,lossy:n}={})=>{const r=[];return sYe(!(t||n),!!t,new Map,r)(e),r},S2=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Eie(Tie(e,t)):structuredClone(e):(e,t)=>Eie(Tie(e,t));function aYe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function uYe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function lYe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||aYe,r=e.options.footnoteBackLabel||uYe,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=qT(f.toLowerCase());let h=0;const m=[],p=e.footnoteCounts.get(f);for(;p!==void 0&&++h<=p;){m.length>0&&m.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),m.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...m)}else c.push(...m);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...S2(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Wve=function(e){if(e==null)return hYe;if(typeof e=="function")return M5(e);if(typeof e=="object")return Array.isArray(e)?cYe(e):fYe(e);if(typeof e=="string")return dYe(e);throw new Error("Expected function, string, or object as test")};function cYe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Wve(e[n]);return M5(r);function r(...i){let o=-1;for(;++o<t.length;)if(t[o].apply(this,i))return!0;return!1}}function fYe(e){const t=e;return M5(n);function n(r){const i=r;let o;for(o in e)if(i[o]!==t[o])return!1;return!0}}function dYe(e){return M5(t);function t(n){return n&&n.type===e}}function M5(e){return t;function t(n,r,i){return!!(pYe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function hYe(){return!0}function pYe(e){return e!==null&&typeof e=="object"&&"type"in e}const Gve=[],mYe=!0,Cie=!1,gYe="skip";function yYe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const o=Wve(i),s=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Gve,m,p,g;if((!t||o(u,l,c[c.length-1]||void 0))&&(h=vYe(n(u,c)),h[0]===Cie))return h;if("children"in u&&u.children){const v=u;if(v.children&&h[0]!==gYe)for(p=(r?v.children.length:-1)+s,g=c.concat(v);p>-1&&p<v.children.length;){const b=v.children[p];if(m=a(b,p,g)(),m[0]===Cie)return m;p=typeof m[1]=="number"?m[1]:p+s}}return h}}}function vYe(e){return Array.isArray(e)?e:typeof e=="number"?[mYe,e]:e==null?Gve:[e]}function aY(e,t,n,r){let i,o,s;typeof t=="function"&&typeof n!="function"?(o=void 0,s=t,i=n):(o=t,s=n,i=r),yYe(e,o,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return s(u,f,c)}}const Zz={}.hasOwnProperty,bYe={};function xYe(e,t){const n=t||bYe,r=new Map,i=new Map,o=new Map,s={...nYe,...n.handlers},a={all:l,applyData:_Ye,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:u,options:n,patch:wYe,wrap:TYe};return aY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(Zz.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:p,...g}=c,v=S2(g);return v.children=a.all(c),v}return S2(c)}return(a.options.unknownHandler||EYe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const m=a.one(d[h],c);if(m){if(h&&d[h-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=Sie(m.value)),!Array.isArray(m)&&m.type==="element")){const p=m.children[0];p&&p.type==="text"&&(p.value=Sie(p.value))}Array.isArray(m)?f.push(...m):f.push(m)}}}return f}}function wYe(e,t){e.position&&(t.position=nqe(e))}function _Ye(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,o=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&o&&Object.assign(n.properties,S2(o)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function EYe(e,t){const n=t.data||{},r="value"in t&&!(Zz.call(n,"hProperties")||Zz.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function TYe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Sie(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Aie(e,t){const n=xYe(e,t),r=n.one(e,void 0),i=lYe(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:`
`},i),o}function CYe(e,t){return e&&"run"in e?async function(n,r){const i=Aie(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Aie(n,{file:r,...t||e})}}function Die(e){if(e)throw e}var pB,kie;function SYe(){if(kie)return pB;kie=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},o=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},s=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return pB=function u(){var l,c,f,d,h,m,p=arguments[0],g=1,v=arguments.length,b=!1;for(typeof p=="boolean"&&(b=p,p=arguments[1]||{},g=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});g<v;++g)if(l=arguments[g],l!=null)for(c in l)f=a(p,c),d=a(l,c),p!==d&&(b&&d&&(o(d)||(h=i(d)))?(h?(h=!1,m=f&&i(f)?f:[]):m=f&&o(f)?f:{},s(p,{name:c,newValue:u(b,m,d)})):typeof d<"u"&&s(p,{name:c,newValue:d}));return p},pB}var AYe=SYe();const mB=_c(AYe);function eU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function DYe(){const e=[],t={run:n,use:r};return t;function n(...i){let o=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);a(null,...i);function a(u,...l){const c=e[++o];let f=-1;if(u){s(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?kYe(c,a)(...l):s(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function kYe(e,t){let n;return r;function r(...s){const a=e.length>s.length;let u;a&&s.push(i);try{u=e.apply(this,s)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(o,i):u instanceof Error?i(u):o(u))}function i(s,...a){n||(n=!0,t(s,...a))}function o(s){i(null,s)}}const Tp={basename:IYe,dirname:RYe,extname:NYe,join:PYe,sep:"/"};function IYe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');RI(e);let n=0,r=-1,i=e.length,o;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else r<0&&(o=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let s=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(o){n=i+1;break}}else s<0&&(o=!0,s=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=s));return n===r?r=s:r<0&&(r=e.length),e.slice(n,r)}function RYe(e){if(RI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function NYe(e){RI(e);let t=e.length,n=-1,r=0,i=-1,o=0,s;for(;t--;){const a=e.codePointAt(t);if(a===47){if(s){r=t+1;break}continue}n<0&&(s=!0,n=t+1),a===46?i<0?i=t:o!==1&&(o=1):i>-1&&(o=-1)}return i<0||n<0||o===0||o===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function PYe(...e){let t=-1,n;for(;++t<e.length;)RI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":OYe(n)}function OYe(e){RI(e);const t=e.codePointAt(0)===47;let n=FYe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function FYe(e,t){let n="",r=0,i=-1,o=0,s=-1,a,u;for(;++s<=e.length;){if(s<e.length)a=e.codePointAt(s);else{if(a===47)break;a=47}if(a===47){if(!(i===s-1||o===1))if(i!==s-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=s,o=0;continue}}else if(n.length>0){n="",r=0,i=s,o=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,s):n=e.slice(i+1,s),r=s-i-1;i=s,o=0}else a===46&&o>-1?o++:o=-1}return n}function RI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const MYe={cwd:$Ye};function $Ye(){return"/"}function tU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function LYe(e){if(typeof e=="string")e=new URL(e);else if(!tU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return BYe(e)}function BYe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const gB=["history","path","basename","stem","extname","dirname"];class Yve{constructor(t){let n;t?tU(t)?n={path:t}:typeof t=="string"||jYe(t)?n={value:t}:n=t:n={},this.cwd=MYe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<gB.length;){const o=gB[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let i;for(i in n)gB.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Tp.basename(this.path):void 0}set basename(t){vB(t,"basename"),yB(t,"basename"),this.path=Tp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Tp.dirname(this.path):void 0}set dirname(t){Iie(this.basename,"dirname"),this.path=Tp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Tp.extname(this.path):void 0}set extname(t){if(yB(t,"extname"),Iie(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Tp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){tU(t)&&(t=LYe(t)),vB(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Tp.basename(this.path,this.extname):void 0}set stem(t){vB(t,"stem"),yB(t,"stem"),this.path=Tp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new qu(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function yB(e,t){if(e&&e.includes(Tp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Tp.sep+"`")}function vB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Iie(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function jYe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zYe=function(e){const r=this.constructor.prototype,i=r[e],o=function(){return i.apply(o,arguments)};Object.setPrototypeOf(o,r);const s=Object.getOwnPropertyNames(i);for(const a of s){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(o,a,u)}return o},UYe={}.hasOwnProperty;class uY extends zYe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=DYe()}copy(){const t=new uY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(mB(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(wB("data",this.frozen),this.namespace[t]=n,this):UYe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(wB("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=u3(t),r=this.parser||this.Parser;return bB("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),bB("process",this.parser||this.Parser),xB("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(o,s){const a=u3(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,m=r.stringify(h,d);qYe(m)?d.value=m:d.result=m,l(c,d)});function l(c,f){c||!f?s(c):o?o(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),bB("processSync",this.parser||this.Parser),xB("processSync",this.compiler||this.Compiler),this.process(t,i),Nie("processSync","process",n),r;function i(o,s){n=!0,Die(o),r=s}}run(t,n,r){Rie(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(s,a){const u=u3(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):s?s(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,o),Nie("runSync","run",r),i;function o(s,a){Die(s),i=a,r=!0}}stringify(t,n){this.freeze();const r=u3(n),i=this.compiler||this.Compiler;return xB("stringify",i),Rie(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(wB("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):s(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function o(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else s(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function s(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=mB(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];o(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...m]=c;const p=r[d][1];eU(p)&&eU(h)&&(h=mB(!0,p,h)),r[d]=[l,h,...m]}}}}const VYe=new uY().freeze();function bB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function xB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function wB(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Rie(e){if(!eU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Nie(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function u3(e){return HYe(e)?e:new Yve(e)}function HYe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function qYe(e){return typeof e=="string"||WYe(e)}function WYe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const GYe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Pie=[],Oie={allowDangerousHtml:!0},YYe=/^(https?|ircs?|mailto|xmpp)$/i,KYe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function XYe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,o=e.components,s=e.disallowedElements,a=e.rehypePlugins||Pie,u=e.remarkPlugins||Pie,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Oie}:Oie,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||QYe,h=VYe().use(IGe).use(u).use(CYe,l).use(a),m=new Yve;typeof r=="string"&&(m.value=r);for(const b of KYe)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+GYe+b.id,void 0);const p=h.parse(m);let g=h.runSync(p,m);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),aY(g,v),uqe(g,{Fragment:A.Fragment,components:o,ignoreInvalidStyle:!0,jsx:A.jsx,jsxs:A.jsxs,passKeys:!0,passNode:!0});function v(b,w,E){if(b.type==="raw"&&E&&typeof w=="number")return c?E.children.splice(w,1):E.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let T;for(T in fB)if(Object.hasOwn(fB,T)&&Object.hasOwn(b.properties,T)){const C=b.properties[T],S=fB[T];(S===null||S.includes(b.tagName))&&(b.properties[T]=d(String(C||""),T,b))}}if(b.type==="element"){let T=t?!t.includes(b.tagName):s?s.includes(b.tagName):!1;if(!T&&n&&typeof w=="number"&&(T=!n(b,w,E)),T&&E&&typeof w=="number")return f&&b.children?E.children.splice(w,1,...b.children):E.children.splice(w,1),w}}}function QYe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||YYe.test(e.slice(0,t))?e:""}const Fie=/[#.]/g;function JYe(e,t){const n=e||"",r={};let i=0,o,s;for(;i<n.length;){Fie.lastIndex=i;const a=Fie.exec(n),u=n.slice(i,a?a.index:n.length);u&&(o?o==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:s=u,i+=u.length),a&&(o=a[0],i++)}return{type:"element",tagName:s||t||"div",properties:r,children:[]}}const ZYe=new Set(["button","menu","reset","submit"]),nU={}.hasOwnProperty;function Kve(e,t,n){const r=n&&rKe(n);function i(o,s,...a){let u=-1,l;if(o==null){l={type:"root",children:[]};const c=s;a.unshift(c)}else if(l=JYe(o,t),l.tagName=l.tagName.toLowerCase(),r&&nU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),eKe(s,l.tagName)){let c;for(c in s)nU.call(s,c)&&tKe(e,l.properties,c,s[c])}else a.unshift(s);for(;++u<a.length;)rU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function eKe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?ZYe.has(e.type.toLowerCase()):!("value"in e)}function tKe(e,t,n,r){const i=N5(e,n);let o=-1,s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=tie(r):i.commaSeparated?s=Xre(r):i.commaOrSpaceSeparated?s=tie(Xre(r).join(" ")):s=Mie(i,i.property,r):Array.isArray(r)?s=r.concat():s=i.property==="style"?nKe(r):String(r);if(Array.isArray(s)){const a=[];for(;++o<s.length;){const u=Mie(i,i.property,s[o]);a[o]=u}s=a}if(i.property==="className"&&Array.isArray(t.className)){const a=s;s=t.className.concat(a)}t[i.property]=s}}function rU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)rU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?rU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Mie(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||lk(n)===lk(t)))return!0}return n}function nKe(e){const t=[];let n;for(n in e)nU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function rKe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const iKe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],oKe=Kve(II,"div"),sKe=Kve(iv,"g",iKe),_B=/\r?\n|\r/g;function aKe(e){const t=String(e),n=[];for(_B.lastIndex=0;_B.test(t);)n.push(_B.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(o){let s=-1;if(typeof o=="number"&&o>-1&&o<n[n.length-1]){for(;++s<n.length;)if(n[s]>o)return{line:s+1,column:o-(s>0?n[s-1]:0)+1,offset:o}}}function i(o){const s=o&&o.line,a=o&&o.column;if(typeof s=="number"&&typeof a=="number"&&!Number.isNaN(s)&&!Number.isNaN(a)&&s-1 in n){const u=(n[s-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Yb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Xve={}.hasOwnProperty,uKe=Object.prototype;function lKe(e,t){const n=t;return lY({file:n.file||void 0,location:!1,schema:n.space==="svg"?iv:II,verbose:n.verbose||!1},e)}function lY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},x4(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Qve(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const o=String(e.file),s=aKe(o),a=s.toPoint(0),u=s.toPoint(o.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},x4(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},x4(e,r,n),n}default:return n=cKe(e,t),n}}function Qve(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=lY(e,t[n]);r.push(i)}return r}function cKe(e,t){const n=e.schema;e.schema=t.namespaceURI===Yb.svg?iv:II;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Xve.call(uKe,u)||(i[u]=a.value)}const s=(e.schema.space==="svg"?sKe:oKe)(t.tagName,i,Qve(e,t.childNodes));if(x4(e,t,s),s.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&OE(u.startTag),c=u&&u.endTag&&OE(u.endTag),f=lY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),s.content=f}return e.schema=n,s}function x4(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=fKe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function fKe(e,t,n){const r=OE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const o={};let s;if(n.attrs)for(s in n.attrs)Xve.call(n.attrs,s)&&(o[N5(e.schema,s).property]=OE(n.attrs[s]));n.startTag;const a=OE(n.startTag),u=n.endTag?OE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=o,t.data={position:l}}}return r}function OE(e){const t=$ie({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=$ie({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function $ie(e){return e.line&&e.column?e:void 0}const Lie={}.hasOwnProperty;function Jve(e,t){const n=t||{};function r(i,...o){let s=r.invalid;const a=r.handlers;if(i&&Lie.call(i,e)){const u=String(i[e]);s=Lie.call(a,u)?a[u]:r.unknown}if(s)return s.call(this,i,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const dKe={}.hasOwnProperty,Zve=Jve("type",{handlers:{root:pKe,element:bKe,text:yKe,comment:vKe,doctype:gKe}});function hKe(e,t){const r=t.space;return Zve(e,r==="svg"?iv:II)}function pKe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=cY(e.children,n,t),WT(e,n),n}function mKe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=cY(e.children,n,t),WT(e,n),n}function gKe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return WT(e,t),t}function yKe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return WT(e,t),t}function vKe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return WT(e,t),t}function bKe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=iv);const i=[];let o;if(e.properties){for(o in e.properties)if(o!=="children"&&dKe.call(e.properties,o)){const u=xKe(r,o,e.properties[o]);u&&i.push(u)}}const s=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Yb[s],childNodes:[],parentNode:null};return a.childNodes=cY(e.children,a,r),WT(e,a),e.tagName==="template"&&e.content&&(a.content=mKe(e.content,r)),a}function xKe(e,t,n){const r=N5(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?hve(n):_ve(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=i.name.indexOf(":");o<0?i.prefix="":(i.name=i.name.slice(o+1),i.prefix=r.attribute.slice(0,o)),i.namespace=Yb[r.space]}return i}function cY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const o=Zve(e[r],n);o.parentNode=t,i.push(o)}return i}function WT(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const wKe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],_Ke=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ao="";var de;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(de=de||(de={}));const Ql={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function ebe(e){return e>=55296&&e<=57343}function EKe(e){return e>=56320&&e<=57343}function TKe(e,t){return(e-55296)*1024+9216+t}function tbe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function nbe(e){return e>=64976&&e<=65007||_Ke.has(e)}var it;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(it=it||(it={}));const CKe=65536;class SKe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=CKe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(EKe(n))return this.pos++,this._addGap(),TKe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,de.EOF;return this._err(it.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;const r=this.html.charCodeAt(n);return r===de.CARRIAGE_RETURN?de.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;let t=this.html.charCodeAt(this.pos);return t===de.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,de.LINE_FEED):t===de.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,ebe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===de.LINE_FEED||t===de.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){tbe(t)?this._err(it.controlCharacterInInputStream):nbe(t)&&this._err(it.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var dr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(dr=dr||(dr={}));function rbe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Dy=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),AKe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var EB;const DKe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),kKe=(EB=String.fromCodePoint)!==null&&EB!==void 0?EB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function IKe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=DKe.get(e))!==null&&t!==void 0?t:e}var ca;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ca||(ca={}));const RKe=32;var $p;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})($p||($p={}));function iU(e){return e>=ca.ZERO&&e<=ca.NINE}function NKe(e){return e>=ca.UPPER_A&&e<=ca.UPPER_F||e>=ca.LOWER_A&&e<=ca.LOWER_F}function PKe(e){return e>=ca.UPPER_A&&e<=ca.UPPER_Z||e>=ca.LOWER_A&&e<=ca.LOWER_Z||iU(e)}function OKe(e){return e===ca.EQUALS||PKe(e)}var sa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(sa||(sa={}));var Bb;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Bb||(Bb={}));class FKe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=sa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Bb.Strict}startEntity(t){this.decodeMode=t,this.state=sa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case sa.EntityStart:return t.charCodeAt(n)===ca.NUM?(this.state=sa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=sa.NamedEntity,this.stateNamedEntity(t,n));case sa.NumericStart:return this.stateNumericStart(t,n);case sa.NumericDecimal:return this.stateNumericDecimal(t,n);case sa.NumericHex:return this.stateNumericHex(t,n);case sa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|RKe)===ca.LOWER_X?(this.state=sa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=sa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const o=r-n;this.result=this.result*Math.pow(i,o)+parseInt(t.substr(n,o),i),this.consumed+=o}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(iU(i)||NKe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(iU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ca.SEMI)this.consumed+=1;else if(this.decodeMode===Bb.Strict)return 0;return this.emitCodePoint(IKe(this.result),this.consumed),this.errors&&(t!==ca.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],o=(i&$p.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=obe(r,i,this.treeIndex+Math.max(1,o),s),this.treeIndex<0)return this.result===0||this.decodeMode===Bb.Attribute&&(o===0||OKe(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],o=(i&$p.VALUE_LENGTH)>>14,o!==0){if(s===ca.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Bb.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&$p.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~$p.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case sa.NamedEntity:return this.result!==0&&(this.decodeMode!==Bb.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case sa.NumericDecimal:return this.emitNumericEntity(0,2);case sa.NumericHex:return this.emitNumericEntity(0,3);case sa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case sa.EntityStart:return 0}}}function ibe(e){let t="";const n=new FKe(e,r=>t+=kKe(r));return function(i,o){let s=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(s,a),n.startEntity(o);const l=n.write(i,a+1);if(l<0){s=a+n.end();break}s=a+l,a=l===0?s+1:s}const u=t+i.slice(s);return t="",u}}function obe(e,t,n,r){const i=(t&$p.BRANCH_LENGTH)>>7,o=t&$p.JUMP_TABLE;if(i===0)return o!==0&&r===o?n:-1;if(o){const u=r-o;return u<0||u>=i?-1:e[n+u]-1}let s=n,a=s+i-1;for(;s<=a;){const u=s+a>>>1,l=e[u];if(l<r)s=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}ibe(Dy);ibe(AKe);var mt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(mt=mt||(mt={}));var o1;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(o1=o1||(o1={}));var Zc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Zc=Zc||(Zc={}));var We;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(We=We||(We={}));var j;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(j=j||(j={}));const MKe=new Map([[We.A,j.A],[We.ADDRESS,j.ADDRESS],[We.ANNOTATION_XML,j.ANNOTATION_XML],[We.APPLET,j.APPLET],[We.AREA,j.AREA],[We.ARTICLE,j.ARTICLE],[We.ASIDE,j.ASIDE],[We.B,j.B],[We.BASE,j.BASE],[We.BASEFONT,j.BASEFONT],[We.BGSOUND,j.BGSOUND],[We.BIG,j.BIG],[We.BLOCKQUOTE,j.BLOCKQUOTE],[We.BODY,j.BODY],[We.BR,j.BR],[We.BUTTON,j.BUTTON],[We.CAPTION,j.CAPTION],[We.CENTER,j.CENTER],[We.CODE,j.CODE],[We.COL,j.COL],[We.COLGROUP,j.COLGROUP],[We.DD,j.DD],[We.DESC,j.DESC],[We.DETAILS,j.DETAILS],[We.DIALOG,j.DIALOG],[We.DIR,j.DIR],[We.DIV,j.DIV],[We.DL,j.DL],[We.DT,j.DT],[We.EM,j.EM],[We.EMBED,j.EMBED],[We.FIELDSET,j.FIELDSET],[We.FIGCAPTION,j.FIGCAPTION],[We.FIGURE,j.FIGURE],[We.FONT,j.FONT],[We.FOOTER,j.FOOTER],[We.FOREIGN_OBJECT,j.FOREIGN_OBJECT],[We.FORM,j.FORM],[We.FRAME,j.FRAME],[We.FRAMESET,j.FRAMESET],[We.H1,j.H1],[We.H2,j.H2],[We.H3,j.H3],[We.H4,j.H4],[We.H5,j.H5],[We.H6,j.H6],[We.HEAD,j.HEAD],[We.HEADER,j.HEADER],[We.HGROUP,j.HGROUP],[We.HR,j.HR],[We.HTML,j.HTML],[We.I,j.I],[We.IMG,j.IMG],[We.IMAGE,j.IMAGE],[We.INPUT,j.INPUT],[We.IFRAME,j.IFRAME],[We.KEYGEN,j.KEYGEN],[We.LABEL,j.LABEL],[We.LI,j.LI],[We.LINK,j.LINK],[We.LISTING,j.LISTING],[We.MAIN,j.MAIN],[We.MALIGNMARK,j.MALIGNMARK],[We.MARQUEE,j.MARQUEE],[We.MATH,j.MATH],[We.MENU,j.MENU],[We.META,j.META],[We.MGLYPH,j.MGLYPH],[We.MI,j.MI],[We.MO,j.MO],[We.MN,j.MN],[We.MS,j.MS],[We.MTEXT,j.MTEXT],[We.NAV,j.NAV],[We.NOBR,j.NOBR],[We.NOFRAMES,j.NOFRAMES],[We.NOEMBED,j.NOEMBED],[We.NOSCRIPT,j.NOSCRIPT],[We.OBJECT,j.OBJECT],[We.OL,j.OL],[We.OPTGROUP,j.OPTGROUP],[We.OPTION,j.OPTION],[We.P,j.P],[We.PARAM,j.PARAM],[We.PLAINTEXT,j.PLAINTEXT],[We.PRE,j.PRE],[We.RB,j.RB],[We.RP,j.RP],[We.RT,j.RT],[We.RTC,j.RTC],[We.RUBY,j.RUBY],[We.S,j.S],[We.SCRIPT,j.SCRIPT],[We.SECTION,j.SECTION],[We.SELECT,j.SELECT],[We.SOURCE,j.SOURCE],[We.SMALL,j.SMALL],[We.SPAN,j.SPAN],[We.STRIKE,j.STRIKE],[We.STRONG,j.STRONG],[We.STYLE,j.STYLE],[We.SUB,j.SUB],[We.SUMMARY,j.SUMMARY],[We.SUP,j.SUP],[We.TABLE,j.TABLE],[We.TBODY,j.TBODY],[We.TEMPLATE,j.TEMPLATE],[We.TEXTAREA,j.TEXTAREA],[We.TFOOT,j.TFOOT],[We.TD,j.TD],[We.TH,j.TH],[We.THEAD,j.THEAD],[We.TITLE,j.TITLE],[We.TR,j.TR],[We.TRACK,j.TRACK],[We.TT,j.TT],[We.U,j.U],[We.UL,j.UL],[We.SVG,j.SVG],[We.VAR,j.VAR],[We.WBR,j.WBR],[We.XMP,j.XMP]]);function GT(e){var t;return(t=MKe.get(e))!==null&&t!==void 0?t:j.UNKNOWN}const Ft=j,$Ke={[mt.HTML]:new Set([Ft.ADDRESS,Ft.APPLET,Ft.AREA,Ft.ARTICLE,Ft.ASIDE,Ft.BASE,Ft.BASEFONT,Ft.BGSOUND,Ft.BLOCKQUOTE,Ft.BODY,Ft.BR,Ft.BUTTON,Ft.CAPTION,Ft.CENTER,Ft.COL,Ft.COLGROUP,Ft.DD,Ft.DETAILS,Ft.DIR,Ft.DIV,Ft.DL,Ft.DT,Ft.EMBED,Ft.FIELDSET,Ft.FIGCAPTION,Ft.FIGURE,Ft.FOOTER,Ft.FORM,Ft.FRAME,Ft.FRAMESET,Ft.H1,Ft.H2,Ft.H3,Ft.H4,Ft.H5,Ft.H6,Ft.HEAD,Ft.HEADER,Ft.HGROUP,Ft.HR,Ft.HTML,Ft.IFRAME,Ft.IMG,Ft.INPUT,Ft.LI,Ft.LINK,Ft.LISTING,Ft.MAIN,Ft.MARQUEE,Ft.MENU,Ft.META,Ft.NAV,Ft.NOEMBED,Ft.NOFRAMES,Ft.NOSCRIPT,Ft.OBJECT,Ft.OL,Ft.P,Ft.PARAM,Ft.PLAINTEXT,Ft.PRE,Ft.SCRIPT,Ft.SECTION,Ft.SELECT,Ft.SOURCE,Ft.STYLE,Ft.SUMMARY,Ft.TABLE,Ft.TBODY,Ft.TD,Ft.TEMPLATE,Ft.TEXTAREA,Ft.TFOOT,Ft.TH,Ft.THEAD,Ft.TITLE,Ft.TR,Ft.TRACK,Ft.UL,Ft.WBR,Ft.XMP]),[mt.MATHML]:new Set([Ft.MI,Ft.MO,Ft.MN,Ft.MS,Ft.MTEXT,Ft.ANNOTATION_XML]),[mt.SVG]:new Set([Ft.TITLE,Ft.FOREIGN_OBJECT,Ft.DESC]),[mt.XLINK]:new Set,[mt.XML]:new Set,[mt.XMLNS]:new Set};function sbe(e){return e===Ft.H1||e===Ft.H2||e===Ft.H3||e===Ft.H4||e===Ft.H5||e===Ft.H6}We.STYLE,We.SCRIPT,We.XMP,We.IFRAME,We.NOEMBED,We.NOFRAMES,We.PLAINTEXT;const LKe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ge;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ge||(ge={}));const us={DATA:ge.DATA,RCDATA:ge.RCDATA,RAWTEXT:ge.RAWTEXT,SCRIPT_DATA:ge.SCRIPT_DATA,PLAINTEXT:ge.PLAINTEXT,CDATA_SECTION:ge.CDATA_SECTION};function SD(e){return e>=de.DIGIT_0&&e<=de.DIGIT_9}function NA(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_Z}function BKe(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_Z}function ky(e){return BKe(e)||NA(e)}function oU(e){return ky(e)||SD(e)}function abe(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_F}function ube(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_F}function jKe(e){return SD(e)||abe(e)||ube(e)}function l3(e){return e+32}function lbe(e){return e===de.SPACE||e===de.LINE_FEED||e===de.TABULATION||e===de.FORM_FEED}function zKe(e){return e===de.EQUALS_SIGN||oU(e)}function Bie(e){return lbe(e)||e===de.SOLIDUS||e===de.GREATER_THAN_SIGN}class UKe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ge.DATA,this.returnState=ge.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new SKe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:dr.START_TAG,tagName:"",tagID:j.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:dr.END_TAG,tagName:"",tagID:j.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:dr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:dr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(rbe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(it.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=GT(t.tagName),t.type===dr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(it.endTagWithAttributes),t.selfClosing&&this._err(it.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case dr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case dr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case dr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:dr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=lbe(t)?dr.WHITESPACE_CHARACTER:t===de.NULL?dr.NULL_CHARACTER:dr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(dr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let o=0,s=Dy[0];o>=0&&(o=obe(Dy,s,o+1,t),!(o<0));t=this._consume()){r+=1,s=Dy[o];const a=s&$p.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==de.SEMICOLON&&this._isCharacterReferenceInAttribute()&&zKe(this.preprocessor.peek(1))?(n=[de.AMPERSAND],o+=u):(n=u===0?[Dy[o]&~$p.VALUE_LENGTH]:u===1?[Dy[++o]]:[Dy[++o],Dy[++o]],r=0,i=t!==de.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(it.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===ge.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ge.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ge.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ge.DATA:{this._stateData(t);break}case ge.RCDATA:{this._stateRcdata(t);break}case ge.RAWTEXT:{this._stateRawtext(t);break}case ge.SCRIPT_DATA:{this._stateScriptData(t);break}case ge.PLAINTEXT:{this._statePlaintext(t);break}case ge.TAG_OPEN:{this._stateTagOpen(t);break}case ge.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ge.TAG_NAME:{this._stateTagName(t);break}case ge.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ge.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ge.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ge.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ge.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ge.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ge.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ge.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ge.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ge.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ge.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ge.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ge.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ge.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ge.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ge.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ge.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ge.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ge.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ge.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ge.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ge.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ge.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ge.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ge.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ge.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ge.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ge.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ge.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ge.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ge.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ge.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ge.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ge.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ge.COMMENT_START:{this._stateCommentStart(t);break}case ge.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ge.COMMENT:{this._stateComment(t);break}case ge.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ge.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ge.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ge.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ge.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ge.COMMENT_END:{this._stateCommentEnd(t);break}case ge.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ge.DOCTYPE:{this._stateDoctype(t);break}case ge.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ge.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ge.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ge.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ge.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ge.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ge.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ge.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ge.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ge.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ge.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ge.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ge.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ge.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ge.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ge.CDATA_SECTION:{this._stateCdataSection(t);break}case ge.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ge.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ge.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case ge.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case ge.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case ge.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case ge.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case ge.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case ge.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case ge.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=ge.TAG_OPEN;break}case de.AMPERSAND:{this.returnState=ge.DATA,this.state=ge.CHARACTER_REFERENCE;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this._emitCodePoint(t);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case de.AMPERSAND:{this.returnState=ge.RCDATA,this.state=ge.CHARACTER_REFERENCE;break}case de.LESS_THAN_SIGN:{this.state=ge.RCDATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this._emitChars(ao);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case de.LESS_THAN_SIGN:{this.state=ge.RAWTEXT_LESS_THAN_SIGN;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this._emitChars(ao);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=ge.SCRIPT_DATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this._emitChars(ao);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case de.NULL:{this._err(it.unexpectedNullCharacter),this._emitChars(ao);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(ky(t))this._createStartTagToken(),this.state=ge.TAG_NAME,this._stateTagName(t);else switch(t){case de.EXCLAMATION_MARK:{this.state=ge.MARKUP_DECLARATION_OPEN;break}case de.SOLIDUS:{this.state=ge.END_TAG_OPEN;break}case de.QUESTION_MARK:{this._err(it.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ge.BOGUS_COMMENT,this._stateBogusComment(t);break}case de.EOF:{this._err(it.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(it.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ge.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(ky(t))this._createEndTagToken(),this.state=ge.TAG_NAME,this._stateTagName(t);else switch(t){case de.GREATER_THAN_SIGN:{this._err(it.missingEndTagName),this.state=ge.DATA;break}case de.EOF:{this._err(it.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(it.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ge.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=ge.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this.state=ge.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this.state=ge.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.tagName+=ao;break}case de.EOF:{this._err(it.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(NA(t)?l3(t):t)}}_stateRcdataLessThanSign(t){t===de.SOLIDUS?this.state=ge.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ge.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){ky(t)?(this.state=ge.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ge.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ge.BEFORE_ATTRIBUTE_NAME,!1;case de.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ge.SELF_CLOSING_START_TAG,!1;case de.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ge.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ge.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===de.SOLIDUS?this.state=ge.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ge.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){ky(t)?(this.state=ge.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ge.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ge.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case de.SOLIDUS:{this.state=ge.SCRIPT_DATA_END_TAG_OPEN;break}case de.EXCLAMATION_MARK:{this.state=ge.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ge.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){ky(t)?(this.state=ge.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ge.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ge.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===de.HYPHEN_MINUS?(this.state=ge.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ge.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===de.HYPHEN_MINUS?(this.state=ge.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ge.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=ge.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=ge.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this._emitChars(ao);break}case de.EOF:{this._err(it.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=ge.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=ge.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.state=ge.SCRIPT_DATA_ESCAPED,this._emitChars(ao);break}case de.EOF:{this._err(it.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ge.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=ge.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.GREATER_THAN_SIGN:{this.state=ge.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.state=ge.SCRIPT_DATA_ESCAPED,this._emitChars(ao);break}case de.EOF:{this._err(it.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ge.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===de.SOLIDUS?this.state=ge.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ky(t)?(this._emitChars("<"),this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ge.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){ky(t)?(this.state=ge.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ge.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ge.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Ql.SCRIPT,!1)&&Bie(this.preprocessor.peek(Ql.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ql.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ge.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(it.unexpectedNullCharacter),this._emitChars(ao);break}case de.EOF:{this._err(it.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ao);break}case de.EOF:{this._err(it.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.GREATER_THAN_SIGN:{this.state=ge.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ao);break}case de.EOF:{this._err(it.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===de.SOLIDUS?(this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Ql.SCRIPT,!1)&&Bie(this.preprocessor.peek(Ql.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Ql.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ge.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ge.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this.state=ge.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._err(it.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ge.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ge.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this._leaveAttrName(),this.state=ge.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._leaveAttrName(),this.state=ge.BEFORE_ATTRIBUTE_VALUE;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:{this._err(it.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.currentAttr.name+=ao;break}default:this.currentAttr.name+=String.fromCodePoint(NA(t)?l3(t):t)}}_stateAfterAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:{this.state=ge.SELF_CLOSING_START_TAG;break}case de.EQUALS_SIGN:{this.state=ge.BEFORE_ATTRIBUTE_VALUE;break}case de.GREATER_THAN_SIGN:{this.state=ge.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(it.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ge.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{this.state=ge.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this.state=ge.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(it.missingAttributeValue),this.state=ge.DATA,this.emitCurrentTagToken();break}default:this.state=ge.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case de.QUOTATION_MARK:{this.state=ge.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=ge.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ge.CHARACTER_REFERENCE;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case de.EOF:{this._err(it.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case de.APOSTROPHE:{this.state=ge.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=ge.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ge.CHARACTER_REFERENCE;break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case de.EOF:{this._err(it.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=ge.BEFORE_ATTRIBUTE_NAME;break}case de.AMPERSAND:{this.returnState=ge.ATTRIBUTE_VALUE_UNQUOTED,this.state=ge.CHARACTER_REFERENCE;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ge.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(it.unexpectedNullCharacter),this.currentAttr.value+=ao;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:case de.EQUALS_SIGN:case de.GRAVE_ACCENT:{this._err(it.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case de.EOF:{this._err(it.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=ge.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this._leaveAttrValue(),this.state=ge.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ge.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(it.eofInTag),this._emitEOFToken();break}default:this._err(it.missingWhitespaceBetweenAttributes),this.state=ge.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case de.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=ge.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(it.eofInTag),this._emitEOFToken();break}default:this._err(it.unexpectedSolidusInTag),this.state=ge.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=ge.DATA,this.emitCurrentComment(n);break}case de.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.data+=ao;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Ql.DASH_DASH,!0)?(this._createCommentToken(Ql.DASH_DASH.length+1),this.state=ge.COMMENT_START):this._consumeSequenceIfMatch(Ql.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ql.DOCTYPE.length+1),this.state=ge.DOCTYPE):this._consumeSequenceIfMatch(Ql.CDATA_START,!0)?this.inForeignNode?this.state=ge.CDATA_SECTION:(this._err(it.cdataInHtmlContent),this._createCommentToken(Ql.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ge.BOGUS_COMMENT):this._ensureHibernation()||(this._err(it.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ge.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case de.HYPHEN_MINUS:{this.state=ge.COMMENT_START_DASH;break}case de.GREATER_THAN_SIGN:{this._err(it.abruptClosingOfEmptyComment),this.state=ge.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=ge.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=ge.COMMENT_END;break}case de.GREATER_THAN_SIGN:{this._err(it.abruptClosingOfEmptyComment),this.state=ge.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(it.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ge.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=ge.COMMENT_END_DASH;break}case de.LESS_THAN_SIGN:{n.data+="<",this.state=ge.COMMENT_LESS_THAN_SIGN;break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.data+=ao;break}case de.EOF:{this._err(it.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case de.EXCLAMATION_MARK:{n.data+="!",this.state=ge.COMMENT_LESS_THAN_SIGN_BANG;break}case de.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=ge.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===de.HYPHEN_MINUS?this.state=ge.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ge.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===de.HYPHEN_MINUS?this.state=ge.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ge.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==de.GREATER_THAN_SIGN&&t!==de.EOF&&this._err(it.nestedComment),this.state=ge.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=ge.COMMENT_END;break}case de.EOF:{this._err(it.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ge.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=ge.DATA,this.emitCurrentComment(n);break}case de.EXCLAMATION_MARK:{this.state=ge.COMMENT_END_BANG;break}case de.HYPHEN_MINUS:{n.data+="-";break}case de.EOF:{this._err(it.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=ge.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{n.data+="--!",this.state=ge.COMMENT_END_DASH;break}case de.GREATER_THAN_SIGN:{this._err(it.incorrectlyClosedComment),this.state=ge.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(it.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=ge.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=ge.BEFORE_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=ge.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case de.EOF:{this._err(it.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.missingWhitespaceBeforeDoctypeName),this.state=ge.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(NA(t))this._createDoctypeToken(String.fromCharCode(l3(t))),this.state=ge.DOCTYPE_NAME;else switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.NULL:{this._err(it.unexpectedNullCharacter),this._createDoctypeToken(ao),this.state=ge.DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this._err(it.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.EOF:{this._err(it.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ge.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=ge.AFTER_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=ge.DATA,this.emitCurrentDoctype(n);break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.name+=ao;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(NA(t)?l3(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.state=ge.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ql.PUBLIC,!1)?this.state=ge.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ql.SYSTEM,!1)?this.state=ge.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(it.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=ge.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(it.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ge.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(it.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ge.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(it.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ge.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.publicId="",this.state=ge.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.publicId="",this.state=ge.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(it.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ge.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=ge.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.publicId+=ao;break}case de.GREATER_THAN_SIGN:{this._err(it.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=ge.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.publicId+=ao;break}case de.GREATER_THAN_SIGN:{this._err(it.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=ge.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case de.GREATER_THAN_SIGN:{this.state=ge.DATA,this.emitCurrentDoctype(n);break}case de.QUOTATION_MARK:{this._err(it.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(it.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.QUOTATION_MARK:{n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=ge.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(it.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(it.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(it.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ge.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=ge.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(it.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ge.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=ge.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.systemId+=ao;break}case de.GREATER_THAN_SIGN:{this._err(it.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=ge.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(it.unexpectedNullCharacter),n.systemId+=ao;break}case de.GREATER_THAN_SIGN:{this._err(it.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.EOF:{this._err(it.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(it.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ge.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ge.DATA;break}case de.NULL:{this._err(it.unexpectedNullCharacter);break}case de.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case de.RIGHT_SQUARE_BRACKET:{this.state=ge.CDATA_SECTION_BRACKET;break}case de.EOF:{this._err(it.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===de.RIGHT_SQUARE_BRACKET?this.state=ge.CDATA_SECTION_END:(this._emitChars("]"),this.state=ge.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case de.GREATER_THAN_SIGN:{this.state=ge.DATA;break}case de.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ge.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===de.NUMBER_SIGN?this.state=ge.NUMERIC_CHARACTER_REFERENCE:oU(t)?(this.state=ge.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this.state=ge.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){oU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===de.SEMICOLON&&this._err(it.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===de.LATIN_SMALL_X||t===de.LATIN_CAPITAL_X?this.state=ge.HEXADEMICAL_CHARACTER_REFERENCE_START:SD(t)?(this.state=ge.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(it.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){jKe(t)?(this.state=ge.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(it.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){abe(t)?this.charRefCode=this.charRefCode*16+t-55:ube(t)?this.charRefCode=this.charRefCode*16+t-87:SD(t)?this.charRefCode=this.charRefCode*16+t-48:t===de.SEMICOLON?this.state=ge.NUMERIC_CHARACTER_REFERENCE_END:(this._err(it.missingSemicolonAfterCharacterReference),this.state=ge.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){SD(t)?this.charRefCode=this.charRefCode*10+t-48:t===de.SEMICOLON?this.state=ge.NUMERIC_CHARACTER_REFERENCE_END:(this._err(it.missingSemicolonAfterCharacterReference),this.state=ge.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===de.NULL)this._err(it.nullCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(it.characterReferenceOutsideUnicodeRange),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(ebe(this.charRefCode))this._err(it.surrogateCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(nbe(this.charRefCode))this._err(it.noncharacterCharacterReference);else if(tbe(this.charRefCode)||this.charRefCode===de.CARRIAGE_RETURN){this._err(it.controlCharacterReference);const n=LKe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const cbe=new Set([j.DD,j.DT,j.LI,j.OPTGROUP,j.OPTION,j.P,j.RB,j.RP,j.RT,j.RTC]),jie=new Set([...cbe,j.CAPTION,j.COLGROUP,j.TBODY,j.TD,j.TFOOT,j.TH,j.THEAD,j.TR]),c3=new Map([[j.APPLET,mt.HTML],[j.CAPTION,mt.HTML],[j.HTML,mt.HTML],[j.MARQUEE,mt.HTML],[j.OBJECT,mt.HTML],[j.TABLE,mt.HTML],[j.TD,mt.HTML],[j.TEMPLATE,mt.HTML],[j.TH,mt.HTML],[j.ANNOTATION_XML,mt.MATHML],[j.MI,mt.MATHML],[j.MN,mt.MATHML],[j.MO,mt.MATHML],[j.MS,mt.MATHML],[j.MTEXT,mt.MATHML],[j.DESC,mt.SVG],[j.FOREIGN_OBJECT,mt.SVG],[j.TITLE,mt.SVG]]),VKe=[j.H1,j.H2,j.H3,j.H4,j.H5,j.H6],HKe=[j.TR,j.TEMPLATE,j.HTML],qKe=[j.TBODY,j.TFOOT,j.THEAD,j.TEMPLATE,j.HTML],WKe=[j.TABLE,j.TEMPLATE,j.HTML],GKe=[j.TD,j.TH];class YKe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=j.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===j.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===mt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==mt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(VKe,mt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(GKe,mt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(WKe,mt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(qKe,mt.HTML)}clearBackToTableRowContext(){this.clearBackTo(HKe,mt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===j.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===j.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===mt.HTML)return!0;if(c3.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(sbe(n)&&r===mt.HTML)return!0;if(c3.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===mt.HTML)return!0;if((r===j.UL||r===j.OL)&&i===mt.HTML||c3.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===mt.HTML)return!0;if(r===j.BUTTON&&i===mt.HTML||c3.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===mt.HTML){if(r===t)return!0;if(r===j.TABLE||r===j.TEMPLATE||r===j.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===mt.HTML){if(n===j.TBODY||n===j.THEAD||n===j.TFOOT)return!0;if(n===j.TABLE||n===j.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===mt.HTML){if(r===t)return!0;if(r!==j.OPTION&&r!==j.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;cbe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;jie.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&jie.has(this.currentTagId);)this.pop()}}const TB=3;var rh;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(rh=rh||(rh={}));const zie={type:rh.Marker};class KKe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,o=this.treeAdapter.getTagName(t),s=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===rh.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===o&&this.treeAdapter.getNamespaceURI(l)===s){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<TB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<TB)return;const i=new Map(n.map(s=>[s.name,s.value]));let o=0;for(let s=0;s<r.length;s++){const a=r[s];a.attrs.every(u=>i.get(u.name)===u.value)&&(o+=1,o>=TB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(zie)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:rh.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:rh.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(zie);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===rh.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===rh.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===rh.Element&&n.element===t)}}function Uie(e){return{nodeName:"#text",value:e,parentNode:null}}const TE={createDocument(){return{nodeName:"#document",mode:Zc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(o=>o.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const o={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};TE.appendChild(e,o)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(TE.isTextNode(n)){n.value+=t;return}}TE.appendChild(e,Uie(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&TE.isTextNode(r)?r.value+=t:TE.insertBefore(e,Uie(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},fbe="html",XKe="about:legacy-compat",QKe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",dbe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],JKe=[...dbe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],ZKe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),hbe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],eXe=[...hbe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Vie(e,t){return t.some(n=>e.startsWith(n))}function tXe(e){return e.name===fbe&&e.publicId===null&&(e.systemId===null||e.systemId===XKe)}function nXe(e){if(e.name!==fbe)return Zc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===QKe)return Zc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),ZKe.has(n))return Zc.QUIRKS;let r=t===null?JKe:dbe;if(Vie(n,r))return Zc.QUIRKS;if(r=t===null?hbe:eXe,Vie(n,r))return Zc.LIMITED_QUIRKS}return Zc.NO_QUIRKS}const Hie={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},rXe="definitionurl",iXe="definitionURL",oXe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),sXe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:mt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:mt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:mt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:mt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:mt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:mt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:mt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:mt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:mt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:mt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:mt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:mt.XMLNS}]]),aXe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),uXe=new Set([j.B,j.BIG,j.BLOCKQUOTE,j.BODY,j.BR,j.CENTER,j.CODE,j.DD,j.DIV,j.DL,j.DT,j.EM,j.EMBED,j.H1,j.H2,j.H3,j.H4,j.H5,j.H6,j.HEAD,j.HR,j.I,j.IMG,j.LI,j.LISTING,j.MENU,j.META,j.NOBR,j.OL,j.P,j.PRE,j.RUBY,j.S,j.SMALL,j.SPAN,j.STRONG,j.STRIKE,j.SUB,j.SUP,j.TABLE,j.TT,j.U,j.UL,j.VAR]);function lXe(e){const t=e.tagID;return t===j.FONT&&e.attrs.some(({name:r})=>r===o1.COLOR||r===o1.SIZE||r===o1.FACE)||uXe.has(t)}function pbe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===rXe){e.attrs[t].name=iXe;break}}function mbe(e){for(let t=0;t<e.attrs.length;t++){const n=oXe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function fY(e){for(let t=0;t<e.attrs.length;t++){const n=sXe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function cXe(e){const t=aXe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=GT(e.tagName))}function fXe(e,t){return t===mt.MATHML&&(e===j.MI||e===j.MO||e===j.MN||e===j.MS||e===j.MTEXT)}function dXe(e,t,n){if(t===mt.MATHML&&e===j.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===o1.ENCODING){const i=n[r].value.toLowerCase();return i===Hie.TEXT_HTML||i===Hie.APPLICATION_XML}}return t===mt.SVG&&(e===j.FOREIGN_OBJECT||e===j.DESC||e===j.TITLE)}function hXe(e,t,n,r){return(!r||r===mt.HTML)&&dXe(e,t,n)||(!r||r===mt.MATHML)&&fXe(e,t)}const pXe="hidden",mXe=8,gXe=3;var Se;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Se||(Se={}));const yXe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},gbe=new Set([j.TABLE,j.TBODY,j.TFOOT,j.THEAD,j.TR]),qie={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:TE,onParseError:null};class Wie{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Se.INITIAL,this.originalInsertionMode=Se.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...qie,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new UKe(this.options,this),this.activeFormattingElements=new KKe(this.treeAdapter),this.fragmentContextID=r?GT(this.treeAdapter.getTagName(r)):j.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new YKe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...qie,...n};t??(t=r.treeAdapter.createElement(We.TEMPLATE,mt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",mt.HTML,[]),o=new this(r,i,t);return o.fragmentContextID===j.TEMPLATE&&o.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const o=(i=t.location)!==null&&i!==void 0?i:yXe,s={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(s)}onItemPush(t,n,r){var i,o;(o=(i=this.treeAdapter).onItemPush)===null||o===void 0||o.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let o,s;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,s=this.fragmentContextID):{current:o,currentTagId:s}=this.openElements,this._setContextModes(o,s)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===mt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,mt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Se.TEXT}switchToPlaintextParsing(){this.insertionMode=Se.TEXT,this.originalInsertionMode=Se.IN_BODY,this.tokenizer.state=us.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===We.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==mt.HTML))switch(this.fragmentContextID){case j.TITLE:case j.TEXTAREA:{this.tokenizer.state=us.RCDATA;break}case j.STYLE:case j.XMP:case j.IFRAME:case j.NOEMBED:case j.NOFRAMES:case j.NOSCRIPT:{this.tokenizer.state=us.RAWTEXT;break}case j.SCRIPT:{this.tokenizer.state=us.SCRIPT_DATA;break}case j.PLAINTEXT:{this.tokenizer.state=us.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const s=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));s&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,mt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,mt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(We.HTML,mt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,j.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),o=r?i.lastIndexOf(r):i.length,s=i[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),o=n.type===dr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,o)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===j.SVG&&this.treeAdapter.getTagName(n)===We.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===mt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===j.MGLYPH||t.tagID===j.MALIGNMARK)&&!this._isIntegrationPoint(r,n,mt.HTML)}_processToken(t){switch(t.type){case dr.CHARACTER:{this.onCharacter(t);break}case dr.NULL_CHARACTER:{this.onNullCharacter(t);break}case dr.COMMENT:{this.onComment(t);break}case dr.DOCTYPE:{this.onDoctype(t);break}case dr.START_TAG:{this._processStartTag(t);break}case dr.END_TAG:{this.onEndTag(t);break}case dr.EOF:{this.onEof(t);break}case dr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return hXe(t,i,o,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===rh.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const o=this.activeFormattingElements.entries[i];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Se.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(j.P),this.openElements.popUntilTagNamePopped(j.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case j.TR:{this.insertionMode=Se.IN_ROW;return}case j.TBODY:case j.THEAD:case j.TFOOT:{this.insertionMode=Se.IN_TABLE_BODY;return}case j.CAPTION:{this.insertionMode=Se.IN_CAPTION;return}case j.COLGROUP:{this.insertionMode=Se.IN_COLUMN_GROUP;return}case j.TABLE:{this.insertionMode=Se.IN_TABLE;return}case j.BODY:{this.insertionMode=Se.IN_BODY;return}case j.FRAMESET:{this.insertionMode=Se.IN_FRAMESET;return}case j.SELECT:{this._resetInsertionModeForSelect(t);return}case j.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case j.HTML:{this.insertionMode=this.headElement?Se.AFTER_HEAD:Se.BEFORE_HEAD;return}case j.TD:case j.TH:{if(t>0){this.insertionMode=Se.IN_CELL;return}break}case j.HEAD:{if(t>0){this.insertionMode=Se.IN_HEAD;return}break}}this.insertionMode=Se.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===j.TEMPLATE)break;if(r===j.TABLE){this.insertionMode=Se.IN_SELECT_IN_TABLE;return}}this.insertionMode=Se.IN_SELECT}_isElementCausesFosterParenting(t){return gbe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case j.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===mt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case j.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return $Ke[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){GQe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{qS(this,t);break}case Se.BEFORE_HTML:{AD(this,t);break}case Se.BEFORE_HEAD:{DD(this,t);break}case Se.IN_HEAD:{kD(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{ID(this,t);break}case Se.AFTER_HEAD:{RD(this,t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:{vbe(this,t);break}case Se.TEXT:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{CB(this,t);break}case Se.IN_TABLE_TEXT:{Tbe(this,t);break}case Se.IN_COLUMN_GROUP:{g6(this,t);break}case Se.AFTER_BODY:{y6(this,t);break}case Se.AFTER_AFTER_BODY:{w4(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){WQe(this,t);return}switch(this.insertionMode){case Se.INITIAL:{qS(this,t);break}case Se.BEFORE_HTML:{AD(this,t);break}case Se.BEFORE_HEAD:{DD(this,t);break}case Se.IN_HEAD:{kD(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{ID(this,t);break}case Se.AFTER_HEAD:{RD(this,t);break}case Se.TEXT:{this._insertCharacters(t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{CB(this,t);break}case Se.IN_COLUMN_GROUP:{g6(this,t);break}case Se.AFTER_BODY:{y6(this,t);break}case Se.AFTER_AFTER_BODY:{w4(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){sU(this,t);return}switch(this.insertionMode){case Se.INITIAL:case Se.BEFORE_HTML:case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_TEMPLATE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{sU(this,t);break}case Se.IN_TABLE_TEXT:{WS(this,t);break}case Se.AFTER_BODY:{TXe(this,t);break}case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{CXe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Se.INITIAL:{SXe(this,t);break}case Se.BEFORE_HEAD:case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:{this._err(t,it.misplacedDoctype);break}case Se.IN_TABLE_TEXT:{WS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,it.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?YQe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{qS(this,t);break}case Se.BEFORE_HTML:{AXe(this,t);break}case Se.BEFORE_HEAD:{kXe(this,t);break}case Se.IN_HEAD:{Bh(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{NXe(this,t);break}case Se.AFTER_HEAD:{OXe(this,t);break}case Se.IN_BODY:{Wu(this,t);break}case Se.IN_TABLE:{A2(this,t);break}case Se.IN_TABLE_TEXT:{WS(this,t);break}case Se.IN_CAPTION:{IQe(this,t);break}case Se.IN_COLUMN_GROUP:{pY(this,t);break}case Se.IN_TABLE_BODY:{B5(this,t);break}case Se.IN_ROW:{j5(this,t);break}case Se.IN_CELL:{PQe(this,t);break}case Se.IN_SELECT:{Abe(this,t);break}case Se.IN_SELECT_IN_TABLE:{FQe(this,t);break}case Se.IN_TEMPLATE:{$Qe(this,t);break}case Se.AFTER_BODY:{BQe(this,t);break}case Se.IN_FRAMESET:{jQe(this,t);break}case Se.AFTER_FRAMESET:{UQe(this,t);break}case Se.AFTER_AFTER_BODY:{HQe(this,t);break}case Se.AFTER_AFTER_FRAMESET:{qQe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?KQe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Se.INITIAL:{qS(this,t);break}case Se.BEFORE_HTML:{DXe(this,t);break}case Se.BEFORE_HEAD:{IXe(this,t);break}case Se.IN_HEAD:{RXe(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{PXe(this,t);break}case Se.AFTER_HEAD:{FXe(this,t);break}case Se.IN_BODY:{L5(this,t);break}case Se.TEXT:{xQe(this,t);break}case Se.IN_TABLE:{fk(this,t);break}case Se.IN_TABLE_TEXT:{WS(this,t);break}case Se.IN_CAPTION:{RQe(this,t);break}case Se.IN_COLUMN_GROUP:{NQe(this,t);break}case Se.IN_TABLE_BODY:{aU(this,t);break}case Se.IN_ROW:{Sbe(this,t);break}case Se.IN_CELL:{OQe(this,t);break}case Se.IN_SELECT:{Dbe(this,t);break}case Se.IN_SELECT_IN_TABLE:{MQe(this,t);break}case Se.IN_TEMPLATE:{LQe(this,t);break}case Se.AFTER_BODY:{Ibe(this,t);break}case Se.IN_FRAMESET:{zQe(this,t);break}case Se.AFTER_FRAMESET:{VQe(this,t);break}case Se.AFTER_AFTER_BODY:{w4(this,t);break}}}onEof(t){switch(this.insertionMode){case Se.INITIAL:{qS(this,t);break}case Se.BEFORE_HTML:{AD(this,t);break}case Se.BEFORE_HEAD:{DD(this,t);break}case Se.IN_HEAD:{kD(this,t);break}case Se.IN_HEAD_NO_SCRIPT:{ID(this,t);break}case Se.AFTER_HEAD:{RD(this,t);break}case Se.IN_BODY:case Se.IN_TABLE:case Se.IN_CAPTION:case Se.IN_COLUMN_GROUP:case Se.IN_TABLE_BODY:case Se.IN_ROW:case Se.IN_CELL:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:{_be(this,t);break}case Se.TEXT:{wQe(this,t);break}case Se.IN_TABLE_TEXT:{WS(this,t);break}case Se.IN_TEMPLATE:{kbe(this,t);break}case Se.AFTER_BODY:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{hY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===de.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Se.IN_HEAD:case Se.IN_HEAD_NO_SCRIPT:case Se.AFTER_HEAD:case Se.TEXT:case Se.IN_COLUMN_GROUP:case Se.IN_SELECT:case Se.IN_SELECT_IN_TABLE:case Se.IN_FRAMESET:case Se.AFTER_FRAMESET:{this._insertCharacters(t);break}case Se.IN_BODY:case Se.IN_CAPTION:case Se.IN_CELL:case Se.IN_TEMPLATE:case Se.AFTER_BODY:case Se.AFTER_AFTER_BODY:case Se.AFTER_AFTER_FRAMESET:{ybe(this,t);break}case Se.IN_TABLE:case Se.IN_TABLE_BODY:case Se.IN_ROW:{CB(this,t);break}case Se.IN_TABLE_TEXT:{Ebe(this,t);break}}}}function vXe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):wbe(e,t),n}function bXe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function xXe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,s=i;s!==n;o++,s=i){i=e.openElements.getCommonAncestor(s);const a=e.activeFormattingElements.getElementEntry(s),u=a&&o>=gXe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(s)):(s=wXe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(s,r),r=s)}return r}function wXe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function _Xe(e,t,n){const r=e.treeAdapter.getTagName(t),i=GT(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const o=e.treeAdapter.getNamespaceURI(t);i===j.TEMPLATE&&o===mt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function EXe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function dY(e,t){for(let n=0;n<mXe;n++){const r=vXe(e,t);if(!r)break;const i=bXe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const o=xXe(e,i,r.element),s=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(o),s&&_Xe(e,s,o),EXe(e,i,r)}}function sU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function TXe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function CXe(e,t){e._appendCommentNode(t,e.document)}function hY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const o=e.openElements.items[1],s=e.treeAdapter.getNodeSourceCodeLocation(o);s&&!s.endTag&&e._setEndLocation(o,t)}}}}function SXe(e,t){e._setDocumentType(t);const n=t.forceQuirks?Zc.QUIRKS:nXe(t);tXe(t)||e._err(t,it.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Se.BEFORE_HTML}function qS(e,t){e._err(t,it.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Zc.QUIRKS),e.insertionMode=Se.BEFORE_HTML,e._processToken(t)}function AXe(e,t){t.tagID===j.HTML?(e._insertElement(t,mt.HTML),e.insertionMode=Se.BEFORE_HEAD):AD(e,t)}function DXe(e,t){const n=t.tagID;(n===j.HTML||n===j.HEAD||n===j.BODY||n===j.BR)&&AD(e,t)}function AD(e,t){e._insertFakeRootElement(),e.insertionMode=Se.BEFORE_HEAD,e._processToken(t)}function kXe(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.HEAD:{e._insertElement(t,mt.HTML),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD;break}default:DD(e,t)}}function IXe(e,t){const n=t.tagID;n===j.HEAD||n===j.BODY||n===j.HTML||n===j.BR?DD(e,t):e._err(t,it.endTagWithoutMatchingOpenElement)}function DD(e,t){e._insertFakeElement(We.HEAD,j.HEAD),e.headElement=e.openElements.current,e.insertionMode=Se.IN_HEAD,e._processToken(t)}function Bh(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:{e._appendElement(t,mt.HTML),t.ackSelfClosing=!0;break}case j.TITLE:{e._switchToTextParsing(t,us.RCDATA);break}case j.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,us.RAWTEXT):(e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_HEAD_NO_SCRIPT);break}case j.NOFRAMES:case j.STYLE:{e._switchToTextParsing(t,us.RAWTEXT);break}case j.SCRIPT:{e._switchToTextParsing(t,us.SCRIPT_DATA);break}case j.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Se.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Se.IN_TEMPLATE);break}case j.HEAD:{e._err(t,it.misplacedStartTagForHeadElement);break}default:kD(e,t)}}function RXe(e,t){switch(t.tagID){case j.HEAD:{e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD;break}case j.BODY:case j.BR:case j.HTML:{kD(e,t);break}case j.TEMPLATE:{iw(e,t);break}default:e._err(t,it.endTagWithoutMatchingOpenElement)}}function iw(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==j.TEMPLATE&&e._err(t,it.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(j.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,it.endTagWithoutMatchingOpenElement)}function kD(e,t){e.openElements.pop(),e.insertionMode=Se.AFTER_HEAD,e._processToken(t)}function NXe(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.BASEFONT:case j.BGSOUND:case j.HEAD:case j.LINK:case j.META:case j.NOFRAMES:case j.STYLE:{Bh(e,t);break}case j.NOSCRIPT:{e._err(t,it.nestedNoscriptInHead);break}default:ID(e,t)}}function PXe(e,t){switch(t.tagID){case j.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Se.IN_HEAD;break}case j.BR:{ID(e,t);break}default:e._err(t,it.endTagWithoutMatchingOpenElement)}}function ID(e,t){const n=t.type===dr.EOF?it.openElementsLeftAfterEof:it.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Se.IN_HEAD,e._processToken(t)}function OXe(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.BODY:{e._insertElement(t,mt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_BODY;break}case j.FRAMESET:{e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_FRAMESET;break}case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:case j.NOFRAMES:case j.SCRIPT:case j.STYLE:case j.TEMPLATE:case j.TITLE:{e._err(t,it.abandonedHeadElementChild),e.openElements.push(e.headElement,j.HEAD),Bh(e,t),e.openElements.remove(e.headElement);break}case j.HEAD:{e._err(t,it.misplacedStartTagForHeadElement);break}default:RD(e,t)}}function FXe(e,t){switch(t.tagID){case j.BODY:case j.HTML:case j.BR:{RD(e,t);break}case j.TEMPLATE:{iw(e,t);break}default:e._err(t,it.endTagWithoutMatchingOpenElement)}}function RD(e,t){e._insertFakeElement(We.BODY,j.BODY),e.insertionMode=Se.IN_BODY,$5(e,t)}function $5(e,t){switch(t.type){case dr.CHARACTER:{vbe(e,t);break}case dr.WHITESPACE_CHARACTER:{ybe(e,t);break}case dr.COMMENT:{sU(e,t);break}case dr.START_TAG:{Wu(e,t);break}case dr.END_TAG:{L5(e,t);break}case dr.EOF:{_be(e,t);break}}}function ybe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function vbe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function MXe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function $Xe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function LXe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_FRAMESET)}function BXe(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,mt.HTML)}function jXe(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),sbe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,mt.HTML)}function zXe(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,mt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function UXe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,mt.HTML),n||(e.formElement=e.openElements.current))}function VXe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===j.LI&&i===j.LI||(n===j.DD||n===j.DT)&&(i===j.DD||i===j.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==j.ADDRESS&&i!==j.DIV&&i!==j.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,mt.HTML)}function HXe(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,mt.HTML),e.tokenizer.state=us.PLAINTEXT}function qXe(e,t){e.openElements.hasInScope(j.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,mt.HTML),e.framesetOk=!1}function WXe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(We.A);n&&(dY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,mt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function GXe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,mt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function YXe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(j.NOBR)&&(dY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,mt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function KXe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,mt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function XXe(e,t){e.treeAdapter.getDocumentMode(e.document)!==Zc.QUIRKS&&e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,mt.HTML),e.framesetOk=!1,e.insertionMode=Se.IN_TABLE}function bbe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,mt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function xbe(e){const t=rbe(e,o1.TYPE);return t!=null&&t.toLowerCase()===pXe}function QXe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,mt.HTML),xbe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function JXe(e,t){e._appendElement(t,mt.HTML),t.ackSelfClosing=!0}function ZXe(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._appendElement(t,mt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function eQe(e,t){t.tagName=We.IMG,t.tagID=j.IMG,bbe(e,t)}function tQe(e,t){e._insertElement(t,mt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=us.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Se.TEXT}function nQe(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function rQe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function Gie(e,t){e._switchToTextParsing(t,us.RAWTEXT)}function iQe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,mt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Se.IN_TABLE||e.insertionMode===Se.IN_CAPTION||e.insertionMode===Se.IN_TABLE_BODY||e.insertionMode===Se.IN_ROW||e.insertionMode===Se.IN_CELL?Se.IN_SELECT_IN_TABLE:Se.IN_SELECT}function oQe(e,t){e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,mt.HTML)}function sQe(e,t){e.openElements.hasInScope(j.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,mt.HTML)}function aQe(e,t){e.openElements.hasInScope(j.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(j.RTC),e._insertElement(t,mt.HTML)}function uQe(e,t){e._reconstructActiveFormattingElements(),pbe(t),fY(t),t.selfClosing?e._appendElement(t,mt.MATHML):e._insertElement(t,mt.MATHML),t.ackSelfClosing=!0}function lQe(e,t){e._reconstructActiveFormattingElements(),mbe(t),fY(t),t.selfClosing?e._appendElement(t,mt.SVG):e._insertElement(t,mt.SVG),t.ackSelfClosing=!0}function Yie(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,mt.HTML)}function Wu(e,t){switch(t.tagID){case j.I:case j.S:case j.B:case j.U:case j.EM:case j.TT:case j.BIG:case j.CODE:case j.FONT:case j.SMALL:case j.STRIKE:case j.STRONG:{GXe(e,t);break}case j.A:{WXe(e,t);break}case j.H1:case j.H2:case j.H3:case j.H4:case j.H5:case j.H6:{jXe(e,t);break}case j.P:case j.DL:case j.OL:case j.UL:case j.DIV:case j.DIR:case j.NAV:case j.MAIN:case j.MENU:case j.ASIDE:case j.CENTER:case j.FIGURE:case j.FOOTER:case j.HEADER:case j.HGROUP:case j.DIALOG:case j.DETAILS:case j.ADDRESS:case j.ARTICLE:case j.SECTION:case j.SUMMARY:case j.FIELDSET:case j.BLOCKQUOTE:case j.FIGCAPTION:{BXe(e,t);break}case j.LI:case j.DD:case j.DT:{VXe(e,t);break}case j.BR:case j.IMG:case j.WBR:case j.AREA:case j.EMBED:case j.KEYGEN:{bbe(e,t);break}case j.HR:{ZXe(e,t);break}case j.RB:case j.RTC:{sQe(e,t);break}case j.RT:case j.RP:{aQe(e,t);break}case j.PRE:case j.LISTING:{zXe(e,t);break}case j.XMP:{nQe(e,t);break}case j.SVG:{lQe(e,t);break}case j.HTML:{MXe(e,t);break}case j.BASE:case j.LINK:case j.META:case j.STYLE:case j.TITLE:case j.SCRIPT:case j.BGSOUND:case j.BASEFONT:case j.TEMPLATE:{Bh(e,t);break}case j.BODY:{$Xe(e,t);break}case j.FORM:{UXe(e,t);break}case j.NOBR:{YXe(e,t);break}case j.MATH:{uQe(e,t);break}case j.TABLE:{XXe(e,t);break}case j.INPUT:{QXe(e,t);break}case j.PARAM:case j.TRACK:case j.SOURCE:{JXe(e,t);break}case j.IMAGE:{eQe(e,t);break}case j.BUTTON:{qXe(e,t);break}case j.APPLET:case j.OBJECT:case j.MARQUEE:{KXe(e,t);break}case j.IFRAME:{rQe(e,t);break}case j.SELECT:{iQe(e,t);break}case j.OPTION:case j.OPTGROUP:{oQe(e,t);break}case j.NOEMBED:{Gie(e,t);break}case j.FRAMESET:{LXe(e,t);break}case j.TEXTAREA:{tQe(e,t);break}case j.NOSCRIPT:{e.options.scriptingEnabled?Gie(e,t):Yie(e,t);break}case j.PLAINTEXT:{HXe(e,t);break}case j.COL:case j.TH:case j.TD:case j.TR:case j.HEAD:case j.FRAME:case j.TBODY:case j.TFOOT:case j.THEAD:case j.CAPTION:case j.COLGROUP:break;default:Yie(e,t)}}function cQe(e,t){if(e.openElements.hasInScope(j.BODY)&&(e.insertionMode=Se.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function fQe(e,t){e.openElements.hasInScope(j.BODY)&&(e.insertionMode=Se.AFTER_BODY,Ibe(e,t))}function dQe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function hQe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(j.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(j.FORM):n&&e.openElements.remove(n))}function pQe(e){e.openElements.hasInButtonScope(j.P)||e._insertFakeElement(We.P,j.P),e._closePElement()}function mQe(e){e.openElements.hasInListItemScope(j.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(j.LI),e.openElements.popUntilTagNamePopped(j.LI))}function gQe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function yQe(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function vQe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function bQe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(We.BR,j.BR),e.openElements.pop(),e.framesetOk=!1}function wbe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const o=e.openElements.items[i],s=e.openElements.tagIDs[i];if(r===s&&(r!==j.UNKNOWN||e.treeAdapter.getTagName(o)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(o,s))break}}function L5(e,t){switch(t.tagID){case j.A:case j.B:case j.I:case j.S:case j.U:case j.EM:case j.TT:case j.BIG:case j.CODE:case j.FONT:case j.NOBR:case j.SMALL:case j.STRIKE:case j.STRONG:{dY(e,t);break}case j.P:{pQe(e);break}case j.DL:case j.UL:case j.OL:case j.DIR:case j.DIV:case j.NAV:case j.PRE:case j.MAIN:case j.MENU:case j.ASIDE:case j.BUTTON:case j.CENTER:case j.FIGURE:case j.FOOTER:case j.HEADER:case j.HGROUP:case j.DIALOG:case j.ADDRESS:case j.ARTICLE:case j.DETAILS:case j.SECTION:case j.SUMMARY:case j.LISTING:case j.FIELDSET:case j.BLOCKQUOTE:case j.FIGCAPTION:{dQe(e,t);break}case j.LI:{mQe(e);break}case j.DD:case j.DT:{gQe(e,t);break}case j.H1:case j.H2:case j.H3:case j.H4:case j.H5:case j.H6:{yQe(e);break}case j.BR:{bQe(e);break}case j.BODY:{cQe(e,t);break}case j.HTML:{fQe(e,t);break}case j.FORM:{hQe(e);break}case j.APPLET:case j.OBJECT:case j.MARQUEE:{vQe(e,t);break}case j.TEMPLATE:{iw(e,t);break}default:wbe(e,t)}}function _be(e,t){e.tmplInsertionModeStack.length>0?kbe(e,t):hY(e,t)}function xQe(e,t){var n;t.tagID===j.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function wQe(e,t){e._err(t,it.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function CB(e,t){if(gbe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Se.IN_TABLE_TEXT,t.type){case dr.CHARACTER:{Tbe(e,t);break}case dr.WHITESPACE_CHARACTER:{Ebe(e,t);break}}else NI(e,t)}function _Qe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_CAPTION}function EQe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_COLUMN_GROUP}function TQe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(We.COLGROUP,j.COLGROUP),e.insertionMode=Se.IN_COLUMN_GROUP,pY(e,t)}function CQe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_TABLE_BODY}function SQe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(We.TBODY,j.TBODY),e.insertionMode=Se.IN_TABLE_BODY,B5(e,t)}function AQe(e,t){e.openElements.hasInTableScope(j.TABLE)&&(e.openElements.popUntilTagNamePopped(j.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function DQe(e,t){xbe(t)?e._appendElement(t,mt.HTML):NI(e,t),t.ackSelfClosing=!0}function kQe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,mt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function A2(e,t){switch(t.tagID){case j.TD:case j.TH:case j.TR:{SQe(e,t);break}case j.STYLE:case j.SCRIPT:case j.TEMPLATE:{Bh(e,t);break}case j.COL:{TQe(e,t);break}case j.FORM:{kQe(e,t);break}case j.TABLE:{AQe(e,t);break}case j.TBODY:case j.TFOOT:case j.THEAD:{CQe(e,t);break}case j.INPUT:{DQe(e,t);break}case j.CAPTION:{_Qe(e,t);break}case j.COLGROUP:{EQe(e,t);break}default:NI(e,t)}}function fk(e,t){switch(t.tagID){case j.TABLE:{e.openElements.hasInTableScope(j.TABLE)&&(e.openElements.popUntilTagNamePopped(j.TABLE),e._resetInsertionMode());break}case j.TEMPLATE:{iw(e,t);break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TBODY:case j.TD:case j.TFOOT:case j.TH:case j.THEAD:case j.TR:break;default:NI(e,t)}}function NI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,$5(e,t),e.fosterParentingEnabled=n}function Ebe(e,t){e.pendingCharacterTokens.push(t)}function Tbe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function WS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)NI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Cbe=new Set([j.CAPTION,j.COL,j.COLGROUP,j.TBODY,j.TD,j.TFOOT,j.TH,j.THEAD,j.TR]);function IQe(e,t){const n=t.tagID;Cbe.has(n)?e.openElements.hasInTableScope(j.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,A2(e,t)):Wu(e,t)}function RQe(e,t){const n=t.tagID;switch(n){case j.CAPTION:case j.TABLE:{e.openElements.hasInTableScope(j.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_TABLE,n===j.TABLE&&fk(e,t));break}case j.BODY:case j.COL:case j.COLGROUP:case j.HTML:case j.TBODY:case j.TD:case j.TFOOT:case j.TH:case j.THEAD:case j.TR:break;default:L5(e,t)}}function pY(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.COL:{e._appendElement(t,mt.HTML),t.ackSelfClosing=!0;break}case j.TEMPLATE:{Bh(e,t);break}default:g6(e,t)}}function NQe(e,t){switch(t.tagID){case j.COLGROUP:{e.openElements.currentTagId===j.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case j.TEMPLATE:{iw(e,t);break}case j.COL:break;default:g6(e,t)}}function g6(e,t){e.openElements.currentTagId===j.COLGROUP&&(e.openElements.pop(),e.insertionMode=Se.IN_TABLE,e._processToken(t))}function B5(e,t){switch(t.tagID){case j.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_ROW;break}case j.TH:case j.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(We.TR,j.TR),e.insertionMode=Se.IN_ROW,j5(e,t);break}case j.CAPTION:case j.COL:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,A2(e,t));break}default:A2(e,t)}}function aU(e,t){const n=t.tagID;switch(t.tagID){case j.TBODY:case j.TFOOT:case j.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE);break}case j.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE,fk(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TD:case j.TH:case j.TR:break;default:fk(e,t)}}function j5(e,t){switch(t.tagID){case j.TH:case j.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,mt.HTML),e.insertionMode=Se.IN_CELL,e.activeFormattingElements.insertMarker();break}case j.CAPTION:case j.COL:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:case j.TR:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,B5(e,t));break}default:A2(e,t)}}function Sbe(e,t){switch(t.tagID){case j.TR:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY);break}case j.TABLE:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,aU(e,t));break}case j.TBODY:case j.TFOOT:case j.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(j.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Se.IN_TABLE_BODY,aU(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TD:case j.TH:break;default:fk(e,t)}}function PQe(e,t){const n=t.tagID;Cbe.has(n)?(e.openElements.hasInTableScope(j.TD)||e.openElements.hasInTableScope(j.TH))&&(e._closeTableCell(),j5(e,t)):Wu(e,t)}function OQe(e,t){const n=t.tagID;switch(n){case j.TD:case j.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Se.IN_ROW);break}case j.TABLE:case j.TBODY:case j.TFOOT:case j.THEAD:case j.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Sbe(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:break;default:L5(e,t)}}function Abe(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.OPTION:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e._insertElement(t,mt.HTML);break}case j.OPTGROUP:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e.openElements.currentTagId===j.OPTGROUP&&e.openElements.pop(),e._insertElement(t,mt.HTML);break}case j.INPUT:case j.KEYGEN:case j.TEXTAREA:case j.SELECT:{e.openElements.hasInSelectScope(j.SELECT)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),t.tagID!==j.SELECT&&e._processStartTag(t));break}case j.SCRIPT:case j.TEMPLATE:{Bh(e,t);break}}}function Dbe(e,t){switch(t.tagID){case j.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===j.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===j.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===j.OPTGROUP&&e.openElements.pop();break}case j.OPTION:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop();break}case j.SELECT:{e.openElements.hasInSelectScope(j.SELECT)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode());break}case j.TEMPLATE:{iw(e,t);break}}}function FQe(e,t){const n=t.tagID;n===j.CAPTION||n===j.TABLE||n===j.TBODY||n===j.TFOOT||n===j.THEAD||n===j.TR||n===j.TD||n===j.TH?(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Abe(e,t)}function MQe(e,t){const n=t.tagID;n===j.CAPTION||n===j.TABLE||n===j.TBODY||n===j.TFOOT||n===j.THEAD||n===j.TR||n===j.TD||n===j.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Dbe(e,t)}function $Qe(e,t){switch(t.tagID){case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:case j.NOFRAMES:case j.SCRIPT:case j.STYLE:case j.TEMPLATE:case j.TITLE:{Bh(e,t);break}case j.CAPTION:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:{e.tmplInsertionModeStack[0]=Se.IN_TABLE,e.insertionMode=Se.IN_TABLE,A2(e,t);break}case j.COL:{e.tmplInsertionModeStack[0]=Se.IN_COLUMN_GROUP,e.insertionMode=Se.IN_COLUMN_GROUP,pY(e,t);break}case j.TR:{e.tmplInsertionModeStack[0]=Se.IN_TABLE_BODY,e.insertionMode=Se.IN_TABLE_BODY,B5(e,t);break}case j.TD:case j.TH:{e.tmplInsertionModeStack[0]=Se.IN_ROW,e.insertionMode=Se.IN_ROW,j5(e,t);break}default:e.tmplInsertionModeStack[0]=Se.IN_BODY,e.insertionMode=Se.IN_BODY,Wu(e,t)}}function LQe(e,t){t.tagID===j.TEMPLATE&&iw(e,t)}function kbe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(j.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):hY(e,t)}function BQe(e,t){t.tagID===j.HTML?Wu(e,t):y6(e,t)}function Ibe(e,t){var n;if(t.tagID===j.HTML){if(e.fragmentContext||(e.insertionMode=Se.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===j.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else y6(e,t)}function y6(e,t){e.insertionMode=Se.IN_BODY,$5(e,t)}function jQe(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.FRAMESET:{e._insertElement(t,mt.HTML);break}case j.FRAME:{e._appendElement(t,mt.HTML),t.ackSelfClosing=!0;break}case j.NOFRAMES:{Bh(e,t);break}}}function zQe(e,t){t.tagID===j.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==j.FRAMESET&&(e.insertionMode=Se.AFTER_FRAMESET))}function UQe(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.NOFRAMES:{Bh(e,t);break}}}function VQe(e,t){t.tagID===j.HTML&&(e.insertionMode=Se.AFTER_AFTER_FRAMESET)}function HQe(e,t){t.tagID===j.HTML?Wu(e,t):w4(e,t)}function w4(e,t){e.insertionMode=Se.IN_BODY,$5(e,t)}function qQe(e,t){switch(t.tagID){case j.HTML:{Wu(e,t);break}case j.NOFRAMES:{Bh(e,t);break}}}function WQe(e,t){t.chars=ao,e._insertCharacters(t)}function GQe(e,t){e._insertCharacters(t),e.framesetOk=!1}function Rbe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==mt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function YQe(e,t){if(lXe(t))Rbe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===mt.MATHML?pbe(t):r===mt.SVG&&(cXe(t),mbe(t)),fY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function KQe(e,t){if(t.tagID===j.P||t.tagID===j.BR){Rbe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===mt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}We.AREA,We.BASE,We.BASEFONT,We.BGSOUND,We.BR,We.COL,We.EMBED,We.FRAME,We.HR,We.IMG,We.INPUT,We.KEYGEN,We.LINK,We.META,We.PARAM,We.SOURCE,We.TRACK,We.WBR;const XQe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Kie={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Nbe(e,t){const n=sJe(e),r=Jve("type",{handlers:{root:QQe,element:JQe,text:ZQe,comment:Obe,doctype:eJe,raw:nJe},unknown:rJe}),i={parser:n?new Wie(Kie):Wie.getFragmentParser(void 0,Kie),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),YT(i,Tm());const o=n?i.parser.document:i.parser.getFragment(),s=lKe(o,{file:i.options.file});return i.stitches&&aY(s,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),s.type==="root"&&s.children.length===1&&s.children[0].type===e.type?s.children[0]:s}function Pbe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function QQe(e,t){Pbe(e.children,t)}function JQe(e,t){iJe(e,t),Pbe(e.children,t),oJe(e,t)}function ZQe(e,t){const n={type:dr.CHARACTER,chars:e.value,location:PI(e)};YT(t,Tm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function eJe(e,t){const n={type:dr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:PI(e)};YT(t,Tm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function tJe(e,t){t.stitches=!0;const n=aJe(e);if("children"in e&&"children"in n){const r=Nbe({type:"root",children:e.children},t.options);n.children=r.children}Obe({type:"comment",value:{stitch:n}},t)}function Obe(e,t){const n=e.value,r={type:dr.COMMENT,data:n,location:PI(e)};YT(t,Tm(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function nJe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Fbe(t,Tm(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function rJe(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))tJe(n,t);else{let r="";throw XQe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function YT(e,t){Fbe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=us.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Fbe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function iJe(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===us.PLAINTEXT)return;YT(t,Tm(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Yb.html;i===Yb.html&&n==="svg"&&(i=Yb.svg);const o=hKe({...e,children:[]},{space:i===Yb.svg?"svg":"html"}),s={type:dr.START_TAG,tagName:n,tagID:GT(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:PI(e)};t.parser.currentToken=s,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function oJe(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&wKe.includes(n)||t.parser.tokenizer.state===us.PLAINTEXT)return;YT(t,P5(e));const r={type:dr.END_TAG,tagName:n,tagID:GT(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:PI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===us.RCDATA||t.parser.tokenizer.state===us.RAWTEXT||t.parser.tokenizer.state===us.SCRIPT_DATA)&&(t.parser.tokenizer.state=us.DATA)}function sJe(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function PI(e){const t=Tm(e)||{line:void 0,column:void 0,offset:void 0},n=P5(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function aJe(e){return"children"in e?S2({...e,children:[]}):S2(e)}function uJe(e){return function(t,n){return Nbe(t,{...e,file:n})}}function ju({text:e,required:t}){const n={img({node:i,width:o,height:s,...a}){return A.jsx(rv,{...a,h:s,w:o,ref:void 0})},p({node:i,...o}){return A.jsx(ct,{...o,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...o}){return A.jsx(zo,{...o,order:1,...o,pb:12})},h2({node:i,...o}){return A.jsx(zo,{...o,order:2,...o,pb:12})},h3({node:i,...o}){return A.jsx(zo,{...o,order:3,...o,pb:12})},h4({node:i,...o}){return A.jsx(zo,{...o,order:4,...o,pb:12})},h5({node:i,...o}){return A.jsx(zo,{...o,order:5,...o,pb:12})},h6({node:i,...o}){return A.jsx(zo,{...o,order:6,...o,pb:12})},a({node:i,...o}){return A.jsx(NT,{...o,ref:void 0})},ul({node:i,...o}){return A.jsx(vh,{withPadding:!0,...o,pb:8})},ol({node:i,type:o,...s}){return A.jsx(vh,{type:"ordered",withPadding:!0,...s,pb:8})}};return A.jsx(XYe,{components:n,rehypePlugins:[uJe],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function _4({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return A.jsx(ju,{text:n})}const Z_=14;function lJe({completed:e,inProgress:t,rejected:n}){return A.jsxs(un,{ml:4,gap:4,children:[A.jsx(Ji,{label:"Completed",children:A.jsx(yh,{variant:"light",color:"green",leftSection:A.jsx(R5,{width:Z_,height:Z_,style:{paddingTop:1}}),pb:1,children:e})}),A.jsx(Ji,{label:"In Progress",children:A.jsx(yh,{variant:"light",color:"orange",leftSection:A.jsx(uve,{width:Z_,height:Z_,style:{paddingTop:1}}),pb:1,children:t})}),A.jsx(Ji,{label:"Rejected",children:A.jsx(yh,{variant:"light",color:"red",leftSection:A.jsx(DI,{width:Z_,height:Z_,style:{paddingTop:1}}),pb:1,children:n})})]})}const cJe={},fJe=Object.freeze(Object.defineProperty({__proto__:null,default:cJe},Symbol.toStringTag,{value:"Module"})),mY=YFe(fJe);var SB,Xie;function z5(){if(Xie)return SB;Xie=1;var e=mY;function t(s,a){var u,l="",c=0,f=!0,d=0,h;function m(){return h=s.charAt(d),d++,h}for(m(),h==="-"&&(l="-",m());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,m();if(f&&c--,h===".")for(l+=".";m()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,m(),(h==="-"||h==="+")&&(l+=h,m());h>="0"&&h<="9";)l+=h,m();for(;h&&h<=" ";)m();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(s[d]==="/"||s[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(s,a){return Object.defineProperty&&Object.defineProperty(s,"__COMMENTS__",{enumerable:!1,writable:!0}),s.__COMMENTS__=a||{}}function r(s){Object.defineProperty(s,"__COMMENTS__",{value:void 0})}function i(s){return s.__COMMENTS__}function o(s){if(!s)return"";var a=s.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return SB={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:o},SB}var AB,Qie;function dJe(){return Qie||(Qie=1,AB="3.2.1"),AB}var DB,Jie;function gY(){if(Jie)return DB;Jie=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function o(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}o.description="parse hexadecimal numbers prefixed with 0x";function s(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return s.description="support ISO dates",DB={loadDsf:e,std:{math:i,hex:o,date:s}},DB}var kB,Zie;function hJe(){return Zie||(Zie=1,kB=function(e,t){var n=z5(),r=gY(),i,o,s,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){o=0,s=" "}function f(z){return z==="{"||z==="}"||z==="["||z==="]"||z===","||z===":"}function d(z){var G,W=0,te=1;for(G=o-1;G>0&&i[G]!==`
`;G--,W++);for(;G>0;G--)i[G]===`
`&&te++;throw new Error(z+" at line "+te+","+W+" >>>"+i.substr(o-W,20)+" ...")}function h(){return s=i.charAt(o),o++,s}function m(z){return i.charAt(o+z)}function p(z){for(var G="",W=s;h();){if(s===W)return h(),z&&W==="'"&&s==="'"&&G.length===0?(h(),g()):G;if(s==="\\")if(h(),s==="u"){for(var te=0,Z=0;Z<4;Z++){h();var re=s.charCodeAt(0),q;s>="0"&&s<="9"?q=re-48:s>="a"&&s<="f"?q=re-97+10:s>="A"&&s<="F"?q=re-65+10:d("Bad \\u char "+s),te=te*16+q}G+=String.fromCharCode(te)}else if(typeof a[s]=="string")G+=a[s];else break;else s===`
`||s==="\r"?d("Bad string containing newline"):G+=s}d("Bad string")}function g(){for(var z="",G=0,W=0;;){var te=m(-W-5);if(!te||te===`
`)break;W++}function Z(){for(var re=W;s&&s<=" "&&s!==`
`&&re-- >0;)h()}for(;s&&s<=" "&&s!==`
`;)h();for(s===`
`&&(h(),Z());;){if(!s)d("Bad multiline string");else if(s==="'"){if(G++,h(),G===3)return z.slice(-1)===`
`&&(z=z.slice(0,-1)),z;continue}else for(;G>0;)z+="'",G--;s===`
`?(z+=`
`,h(),Z()):(s!=="\r"&&(z+=s),h())}}function v(){if(s==='"'||s==="'")return p(!1);for(var z="",G=o,W=-1;;){if(s===":")return z?W>=0&&W!==z.length&&(o=G+W,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),z;s<=" "?s?W<0&&(W=z.length):d("Found EOF while looking for a key name (check your syntax)"):f(s)?d("Found '"+s+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):z+=s,h()}}function b(){for(;s;){for(;s&&s<=" ";)h();if(s==="#"||s==="/"&&m(0)==="/")for(;s&&s!==`
`;)h();else if(s==="/"&&m(0)==="*"){for(h(),h();s&&!(s==="*"&&m(0)==="/");)h();s&&(h(),h())}else break}}function w(){var z=s;for(f(s)&&d("Found a punctuator character '"+s+"' when expecting a quoteless string (check your syntax)");;){h();var G=s==="\r"||s===`
`||s==="";if(G||s===","||s==="}"||s==="]"||s==="#"||s==="/"&&(m(0)==="/"||m(0)==="*")){var W=z[0];switch(W){case"f":if(z.trim()==="false")return!1;break;case"n":if(z.trim()==="null")return null;break;case"t":if(z.trim()==="true")return!0;break;default:if(W==="-"||W>="0"&&W<="9"){var te=n.tryParseNumber(z);if(te!==void 0)return te}}if(G){z=z.trim();var Z=l(z);return Z!==void 0?Z:z}}z+=s}}function E(z,G){var W;for(z--,W=o-2;W>z&&i[W]<=" "&&i[W]!==`
`;W--);i[W]===`
`&&W--,i[W]==="\r"&&W--;var te=i.substr(z,W-z+1);for(W=0;W<te.length;W++)if(te[W]>" "){var Z=te.indexOf(`
`);if(Z>=0){var re=[te.substr(0,Z),te.substr(Z+1)];return G&&re[0].trim().length===0&&re.shift(),re}else return[te]}return[]}function T(z){function G(te,Z){var re,q,U,Y;switch(typeof te){case"string":te.indexOf(Z)>=0&&(Y=te);break;case"object":if(Object.prototype.toString.apply(te)==="[object Array]")for(re=0,U=te.length;re<U;re++)Y=G(te[re],Z)||Y;else for(q in te)Object.prototype.hasOwnProperty.call(te,q)&&(Y=G(te[q],Z)||Y)}return Y}function W(te){var Z=G(z,te);return Z?"found '"+te+`' in a string value, your mistake could be with:
  > `+Z+`
  (unquoted strings contain everything up to the next line!)`:""}return W("}")||W("]")}function C(){var z=[],G,W,te;try{if(u&&(G=n.createComment(z,{a:[]})),h(),W=o,b(),G&&(te=E(W,!0).join(`
`)),s==="]")return h(),G&&(G.e=[te]),z;for(;s;){if(z.push(I()),W=o,b(),s===","&&(h(),W=o,b()),G){var Z=E(W);G.a.push([te||"",Z[0]||""]),te=Z[1]}if(s==="]")return h(),G&&(G.a[G.a.length-1][1]+=te||""),z;b()}d("End of input while parsing an array (missing ']')")}catch(re){throw re.hint=re.hint||T(z),re}}function S(z){var G="",W={},te,Z,re;try{if(u&&(te=n.createComment(W,{c:{},o:[]})),z?Z=1:(h(),Z=o),b(),te&&(re=E(Z,!0).join(`
`)),s==="}"&&!z)return te&&(te.e=[re]),h(),W;for(;s;){if(G=v(),b(),s!==":"&&d("Expected ':' instead of '"+s+"'"),h(),W[G]=I(),Z=o,b(),s===","&&(h(),Z=o,b()),te){var q=E(Z);te.c[G]=[re||"",q[0]||""],re=q[1],te.o.push(G)}if(s==="}"&&!z)return h(),te&&(te.c[G][1]+=re||""),W;b()}if(z)return W;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||T(W),U}}function I(){switch(b(),s){case"{":return S();case"[":return C();case"'":case'"':return p(!0);default:return w()}}function R(z,G){var W=o;if(b(),s&&d("Syntax error, found trailing characters"),u){var te=G.join(`
`),Z=E(W).join(`
`);if(Z||te){var re=n.createComment(z,n.getComment(z));re.r=[te,Z]}}return z}function P(){b();var z=u?E(1):null;switch(s){case"{":return R(S(),z);case"[":return R(C(),z);default:return R(I(),z)}}function M(){b();var z=u?E(1):null;switch(s){case"{":return R(S(),z);case"[":return R(C(),z)}try{return R(S(!0),z)}catch(G){c();try{return R(I(),z)}catch{throw G}}}if(typeof e!="string")throw new Error("source is not a string");var B=null,L=!0;return t&&typeof t=="object"&&(u=t.keepWsc,B=t.dsf,L=t.legacyRoot!==!1),l=r.loadDsf(B,"parse"),i=e,c(),L?M():P()}),kB}var IB,eoe;function pJe(){return eoe||(eoe=1,IB=function(e,t){var n=z5(),r=gY(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},o=n.EOL,s="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",m=null,p=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(o=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",m=t.dsf,p=t.sortProps,typeof t.space=="number"?s=new Array(t.space+1).join(" "):typeof t.space=="string"&&(s=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var v,b=Object.keys(i);for(v=b.length-1;v>=0;v--){var w=b[v];g[w].push(i[w][0].length,i[w][1].length)}}var E,T="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+T+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+T+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+T+"]","g"),R=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),P={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},M=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,B="",L=0;function z(Y,H){return L+=Y[0].length+Y[1].length-Y[2]-Y[3],Y[0]+H+Y[1]}function G(Y){return Y.replace(C,function(H){var X=P[H];return typeof X=="string"?z(g.esc,X):z(g.uni,("0000"+H.charCodeAt(0).toString(16)).slice(-4))})}function W(Y,H,X,ee){return Y?(S.lastIndex=0,R.lastIndex=0,c||X||S.test(Y)||n.tryParseNumber(Y,!0)!==void 0||R.test(Y)?(C.lastIndex=0,I.lastIndex=0,C.test(Y)?!I.test(Y)&&!ee&&d?te(Y,H):z(g.qstr,G(Y)):z(g.qstr,Y)):z(g.str,Y)):z(g.qstr,"")}function te(Y,H){var X,ee=Y.replace(/\r/g,"").split(`
`);if(H+=s,ee.length===1)return z(g.mstr,ee[0]);var le=o+H+g.mstr[0];for(X=0;X<ee.length;X++)le+=o,ee[X]&&(le+=H+ee[X]);return le+o+H+g.mstr[1]}function Z(Y){return Y?l||M.test(Y)?(C.lastIndex=0,z(g.qkey,C.test(Y)?G(Y):Y)):z(g.key,Y):'""'}function re(Y,H,X,ee){function le(rn){return rn&&rn[rn[0]==="\r"?1:0]===`
`}function Ee(rn){return rn&&!le(rn)}function be(rn,bn,Hn){if(!rn)return"";rn=n.forceComment(rn);var $n,Kr=rn.length;for($n=0;$n<Kr&&rn[$n]<=" ";$n++);return Hn&&$n>0&&(rn=rn.substr($n)),$n<Kr?bn+z(g.rem,rn):rn}var Ce=E(Y);if(Ce!==void 0)return z(g.dsf,Ce);switch(typeof Y){case"string":return W(Y,B,H,ee);case"number":return isFinite(Y)?z(g.num,String(Y)):z(g.lit,"null");case"boolean":return z(g.lit,String(Y));case"object":if(!Y)return z(g.lit,"null");var Oe;a&&(Oe=n.getComment(Y));var me=Object.prototype.toString.apply(Y)==="[object Array]",he=B;B+=s;var Fe=o+he,Pe=o+B,Je=X||u?"":Fe,ut=[],Ke,tt=f?[]:null,pt=c,Dt=d,St=h?"":g.com[0],$t=0,oe,xe,Re,pe,we,ke,Ge,Ve,at;if(me){for(oe=0,xe=Y.length;oe<xe;oe++){if(Ke=oe<xe-1,Oe?(ke=Oe.a[oe]||[],Ge=Ee(ke[1]),ut.push(be(ke[0],`
`)+Pe),tt&&(ke[0]||ke[1]||Ge)&&(tt=null)):ut.push(Pe),L=0,pe=Y[oe],ut.push(re(pe,Oe?Ge:!1,!0)+(Ke?h:"")),tt){switch(typeof pe){case"string":L=0,c=!0,d=0,tt.push(re(pe,!1,!0)+(Ke?g.com[0]:"")),c=pt,d=Dt;break;case"object":if(pe){tt=null;break}default:tt.push(ut[ut.length-1]+(Ke?St:""));break}Ke&&(L+=g.com[0].length-g.com[2]),$t+=L}Oe&&ke[1]&&ut.push(be(ke[1],Ge?" ":`
`,Ge))}xe===0?Oe&&Oe.e&&ut.push(be(Oe.e[0],`
`)+Fe):ut.push(Fe),ut.length===0?Ve=z(g.arr,""):(Ve=Je+z(g.arr,ut.join("")),tt&&(at=tt.join(" "),at.length-$t<=f&&(Ve=z(g.arr,at))))}else{var rt=Oe?Oe.o.slice():[],ln=[];for(Re in Y)Object.prototype.hasOwnProperty.call(Y,Re)&&rt.indexOf(Re)<0&&ln.push(Re);p&&ln.sort();var xn=rt.concat(ln);for(oe=0,xe=xn.length;oe<xe;oe++)if(Ke=oe<xe-1,Re=xn[oe],Oe?(ke=Oe.c[Re]||[],Ge=Ee(ke[1]),ut.push(be(ke[0],`
`)+Pe),tt&&(ke[0]||ke[1]||Ge)&&(tt=null)):ut.push(Pe),L=0,pe=Y[Re],we=re(pe,Oe&&Ge),ut.push(Z(Re)+g.col[0]+(le(we)?"":" ")+we+(Ke?h:"")),Oe&&ke[1]&&ut.push(be(ke[1],Ge?" ":`
`,Ge)),tt){switch(typeof pe){case"string":L=0,c=!0,d=0,we=re(pe,!1),c=pt,d=Dt,tt.push(Z(Re)+g.col[0]+" "+we+(Ke?g.com[0]:""));break;case"object":if(pe){tt=null;break}default:tt.push(ut[ut.length-1]+(Ke?St:""));break}L+=g.col[0].length-g.col[2],Ke&&(L+=g.com[0].length-g.com[2]),$t+=L}xe===0?Oe&&Oe.e&&ut.push(be(Oe.e[0],`
`)+Fe):ut.push(Fe),ut.length===0?Ve=z(g.obj,""):(Ve=Je+z(g.obj,ut.join("")),tt&&(at=tt.join(" "),at.length-$t<=f&&(Ve=z(g.obj,at))))}return B=he,Ve}}E=r.loadDsf(m,"stringify");var q="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(q=U[0]+`
`),q+=re(e,null,!0,!0),U&&(q+=U[1]||""),q}),IB}var RB,toe;function mJe(){if(toe)return RB;toe=1;var e=z5();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,m,p,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,m=c.length;h<m;h++)o(g.a,h,d.a[h],n(c[h]))&&(p=!0);!p&&d.e&&(g.e=t(d.e[0],d.e[1]),p=!0)}else{g={s:{}};var v,b=Object.keys(c);for(d&&d.o?(v=[],d.o.concat(b).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&v.indexOf(E)<0&&v.push(E)})):v=b,g.o=v,h=0,m=v.length;h<m;h++){var w=v[h];o(g.s,w,d.c[w],n(c[w]))&&(p=!0)}!p&&d.e&&(g.e=t(d.e[0],d.e[1]),p=!0)}return f&&d&&d.r&&(g.r=t(d.r[0],d.r[1])),p?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(m){h+=("# "+m.path.join("/")+": "+r(m.b,m.a,m.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function o(c,f,d,h){var m=t(d?d[0]:void 0,d?d[1]:void 0,h);return m&&(c[f]=m),m}function s(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,m;if(c.a)for(h=0,m=c.a.length;h<m;h++){var p=d.slice().concat([h]),g=c.a[h];g&&(f.push(s(p,g)),a(g.x,f,p))}else c.o&&c.o.forEach(function(v){var b=d.slice().concat([v]),w=c.s[v];w&&(f.push(s(b,w)),a(w.x,f,b))});c.e&&f.push(s(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var m,p=e.createComment(f);if(h.length===0&&c.r&&(p.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){p.a=[];var g=c.a||{};for(var v in g)if(g.hasOwnProperty(v)){m=parseInt(v);var b=c.a[v];if(b){var w=h.slice().concat([m]);m<f.length?(p.a[m]=[b.b,b.a],u(b.x,f[m],d,w)):(d.push(s(w,b)),a(b.x,d,w))}}m===0&&c.e&&(p.e=[c.e.b,c.e.a])}else p.c={},p.o=[],(c.o||[]).forEach(function(E){var T=h.slice().concat([E]),C=c.s[E];Object.prototype.hasOwnProperty.call(f,E)?(p.o.push(E),C&&(p.c[E]=[C.b,C.a],u(C.x,f[E],d,T))):C&&(d.push(s(T,C)),a(C.x,d,T))}),c.e&&(p.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return RB={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},RB}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var NB,noe;function gJe(){if(noe)return NB;noe=1;var e=z5(),t=dJe(),n=hJe(),r=pJe(),i=mJe(),o=gY();return NB={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(s){(s===`
`||s===`\r
`)&&(e.EOL=s)},version:t,rt:{parse:function(s,a){return(a=a||{}).keepWsc=!0,n(s,a)},stringify:function(s,a){return(a=a||{}).keepWsc=!0,r(s,a)}},comments:i,dsf:o.std},NB}var yJe=gJe(),roe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mbe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},vJe=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],s=e[n++],a=e[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},yY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=o>>2,f=(o&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,s||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Mbe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):vJe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new bJe;const d=o<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const m=l<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class bJe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xJe=function(e){const t=Mbe(e);return yY.encodeByteArray(t,!0)},v6=function(e){return xJe(e).replace(/\./g,"")},$be=function(e){try{return yY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lbe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJe=()=>Lbe().__FIREBASE_DEFAULTS__,_Je=()=>{if(typeof process>"u"||typeof roe>"u")return;const e=roe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},EJe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&$be(e[1]);return t&&JSON.parse(t)},U5=()=>{try{return wJe()||_Je()||EJe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Bbe=e=>{var t,n;return(n=(t=U5())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},TJe=e=>{const t=Bbe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},jbe=()=>{var e;return(e=U5())===null||e===void 0?void 0:e.config},zbe=e=>{var t;return(t=U5())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CJe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[v6(JSON.stringify(n)),v6(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SJe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zu())}function AJe(){var e;const t=(e=U5())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DJe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kJe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function IJe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RJe(){const e=zu();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function NJe(){return!AJe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vY(){try{return typeof indexedDB=="object"}catch{return!1}}function PJe(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJe="FirebaseError";class Cm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=OJe,Object.setPrototypeOf(this,Cm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,KT.prototype.create)}}class KT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?FJe(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Cm(i,a,r)}}function FJe(e,t){return e.replace(MJe,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const MJe=/\{\$([^}]+)}/g;function $Je(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function hk(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(ioe(o)&&ioe(s)){if(!hk(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ioe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function LJe(e,t){const n=new BJe(e,t);return n.subscribe.bind(n)}class BJe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jJe(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=PB),i.error===void 0&&(i.error=PB),i.complete===void 0&&(i.complete=PB);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jJe(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function PB(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJe=1e3,UJe=2,VJe=4*60*60*1e3,HJe=.5;function qJe(e,t=zJe,n=UJe){const r=t*Math.pow(n,e),i=Math.round(HJe*r*(Math.random()-.5)*2);return Math.min(VJe,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(e){return e&&e._delegate?e._delegate:e}class sm{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WJe=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new dk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(YJe(t))try{this.getOrInitializeService({instanceIdentifier:Ib})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Ib){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ib){return this.instances.has(t)}getOptions(t=Ib){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GJe(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ib){return this.component?this.component.multipleInstances?t:Ib:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GJe(e){return e===Ib?void 0:e}function YJe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new WJe(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Cr||(Cr={}));const XJe={debug:Cr.DEBUG,verbose:Cr.VERBOSE,info:Cr.INFO,warn:Cr.WARN,error:Cr.ERROR,silent:Cr.SILENT},QJe=Cr.INFO,JJe={[Cr.DEBUG]:"log",[Cr.VERBOSE]:"log",[Cr.INFO]:"info",[Cr.WARN]:"warn",[Cr.ERROR]:"error"},ZJe=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=JJe[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class V5{constructor(t){this.name=t,this._logLevel=QJe,this._logHandler=ZJe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Cr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?XJe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Cr.DEBUG,...t),this._logHandler(this,Cr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Cr.VERBOSE,...t),this._logHandler(this,Cr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Cr.INFO,...t),this._logHandler(this,Cr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Cr.WARN,...t),this._logHandler(this,Cr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Cr.ERROR,...t),this._logHandler(this,Cr.ERROR,...t)}}const eZe=(e,t)=>t.some(n=>e instanceof n);let ooe,soe;function tZe(){return ooe||(ooe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nZe(){return soe||(soe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ube=new WeakMap,uU=new WeakMap,Vbe=new WeakMap,OB=new WeakMap,bY=new WeakMap;function rZe(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(s1(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&Ube.set(n,e)}).catch(()=>{}),bY.set(t,e),t}function iZe(e){if(uU.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});uU.set(e,t)}let lU={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return uU.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Vbe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return s1(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function oZe(e){lU=e(lU)}function sZe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(FB(this),t,...n);return Vbe.set(r,t.sort?t.sort():[t]),s1(r)}:nZe().includes(e)?function(...t){return e.apply(FB(this),t),s1(Ube.get(this))}:function(...t){return s1(e.apply(FB(this),t))}}function aZe(e){return typeof e=="function"?sZe(e):(e instanceof IDBTransaction&&iZe(e),eZe(e,tZe())?new Proxy(e,lU):e)}function s1(e){if(e instanceof IDBRequest)return rZe(e);if(OB.has(e))return OB.get(e);const t=aZe(e);return t!==e&&(OB.set(e,t),bY.set(t,e)),t}const FB=e=>bY.get(e);function uZe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=s1(s);return r&&s.addEventListener("upgradeneeded",u=>{r(s1(s.result),u.oldVersion,u.newVersion,s1(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const lZe=["get","getKey","getAll","getAllKeys","count"],cZe=["put","add","delete","clear"],MB=new Map;function aoe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(MB.get(t))return MB.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=cZe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lZe.includes(n)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return MB.set(t,o),o}oZe(e=>({...e,get:(t,n,r)=>aoe(t,n)||e.get(t,n,r),has:(t,n)=>!!aoe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZe{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dZe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dZe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const cU="@firebase/app",uoe="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new V5("@firebase/app"),hZe="@firebase/app-compat",pZe="@firebase/analytics-compat",mZe="@firebase/analytics",gZe="@firebase/app-check-compat",yZe="@firebase/app-check",vZe="@firebase/auth",bZe="@firebase/auth-compat",xZe="@firebase/database",wZe="@firebase/data-connect",_Ze="@firebase/database-compat",EZe="@firebase/functions",TZe="@firebase/functions-compat",CZe="@firebase/installations",SZe="@firebase/installations-compat",AZe="@firebase/messaging",DZe="@firebase/messaging-compat",kZe="@firebase/performance",IZe="@firebase/performance-compat",RZe="@firebase/remote-config",NZe="@firebase/remote-config-compat",PZe="@firebase/storage",OZe="@firebase/storage-compat",FZe="@firebase/firestore",MZe="@firebase/vertexai",$Ze="@firebase/firestore-compat",LZe="firebase",BZe="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="[DEFAULT]",jZe={[cU]:"fire-core",[hZe]:"fire-core-compat",[mZe]:"fire-analytics",[pZe]:"fire-analytics-compat",[yZe]:"fire-app-check",[gZe]:"fire-app-check-compat",[vZe]:"fire-auth",[bZe]:"fire-auth-compat",[xZe]:"fire-rtdb",[wZe]:"fire-data-connect",[_Ze]:"fire-rtdb-compat",[EZe]:"fire-fn",[TZe]:"fire-fn-compat",[CZe]:"fire-iid",[SZe]:"fire-iid-compat",[AZe]:"fire-fcm",[DZe]:"fire-fcm-compat",[kZe]:"fire-perf",[IZe]:"fire-perf-compat",[RZe]:"fire-rc",[NZe]:"fire-rc-compat",[PZe]:"fire-gcs",[OZe]:"fire-gcs-compat",[FZe]:"fire-fst",[$Ze]:"fire-fst-compat",[MZe]:"fire-vertex","fire-js":"fire-js",[LZe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=new Map,zZe=new Map,dU=new Map;function loe(e,t){try{e.container.addComponent(t)}catch(n){fg.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function dg(e){const t=e.name;if(dU.has(t))return fg.debug(`There were multiple attempts to register component ${t}.`),!1;dU.set(t,e);for(const n of b6.values())loe(n,e);for(const n of zZe.values())loe(n,e);return!0}function XT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Lp(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UZe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},a1=new KT("app","Firebase",UZe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZe{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new sm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw a1.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=BZe;function Hbe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:fU,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw a1.create("bad-app-name",{appName:String(i)});if(n||(n=jbe()),!n)throw a1.create("no-options");const o=b6.get(i);if(o){if(hk(n,o.options)&&hk(r,o.config))return o;throw a1.create("duplicate-app",{appName:i})}const s=new KJe(i);for(const u of dU.values())s.addComponent(u);const a=new VZe(n,r,s);return b6.set(i,a),a}function xY(e=fU){const t=b6.get(e);if(!t&&e===fU&&jbe())return Hbe();if(!t)throw a1.create("no-app",{appName:e});return t}function bh(e,t,n){var r;let i=(r=jZe[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fg.warn(a.join(" "));return}dg(new sm(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZe="firebase-heartbeat-database",qZe=1,pk="firebase-heartbeat-store";let $B=null;function qbe(){return $B||($B=uZe(HZe,qZe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(pk)}catch(n){console.warn(n)}}}}).catch(e=>{throw a1.create("idb-open",{originalErrorMessage:e.message})})),$B}async function WZe(e){try{const n=(await qbe()).transaction(pk),r=await n.objectStore(pk).get(Wbe(e));return await n.done,r}catch(t){if(t instanceof Cm)fg.warn(t.message);else{const n=a1.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});fg.warn(n.message)}}}async function coe(e,t){try{const r=(await qbe()).transaction(pk,"readwrite");await r.objectStore(pk).put(t,Wbe(e)),await r.done}catch(n){if(n instanceof Cm)fg.warn(n.message);else{const r=a1.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fg.warn(r.message)}}}function Wbe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GZe=1024,YZe=30*24*60*60*1e3;class KZe{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QZe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=foe();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=YZe}),this._storage.overwrite(this._heartbeatsCache))}catch(r){fg.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=foe(),{heartbeatsToSend:r,unsentEntries:i}=XZe(this._heartbeatsCache.heartbeats),o=v6(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return fg.warn(n),""}}}function foe(){return new Date().toISOString().substring(0,10)}function XZe(e,t=GZe){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),doe(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),doe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QZe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vY()?PJe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WZe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return coe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return coe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function doe(e){return v6(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JZe(e){dg(new sm("platform-logger",t=>new fZe(t),"PRIVATE")),dg(new sm("heartbeat",t=>new KZe(t),"PRIVATE")),bh(cU,uoe,e),bh(cU,uoe,"esm2017"),bh("fire-js","")}JZe("");var ZZe="firebase",eet="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bh(ZZe,eet,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gbe="firebasestorage.googleapis.com",Ybe="storageBucket",tet=2*60*1e3,net=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends Cm{constructor(t,n,r=0){super(LB(t),`Firebase Storage: ${n} (${LB(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yo.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return LB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wo;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wo||(Wo={}));function LB(e){return"storage/"+e}function wY(){const e="An unknown error occurred, please check the error payload for server response.";return new Yo(Wo.UNKNOWN,e)}function ret(e){return new Yo(Wo.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function iet(e){return new Yo(Wo.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oet(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Yo(Wo.UNAUTHENTICATED,e)}function set(){return new Yo(Wo.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function aet(e){return new Yo(Wo.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function uet(){return new Yo(Wo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cet(){return new Yo(Wo.CANCELED,"User canceled the upload/download.")}function fet(e){return new Yo(Wo.INVALID_URL,"Invalid URL '"+e+"'.")}function det(e){return new Yo(Wo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function het(){return new Yo(Wo.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ybe+"' property when initializing the app?")}function pet(){return new Yo(Wo.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function met(){return new Yo(Wo.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function get(e){return new Yo(Wo.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hU(e){return new Yo(Wo.INVALID_ARGUMENT,e)}function Kbe(){return new Yo(Wo.APP_DELETED,"The Firebase app was deleted.")}function yet(e){return new Yo(Wo.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ND(e,t){return new Yo(Wo.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function GS(e){throw new Yo(Wo.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=gl.makeFromUrl(t,n)}catch{return new gl(t,"")}if(r.path==="")return r;throw det(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),m={bucket:1,path:3},p=n===Gbe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${p}/${i}/${g}`,"i"),w=[{regex:a,indices:u,postModify:o},{regex:h,indices:m,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<w.length;E++){const T=w[E],C=T.regex.exec(t);if(C){const S=C[T.indices.bucket];let I=C[T.indices.path];I||(I=""),r=new gl(S,I),T.postModify(r);break}}if(r==null)throw fet(t);return r}}class vet{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bet(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){o&&clearTimeout(o)}function h(g,...v){if(l){d();return}if(g){d(),c.call(null,g,...v);return}if(u()||s){d(),c.call(null,g,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let m=!1;function p(g){m||(m=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,p(!0)},n),p}function xet(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wet(e){return e!==void 0}function _et(e){return typeof e=="object"&&!Array.isArray(e)}function _Y(e){return typeof e=="string"||e instanceof String}function hoe(e){return EY()&&e instanceof Blob}function EY(){return typeof Blob<"u"}function pU(e,t,n,r){if(r<t)throw hU(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw hU(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Xbe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ix;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(ix||(ix={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eet(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tet{constructor(t,n,r,i,o,s,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,m)=>{this.resolve_=h,this.reject_=m,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new f3(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===ix.NO_ERROR,u=o.getStatus();if(!a||Eet(u,this.additionalRetryCodes_)&&this.retry){const c=o.getErrorCode()===ix.ABORT;r(!1,new f3(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new f3(l,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());wet(u)?o(u):o()}catch(u){s(u)}else if(a!==null){const u=wY();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){const u=this.appDelete_?Kbe():cet();s(u)}else{const u=uet();s(u)}};this.canceled_?n(!1,new f3(!1,null,!0)):this.backoffId_=bet(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&xet(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class f3{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Cet(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Aet(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Det(e,t){t&&(e["X-Firebase-GMPID"]=t)}function ket(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Iet(e,t,n,r,i,o,s=!0){const a=Xbe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return Det(l,t),Cet(l,n),Aet(l,o),ket(l,r),new Tet(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ret(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Net(...e){const t=Ret();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(EY())return new Blob(e);throw new Yo(Wo.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Pet(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oet(e){if(typeof atob>"u")throw get("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class BB{constructor(t,n){this.data=t,this.contentType=n||null}}function Fet(e,t){switch(e){case Bp.RAW:return new BB(Qbe(t));case Bp.BASE64:case Bp.BASE64URL:return new BB(Jbe(e,t));case Bp.DATA_URL:return new BB($et(t),Let(t))}throw wY()}function Qbe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=r,s=e.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Met(e){let t;try{t=decodeURIComponent(e)}catch{throw ND(Bp.DATA_URL,"Malformed data URL.")}return Qbe(t)}function Jbe(e,t){switch(e){case Bp.BASE64:{const i=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(i||o)throw ND(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Bp.BASE64URL:{const i=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(i||o)throw ND(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Oet(t)}catch(i){throw i.message.includes("polyfill")?i:ND(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Zbe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw ND(Bp.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Bet(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function $et(e){const t=new Zbe(e);return t.base64?Jbe(Bp.BASE64,t.rest):Met(t.rest)}function Let(e){return new Zbe(e).contentType}function Bet(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,n){let r=0,i="";hoe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(hoe(this.data_)){const r=this.data_,i=Pet(r,t,n);return i===null?null:new Uy(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Uy(r,!0)}}static getBlob(...t){if(EY()){const n=t.map(r=>r instanceof Uy?r.data_:r);return new Uy(Net.apply(null,n))}else{const n=t.map(s=>_Y(s)?Fet(Bp.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Uy(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TY(e){let t;try{t=JSON.parse(e)}catch{return null}return _et(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jet(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function zet(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function exe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uet(e,t){return t}class ol{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Uet}}let d3=null;function Vet(e){return!_Y(e)||e.length<2?e:exe(e)}function txe(){if(d3)return d3;const e=[];e.push(new ol("bucket")),e.push(new ol("generation")),e.push(new ol("metageneration")),e.push(new ol("name","fullPath",!0));function t(o,s){return Vet(s)}const n=new ol("name");n.xform=t,e.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new ol("size");return i.xform=r,e.push(i),e.push(new ol("timeCreated")),e.push(new ol("updated")),e.push(new ol("md5Hash",null,!0)),e.push(new ol("cacheControl",null,!0)),e.push(new ol("contentDisposition",null,!0)),e.push(new ol("contentEncoding",null,!0)),e.push(new ol("contentLanguage",null,!0)),e.push(new ol("contentType",null,!0)),e.push(new ol("metadata","customMetadata",!0)),d3=e,d3}function Het(e,t){function n(){const r=e.bucket,i=e.fullPath,o=new gl(r,i);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function qet(e,t,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,t[s.server])}return Het(r,e),r}function nxe(e,t,n){const r=TY(t);return r===null?null:qet(e,r,n)}function Wet(e,t,n,r){const i=TY(t);if(i===null||!_Y(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+s(c)+"/o/"+s(f),h=FI(d,n,r),m=Xbe({alt:"media",token:l});return h+m})[0]}function Get(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const poe="prefixes",moe="items";function Yet(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[poe])for(const i of n[poe]){const o=i.replace(/\/$/,""),s=e._makeStorageReference(new gl(t,o));r.prefixes.push(s)}if(n[moe])for(const i of n[moe]){const o=e._makeStorageReference(new gl(t,i.name));r.items.push(o)}return r}function Ket(e,t,n){const r=TY(n);return r===null?null:Yet(e,t,r)}class H5{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CY(e){if(!e)throw wY()}function Xet(e,t){function n(r,i){const o=nxe(e,i,t);return CY(o!==null),o}return n}function Qet(e,t){function n(r,i){const o=Ket(e,t,i);return CY(o!==null),o}return n}function Jet(e,t){function n(r,i){const o=nxe(e,i,t);return CY(o!==null),Wet(o,i,e.host,e._protocol)}return n}function SY(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=set():i=oet():n.getStatus()===402?i=iet(e.bucket):n.getStatus()===403?i=aet(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function rxe(e){const t=SY(e);function n(r,i){let o=t(r,i);return r.getStatus()===404&&(o=ret(e.path)),o.serverResponse=i.serverResponse,o}return n}function Zet(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=t.bucketOnlyServerUrl(),a=FI(s,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new H5(a,u,Qet(e,t.bucket),l);return c.urlParams=o,c.errorHandler=SY(t),c}function ett(e,t,n){const r=t.fullServerUrl(),i=FI(r,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,a=new H5(i,o,Jet(e,n),s);return a.errorHandler=rxe(t),a}function ttt(e,t){const n=t.fullServerUrl(),r=FI(n,e.host,e._protocol),i="DELETE",o=e.maxOperationRetryTime;function s(u,l){}const a=new H5(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=rxe(t),a}function ntt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function rtt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=ntt(null,t)),r}function itt(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const u=a();s["Content-Type"]="multipart/related; boundary="+u;const l=rtt(t,r,i),c=Get(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Uy.getBlob(f,r,d);if(h===null)throw pet();const m={name:l.fullPath},p=FI(o,e.host,e._protocol),g="POST",v=e.maxUploadRetryTime,b=new H5(p,g,Xet(e,n),v);return b.urlParams=m,b.headers=s,b.body=h.uploadData(),b.errorHandler=SY(t),b}class ott{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ix.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ix.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ix.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw GS("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw GS("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw GS("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw GS("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw GS("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class stt extends ott{initXhr(){this.xhr_.responseType="text"}}function q5(){return new stt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(t,n){this._service=t,n instanceof gl?this._location=n:this._location=gl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new gx(t,n)}get root(){const t=new gl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return exe(this._location.path)}get storage(){return this._service}get parent(){const t=jet(this._location.path);if(t===null)return null;const n=new gl(this._location.bucket,t);return new gx(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw yet(t)}}function att(e,t,n){e._throwIfRoot("uploadBytes");const r=itt(e.storage,e._location,txe(),new Uy(t,!0),n);return e.storage.makeRequestWithTokens(r,q5).then(i=>({metadata:i,ref:e}))}function utt(e){const t={prefixes:[],items:[]};return ixe(e,t).then(()=>t)}async function ixe(e,t,n){const i=await ltt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await ixe(e,t,i.nextPageToken)}function ltt(e,t){t!=null&&typeof t.maxResults=="number"&&pU("options.maxResults",1,1e3,t.maxResults);const n=t,r=Zet(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,q5)}function ctt(e){e._throwIfRoot("getDownloadURL");const t=ett(e.storage,e._location,txe());return e.storage.makeRequestWithTokens(t,q5).then(n=>{if(n===null)throw met();return n})}function ftt(e){e._throwIfRoot("deleteObject");const t=ttt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,q5)}function dtt(e,t){const n=zet(e._location.path,t),r=new gl(e._location.bucket,n);return new gx(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function htt(e){return/^[A-Za-z]+:\/\//.test(e)}function ptt(e,t){return new gx(e,t)}function oxe(e,t){if(e instanceof AY){const n=e;if(n._bucket==null)throw het();const r=new gx(n,n._bucket);return t!=null?oxe(r,t):r}else return t!==void 0?dtt(e,t):e}function mtt(e,t){if(t&&htt(t)){if(e instanceof AY)return ptt(e,t);throw hU("To use ref(service, url), the first argument must be a Storage instance.")}else return oxe(e,t)}function goe(e,t){const n=t==null?void 0:t[Ybe];return n==null?null:gl.makeFromBucketSpec(n,e)}function gtt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:CJe(i,e.app.options.projectId))}class AY{constructor(t,n,r,i,o){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Gbe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=tet,this._maxUploadRetryTime=net,this._requests=new Set,i!=null?this._bucket=gl.makeFromBucketSpec(i,this._host):this._bucket=goe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=gl.makeFromBucketSpec(this._url,t):this._bucket=goe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){pU("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){pU("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new gx(this,t)}_makeRequest(t,n,r,i,o=!0){if(this._deleted)return new vet(Kbe());{const s=Iet(t,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const yoe="@firebase/storage",voe="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sxe="storage";function h3(e,t,n){return e=Wi(e),att(e,t,n)}function YS(e){return e=Wi(e),utt(e)}function p3(e){return e=Wi(e),ctt(e)}function boe(e){return e=Wi(e),ftt(e)}function Gc(e,t){return e=Wi(e),mtt(e,t)}function xoe(e=xY(),t){e=Wi(e);const r=XT(e,sxe).getImmediate({identifier:t}),i=TJe("storage");return i&&ytt(r,...i),r}function ytt(e,t,n,r={}){gtt(e,t,n,r)}function vtt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new AY(n,r,i,t,ow)}function btt(){dg(new sm(sxe,vtt,"PUBLIC").setMultipleInstances(!0)),bh(yoe,voe,""),bh(yoe,voe,"esm2017")}btt();var woe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u1,axe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,I){function R(){}R.prototype=I.prototype,S.D=I.prototype,S.prototype=new R,S.prototype.constructor=S,S.C=function(P,M,B){for(var L=Array(arguments.length-2),z=2;z<arguments.length;z++)L[z-2]=arguments[z];return I.prototype[M].apply(P,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,I,R){R||(R=0);var P=Array(16);if(typeof I=="string")for(var M=0;16>M;++M)P[M]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(M=0;16>M;++M)P[M]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=S.g[0],R=S.g[1],M=S.g[2];var B=S.g[3],L=I+(B^R&(M^B))+P[0]+3614090360&4294967295;I=R+(L<<7&4294967295|L>>>25),L=B+(M^I&(R^M))+P[1]+3905402710&4294967295,B=I+(L<<12&4294967295|L>>>20),L=M+(R^B&(I^R))+P[2]+606105819&4294967295,M=B+(L<<17&4294967295|L>>>15),L=R+(I^M&(B^I))+P[3]+3250441966&4294967295,R=M+(L<<22&4294967295|L>>>10),L=I+(B^R&(M^B))+P[4]+4118548399&4294967295,I=R+(L<<7&4294967295|L>>>25),L=B+(M^I&(R^M))+P[5]+1200080426&4294967295,B=I+(L<<12&4294967295|L>>>20),L=M+(R^B&(I^R))+P[6]+2821735955&4294967295,M=B+(L<<17&4294967295|L>>>15),L=R+(I^M&(B^I))+P[7]+4249261313&4294967295,R=M+(L<<22&4294967295|L>>>10),L=I+(B^R&(M^B))+P[8]+1770035416&4294967295,I=R+(L<<7&4294967295|L>>>25),L=B+(M^I&(R^M))+P[9]+2336552879&4294967295,B=I+(L<<12&4294967295|L>>>20),L=M+(R^B&(I^R))+P[10]+4294925233&4294967295,M=B+(L<<17&4294967295|L>>>15),L=R+(I^M&(B^I))+P[11]+2304563134&4294967295,R=M+(L<<22&4294967295|L>>>10),L=I+(B^R&(M^B))+P[12]+1804603682&4294967295,I=R+(L<<7&4294967295|L>>>25),L=B+(M^I&(R^M))+P[13]+4254626195&4294967295,B=I+(L<<12&4294967295|L>>>20),L=M+(R^B&(I^R))+P[14]+2792965006&4294967295,M=B+(L<<17&4294967295|L>>>15),L=R+(I^M&(B^I))+P[15]+1236535329&4294967295,R=M+(L<<22&4294967295|L>>>10),L=I+(M^B&(R^M))+P[1]+4129170786&4294967295,I=R+(L<<5&4294967295|L>>>27),L=B+(R^M&(I^R))+P[6]+3225465664&4294967295,B=I+(L<<9&4294967295|L>>>23),L=M+(I^R&(B^I))+P[11]+643717713&4294967295,M=B+(L<<14&4294967295|L>>>18),L=R+(B^I&(M^B))+P[0]+3921069994&4294967295,R=M+(L<<20&4294967295|L>>>12),L=I+(M^B&(R^M))+P[5]+3593408605&4294967295,I=R+(L<<5&4294967295|L>>>27),L=B+(R^M&(I^R))+P[10]+38016083&4294967295,B=I+(L<<9&4294967295|L>>>23),L=M+(I^R&(B^I))+P[15]+3634488961&4294967295,M=B+(L<<14&4294967295|L>>>18),L=R+(B^I&(M^B))+P[4]+3889429448&4294967295,R=M+(L<<20&4294967295|L>>>12),L=I+(M^B&(R^M))+P[9]+568446438&4294967295,I=R+(L<<5&4294967295|L>>>27),L=B+(R^M&(I^R))+P[14]+3275163606&4294967295,B=I+(L<<9&4294967295|L>>>23),L=M+(I^R&(B^I))+P[3]+4107603335&4294967295,M=B+(L<<14&4294967295|L>>>18),L=R+(B^I&(M^B))+P[8]+1163531501&4294967295,R=M+(L<<20&4294967295|L>>>12),L=I+(M^B&(R^M))+P[13]+2850285829&4294967295,I=R+(L<<5&4294967295|L>>>27),L=B+(R^M&(I^R))+P[2]+4243563512&4294967295,B=I+(L<<9&4294967295|L>>>23),L=M+(I^R&(B^I))+P[7]+1735328473&4294967295,M=B+(L<<14&4294967295|L>>>18),L=R+(B^I&(M^B))+P[12]+2368359562&4294967295,R=M+(L<<20&4294967295|L>>>12),L=I+(R^M^B)+P[5]+4294588738&4294967295,I=R+(L<<4&4294967295|L>>>28),L=B+(I^R^M)+P[8]+2272392833&4294967295,B=I+(L<<11&4294967295|L>>>21),L=M+(B^I^R)+P[11]+1839030562&4294967295,M=B+(L<<16&4294967295|L>>>16),L=R+(M^B^I)+P[14]+4259657740&4294967295,R=M+(L<<23&4294967295|L>>>9),L=I+(R^M^B)+P[1]+2763975236&4294967295,I=R+(L<<4&4294967295|L>>>28),L=B+(I^R^M)+P[4]+1272893353&4294967295,B=I+(L<<11&4294967295|L>>>21),L=M+(B^I^R)+P[7]+4139469664&4294967295,M=B+(L<<16&4294967295|L>>>16),L=R+(M^B^I)+P[10]+3200236656&4294967295,R=M+(L<<23&4294967295|L>>>9),L=I+(R^M^B)+P[13]+681279174&4294967295,I=R+(L<<4&4294967295|L>>>28),L=B+(I^R^M)+P[0]+3936430074&4294967295,B=I+(L<<11&4294967295|L>>>21),L=M+(B^I^R)+P[3]+3572445317&4294967295,M=B+(L<<16&4294967295|L>>>16),L=R+(M^B^I)+P[6]+76029189&4294967295,R=M+(L<<23&4294967295|L>>>9),L=I+(R^M^B)+P[9]+3654602809&4294967295,I=R+(L<<4&4294967295|L>>>28),L=B+(I^R^M)+P[12]+3873151461&4294967295,B=I+(L<<11&4294967295|L>>>21),L=M+(B^I^R)+P[15]+530742520&4294967295,M=B+(L<<16&4294967295|L>>>16),L=R+(M^B^I)+P[2]+3299628645&4294967295,R=M+(L<<23&4294967295|L>>>9),L=I+(M^(R|~B))+P[0]+4096336452&4294967295,I=R+(L<<6&4294967295|L>>>26),L=B+(R^(I|~M))+P[7]+1126891415&4294967295,B=I+(L<<10&4294967295|L>>>22),L=M+(I^(B|~R))+P[14]+2878612391&4294967295,M=B+(L<<15&4294967295|L>>>17),L=R+(B^(M|~I))+P[5]+4237533241&4294967295,R=M+(L<<21&4294967295|L>>>11),L=I+(M^(R|~B))+P[12]+1700485571&4294967295,I=R+(L<<6&4294967295|L>>>26),L=B+(R^(I|~M))+P[3]+2399980690&4294967295,B=I+(L<<10&4294967295|L>>>22),L=M+(I^(B|~R))+P[10]+4293915773&4294967295,M=B+(L<<15&4294967295|L>>>17),L=R+(B^(M|~I))+P[1]+2240044497&4294967295,R=M+(L<<21&4294967295|L>>>11),L=I+(M^(R|~B))+P[8]+1873313359&4294967295,I=R+(L<<6&4294967295|L>>>26),L=B+(R^(I|~M))+P[15]+4264355552&4294967295,B=I+(L<<10&4294967295|L>>>22),L=M+(I^(B|~R))+P[6]+2734768916&4294967295,M=B+(L<<15&4294967295|L>>>17),L=R+(B^(M|~I))+P[13]+1309151649&4294967295,R=M+(L<<21&4294967295|L>>>11),L=I+(M^(R|~B))+P[4]+4149444226&4294967295,I=R+(L<<6&4294967295|L>>>26),L=B+(R^(I|~M))+P[11]+3174756917&4294967295,B=I+(L<<10&4294967295|L>>>22),L=M+(I^(B|~R))+P[2]+718787259&4294967295,M=B+(L<<15&4294967295|L>>>17),L=R+(B^(M|~I))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+B&4294967295}r.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var R=I-this.blockSize,P=this.B,M=this.h,B=0;B<I;){if(M==0)for(;B<=R;)i(this,S,B),B+=this.blockSize;if(typeof S=="string"){for(;B<I;)if(P[M++]=S.charCodeAt(B++),M==this.blockSize){i(this,P),M=0;break}}else for(;B<I;)if(P[M++]=S[B++],M==this.blockSize){i(this,P),M=0;break}}this.h=M,this.o+=I},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var R=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=R&255,R/=256;for(this.u(S),S=Array(16),I=R=0;4>I;++I)for(var P=0;32>P;P+=8)S[R++]=this.g[I]>>>P&255;return S};function o(S,I){var R=a;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=I(S)}function s(S,I){this.h=I;for(var R=[],P=!0,M=S.length-1;0<=M;M--){var B=S[M]|0;P&&B==I||(R[M]=B,P=!1)}this.g=R}var a={};function u(S){return-128<=S&&128>S?o(S,function(I){return new s([I|0],0>I?-1:0)}):new s([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var I=[],R=1,P=0;S>=R;P++)I[P]=S/R|0,R*=4294967296;return new s(I,0)}function c(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return g(c(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=l(Math.pow(I,8)),P=f,M=0;M<S.length;M+=8){var B=Math.min(8,S.length-M),L=parseInt(S.substring(M,M+B),I);8>B?(B=l(Math.pow(I,B)),P=P.j(B).add(l(L))):(P=P.j(R),P=P.add(l(L)))}return P}var f=u(0),d=u(1),h=u(16777216);e=s.prototype,e.m=function(){if(p(this))return-g(this).m();for(var S=0,I=1,R=0;R<this.g.length;R++){var P=this.i(R);S+=(0<=P?P:4294967296+P)*I,I*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(m(this))return"0";if(p(this))return"-"+g(this).toString(S);for(var I=l(Math.pow(S,6)),R=this,P="";;){var M=E(R,I).g;R=v(R,M.j(I));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(S);if(R=M,m(R))return B+P;for(;6>B.length;)B="0"+B;P=B+P}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function m(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function p(S){return S.h==-1}e.l=function(S){return S=v(this,S),p(S)?-1:m(S)?0:1};function g(S){for(var I=S.g.length,R=[],P=0;P<I;P++)R[P]=~S.g[P];return new s(R,~S.h).add(d)}e.abs=function(){return p(this)?g(this):this},e.add=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0,M=0;M<=I;M++){var B=P+(this.i(M)&65535)+(S.i(M)&65535),L=(B>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);P=L>>>16,B&=65535,L&=65535,R[M]=L<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function v(S,I){return S.add(g(I))}e.j=function(S){if(m(this)||m(S))return f;if(p(this))return p(S)?g(this).j(g(S)):g(g(this).j(S));if(p(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var I=this.g.length+S.g.length,R=[],P=0;P<2*I;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(var M=0;M<S.g.length;M++){var B=this.i(P)>>>16,L=this.i(P)&65535,z=S.i(M)>>>16,G=S.i(M)&65535;R[2*P+2*M]+=L*G,b(R,2*P+2*M),R[2*P+2*M+1]+=B*G,b(R,2*P+2*M+1),R[2*P+2*M+1]+=L*z,b(R,2*P+2*M+1),R[2*P+2*M+2]+=B*z,b(R,2*P+2*M+2)}for(P=0;P<I;P++)R[P]=R[2*P+1]<<16|R[2*P];for(P=I;P<2*I;P++)R[P]=0;return new s(R,0)};function b(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function w(S,I){this.g=S,this.h=I}function E(S,I){if(m(I))throw Error("division by zero");if(m(S))return new w(f,f);if(p(S))return I=E(g(S),I),new w(g(I.g),g(I.h));if(p(I))return I=E(S,g(I)),new w(g(I.g),I.h);if(30<S.g.length){if(p(S)||p(I))throw Error("slowDivide_ only works with positive integers.");for(var R=d,P=I;0>=P.l(S);)R=T(R),P=T(P);var M=C(R,1),B=C(P,1);for(P=C(P,2),R=C(R,2);!m(P);){var L=B.add(P);0>=L.l(S)&&(M=M.add(R),B=L),P=C(P,1),R=C(R,1)}return I=v(S,M.j(I)),new w(M,I)}for(M=f;0<=S.l(I);){for(R=Math.max(1,Math.floor(S.m()/I.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),B=l(R),L=B.j(I);p(L)||0<L.l(S);)R-=P,B=l(R),L=B.j(I);m(B)&&(B=d),M=M.add(B),S=v(S,L)}return new w(M,S)}e.A=function(S){return E(this,S).h},e.and=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)&S.i(P);return new s(R,this.h&S.h)},e.or=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)|S.i(P);return new s(R,this.h|S.h)},e.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),R=[],P=0;P<I;P++)R[P]=this.i(P)^S.i(P);return new s(R,this.h^S.h)};function T(S){for(var I=S.g.length+1,R=[],P=0;P<I;P++)R[P]=S.i(P)<<1|S.i(P-1)>>>31;return new s(R,S.h)}function C(S,I){var R=I>>5;I%=32;for(var P=S.g.length-R,M=[],B=0;B<P;B++)M[B]=0<I?S.i(B+R)>>>I|S.i(B+R+1)<<32-I:S.i(B+R);return new s(M,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,axe=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=c,u1=s}).apply(typeof woe<"u"?woe:typeof self<"u"?self:typeof window<"u"?window:{});var m3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uxe,PA,lxe,E4,mU,cxe,fxe,dxe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,K,ne){return N==Array.prototype||N==Object.prototype||(N[K]=ne.value),N};function n(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof m3=="object"&&m3];for(var K=0;K<N.length;++K){var ne=N[K];if(ne&&ne.Math==Math)return ne}throw Error("Cannot find global object")}var r=n(this);function i(N,K){if(K)e:{var ne=r;N=N.split(".");for(var ce=0;ce<N.length-1;ce++){var He=N[ce];if(!(He in ne))break e;ne=ne[He]}N=N[N.length-1],ce=ne[N],K=K(ce),K!=ce&&K!=null&&t(ne,N,{configurable:!0,writable:!0,value:K})}}function o(N,K){N instanceof String&&(N+="");var ne=0,ce=!1,He={next:function(){if(!ce&&ne<N.length){var nt=ne++;return{value:K(nt,N[nt]),done:!1}}return ce=!0,{done:!0,value:void 0}}};return He[Symbol.iterator]=function(){return He},He}i("Array.prototype.values",function(N){return N||function(){return o(this,function(K,ne){return ne})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function u(N){var K=typeof N;return K=K!="object"?K:N?Array.isArray(N)?"array":K:"null",K=="array"||K=="object"&&typeof N.length=="number"}function l(N){var K=typeof N;return K=="object"&&N!=null||K=="function"}function c(N,K,ne){return N.call.apply(N.bind,arguments)}function f(N,K,ne){if(!N)throw Error();if(2<arguments.length){var ce=Array.prototype.slice.call(arguments,2);return function(){var He=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(He,ce),N.apply(K,He)}}return function(){return N.apply(K,arguments)}}function d(N,K,ne){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(N,K){var ne=Array.prototype.slice.call(arguments,1);return function(){var ce=ne.slice();return ce.push.apply(ce,arguments),N.apply(this,ce)}}function m(N,K){function ne(){}ne.prototype=K.prototype,N.aa=K.prototype,N.prototype=new ne,N.prototype.constructor=N,N.Qb=function(ce,He,nt){for(var Ut=Array(arguments.length-2),Wr=2;Wr<arguments.length;Wr++)Ut[Wr-2]=arguments[Wr];return K.prototype[He].apply(ce,Ut)}}function p(N){const K=N.length;if(0<K){const ne=Array(K);for(let ce=0;ce<K;ce++)ne[ce]=N[ce];return ne}return[]}function g(N,K){for(let ne=1;ne<arguments.length;ne++){const ce=arguments[ne];if(u(ce)){const He=N.length||0,nt=ce.length||0;N.length=He+nt;for(let Ut=0;Ut<nt;Ut++)N[He+Ut]=ce[Ut]}else N.push(ce)}}class v{constructor(K,ne){this.i=K,this.j=ne,this.h=0,this.g=null}get(){let K;return 0<this.h?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function b(N){return/^[\s\xa0]*$/.test(N)}function w(){var N=a.navigator;return N&&(N=N.userAgent)?N:""}function E(N){return E[" "](N),N}E[" "]=function(){};var T=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function C(N,K,ne){for(const ce in N)K.call(ne,N[ce],ce,N)}function S(N,K){for(const ne in N)K.call(void 0,N[ne],ne,N)}function I(N){const K={};for(const ne in N)K[ne]=N[ne];return K}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(N,K){let ne,ce;for(let He=1;He<arguments.length;He++){ce=arguments[He];for(ne in ce)N[ne]=ce[ne];for(let nt=0;nt<R.length;nt++)ne=R[nt],Object.prototype.hasOwnProperty.call(ce,ne)&&(N[ne]=ce[ne])}}function M(N){var K=1;N=N.split(":");const ne=[];for(;0<K&&N.length;)ne.push(N.shift()),K--;return N.length&&ne.push(N.join(":")),ne}function B(N){a.setTimeout(()=>{throw N},0)}function L(){var N=re;let K=null;return N.g&&(K=N.g,N.g=N.g.next,N.g||(N.h=null),K.next=null),K}class z{constructor(){this.h=this.g=null}add(K,ne){const ce=G.get();ce.set(K,ne),this.h?this.h.next=ce:this.g=ce,this.h=ce}}var G=new v(()=>new W,N=>N.reset());class W{constructor(){this.next=this.g=this.h=null}set(K,ne){this.h=K,this.g=ne,this.next=null}reset(){this.next=this.g=this.h=null}}let te,Z=!1,re=new z,q=()=>{const N=a.Promise.resolve(void 0);te=()=>{N.then(U)}};var U=()=>{for(var N;N=L();){try{N.h.call(N.g)}catch(ne){B(ne)}var K=G;K.j(N),100>K.h&&(K.h++,N.next=K.g,K.g=N)}Z=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(N,K){this.type=N,this.g=this.target=K,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var N=!1,K=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const ne=()=>{};a.addEventListener("test",ne,K),a.removeEventListener("test",ne,K)}catch{}return N}();function ee(N,K){if(H.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var ne=this.type=N.type,ce=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=K,K=N.relatedTarget){if(T){e:{try{E(K.nodeName);var He=!0;break e}catch{}He=!1}He||(K=null)}}else ne=="mouseover"?K=N.fromElement:ne=="mouseout"&&(K=N.toElement);this.relatedTarget=K,ce?(this.clientX=ce.clientX!==void 0?ce.clientX:ce.pageX,this.clientY=ce.clientY!==void 0?ce.clientY:ce.pageY,this.screenX=ce.screenX||0,this.screenY=ce.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:le[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&ee.aa.h.call(this)}}m(ee,H);var le={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var Ee="closure_listenable_"+(1e6*Math.random()|0),be=0;function Ce(N,K,ne,ce,He){this.listener=N,this.proxy=null,this.src=K,this.type=ne,this.capture=!!ce,this.ha=He,this.key=++be,this.da=this.fa=!1}function Oe(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function me(N){this.src=N,this.g={},this.h=0}me.prototype.add=function(N,K,ne,ce,He){var nt=N.toString();N=this.g[nt],N||(N=this.g[nt]=[],this.h++);var Ut=Fe(N,K,ce,He);return-1<Ut?(K=N[Ut],ne||(K.fa=!1)):(K=new Ce(K,this.src,nt,!!ce,He),K.fa=ne,N.push(K)),K};function he(N,K){var ne=K.type;if(ne in N.g){var ce=N.g[ne],He=Array.prototype.indexOf.call(ce,K,void 0),nt;(nt=0<=He)&&Array.prototype.splice.call(ce,He,1),nt&&(Oe(K),N.g[ne].length==0&&(delete N.g[ne],N.h--))}}function Fe(N,K,ne,ce){for(var He=0;He<N.length;++He){var nt=N[He];if(!nt.da&&nt.listener==K&&nt.capture==!!ne&&nt.ha==ce)return He}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),Je={};function ut(N,K,ne,ce,He){if(Array.isArray(K)){for(var nt=0;nt<K.length;nt++)ut(N,K[nt],ne,ce,He);return null}return ne=Re(ne),N&&N[Ee]?N.K(K,ne,l(ce)?!!ce.capture:!1,He):Ke(N,K,ne,!1,ce,He)}function Ke(N,K,ne,ce,He,nt){if(!K)throw Error("Invalid event type");var Ut=l(He)?!!He.capture:!!He,Wr=oe(N);if(Wr||(N[Pe]=Wr=new me(N)),ne=Wr.add(K,ne,ce,Ut,nt),ne.proxy)return ne;if(ce=tt(),ne.proxy=ce,ce.src=N,ce.listener=ne,N.addEventListener)X||(He=Ut),He===void 0&&(He=!1),N.addEventListener(K.toString(),ce,He);else if(N.attachEvent)N.attachEvent(St(K.toString()),ce);else if(N.addListener&&N.removeListener)N.addListener(ce);else throw Error("addEventListener and attachEvent are unavailable.");return ne}function tt(){function N(ne){return K.call(N.src,N.listener,ne)}const K=$t;return N}function pt(N,K,ne,ce,He){if(Array.isArray(K))for(var nt=0;nt<K.length;nt++)pt(N,K[nt],ne,ce,He);else ce=l(ce)?!!ce.capture:!!ce,ne=Re(ne),N&&N[Ee]?(N=N.i,K=String(K).toString(),K in N.g&&(nt=N.g[K],ne=Fe(nt,ne,ce,He),-1<ne&&(Oe(nt[ne]),Array.prototype.splice.call(nt,ne,1),nt.length==0&&(delete N.g[K],N.h--)))):N&&(N=oe(N))&&(K=N.g[K.toString()],N=-1,K&&(N=Fe(K,ne,ce,He)),(ne=-1<N?K[N]:null)&&Dt(ne))}function Dt(N){if(typeof N!="number"&&N&&!N.da){var K=N.src;if(K&&K[Ee])he(K.i,N);else{var ne=N.type,ce=N.proxy;K.removeEventListener?K.removeEventListener(ne,ce,N.capture):K.detachEvent?K.detachEvent(St(ne),ce):K.addListener&&K.removeListener&&K.removeListener(ce),(ne=oe(K))?(he(ne,N),ne.h==0&&(ne.src=null,K[Pe]=null)):Oe(N)}}}function St(N){return N in Je?Je[N]:Je[N]="on"+N}function $t(N,K){if(N.da)N=!0;else{K=new ee(K,this);var ne=N.listener,ce=N.ha||N.src;N.fa&&Dt(N),N=ne.call(ce,K)}return N}function oe(N){return N=N[Pe],N instanceof me?N:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(N){return typeof N=="function"?N:(N[xe]||(N[xe]=function(K){return N.handleEvent(K)}),N[xe])}function pe(){Y.call(this),this.i=new me(this),this.M=this,this.F=null}m(pe,Y),pe.prototype[Ee]=!0,pe.prototype.removeEventListener=function(N,K,ne,ce){pt(this,N,K,ne,ce)};function we(N,K){var ne,ce=N.F;if(ce)for(ne=[];ce;ce=ce.F)ne.push(ce);if(N=N.M,ce=K.type||K,typeof K=="string")K=new H(K,N);else if(K instanceof H)K.target=K.target||N;else{var He=K;K=new H(ce,N),P(K,He)}if(He=!0,ne)for(var nt=ne.length-1;0<=nt;nt--){var Ut=K.g=ne[nt];He=ke(Ut,ce,!0,K)&&He}if(Ut=K.g=N,He=ke(Ut,ce,!0,K)&&He,He=ke(Ut,ce,!1,K)&&He,ne)for(nt=0;nt<ne.length;nt++)Ut=K.g=ne[nt],He=ke(Ut,ce,!1,K)&&He}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var N=this.i,K;for(K in N.g){for(var ne=N.g[K],ce=0;ce<ne.length;ce++)Oe(ne[ce]);delete N.g[K],N.h--}}this.F=null},pe.prototype.K=function(N,K,ne,ce){return this.i.add(String(N),K,!1,ne,ce)},pe.prototype.L=function(N,K,ne,ce){return this.i.add(String(N),K,!0,ne,ce)};function ke(N,K,ne,ce){if(K=N.i.g[String(K)],!K)return!0;K=K.concat();for(var He=!0,nt=0;nt<K.length;++nt){var Ut=K[nt];if(Ut&&!Ut.da&&Ut.capture==ne){var Wr=Ut.listener,es=Ut.ha||Ut.src;Ut.fa&&he(N.i,Ut),He=Wr.call(es,ce)!==!1&&He}}return He&&!ce.defaultPrevented}function Ge(N,K,ne){if(typeof N=="function")ne&&(N=d(N,ne));else if(N&&typeof N.handleEvent=="function")N=d(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(K)?-1:a.setTimeout(N,K||0)}function Ve(N){N.g=Ge(()=>{N.g=null,N.i&&(N.i=!1,Ve(N))},N.l);const K=N.h;N.h=null,N.m.apply(null,K)}class at extends Y{constructor(K,ne){super(),this.m=K,this.l=ne,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:Ve(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(N){Y.call(this),this.h=N,this.g={}}m(rt,Y);var ln=[];function xn(N){C(N.g,function(K,ne){this.g.hasOwnProperty(ne)&&Dt(K)},N),N.g={}}rt.prototype.N=function(){rt.aa.N.call(this),xn(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rn=a.JSON.stringify,bn=a.JSON.parse,Hn=class{stringify(N){return a.JSON.stringify(N,void 0)}parse(N){return a.JSON.parse(N,void 0)}};function $n(){}$n.prototype.h=null;function Kr(N){return N.h||(N.h=N.i())}function Lr(){}var Br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mi(){H.call(this,"d")}m(mi,H);function Er(){H.call(this,"c")}m(Er,H);var Do={},iu=null;function hs(){return iu=iu||new pe}Do.La="serverreachability";function Ks(N){H.call(this,Do.La,N)}m(Ks,H);function Tr(N){const K=hs();we(K,new Ks(K))}Do.STAT_EVENT="statevent";function li(N,K){H.call(this,Do.STAT_EVENT,N),this.stat=K}m(li,H);function Dr(N){const K=hs();we(K,new li(K,N))}Do.Ma="timingevent";function no(N,K){H.call(this,Do.Ma,N),this.size=K}m(no,H);function vr(N,K){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){N()},K)}function gi(){this.g=!0}gi.prototype.xa=function(){this.g=!1};function ko(N,K,ne,ce,He,nt){N.info(function(){if(N.g)if(nt)for(var Ut="",Wr=nt.split("&"),es=0;es<Wr.length;es++){var xr=Wr[es].split("=");if(1<xr.length){var Qr=xr[0];xr=xr[1];var io=Qr.split("_");Ut=2<=io.length&&io[1]=="type"?Ut+(Qr+"="+xr+"&"):Ut+(Qr+"=redacted&")}}else Ut=null;else Ut=nt;return"XMLHTTP REQ ("+ce+") [attempt "+He+"]: "+K+`
`+ne+`
`+Ut})}function po(N,K,ne,ce,He,nt,Ut){N.info(function(){return"XMLHTTP RESP ("+ce+") [ attempt "+He+"]: "+K+`
`+ne+`
`+nt+" "+Ut})}function Ko(N,K,ne,ce){N.info(function(){return"XMLHTTP TEXT ("+K+"): "+Sc(N,ne)+(ce?" "+ce:"")})}function Ea(N,K){N.info(function(){return"TIMEOUT: "+K})}gi.prototype.info=function(){};function Sc(N,K){if(!N.g)return K;if(!K)return null;try{var ne=JSON.parse(K);if(ne){for(N=0;N<ne.length;N++)if(Array.isArray(ne[N])){var ce=ne[N];if(!(2>ce.length)){var He=ce[1];if(Array.isArray(He)&&!(1>He.length)){var nt=He[0];if(nt!="noop"&&nt!="stop"&&nt!="close")for(var Ut=1;Ut<He.length;Ut++)He[Ut]=""}}}}return rn(ne)}catch{return K}}var pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ou={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ri;function ks(){}m(ks,$n),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},Ri=new ks;function Xo(N,K,ne,ce){this.j=N,this.i=K,this.l=ne,this.R=ce||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Df}function Df(){this.i=null,this.g="",this.h=!1}var Ac={},Dl={};function kl(N,K,ne){N.L=1,N.v=Qn(_t(K)),N.m=ne,N.P=!0,Yu(N,null)}function Yu(N,K){N.F=Date.now(),en(N),N.A=_t(N.v);var ne=N.A,ce=N.R;Array.isArray(ce)||(ce=[String(ce)]),kc(ne.i,"t",ce),N.C=0,ne=N.j.J,N.h=new Df,N.g=Fw(N.j,ne?K:null,!N.m),0<N.O&&(N.M=new at(d(N.Y,N,N.g),N.O)),K=N.U,ne=N.g,ce=N.ca;var He="readystatechange";Array.isArray(He)||(He&&(ln[0]=He.toString()),He=ln);for(var nt=0;nt<He.length;nt++){var Ut=ut(ne,He[nt],ce||K.handleEvent,!1,K.h||K);if(!Ut)break;K.g[Ut.key]=Ut}K=N.H?I(N.H):{},N.m?(N.u||(N.u="POST"),K["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,K)):(N.u="GET",N.g.ea(N.A,N.u,null,K)),Tr(),ko(N.i,N.u,N.A,N.l,N.R,N.m)}Xo.prototype.ca=function(N){N=N.target;const K=this.M;K&&jr(N)==3?K.j():this.Y(N)},Xo.prototype.Y=function(N){try{if(N==this.g)e:{const io=jr(this.g);var K=this.g.Ba();const Qs=this.g.Z();if(!(3>io)&&(io!=3||this.g&&(this.h.h||this.g.oa()||Ro(this.g)))){this.J||io!=4||K==7||(K==8||0>=Qs?Tr(3):Tr(2)),mo(this);var ne=this.g.Z();this.X=ne;t:if(Ku(this)){var ce=Ro(this.g);N="";var He=ce.length,nt=jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ei(this),ps(this);var Ut="";break t}this.h.i=new a.TextDecoder}for(K=0;K<He;K++)this.h.h=!0,N+=this.h.i.decode(ce[K],{stream:!(nt&&K==He-1)});ce.length=0,this.h.g+=N,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=ne==200,po(this.i,this.u,this.A,this.l,this.R,io,ne),this.o){if(this.T&&!this.K){t:{if(this.g){var Wr,es=this.g;if((Wr=es.g?es.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Wr)){var xr=Wr;break t}}xr=null}if(ne=xr)Ko(this.i,this.l,ne,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,su(this,ne);else{this.o=!1,this.s=3,Dr(12),Ei(this),ps(this);break e}}if(this.P){ne=!0;let lu;for(;!this.J&&this.C<Ut.length;)if(lu=Is(this,Ut),lu==Dl){io==4&&(this.s=4,Dr(14),ne=!1),Ko(this.i,this.l,null,"[Incomplete Response]");break}else if(lu==Ac){this.s=4,Dr(15),Ko(this.i,this.l,Ut,"[Invalid Chunk]"),ne=!1;break}else Ko(this.i,this.l,lu,null),su(this,lu);if(Ku(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),io!=4||Ut.length!=0||this.h.h||(this.s=1,Dr(16),ne=!1),this.o=this.o&&ne,!ne)Ko(this.i,this.l,Ut,"[Invalid Chunked Response]"),Ei(this),ps(this);else if(0<Ut.length&&!this.W){this.W=!0;var Qr=this.j;Qr.g==this&&Qr.ba&&!Qr.M&&(Qr.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),Ol(Qr),Qr.M=!0,Dr(11))}}else Ko(this.i,this.l,Ut,null),su(this,Ut);io==4&&Ei(this),this.o&&!this.J&&(io==4?oi(this.j,this):(this.o=!1,en(this)))}else uu(this.g),ne==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,Dr(12)):(this.s=0,Dr(13)),Ei(this),ps(this)}}}catch{}finally{}};function Ku(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function Is(N,K){var ne=N.C,ce=K.indexOf(`
`,ne);return ce==-1?Dl:(ne=Number(K.substring(ne,ce)),isNaN(ne)?Ac:(ce+=1,ce+ne>K.length?Dl:(K=K.slice(ce,ce+ne),N.C=ce+ne,K)))}Xo.prototype.cancel=function(){this.J=!0,Ei(this)};function en(N){N.S=Date.now()+N.I,Bi(N,N.I)}function Bi(N,K){if(N.B!=null)throw Error("WatchDog timer not null");N.B=vr(d(N.ba,N),K)}function mo(N){N.B&&(a.clearTimeout(N.B),N.B=null)}Xo.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(Ea(this.i,this.A),this.L!=2&&(Tr(),Dr(17)),Ei(this),this.s=2,ps(this)):Bi(this,this.S-N)};function ps(N){N.j.G==0||N.J||oi(N.j,N)}function Ei(N){mo(N);var K=N.M;K&&typeof K.ma=="function"&&K.ma(),N.M=null,xn(N.U),N.g&&(K=N.g,N.g=null,K.abort(),K.ma())}function su(N,K){try{var ne=N.j;if(ne.G!=0&&(ne.g==N||Jo(ne.h,N))){if(!N.K&&Jo(ne.h,N)&&ne.G==3){try{var ce=ne.Da.g.parse(K)}catch{ce=null}if(Array.isArray(ce)&&ce.length==3){var He=ce;if(He[0]==0){e:if(!ne.u){if(ne.g)if(ne.g.F+3e3<N.F)Jh(ne),Pl(ne);else break e;Hm(ne),Dr(18)}}else ne.za=He[1],0<ne.za-ne.T&&37500>He[2]&&ne.F&&ne.v==0&&!ne.C&&(ne.C=vr(d(ne.Za,ne),6e3));if(1>=Qh(ne.h)&&ne.ca){try{ne.ca()}catch{}ne.ca=void 0}}else Oc(ne,11)}else if((N.K||ne.g==N)&&Jh(ne),!b(K))for(He=ne.Da.g.parse(K),K=0;K<He.length;K++){let xr=He[K];if(ne.T=xr[0],xr=xr[1],ne.G==2)if(xr[0]=="c"){ne.K=xr[1],ne.ia=xr[2];const Qr=xr[3];Qr!=null&&(ne.la=Qr,ne.j.info("VER="+ne.la));const io=xr[4];io!=null&&(ne.Aa=io,ne.j.info("SVER="+ne.Aa));const Qs=xr[5];Qs!=null&&typeof Qs=="number"&&0<Qs&&(ce=1.5*Qs,ne.L=ce,ne.j.info("backChannelRequestTimeoutMs_="+ce)),ce=ne;const lu=N.g;if(lu){const Zh=lu.g?lu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zh){var nt=ce.h;nt.g||Zh.indexOf("spdy")==-1&&Zh.indexOf("quic")==-1&&Zh.indexOf("h2")==-1||(nt.j=nt.l,nt.g=new Set,nt.h&&(ue(nt,nt.h),nt.h=null))}if(ce.D){const Gg=lu.g?lu.g.getResponseHeader("X-HTTP-Session-Id"):null;Gg&&(ce.ya=Gg,dn(ce.I,ce.D,Gg))}}ne.G=3,ne.l&&ne.l.ua(),ne.ba&&(ne.R=Date.now()-N.F,ne.j.info("Handshake RTT: "+ne.R+"ms")),ce=ne;var Ut=N;if(ce.qa=qg(ce,ce.J?ce.ia:null,ce.W),Ut.K){Ae(ce.h,Ut);var Wr=Ut,es=ce.L;es&&(Wr.I=es),Wr.B&&(mo(Wr),en(Wr)),ce.g=Ut}else Vm(ce);0<ne.i.length&&Nc(ne)}else xr[0]!="stop"&&xr[0]!="close"||Oc(ne,7);else ne.G==3&&(xr[0]=="stop"||xr[0]=="close"?xr[0]=="stop"?Oc(ne,7):go(ne):xr[0]!="noop"&&ne.l&&ne.l.ta(xr),ne.v=0)}}Tr(4)}catch{}}var Dd=class{constructor(N,K){this.g=N,this.map=K}};function Il(N){this.l=N||10,a.PerformanceNavigationTiming?(N=a.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qo(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function Qh(N){return N.h?1:N.g?N.g.size:0}function Jo(N,K){return N.h?N.h==K:N.g?N.g.has(K):!1}function ue(N,K){N.g?N.g.add(K):N.h=K}function Ae(N,K){N.h&&N.h==K?N.h=null:N.g&&N.g.has(K)&&N.g.delete(K)}Il.prototype.cancel=function(){if(this.i=ye(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function ye(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let K=N.i;for(const ne of N.g.values())K=K.concat(ne.D);return K}return p(N.i)}function $e(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(u(N)){for(var K=[],ne=N.length,ce=0;ce<ne;ce++)K.push(N[ce]);return K}K=[],ne=0;for(ce in N)K[ne++]=N[ce];return K}function je(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(u(N)||typeof N=="string"){var K=[];N=N.length;for(var ne=0;ne<N;ne++)K.push(ne);return K}K=[],ne=0;for(const ce in N)K[ne++]=ce;return K}}}function Me(N,K){if(N.forEach&&typeof N.forEach=="function")N.forEach(K,void 0);else if(u(N)||typeof N=="string")Array.prototype.forEach.call(N,K,void 0);else for(var ne=je(N),ce=$e(N),He=ce.length,nt=0;nt<He;nt++)K.call(void 0,ce[nt],ne&&ne[nt],N)}var lt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wt(N,K){if(N){N=N.split("&");for(var ne=0;ne<N.length;ne++){var ce=N[ne].indexOf("="),He=null;if(0<=ce){var nt=N[ne].substring(0,ce);He=N[ne].substring(ce+1)}else nt=N[ne];K(nt,He?decodeURIComponent(He.replace(/\+/g," ")):"")}}}function Tt(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof Tt){this.h=N.h,Ot(this,N.j),this.o=N.o,this.g=N.g,Wt(this,N.s),this.l=N.l;var K=N.i,ne=new ms;ne.i=K.i,K.g&&(ne.g=new Map(K.g),ne.h=K.h),On(this,ne),this.m=N.m}else N&&(K=String(N).match(lt))?(this.h=!1,Ot(this,K[1]||"",!0),this.o=hn(K[2]||""),this.g=hn(K[3]||"",!0),Wt(this,K[4]),this.l=hn(K[5]||"",!0),On(this,K[6]||"",!0),this.m=hn(K[7]||"")):(this.h=!1,this.i=new ms(null,this.h))}Tt.prototype.toString=function(){var N=[],K=this.j;K&&N.push(lr(K,Ta,!0),":");var ne=this.g;return(ne||K=="file")&&(N.push("//"),(K=this.o)&&N.push(lr(K,Ta,!0),"@"),N.push(encodeURIComponent(String(ne)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ne=this.s,ne!=null&&N.push(":",String(ne))),(ne=this.l)&&(this.g&&ne.charAt(0)!="/"&&N.push("/"),N.push(lr(ne,ne.charAt(0)=="/"?kd:Rl,!0))),(ne=this.i.toString())&&N.push("?",ne),(ne=this.m)&&N.push("#",lr(ne,Id)),N.join("")};function _t(N){return new Tt(N)}function Ot(N,K,ne){N.j=ne?hn(K,!0):K,N.j&&(N.j=N.j.replace(/:$/,""))}function Wt(N,K){if(K){if(K=Number(K),isNaN(K)||0>K)throw Error("Bad port number "+K);N.s=K}else N.s=null}function On(N,K,ne){K instanceof ms?(N.i=K,au(N.i,N.h)):(ne||(K=lr(K,Dc)),N.i=new ms(K,N.h))}function dn(N,K,ne){N.i.set(K,ne)}function Qn(N){return dn(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function hn(N,K){return N?K?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function lr(N,K,ne){return typeof N=="string"?(N=encodeURI(N).replace(K,Io),ne&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function Io(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var Ta=/[#\/\?@]/g,Rl=/[#\?:]/g,kd=/[#\?]/g,Dc=/[#\?@]/g,Id=/#/g;function ms(N,K){this.h=this.g=null,this.i=N||null,this.j=!!K}function Yi(N){N.g||(N.g=new Map,N.h=0,N.i&&wt(N.i,function(K,ne){N.add(decodeURIComponent(K.replace(/\+/g," ")),ne)}))}e=ms.prototype,e.add=function(N,K){Yi(this),this.i=null,N=Sa(this,N);var ne=this.g.get(N);return ne||this.g.set(N,ne=[]),ne.push(K),this.h+=1,this};function gs(N,K){Yi(N),K=Sa(N,K),N.g.has(K)&&(N.i=null,N.h-=N.g.get(K).length,N.g.delete(K))}function Ca(N,K){return Yi(N),K=Sa(N,K),N.g.has(K)}e.forEach=function(N,K){Yi(this),this.g.forEach(function(ne,ce){ne.forEach(function(He){N.call(K,He,ce,this)},this)},this)},e.na=function(){Yi(this);const N=Array.from(this.g.values()),K=Array.from(this.g.keys()),ne=[];for(let ce=0;ce<K.length;ce++){const He=N[ce];for(let nt=0;nt<He.length;nt++)ne.push(K[ce])}return ne},e.V=function(N){Yi(this);let K=[];if(typeof N=="string")Ca(this,N)&&(K=K.concat(this.g.get(Sa(this,N))));else{N=Array.from(this.g.values());for(let ne=0;ne<N.length;ne++)K=K.concat(N[ne])}return K},e.set=function(N,K){return Yi(this),this.i=null,N=Sa(this,N),Ca(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[K]),this.h+=1,this},e.get=function(N,K){return N?(N=this.V(N),0<N.length?String(N[0]):K):K};function kc(N,K,ne){gs(N,K),0<ne.length&&(N.i=null,N.g.set(Sa(N,K),p(ne)),N.h+=ne.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],K=Array.from(this.g.keys());for(var ne=0;ne<K.length;ne++){var ce=K[ne];const nt=encodeURIComponent(String(ce)),Ut=this.V(ce);for(ce=0;ce<Ut.length;ce++){var He=nt;Ut[ce]!==""&&(He+="="+encodeURIComponent(String(Ut[ce]))),N.push(He)}}return this.i=N.join("&")};function Sa(N,K){return K=String(K),N.j&&(K=K.toLowerCase()),K}function au(N,K){K&&!N.j&&(Yi(N),N.i=null,N.g.forEach(function(ne,ce){var He=ce.toLowerCase();ce!=He&&(gs(this,ce),kc(this,He,ne))},N)),N.j=K}function Vg(N,K){const ne=new gi;if(a.Image){const ce=new Image;ce.onload=h(ro,ne,"TestLoadImage: loaded",!0,K,ce),ce.onerror=h(ro,ne,"TestLoadImage: error",!1,K,ce),ce.onabort=h(ro,ne,"TestLoadImage: abort",!1,K,ce),ce.ontimeout=h(ro,ne,"TestLoadImage: timeout",!1,K,ce),a.setTimeout(function(){ce.ontimeout&&ce.ontimeout()},1e4),ce.src=N}else K(!1)}function Nl(N,K){const ne=new gi,ce=new AbortController,He=setTimeout(()=>{ce.abort(),ro(ne,"TestPingServer: timeout",!1,K)},1e4);fetch(N,{signal:ce.signal}).then(nt=>{clearTimeout(He),nt.ok?ro(ne,"TestPingServer: ok",!0,K):ro(ne,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(He),ro(ne,"TestPingServer: error",!1,K)})}function ro(N,K,ne,ce,He){try{He&&(He.onload=null,He.onerror=null,He.onabort=null,He.ontimeout=null),ce(ne)}catch{}}function Sv(){this.g=new Hn}function zm(N,K,ne){const ce=ne||"";try{Me(N,function(He,nt){let Ut=He;l(He)&&(Ut=rn(He)),K.push(ce+nt+"="+encodeURIComponent(Ut))})}catch(He){throw K.push(ce+"type="+encodeURIComponent("_badmap")),He}}function Ic(N){this.l=N.Ub||null,this.j=N.eb||!1}m(Ic,$n),Ic.prototype.g=function(){return new kf(this.l,this.j)},Ic.prototype.i=function(N){return function(){return N}}({});function kf(N,K){pe.call(this),this.D=N,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(kf,pe),e=kf.prototype,e.open=function(N,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=K,this.readyState=1,or(this)},e.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const K={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(K.body=N),(this.D||a).fetch(new Request(this.A,K)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cr(this)),this.readyState=0},e.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hg(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hg(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}e.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var K=N.value?N.value:new Uint8Array(0);(K=this.v.decode(K,{stream:!N.done}))&&(this.response=this.responseText+=K)}N.done?cr(this):or(this),this.readyState==3&&Hg(this)}},e.Ra=function(N){this.g&&(this.response=this.responseText=N,cr(this))},e.Qa=function(N){this.g&&(this.response=N,cr(this))},e.ga=function(){this.g&&cr(this)};function cr(N){N.readyState=4,N.l=null,N.j=null,N.v=null,or(N)}e.setRequestHeader=function(N,K){this.u.append(N,K)},e.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],K=this.h.entries();for(var ne=K.next();!ne.done;)ne=ne.value,N.push(ne[0]+": "+ne[1]),ne=K.next();return N.join(`\r
`)};function or(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(kf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function Rc(N){let K="";return C(N,function(ne,ce){K+=ce,K+=":",K+=ne,K+=`\r
`}),K}function ve(N,K,ne){e:{for(ce in ne){var ce=!1;break e}ce=!0}ce||(ne=Rc(ne),typeof N=="string"?ne!=null&&encodeURIComponent(String(ne)):dn(N,K,ne))}function Ie(N){pe.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ie,pe);var Ze=/^https?$/i,on=["POST","PUT"];e=Ie.prototype,e.Ha=function(N){this.J=N},e.ea=function(N,K,ne,ce){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);K=K?K.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ri.g(),this.v=this.o?Kr(this.o):Kr(Ri),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(K,String(N),!0),this.B=!1}catch(nt){Jn(this,nt);return}if(N=ne||"",ne=new Map(this.headers),ce)if(Object.getPrototypeOf(ce)===Object.prototype)for(var He in ce)ne.set(He,ce[He]);else if(typeof ce.keys=="function"&&typeof ce.get=="function")for(const nt of ce.keys())ne.set(nt,ce.get(nt));else throw Error("Unknown input type for opt_headers: "+String(ce));ce=Array.from(ne.keys()).find(nt=>nt.toLowerCase()=="content-type"),He=a.FormData&&N instanceof a.FormData,!(0<=Array.prototype.indexOf.call(on,K,void 0))||ce||He||ne.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[nt,Ut]of ne)this.g.setRequestHeader(nt,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kr(this),this.u=!0,this.g.send(N),this.u=!1}catch(nt){Jn(this,nt)}};function Jn(N,K){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=K,N.m=5,br(N),pn(N)}function br(N){N.A||(N.A=!0,we(N,"complete"),we(N,"error"))}e.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,we(this,"complete"),we(this,"abort"),pn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),Ie.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Xr(this):this.bb())},e.bb=function(){Xr(this)};function Xr(N){if(N.h&&typeof s<"u"&&(!N.v[1]||jr(N)!=4||N.Z()!=2)){if(N.u&&jr(N)==4)Ge(N.Ea,0,N);else if(we(N,"readystatechange"),jr(N)==4){N.h=!1;try{const Ut=N.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break e;default:K=!1}var ne;if(!(ne=K)){var ce;if(ce=Ut===0){var He=String(N.D).match(lt)[1]||null;!He&&a.self&&a.self.location&&(He=a.self.location.protocol.slice(0,-1)),ce=!Ze.test(He?He.toLowerCase():"")}ne=ce}if(ne)we(N,"complete"),we(N,"success");else{N.m=6;try{var nt=2<jr(N)?N.g.statusText:""}catch{nt=""}N.l=nt+" ["+N.Z()+"]",br(N)}}finally{pn(N)}}}}function pn(N,K){if(N.g){kr(N);const ne=N.g,ce=N.v[0]?()=>{}:null;N.g=null,N.v=null,K||we(N,"ready");try{ne.onreadystatechange=ce}catch{}}}function kr(N){N.I&&(a.clearTimeout(N.I),N.I=null)}e.isActive=function(){return!!this.g};function jr(N){return N.g?N.g.readyState:0}e.Z=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(N){if(this.g){var K=this.g.responseText;return N&&K.indexOf(N)==0&&(K=K.substring(N.length)),bn(K)}};function Ro(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function uu(N){const K={};N=(N.g&&2<=jr(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let ce=0;ce<N.length;ce++){if(b(N[ce]))continue;var ne=M(N[ce]);const He=ne[0];if(ne=ne[1],typeof ne!="string")continue;ne=ne.trim();const nt=K[He]||[];K[He]=nt,nt.push(ne)}S(K,function(ce){return ce.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(N,K,ne){return ne&&ne.internalChannelParams&&ne.internalChannelParams[N]||K}function If(N){this.Aa=0,this.i=[],this.j=new gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ni("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ni("baseRetryDelayMs",5e3,N),this.cb=Ni("retryDelaySeedMs",1e4,N),this.Wa=Ni("forwardChannelMaxRetries",2,N),this.wa=Ni("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new Il(N&&N.concurrentRequestLimit),this.Da=new Sv,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=If.prototype,e.la=8,e.G=1,e.connect=function(N,K,ne,ce){Dr(0),this.W=N,this.H=K||{},ne&&ce!==void 0&&(this.H.OSID=ne,this.H.OAID=ce),this.F=this.X,this.I=qg(this,null,this.W),Nc(this)};function go(N){if(Um(N),N.G==3){var K=N.U++,ne=_t(N.I);if(dn(ne,"SID",N.K),dn(ne,"RID",K),dn(ne,"TYPE","terminate"),Rd(N,ne),K=new Xo(N,N.j,K),K.L=2,K.v=Qn(_t(ne)),ne=!1,a.navigator&&a.navigator.sendBeacon)try{ne=a.navigator.sendBeacon(K.v.toString(),"")}catch{}!ne&&a.Image&&(new Image().src=K.v,ne=!0),ne||(K.g=Fw(K.j,null),K.g.ea(K.v)),K.F=Date.now(),en(K)}Ow(N)}function Pl(N){N.g&&(Ol(N),N.g.cancel(),N.g=null)}function Um(N){Pl(N),N.u&&(a.clearTimeout(N.u),N.u=null),Jh(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&a.clearTimeout(N.s),N.s=null)}function Nc(N){if(!Qo(N.h)&&!N.s){N.s=!0;var K=N.Ga;te||q(),Z||(te(),Z=!0),re.add(K,N),N.B=0}}function Pw(N,K){return Qh(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=K.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=vr(d(N.Ga,N,K),Pc(N,N.B)),N.B++,!0)}e.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const He=new Xo(this,this.j,N);let nt=this.o;if(this.S&&(nt?(nt=I(nt),P(nt,this.S)):nt=this.S),this.m!==null||this.O||(He.H=nt,nt=null),this.P)e:{for(var K=0,ne=0;ne<this.i.length;ne++){t:{var ce=this.i[ne];if("__data__"in ce.map&&(ce=ce.map.__data__,typeof ce=="string")){ce=ce.length;break t}ce=void 0}if(ce===void 0)break;if(K+=ce,4096<K){K=ne;break e}if(K===4096||ne===this.i.length-1){K=ne+1;break e}}K=1e3}else K=1e3;K=Zo(this,He,K),ne=_t(this.I),dn(ne,"RID",N),dn(ne,"CVER",22),this.D&&dn(ne,"X-HTTP-Session-Id",this.D),Rd(this,ne),nt&&(this.O?K="headers="+encodeURIComponent(String(Rc(nt)))+"&"+K:this.m&&ve(ne,this.m,nt)),ue(this.h,He),this.Ua&&dn(ne,"TYPE","init"),this.P?(dn(ne,"$req",K),dn(ne,"SID","null"),He.T=!0,kl(He,ne,null)):kl(He,ne,K),this.G=2}}else this.G==3&&(N?ys(this,N):this.i.length==0||Qo(this.h)||ys(this))};function ys(N,K){var ne;K?ne=K.l:ne=N.U++;const ce=_t(N.I);dn(ce,"SID",N.K),dn(ce,"RID",ne),dn(ce,"AID",N.T),Rd(N,ce),N.m&&N.o&&ve(ce,N.m,N.o),ne=new Xo(N,N.j,ne,N.B+1),N.m===null&&(ne.H=N.o),K&&(N.i=K.D.concat(N.i)),K=Zo(N,ne,1e3),ne.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),ue(N.h,ne),kl(ne,ce,K)}function Rd(N,K){N.H&&C(N.H,function(ne,ce){dn(K,ce,ne)}),N.l&&Me({},function(ne,ce){dn(K,ce,ne)})}function Zo(N,K,ne){ne=Math.min(N.i.length,ne);var ce=N.l?d(N.l.Na,N.l,N):null;e:{var He=N.i;let nt=-1;for(;;){const Ut=["count="+ne];nt==-1?0<ne?(nt=He[0].g,Ut.push("ofs="+nt)):nt=0:Ut.push("ofs="+nt);let Wr=!0;for(let es=0;es<ne;es++){let xr=He[es].g;const Qr=He[es].map;if(xr-=nt,0>xr)nt=Math.max(0,He[es].g-100),Wr=!1;else try{zm(Qr,Ut,"req"+xr+"_")}catch{ce&&ce(Qr)}}if(Wr){ce=Ut.join("&");break e}}}return N=N.i.splice(0,ne),K.D=N,ce}function Vm(N){if(!N.g&&!N.u){N.Y=1;var K=N.Fa;te||q(),Z||(te(),Z=!0),re.add(K,N),N.v=0}}function Hm(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=vr(d(N.Fa,N),Pc(N,N.v)),N.v++,!0)}e.Fa=function(){if(this.u=null,qm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=vr(d(this.ab,this),N)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dr(10),Pl(this),qm(this))};function Ol(N){N.A!=null&&(a.clearTimeout(N.A),N.A=null)}function qm(N){N.g=new Xo(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var K=_t(N.qa);dn(K,"RID","rpc"),dn(K,"SID",N.K),dn(K,"AID",N.T),dn(K,"CI",N.F?"0":"1"),!N.F&&N.ja&&dn(K,"TO",N.ja),dn(K,"TYPE","xmlhttp"),Rd(N,K),N.m&&N.o&&ve(K,N.m,N.o),N.L&&(N.g.I=N.L);var ne=N.g;N=N.ia,ne.L=1,ne.v=Qn(_t(K)),ne.m=null,ne.P=!0,Yu(ne,N)}e.Za=function(){this.C!=null&&(this.C=null,Pl(this),Hm(this),Dr(19))};function Jh(N){N.C!=null&&(a.clearTimeout(N.C),N.C=null)}function oi(N,K){var ne=null;if(N.g==K){Jh(N),Ol(N),N.g=null;var ce=2}else if(Jo(N.h,K))ne=K.D,Ae(N.h,K),ce=1;else return;if(N.G!=0){if(K.o)if(ce==1){ne=K.m?K.m.length:0,K=Date.now()-K.F;var He=N.B;ce=hs(),we(ce,new no(ce,ne)),Nc(N)}else Vm(N);else if(He=K.s,He==3||He==0&&0<K.X||!(ce==1&&Pw(N,K)||ce==2&&Hm(N)))switch(ne&&0<ne.length&&(K=N.h,K.i=K.i.concat(ne)),He){case 1:Oc(N,5);break;case 4:Oc(N,10);break;case 3:Oc(N,6);break;default:Oc(N,2)}}}function Pc(N,K){let ne=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(ne*=2),ne*K}function Oc(N,K){if(N.j.info("Error code "+K),K==2){var ne=d(N.fb,N),ce=N.Xa;const He=!ce;ce=new Tt(ce||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ot(ce,"https"),Qn(ce),He?Vg(ce.toString(),ne):Nl(ce.toString(),ne)}else Dr(2);N.G=0,N.l&&N.l.sa(K),Ow(N),Um(N)}e.fb=function(N){N?(this.j.info("Successfully pinged google.com"),Dr(2)):(this.j.info("Failed to ping google.com"),Dr(1))};function Ow(N){if(N.G=0,N.ka=[],N.l){const K=ye(N.h);(K.length!=0||N.i.length!=0)&&(g(N.ka,K),g(N.ka,N.i),N.h.i.length=0,p(N.i),N.i.length=0),N.l.ra()}}function qg(N,K,ne){var ce=ne instanceof Tt?_t(ne):new Tt(ne);if(ce.g!="")K&&(ce.g=K+"."+ce.g),Wt(ce,ce.s);else{var He=a.location;ce=He.protocol,K=K?K+"."+He.hostname:He.hostname,He=+He.port;var nt=new Tt(null);ce&&Ot(nt,ce),K&&(nt.g=K),He&&Wt(nt,He),ne&&(nt.l=ne),ce=nt}return ne=N.D,K=N.ya,ne&&K&&dn(ce,ne,K),dn(ce,"VER",N.la),Rd(N,ce),ce}function Fw(N,K,ne){if(K&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return K=N.Ca&&!N.pa?new Ie(new Ic({eb:ne})):new Ie(N.pa),K.Ha(N.J),K}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Av(){}e=Av.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Wg(){}Wg.prototype.g=function(N,K){return new Xs(N,K)};function Xs(N,K){pe.call(this),this.g=new If(K),this.l=N,this.h=K&&K.messageUrlParams||null,N=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(N?N["X-WebChannel-Content-Type"]=K.messageContentType:N={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.va&&(N?N["X-WebChannel-Client-Profile"]=K.va:N={"X-WebChannel-Client-Profile":K.va}),this.g.S=N,(N=K&&K.Sb)&&!b(N)&&(this.g.m=N),this.v=K&&K.supportsCrossDomainXhr||!1,this.u=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!b(K)&&(this.g.D=K,N=this.h,N!==null&&K in N&&(N=this.h,K in N&&delete N[K])),this.j=new Rf(this)}m(Xs,pe),Xs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xs.prototype.close=function(){go(this.g)},Xs.prototype.o=function(N){var K=this.g;if(typeof N=="string"){var ne={};ne.__data__=N,N=ne}else this.u&&(ne={},ne.__data__=rn(N),N=ne);K.i.push(new Dd(K.Ya++,N)),K.G==3&&Nc(K)},Xs.prototype.N=function(){this.g.l=null,delete this.j,go(this.g),delete this.g,Xs.aa.N.call(this)};function Wm(N){mi.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var K=N.__sm__;if(K){e:{for(const ne in K){N=ne;break e}N=void 0}(this.i=N)&&(N=this.i,K=K!==null&&N in K?K[N]:void 0),this.data=K}else this.data=N}m(Wm,mi);function Nd(){Er.call(this),this.status=1}m(Nd,Er);function Rf(N){this.g=N}m(Rf,Av),Rf.prototype.ua=function(){we(this.g,"a")},Rf.prototype.ta=function(N){we(this.g,new Wm(N))},Rf.prototype.sa=function(N){we(this.g,new Nd)},Rf.prototype.ra=function(){we(this.g,"b")},Wg.prototype.createWebChannel=Wg.prototype.g,Xs.prototype.send=Xs.prototype.o,Xs.prototype.open=Xs.prototype.m,Xs.prototype.close=Xs.prototype.close,dxe=function(){return new Wg},fxe=function(){return hs()},cxe=Do,mU={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pr.NO_ERROR=0,pr.TIMEOUT=8,pr.HTTP_ERROR=6,E4=pr,ou.COMPLETE="complete",lxe=ou,Lr.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",pe.prototype.listen=pe.prototype.K,PA=Lr,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,uxe=Ie}).apply(typeof m3<"u"?m3:typeof self<"u"?self:typeof window<"u"?window:{});const _oe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}tc.UNAUTHENTICATED=new tc(null),tc.GOOGLE_CREDENTIALS=new tc("google-credentials-uid"),tc.FIRST_PARTY=new tc("first-party-uid"),tc.MOCK_USER=new tc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QT="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=new V5("@firebase/firestore");function CE(){return yx.logLevel}function sn(e,...t){if(yx.logLevel<=Cr.DEBUG){const n=t.map(DY);yx.debug(`Firestore (${QT}): ${e}`,...n)}}function hg(e,...t){if(yx.logLevel<=Cr.ERROR){const n=t.map(DY);yx.error(`Firestore (${QT}): ${e}`,...n)}}function mk(e,...t){if(yx.logLevel<=Cr.WARN){const n=t.map(DY);yx.warn(`Firestore (${QT}): ${e}`,...n)}}function DY(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(e="Unexpected state"){const t=`FIRESTORE (${QT}) INTERNAL ASSERTION FAILED: `+e;throw hg(t),new Error(t)}function pi(e,t){e||Un()}function Xn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends Cm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xtt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wtt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(tc.UNAUTHENTICATED))}shutdown(){}}class _tt{constructor(t){this.t=t,this.currentUser=tc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){pi(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new X0;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new X0,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new X0)}},0),s()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pi(typeof r.accessToken=="string"),new xtt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return pi(t===null||typeof t=="string"),new tc(t)}}class Ett{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=tc.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ttt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ett(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(tc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ctt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Stt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){pi(this.o===void 0);const r=o=>{o.error!=null&&sn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,sn("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(pi(typeof n.token=="string"),this.R=n.token,new Ctt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Att(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Att(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length))}return r}}function Pr(e,t){return e<t?-1:e>t?1:0}function D2(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{static now(){return Us.fromMillis(Date.now())}static fromDate(t){return Us.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Us(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Jt(vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Jt(vt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Jt(vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Jt(vt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Pr(this.nanoseconds,t.nanoseconds):Pr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{static fromTimestamp(t){return new Kn(t)}static min(){return new Kn(new Us(0,0))}static max(){return new Kn(new Us(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t,n,r){n===void 0?n=0:n>t.length&&Un(),r===void 0?r=t.length-n:r>t.length-n&&Un(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Cp.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Cp?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const o=Cp.compareSegments(t.get(i),n.get(i));if(o!==0)return o}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Cp.isNumericId(t),i=Cp.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Cp.extractNumericId(t).compare(Cp.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return u1.fromString(t.substring(4,t.length-2))}}class Zi extends Cp{construct(t,n,r){return new Zi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Jt(vt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Zi(n)}static emptyPath(){return new Zi([])}}const Dtt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Va extends Cp{construct(t,n,r){return new Va(t,n,r)}static isValidIdentifier(t){return Dtt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Va.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Va(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Jt(vt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Jt(vt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Jt(vt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Jt(vt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Va(n)}static emptyPath(){return new Va([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t){this.path=t}static fromPath(t){return new kn(Zi.fromString(t))}static fromName(t){return new kn(Zi.fromString(t).popFirst(5))}static empty(){return new kn(Zi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Zi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Zi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new kn(new Zi(t.slice()))}}function ktt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Kn.fromTimestamp(r===1e9?new Us(n+1,0):new Us(n,r));return new w1(i,kn.empty(),t)}function Itt(e){return new w1(e.readTime,e.key,-1)}class w1{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new w1(Kn.min(),kn.empty(),-1)}static max(){return new w1(Kn.max(),kn.empty(),-1)}}function Rtt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=kn.comparator(e.documentKey,t.documentKey),n!==0?n:Pr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ntt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ptt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JT(e){if(e.code!==vt.FAILED_PRECONDITION||e.message!==Ntt)throw e;sn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new xt((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof xt?n:xt.resolve(n)}catch(n){return xt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):xt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):xt.reject(n)}static resolve(t){return new xt((n,r)=>{n(t)})}static reject(t){return new xt((n,r)=>{r(t)})}static waitFor(t){return new xt((n,r)=>{let i=0,o=0,s=!1;t.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(t){let n=xt.resolve(!1);for(const r of t)n=n.next(i=>i?xt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(t,n){return new xt((r,i)=>{const o=t.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(t[l]).next(c=>{s[l]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(t,n){return new xt((r,i)=>{const o=()=>{t()===!0?n().next(()=>{o()},i):r()};o()})}}function Ott(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ZT(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}W5.oe=-1;function G5(e){return e==null}function x6(e){return e===0&&1/e==-1/0}function Ftt(e){return typeof e=="number"&&Number.isInteger(e)&&!x6(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mtt(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Eoe(t)),t=$tt(e.get(n),t);return Eoe(t)}function $tt(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Eoe(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Toe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sv(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pxe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,n){this.comparator=t,this.root=n||Ba.EMPTY}insert(t,n){return new Ao(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ba.BLACK,null,null))}remove(t){return new Ao(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ba.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new g3(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new g3(this.root,t,this.comparator,!1)}getReverseIterator(){return new g3(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new g3(this.root,t,this.comparator,!0)}}class g3{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ba{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??Ba.RED,this.left=i??Ba.EMPTY,this.right=o??Ba.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,o){return new Ba(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ba.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ba.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ba.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ba.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Un();const t=this.left.check();if(t!==this.right.check())throw Un();return t+(this.isRed()?0:1)}}Ba.EMPTY=null,Ba.RED=!0,Ba.BLACK=!1;Ba.EMPTY=new class{constructor(){this.size=0}get key(){throw Un()}get value(){throw Un()}get color(){throw Un()}get left(){throw Un()}get right(){throw Un()}copy(t,n,r,i,o){return this}insert(t,n,r){return new Ba(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(t){this.comparator=t,this.data=new Ao(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Coe(this.data.getIterator())}getIteratorFrom(t){return new Coe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Vs)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Vs(this.comparator);return n.data=t,n}}class Coe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(t){this.fields=t,t.sort(Va.comparator)}static empty(){return new of([])}unionWith(t){let n=new Vs(Va.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new of(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return D2(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mxe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mxe("Invalid base64 string: "+o):o}}(t);return new Za(n)}static fromUint8Array(t){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new Za(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Pr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Za.EMPTY_BYTE_STRING=new Za("");const Ltt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _1(e){if(pi(!!e),typeof e=="string"){let t=0;const n=Ltt.exec(e);if(pi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:as(e.seconds),nanos:as(e.nanos)}}function as(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function E1(e){return typeof e=="string"?Za.fromBase64String(e):Za.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Y5(e){const t=e.mapValue.fields.__previous_value__;return kY(t)?Y5(t):t}function gk(e){const t=_1(e.mapValue.fields.__local_write_time__.timestampValue);return new Us(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Btt{constructor(t,n,r,i,o,s,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class yk{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new yk("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof yk&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function T1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kY(e)?4:ztt(e)?9007199254740991:jtt(e)?10:11:Un()}function am(e,t){if(e===t)return!0;const n=T1(e);if(n!==T1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return gk(e).isEqual(gk(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=_1(i.timestampValue),a=_1(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,o){return E1(i.bytesValue).isEqual(E1(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,o){return as(i.geoPointValue.latitude)===as(o.geoPointValue.latitude)&&as(i.geoPointValue.longitude)===as(o.geoPointValue.longitude)}(e,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return as(i.integerValue)===as(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=as(i.doubleValue),a=as(o.doubleValue);return s===a?x6(s)===x6(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return D2(e.arrayValue.values||[],t.arrayValue.values||[],am);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Toe(s)!==Toe(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!am(s[u],a[u])))return!1;return!0}(e,t);default:return Un()}}function vk(e,t){return(e.values||[]).find(n=>am(n,t))!==void 0}function k2(e,t){if(e===t)return 0;const n=T1(e),r=T1(t);if(n!==r)return Pr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pr(e.booleanValue,t.booleanValue);case 2:return function(o,s){const a=as(o.integerValue||o.doubleValue),u=as(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Soe(e.timestampValue,t.timestampValue);case 4:return Soe(gk(e),gk(t));case 5:return Pr(e.stringValue,t.stringValue);case 6:return function(o,s){const a=E1(o),u=E1(s);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Pr(a[l],u[l]);if(c!==0)return c}return Pr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){const a=Pr(as(o.latitude),as(s.latitude));return a!==0?a:Pr(as(o.longitude),as(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Aoe(e.arrayValue,t.arrayValue);case 10:return function(o,s){var a,u,l,c;const f=o.fields||{},d=s.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,m=(u=d.value)===null||u===void 0?void 0:u.arrayValue,p=Pr(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0);return p!==0?p:Aoe(h,m)}(e.mapValue,t.mapValue);case 11:return function(o,s){if(o===y3.mapValue&&s===y3.mapValue)return 0;if(o===y3.mapValue)return 1;if(s===y3.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Pr(u[f],c[f]);if(d!==0)return d;const h=k2(a[u[f]],l[c[f]]);if(h!==0)return h}return Pr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Un()}}function Soe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Pr(e,t);const n=_1(e),r=_1(t),i=Pr(n.seconds,r.seconds);return i!==0?i:Pr(n.nanos,r.nanos)}function Aoe(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=k2(n[i],r[i]);if(o)return o}return Pr(n.length,r.length)}function I2(e){return gU(e)}function gU(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=_1(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return E1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return kn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=gU(o);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${gU(n.fields[s])}`;return i+"}"}(e.mapValue):Un()}function T4(e){switch(T1(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Y5(e);return t?16+T4(t):16;case 5:return 2*e.stringValue.length;case 6:return E1(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+T4(o),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return sv(r.fields,(o,s)=>{i+=o.length+T4(s)}),i}(e.mapValue);default:throw Un()}}function Doe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function yU(e){return!!e&&"integerValue"in e}function IY(e){return!!e&&"arrayValue"in e}function koe(e){return!!e&&"nullValue"in e}function Ioe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function C4(e){return!!e&&"mapValue"in e}function jtt(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function PD(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sv(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=PD(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=PD(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ztt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(t){this.value=t}static empty(){return new sc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!C4(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=PD(n)}setAll(t){let n=Va.emptyPath(),r={},i=[];t.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=PD(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(t){const n=this.field(t.popLast());C4(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return am(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];C4(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){sv(n,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new sc(PD(this.value))}}function gxe(e){const t=[];return sv(e.fields,(n,r)=>{const i=new Va([n]);if(C4(r)){const o=gxe(r.mapValue).fields;if(o.length===0)t.push(i);else for(const s of o)t.push(i.child(s))}else t.push(i)}),new of(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(t,n,r,i,o,s,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new Du(t,0,Kn.min(),Kn.min(),Kn.min(),sc.empty(),0)}static newFoundDocument(t,n,r,i){return new Du(t,1,n,Kn.min(),r,i,0)}static newNoDocument(t,n){return new Du(t,2,n,Kn.min(),Kn.min(),sc.empty(),0)}static newUnknownDocument(t,n){return new Du(t,3,n,Kn.min(),Kn.min(),sc.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Kn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Du&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Du(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w6=class{constructor(t,n){this.position=t,this.inclusive=n}};function Roe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(o.field.isKeyField()?r=kn.comparator(kn.fromName(s.referenceValue),n.key):r=k2(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Noe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!am(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(t,n="asc"){this.field=t,this.dir=n}}function Utt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yxe=class{};class Ts extends yxe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Htt(t,n,r):n==="array-contains"?new Gtt(t,r):n==="in"?new Ytt(t,r):n==="not-in"?new Ktt(t,r):n==="array-contains-any"?new Xtt(t,r):new Ts(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new qtt(t,r):new Wtt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(k2(n,this.value)):n!==null&&T1(this.value)===T1(n)&&this.matchesComparison(k2(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dh extends yxe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Dh(t,n)}matches(t){return vxe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vxe(e){return e.op==="and"}function bxe(e){return Vtt(e)&&vxe(e)}function Vtt(e){for(const t of e.filters)if(t instanceof Dh)return!1;return!0}function vU(e){if(e instanceof Ts)return e.field.canonicalString()+e.op.toString()+I2(e.value);if(bxe(e))return e.filters.map(t=>vU(t)).join(",");{const t=e.filters.map(n=>vU(n)).join(",");return`${e.op}(${t})`}}function xxe(e,t){return e instanceof Ts?function(r,i){return i instanceof Ts&&r.op===i.op&&r.field.isEqual(i.field)&&am(r.value,i.value)}(e,t):e instanceof Dh?function(r,i){return i instanceof Dh&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&xxe(s,i.filters[a]),!0):!1}(e,t):void Un()}function wxe(e){return e instanceof Ts?function(n){return`${n.field.canonicalString()} ${n.op} ${I2(n.value)}`}(e):e instanceof Dh?function(n){return n.op.toString()+" {"+n.getFilters().map(wxe).join(" ,")+"}"}(e):"Filter"}class Htt extends Ts{constructor(t,n,r){super(t,n,r),this.key=kn.fromName(r.referenceValue)}matches(t){const n=kn.comparator(t.key,this.key);return this.matchesComparison(n)}}class qtt extends Ts{constructor(t,n){super(t,"in",n),this.keys=_xe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Wtt extends Ts{constructor(t,n){super(t,"not-in",n),this.keys=_xe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function _xe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>kn.fromName(r.referenceValue))}class Gtt extends Ts{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return IY(n)&&vk(n.arrayValue,this.value)}}class Ytt extends Ts{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&vk(this.value.arrayValue,n)}}class Ktt extends Ts{constructor(t,n){super(t,"not-in",n)}matches(t){if(vk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!vk(this.value.arrayValue,n)}}class Xtt extends Ts{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!IY(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vk(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qtt{constructor(t,n=null,r=[],i=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function Poe(e,t=null,n=[],r=[],i=null,o=null,s=null){return new Qtt(e,t,n,r,i,o,s)}function RY(e){const t=Xn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>vU(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),G5(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>I2(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>I2(r)).join(",")),t.ue=n}return t.ue}function NY(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Utt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!xxe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Noe(e.startAt,t.startAt)&&Noe(e.endAt,t.endAt)}function bU(e){return kn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Jtt(e,t,n,r,i,o,s,a){return new eC(e,t,n,r,i,o,s,a)}function PY(e){return new eC(e)}function Ooe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Exe(e){return e.collectionGroup!==null}function OD(e){const t=Xn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),n.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Vs(Va.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.ce.push(new bk(o,r))}),n.has(Va.keyField().canonicalString())||t.ce.push(new bk(Va.keyField(),r))}return t.ce}function Vp(e){const t=Xn(e);return t.le||(t.le=Ztt(t,OD(e))),t.le}function Ztt(e,t){if(e.limitType==="F")return Poe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new bk(i.field,o)});const n=e.endAt?new w6(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new w6(e.startAt.position,e.startAt.inclusive):null;return Poe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xU(e,t){const n=e.filters.concat([t]);return new eC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wU(e,t,n){return new eC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function K5(e,t){return NY(Vp(e),Vp(t))&&e.limitType===t.limitType}function Txe(e){return`${RY(Vp(e))}|lt:${e.limitType}`}function SE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wxe(i)).join(", ")}]`),G5(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>I2(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>I2(i)).join(",")),`Target(${r})`}(Vp(e))}; limitType=${e.limitType})`}function X5(e,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):kn.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(e,t)&&function(r,i){for(const o of OD(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(s,a,u){const l=Roe(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,OD(r),i)||r.endAt&&!function(s,a,u){const l=Roe(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,OD(r),i))}(e,t)}function ent(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Cxe(e){return(t,n)=>{let r=!1;for(const i of OD(e)){const o=tnt(i,t,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function tnt(e,t,n){const r=e.field.isKeyField()?kn.comparator(t.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?k2(u,l):Un()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Un()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){sv(this.inner,(n,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return pxe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nnt=new Ao(kn.comparator);function pg(){return nnt}const Sxe=new Ao(kn.comparator);function OA(...e){let t=Sxe;for(const n of e)t=t.insert(n.key,n);return t}function Axe(e){let t=Sxe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Kb(){return FD()}function Dxe(){return FD()}function FD(){return new sw(e=>e.toString(),(e,t)=>e.isEqual(t))}const rnt=new Ao(kn.comparator),int=new Vs(kn.comparator);function Sr(...e){let t=int;for(const n of e)t=t.add(n);return t}const ont=new Vs(Pr);function snt(){return ont}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OY(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:x6(t)?"-0":t}}function kxe(e){return{integerValue:""+e}}function ant(e,t){return Ftt(t)?kxe(t):OY(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(){this._=void 0}}function unt(e,t,n){return e instanceof xk?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kY(o)&&(o=Y5(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,t):e instanceof wk?Rxe(e,t):e instanceof _k?Nxe(e,t):function(i,o){const s=Ixe(i,o),a=Foe(s)+Foe(i.Pe);return yU(s)&&yU(i.Pe)?kxe(a):OY(i.serializer,a)}(e,t)}function lnt(e,t,n){return e instanceof wk?Rxe(e,t):e instanceof _k?Nxe(e,t):n}function Ixe(e,t){return e instanceof _6?function(r){return yU(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class xk extends Q5{}class wk extends Q5{constructor(t){super(),this.elements=t}}function Rxe(e,t){const n=Pxe(t);for(const r of e.elements)n.some(i=>am(i,r))||n.push(r);return{arrayValue:{values:n}}}class _k extends Q5{constructor(t){super(),this.elements=t}}function Nxe(e,t){let n=Pxe(t);for(const r of e.elements)n=n.filter(i=>!am(i,r));return{arrayValue:{values:n}}}class _6 extends Q5{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Foe(e){return as(e.integerValue||e.doubleValue)}function Pxe(e){return IY(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cnt{constructor(t,n){this.field=t,this.transform=n}}function fnt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof wk&&i instanceof wk||r instanceof _k&&i instanceof _k?D2(r.elements,i.elements,am):r instanceof _6&&i instanceof _6?am(r.Pe,i.Pe):r instanceof xk&&i instanceof xk}(e.transform,t.transform)}class dnt{constructor(t,n){this.version=t,this.transformResults=n}}class df{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new df}static exists(t){return new df(void 0,t)}static updateTime(t){return new df(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function S4(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class J5{}function Oxe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new FY(e.key,df.none()):new MI(e.key,e.data,df.none());{const n=e.data,r=sc.empty();let i=new Vs(Va.comparator);for(let o of t.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new av(e.key,r,new of(i.toArray()),df.none())}}function hnt(e,t,n){e instanceof MI?function(i,o,s){const a=i.value.clone(),u=$oe(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof av?function(i,o,s){if(!S4(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=$oe(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Fxe(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(e,t,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function MD(e,t,n,r){return e instanceof MI?function(o,s,a,u){if(!S4(o.precondition,s))return a;const l=o.value.clone(),c=Loe(o.fieldTransforms,u,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof av?function(o,s,a,u){if(!S4(o.precondition,s))return a;const l=Loe(o.fieldTransforms,u,s),c=s.data;return c.setAll(Fxe(o)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(o,s,a){return S4(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,n)}function pnt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),o=Ixe(r.transform,i||null);o!=null&&(n===null&&(n=sc.empty()),n.set(r.field,o))}return n||null}function Moe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&D2(r,i,(o,s)=>fnt(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class MI extends J5{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class av extends J5{constructor(t,n,r,i,o=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Fxe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function $oe(e,t,n){const r=new Map;pi(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,lnt(s,a,n[i]))}return r}function Loe(e,t,n){const r=new Map;for(const i of e){const o=i.transform,s=n.data.field(i.field);r.set(i.field,unt(o,s,t))}return r}class FY extends J5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mnt extends J5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gnt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&hnt(o,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=MD(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=MD(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Dxe();return this.mutations.forEach(i=>{const o=t.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=Oxe(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Kn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Sr())}isEqual(t){return this.batchId===t.batchId&&D2(this.mutations,t.mutations,(n,r)=>Moe(n,r))&&D2(this.baseMutations,t.baseMutations,(n,r)=>Moe(n,r))}}class MY{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){pi(t.mutations.length===r.length);let i=function(){return rnt}();const o=t.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new MY(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ynt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vnt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xs,Hr;function bnt(e){switch(e){default:return Un();case vt.CANCELLED:case vt.UNKNOWN:case vt.DEADLINE_EXCEEDED:case vt.RESOURCE_EXHAUSTED:case vt.INTERNAL:case vt.UNAVAILABLE:case vt.UNAUTHENTICATED:return!1;case vt.INVALID_ARGUMENT:case vt.NOT_FOUND:case vt.ALREADY_EXISTS:case vt.PERMISSION_DENIED:case vt.FAILED_PRECONDITION:case vt.ABORTED:case vt.OUT_OF_RANGE:case vt.UNIMPLEMENTED:case vt.DATA_LOSS:return!0}}function Mxe(e){if(e===void 0)return hg("GRPC error has no .code"),vt.UNKNOWN;switch(e){case xs.OK:return vt.OK;case xs.CANCELLED:return vt.CANCELLED;case xs.UNKNOWN:return vt.UNKNOWN;case xs.DEADLINE_EXCEEDED:return vt.DEADLINE_EXCEEDED;case xs.RESOURCE_EXHAUSTED:return vt.RESOURCE_EXHAUSTED;case xs.INTERNAL:return vt.INTERNAL;case xs.UNAVAILABLE:return vt.UNAVAILABLE;case xs.UNAUTHENTICATED:return vt.UNAUTHENTICATED;case xs.INVALID_ARGUMENT:return vt.INVALID_ARGUMENT;case xs.NOT_FOUND:return vt.NOT_FOUND;case xs.ALREADY_EXISTS:return vt.ALREADY_EXISTS;case xs.PERMISSION_DENIED:return vt.PERMISSION_DENIED;case xs.FAILED_PRECONDITION:return vt.FAILED_PRECONDITION;case xs.ABORTED:return vt.ABORTED;case xs.OUT_OF_RANGE:return vt.OUT_OF_RANGE;case xs.UNIMPLEMENTED:return vt.UNIMPLEMENTED;case xs.DATA_LOSS:return vt.DATA_LOSS;default:return Un()}}(Hr=xs||(xs={}))[Hr.OK=0]="OK",Hr[Hr.CANCELLED=1]="CANCELLED",Hr[Hr.UNKNOWN=2]="UNKNOWN",Hr[Hr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hr[Hr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hr[Hr.NOT_FOUND=5]="NOT_FOUND",Hr[Hr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hr[Hr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hr[Hr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hr[Hr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hr[Hr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hr[Hr.ABORTED=10]="ABORTED",Hr[Hr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hr[Hr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hr[Hr.INTERNAL=13]="INTERNAL",Hr[Hr.UNAVAILABLE=14]="UNAVAILABLE",Hr[Hr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xnt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wnt=new u1([4294967295,4294967295],0);function Boe(e){const t=xnt().encode(e),n=new axe;return n.update(t),new Uint8Array(n.digest())}function joe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new u1([n,r],0),new u1([i,o],0)]}class $Y{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new FA(`Invalid padding: ${n}`);if(r<0)throw new FA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new FA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new FA(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=u1.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(u1.fromNumber(r)));return i.compare(wnt)===1&&(i=new u1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Boe(t),[r,i]=joe(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new $Y(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(t){if(this.Te===0)return;const n=Boe(t),[r,i]=joe(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Ae(s)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class FA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,$I.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Z5(Kn.min(),i,new Ao(Pr),pg(),Sr())}}class $I{constructor(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new $I(r,n,Sr(),Sr(),Sr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $xe{constructor(t,n){this.targetId=t,this.me=n}}class Lxe{constructor(t,n,r=Za.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zoe{constructor(){this.fe=0,this.ge=Uoe(),this.pe=Za.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Sr(),n=Sr(),r=Sr();return this.ge.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Un()}}),new $I(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Uoe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,pi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _nt{constructor(t){this.Be=t,this.Le=new Map,this.ke=pg(),this.qe=v3(),this.Qe=v3(),this.Ke=new Ao(Pr)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:Un()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const o=i.target;if(bU(o))if(r===0){const s=new kn(o.path);this.We(n,s,Du.newNoDocument(s,Kn.min()))}else pi(r===1);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(t),u=a?this.et(a,t,s):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=E1(r).toUint8Array()}catch(u){if(u instanceof mxe)return mk("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new $Y(s,i,o)}catch(u){return mk(u instanceof FA?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.We(n,o,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&bU(a.target)){const u=new kn(a.target.path);this.st(u).has(s)||this.ot(s,u)||this.We(s,u,Du.newNoDocument(u,t))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=Sr();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));const i=new Z5(t,n,this.Ke,this.ke,r);return this.ke=pg(),this.qe=v3(),this.Qe=v3(),this.Ke=new Ao(Pr),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new zoe,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new Vs(Pr),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Vs(Pr),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||sn("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new zoe),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function v3(){return new Ao(kn.comparator)}function Uoe(){return new Ao(kn.comparator)}const Ent={asc:"ASCENDING",desc:"DESCENDING"},Tnt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cnt={and:"AND",or:"OR"};class Snt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function _U(e,t){return e.useProto3Json||G5(t)?t:{value:t}}function E6(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Bxe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ant(e,t){return E6(e,t.toTimestamp())}function Hp(e){return pi(!!e),Kn.fromTimestamp(function(n){const r=_1(n);return new Us(r.seconds,r.nanos)}(e))}function LY(e,t){return EU(e,t).canonicalString()}function EU(e,t){const n=function(i){return new Zi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function jxe(e){const t=Zi.fromString(e);return pi(qxe(t)),t}function TU(e,t){return LY(e.databaseId,t.path)}function jB(e,t){const n=jxe(t);if(n.get(1)!==e.databaseId.projectId)throw new Jt(vt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Jt(vt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new kn(Uxe(n))}function zxe(e,t){return LY(e.databaseId,t)}function Dnt(e){const t=jxe(e);return t.length===4?Zi.emptyPath():Uxe(t)}function CU(e){return new Zi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uxe(e){return pi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Voe(e,t,n){return{name:TU(e,t),fields:n.value.mapValue.fields}}function knt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Un()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(pi(c===void 0||typeof c=="string"),Za.fromBase64String(c||"")):(pi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Za.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(l){const c=l.code===void 0?vt.UNKNOWN:Mxe(l.code);return new Jt(c,l.message||"")}(s);n=new Lxe(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=jB(e,r.document.name),o=Hp(r.document.updateTime),s=r.document.createTime?Hp(r.document.createTime):Kn.min(),a=new sc({mapValue:{fields:r.document.fields}}),u=Du.newFoundDocument(i,o,s,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new A4(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=jB(e,r.document),o=r.readTime?Hp(r.readTime):Kn.min(),s=Du.newNoDocument(i,o),a=r.removedTargetIds||[];n=new A4([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=jB(e,r.document),o=r.removedTargetIds||[];n=new A4([],o,i,null)}else{if(!("filter"in t))return Un();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new vnt(i,o),a=r.targetId;n=new $xe(a,s)}}return n}function Int(e,t){let n;if(t instanceof MI)n={update:Voe(e,t.key,t.value)};else if(t instanceof FY)n={delete:TU(e,t.key)};else if(t instanceof av)n={update:Voe(e,t.key,t.data),updateMask:Bnt(t.fieldMask)};else{if(!(t instanceof mnt))return Un();n={verify:TU(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof xk)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wk)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _k)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _6)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Un()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Ant(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Un()}(e,t.precondition)),n}function Rnt(e,t){return e&&e.length>0?(pi(t!==void 0),e.map(n=>function(i,o){let s=i.updateTime?Hp(i.updateTime):Hp(o);return s.isEqual(Kn.min())&&(s=Hp(o)),new dnt(s,i.transformResults||[])}(n,t))):[]}function Nnt(e,t){return{documents:[zxe(e,t.path)]}}function Pnt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zxe(e,i);const o=function(l){if(l.length!==0)return Hxe(Dh.create(l,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:AE(d.field),direction:Mnt(d.dir)}}(c))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=_U(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function Ont(e){let t=Dnt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let o=[];n.where&&(o=function(f){const d=Vxe(f);return d instanceof Dh&&bxe(d)?d.getFilters():[d]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(d=>function(m){return new bk(DE(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,G5(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new w6(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new w6(h,d)}(n.endAt)),Jtt(t,i,s,o,a,"F",u,l)}function Fnt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Un()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Vxe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=DE(n.unaryFilter.field);return Ts.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=DE(n.unaryFilter.field);return Ts.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=DE(n.unaryFilter.field);return Ts.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=DE(n.unaryFilter.field);return Ts.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Un()}}(e):e.fieldFilter!==void 0?function(n){return Ts.create(DE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Un()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Dh.create(n.compositeFilter.filters.map(r=>Vxe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Un()}}(n.compositeFilter.op))}(e):Un()}function Mnt(e){return Ent[e]}function $nt(e){return Tnt[e]}function Lnt(e){return Cnt[e]}function AE(e){return{fieldPath:e.canonicalString()}}function DE(e){return Va.fromServerFormat(e.fieldPath)}function Hxe(e){return e instanceof Ts?function(n){if(n.op==="=="){if(Ioe(n.value))return{unaryFilter:{field:AE(n.field),op:"IS_NAN"}};if(koe(n.value))return{unaryFilter:{field:AE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ioe(n.value))return{unaryFilter:{field:AE(n.field),op:"IS_NOT_NAN"}};if(koe(n.value))return{unaryFilter:{field:AE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:AE(n.field),op:$nt(n.op),value:n.value}}}(e):e instanceof Dh?function(n){const r=n.getFilters().map(i=>Hxe(i));return r.length===1?r[0]:{compositeFilter:{op:Lnt(n.op),filters:r}}}(e):Un()}function Bnt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function qxe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(t,n,r,i,o=Kn.min(),s=Kn.min(),a=Za.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Yy(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Yy(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jnt{constructor(t){this.ht=t}}function znt(e){const t=Ont({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?wU(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Unt{constructor(){this.ln=new Vnt}addToCollectionParentIndex(t,n){return this.ln.add(n),xt.resolve()}getCollectionParents(t,n){return xt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return xt.resolve()}deleteFieldIndex(t,n){return xt.resolve()}deleteAllFieldIndexes(t){return xt.resolve()}createTargetIndexes(t,n){return xt.resolve()}getDocumentsMatchingTarget(t,n){return xt.resolve(null)}getIndexType(t,n){return xt.resolve(0)}getFieldIndexes(t,n){return xt.resolve([])}getNextCollectionGroupToUpdate(t){return xt.resolve(null)}getMinOffset(t,n){return xt.resolve(w1.min())}getMinOffsetFromCollectionGroup(t,n){return xt.resolve(w1.min())}updateCollectionGroup(t,n,r){return xt.resolve()}updateIndexEntries(t,n){return xt.resolve()}}class Vnt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Vs(Zi.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Vs(Zi.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hoe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class nc{static withCacheSize(t){return new nc(t,nc.DEFAULT_COLLECTION_PERCENTILE,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nc.DEFAULT_COLLECTION_PERCENTILE=10,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nc.DEFAULT=new nc(41943040,nc.DEFAULT_COLLECTION_PERCENTILE,nc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nc.DISABLED=new nc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new R2(0)}static Qn(){return new R2(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qoe([e,t],[n,r]){const i=Pr(e,n);return i===0?Pr(t,r):i}class Hnt{constructor(t){this.Gn=t,this.buffer=new Vs(qoe),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qoe(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qnt{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){sn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ZT(n)?sn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await JT(n)}await this.Yn(3e5)})}}class Wnt{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return xt.resolve(W5.oe);const r=new Hnt(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(sn("LruGarbageCollector","Garbage collection skipped; disabled"),xt.resolve(Hoe)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hoe):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,o,s,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(sn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),CE()<=Cr.DEBUG&&sn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),xt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function Gnt(e,t){return new Wnt(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ynt{constructor(){this.changes=new sw(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Du.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Knt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xnt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&MD(r.mutation,i,of.empty(),Us.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Sr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Sr()){const i=Kb();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(o=>{let s=OA();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(t,n){const r=Kb();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Sr()))}populateOverlays(t,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(t,n,r,i){let o=pg();const s=FD(),a=function(){return FD()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof av)?o=o.insert(l.key,l):c!==void 0?(s.set(l.key,c.mutation.getFieldMask()),MD(c.mutation,l,c.mutation.getFieldMask(),Us.now())):s.set(l.key,of.empty())}),this.recalculateAndSaveOverlays(t,o).next(u=>(u.forEach((l,c)=>s.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Knt(c,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=FD();let i=new Ao((s,a)=>s-a),o=Sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||of.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Sr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=Dxe();c.forEach(d=>{if(!o.has(d)){const h=Oxe(n.get(d),r.get(d));h!==null&&f.set(d,h),o=o.add(d)}}),s.push(this.documentOverlayCache.saveOverlays(t,l,f))}return xt.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(s){return kn.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Exe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-o.size):xt.resolve(Kb());let a=-1,u=o;return s.next(l=>xt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(c)?xt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,o)).next(()=>this.computeViews(t,u,l,Sr())).next(c=>({batchId:a,changes:Axe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new kn(n)).next(r=>{let i=OA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const o=n.collectionGroup;let s=OA();return this.indexManager.getCollectionParents(t,o).next(a=>xt.forEach(a,u=>{const l=function(f,d){return new eC(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{s=s.insert(f,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,Du.newInvalidDocument(c)))});let a=OA();return s.forEach((u,l)=>{const c=o.get(u);c!==void 0&&MD(c.mutation,l,of.empty(),Us.now()),X5(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qnt{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return xt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Hp(i.createTime)}}(n)),xt.resolve()}getNamedQuery(t,n){return xt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:znt(i.bundledQuery),readTime:Hp(i.readTime)}}(n)),xt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jnt{constructor(){this.overlays=new Ao(kn.comparator),this.dr=new Map}getOverlay(t,n){return xt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Kb();return xt.forEach(n,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,o)=>{this.Tt(t,n,o)}),xt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),xt.resolve()}getOverlaysForCollection(t,n,r){const i=Kb(),o=n.length+1,s=new kn(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return xt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let o=new Ao((l,c)=>l-c);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=o.get(l.largestBatchId);c===null&&(c=Kb(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Kb(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return xt.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ynt(n,r));let o=this.dr.get(n);o===void 0&&(o=Sr(),this.dr.set(n,o)),this.dr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Znt{constructor(){this.sessionToken=Za.EMPTY_BYTE_STRING}getSessionToken(t){return xt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,xt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY{constructor(){this.Er=new Vs(ua.Ar),this.Rr=new Vs(ua.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new ua(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new ua(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new kn(new Zi([])),r=new ua(n,t),i=new ua(n,t+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new kn(new Zi([])),r=new ua(n,t),i=new ua(n,t+1);let o=Sr();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(t){const n=new ua(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ua{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return kn.comparator(t.key,n.key)||Pr(t.br,n.br)}static Vr(t,n){return Pr(t.br,n.br)||kn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ert{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Vs(ua.Ar)}checkEmpty(t){return xt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new gnt(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.vr=this.vr.add(new ua(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return xt.resolve(s)}lookupMutationBatch(t,n){return xt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),o=i<0?0:i;return xt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return xt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return xt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ua(n,0),i=new ua(n,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const a=this.Cr(s.br);o.push(a)}),xt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Vs(Pr);return n.forEach(i=>{const o=new ua(i,0),s=new ua(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),xt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let o=r;kn.isDocumentKey(o)||(o=o.child(""));const s=new ua(new kn(o),0);let a=new Vs(Pr);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},s),xt.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){pi(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return xt.forEach(n.mutations,i=>{const o=new ua(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new ua(n,0),i=this.vr.firstAfterOrEqual(r);return xt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,xt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class trt{constructor(t){this.Nr=t,this.docs=function(){return new Ao(kn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return xt.resolve(r?r.document.mutableCopy():Du.newInvalidDocument(n))}getEntries(t,n){let r=pg();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Du.newInvalidDocument(i))}),xt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let o=pg();const s=n.path,a=new kn(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Rtt(Itt(c),r)<=0||(i.has(c.key)||X5(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return xt.resolve(o)}getAllFromCollectionGroup(t,n,r,i){Un()}Br(t,n){return xt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new nrt(this)}getSize(t){return xt.resolve(this.size)}}class nrt extends Ynt{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),xt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rrt{constructor(t){this.persistence=t,this.Lr=new sw(n=>RY(n),NY),this.lastRemoteSnapshotVersion=Kn.min(),this.highestTargetId=0,this.kr=0,this.qr=new BY,this.targetCount=0,this.Qr=R2.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),xt.resolve()}getLastRemoteSnapshotVersion(t){return xt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return xt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),xt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),xt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new R2(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,xt.resolve()}updateTargetData(t,n){return this.Un(n),xt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,xt.resolve()}removeTargets(t,n,r){let i=0;const o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),xt.waitFor(o).next(()=>i)}getTargetCount(t){return xt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return xt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),xt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),xt.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),xt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return xt.resolve(r)}containsKey(t,n){return xt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wxe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new W5(0),this.Ur=!1,this.Ur=!0,this.Wr=new Znt,this.referenceDelegate=t(this),this.Gr=new rrt(this),this.indexManager=new Unt,this.remoteDocumentCache=function(i){return new trt(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new jnt(n),this.jr=new Qnt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Jnt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new ert(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){sn("MemoryPersistence","Starting transaction:",t);const i=new irt(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(t,n){return xt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class irt extends Ptt{constructor(t){super(),this.currentSequenceNumber=t}}class jY{constructor(t){this.persistence=t,this.Zr=new BY,this.Xr=null}static ei(t){return new jY(t)}get ti(){if(this.Xr)return this.Xr;throw Un()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),xt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),xt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),xt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xt.forEach(this.ti,r=>{const i=kn.fromPath(r);return this.ni(t,i).next(o=>{o||n.removeEntry(i,Kn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return xt.or([()=>xt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class T6{constructor(t,n){this.persistence=t,this.ri=new sw(r=>Mtt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Gnt(this,n)}static ei(t,n){return new T6(t,n)}Hr(){}Jr(t){return xt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return xt.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(o=>o?xt.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(t,s=>this.ir(t,s,n).next(a=>{a||(r++,o.removeEntry(s,Kn.min()))})).next(()=>o.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),xt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),xt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),xt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),xt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=T4(t.data.value)),n}ir(t,n,r){return xt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return xt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=Sr(),i=Sr();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new zY(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ort{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class srt{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return NJe()?8:Ott(zu())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const o={result:null};return this.Xi(t,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(t,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new ort;return this.ts(t,n,s).next(a=>{if(o.result=a,this.Hi)return this.ns(t,n,s,a.size)})}).next(()=>o.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(CE()<=Cr.DEBUG&&sn("QueryEngine","SDK will not create cache indexes for query:",SE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),xt.resolve()):(CE()<=Cr.DEBUG&&sn("QueryEngine","Query:",SE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(CE()<=Cr.DEBUG&&sn("QueryEngine","The SDK decides to create cache indexes for query:",SE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Vp(n))):xt.resolve())}Xi(t,n){if(Ooe(n))return xt.resolve(null);let r=Vp(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wU(n,null,"F"),r=Vp(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const s=Sr(...o);return this.Zi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,s,u.readTime)?this.Xi(t,wU(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return Ooe(n)||i.isEqual(Kn.min())?xt.resolve(null):this.Zi.getDocuments(t,r).next(o=>{const s=this.rs(n,o);return this.ss(n,s,r,i)?xt.resolve(null):(CE()<=Cr.DEBUG&&sn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),SE(n)),this.os(t,s,n,ktt(i,-1)).next(a=>a))})}rs(t,n){let r=new Vs(Cxe(t));return n.forEach((i,o)=>{X5(t,o)&&(r=r.add(o))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(t,n,r){return CE()<=Cr.DEBUG&&sn("QueryEngine","Using full collection scan to execute query:",SE(n)),this.Zi.getDocumentsMatchingQuery(t,n,w1.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class art{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new Ao(Pr),this.cs=new sw(o=>RY(o),NY),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Xnt(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function urt(e,t,n,r){return new art(e,t,n,r)}async function Gxe(e,t){const n=Xn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Sr();for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:s,addedBatchIds:a}))})})}function lrt(e,t){const n=Xn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=xt.resolve();return d.forEach(m=>{h=h.next(()=>c.getEntry(u,m)).next(p=>{const g=l.docVersions.get(m);pi(g!==null),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,l),p.isValidDocument()&&(p.setReadTime(l.commitVersion),c.addEntry(p)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Sr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Yxe(e){const t=Xn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function crt(e,t){const n=Xn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(o,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(o,c.addedDocuments,f)));let h=d.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Za.EMPTY_BYTE_STRING,Kn.min()).withLastLimboFreeSnapshotVersion(Kn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(p,g,v){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(o,h))});let u=pg(),l=Sr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(frt(o,s,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(Kn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(o).next(f=>n.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return xt.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.us=i,o))}function frt(e,t,n){let r=Sr(),i=Sr();return n.forEach(o=>r=r.add(o)),t.getEntries(e,r).next(o=>{let s=pg();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Kn.min())?(t.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),s=s.insert(a,u)):sn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:s,ds:i}})}function drt(e,t){const n=Xn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function hrt(e,t){const n=Xn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(o=>o?(i=o,xt.resolve(i)):n.Gr.allocateTargetId(r).next(s=>(i=new Yy(t,s,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function SU(e,t,n){const r=Xn(e),i=r.us.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ZT(s))throw s;sn("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function Woe(e,t,n){const r=Xn(e);let i=Kn.min(),o=Sr();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,c){const f=Xn(u),d=f.cs.get(c);return d!==void 0?xt.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,s,Vp(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r._s.getDocumentsMatchingQuery(s,t,n?i:Kn.min(),n?o:Sr())).next(a=>(prt(r,ent(t),a),{documents:a,Es:o})))}function prt(e,t,n){let r=e.ls.get(t)||Kn.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),e.ls.set(t,r)}class Goe{constructor(){this.activeTargetIds=snt()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mrt{constructor(){this._o=new Goe,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new Goe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class grt{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yoe{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){sn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){sn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b3=null;function zB(){return b3===null?b3=function(){return 268435456+Math.round(2147483648*Math.random())}():b3++,"0x"+b3.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yrt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vrt{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu="WebChannelConnection";class brt extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(n,r,i,o,s){const a=zB(),u=this.No(n,r.toUriEncodedString());sn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,o,s),this.Lo(n,u,l,i).then(c=>(sn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw mk("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,o,s,a){return this.Oo(n,r,i,o,s)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+QT}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}No(n,r){const i=yrt[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const o=zB();return new Promise((s,a)=>{const u=new uxe;u.setWithCredentials(!0),u.listenOnce(lxe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case E4.NO_ERROR:const c=u.getResponseJson();sn(yu,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(c)),s(c);break;case E4.TIMEOUT:sn(yu,`RPC '${t}' ${o} timed out`),a(new Jt(vt.DEADLINE_EXCEEDED,"Request time out"));break;case E4.HTTP_ERROR:const f=u.getStatus();if(sn(yu,`RPC '${t}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(vt).indexOf(v)>=0?v:vt.UNKNOWN}(h.status);a(new Jt(m,h.message))}else a(new Jt(vt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Jt(vt.UNAVAILABLE,"Connection failed."));break;default:Un()}}finally{sn(yu,`RPC '${t}' ${o} completed.`)}});const l=JSON.stringify(i);sn(yu,`RPC '${t}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=zB(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=dxe(),a=fxe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=o.join("");sn(yu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=s.createWebChannel(c,u);let d=!1,h=!1;const m=new vrt({Eo:g=>{h?sn(yu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(sn(yu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),sn(yu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),p=(g,v,b)=>{g.listen(v,w=>{try{b(w)}catch(E){setTimeout(()=>{throw E},0)}})};return p(f,PA.EventType.OPEN,()=>{h||(sn(yu,`RPC '${t}' stream ${i} transport opened.`),m.So())}),p(f,PA.EventType.CLOSE,()=>{h||(h=!0,sn(yu,`RPC '${t}' stream ${i} transport closed`),m.Do())}),p(f,PA.EventType.ERROR,g=>{h||(h=!0,mk(yu,`RPC '${t}' stream ${i} transport errored:`,g),m.Do(new Jt(vt.UNAVAILABLE,"The operation could not be completed")))}),p(f,PA.EventType.MESSAGE,g=>{var v;if(!h){const b=g.data[0];pi(!!b);const w=b,E=(w==null?void 0:w.error)||((v=w[0])===null||v===void 0?void 0:v.error);if(E){sn(yu,`RPC '${t}' stream ${i} received error:`,E);const T=E.status;let C=function(R){const P=xs[R];if(P!==void 0)return Mxe(P)}(T),S=E.message;C===void 0&&(C=vt.INTERNAL,S="Unknown error status: "+T+" with message "+E.message),h=!0,m.Do(new Jt(C,S)),f.close()}else sn(yu,`RPC '${t}' stream ${i} received:`,b),m.vo(b)}}),p(a,cxe.STAT_EVENT,g=>{g.stat===mU.PROXY?sn(yu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===mU.NOPROXY&&sn(yu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.bo()},0),m}}function UB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(e){return new Snt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kxe{constructor(t,n,r=1e3,i=1.5,o=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&sn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xxe{constructor(t,n,r,i,o,s,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Kxe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===vt.RESOURCE_EXHAUSTED?(hg(n.toString()),hg("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===vt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new Jt(vt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return sn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(sn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xrt extends Xxe{constructor(t,n,r,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=knt(this.serializer,t),r=function(o){if(!("targetChange"in o))return Kn.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Kn.min():s.readTime?Hp(s.readTime):Kn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=CU(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=bU(u)?{documents:Nnt(o,u)}:{query:Pnt(o,u).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Bxe(o,s.resumeToken);const l=_U(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Kn.min())>0){a.readTime=E6(o,s.snapshotVersion.toTimestamp());const l=_U(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Fnt(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=CU(this.serializer),n.removeTarget=t,this.c_(n)}}class wrt extends Xxe{constructor(t,n,r,i,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return pi(!!t.streamToken),this.lastStreamToken=t.streamToken,pi(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){pi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=Rnt(t.writeResults,t.commitTime),r=Hp(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=CU(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Int(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _rt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Jt(vt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(t,EU(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Jt(vt.UNKNOWN,o.toString())})}ko(t,n,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(t,EU(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===vt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Jt(vt.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Ert{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(hg(n),this.C_=!1):sn("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Trt{constructor(t,n,r,i,o){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{aw(this)&&(sn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Xn(u);l.k_.add(4),await BI(l),l.K_.set("Unknown"),l.k_.delete(4),await LI(l)}(this))})}),this.K_=new Ert(r,i)}}async function LI(e){if(aw(e))for(const t of e.q_)await t(!0)}async function BI(e){for(const t of e.q_)await t(!1)}function Qxe(e,t){const n=Xn(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),qY(n)?HY(n):tC(n).s_()&&VY(n,t))}function UY(e,t){const n=Xn(e),r=tC(n);n.L_.delete(t),r.s_()&&Jxe(n,t),n.L_.size===0&&(r.s_()?r.a_():aw(n)&&n.K_.set("Unknown"))}function VY(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Kn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}tC(e).V_(t)}function Jxe(e,t){e.U_.xe(t),tC(e).m_(t)}function HY(e){e.U_=new _nt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),tC(e).start(),e.K_.F_()}function qY(e){return aw(e)&&!tC(e).i_()&&e.L_.size>0}function aw(e){return Xn(e).k_.size===0}function Zxe(e){e.U_=void 0}async function Crt(e){e.K_.set("Online")}async function Srt(e){e.L_.forEach((t,n)=>{VY(e,t)})}async function Art(e,t){Zxe(e),qY(e)?(e.K_.O_(t),HY(e)):e.K_.set("Unknown")}async function Drt(e,t,n){if(e.K_.set("Online"),t instanceof Lxe&&t.state===2&&t.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){sn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await C6(e,r)}else if(t instanceof A4?e.U_.$e(t):t instanceof $xe?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(Kn.min()))try{const r=await Yxe(e.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.U_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.L_.get(l);c&&o.L_.set(l,c.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const c=o.L_.get(u);if(!c)return;o.L_.set(u,c.withResumeToken(Za.EMPTY_BYTE_STRING,c.snapshotVersion)),Jxe(o,u);const f=new Yy(c.target,u,l,c.sequenceNumber);VY(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){sn("RemoteStore","Failed to raise snapshot:",r),await C6(e,r)}}async function C6(e,t,n){if(!ZT(t))throw t;e.k_.add(1),await BI(e),e.K_.set("Offline"),n||(n=()=>Yxe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{sn("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await LI(e)})}function ewe(e,t){return t().catch(n=>C6(e,n,t))}async function t8(e){const t=Xn(e),n=C1(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;krt(t);)try{const i=await drt(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,Irt(t,i)}catch(i){await C6(t,i)}twe(t)&&nwe(t)}function krt(e){return aw(e)&&e.B_.length<10}function Irt(e,t){e.B_.push(t);const n=C1(e);n.s_()&&n.f_&&n.g_(t.mutations)}function twe(e){return aw(e)&&!C1(e).i_()&&e.B_.length>0}function nwe(e){C1(e).start()}async function Rrt(e){C1(e).w_()}async function Nrt(e){const t=C1(e);for(const n of e.B_)t.g_(n.mutations)}async function Prt(e,t,n){const r=e.B_.shift(),i=MY.from(r,t,n);await ewe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await t8(e)}async function Ort(e,t){t&&C1(e).f_&&await async function(r,i){if(function(s){return bnt(s)&&s!==vt.ABORTED}(i.code)){const o=r.B_.shift();C1(r).__(),await ewe(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await t8(r)}}(e,t),twe(e)&&nwe(e)}async function Koe(e,t){const n=Xn(e);n.asyncQueue.verifyOperationInProgress(),sn("RemoteStore","RemoteStore received new credentials");const r=aw(n);n.k_.add(3),await BI(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await LI(n)}async function Frt(e,t){const n=Xn(e);t?(n.k_.delete(2),await LI(n)):t||(n.k_.add(2),await BI(n),n.K_.set("Unknown"))}function tC(e){return e.W_||(e.W_=function(n,r,i){const o=Xn(n);return o.b_(),new xrt(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Ro:Crt.bind(null,e),mo:Srt.bind(null,e),po:Art.bind(null,e),R_:Drt.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),qY(e)?HY(e):e.K_.set("Unknown")):(await e.W_.stop(),Zxe(e))})),e.W_}function C1(e){return e.G_||(e.G_=function(n,r,i){const o=Xn(n);return o.b_(),new wrt(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:Rrt.bind(null,e),po:Ort.bind(null,e),p_:Nrt.bind(null,e),y_:Prt.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await t8(e)):(await e.G_.stop(),e.B_.length>0&&(sn("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WY{constructor(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new X0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,o){const s=Date.now()+r,a=new WY(t,n,s,i,o);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Jt(vt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function GY(e,t){if(hg("AsyncQueue",`${t}: ${e}`),ZT(e))return new Jt(vt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{static emptySet(t){return new ZE(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||kn.comparator(n.key,r.key):(n,r)=>kn.comparator(n.key,r.key),this.keyedMap=OA(),this.sortedSet=new Ao(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof ZE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new ZE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xoe{constructor(){this.z_=new Ao(kn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):Un():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class N2{constructor(t,n,r,i,o,s,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new N2(t,n,ZE.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&K5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mrt{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class $rt{constructor(){this.queries=Qoe(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Xn(n),o=i.queries;i.queries=Qoe(),o.forEach((s,a)=>{for(const u of a.J_)u.onError(r)})})(this,new Jt(vt.ABORTED,"Firestore shutting down"))}}function Qoe(){return new sw(e=>Txe(e),K5)}async function rwe(e,t){const n=Xn(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.Y_()&&t.Z_()&&(r=2):(o=new Mrt,r=t.Z_()?0:1);try{switch(r){case 0:o.H_=await n.onListen(i,!0);break;case 1:o.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=GY(s,`Initialization of query '${SE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,o),o.J_.push(t),t.ea(n.onlineState),o.H_&&t.ta(o.H_)&&YY(n)}async function iwe(e,t){const n=Xn(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const s=o.J_.indexOf(t);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=t.Z_()?0:1:!o.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lrt(e,t){const n=Xn(e);let r=!1;for(const i of t){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&YY(n)}function Brt(e,t,n){const r=Xn(e),i=r.queries.get(t);if(i)for(const o of i.J_)o.onError(n);r.queries.delete(t)}function YY(e){e.X_.forEach(t=>{t.next()})}var AU,Joe;(Joe=AU||(AU={})).na="default",Joe.Cache="cache";class owe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new N2(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=N2.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==AU.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class swe{constructor(t){this.key=t}}class awe{constructor(t){this.key=t}}class jrt{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Sr(),this.mutatedKeys=Sr(),this.Va=Cxe(t),this.ma=new ZE(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new Xoe,i=n?n.ma:this.ma;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=X5(this.query,f)?f:null,m=!!d&&this.mutatedKeys.has(d.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?m!==p&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(s=s.add(h),o=p?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const o=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const s=t.pa.j_();s.sort((c,f)=>function(h,m){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Un()}};return p(h)-p(m)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,s.length!==0||l?{snapshot:new N2(this.query,t.ma,o,s,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Xoe,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=Sr(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new awe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new swe(r))}),n}va(t){this.Ea=t.Es,this.Ra=Sr();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return N2.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class zrt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Urt{constructor(t){this.key=t,this.Fa=!1}}class Vrt{constructor(t,n,r,i,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new sw(a=>Txe(a),K5),this.Oa=new Map,this.Na=new Set,this.Ba=new Ao(kn.comparator),this.La=new Map,this.ka=new BY,this.qa={},this.Qa=new Map,this.Ka=R2.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Hrt(e,t,n=!0){const r=hwe(e);let i;const o=r.xa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await uwe(r,t,n,!0),i}async function qrt(e,t){const n=hwe(e);await uwe(n,t,!0,!1)}async function uwe(e,t,n,r){const i=await hrt(e.localStore,Vp(t)),o=i.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await Wrt(e,t,o,s==="current",i.resumeToken)),e.isPrimaryClient&&n&&Qxe(e.remoteStore,i),a}async function Wrt(e,t,n,r,i){e.Ua=(f,d,h)=>async function(p,g,v,b){let w=g.view.ga(v);w.ss&&(w=await Woe(p.localStore,g.query,!1).then(({documents:S})=>g.view.ga(S,w)));const E=b&&b.targetChanges.get(g.targetId),T=b&&b.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(w,p.isPrimaryClient,E,T);return ese(p,g.targetId,C.ba),C.snapshot}(e,f,d,h);const o=await Woe(e.localStore,t,!0),s=new jrt(t,o.Es),a=s.ga(o.documents),u=$I.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=s.applyChanges(a,e.isPrimaryClient,u);ese(e,n,l.ba);const c=new zrt(t,n,s);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function Grt(e,t,n){const r=Xn(e),i=r.xa.get(t),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!K5(s,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await SU(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&UY(r.remoteStore,i.targetId),DU(r,i.targetId)}).catch(JT)):(DU(r,i.targetId),await SU(r.localStore,i.targetId,!0))}async function Yrt(e,t){const n=Xn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),UY(n.remoteStore,r.targetId))}async function Krt(e,t,n){const r=nit(e);try{const i=await function(s,a){const u=Xn(s),l=Us.now(),c=a.reduce((h,m)=>h.add(m.key),Sr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let m=pg(),p=Sr();return u.hs.getEntries(h,c).next(g=>{m=g,m.forEach((v,b)=>{b.isValidDocument()||(p=p.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,m)).next(g=>{f=g;const v=[];for(const b of a){const w=pnt(b,f.get(b.key).overlayedDocument);w!=null&&v.push(new av(b.key,w,gxe(w.value.mapValue),df.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,v,a)}).next(g=>{d=g;const v=g.applyToLocalDocumentSet(f,p);return u.documentOverlayCache.saveOverlays(h,g.batchId,v)})}).then(()=>({batchId:d.batchId,changes:Axe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.qa[s.currentUser.toKey()];l||(l=new Ao(Pr)),l=l.insert(a,u),s.qa[s.currentUser.toKey()]=l}(r,i.batchId,n),await jI(r,i.changes),await t8(r.remoteStore)}catch(i){const o=GY(i,"Failed to persist write");n.reject(o)}}async function lwe(e,t){const n=Xn(e);try{const r=await crt(n.localStore,t);t.targetChanges.forEach((i,o)=>{const s=n.La.get(o);s&&(pi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?pi(s.Fa):i.removedDocuments.size>0&&(pi(s.Fa),s.Fa=!1))}),await jI(n,r,t)}catch(r){await JT(r)}}function Zoe(e,t,n){const r=Xn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((o,s)=>{const a=s.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=Xn(s);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&YY(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Xrt(e,t,n){const r=Xn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),o=i&&i.key;if(o){let s=new Ao(kn.comparator);s=s.insert(o,Du.newNoDocument(o,Kn.min()));const a=Sr().add(o),u=new Z5(Kn.min(),new Map,new Ao(Pr),s,a);await lwe(r,u),r.Ba=r.Ba.remove(o),r.La.delete(t),KY(r)}else await SU(r.localStore,t,!1).then(()=>DU(r,t,n)).catch(JT)}async function Qrt(e,t){const n=Xn(e),r=t.batch.batchId;try{const i=await lrt(n.localStore,t);fwe(n,r,null),cwe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jI(n,i)}catch(i){await JT(i)}}async function Jrt(e,t,n){const r=Xn(e);try{const i=await function(s,a){const u=Xn(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(pi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);fwe(r,t,n),cwe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await jI(r,i)}catch(i){await JT(i)}}function cwe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function fwe(e,t,n){const r=Xn(e);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function DU(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||dwe(e,r)})}function dwe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(UY(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),KY(e))}function ese(e,t,n){for(const r of n)r instanceof swe?(e.ka.addReference(r.key,t),Zrt(e,r)):r instanceof awe?(sn("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||dwe(e,r.key)):Un()}function Zrt(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(sn("SyncEngine","New document in limbo: "+n),e.Na.add(r),KY(e))}function KY(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new kn(Zi.fromString(t)),r=e.Ka.next();e.La.set(r,new Urt(n)),e.Ba=e.Ba.insert(n,r),Qxe(e.remoteStore,new Yy(Vp(PY(n.path)),r,"TargetPurposeLimboResolution",W5.oe))}}async function jI(e,t,n){const r=Xn(e),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{s.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=zY.zi(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(u,l){const c=Xn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>xt.forEach(l,d=>xt.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>xt.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!ZT(f))throw f;sn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),m=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(m);c.us=c.us.insert(d,p)}}}(r.localStore,o))}async function eit(e,t){const n=Xn(e);if(!n.currentUser.isEqual(t)){sn("SyncEngine","User change. New user:",t.toKey());const r=await Gxe(n.localStore,t);n.currentUser=t,function(o,s){o.Qa.forEach(a=>{a.forEach(u=>{u.reject(new Jt(vt.CANCELLED,s))})}),o.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await jI(n,r.Ts)}}function tit(e,t){const n=Xn(e),r=n.La.get(t);if(r&&r.Fa)return Sr().add(r.key);{let i=Sr();const o=n.Oa.get(t);if(!o)return i;for(const s of o){const a=n.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function hwe(e){const t=Xn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=lwe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=tit.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Xrt.bind(null,t),t.Ma.R_=Lrt.bind(null,t.eventManager),t.Ma.Wa=Brt.bind(null,t.eventManager),t}function nit(e){const t=Xn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qrt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Jrt.bind(null,t),t}class S6{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=e8(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return urt(this.persistence,new srt,t.initialUser,this.serializer)}ja(t){return new Wxe(jY.ei,this.serializer)}za(t){return new mrt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}S6.provider={build:()=>new S6};class rit extends S6{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){pi(this.persistence.referenceDelegate instanceof T6);const r=this.persistence.referenceDelegate.garbageCollector;return new qnt(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?nc.withCacheSize(this.cacheSizeBytes):nc.DEFAULT;return new Wxe(r=>T6.ei(r,n),this.serializer)}}class kU{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zoe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eit.bind(null,this.syncEngine),await Frt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new $rt}()}createDatastore(t){const n=e8(t.databaseInfo.databaseId),r=function(o){return new brt(o)}(t.databaseInfo);return function(o,s,a,u){return new _rt(o,s,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,o,s,a){return new Trt(r,i,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Zoe(this.syncEngine,n,0),function(){return Yoe.p()?new Yoe:new grt}())}createSyncEngine(t,n){return function(i,o,s,a,u,l,c){const f=new Vrt(i,o,s,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const o=Xn(i);sn("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await BI(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}kU.provider={build:()=>new kU};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pwe{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):hg("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iit{constructor(t,n,r,i,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=tc.UNAUTHENTICATED,this.clientId=hxe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{sn("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(sn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new X0;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=GY(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function VB(e,t){e.asyncQueue.verifyOperationInProgress(),sn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Gxe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tse(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mwe(e);sn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Koe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Koe(t.remoteStore,i)),e._onlineComponents=t}async function mwe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){sn("FirestoreClient","Using user provided OfflineComponentProvider");try{await VB(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===vt.FAILED_PRECONDITION||i.code===vt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;mk("Error using user provided cache. Falling back to memory cache: "+n),await VB(e,new S6)}}else sn("FirestoreClient","Using default OfflineComponentProvider"),await VB(e,new rit(void 0));return e._offlineComponents}async function XY(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(sn("FirestoreClient","Using user provided OnlineComponentProvider"),await tse(e,e._uninitializedComponentsProvider._online)):(sn("FirestoreClient","Using default OnlineComponentProvider"),await tse(e,new kU))),e._onlineComponents}function oit(e){return mwe(e).then(t=>t.persistence)}function sit(e){return XY(e).then(t=>t.remoteStore)}function ait(e){return XY(e).then(t=>t.syncEngine)}async function gwe(e){const t=await XY(e),n=t.eventManager;return n.onListen=Hrt.bind(null,t.syncEngine),n.onUnlisten=Grt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=qrt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Yrt.bind(null,t.syncEngine),n}function uit(e){return e.asyncQueue.enqueue(async()=>{const t=await oit(e),n=await sit(e);return t.setNetworkEnabled(!0),function(i){const o=Xn(i);return o.k_.delete(0),LI(o)}(n)})}function lit(e,t,n={}){const r=new X0;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new pwe({next:d=>{c.eu(),s.enqueueAndForget(()=>iwe(o,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Jt(vt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Jt(vt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new owe(PY(a.path),c,{includeMetadataChanges:!0,ua:!0});return rwe(o,f)}(await gwe(e),e.asyncQueue,t,n,r)),r.promise}function cit(e,t,n={}){const r=new X0;return e.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new pwe({next:d=>{c.eu(),s.enqueueAndForget(()=>iwe(o,f)),d.fromCache&&u.source==="server"?l.reject(new Jt(vt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new owe(a,c,{includeMetadataChanges:!0,ua:!0});return rwe(o,f)}(await gwe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ywe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vwe(e,t,n){if(!n)throw new Jt(vt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function fit(e,t,n,r){if(t===!0&&r===!0)throw new Jt(vt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function rse(e){if(!kn.isDocumentKey(e))throw new Jt(vt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ise(e){if(kn.isDocumentKey(e))throw new Jt(vt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function n8(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Un()}function um(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Jt(vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=n8(e);throw new Jt(vt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ose{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Jt(vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Jt(vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}fit("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ywe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Jt(vt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Jt(vt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Jt(vt.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class QY{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ose({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Jt(vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Jt(vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ose(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wtt;switch(r.type){case"firstParty":return new Ttt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Jt(vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nse.get(n);r&&(sn("ComponentProvider","Removing Datastore"),nse.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new uw(this.firestore,t,this._query)}}class bl{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new l1(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new bl(this.firestore,t,this._key)}}class l1 extends uw{constructor(t,n,r){super(t,n,PY(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new bl(this.firestore,null,new kn(t))}withConverter(t){return new l1(this.firestore,t,this._path)}}function Jl(e,t,...n){if(e=Wi(e),vwe("collection","path",t),e instanceof QY){const r=Zi.fromString(t,...n);return ise(r),new l1(e,null,r)}{if(!(e instanceof bl||e instanceof l1))throw new Jt(vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Zi.fromString(t,...n));return ise(r),new l1(e.firestore,null,r)}}function Qi(e,t,...n){if(e=Wi(e),arguments.length===1&&(t=hxe.newId()),vwe("doc","path",t),e instanceof QY){const r=Zi.fromString(t,...n);return rse(r),new bl(e,null,new kn(r))}{if(!(e instanceof bl||e instanceof l1))throw new Jt(vt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Zi.fromString(t,...n));return rse(r),new bl(e.firestore,e instanceof l1?e.converter:null,new kn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sse{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Kxe(this,"async_queue_retry"),this.fu=()=>{const r=UB();r&&sn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=UB();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=UB();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new X0;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!ZT(t))throw t;sn("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw hg("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=WY.createAndSchedule(this,t,n,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&Un()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class lw extends QY{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new sse,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new sse(t),this._firestoreClient=void 0,await t}}}function dit(e,t,n){n||(n="(default)");const r=XT(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),o=r.getOptions(n);if(hk(o,t))return i;throw new Jt(vt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Jt(vt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Jt(vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function zI(e){if(e._terminated)throw new Jt(vt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||hit(e),e._firestoreClient}function hit(e){var t,n,r;const i=e._freezeSettings(),o=function(a,u,l,c){return new Btt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ywe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new iit(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function pit(e){return uit(zI(e=um(e,lw)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(t){this._byteString=t}static fromBase64String(t){try{return new P2(Za.fromBase64String(t))}catch(n){throw new Jt(vt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new P2(Za.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Jt(vt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Va(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JY=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Jt(vt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Jt(vt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Pr(this._lat,t._lat)||Pr(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mit=/^__.*__$/;class git{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new av(t,this.data,this.fieldMask,n,this.fieldTransforms):new MI(t,this.data,n,this.fieldTransforms)}}class bwe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new av(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function xwe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Un()}}class eK{constructor(t,n,r,i,o,s){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new eK(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return A6(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(xwe(this.Mu)&&mit.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class yit{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||e8(t)}$u(t,n,r,i=!1){return new eK({Mu:t,methodName:n,Ku:r,path:Va.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function i8(e){const t=e._freezeSettings(),n=e8(e._databaseId);return new yit(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wwe(e,t,n,r,i,o={}){const s=e.$u(o.merge||o.mergeFields?2:0,t,n,i);nK("Data must be an object, but it was:",s,r);const a=Twe(r,s);let u,l;if(o.merge)u=new of(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const f of o.mergeFields){const d=IU(t,f,n);if(!s.contains(d))throw new Jt(vt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);Swe(c,d)||c.push(d)}u=new of(c),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new git(new sc(a),u,l)}class o8 extends r8{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof o8}}class tK extends r8{_toFieldTransform(t){return new cnt(t.path,new xk)}isEqual(t){return t instanceof tK}}function _we(e,t,n,r){const i=e.$u(1,t,n);nK("Data must be an object, but it was:",i,r);const o=[],s=sc.empty();sv(r,(u,l)=>{const c=rK(t,u,n);l=Wi(l);const f=i.Lu(c);if(l instanceof o8)o.push(c);else{const d=VI(l,f);d!=null&&(o.push(c),s.set(c,d))}});const a=new of(o);return new bwe(s,a,i.fieldTransforms)}function Ewe(e,t,n,r,i,o){const s=e.$u(1,t,n),a=[IU(t,r,n)],u=[i];if(o.length%2!=0)throw new Jt(vt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(IU(t,o[d])),u.push(o[d+1]);const l=[],c=sc.empty();for(let d=a.length-1;d>=0;--d)if(!Swe(l,a[d])){const h=a[d];let m=u[d];m=Wi(m);const p=s.Lu(h);if(m instanceof o8)l.push(h);else{const g=VI(m,p);g!=null&&(l.push(h),c.set(h,g))}}const f=new of(l);return new bwe(c,f,s.fieldTransforms)}function vit(e,t,n,r=!1){return VI(n,e.$u(r?4:3,t))}function VI(e,t){if(Cwe(e=Wi(e)))return nK("Unsupported field value:",t,e),Twe(e,t);if(e instanceof r8)return function(r,i){if(!xwe(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=VI(a,i.ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(e,t)}return function(r,i){if((r=Wi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ant(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Us.fromDate(r);return{timestampValue:E6(i.serializer,o)}}if(r instanceof Us){const o=new Us(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:E6(i.serializer,o)}}if(r instanceof JY)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof P2)return{bytesValue:Bxe(i.serializer,r._byteString)};if(r instanceof bl){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:LY(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ZY)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return OY(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${n8(r)}`)}(e,t)}function Twe(e,t){const n={};return pxe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sv(e,(r,i)=>{const o=VI(i,t.Ou(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function Cwe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Us||e instanceof JY||e instanceof P2||e instanceof bl||e instanceof r8||e instanceof ZY)}function nK(e,t,n){if(!Cwe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=n8(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function IU(e,t,n){if((t=Wi(t))instanceof UI)return t._internalPath;if(typeof t=="string")return rK(e,t);throw A6("Field path arguments must be of type string or ",e,!1,void 0,n)}const bit=new RegExp("[~\\*/\\[\\]]");function rK(e,t,n){if(t.search(bit)>=0)throw A6(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new UI(...t.split("."))._internalPath}catch{throw A6(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function A6(e,t,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new Jt(vt.INVALID_ARGUMENT,a+e+u)}function Swe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Awe{constructor(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new xit(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(s8("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xit extends Awe{data(){return super.data()}}function s8(e,t){return typeof t=="string"?rK(e,t):t instanceof UI?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wit(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Jt(vt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iK{}class Dwe extends iK{}function HB(e,t,...n){let r=[];t instanceof iK&&r.push(t),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof oK).length,a=o.filter(u=>u instanceof a8).length;if(s>1||s>0&&a>0)throw new Jt(vt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class a8 extends Dwe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new a8(t,n,r)}_apply(t){const n=this._parse(t);return kwe(t._query,n),new uw(t.firestore,t.converter,xU(t._query,n))}_parse(t){const n=i8(t.firestore);return function(o,s,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Jt(vt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){cse(f,c);const h=[];for(const m of f)h.push(lse(u,o,m));d={arrayValue:{values:h}}}else d=lse(u,o,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||cse(f,c),d=vit(a,s,f,c==="in"||c==="not-in");return Ts.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function ase(e,t,n){const r=t,i=s8("where",e);return a8._create(i,r,n)}class oK extends iK{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new oK(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dh.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)kwe(s,u),s=xU(s,u)}(t._query,n),new uw(t.firestore,t.converter,xU(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sK extends Dwe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new sK(t,n)}_apply(t){const n=function(i,o,s){if(i.startAt!==null)throw new Jt(vt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Jt(vt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bk(o,s)}(t._query,this._field,this._direction);return new uw(t.firestore,t.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new eC(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function use(e,t="asc"){const n=t,r=s8("orderBy",e);return sK._create(r,n)}function lse(e,t,n){if(typeof(n=Wi(n))=="string"){if(n==="")throw new Jt(vt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Exe(t)&&n.indexOf("/")!==-1)throw new Jt(vt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Zi.fromString(n));if(!kn.isDocumentKey(r))throw new Jt(vt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Doe(e,new kn(r))}if(n instanceof bl)return Doe(e,n._key);throw new Jt(vt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n8(n)}.`)}function cse(e,t){if(!Array.isArray(e)||e.length===0)throw new Jt(vt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kwe(e,t){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Jt(vt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Jt(vt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class _it{convertValue(t,n="none"){switch(T1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return as(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(E1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Un()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return sv(t,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(t){var n,r,i;const o=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>as(s.doubleValue));return new ZY(o)}convertGeoPoint(t){return new JY(as(t.latitude),as(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Y5(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gk(t));default:return null}}convertTimestamp(t){const n=_1(t);return new Us(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Zi.fromString(t);pi(qxe(r));const i=new yk(r.get(1),r.get(3)),o=new kn(r.popFirst(5));return i.isEqual(n)||hg(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iwe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Rwe extends Awe{constructor(t,n,r,i,o,s){super(t,n,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new D4(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(s8("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class D4 extends Rwe{data(t={}){return super.data(t)}}class Eit{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new MA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new D4(this._firestore,this._userDataWriter,r.key,r,new MA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Jt(vt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const u=new D4(i._firestore,i._userDataWriter,a.doc.key,a.doc,new MA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const u=new D4(i._firestore,i._userDataWriter,a.doc.key,a.doc,new MA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:Tit(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Tit(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Un()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(e){e=um(e,bl);const t=um(e.firestore,lw);return lit(zI(t),e._key).then(n=>Cit(t,e,n))}class Nwe extends _it{constructor(t){super(),this.firestore=t}convertBytes(t){return new P2(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new bl(this.firestore,null,n)}}function eE(e){e=um(e,uw);const t=um(e.firestore,lw),n=zI(t),r=new Nwe(t);return wit(e._query),cit(n,e._query).then(i=>new Eit(t,r,e,i))}function vu(e,t,n){e=um(e,bl);const r=um(e.firestore,lw),i=Iwe(e.converter,t,n);return aK(r,[wwe(i8(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,df.none())])}function fse(e,t,n,...r){e=um(e,bl);const i=um(e.firestore,lw),o=i8(i);let s;return s=typeof(t=Wi(t))=="string"||t instanceof UI?Ewe(o,"updateDoc",e._key,t,n,r):_we(o,"updateDoc",e._key,t),aK(i,[s.toMutation(e._key,df.exists(!0))])}function aK(e,t){return function(r,i){const o=new X0;return r.asyncQueue.enqueueAndForget(async()=>Krt(await ait(r),i,o)),o.promise}(zI(e),t)}function Cit(e,t,n){const r=n.docs.get(t._key),i=new Nwe(e);return new Rwe(e,i,t._key,r,new MA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sit{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=i8(t)}set(t,n,r){this._verifyNotCommitted();const i=qB(t,this._firestore),o=Iwe(i.converter,n,r),s=wwe(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,df.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const o=qB(t,this._firestore);let s;return s=typeof(n=Wi(n))=="string"||n instanceof UI?Ewe(this._dataReader,"WriteBatch.update",o._key,n,r,i):_we(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,df.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=qB(t,this._firestore);return this._mutations=this._mutations.concat(new FY(n._key,df.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt(vt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qB(e,t){if((e=Wi(e)).firestore!==t)throw new Jt(vt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function w3(){return new tK("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dse(e){return zI(e=um(e,lw)),new Sit(e,t=>aK(e,t))}(function(t,n=!0){(function(i){QT=i})(ow),dg(new sm("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new lw(new _tt(r.getProvider("auth-internal")),new Stt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Jt(vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yk(l.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),bh(_oe,"4.7.6",t),bh(_oe,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=new Map,Pwe={activated:!1,tokenObservers:[]},Ait={initialized:!1,enabled:!1};function Hs(e){return RU.get(e)||Object.assign({},Pwe)}function Dit(e,t){return RU.set(e,t),RU.get(e)}function u8(){return Ait}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Owe="https://content-firebaseappcheck.googleapis.com/v1",kit="exchangeRecaptchaV3Token",Iit="exchangeDebugToken",hse={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Rit=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nit{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new dk,this.pending.promise.catch(n=>{}),await Pit(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new dk,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Pit(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oit={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},uc=new KT("appCheck","AppCheck",Oit);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pse(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function uK(e){if(!Hs(e).activated)throw uc.create("use-before-activation",{appName:e.name})}function Fwe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),o=t-n*3600*24-r*3600-i*60;let s="";return n&&(s+=_3(n)+"d:"),r&&(s+=_3(r)+"h:"),s+=_3(i)+"m:"+_3(o)+"s",s}function _3(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lK({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const o={method:"POST",body:JSON.stringify(t),headers:r};let s;try{s=await fetch(e,o)}catch(f){throw uc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(s.status!==200)throw uc.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(f){throw uc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw uc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function Fit(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Owe}/projects/${n}/apps/${r}:${kit}?key=${i}`,body:{recaptcha_v3_token:t}}}function Mwe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${Owe}/projects/${n}/apps/${r}:${Iit}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mit="firebase-app-check-database",$it=1,Ek="firebase-app-check-store",$we="debug-token";let E3=null;function Lwe(){return E3||(E3=new Promise((e,t)=>{try{const n=indexedDB.open(Mit,$it);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(uc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ek,{keyPath:"compositeKey"})}}}catch(n){t(uc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),E3)}function Lit(e){return jwe(zwe(e))}function Bit(e,t){return Bwe(zwe(e),t)}function jit(e){return Bwe($we,e)}function zit(){return jwe($we)}async function Bwe(e,t){const r=(await Lwe()).transaction(Ek,"readwrite"),o=r.objectStore(Ek).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(uc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function jwe(e){const n=(await Lwe()).transaction(Ek,"readonly"),i=n.objectStore(Ek).get(e);return new Promise((o,s)=>{i.onsuccess=a=>{const u=a.target.result;o(u?u.value:void 0)},n.onerror=a=>{var u;s(uc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function zwe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new V5("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uit(e){if(vY()){let t;try{t=await Lit(e)}catch(n){Tk.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function WB(e,t){return vY()?Bit(e,t).catch(n=>{Tk.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Vit(){let e;try{e=await zit()}catch{}if(e)return e;{const t=crypto.randomUUID();return jit(t).catch(n=>Tk.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(){return u8().enabled}async function fK(){const e=u8();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Hit(){const e=Lbe(),t=u8();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new dk;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Vit())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qit={error:"UNKNOWN_ERROR"};function Wit(e){return yY.encodeString(JSON.stringify(e),!1)}async function NU(e,t=!1){const n=e.app;uK(n);const r=Hs(n);let i=r.token,o;if(i&&!FE(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(FE(u)?i=u:await WB(n,void 0))}if(!t&&i&&FE(i))return{token:i.token};let s=!1;if(cK()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lK(Mwe(n,await fK()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);const u=await r.exchangeTokenPromise;return await WB(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=await Hs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Tk.warn(u.message):Tk.error(u),o=u}let a;return i?o?FE(i)?a={token:i.token,internalError:o}:a=gse(o):(a={token:i.token},r.token=i,await WB(n,i)):a=gse(o),s&&Hwe(n,a),a}async function Git(e){const t=e.app;uK(t);const{provider:n}=Hs(t);if(cK()){const r=await fK(),{token:i}=await lK(Mwe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function Uwe(e,t,n,r){const{app:i}=e,o=Hs(i),s={next:n,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&FE(o.token)){const a=o.token;Promise.resolve().then(()=>{n({token:a.token}),mse(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>mse(e))}function Vwe(e,t){const n=Hs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function mse(e){const{app:t}=e,n=Hs(t);let r=n.tokenRefresher;r||(r=Yit(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Yit(e){const{app:t}=e;return new Nit(async()=>{const n=Hs(t);let r;if(n.token?r=await NU(e,!0):r=await NU(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Hs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},hse.RETRIAL_MIN_WAIT,hse.RETRIAL_MAX_WAIT)}function Hwe(e,t){const n=Hs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function FE(e){return e.expireTimeMillis-Date.now()>0}function gse(e){return{token:Wit(qit),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kit{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Hs(this.app);for(const n of t)Vwe(this.app,n.next);return Promise.resolve()}}function Xit(e,t){return new Kit(e,t)}function Qit(e){return{getToken:t=>NU(e,t),getLimitedUseToken:()=>Git(e),addTokenListener:t=>Uwe(e,"INTERNAL",t),removeTokenListener:t=>Vwe(e.app,t)}}const Jit="@firebase/app-check",Zit="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eot="https://www.google.com/recaptcha/api.js";function tot(e,t){const n=new dk,r=Hs(e);r.reCAPTCHAState={initialized:n};const i=not(e),o=pse(!1);return o?yse(e,t,o,i,n):oot(()=>{const s=pse(!1);if(!s)throw new Error("no recaptcha");yse(e,t,s,i,n)}),n.promise}function yse(e,t,n,r,i){n.ready(()=>{iot(e,t,n,r),i.resolve(n)})}function not(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function rot(e){uK(e);const n=await Hs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const o=Hs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(o.widgetId,{action:"fire_app_check"}))})})}function iot(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Hs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Hs(e).reCAPTCHAState.succeeded=!1}}),o=Hs(e);o.reCAPTCHAState=Object.assign(Object.assign({},o.reCAPTCHAState),{widgetId:i})}function oot(e){const t=document.createElement("script");t.src=eot,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;aot(this._throttleData);const i=await rot(this._app).catch(s=>{throw uc.create("recaptcha-error")});if(!(!((t=Hs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw uc.create("recaptcha-error");let o;try{o=await lK(Fit(this._app,i),this._heartbeatServiceProvider)}catch(s){throw!((n=s.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=sot(Number((r=s.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),uc.create("throttled",{time:Fwe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):s}return this._throttleData=null,o}initialize(t){this._app=t,this._heartbeatServiceProvider=XT(t,"heartbeat"),tot(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof dK?this._siteKey===t._siteKey:!1}}function sot(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Rit,httpStatus:e};{const n=t?t.backoffCount:0,r=qJe(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function aot(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw uc.create("throttled",{time:Fwe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uot(e=xY(),t){e=Wi(e);const n=XT(e,"app-check");if(u8().initialized||Hit(),cK()&&fK().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(o.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&o.provider.isEqual(t.provider))return i;throw uc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return lot(e,t.provider,t.isTokenAutoRefreshEnabled),Hs(e).isTokenAutoRefreshEnabled&&Uwe(r,"INTERNAL",()=>{}),r}function lot(e,t,n){const r=Dit(e,Object.assign({},Pwe));r.activated=!0,r.provider=t,r.cachedTokenPromise=Uit(e).then(i=>(i&&FE(i)&&(r.token=i,Hwe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const cot="app-check",vse="app-check-internal";function fot(){dg(new sm(cot,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Xit(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(vse).initialize()})),dg(new sm(vse,e=>{const t=e.getProvider("app-check").getImmediate();return Qit(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),bh(Jit,Zit)}fot();function qwe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dot=qwe,Wwe=new KT("auth","Firebase",qwe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new V5("@firebase/auth");function hot(e,...t){D6.logLevel<=Cr.WARN&&D6.warn(`Auth (${ow}): ${e}`,...t)}function k4(e,...t){D6.logLevel<=Cr.ERROR&&D6.error(`Auth (${ow}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(e,...t){throw pK(e,...t)}function xh(e,...t){return pK(e,...t)}function hK(e,t,n){const r=Object.assign(Object.assign({},dot()),{[t]:n});return new KT("auth","Firebase",r).create(t,{appName:e.name})}function c1(e){return hK(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pot(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&lm(e,"argument-error"),hK(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pK(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Wwe.create(e,...t)}function qn(e,t,...n){if(!e)throw pK(t,...n)}function $0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw k4(t),new Error(t)}function mg(e,t){e||$0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function mot(){return bse()==="http:"||bse()==="https:"}function bse(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function got(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mot()||kJe()||"connection"in navigator)?navigator.onLine:!0}function yot(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n){this.shortDelay=t,this.longDelay=n,mg(n>t,"Short delay should be less than long delay!"),this.isMobile=SJe()||IJe()}get(){return got()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(e,t){mg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gwe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vot={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bot=new HI(3e4,6e4);function l8(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function nC(e,t,n,r,i={}){return Ywe(e,i,async()=>{let o={},s={};r&&(t==="GET"?s=r:o={body:JSON.stringify(r)});const a=OI(Object.assign({key:e.config.apiKey},s)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},o);return DJe()||(l.referrerPolicy="no-referrer"),Gwe.fetch()(Xwe(e,e.config.apiHost,n,a),l)})}async function Ywe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},vot),t);try{const i=new xot(e),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw T3(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw T3(e,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw T3(e,"email-already-in-use",s);if(u==="USER_DISABLED")throw T3(e,"user-disabled",s);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw hK(e,c,l);lm(e,c)}}catch(i){if(i instanceof Cm)throw i;lm(e,"network-request-failed",{message:String(i)})}}async function Kwe(e,t,n,r,i={}){const o=await nC(e,t,n,r,i);return"mfaPendingCredential"in o&&lm(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Xwe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?mK(e.config,i):`${e.config.apiScheme}://${i}`}class xot{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xh(this.auth,"network-request-failed")),bot.get())})}}function T3(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=xh(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wot(e,t){return nC(e,"POST","/v1/accounts:delete",t)}async function Qwe(e,t){return nC(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function _ot(e,t=!1){const n=Wi(e),r=await n.getIdToken(t),i=gK(r);qn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:$D(GB(i.auth_time)),issuedAtTime:$D(GB(i.iat)),expirationTime:$D(GB(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function GB(e){return Number(e)*1e3}function gK(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return k4("JWT malformed, contained fewer than 3 sections"),null;try{const i=$be(n);return i?JSON.parse(i):(k4("Failed to decode base64 JWT payload"),null)}catch(i){return k4("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xse(e){const t=gK(e);return qn(t,"internal-error"),qn(typeof t.exp<"u","internal-error"),qn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Cm&&Eot(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Eot({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tot{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$D(this.lastLoginAt),this.creationTime=$D(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k6(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ck(e,Qwe(n,{idToken:r}));qn(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?Jwe(o.providerUserInfo):[],a=Sot(e.providerData,s),u=e.isAnonymous,l=!(e.email&&o.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new OU(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Cot(e){const t=Wi(e);await k6(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Sot(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function Jwe(e){return e.map(t=>{var{providerId:n}=t,r=pI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aot(e,t){const n=await Ywe(e,{},async()=>{const r=OI({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=Xwe(e,i,"/v1/token",`key=${o}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Gwe.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Dot(e,t){return nC(e,"POST","/v2/accounts:revokeToken",l8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){qn(t.idToken,"internal-error"),qn(typeof t.idToken<"u","internal-error"),qn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):xse(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){qn(t.length!==0,"internal-error");const n=xse(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(qn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await Aot(t,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new e2;return r&&(qn(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(qn(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(qn(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new e2,this.toJSON())}_performRefresh(){return $0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(e,t){qn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class L0{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=pI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tot(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new OU(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await Ck(this,this.stsTokenManager.getToken(this.auth,t));return qn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return _ot(this,t)}reload(){return Cot(this)}_assign(t){this!==t&&(qn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new L0(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){qn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await k6(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lp(this.auth.app))return Promise.reject(c1(this.auth));const t=await this.getIdToken();return await Ck(this,wot(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,p=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:C,stsTokenManager:S}=n;qn(w&&S,t,"internal-error");const I=e2.fromJSON(this.name,S);qn(typeof w=="string",t,"internal-error"),Cy(f,t.name),Cy(d,t.name),qn(typeof E=="boolean",t,"internal-error"),qn(typeof T=="boolean",t,"internal-error"),Cy(h,t.name),Cy(m,t.name),Cy(p,t.name),Cy(g,t.name),Cy(v,t.name),Cy(b,t.name);const R=new L0({uid:w,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:T,photoURL:m,phoneNumber:h,tenantId:p,stsTokenManager:I,createdAt:v,lastLoginAt:b});return C&&Array.isArray(C)&&(R.providerData=C.map(P=>Object.assign({},P))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(t,n,r=!1){const i=new e2;i.updateFromServerResponse(n);const o=new L0({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await k6(o),o}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];qn(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Jwe(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new e2;a.updateFromIdToken(r);const u=new L0({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new OU(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wse=new Map;function B0(e){mg(e instanceof Function,"Expected a class definition");let t=wse.get(e);return t?(mg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,wse.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zwe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Zwe.type="NONE";const _se=Zwe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(e,t,n){return`firebase:${e}:${t}:${n}`}class t2{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=I4(this.userKey,i.apiKey,o),this.fullPersistenceKey=I4("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?L0._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new t2(B0(_se),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||B0(_se);const s=I4(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(s);if(c){const f=L0._fromJSON(t,c);l!==o&&(a=f),o=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t2(o,t,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t2(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ese(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(r_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(e_e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(o_e(t))return"Blackberry";if(s_e(t))return"Webos";if(t_e(t))return"Safari";if((t.includes("chrome/")||n_e(t))&&!t.includes("edge/"))return"Chrome";if(i_e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function e_e(e=zu()){return/firefox\//i.test(e)}function t_e(e=zu()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function n_e(e=zu()){return/crios\//i.test(e)}function r_e(e=zu()){return/iemobile/i.test(e)}function i_e(e=zu()){return/android/i.test(e)}function o_e(e=zu()){return/blackberry/i.test(e)}function s_e(e=zu()){return/webos/i.test(e)}function yK(e=zu()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function kot(e=zu()){var t;return yK(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Iot(){return RJe()&&document.documentMode===10}function a_e(e=zu()){return yK(e)||i_e(e)||s_e(e)||o_e(e)||/windows phone/i.test(e)||r_e(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_e(e,t=[]){let n;switch(e){case"Browser":n=Ese(zu());break;case"Worker":n=`${Ese(zu())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ow}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rot{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((s,a)=>{try{const u=t(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Not(e,t={}){return nC(e,"GET","/v2/passwordPolicy",l8(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pot=6;class Oot{constructor(t){var n,r,i,o;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Pot,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fot{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tse(this),this.idTokenSubscription=new Tse(this),this.beforeStateQueue=new Rot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wwe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=B0(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await t2.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await Qwe(this,{idToken:t}),r=await L0._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Lp(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!s||s===a)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await k6(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=yot()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Lp(this.app))return Promise.reject(c1(this));const n=t?Wi(t):null;return n&&qn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&qn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Lp(this.app)?Promise.reject(c1(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Lp(this.app)?Promise.reject(c1(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(B0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Not(this),n=new Oot(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new KT("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Dot(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&B0(t)||this._popupRedirectResolver;qn(n,this,"argument-error"),this.redirectPersistenceManager=await t2.create(this,[B0(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(qn(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{s=!0,u()}}else{const u=t.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return qn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=u_e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&hot(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qI(e){return Wi(e)}class Tse{constructor(t){this.auth=t,this.observer=null,this.addObserver=LJe(n=>this.observer=n)}get next(){return qn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vK={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mot(e){vK=e}function $ot(e){return vK.loadJS(e)}function Lot(){return vK.gapiScript}function Bot(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jot(e,t){const n=XT(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(hk(o,t??{}))return i;lm(i,"already-initialized")}return n.initialize({options:t})}function zot(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(B0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Uot(e,t,n){const r=qI(e);qn(r._canInitEmulator,r,"emulator-config-failed"),qn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,o=l_e(t),{host:s,port:a}=Vot(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),Hot()}function l_e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Vot(e){const t=l_e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Cse(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Cse(s)}}}function Cse(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Hot(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return $0("not implemented")}_getIdTokenResponse(t){return $0("not implemented")}_linkToIdToken(t,n){return $0("not implemented")}_getReauthenticationResolver(t){return $0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(e,t){return Kwe(e,"POST","/v1/accounts:signInWithIdp",l8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qot="http://localhost";class vx extends c_e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new vx(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):lm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,o=pI(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new vx(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(t){const n=this.buildRequest();return n2(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,n2(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,n2(t,n)}buildRequest(){const t={requestUri:qot,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=OI(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI extends bK{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends WI{constructor(){super("facebook.com")}static credential(t){return vx._fromParams({providerId:Vy.PROVIDER_ID,signInMethod:Vy.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vy.credentialFromTaggedObject(t)}static credentialFromError(t){return Vy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vy.credential(t.oauthAccessToken)}catch{return null}}}Vy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends WI{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return vx._fromParams({providerId:P0.PROVIDER_ID,signInMethod:P0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return P0.credentialFromTaggedObject(t)}static credentialFromError(t){return P0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return P0.credential(n,r)}catch{return null}}}P0.GOOGLE_SIGN_IN_METHOD="google.com";P0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends WI{constructor(){super("github.com")}static credential(t){return vx._fromParams({providerId:Hy.PROVIDER_ID,signInMethod:Hy.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hy.credentialFromTaggedObject(t)}static credentialFromError(t){return Hy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hy.credential(t.oauthAccessToken)}catch{return null}}}Hy.GITHUB_SIGN_IN_METHOD="github.com";Hy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends WI{constructor(){super("twitter.com")}static credential(t,n){return vx._fromParams({providerId:qy.PROVIDER_ID,signInMethod:qy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return qy.credentialFromTaggedObject(t)}static credentialFromError(t){return qy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return qy.credential(n,r)}catch{return null}}}qy.TWITTER_SIGN_IN_METHOD="twitter.com";qy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wot(e,t){return Kwe(e,"POST","/v1/accounts:signUp",l8(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const o=await L0._fromIdTokenResponse(t,r,i),s=Sse(r);return new S1({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Sse(r);return new S1({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Sse(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Got(e){var t;if(Lp(e.app))return Promise.reject(c1(e));const n=qI(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new S1({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Wot(n,{returnSecureToken:!0}),i=await S1._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6 extends Cm{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,I6.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new I6(t,n,r,i)}}function f_e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?I6._fromErrorAndOperation(e,o,t,r):o})}async function Yot(e,t,n=!1){const r=await Ck(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return S1._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kot(e,t,n=!1){const{auth:r}=e;if(Lp(r.app))return Promise.reject(c1(r));const i="reauthenticate";try{const o=await Ck(e,f_e(r,i,t,e),n);qn(o.idToken,r,"internal-error");const s=gK(o.idToken);qn(s,r,"internal-error");const{sub:a}=s;return qn(e.uid===a,r,"user-mismatch"),S1._forOperation(e,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&lm(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xot(e,t,n=!1){if(Lp(e.app))return Promise.reject(c1(e));const r="signIn",i=await f_e(e,r,t),o=await S1._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}function Qot(e,t,n,r){return Wi(e).onIdTokenChanged(t,n,r)}function Jot(e,t,n){return Wi(e).beforeAuthStateChanged(t,n)}function Zot(e,t,n,r){return Wi(e).onAuthStateChanged(t,n,r)}function est(e){return Wi(e).signOut()}const R6="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(R6,"1"),this.storage.removeItem(R6),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tst=1e3,nst=10;class h_e extends d_e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a_e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);Iot()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,nst):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},tst)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}h_e.type="LOCAL";const rst=h_e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_e extends d_e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}p_e.type="SESSION";const m_e=p_e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ist(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new c8(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async l=>l(n.origin,o)),u=await ist(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}c8.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xK(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ost{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const l=xK("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){return window}function sst(e){qp().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_e(){return typeof qp().WorkerGlobalScope<"u"&&typeof qp().importScripts=="function"}async function ast(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ust(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function lst(){return g_e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_e="firebaseLocalStorageDb",cst=1,N6="firebaseLocalStorage",v_e="fbase_key";class GI{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function f8(e,t){return e.transaction([N6],t?"readwrite":"readonly").objectStore(N6)}function fst(){const e=indexedDB.deleteDatabase(y_e);return new GI(e).toPromise()}function FU(){const e=indexedDB.open(y_e,cst);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(N6,{keyPath:v_e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(N6)?t(r):(r.close(),await fst(),t(await FU()))})})}async function Ase(e,t,n){const r=f8(e,!0).put({[v_e]:t,value:n});return new GI(r).toPromise()}async function dst(e,t){const n=f8(e,!1).get(t),r=await new GI(n).toPromise();return r===void 0?null:r.value}function Dse(e,t){const n=f8(e,!0).delete(t);return new GI(n).toPromise()}const hst=800,pst=3;class b_e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await FU(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>pst)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g_e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=c8._getInstance(lst()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await ast(),!this.activeServiceWorker)return;this.sender=new ost(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ust()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await FU();return await Ase(t,R6,"1"),await Dse(t,R6),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ase(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>dst(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dse(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=f8(i,!1).getAll();return new GI(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hst)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b_e.type="LOCAL";const mst=b_e;new HI(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_e(e,t){return t?B0(t):(qn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK extends c_e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return n2(t,this._buildIdpRequest())}_linkToIdToken(t,n){return n2(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return n2(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function gst(e){return Xot(e.auth,new wK(e),e.bypassAuthState)}function yst(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),Kot(n,new wK(e),e.bypassAuthState)}async function vst(e){const{auth:t,user:n}=e;return qn(n,t,"internal-error"),Yot(n,new wK(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_e{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return gst;case"linkViaPopup":case"linkViaRedirect":return vst;case"reauthViaPopup":case"reauthViaRedirect":return yst;default:lm(this.auth,"internal-error")}}resolve(t){mg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){mg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bst=new HI(2e3,1e4);async function xst(e,t,n){if(Lp(e.app))return Promise.reject(xh(e,"operation-not-supported-in-this-environment"));const r=qI(e);pot(e,t,bK);const i=x_e(r,n);return new Xb(r,"signInViaPopup",t,i).executeNotNull()}class Xb extends w_e{constructor(t,n,r,i,o){super(t,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Xb.currentPopupAction&&Xb.currentPopupAction.cancel(),Xb.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return qn(t,this.auth,"internal-error"),t}async onExecution(){mg(this.filter.length===1,"Popup operations only handle one event");const t=xK();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(xh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xb.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,bst.get())};t()}}Xb.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wst="pendingRedirect",R4=new Map;class _st extends w_e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=R4.get(this.auth._key());if(!t){try{const r=await Est(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}R4.set(this.auth._key(),t)}return this.bypassAuthState||R4.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Est(e,t){const n=Sst(t),r=Cst(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Tst(e,t){R4.set(e._key(),t)}function Cst(e){return B0(e._redirectPersistence)}function Sst(e){return I4(wst,e.config.apiKey,e.name)}async function Ast(e,t,n=!1){if(Lp(e.app))return Promise.reject(c1(e));const r=qI(e),i=x_e(r,t),s=await new _st(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dst=10*60*1e3;class kst{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Ist(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!__e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xh(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Dst&&this.cachedEventUids.clear(),this.cachedEventUids.has(kse(t))}saveEventToCache(t){this.cachedEventUids.add(kse(t)),this.lastProcessedEventTime=Date.now()}}function kse(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function __e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Ist(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return __e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rst(e,t={}){return nC(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nst=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pst=/^https?/;async function Ost(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Rst(e);for(const n of t)try{if(Fst(n))return}catch{}lm(e,"unauthorized-domain")}function Fst(e){const t=PU(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return s.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Pst.test(n))return!1;if(Nst.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mst=new HI(3e4,6e4);function Ise(){const e=qp().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function $st(e){return new Promise((t,n)=>{var r,i,o;function s(){Ise(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ise(),n(xh(e,"network-request-failed"))},timeout:Mst.get()})}if(!((i=(r=qp().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=qp().gapi)===null||o===void 0)&&o.load)s();else{const a=Bot("iframefcb");return qp()[a]=()=>{gapi.load?s():n(xh(e,"network-request-failed"))},$ot(`${Lot()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw N4=null,t})}let N4=null;function Lst(e){return N4=N4||$st(e),N4}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bst=new HI(5e3,15e3),jst="__/auth/iframe",zst="emulator/auth/iframe",Ust={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vst=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hst(e){const t=e.config;qn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?mK(t,zst):`https://${e.config.authDomain}/${jst}`,r={apiKey:t.apiKey,appName:e.name,v:ow},i=Vst.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${OI(r).slice(1)}`}async function qst(e){const t=await Lst(e),n=qp().gapi;return qn(n,e,"internal-error"),t.open({where:document.body,url:Hst(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ust,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=xh(e,"network-request-failed"),a=qp().setTimeout(()=>{o(s)},Bst.get());function u(){qp().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wst={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gst=500,Yst=600,Kst="_blank",Xst="http://localhost";class Rse{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qst(e,t,n,r=Gst,i=Yst){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Wst),{width:r.toString(),height:i.toString(),top:o,left:s}),l=zu().toLowerCase();n&&(a=n_e(l)?Kst:n),e_e(l)&&(t=t||Xst,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,m])=>`${d}${h}=${m},`,"");if(kot(l)&&a!=="_self")return Jst(t||"",a),new Rse(null);const f=window.open(t||"",a,c);qn(f,e,"popup-blocked");try{f.focus()}catch{}return new Rse(f)}function Jst(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zst="__/auth/handler",eat="emulator/auth/handler",tat=encodeURIComponent("fac");async function Nse(e,t,n,r,i,o){qn(e.config.authDomain,e,"auth-domain-config-required"),qn(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ow,eventId:i};if(t instanceof bK){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",$Je(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))s[c]=f}if(t instanceof WI){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(s.scopes=c.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${tat}=${encodeURIComponent(u)}`:"";return`${nat(e)}?${OI(a).slice(1)}${l}`}function nat({config:e}){return e.emulator?mK(e,eat):`https://${e.authDomain}/${Zst}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB="webStorageSupport";class rat{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m_e,this._completeRedirectFn=Ast,this._overrideRedirectResult=Tst}async _openPopup(t,n,r,i){var o;mg((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Nse(t,n,r,PU(),i);return Qst(t,s,xK())}async _openRedirect(t,n,r,i){await this._originValidation(t);const o=await Nse(t,n,r,PU(),i);return sst(o),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(mg(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await qst(t),r=new kst(t);return n.register("authEvent",i=>(qn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(YB,{type:YB},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[YB];s!==void 0&&n(!!s),lm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ost(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return a_e()||t_e()||yK()}}const E_e=rat;var Pse="@firebase/auth",Ose="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iat{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){qn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oat(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sat(e){dg(new sm("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;qn(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:u_e(e)},l=new Fot(r,i,o,u);return zot(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),dg(new sm("auth-internal",t=>{const n=qI(t.getProvider("auth").getImmediate());return(r=>new iat(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bh(Pse,Ose,oat(e)),bh(Pse,Ose,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aat=5*60,uat=zbe("authIdTokenMaxAge")||aat;let Fse=null;const lat=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>uat)return;const i=n==null?void 0:n.token;Fse!==i&&(Fse=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function P6(e=xY()){const t=XT(e,"auth");if(t.isInitialized())return t.getImmediate();const n=jot(e,{popupRedirectResolver:E_e,persistence:[mst,rst,m_e]}),r=zbe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=lat(o.toString());Jot(n,s,()=>s(n.currentUser)),Qot(n,a=>s(a))}}const i=Bbe("auth");return i&&Uot(n,`http://${i}`),n}function cat(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Mot({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=xh("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",cat().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sat("Browser");function $A(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KB={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Mse;function fat(){return Mse||(Mse=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(l,c){if(!i[l]){if(!r[l]){var f=typeof $A=="function"&&$A;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(m){var p=r[l][1][m];return s(p||m)},h,h.exports,n,r,i,o)}return i[l].exports}for(var a=typeof $A=="function"&&$A,u=0;u<o.length;u++)s(o[u]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,a;if(s){var u=0,l=new s(m),c=o.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var f=new o.MessageChannel;f.port1.onmessage=m,a=function(){f.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?a=function(){var g=o.document.createElement("script");g.onreadystatechange=function(){m(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:a=function(){setTimeout(m,0)};var d,h=[];function m(){d=!0;for(var g,v,b=h.length;b;){for(v=h,h=[],g=-1;++g<b;)v[g]();b=h.length}d=!1}r.exports=p;function p(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Bs<"u"?Bs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,T!==s&&p(this,T)}f.prototype.catch=function(T){return this.then(null,T)},f.prototype.then=function(T,C){if(typeof T!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var S=new this.constructor(s);if(this.state!==c){var I=this.state===l?T:C;h(S,I,this.outcome)}else this.queue.push(new d(S,T,C));return S};function d(T,C,S){this.promise=T,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},d.prototype.otherCallFulfilled=function(T){h(this.promise,this.onFulfilled,T)},d.prototype.callRejected=function(T){a.reject(this.promise,T)},d.prototype.otherCallRejected=function(T){h(this.promise,this.onRejected,T)};function h(T,C,S){o(function(){var I;try{I=C(S)}catch(R){return a.reject(T,R)}I===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,I)})}a.resolve=function(T,C){var S=g(m,C);if(S.status==="error")return a.reject(T,S.value);var I=S.value;if(I)p(T,I);else{T.state=l,T.outcome=C;for(var R=-1,P=T.queue.length;++R<P;)T.queue[R].callFulfilled(C)}return T},a.reject=function(T,C){T.state=u,T.outcome=C;for(var S=-1,I=T.queue.length;++S<I;)T.queue[S].callRejected(C);return T};function m(T){var C=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof C=="function")return function(){C.apply(T,arguments)}}function p(T,C){var S=!1;function I(B){S||(S=!0,a.reject(T,B))}function R(B){S||(S=!0,a.resolve(T,B))}function P(){C(R,I)}var M=g(P);M.status==="error"&&I(M.value)}function g(T,C){var S={};try{S.value=T(C),S.status="success"}catch(I){S.status="error",S.value=I}return S}f.resolve=v;function v(T){return T instanceof this?T:a.resolve(new this(s),T)}f.reject=b;function b(T){var C=new this(s);return a.reject(C,T)}f.all=w;function w(T){var C=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=T.length,I=!1;if(!S)return this.resolve([]);for(var R=new Array(S),P=0,M=-1,B=new this(s);++M<S;)L(T[M],M);return B;function L(z,G){C.resolve(z).then(W,function(te){I||(I=!0,a.reject(B,te))});function W(te){R[G]=te,++P===S&&!I&&(I=!0,a.resolve(B,R))}}}f.race=E;function E(T){var C=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=T.length,I=!1;if(!S)return this.resolve([]);for(var R=-1,P=new this(s);++R<S;)M(T[R]);return P;function M(B){C.resolve(B).then(function(L){I||(I=!0,a.resolve(P,L))},function(L){I||(I=!0,a.reject(P,L))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof Bs<"u"?Bs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue};function s(ue,Ae){if(!(ue instanceof Ae))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ue=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Ae=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ue||Ae)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ue,Ae){ue=ue||[],Ae=Ae||{};try{return new Blob(ue,Ae)}catch(Me){if(Me.name!=="TypeError")throw Me;for(var ye=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,$e=new ye,je=0;je<ue.length;je+=1)$e.append(ue[je]);return $e.getBlob(Ae.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ue,Ae){Ae&&ue.then(function(ye){Ae(null,ye)},function(ye){Ae(ye)})}function h(ue,Ae,ye){typeof Ae=="function"&&ue.then(Ae),typeof ye=="function"&&ue.catch(ye)}function m(ue){return typeof ue!="string"&&(console.warn(ue+" used as a key, but it is not a string."),ue=String(ue)),ue}function p(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",v=void 0,b={},w=Object.prototype.toString,E="readonly",T="readwrite";function C(ue){for(var Ae=ue.length,ye=new ArrayBuffer(Ae),$e=new Uint8Array(ye),je=0;je<Ae;je++)$e[je]=ue.charCodeAt(je);return ye}function S(ue){return new f(function(Ae){var ye=ue.transaction(g,T),$e=c([""]);ye.objectStore(g).put($e,"key"),ye.onabort=function(je){je.preventDefault(),je.stopPropagation(),Ae(!1)},ye.oncomplete=function(){var je=navigator.userAgent.match(/Chrome\/(\d+)/),Me=navigator.userAgent.match(/Edge\//);Ae(Me||!je||parseInt(je[1],10)>=43)}}).catch(function(){return!1})}function I(ue){return typeof v=="boolean"?f.resolve(v):S(ue).then(function(Ae){return v=Ae,v})}function R(ue){var Ae=b[ue.name],ye={};ye.promise=new f(function($e,je){ye.resolve=$e,ye.reject=je}),Ae.deferredOperations.push(ye),Ae.dbReady?Ae.dbReady=Ae.dbReady.then(function(){return ye.promise}):Ae.dbReady=ye.promise}function P(ue){var Ae=b[ue.name],ye=Ae.deferredOperations.pop();if(ye)return ye.resolve(),ye.promise}function M(ue,Ae){var ye=b[ue.name],$e=ye.deferredOperations.pop();if($e)return $e.reject(Ae),$e.promise}function B(ue,Ae){return new f(function(ye,$e){if(b[ue.name]=b[ue.name]||Y(),ue.db)if(Ae)R(ue),ue.db.close();else return ye(ue.db);var je=[ue.name];Ae&&je.push(ue.version);var Me=u.open.apply(u,je);Ae&&(Me.onupgradeneeded=function(lt){var wt=Me.result;try{wt.createObjectStore(ue.storeName),lt.oldVersion<=1&&wt.createObjectStore(g)}catch(Tt){if(Tt.name==="ConstraintError")console.warn('The database "'+ue.name+'" has been upgraded from version '+lt.oldVersion+" to version "+lt.newVersion+', but the storage "'+ue.storeName+'" already exists.');else throw Tt}}),Me.onerror=function(lt){lt.preventDefault(),$e(Me.error)},Me.onsuccess=function(){var lt=Me.result;lt.onversionchange=function(wt){wt.target.close()},ye(lt),P(ue)}})}function L(ue){return B(ue,!1)}function z(ue){return B(ue,!0)}function G(ue,Ae){if(!ue.db)return!0;var ye=!ue.db.objectStoreNames.contains(ue.storeName),$e=ue.version<ue.db.version,je=ue.version>ue.db.version;if($e&&(ue.version!==Ae&&console.warn('The database "'+ue.name+`" can't be downgraded from version `+ue.db.version+" to version "+ue.version+"."),ue.version=ue.db.version),je||ye){if(ye){var Me=ue.db.version+1;Me>ue.version&&(ue.version=Me)}return!0}return!1}function W(ue){return new f(function(Ae,ye){var $e=new FileReader;$e.onerror=ye,$e.onloadend=function(je){var Me=btoa(je.target.result||"");Ae({__local_forage_encoded_blob:!0,data:Me,type:ue.type})},$e.readAsBinaryString(ue)})}function te(ue){var Ae=C(atob(ue.data));return c([Ae],{type:ue.type})}function Z(ue){return ue&&ue.__local_forage_encoded_blob}function re(ue){var Ae=this,ye=Ae._initReady().then(function(){var $e=b[Ae._dbInfo.name];if($e&&$e.dbReady)return $e.dbReady});return h(ye,ue,ue),ye}function q(ue){R(ue);for(var Ae=b[ue.name],ye=Ae.forages,$e=0;$e<ye.length;$e++){var je=ye[$e];je._dbInfo.db&&(je._dbInfo.db.close(),je._dbInfo.db=null)}return ue.db=null,L(ue).then(function(Me){return ue.db=Me,G(ue)?z(ue):Me}).then(function(Me){ue.db=Ae.db=Me;for(var lt=0;lt<ye.length;lt++)ye[lt]._dbInfo.db=Me}).catch(function(Me){throw M(ue,Me),Me})}function U(ue,Ae,ye,$e){$e===void 0&&($e=1);try{var je=ue.db.transaction(ue.storeName,Ae);ye(null,je)}catch(Me){if($e>0&&(!ue.db||Me.name==="InvalidStateError"||Me.name==="NotFoundError"))return f.resolve().then(function(){if(!ue.db||Me.name==="NotFoundError"&&!ue.db.objectStoreNames.contains(ue.storeName)&&ue.version<=ue.db.version)return ue.db&&(ue.version=ue.db.version+1),z(ue)}).then(function(){return q(ue).then(function(){U(ue,Ae,ye,$e-1)})}).catch(ye);ye(Me)}}function Y(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function H(ue){var Ae=this,ye={db:null};if(ue)for(var $e in ue)ye[$e]=ue[$e];var je=b[ye.name];je||(je=Y(),b[ye.name]=je),je.forages.push(Ae),Ae._initReady||(Ae._initReady=Ae.ready,Ae.ready=re);var Me=[];function lt(){return f.resolve()}for(var wt=0;wt<je.forages.length;wt++){var Tt=je.forages[wt];Tt!==Ae&&Me.push(Tt._initReady().catch(lt))}var _t=je.forages.slice(0);return f.all(Me).then(function(){return ye.db=je.db,L(ye)}).then(function(Ot){return ye.db=Ot,G(ye,Ae._defaultConfig.version)?z(ye):Ot}).then(function(Ot){ye.db=je.db=Ot,Ae._dbInfo=ye;for(var Wt=0;Wt<_t.length;Wt++){var On=_t[Wt];On!==Ae&&(On._dbInfo.db=ye.db,On._dbInfo.version=ye.version)}})}function X(ue,Ae){var ye=this;ue=m(ue);var $e=new f(function(je,Me){ye.ready().then(function(){U(ye._dbInfo,E,function(lt,wt){if(lt)return Me(lt);try{var Tt=wt.objectStore(ye._dbInfo.storeName),_t=Tt.get(ue);_t.onsuccess=function(){var Ot=_t.result;Ot===void 0&&(Ot=null),Z(Ot)&&(Ot=te(Ot)),je(Ot)},_t.onerror=function(){Me(_t.error)}}catch(Ot){Me(Ot)}})}).catch(Me)});return d($e,Ae),$e}function ee(ue,Ae){var ye=this,$e=new f(function(je,Me){ye.ready().then(function(){U(ye._dbInfo,E,function(lt,wt){if(lt)return Me(lt);try{var Tt=wt.objectStore(ye._dbInfo.storeName),_t=Tt.openCursor(),Ot=1;_t.onsuccess=function(){var Wt=_t.result;if(Wt){var On=Wt.value;Z(On)&&(On=te(On));var dn=ue(On,Wt.key,Ot++);dn!==void 0?je(dn):Wt.continue()}else je()},_t.onerror=function(){Me(_t.error)}}catch(Wt){Me(Wt)}})}).catch(Me)});return d($e,Ae),$e}function le(ue,Ae,ye){var $e=this;ue=m(ue);var je=new f(function(Me,lt){var wt;$e.ready().then(function(){return wt=$e._dbInfo,w.call(Ae)==="[object Blob]"?I(wt.db).then(function(Tt){return Tt?Ae:W(Ae)}):Ae}).then(function(Tt){U($e._dbInfo,T,function(_t,Ot){if(_t)return lt(_t);try{var Wt=Ot.objectStore($e._dbInfo.storeName);Tt===null&&(Tt=void 0);var On=Wt.put(Tt,ue);Ot.oncomplete=function(){Tt===void 0&&(Tt=null),Me(Tt)},Ot.onabort=Ot.onerror=function(){var dn=On.error?On.error:On.transaction.error;lt(dn)}}catch(dn){lt(dn)}})}).catch(lt)});return d(je,ye),je}function Ee(ue,Ae){var ye=this;ue=m(ue);var $e=new f(function(je,Me){ye.ready().then(function(){U(ye._dbInfo,T,function(lt,wt){if(lt)return Me(lt);try{var Tt=wt.objectStore(ye._dbInfo.storeName),_t=Tt.delete(ue);wt.oncomplete=function(){je()},wt.onerror=function(){Me(_t.error)},wt.onabort=function(){var Ot=_t.error?_t.error:_t.transaction.error;Me(Ot)}}catch(Ot){Me(Ot)}})}).catch(Me)});return d($e,Ae),$e}function be(ue){var Ae=this,ye=new f(function($e,je){Ae.ready().then(function(){U(Ae._dbInfo,T,function(Me,lt){if(Me)return je(Me);try{var wt=lt.objectStore(Ae._dbInfo.storeName),Tt=wt.clear();lt.oncomplete=function(){$e()},lt.onabort=lt.onerror=function(){var _t=Tt.error?Tt.error:Tt.transaction.error;je(_t)}}catch(_t){je(_t)}})}).catch(je)});return d(ye,ue),ye}function Ce(ue){var Ae=this,ye=new f(function($e,je){Ae.ready().then(function(){U(Ae._dbInfo,E,function(Me,lt){if(Me)return je(Me);try{var wt=lt.objectStore(Ae._dbInfo.storeName),Tt=wt.count();Tt.onsuccess=function(){$e(Tt.result)},Tt.onerror=function(){je(Tt.error)}}catch(_t){je(_t)}})}).catch(je)});return d(ye,ue),ye}function Oe(ue,Ae){var ye=this,$e=new f(function(je,Me){if(ue<0){je(null);return}ye.ready().then(function(){U(ye._dbInfo,E,function(lt,wt){if(lt)return Me(lt);try{var Tt=wt.objectStore(ye._dbInfo.storeName),_t=!1,Ot=Tt.openKeyCursor();Ot.onsuccess=function(){var Wt=Ot.result;if(!Wt){je(null);return}ue===0||_t?je(Wt.key):(_t=!0,Wt.advance(ue))},Ot.onerror=function(){Me(Ot.error)}}catch(Wt){Me(Wt)}})}).catch(Me)});return d($e,Ae),$e}function me(ue){var Ae=this,ye=new f(function($e,je){Ae.ready().then(function(){U(Ae._dbInfo,E,function(Me,lt){if(Me)return je(Me);try{var wt=lt.objectStore(Ae._dbInfo.storeName),Tt=wt.openKeyCursor(),_t=[];Tt.onsuccess=function(){var Ot=Tt.result;if(!Ot){$e(_t);return}_t.push(Ot.key),Ot.continue()},Tt.onerror=function(){je(Tt.error)}}catch(Ot){je(Ot)}})}).catch(je)});return d(ye,ue),ye}function he(ue,Ae){Ae=p.apply(this,arguments);var ye=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ye.name,ue.storeName=ue.storeName||ye.storeName);var $e=this,je;if(!ue.name)je=f.reject("Invalid arguments");else{var Me=ue.name===ye.name&&$e._dbInfo.db,lt=Me?f.resolve($e._dbInfo.db):L(ue).then(function(wt){var Tt=b[ue.name],_t=Tt.forages;Tt.db=wt;for(var Ot=0;Ot<_t.length;Ot++)_t[Ot]._dbInfo.db=wt;return wt});ue.storeName?je=lt.then(function(wt){if(wt.objectStoreNames.contains(ue.storeName)){var Tt=wt.version+1;R(ue);var _t=b[ue.name],Ot=_t.forages;wt.close();for(var Wt=0;Wt<Ot.length;Wt++){var On=Ot[Wt];On._dbInfo.db=null,On._dbInfo.version=Tt}var dn=new f(function(Qn,hn){var lr=u.open(ue.name,Tt);lr.onerror=function(Io){var Ta=lr.result;Ta.close(),hn(Io)},lr.onupgradeneeded=function(){var Io=lr.result;Io.deleteObjectStore(ue.storeName)},lr.onsuccess=function(){var Io=lr.result;Io.close(),Qn(Io)}});return dn.then(function(Qn){_t.db=Qn;for(var hn=0;hn<Ot.length;hn++){var lr=Ot[hn];lr._dbInfo.db=Qn,P(lr._dbInfo)}}).catch(function(Qn){throw(M(ue,Qn)||f.resolve()).catch(function(){}),Qn})}}):je=lt.then(function(wt){R(ue);var Tt=b[ue.name],_t=Tt.forages;wt.close();for(var Ot=0;Ot<_t.length;Ot++){var Wt=_t[Ot];Wt._dbInfo.db=null}var On=new f(function(dn,Qn){var hn=u.deleteDatabase(ue.name);hn.onerror=function(){var lr=hn.result;lr&&lr.close(),Qn(hn.error)},hn.onblocked=function(){console.warn('dropInstance blocked for database "'+ue.name+'" until all open connections are closed')},hn.onsuccess=function(){var lr=hn.result;lr&&lr.close(),dn(lr)}});return On.then(function(dn){Tt.db=dn;for(var Qn=0;Qn<_t.length;Qn++){var hn=_t[Qn];P(hn._dbInfo)}}).catch(function(dn){throw(M(ue,dn)||f.resolve()).catch(function(){}),dn})})}return d(je,Ae),je}var Fe={_driver:"asyncStorage",_initStorage:H,_support:l(),iterate:ee,getItem:X,setItem:le,removeItem:Ee,clear:be,length:Ce,key:Oe,keys:me,dropInstance:he};function Pe(){return typeof openDatabase=="function"}var Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut="~~local_forage_type~",Ke=/^~~local_forage_type~([^~]+)~/,tt="__lfsc__:",pt=tt.length,Dt="arbf",St="blob",$t="si08",oe="ui08",xe="uic8",Re="si16",pe="si32",we="ur16",ke="ui32",Ge="fl32",Ve="fl64",at=pt+Dt.length,rt=Object.prototype.toString;function ln(ue){var Ae=ue.length*.75,ye=ue.length,$e,je=0,Me,lt,wt,Tt;ue[ue.length-1]==="="&&(Ae--,ue[ue.length-2]==="="&&Ae--);var _t=new ArrayBuffer(Ae),Ot=new Uint8Array(_t);for($e=0;$e<ye;$e+=4)Me=Je.indexOf(ue[$e]),lt=Je.indexOf(ue[$e+1]),wt=Je.indexOf(ue[$e+2]),Tt=Je.indexOf(ue[$e+3]),Ot[je++]=Me<<2|lt>>4,Ot[je++]=(lt&15)<<4|wt>>2,Ot[je++]=(wt&3)<<6|Tt&63;return _t}function xn(ue){var Ae=new Uint8Array(ue),ye="",$e;for($e=0;$e<Ae.length;$e+=3)ye+=Je[Ae[$e]>>2],ye+=Je[(Ae[$e]&3)<<4|Ae[$e+1]>>4],ye+=Je[(Ae[$e+1]&15)<<2|Ae[$e+2]>>6],ye+=Je[Ae[$e+2]&63];return Ae.length%3===2?ye=ye.substring(0,ye.length-1)+"=":Ae.length%3===1&&(ye=ye.substring(0,ye.length-2)+"=="),ye}function rn(ue,Ae){var ye="";if(ue&&(ye=rt.call(ue)),ue&&(ye==="[object ArrayBuffer]"||ue.buffer&&rt.call(ue.buffer)==="[object ArrayBuffer]")){var $e,je=tt;ue instanceof ArrayBuffer?($e=ue,je+=Dt):($e=ue.buffer,ye==="[object Int8Array]"?je+=$t:ye==="[object Uint8Array]"?je+=oe:ye==="[object Uint8ClampedArray]"?je+=xe:ye==="[object Int16Array]"?je+=Re:ye==="[object Uint16Array]"?je+=we:ye==="[object Int32Array]"?je+=pe:ye==="[object Uint32Array]"?je+=ke:ye==="[object Float32Array]"?je+=Ge:ye==="[object Float64Array]"?je+=Ve:Ae(new Error("Failed to get type for BinaryArray"))),Ae(je+xn($e))}else if(ye==="[object Blob]"){var Me=new FileReader;Me.onload=function(){var lt=ut+ue.type+"~"+xn(this.result);Ae(tt+St+lt)},Me.readAsArrayBuffer(ue)}else try{Ae(JSON.stringify(ue))}catch(lt){console.error("Couldn't convert value into a JSON string: ",ue),Ae(null,lt)}}function bn(ue){if(ue.substring(0,pt)!==tt)return JSON.parse(ue);var Ae=ue.substring(at),ye=ue.substring(pt,at),$e;if(ye===St&&Ke.test(Ae)){var je=Ae.match(Ke);$e=je[1],Ae=Ae.substring(je[0].length)}var Me=ln(Ae);switch(ye){case Dt:return Me;case St:return c([Me],{type:$e});case $t:return new Int8Array(Me);case oe:return new Uint8Array(Me);case xe:return new Uint8ClampedArray(Me);case Re:return new Int16Array(Me);case we:return new Uint16Array(Me);case pe:return new Int32Array(Me);case ke:return new Uint32Array(Me);case Ge:return new Float32Array(Me);case Ve:return new Float64Array(Me);default:throw new Error("Unkown type: "+ye)}}var Hn={serialize:rn,deserialize:bn,stringToBuffer:ln,bufferToString:xn};function $n(ue,Ae,ye,$e){ue.executeSql("CREATE TABLE IF NOT EXISTS "+Ae.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ye,$e)}function Kr(ue){var Ae=this,ye={db:null};if(ue)for(var $e in ue)ye[$e]=typeof ue[$e]!="string"?ue[$e].toString():ue[$e];var je=new f(function(Me,lt){try{ye.db=openDatabase(ye.name,String(ye.version),ye.description,ye.size)}catch(wt){return lt(wt)}ye.db.transaction(function(wt){$n(wt,ye,function(){Ae._dbInfo=ye,Me()},function(Tt,_t){lt(_t)})},lt)});return ye.serializer=Hn,je}function Lr(ue,Ae,ye,$e,je,Me){ue.executeSql(ye,$e,je,function(lt,wt){wt.code===wt.SYNTAX_ERR?lt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Ae.storeName],function(Tt,_t){_t.rows.length?Me(Tt,wt):$n(Tt,Ae,function(){Tt.executeSql(ye,$e,je,Me)},Me)},Me):Me(lt,wt)},Me)}function Br(ue,Ae){var ye=this;ue=m(ue);var $e=new f(function(je,Me){ye.ready().then(function(){var lt=ye._dbInfo;lt.db.transaction(function(wt){Lr(wt,lt,"SELECT * FROM "+lt.storeName+" WHERE key = ? LIMIT 1",[ue],function(Tt,_t){var Ot=_t.rows.length?_t.rows.item(0).value:null;Ot&&(Ot=lt.serializer.deserialize(Ot)),je(Ot)},function(Tt,_t){Me(_t)})})}).catch(Me)});return d($e,Ae),$e}function mi(ue,Ae){var ye=this,$e=new f(function(je,Me){ye.ready().then(function(){var lt=ye._dbInfo;lt.db.transaction(function(wt){Lr(wt,lt,"SELECT * FROM "+lt.storeName,[],function(Tt,_t){for(var Ot=_t.rows,Wt=Ot.length,On=0;On<Wt;On++){var dn=Ot.item(On),Qn=dn.value;if(Qn&&(Qn=lt.serializer.deserialize(Qn)),Qn=ue(Qn,dn.key,On+1),Qn!==void 0){je(Qn);return}}je()},function(Tt,_t){Me(_t)})})}).catch(Me)});return d($e,Ae),$e}function Er(ue,Ae,ye,$e){var je=this;ue=m(ue);var Me=new f(function(lt,wt){je.ready().then(function(){Ae===void 0&&(Ae=null);var Tt=Ae,_t=je._dbInfo;_t.serializer.serialize(Ae,function(Ot,Wt){Wt?wt(Wt):_t.db.transaction(function(On){Lr(On,_t,"INSERT OR REPLACE INTO "+_t.storeName+" (key, value) VALUES (?, ?)",[ue,Ot],function(){lt(Tt)},function(dn,Qn){wt(Qn)})},function(On){if(On.code===On.QUOTA_ERR){if($e>0){lt(Er.apply(je,[ue,Tt,ye,$e-1]));return}wt(On)}})})}).catch(wt)});return d(Me,ye),Me}function Do(ue,Ae,ye){return Er.apply(this,[ue,Ae,ye,1])}function iu(ue,Ae){var ye=this;ue=m(ue);var $e=new f(function(je,Me){ye.ready().then(function(){var lt=ye._dbInfo;lt.db.transaction(function(wt){Lr(wt,lt,"DELETE FROM "+lt.storeName+" WHERE key = ?",[ue],function(){je()},function(Tt,_t){Me(_t)})})}).catch(Me)});return d($e,Ae),$e}function hs(ue){var Ae=this,ye=new f(function($e,je){Ae.ready().then(function(){var Me=Ae._dbInfo;Me.db.transaction(function(lt){Lr(lt,Me,"DELETE FROM "+Me.storeName,[],function(){$e()},function(wt,Tt){je(Tt)})})}).catch(je)});return d(ye,ue),ye}function Ks(ue){var Ae=this,ye=new f(function($e,je){Ae.ready().then(function(){var Me=Ae._dbInfo;Me.db.transaction(function(lt){Lr(lt,Me,"SELECT COUNT(key) as c FROM "+Me.storeName,[],function(wt,Tt){var _t=Tt.rows.item(0).c;$e(_t)},function(wt,Tt){je(Tt)})})}).catch(je)});return d(ye,ue),ye}function Tr(ue,Ae){var ye=this,$e=new f(function(je,Me){ye.ready().then(function(){var lt=ye._dbInfo;lt.db.transaction(function(wt){Lr(wt,lt,"SELECT key FROM "+lt.storeName+" WHERE id = ? LIMIT 1",[ue+1],function(Tt,_t){var Ot=_t.rows.length?_t.rows.item(0).key:null;je(Ot)},function(Tt,_t){Me(_t)})})}).catch(Me)});return d($e,Ae),$e}function li(ue){var Ae=this,ye=new f(function($e,je){Ae.ready().then(function(){var Me=Ae._dbInfo;Me.db.transaction(function(lt){Lr(lt,Me,"SELECT key FROM "+Me.storeName,[],function(wt,Tt){for(var _t=[],Ot=0;Ot<Tt.rows.length;Ot++)_t.push(Tt.rows.item(Ot).key);$e(_t)},function(wt,Tt){je(Tt)})})}).catch(je)});return d(ye,ue),ye}function Dr(ue){return new f(function(Ae,ye){ue.transaction(function($e){$e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(je,Me){for(var lt=[],wt=0;wt<Me.rows.length;wt++)lt.push(Me.rows.item(wt).name);Ae({db:ue,storeNames:lt})},function(je,Me){ye(Me)})},function($e){ye($e)})})}function no(ue,Ae){Ae=p.apply(this,arguments);var ye=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ye.name,ue.storeName=ue.storeName||ye.storeName);var $e=this,je;return ue.name?je=new f(function(Me){var lt;ue.name===ye.name?lt=$e._dbInfo.db:lt=openDatabase(ue.name,"","",0),ue.storeName?Me({db:lt,storeNames:[ue.storeName]}):Me(Dr(lt))}).then(function(Me){return new f(function(lt,wt){Me.db.transaction(function(Tt){function _t(dn){return new f(function(Qn,hn){Tt.executeSql("DROP TABLE IF EXISTS "+dn,[],function(){Qn()},function(lr,Io){hn(Io)})})}for(var Ot=[],Wt=0,On=Me.storeNames.length;Wt<On;Wt++)Ot.push(_t(Me.storeNames[Wt]));f.all(Ot).then(function(){lt()}).catch(function(dn){wt(dn)})},function(Tt){wt(Tt)})})}):je=f.reject("Invalid arguments"),d(je,Ae),je}var vr={_driver:"webSQLStorage",_initStorage:Kr,_support:Pe(),iterate:mi,getItem:Br,setItem:Do,removeItem:iu,clear:hs,length:Ks,key:Tr,keys:li,dropInstance:no};function gi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ko(ue,Ae){var ye=ue.name+"/";return ue.storeName!==Ae.storeName&&(ye+=ue.storeName+"/"),ye}function po(){var ue="_localforage_support_test";try{return localStorage.setItem(ue,!0),localStorage.removeItem(ue),!1}catch{return!0}}function Ko(){return!po()||localStorage.length>0}function Ea(ue){var Ae=this,ye={};if(ue)for(var $e in ue)ye[$e]=ue[$e];return ye.keyPrefix=ko(ue,Ae._defaultConfig),Ko()?(Ae._dbInfo=ye,ye.serializer=Hn,f.resolve()):f.reject()}function Sc(ue){var Ae=this,ye=Ae.ready().then(function(){for(var $e=Ae._dbInfo.keyPrefix,je=localStorage.length-1;je>=0;je--){var Me=localStorage.key(je);Me.indexOf($e)===0&&localStorage.removeItem(Me)}});return d(ye,ue),ye}function pr(ue,Ae){var ye=this;ue=m(ue);var $e=ye.ready().then(function(){var je=ye._dbInfo,Me=localStorage.getItem(je.keyPrefix+ue);return Me&&(Me=je.serializer.deserialize(Me)),Me});return d($e,Ae),$e}function ou(ue,Ae){var ye=this,$e=ye.ready().then(function(){for(var je=ye._dbInfo,Me=je.keyPrefix,lt=Me.length,wt=localStorage.length,Tt=1,_t=0;_t<wt;_t++){var Ot=localStorage.key(_t);if(Ot.indexOf(Me)===0){var Wt=localStorage.getItem(Ot);if(Wt&&(Wt=je.serializer.deserialize(Wt)),Wt=ue(Wt,Ot.substring(lt),Tt++),Wt!==void 0)return Wt}}});return d($e,Ae),$e}function Ri(ue,Ae){var ye=this,$e=ye.ready().then(function(){var je=ye._dbInfo,Me;try{Me=localStorage.key(ue)}catch{Me=null}return Me&&(Me=Me.substring(je.keyPrefix.length)),Me});return d($e,Ae),$e}function ks(ue){var Ae=this,ye=Ae.ready().then(function(){for(var $e=Ae._dbInfo,je=localStorage.length,Me=[],lt=0;lt<je;lt++){var wt=localStorage.key(lt);wt.indexOf($e.keyPrefix)===0&&Me.push(wt.substring($e.keyPrefix.length))}return Me});return d(ye,ue),ye}function Xo(ue){var Ae=this,ye=Ae.keys().then(function($e){return $e.length});return d(ye,ue),ye}function Df(ue,Ae){var ye=this;ue=m(ue);var $e=ye.ready().then(function(){var je=ye._dbInfo;localStorage.removeItem(je.keyPrefix+ue)});return d($e,Ae),$e}function Ac(ue,Ae,ye){var $e=this;ue=m(ue);var je=$e.ready().then(function(){Ae===void 0&&(Ae=null);var Me=Ae;return new f(function(lt,wt){var Tt=$e._dbInfo;Tt.serializer.serialize(Ae,function(_t,Ot){if(Ot)wt(Ot);else try{localStorage.setItem(Tt.keyPrefix+ue,_t),lt(Me)}catch(Wt){(Wt.name==="QuotaExceededError"||Wt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&wt(Wt),wt(Wt)}})})});return d(je,ye),je}function Dl(ue,Ae){if(Ae=p.apply(this,arguments),ue=typeof ue!="function"&&ue||{},!ue.name){var ye=this.config();ue.name=ue.name||ye.name,ue.storeName=ue.storeName||ye.storeName}var $e=this,je;return ue.name?je=new f(function(Me){ue.storeName?Me(ko(ue,$e._defaultConfig)):Me(ue.name+"/")}).then(function(Me){for(var lt=localStorage.length-1;lt>=0;lt--){var wt=localStorage.key(lt);wt.indexOf(Me)===0&&localStorage.removeItem(wt)}}):je=f.reject("Invalid arguments"),d(je,Ae),je}var kl={_driver:"localStorageWrapper",_initStorage:Ea,_support:gi(),iterate:ou,getItem:pr,setItem:Ac,removeItem:Df,clear:Sc,length:Xo,key:Ri,keys:ks,dropInstance:Dl},Yu=function(Ae,ye){return Ae===ye||typeof Ae=="number"&&typeof ye=="number"&&isNaN(Ae)&&isNaN(ye)},Ku=function(Ae,ye){for(var $e=Ae.length,je=0;je<$e;){if(Yu(Ae[je],ye))return!0;je++}return!1},Is=Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"},en={},Bi={},mo={INDEXEDDB:Fe,WEBSQL:vr,LOCALSTORAGE:kl},ps=[mo.INDEXEDDB._driver,mo.WEBSQL._driver,mo.LOCALSTORAGE._driver],Ei=["dropInstance"],su=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ei),Dd={description:"",driver:ps.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Il(ue,Ae){ue[Ae]=function(){var ye=arguments;return ue.ready().then(function(){return ue[Ae].apply(ue,ye)})}}function Qo(){for(var ue=1;ue<arguments.length;ue++){var Ae=arguments[ue];if(Ae)for(var ye in Ae)Ae.hasOwnProperty(ye)&&(Is(Ae[ye])?arguments[0][ye]=Ae[ye].slice():arguments[0][ye]=Ae[ye])}return arguments[0]}var Qh=function(){function ue(Ae){s(this,ue);for(var ye in mo)if(mo.hasOwnProperty(ye)){var $e=mo[ye],je=$e._driver;this[ye]=je,en[je]||this.defineDriver($e)}this._defaultConfig=Qo({},Dd),this._config=Qo({},this._defaultConfig,Ae),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ue.prototype.config=function(ye){if((typeof ye>"u"?"undefined":o(ye))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var $e in ye){if($e==="storeName"&&(ye[$e]=ye[$e].replace(/\W/g,"_")),$e==="version"&&typeof ye[$e]!="number")return new Error("Database version must be a number.");this._config[$e]=ye[$e]}return"driver"in ye&&ye.driver?this.setDriver(this._config.driver):!0}else return typeof ye=="string"?this._config[ye]:this._config},ue.prototype.defineDriver=function(ye,$e,je){var Me=new f(function(lt,wt){try{var Tt=ye._driver,_t=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ye._driver){wt(_t);return}for(var Ot=su.concat("_initStorage"),Wt=0,On=Ot.length;Wt<On;Wt++){var dn=Ot[Wt],Qn=!Ku(Ei,dn);if((Qn||ye[dn])&&typeof ye[dn]!="function"){wt(_t);return}}var hn=function(){for(var Ta=function(ms){return function(){var Yi=new Error("Method "+ms+" is not implemented by the current driver"),gs=f.reject(Yi);return d(gs,arguments[arguments.length-1]),gs}},Rl=0,kd=Ei.length;Rl<kd;Rl++){var Dc=Ei[Rl];ye[Dc]||(ye[Dc]=Ta(Dc))}};hn();var lr=function(Ta){en[Tt]&&console.info("Redefining LocalForage driver: "+Tt),en[Tt]=ye,Bi[Tt]=Ta,lt()};"_support"in ye?ye._support&&typeof ye._support=="function"?ye._support().then(lr,wt):lr(!!ye._support):lr(!0)}catch(Io){wt(Io)}});return h(Me,$e,je),Me},ue.prototype.driver=function(){return this._driver||null},ue.prototype.getDriver=function(ye,$e,je){var Me=en[ye]?f.resolve(en[ye]):f.reject(new Error("Driver not found."));return h(Me,$e,je),Me},ue.prototype.getSerializer=function(ye){var $e=f.resolve(Hn);return h($e,ye),$e},ue.prototype.ready=function(ye){var $e=this,je=$e._driverSet.then(function(){return $e._ready===null&&($e._ready=$e._initDriver()),$e._ready});return h(je,ye,ye),je},ue.prototype.setDriver=function(ye,$e,je){var Me=this;Is(ye)||(ye=[ye]);var lt=this._getSupportedDrivers(ye);function wt(){Me._config.driver=Me.driver()}function Tt(Wt){return Me._extend(Wt),wt(),Me._ready=Me._initStorage(Me._config),Me._ready}function _t(Wt){return function(){var On=0;function dn(){for(;On<Wt.length;){var Qn=Wt[On];return On++,Me._dbInfo=null,Me._ready=null,Me.getDriver(Qn).then(Tt).catch(dn)}wt();var hn=new Error("No available storage method found.");return Me._driverSet=f.reject(hn),Me._driverSet}return dn()}}var Ot=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Ot.then(function(){var Wt=lt[0];return Me._dbInfo=null,Me._ready=null,Me.getDriver(Wt).then(function(On){Me._driver=On._driver,wt(),Me._wrapLibraryMethodsWithReady(),Me._initDriver=_t(lt)})}).catch(function(){wt();var Wt=new Error("No available storage method found.");return Me._driverSet=f.reject(Wt),Me._driverSet}),h(this._driverSet,$e,je),this._driverSet},ue.prototype.supports=function(ye){return!!Bi[ye]},ue.prototype._extend=function(ye){Qo(this,ye)},ue.prototype._getSupportedDrivers=function(ye){for(var $e=[],je=0,Me=ye.length;je<Me;je++){var lt=ye[je];this.supports(lt)&&$e.push(lt)}return $e},ue.prototype._wrapLibraryMethodsWithReady=function(){for(var ye=0,$e=su.length;ye<$e;ye++)Il(this,su[ye])},ue.prototype.createInstance=function(ye){return new ue(ye)},ue}(),Jo=new Qh;r.exports=Jo},{3:3}]},{},[4])(4)})}(KB)),KB.exports}var dat=fat();const kE=_c(dat),Ma=[];for(let e=0;e<256;++e)Ma.push((e+256).toString(16).slice(1));function hat(e,t=0){return(Ma[e[t+0]]+Ma[e[t+1]]+Ma[e[t+2]]+Ma[e[t+3]]+"-"+Ma[e[t+4]]+Ma[e[t+5]]+"-"+Ma[e[t+6]]+Ma[e[t+7]]+"-"+Ma[e[t+8]]+Ma[e[t+9]]+"-"+Ma[e[t+10]]+Ma[e[t+11]]+Ma[e[t+12]]+Ma[e[t+13]]+Ma[e[t+14]]+Ma[e[t+15]]).toLowerCase()}let XB;const pat=new Uint8Array(16);function mat(){if(!XB){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");XB=crypto.getRandomValues.bind(crypto)}return XB(pat)}const gat=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$se={randomUUID:gat};function O6(e,t,n){var i;if($se.randomUUID&&!e)return $se.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??mat();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hat(r)}class T_e{constructor(t){rl(this,"engine");rl(this,"connected",!1);rl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function F6(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")}function KS(e){return e.participantId!==void 0}class Qf extends T_e{constructor(){super("firebase");rl(this,"RECAPTCHAV3TOKEN","6Ld7v0cqAAAAACbRoSHv-PfJiq9wfYgjhXC4_e7Z");rl(this,"firestore");rl(this,"collectionPrefix","prod-");rl(this,"studyCollection");rl(this,"storage");rl(this,"studyId","");rl(this,"localForage",kE.createInstance({name:"currentParticipantId"}));rl(this,"participantData",null);rl(this,"userManagementData",{});const n=yJe.parse(`
{
  apiKey: "AIzaSyBNW230jLUCwld9aUjZRzIunyGMdaMXv6I",
  authDomain: "abrar-test-study.firebaseapp.com",
  projectId: "abrar-test-study",
  storageBucket: "abrar-test-study.appspot.com",
  messagingSenderId: "304916533445",
  appId: "1:304916533445:web:22d7fea7e8e3faea4ca0ac"
}
`),r=Hbe(n);this.firestore=dit(r,{}),this.storage=xoe();try{uot(r,{provider:new dK(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await pit(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=P6();if(!i.currentUser&&(await Got(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Jl(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const o=await this.getCurrentConfigHash(),s=await F6(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${s}`,"config",r),o&&o!==s){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(s),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,o,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(KS(a))return this.participantData=a,a;const l=await F6(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:o,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Qi(this.studyCollection,"configHash"),r=await x3(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=Qi(this.studyCollection,"configHash");await vu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Gc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),o=await Promise.all(i),s={};return n.forEach((a,u)=>s[a]=o[u]),s}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=O6(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const o=async s=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)},500))};n.addEventListener("dataavailable",o),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Qi(this.studyCollection,"sequenceAssignment");await vu(i,{});const o=Jl(i,"sequenceAssignment"),s=Qi(o,this.currentParticipantId),a=HB(o,ase("rejected","==",!0),ase("claimed","==",!1)),u=await eE(a);if(u.docs.length>0){const v=u.docs[0],b=v.data().timestamp;r.dataCollectionEnabled&&(await vu(v.ref,{claimed:!0}),await vu(s,{participantId:this.currentParticipantId,timestamp:b,rejected:!1,claimed:!1,completed:null,createdTime:w3()}))}else r.dataCollectionEnabled&&await vu(s,{participantId:this.currentParticipantId,timestamp:w3(),rejected:!1,claimed:!1,completed:null,createdTime:w3()});const l=HB(o,use("timestamp","asc")),f=(await eE(l)).docs.map(v=>v.data()),d=f.filter(v=>!v.rejected).findIndex(v=>v.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,m=n[h];if(!m)throw new Error("Latin square is empty");const g=f.sort((v,b)=>v.createdTime-b.createdTime).findIndex(v=>v.participantId===this.currentParticipantId)+1;return{currentRow:m,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await YS(n),i=[],o=r.items.map(async s=>{const a=await this._getFromFirebaseStorageByRef(s,"participantData");KS(a)&&i.push(a)});return await Promise.all(o),i}async getAudio(n,r){const i=xoe(),o=await p3(Gc(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",o),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return KS(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=O6();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=Qi(this.studyCollection,"sequenceAssignment"),i=Jl(r,"sequenceAssignment"),o=Qi(i,this.currentParticipantId);return await fse(o,{completed:w3()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Jl(this.firestore,"user-management"),i=await eE(r),o=Object.fromEntries(i.docs.map(s=>[s.id,s.data()]));this.userManagementData=o}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const o=await this.getUserManagementData("adminUsers");if(o&&o.adminUsersList){const s=Object.fromEntries(o.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const u=o.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await vu(Qi(this.firestore,"user-management","adminUsers"),{adminUsersList:o.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await vu(Qi(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(s=>s.email===n.email)||(i.push({email:n.email,uid:n.uid}),await vu(Qi(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await vu(Qi(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await vu(Qi(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Gc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await YS(r),o=[],s=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");KS(u)&&o.push(u)});return await Promise.all(s),o}async rejectParticipant(n,r,i){const o=Jl(this.firestore,`${this.collectionPrefix}${n}`),s=Gc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!a||!KS(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(s,"participantData",a);const u=Qi(o,"sequenceAssignment"),l=Jl(u,"sequenceAssignment"),c=Qi(l,r);await fse(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const o=Qi(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await vu(o,{[r]:i},{merge:!0})}async getModes(n){const r=Qi(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await x3(r);if(i.exists())return i.data();const o={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await vu(r,o),o}async getParticipantsStatusCounts(n){const r=Jl(this.firestore,`${this.collectionPrefix}${n}`),i=Qi(r,"sequenceAssignment"),o=Jl(i,"sequenceAssignment"),s=HB(o,use("timestamp","asc")),u=(await eE(s)).docs.map(m=>m.data()),l=u.filter(m=>m.completed&&!m.rejected).length,c=u.filter(m=>m.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const o=new Date,s=o.getUTCFullYear(),a=(o.getUTCMonth()+1).toString().padStart(2,"0"),u=o.getUTCDate().toString().padStart(2,"0"),l=o.getUTCHours().toString().padStart(2,"0"),c=o.getUTCMinutes().toString().padStart(2,"0"),f=o.getUTCSeconds().toString().padStart(2,"0"),d=`${s}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const m=[];if(r){const p=await this.removeSnapshotOrLive(i,!1);p.status==="FAILED"?m.push({title:p.error.title,message:p.error.message,color:"red"}):m.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return m.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:m}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=Qi(this.firestore,"metadata","collections"),i=await x3(r);if(i.exists()){const o=i.data();return Object.keys(o).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=o[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,o=[];try{const s=await this.createSnapshot(n,!0);return s.status==="FAILED"?(console.warn("No live data to capture."),o.push({title:s.error.title,message:s.error.message,color:"yellow"})):o.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),o.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:o}}catch(s){return console.error("Error trying to delete a snapshot",s),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=Qi(this.firestore,"metadata","collections");await vu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=Qi(this.firestore,"metadata","collections");return await vu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=Qi(this.firestore,"metadata","collections"),i=await x3(r);if(i.exists()){const o=i.data();o[n]?(delete o[n],await vu(r,o)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Gc(this.storage,n),o=(await YS(r)).items.map(s=>boe(s));await Promise.all(o)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Gc(this.storage,n),s=(await YS(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(s)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Gc(this.storage,n),o=Gc(this.storage,r),s=await p3(i),u=await(await fetch(s)).blob();await h3(o,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Jl(this.firestore,n),o=Qi(i,"sequenceAssignment"),s=Jl(o,"sequenceAssignment"),a=Jl(this.firestore,r),u=Qi(a,"sequenceAssignment");await vu(u,{});const l=Jl(u,"sequenceAssignment"),c=await eE(s),f=dse(this.firestore);c.docs.forEach(d=>{const h=Qi(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Jl(this.firestore,n),i=Qi(r,"sequenceAssignment"),o=Jl(i,"sequenceAssignment"),s=await eE(o),a=dse(this.firestore);s.forEach(u=>{const l=Qi(o,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Gc(this.storage,n);return(await YS(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let o={};try{const s=await p3(i),u=await(await fetch(s)).text();o=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return o}async _getFromFirebaseStorageByRef(n,r){let i={};try{const o=await p3(n),a=await(await fetch(o)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const o=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await h3(o,i);else if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await h3(o,s)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await h3(n,o)}}async _deleteFromFirebaseStorage(n,r){const i=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await boe(i)}}const C_e=F.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),rC=()=>F.useContext(C_e);function yat({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,o]=F.useState(t),[s,a]=F.useState(!1),{storageEngine:u}=Go(),l=async()=>{const h=P6();try{await est(h)}catch(m){console.error(`There was an issue signing-out the user: ${m.message}`)}finally{o(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;F.useEffect(()=>{o(t);let h;if(u instanceof Qf)try{h=P6()}catch{console.warn("No firebase store.")}const m=async v=>{if(o(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),v){const b={user:v,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await f(b);b.isAdmin=!!w,o(b)}else l()},g=(async()=>{if(u instanceof Qf){const v=await(u==null?void 0:u.getUserManagementData("authentication"));if(v!=null&&v.isEnabled){const b=Zot(h,async w=>await m(w));return()=>b()}o(r)}else u&&o(r);return()=>{}})();return()=>{g.then(v=>v())}},[u,s]);const d=F.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return A.jsx(C_e.Provider,{value:d,children:i.determiningStatus?A.jsx(yf,{visible:!0}):e})}function vat({configName:e,config:t,url:n}){const{storageEngine:r}=Go(),[i,o]=F.useState(null);F.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{o(f)})},[e,r]);const{minTime:s,maxTime:a}=F.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=F.useState(null);F.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=F.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return A.jsx(FT,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?A.jsxs(A.Fragment,{children:[A.jsx(ct,{fw:"bold",children:e}),A.jsxs(un,{align:"center",direction:"row",children:[A.jsx(ED,{color:"red"}),A.jsx(ct,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),A.jsx(_4,{issues:t.errors,type:"error"}),t.warnings.length>0&&A.jsxs(A.Fragment,{children:[A.jsxs(un,{align:"center",direction:"row",children:[A.jsx(ED,{color:"orange"}),A.jsx(ct,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),A.jsx(_4,{issues:t.warnings,type:"warning"})]})]}):A.jsxs(A.Fragment,{children:[A.jsx(un,{direction:"row",justify:"space-between",children:A.jsx(ct,{fw:"bold",children:t.studyMetadata.title})}),A.jsxs(ct,{c:"dimmed",children:[A.jsx(ct,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),A.jsx(ct,{c:"dimmed",children:t.studyMetadata.description}),t.warnings.length>0&&A.jsxs(A.Fragment,{children:[A.jsxs(un,{align:"center",direction:"row",children:[A.jsx(ED,{color:"orange"}),A.jsx(ct,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),A.jsx(_4,{issues:t.warnings,type:"warning"})]}),A.jsx(Zx,{my:"md"}),A.jsxs(un,{direction:"row",gap:"sm",children:[A.jsxs(ct,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&A.jsx(lJe,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),s&&a&&A.jsxs(ct,{c:"dimmed",mt:4,children:["Activity:"," ",s," ",""," ",a]}),A.jsxs(un,{direction:"row",align:"end",gap:"sm",mt:"md",children:[A.jsx(wn,{leftSection:A.jsx(sve,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${va}analysis/stats/${n}`,children:"Analyze & Manage Study"}),A.jsx(wn,{leftSection:A.jsx(ave,{}),component:"a",href:`${va}${n}`,children:"Go to Study"})]})]})},e)}function tE({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=dve(n);return A.jsx(vat,{configName:n,config:r,url:i},n)})}function bat({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Go(),{configsList:r}=e,i=r.filter(v=>v.startsWith("demo-")),o=r.filter(v=>v.startsWith("tutorial-")),s=r.filter(v=>v.startsWith("example-")),a=r.filter(v=>v.startsWith("test-")),u=r.filter(v=>v.startsWith("library-")),l=F.useMemo(()=>r.filter(v=>!v.startsWith("demo-")&&!v.startsWith("tutorial-")&&!v.startsWith("example-")&&!v.startsWith("test-")&&!v.startsWith("library-")),[r]),[c,f]=F.useState({});F.useEffect(()=>{async function v(){const b={};await Promise.all(l.map(async w=>{if(n instanceof Qf){const E=await n.getModes(w);b[w]=E.analyticsInterfacePubliclyAccessible}})),f(b)}v()},[l,n]);const{user:d}=rC(),h=F.useMemo(()=>l.filter(v=>c[v]||d.isAdmin),[l,c,d]),[m]=Rg(),p=F.useMemo(()=>m.get("tab")||(h.length>0?"Others":"Demos"),[h.length,m]),g=Lh();return A.jsx(Ci.Main,{children:A.jsxs(lg,{size:"sm",px:0,children:[A.jsx(rv,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${va}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),A.jsxs(Nr,{variant:"outline",defaultValue:l.length>0?"Others":"Demos",value:p,onChange:v=>g(`/?tab=${v}`),children:[A.jsxs(Nr.List,{children:[h.length>0&&A.jsx(Nr.Tab,{value:"Others",children:"Your Studies"}),A.jsx(Nr.Tab,{value:"Demos",children:"Demo Studies"}),A.jsx(Nr.Tab,{value:"Examples",children:"Example Studies"}),A.jsx(Nr.Tab,{value:"Tutorials",children:"Tutorials"}),A.jsx(Nr.Tab,{value:"Tests",children:"Tests"}),A.jsx(Nr.Tab,{value:"Libraries",children:"Libraries"})]}),h.length>0&&A.jsx(Nr.Panel,{value:"Others",children:A.jsx(tE,{configNames:h,studyConfigs:t})}),A.jsxs(Nr.Panel,{value:"Demos",children:[A.jsx(ct,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),A.jsx(tE,{configNames:i,studyConfigs:t})]}),A.jsxs(Nr.Panel,{value:"Examples",children:[A.jsx(ct,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),A.jsx(tE,{configNames:s,studyConfigs:t})]}),A.jsxs(Nr.Panel,{value:"Tutorials",children:[A.jsx(ct,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),A.jsx(tE,{configNames:o,studyConfigs:t})]}),A.jsxs(Nr.Panel,{value:"Tests",children:[A.jsx(ct,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),A.jsx(tE,{configNames:a,studyConfigs:t})]}),A.jsxs(Nr.Panel,{value:"Libraries",children:[A.jsx(ct,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),A.jsx(tE,{configNames:u,studyConfigs:t})]})]})]})})}var QB={exports:{}},JB={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lse;function xat(){if(Lse)return JB;Lse=1;var e=KM();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,o=e.useEffect,s=e.useMemo,a=e.useDebugValue;return JB.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var m={hasValue:!1,value:null};h.current=m}else m=h.current;h=s(function(){function g(T){if(!v){if(v=!0,b=T,T=f(T),d!==void 0&&m.hasValue){var C=m.value;if(d(C,T))return w=C}return w=T}if(C=w,n(b,T))return C;var S=f(T);return d!==void 0&&d(C,S)?(b=T,C):(b=T,w=S)}var v=!1,b,w,E=c===void 0?null:c;return[function(){return g(l())},E===null?void 0:function(){return g(E())}]},[l,c,f,d]);var p=r(u,h[0],h[1]);return o(function(){m.hasValue=!0,m.value=p},[p]),a(p),p},JB}var Bse;function wat(){return Bse||(Bse=1,QB.exports=xat()),QB.exports}var _at=wat();function Eat(e){e()}function Tat(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Eat(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var jse={notify(){},get:()=>[]};function Cat(e,t){let n,r=jse,i=0,o=!1;function s(p){c();const g=r.subscribe(p);let v=!1;return()=>{v||(v=!0,g(),f())}}function a(){r.notify()}function u(){m.onStateChange&&m.onStateChange()}function l(){return o}function c(){i++,n||(n=e.subscribe(u),r=Tat())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=jse)}function d(){o||(o=!0,c())}function h(){o&&(o=!1,f())}const m={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return m}var Sat=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Aat=Sat(),Dat=()=>typeof navigator<"u"&&navigator.product==="ReactNative",kat=Dat(),Iat=()=>Aat||kat?F.useLayoutEffect:F.useEffect,Rat=Iat(),ZB=Symbol.for("react-redux-context"),e7=typeof globalThis<"u"?globalThis:{};function Nat(){if(!F.createContext)return{};const e=e7[ZB]??(e7[ZB]=new Map);let t=e.get(F.createContext);return t||(t=F.createContext(null),e.set(F.createContext,t)),t}var A1=Nat();function Pat(e){const{children:t,context:n,serverState:r,store:i}=e,o=F.useMemo(()=>{const u=Cat(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),s=F.useMemo(()=>i.getState(),[i]);Rat(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,s]);const a=n||A1;return F.createElement(a.Provider,{value:o},t)}var Oat=Pat;function _K(e=A1){return function(){return F.useContext(e)}}var S_e=_K();function A_e(e=A1){const t=e===A1?S_e:_K(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Fat=A_e();function Mat(e=A1){const t=e===A1?Fat:A_e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var D_e=Mat(),$at=(e,t)=>e===t;function Lat(e=A1){const t=e===A1?S_e:_K(e),n=(r,i={})=>{const{equalityFn:o=$at}=typeof i=="function"?{equalityFn:i}:i,s=t(),{store:a,subscription:u,getServerState:l}=s;F.useRef(!0);const c=F.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=_at.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,o);return F.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var Bat=Lat();function La(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jat=typeof Symbol=="function"&&Symbol.observable||"@@observable",zse=jat,t7=()=>Math.random().toString(36).substring(7).split("").join("."),zat={INIT:`@@redux/INIT${t7()}`,REPLACE:`@@redux/REPLACE${t7()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${t7()}`},M6=zat;function EK(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function k_e(e,t,n){if(typeof e!="function")throw new Error(La(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(La(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(La(1));return n(k_e)(e,t)}let r=e,i=t,o=new Map,s=o,a=0,u=!1;function l(){s===o&&(s=new Map,o.forEach((g,v)=>{s.set(v,g)}))}function c(){if(u)throw new Error(La(3));return i}function f(g){if(typeof g!="function")throw new Error(La(4));if(u)throw new Error(La(5));let v=!0;l();const b=a++;return s.set(b,g),function(){if(v){if(u)throw new Error(La(6));v=!1,l(),s.delete(b),o=null}}}function d(g){if(!EK(g))throw new Error(La(7));if(typeof g.type>"u")throw new Error(La(8));if(typeof g.type!="string")throw new Error(La(17));if(u)throw new Error(La(9));try{u=!0,i=r(i,g)}finally{u=!1}return(o=s).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(La(10));r=g,d({type:M6.REPLACE})}function m(){const g=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(La(11));function b(){const E=v;E.next&&E.next(c())}return b(),{unsubscribe:g(b)}},[zse](){return this}}}return d({type:M6.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[zse]:m}}function Uat(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:M6.INIT})>"u")throw new Error(La(12));if(typeof n(void 0,{type:M6.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(La(13))})}function Vat(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const r=Object.keys(n);let i;try{Uat(n)}catch(o){i=o}return function(s={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=s[f],m=d(h,a);if(typeof m>"u")throw a&&a.type,new Error(La(14));l[f]=m,u=u||m!==h}return u=u||r.length!==Object.keys(s).length,u?l:s}}function $6(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Hat(...e){return t=>(n,r)=>{const i=t(n,r);let o=()=>{throw new Error(La(15))};const s={getState:i.getState,dispatch:(u,...l)=>o(u,...l)},a=e.map(u=>u(s));return o=$6(...a)(i.dispatch),{...i,dispatch:o}}}function qat(e){return EK(e)&&"type"in e&&typeof e.type=="string"}var I_e=Symbol.for("immer-nothing"),Use=Symbol.for("immer-draftable"),vf=Symbol.for("immer-state");function oh(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var O2=Object.getPrototypeOf;function bx(e){return!!e&&!!e[vf]}function gg(e){var t;return e?R_e(e)||Array.isArray(e)||!!e[Use]||!!((t=e.constructor)!=null&&t[Use])||h8(e)||p8(e):!1}var Wat=Object.prototype.constructor.toString();function R_e(e){if(!e||typeof e!="object")return!1;const t=O2(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Wat}function L6(e,t){d8(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function d8(e){const t=e[vf];return t?t.type_:Array.isArray(e)?1:h8(e)?2:p8(e)?3:0}function MU(e,t){return d8(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function N_e(e,t,n){const r=d8(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Gat(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function h8(e){return e instanceof Map}function p8(e){return e instanceof Set}function Rb(e){return e.copy_||e.base_}function $U(e,t){if(h8(e))return new Map(e);if(p8(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=R_e(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[vf];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(O2(e),r)}else{const r=O2(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function TK(e,t=!1){return m8(e)||bx(e)||!gg(e)||(d8(e)>1&&(e.set=e.add=e.clear=e.delete=Yat),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>TK(r,!0))),e}function Yat(){oh(2)}function m8(e){return Object.isFrozen(e)}var Kat={};function xx(e){const t=Kat[e];return t||oh(0,e),t}var Sk;function P_e(){return Sk}function Xat(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Vse(e,t){t&&(xx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function LU(e){BU(e),e.drafts_.forEach(Qat),e.drafts_=null}function BU(e){e===Sk&&(Sk=e.parent_)}function Hse(e){return Sk=Xat(Sk,e)}function Qat(e){const t=e[vf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function qse(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[vf].modified_&&(LU(t),oh(4)),gg(e)&&(e=B6(t,e),t.parent_||j6(t,e)),t.patches_&&xx("Patches").generateReplacementPatches_(n[vf].base_,e,t.patches_,t.inversePatches_)):e=B6(t,n,[]),LU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==I_e?e:void 0}function B6(e,t,n){if(m8(t))return t;const r=t[vf];if(!r)return L6(t,(i,o)=>Wse(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return j6(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),L6(o,(a,u)=>Wse(e,r,i,a,u,n,s)),j6(e,i,!1),n&&e.patches_&&xx("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Wse(e,t,n,r,i,o,s){if(bx(i)){const a=o&&t&&t.type_!==3&&!MU(t.assigned_,r)?o.concat(r):void 0,u=B6(e,i,a);if(N_e(n,r,u),bx(u))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(gg(i)&&!m8(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;B6(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&j6(e,i)}}function j6(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&TK(t,n)}function Jat(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:P_e(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=CK;n&&(i=[r],o=Ak);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}var CK={get(e,t){if(t===vf)return e;const n=Rb(e);if(!MU(n,t))return Zat(e,n,t);const r=n[t];return e.finalized_||!gg(r)?r:r===n7(e.base_,t)?(r7(e),e.copy_[t]=zU(r,e)):r},has(e,t){return t in Rb(e)},ownKeys(e){return Reflect.ownKeys(Rb(e))},set(e,t,n){const r=O_e(Rb(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=n7(Rb(e),t),o=i==null?void 0:i[vf];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Gat(n,i)&&(n!==void 0||MU(e.base_,t)))return!0;r7(e),jU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return n7(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,r7(e),jU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Rb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){oh(11)},getPrototypeOf(e){return O2(e.base_)},setPrototypeOf(){oh(12)}},Ak={};L6(CK,(e,t)=>{Ak[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ak.deleteProperty=function(e,t){return Ak.set.call(this,e,t,void 0)};Ak.set=function(e,t,n){return CK.set.call(this,e[0],t,n,e[0])};function n7(e,t){const n=e[vf];return(n?Rb(n):e)[t]}function Zat(e,t,n){var i;const r=O_e(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function O_e(e,t){if(!(t in e))return;let n=O2(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=O2(n)}}function jU(e){e.modified_||(e.modified_=!0,e.parent_&&jU(e.parent_))}function r7(e){e.copy_||(e.copy_=$U(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var eut=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(u=o,...l){return s.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&oh(6),r!==void 0&&typeof r!="function"&&oh(7);let i;if(gg(t)){const o=Hse(this),s=zU(t,void 0);let a=!0;try{i=n(s),a=!1}finally{a?LU(o):BU(o)}return Vse(o,r),qse(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===I_e&&(i=void 0),this.autoFreeze_&&TK(i,!0),r){const o=[],s=[];xx("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else oh(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...a)=>this.produceWithPatches(s,u=>t(u,...a));let r,i;return[this.produce(t,n,(s,a)=>{r=s,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gg(e)||oh(8),bx(e)&&(e=tut(e));const t=Hse(this),n=zU(e,void 0);return n[vf].isManual_=!0,BU(t),n}finishDraft(e,t){const n=e&&e[vf];(!n||!n.isManual_)&&oh(9);const{scope_:r}=n;return Vse(r,t),qse(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=xx("Patches").applyPatches_;return bx(e)?r(e,t):this.produce(e,i=>r(i,t))}};function zU(e,t){const n=h8(e)?xx("MapSet").proxyMap_(e,t):p8(e)?xx("MapSet").proxySet_(e,t):Jat(e,t);return(t?t.scope_:P_e()).drafts_.push(n),n}function tut(e){return bx(e)||oh(10,e),F_e(e)}function F_e(e){if(!gg(e)||m8(e))return e;const t=e[vf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$U(e,t.scope_.immer_.useStrictShallowCopy_)}else n=$U(e,!0);return L6(n,(r,i)=>{N_e(n,r,F_e(i))}),t&&(t.finalized_=!1),n}var bf=new eut,M_e=bf.produce;bf.produceWithPatches.bind(bf);bf.setAutoFreeze.bind(bf);bf.setUseStrictShallowCopy.bind(bf);bf.applyPatches.bind(bf);bf.createDraft.bind(bf);bf.finishDraft.bind(bf);function nut(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function rut(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function iut(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Gse=e=>Array.isArray(e)?e:[e];function out(e){const t=Array.isArray(e[0])?e[0]:e;return iut(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function sut(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var aut=class{constructor(e){this.value=e}deref(){return this.value}},uut=typeof WeakRef<"u"?WeakRef:aut,lut=0,Yse=1;function C3(){return{s:lut,v:void 0,o:null,p:null}}function $_e(e,t={}){let n=C3();const{resultEqualityCheck:r}=t;let i,o=0;function s(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const m=arguments[d];if(typeof m=="function"||typeof m=="object"&&m!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const g=p.get(m);g===void 0?(a=C3(),p.set(m,a)):a=g}else{let p=a.p;p===null&&(a.p=p=new Map);const g=p.get(m);g===void 0?(a=C3(),p.set(m,a)):a=g}}const l=a;let c;if(a.s===Yse)c=a.v;else if(c=e.apply(null,arguments),o++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,o!==0&&o--),i=typeof c=="object"&&c!==null||typeof c=="function"?new uut(c):c}return l.s=Yse,l.v=c,c}return s.clearCache=()=>{n=C3(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function cut(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let o=0,s=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),nut(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=$_e,argsMemoizeOptions:m=[],devModeChecks:p={}}=c,g=Gse(d),v=Gse(m),b=out(i),w=f(function(){return o++,l.apply(null,arguments)},...g),E=h(function(){s++;const C=sut(b,arguments);return a=w.apply(null,C),a},...v);return Object.assign(E,{resultFunc:l,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var L_e=cut($_e),fut=Object.assign((e,t=L_e)=>{rut(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(o=>e[o]);return t(r,(...o)=>o.reduce((s,a,u)=>(s[n[u]]=a,s),{}))},{withTypes:()=>fut});function B_e(e){return({dispatch:n,getState:r})=>i=>o=>typeof o=="function"?o(n,r,e):i(o)}var dut=B_e(),hut=B_e,put=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$6:$6.apply(null,arguments)};function Kse(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Q0(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qat(r)&&r.type===e,n}var j_e=class LA extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,LA.prototype)}static get[Symbol.species](){return LA}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new LA(...t[0].concat(this)):new LA(...t.concat(this))}};function Xse(e){return gg(e)?M_e(e,()=>{}):e}function Qse(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function mut(e){return typeof e=="boolean"}var gut=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:o=!0}=t??{};let s=new j_e;return n&&(mut(n)?s.push(dut):s.push(hut(n.extraArgument))),s},yut="RTK_autoBatch",Jse=e=>t=>{setTimeout(t,e)},vut=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,o=!1,s=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Jse(10):e.type==="callback"?e.queueNotification:Jse(e.timeout),l=()=>{s=!1,o&&(o=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[yut]),o=!i,o&&(s||(s=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},but=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new j_e(e);return r&&i.push(vut(typeof r=="object"?r:void 0)),i};function xut(e){const t=gut(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:o=void 0,enhancers:s=void 0}=e;let a;if(typeof n=="function")a=n;else if(EK(n))a=Vat(n);else throw new Error(Q0(1));let u;typeof r=="function"?u=r(t):u=t();let l=$6;i&&(l=put({trace:!1,...typeof i=="object"&&i}));const c=Hat(...u),f=but(c);let d=typeof s=="function"?s(f):f();const h=l(...d);return k_e(a,o,h)}function z_e(e){const t={},n=[];let r;const i={addCase(o,s){const a=typeof o=="string"?o:o.type;if(!a)throw new Error(Q0(28));if(a in t)throw new Error(Q0(29));return t[a]=s,i},addMatcher(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase(o){return r=o,i}};return e(i),[t,n,r]}function wut(e){return typeof e=="function"}function _ut(e,t){let[n,r,i]=z_e(t),o;if(wut(e))o=()=>Xse(e());else{const a=Xse(e);o=()=>a}function s(a=o(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(bx(c)){const h=f(c,u);return h===void 0?c:h}else{if(gg(c))return M_e(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return s.getInitialState=o,s}var Eut=Symbol.for("rtk-slice-createasyncthunk");function Tut(e,t){return`${e}/${t}`}function Cut({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Eut];return function(i){const{name:o,reducerPath:s=o}=i;if(!o)throw new Error(Q0(11));const a=(typeof i.reducers=="function"?i.reducers(Dut()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,E){const T=typeof w=="string"?w:w.type;if(!T)throw new Error(Q0(12));if(T in l.sliceCaseReducersByType)throw new Error(Q0(13));return l.sliceCaseReducersByType[T]=E,c},addMatcher(w,E){return l.sliceMatchers.push({matcher:w,reducer:E}),c},exposeAction(w,E){return l.actionCreators[w]=E,c},exposeCaseReducer(w,E){return l.sliceCaseReducersByName[w]=E,c}};u.forEach(w=>{const E=a[w],T={reducerName:w,type:Tut(o,w),createNotation:typeof i.reducers=="function"};Iut(E)?Nut(T,E,c,t):kut(T,E,c)});function f(){const[w={},E=[],T=void 0]=typeof i.extraReducers=="function"?z_e(i.extraReducers):[i.extraReducers],C={...w,...l.sliceCaseReducersByType};return _ut(i.initialState,S=>{for(let I in C)S.addCase(I,C[I]);for(let I of l.sliceMatchers)S.addMatcher(I.matcher,I.reducer);for(let I of E)S.addMatcher(I.matcher,I.reducer);T&&S.addDefaultCase(T)})}const d=w=>w,h=new Map;let m;function p(w,E){return m||(m=f()),m(w,E)}function g(){return m||(m=f()),m.getInitialState()}function v(w,E=!1){function T(S){let I=S[w];return typeof I>"u"&&E&&(I=g()),I}function C(S=d){const I=Qse(h,E,()=>new WeakMap);return Qse(I,S,()=>{const R={};for(const[P,M]of Object.entries(i.selectors??{}))R[P]=Sut(M,S,g,E);return R})}return{reducerPath:w,getSelectors:C,get selectors(){return C(T)},selectSlice:T}}const b={name:o,reducer:p,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...v(s),injectInto(w,{reducerPath:E,...T}={}){const C=E??s;return w.inject({reducerPath:C,reducer:p},T),{...b,...v(C,!0)}}};return b}}function Sut(e,t,n,r){function i(o,...s){let a=t(o);return typeof a>"u"&&r&&(a=n()),e(a,...s)}return i.unwrapped=e,i}var Aut=Cut();function Dut(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function kut({type:e,reducerName:t,createNotation:n},r,i){let o,s;if("reducer"in r){if(n&&!Rut(r))throw new Error(Q0(17));o=r.reducer,s=r.prepare}else o=r;i.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?Kse(e,s):Kse(e))}function Iut(e){return e._reducerDefinitionType==="asyncThunk"}function Rut(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Nut({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Q0(18));const{payloadCreator:o,fulfilled:s,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,o,c);r.exposeAction(t,f),s&&r.addCase(f.fulfilled,s),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:s||S3,pending:a||S3,rejected:u||S3,settled:l||S3})}function S3(){}function Q0(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function kh(e){return e.components.flatMap(t=>typeof t=="string"?t:kh(t))}function U_e(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:U_e(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function V_e(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const o=e.components[i];if(typeof o=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+kh(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+kh(e).length-1}];r+=1}else{const s=V_e(o,t,n+r);if(typeof s=="number")r+=s;else{const a={currentBlock:e,firstIndex:n,lastIndex:s[0].lastIndex};return[...s,a]}}}return r}function SK(e,t){const n=V_e(e,t,0);return typeof n=="number"?null:n}function H_e(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const o=e.components[i];if(typeof o=="string")r+=1;else{const s=H_e(o,t,n+r);if(s.found)return s;r+=s.distance}}return{found:!1,distance:r}}function Put(e,t){const n=H_e(e,t,0);return n.found?n.distance:-1}function q_e(e,t="root"){const n=[],r={};return e.components.forEach((i,o)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...q_e(i,`${t}-${o}`))}),n}function AK(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>AK(n,`${t}-${r}`))}}async function Out(e,t,n,r,i,o,s){const a=kh(n),u=Object.fromEntries(a.filter(m=>m!=="end").map((m,p)=>[`${m}_${p}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((m,p)=>({[`${m}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((m,p)=>({[`${m}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:o,matrixAnswers:{},participantId:s},d=Aut({name:"storeSlice",initialState:f,reducers:{setConfig(m,p){m.config=p.payload},setIsRecording(m,p){m.isRecording=p.payload},toggleStudyBrowser:m=>{m.showStudyBrowser=!m.showStudyBrowser},toggleShowHelpText:m=>{m.showHelpText=!m.showHelpText},setAlertModal:(m,p)=>{m.alertModal=p.payload},setreactiveAnswers:(m,p)=>{m.reactiveAnswers=p.payload},setreactiveProvenance:(m,p)=>{m.reactiveProvenance=p.payload},setOtherText:(m,p)=>{m.otherTexts[p.payload.key]=p.payload.value},resetOtherText:m=>{m.otherTexts={}},saveAnalysisState(m,{payload:p}){m.analysisProvState=p},setAnalysisIsPlaying(m,{payload:p}){m.analysisIsPlaying=p},setAnalysisHasAudio(m,{payload:p}){m.analysisHasAudio=p},setAnalysisHasProvenance(m,{payload:p}){m.analysisHasProvenance=p},setMatrixAnswersRadio:(m,p)=>{if(p.payload){const{responseId:g,questionKey:v,val:b}=p.payload;m.matrixAnswers={...m.matrixAnswers,[g]:{...m.matrixAnswers[g],[v]:b}}}else m.matrixAnswers={}},setMatrixAnswersCheckbox:(m,p)=>{var g;if(p.payload){const{responseId:v,questionKey:b,value:w,isChecked:E,choiceOptions:T}=p.payload,C=((g=m.matrixAnswers[v])==null?void 0:g[b])??"";let S="";E?C.length>0?S=[...C.split("|"),w].sort((I,R)=>T.map(P=>P.value).indexOf(I)-T.map(P=>P.value).indexOf(R)).join("|"):S=`${w}`:S=C.split("|").filter(I=>I!==w).join("|"),m.matrixAnswers={...m.matrixAnswers,[v]:{...m.matrixAnswers[v],[b]:S}}}else m.matrixAnswers={}},updateResponseBlockValidation:(m,{payload:p})=>{if(m.trialValidation[p.identifier]||(m.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),Object.keys(p.values).length>0){const g=m.trialValidation[p.identifier][p.location].values;m.trialValidation[p.identifier][p.location]={valid:p.status,values:{...g,...p.values}}}p.provenanceGraph&&(m.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(m,{payload:p}){const{identifier:g,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:C,incorrectAnswers:S,helpButtonClickedCount:I}=p;m.answers[g]={incorrectAnswers:S,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:C,helpButtonClickedCount:I}},incrementHelpCounter(m,{payload:p}){const{identifier:g}=p;m.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(m,{payload:p}){const{identifier:g,answer:v,question:b}=p;m.answers[b].incorrectAnswers||(m.answers[b].incorrectAnswers={}),m.answers[b].incorrectAnswers[g]||(m.answers[b].incorrectAnswers[g]={id:g,value:[]}),m.answers[b].incorrectAnswers[g].value.push(v)}}});return{store:xut({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const W_e=F.createContext(null);function eu(){return F.useContext(W_e).actions}const Gu=D_e,Zr=Bat;function Fut(e){return Zr(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const Mut=L_e(e=>e.sequence,e=>kh(e));function DK(){return Zr(Mut)}var P4={exports:{}},O4={exports:{}},$ut=O4.exports,Zse;function $r(){return Zse||(Zse=1,function(e,t){(function(n,r){e.exports=r()})($ut,function(){var n=n||function(r,i){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof Bs<"u"&&Bs.crypto&&(o=Bs.crypto),!o&&typeof $A=="function")try{o=mY}catch{}var s=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(w){var E;return b.prototype=w,E=new b,b.prototype=null,E}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var w=a(this);return b&&w.mixIn(b),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var w in b)b.hasOwnProperty(w)&&(this[w]=b[w]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(b,w){b=this.words=b||[],w!=i?this.sigBytes=w:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var w=this.words,E=b.words,T=this.sigBytes,C=b.sigBytes;if(this.clamp(),T%4)for(var S=0;S<C;S++){var I=E[S>>>2]>>>24-S%4*8&255;w[T+S>>>2]|=I<<24-(T+S)%4*8}else for(var R=0;R<C;R+=4)w[T+R>>>2]=E[R>>>2];return this.sigBytes+=C,this},clamp:function(){var b=this.words,w=this.sigBytes;b[w>>>2]&=4294967295<<32-w%4*8,b.length=r.ceil(w/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var w=[],E=0;E<b;E+=4)w.push(s());return new f.init(w,b)}}),d=u.enc={},h=d.Hex={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],C=0;C<E;C++){var S=w[C>>>2]>>>24-C%4*8&255;T.push((S>>>4).toString(16)),T.push((S&15).toString(16))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T+=2)E[T>>>3]|=parseInt(b.substr(T,2),16)<<24-T%8*4;return new f.init(E,w/2)}},m=d.Latin1={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],C=0;C<E;C++){var S=w[C>>>2]>>>24-C%4*8&255;T.push(String.fromCharCode(S))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T++)E[T>>>2]|=(b.charCodeAt(T)&255)<<24-T%4*8;return new f.init(E,w)}},p=d.Utf8={stringify:function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return m.parse(unescape(encodeURIComponent(b)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=p.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var w,E=this._data,T=E.words,C=E.sigBytes,S=this.blockSize,I=S*4,R=C/I;b?R=r.ceil(R):R=r.max((R|0)-this._minBufferSize,0);var P=R*S,M=r.min(P*4,C);if(P){for(var B=0;B<P;B+=S)this._doProcessBlock(T,B);w=T.splice(0,P),E.sigBytes-=M}return new f.init(w,M)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(b){return function(w,E){return new b.init(E).finalize(w)}},_createHmacHelper:function(b){return function(w,E){return new v.HMAC.init(b,E).finalize(w)}}});var v=u.algo={};return u}(Math);return n})}(O4)),O4.exports}var F4={exports:{}},Lut=F4.exports,eae;function g8(){return eae||(eae=1,function(e,t){(function(n,r){e.exports=r($r())})(Lut,function(n){return function(r){var i=n,o=i.lib,s=o.Base,a=o.WordArray,u=i.x64={};u.Word=s.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=s.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=s.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(F4)),F4.exports}var M4={exports:{}},But=M4.exports,tae;function jut(){return tae||(tae=1,function(e,t){(function(n,r){e.exports=r($r())})(But,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,o=i.WordArray,s=o.init,a=o.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;s.call(this,c,l)}else s.apply(this,arguments)};a.prototype=o}}(),n.lib.WordArray})}(M4)),M4.exports}var $4={exports:{}},zut=$4.exports,nae;function Uut(){return nae||(nae=1,function(e,t){(function(n,r){e.exports=r($r())})(zut,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Utf16=s.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return o.create(c,l*2)}},s.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return o.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}($4)),$4.exports}var L4={exports:{}},Vut=L4.exports,rae;function cw(){return rae||(rae=1,function(e,t){(function(n,r){e.exports=r($r())})(Vut,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var m=l[h>>>2]>>>24-h%4*8&255,p=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=m<<16|p<<8|g,b=0;b<4&&h+b*.75<c;b++)d.push(f.charAt(v>>>6*(3-b)&63));var w=f.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var m=u.indexOf(h);m!==-1&&(l=m)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var m=c[u.charCodeAt(h-1)]<<h%4*2,p=c[u.charCodeAt(h)]>>>6-h%4*2,g=m|p;f[d>>>2]|=g<<24-d%4*8,d++}return o.create(f,d)}}(),n.enc.Base64})}(L4)),L4.exports}var B4={exports:{}},Hut=B4.exports,iae;function qut(){return iae||(iae=1,function(e,t){(function(n,r){e.exports=r($r())})(Hut,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],m=0;m<f;m+=3)for(var p=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,v=c[m+2>>>2]>>>24-(m+2)%4*8&255,b=p<<16|g<<8|v,w=0;w<4&&m+w*.75<f;w++)h.push(d.charAt(b>>>6*(3-w)&63));var E=d.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var m=f.charAt(64);if(m){var p=u.indexOf(m);p!==-1&&(c=p)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var m=c[u.charCodeAt(h-1)]<<h%4*2,p=c[u.charCodeAt(h)]>>>6-h%4*2,g=m|p;f[d>>>2]|=g<<24-d%4*8,d++}return o.create(f,d)}}(),n.enc.Base64url})}(B4)),B4.exports}var j4={exports:{}},Wut=j4.exports,oae;function fw(){return oae||(oae=1,function(e,t){(function(n,r){e.exports=r($r())})(Wut,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.algo,l=[];(function(){for(var p=0;p<64;p++)l[p]=r.abs(r.sin(p+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(p,g){for(var v=0;v<16;v++){var b=g+v,w=p[b];p[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var E=this._hash.words,T=p[g+0],C=p[g+1],S=p[g+2],I=p[g+3],R=p[g+4],P=p[g+5],M=p[g+6],B=p[g+7],L=p[g+8],z=p[g+9],G=p[g+10],W=p[g+11],te=p[g+12],Z=p[g+13],re=p[g+14],q=p[g+15],U=E[0],Y=E[1],H=E[2],X=E[3];U=f(U,Y,H,X,T,7,l[0]),X=f(X,U,Y,H,C,12,l[1]),H=f(H,X,U,Y,S,17,l[2]),Y=f(Y,H,X,U,I,22,l[3]),U=f(U,Y,H,X,R,7,l[4]),X=f(X,U,Y,H,P,12,l[5]),H=f(H,X,U,Y,M,17,l[6]),Y=f(Y,H,X,U,B,22,l[7]),U=f(U,Y,H,X,L,7,l[8]),X=f(X,U,Y,H,z,12,l[9]),H=f(H,X,U,Y,G,17,l[10]),Y=f(Y,H,X,U,W,22,l[11]),U=f(U,Y,H,X,te,7,l[12]),X=f(X,U,Y,H,Z,12,l[13]),H=f(H,X,U,Y,re,17,l[14]),Y=f(Y,H,X,U,q,22,l[15]),U=d(U,Y,H,X,C,5,l[16]),X=d(X,U,Y,H,M,9,l[17]),H=d(H,X,U,Y,W,14,l[18]),Y=d(Y,H,X,U,T,20,l[19]),U=d(U,Y,H,X,P,5,l[20]),X=d(X,U,Y,H,G,9,l[21]),H=d(H,X,U,Y,q,14,l[22]),Y=d(Y,H,X,U,R,20,l[23]),U=d(U,Y,H,X,z,5,l[24]),X=d(X,U,Y,H,re,9,l[25]),H=d(H,X,U,Y,I,14,l[26]),Y=d(Y,H,X,U,L,20,l[27]),U=d(U,Y,H,X,Z,5,l[28]),X=d(X,U,Y,H,S,9,l[29]),H=d(H,X,U,Y,B,14,l[30]),Y=d(Y,H,X,U,te,20,l[31]),U=h(U,Y,H,X,P,4,l[32]),X=h(X,U,Y,H,L,11,l[33]),H=h(H,X,U,Y,W,16,l[34]),Y=h(Y,H,X,U,re,23,l[35]),U=h(U,Y,H,X,C,4,l[36]),X=h(X,U,Y,H,R,11,l[37]),H=h(H,X,U,Y,B,16,l[38]),Y=h(Y,H,X,U,G,23,l[39]),U=h(U,Y,H,X,Z,4,l[40]),X=h(X,U,Y,H,T,11,l[41]),H=h(H,X,U,Y,I,16,l[42]),Y=h(Y,H,X,U,M,23,l[43]),U=h(U,Y,H,X,z,4,l[44]),X=h(X,U,Y,H,te,11,l[45]),H=h(H,X,U,Y,q,16,l[46]),Y=h(Y,H,X,U,S,23,l[47]),U=m(U,Y,H,X,T,6,l[48]),X=m(X,U,Y,H,B,10,l[49]),H=m(H,X,U,Y,re,15,l[50]),Y=m(Y,H,X,U,P,21,l[51]),U=m(U,Y,H,X,te,6,l[52]),X=m(X,U,Y,H,I,10,l[53]),H=m(H,X,U,Y,G,15,l[54]),Y=m(Y,H,X,U,C,21,l[55]),U=m(U,Y,H,X,L,6,l[56]),X=m(X,U,Y,H,q,10,l[57]),H=m(H,X,U,Y,M,15,l[58]),Y=m(Y,H,X,U,Z,21,l[59]),U=m(U,Y,H,X,R,6,l[60]),X=m(X,U,Y,H,W,10,l[61]),H=m(H,X,U,Y,S,15,l[62]),Y=m(Y,H,X,U,z,21,l[63]),E[0]=E[0]+U|0,E[1]=E[1]+Y|0,E[2]=E[2]+H|0,E[3]=E[3]+X|0},_doFinalize:function(){var p=this._data,g=p.words,v=this._nDataBytes*8,b=p.sigBytes*8;g[b>>>5]|=128<<24-b%32;var w=r.floor(v/4294967296),E=v;g[(b+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,g[(b+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,p.sigBytes=(g.length+1)*4,this._process();for(var T=this._hash,C=T.words,S=0;S<4;S++){var I=C[S];C[S]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return T},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p}});function f(p,g,v,b,w,E,T){var C=p+(g&v|~g&b)+w+T;return(C<<E|C>>>32-E)+g}function d(p,g,v,b,w,E,T){var C=p+(g&b|v&~b)+w+T;return(C<<E|C>>>32-E)+g}function h(p,g,v,b,w,E,T){var C=p+(g^v^b)+w+T;return(C<<E|C>>>32-E)+g}function m(p,g,v,b,w,E,T){var C=p+(v^(g|~b))+w+T;return(C<<E|C>>>32-E)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(j4)),j4.exports}var z4={exports:{}},Gut=z4.exports,sae;function G_e(){return sae||(sae=1,function(e,t){(function(n,r){e.exports=r($r())})(Gut,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=i.Hasher,a=r.algo,u=[],l=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],m=d[1],p=d[2],g=d[3],v=d[4],b=0;b<80;b++){if(b<16)u[b]=c[f+b]|0;else{var w=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=w<<1|w>>>31}var E=(h<<5|h>>>27)+v+u[b];b<20?E+=(m&p|~m&g)+1518500249:b<40?E+=(m^p^g)+1859775393:b<60?E+=(m&p|m&g|p&g)-1894007588:E+=(m^p^g)-899497514,v=g,g=p,p=m<<30|m>>>2,m=h,h=E}d[0]=d[0]+h|0,d[1]=d[1]+m|0,d[2]=d[2]+p|0,d[3]=d[3]+g|0,d[4]=d[4]+v|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=s.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=s._createHelper(l),r.HmacSHA1=s._createHmacHelper(l)}(),n.SHA1})}(z4)),z4.exports}var U4={exports:{}},Yut=U4.exports,aae;function kK(){return aae||(aae=1,function(e,t){(function(n,r){e.exports=r($r())})(Yut,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.algo,l=[],c=[];(function(){function h(v){for(var b=r.sqrt(v),w=2;w<=b;w++)if(!(v%w))return!1;return!0}function m(v){return(v-(v|0))*4294967296|0}for(var p=2,g=0;g<64;)h(p)&&(g<8&&(l[g]=m(r.pow(p,1/2))),c[g]=m(r.pow(p,1/3)),g++),p++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new s.init(l.slice(0))},_doProcessBlock:function(h,m){for(var p=this._hash.words,g=p[0],v=p[1],b=p[2],w=p[3],E=p[4],T=p[5],C=p[6],S=p[7],I=0;I<64;I++){if(I<16)f[I]=h[m+I]|0;else{var R=f[I-15],P=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,M=f[I-2],B=(M<<15|M>>>17)^(M<<13|M>>>19)^M>>>10;f[I]=P+f[I-7]+B+f[I-16]}var L=E&T^~E&C,z=g&v^g&b^v&b,G=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),W=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),te=S+W+L+c[I]+f[I],Z=G+z;S=C,C=T,T=E,E=w+te|0,w=b,b=v,v=g,g=te+Z|0}p[0]=p[0]+g|0,p[1]=p[1]+v|0,p[2]=p[2]+b|0,p[3]=p[3]+w|0,p[4]=p[4]+E|0,p[5]=p[5]+T|0,p[6]=p[6]+C|0,p[7]=p[7]+S|0},_doFinalize:function(){var h=this._data,m=h.words,p=this._nDataBytes*8,g=h.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=r.floor(p/4294967296),m[(g+64>>>9<<4)+15]=p,h.sigBytes=m.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(U4)),U4.exports}var V4={exports:{}},Kut=V4.exports,uae;function Xut(){return uae||(uae=1,function(e,t){(function(n,r,i){e.exports=r($r(),kK())})(Kut,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.algo,a=s.SHA256,u=s.SHA224=a.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(V4)),V4.exports}var H4={exports:{}},Qut=H4.exports,lae;function Y_e(){return lae||(lae=1,function(e,t){(function(n,r,i){e.exports=r($r(),g8())})(Qut,function(n){return function(){var r=n,i=r.lib,o=i.Hasher,s=r.x64,a=s.Word,u=s.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var h=l.SHA512=o.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(m,p){for(var g=this._hash.words,v=g[0],b=g[1],w=g[2],E=g[3],T=g[4],C=g[5],S=g[6],I=g[7],R=v.high,P=v.low,M=b.high,B=b.low,L=w.high,z=w.low,G=E.high,W=E.low,te=T.high,Z=T.low,re=C.high,q=C.low,U=S.high,Y=S.low,H=I.high,X=I.low,ee=R,le=P,Ee=M,be=B,Ce=L,Oe=z,me=G,he=W,Fe=te,Pe=Z,Je=re,ut=q,Ke=U,tt=Y,pt=H,Dt=X,St=0;St<80;St++){var $t,oe,xe=d[St];if(St<16)oe=xe.high=m[p+St*2]|0,$t=xe.low=m[p+St*2+1]|0;else{var Re=d[St-15],pe=Re.high,we=Re.low,ke=(pe>>>1|we<<31)^(pe>>>8|we<<24)^pe>>>7,Ge=(we>>>1|pe<<31)^(we>>>8|pe<<24)^(we>>>7|pe<<25),Ve=d[St-2],at=Ve.high,rt=Ve.low,ln=(at>>>19|rt<<13)^(at<<3|rt>>>29)^at>>>6,xn=(rt>>>19|at<<13)^(rt<<3|at>>>29)^(rt>>>6|at<<26),rn=d[St-7],bn=rn.high,Hn=rn.low,$n=d[St-16],Kr=$n.high,Lr=$n.low;$t=Ge+Hn,oe=ke+bn+($t>>>0<Ge>>>0?1:0),$t=$t+xn,oe=oe+ln+($t>>>0<xn>>>0?1:0),$t=$t+Lr,oe=oe+Kr+($t>>>0<Lr>>>0?1:0),xe.high=oe,xe.low=$t}var Br=Fe&Je^~Fe&Ke,mi=Pe&ut^~Pe&tt,Er=ee&Ee^ee&Ce^Ee&Ce,Do=le&be^le&Oe^be&Oe,iu=(ee>>>28|le<<4)^(ee<<30|le>>>2)^(ee<<25|le>>>7),hs=(le>>>28|ee<<4)^(le<<30|ee>>>2)^(le<<25|ee>>>7),Ks=(Fe>>>14|Pe<<18)^(Fe>>>18|Pe<<14)^(Fe<<23|Pe>>>9),Tr=(Pe>>>14|Fe<<18)^(Pe>>>18|Fe<<14)^(Pe<<23|Fe>>>9),li=f[St],Dr=li.high,no=li.low,vr=Dt+Tr,gi=pt+Ks+(vr>>>0<Dt>>>0?1:0),vr=vr+mi,gi=gi+Br+(vr>>>0<mi>>>0?1:0),vr=vr+no,gi=gi+Dr+(vr>>>0<no>>>0?1:0),vr=vr+$t,gi=gi+oe+(vr>>>0<$t>>>0?1:0),ko=hs+Do,po=iu+Er+(ko>>>0<hs>>>0?1:0);pt=Ke,Dt=tt,Ke=Je,tt=ut,Je=Fe,ut=Pe,Pe=he+vr|0,Fe=me+gi+(Pe>>>0<he>>>0?1:0)|0,me=Ce,he=Oe,Ce=Ee,Oe=be,Ee=ee,be=le,le=vr+ko|0,ee=gi+po+(le>>>0<vr>>>0?1:0)|0}P=v.low=P+le,v.high=R+ee+(P>>>0<le>>>0?1:0),B=b.low=B+be,b.high=M+Ee+(B>>>0<be>>>0?1:0),z=w.low=z+Oe,w.high=L+Ce+(z>>>0<Oe>>>0?1:0),W=E.low=W+he,E.high=G+me+(W>>>0<he>>>0?1:0),Z=T.low=Z+Pe,T.high=te+Fe+(Z>>>0<Pe>>>0?1:0),q=C.low=q+ut,C.high=re+Je+(q>>>0<ut>>>0?1:0),Y=S.low=Y+tt,S.high=U+Ke+(Y>>>0<tt>>>0?1:0),X=I.low=X+Dt,I.high=H+pt+(X>>>0<Dt>>>0?1:0)},_doFinalize:function(){var m=this._data,p=m.words,g=this._nDataBytes*8,v=m.sigBytes*8;p[v>>>5]|=128<<24-v%32,p[(v+128>>>10<<5)+30]=Math.floor(g/4294967296),p[(v+128>>>10<<5)+31]=g,m.sigBytes=p.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var m=o.clone.call(this);return m._hash=this._hash.clone(),m},blockSize:1024/32});r.SHA512=o._createHelper(h),r.HmacSHA512=o._createHmacHelper(h)}(),n.SHA512})}(H4)),H4.exports}var q4={exports:{}},Jut=q4.exports,cae;function Zut(){return cae||(cae=1,function(e,t){(function(n,r,i){e.exports=r($r(),g8(),Y_e())})(Jut,function(n){return function(){var r=n,i=r.x64,o=i.Word,s=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(q4)),q4.exports}var W4={exports:{}},elt=W4.exports,fae;function tlt(){return fae||(fae=1,function(e,t){(function(n,r,i){e.exports=r($r(),g8())})(elt,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,v=0,b=0;b<24;b++){f[g+5*v]=(b+1)*(b+2)/2%64;var w=v%5,E=(2*g+3*v)%5;g=w,v=E}for(var g=0;g<5;g++)for(var v=0;v<5;v++)d[g+5*v]=v+(2*g+3*v)%5*5;for(var T=1,C=0;C<24;C++){for(var S=0,I=0,R=0;R<7;R++){if(T&1){var P=(1<<R)-1;P<32?I^=1<<P:S^=1<<P-32}T&128?T=T<<1^113:T<<=1}h[C]=l.create(S,I)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var p=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],v=0;v<25;v++)g[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,v){for(var b=this._state,w=this.blockSize/2,E=0;E<w;E++){var T=g[v+2*E],C=g[v+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var S=b[E];S.high^=C,S.low^=T}for(var I=0;I<24;I++){for(var R=0;R<5;R++){for(var P=0,M=0,B=0;B<5;B++){var S=b[R+5*B];P^=S.high,M^=S.low}var L=m[R];L.high=P,L.low=M}for(var R=0;R<5;R++)for(var z=m[(R+4)%5],G=m[(R+1)%5],W=G.high,te=G.low,P=z.high^(W<<1|te>>>31),M=z.low^(te<<1|W>>>31),B=0;B<5;B++){var S=b[R+5*B];S.high^=P,S.low^=M}for(var Z=1;Z<25;Z++){var P,M,S=b[Z],re=S.high,q=S.low,U=f[Z];U<32?(P=re<<U|q>>>32-U,M=q<<U|re>>>32-U):(P=q<<U-32|re>>>64-U,M=re<<U-32|q>>>64-U);var Y=m[d[Z]];Y.high=P,Y.low=M}var H=m[0],X=b[0];H.high=X.high,H.low=X.low;for(var R=0;R<5;R++)for(var B=0;B<5;B++){var Z=R+5*B,S=b[Z],ee=m[Z],le=m[(R+1)%5+5*B],Ee=m[(R+2)%5+5*B];S.high=ee.high^~le.high&Ee.high,S.low=ee.low^~le.low&Ee.low}var S=b[0],be=h[I];S.high^=be.high,S.low^=be.low}},_doFinalize:function(){var g=this._data,v=g.words;this._nDataBytes*8;var b=g.sigBytes*8,w=this.blockSize*32;v[b>>>5]|=1<<24-b%32,v[(r.ceil((b+1)/w)*w>>>5)-1]|=128,g.sigBytes=v.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,C=T/8,S=[],I=0;I<C;I++){var R=E[I],P=R.high,M=R.low;P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,M=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360,S.push(M),S.push(P)}return new s.init(S,T)},clone:function(){for(var g=a.clone.call(this),v=g._state=this._state.slice(0),b=0;b<25;b++)v[b]=v[b].clone();return g}});i.SHA3=a._createHelper(p),i.HmacSHA3=a._createHmacHelper(p)}(Math),n.SHA3})}(W4)),W4.exports}var G4={exports:{}},nlt=G4.exports,dae;function rlt(){return dae||(dae=1,function(e,t){(function(n,r){e.exports=r($r())})(nlt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,u=i.algo,l=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=s.create([0,1518500249,1859775393,2400959708,2840853838]),m=s.create([1352829926,1548603684,1836072691,2053994217,0]),p=u.RIPEMD160=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,S){for(var I=0;I<16;I++){var R=S+I,P=C[R];C[R]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}var M=this._hash.words,B=h.words,L=m.words,z=l.words,G=c.words,W=f.words,te=d.words,Z,re,q,U,Y,H,X,ee,le,Ee;H=Z=M[0],X=re=M[1],ee=q=M[2],le=U=M[3],Ee=Y=M[4];for(var be,I=0;I<80;I+=1)be=Z+C[S+z[I]]|0,I<16?be+=g(re,q,U)+B[0]:I<32?be+=v(re,q,U)+B[1]:I<48?be+=b(re,q,U)+B[2]:I<64?be+=w(re,q,U)+B[3]:be+=E(re,q,U)+B[4],be=be|0,be=T(be,W[I]),be=be+Y|0,Z=Y,Y=U,U=T(q,10),q=re,re=be,be=H+C[S+G[I]]|0,I<16?be+=E(X,ee,le)+L[0]:I<32?be+=w(X,ee,le)+L[1]:I<48?be+=b(X,ee,le)+L[2]:I<64?be+=v(X,ee,le)+L[3]:be+=g(X,ee,le)+L[4],be=be|0,be=T(be,te[I]),be=be+Ee|0,H=Ee,Ee=le,le=T(ee,10),ee=X,X=be;be=M[1]+q+le|0,M[1]=M[2]+U+Ee|0,M[2]=M[3]+Y+H|0,M[3]=M[4]+Z+X|0,M[4]=M[0]+re+ee|0,M[0]=be},_doFinalize:function(){var C=this._data,S=C.words,I=this._nDataBytes*8,R=C.sigBytes*8;S[R>>>5]|=128<<24-R%32,S[(R+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,C.sigBytes=(S.length+1)*4,this._process();for(var P=this._hash,M=P.words,B=0;B<5;B++){var L=M[B];M[B]=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360}return P},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,S,I){return C^S^I}function v(C,S,I){return C&S|~C&I}function b(C,S,I){return(C|~S)^I}function w(C,S,I){return C&I|S&~I}function E(C,S,I){return C^(S|~I)}function T(C,S){return C<<S|C>>>32-S}i.RIPEMD160=a._createHelper(p),i.HmacRIPEMD160=a._createHmacHelper(p)}(),n.RIPEMD160})}(G4)),G4.exports}var Y4={exports:{}},ilt=Y4.exports,hae;function IK(){return hae||(hae=1,function(e,t){(function(n,r){e.exports=r($r())})(ilt,function(n){(function(){var r=n,i=r.lib,o=i.Base,s=r.enc,a=s.Utf8,u=r.algo;u.HMAC=o.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),m=this._iKey=c.clone(),p=h.words,g=m.words,v=0;v<f;v++)p[v]^=1549556828,g[v]^=909522486;h.sigBytes=m.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(Y4)),Y4.exports}var K4={exports:{}},olt=K4.exports,pae;function slt(){return pae||(pae=1,function(e,t){(function(n,r,i){e.exports=r($r(),kK(),IK())})(olt,function(n){return function(){var r=n,i=r.lib,o=i.Base,s=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=o.extend({cfg:o.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,m=l.create(h.hasher,f),p=s.create(),g=s.create([1]),v=p.words,b=g.words,w=h.keySize,E=h.iterations;v.length<w;){var T=m.update(d).finalize(g);m.reset();for(var C=T.words,S=C.length,I=T,R=1;R<E;R++){I=m.finalize(I),m.reset();for(var P=I.words,M=0;M<S;M++)C[M]^=P[M]}p.concat(T),b[0]++}return p.sigBytes=w*4,p}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(K4)),K4.exports}var X4={exports:{}},alt=X4.exports,mae;function uv(){return mae||(mae=1,function(e,t){(function(n,r,i){e.exports=r($r(),G_e(),IK())})(alt,function(n){return function(){var r=n,i=r.lib,o=i.Base,s=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,m=h.hasher.create(),p=s.create(),g=p.words,v=h.keySize,b=h.iterations;g.length<v;){d&&m.update(d),d=m.update(c).finalize(f),m.reset();for(var w=1;w<b;w++)d=m.finalize(d),m.reset();p.concat(d)}return p.sigBytes=v*4,p}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(X4)),X4.exports}var Q4={exports:{}},ult=Q4.exports,gae;function xa(){return gae||(gae=1,function(e,t){(function(n,r,i){e.exports=r($r(),uv())})(ult,function(n){n.lib.Cipher||function(r){var i=n,o=i.lib,s=o.Base,a=o.WordArray,u=o.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=o.Cipher=u.extend({cfg:s.extend(),createEncryptor:function(P,M){return this.create(this._ENC_XFORM_MODE,P,M)},createDecryptor:function(P,M){return this.create(this._DEC_XFORM_MODE,P,M)},init:function(P,M,B){this.cfg=this.cfg.extend(B),this._xformMode=P,this._key=M,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(P){return this._append(P),this._process()},finalize:function(P){P&&this._append(P);var M=this._doFinalize();return M},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function P(M){return typeof M=="string"?R:C}return function(M){return{encrypt:function(B,L,z){return P(L).encrypt(M,B,L,z)},decrypt:function(B,L,z){return P(L).decrypt(M,B,L,z)}}}}()});o.StreamCipher=h.extend({_doFinalize:function(){var P=this._process(!0);return P},blockSize:1});var m=i.mode={},p=o.BlockCipherMode=s.extend({createEncryptor:function(P,M){return this.Encryptor.create(P,M)},createDecryptor:function(P,M){return this.Decryptor.create(P,M)},init:function(P,M){this._cipher=P,this._iv=M}}),g=m.CBC=function(){var P=p.extend();P.Encryptor=P.extend({processBlock:function(B,L){var z=this._cipher,G=z.blockSize;M.call(this,B,L,G),z.encryptBlock(B,L),this._prevBlock=B.slice(L,L+G)}}),P.Decryptor=P.extend({processBlock:function(B,L){var z=this._cipher,G=z.blockSize,W=B.slice(L,L+G);z.decryptBlock(B,L),M.call(this,B,L,G),this._prevBlock=W}});function M(B,L,z){var G,W=this._iv;W?(G=W,this._iv=r):G=this._prevBlock;for(var te=0;te<z;te++)B[L+te]^=G[te]}return P}(),v=i.pad={},b=v.Pkcs7={pad:function(P,M){for(var B=M*4,L=B-P.sigBytes%B,z=L<<24|L<<16|L<<8|L,G=[],W=0;W<L;W+=4)G.push(z);var te=a.create(G,L);P.concat(te)},unpad:function(P){var M=P.words[P.sigBytes-1>>>2]&255;P.sigBytes-=M}};o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:b}),reset:function(){var P;h.reset.call(this);var M=this.cfg,B=M.iv,L=M.mode;this._xformMode==this._ENC_XFORM_MODE?P=L.createEncryptor:(P=L.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==P?this._mode.init(this,B&&B.words):(this._mode=P.call(L,this,B&&B.words),this._mode.__creator=P)},_doProcessBlock:function(P,M){this._mode.processBlock(P,M)},_doFinalize:function(){var P,M=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(M.pad(this._data,this.blockSize),P=this._process(!0)):(P=this._process(!0),M.unpad(P)),P},blockSize:128/32});var w=o.CipherParams=s.extend({init:function(P){this.mixIn(P)},toString:function(P){return(P||this.formatter).stringify(this)}}),E=i.format={},T=E.OpenSSL={stringify:function(P){var M,B=P.ciphertext,L=P.salt;return L?M=a.create([1398893684,1701076831]).concat(L).concat(B):M=B,M.toString(c)},parse:function(P){var M,B=c.parse(P),L=B.words;return L[0]==1398893684&&L[1]==1701076831&&(M=a.create(L.slice(2,4)),L.splice(0,4),B.sigBytes-=16),w.create({ciphertext:B,salt:M})}},C=o.SerializableCipher=s.extend({cfg:s.extend({format:T}),encrypt:function(P,M,B,L){L=this.cfg.extend(L);var z=P.createEncryptor(B,L),G=z.finalize(M),W=z.cfg;return w.create({ciphertext:G,key:B,iv:W.iv,algorithm:P,mode:W.mode,padding:W.padding,blockSize:P.blockSize,formatter:L.format})},decrypt:function(P,M,B,L){L=this.cfg.extend(L),M=this._parse(M,L.format);var z=P.createDecryptor(B,L).finalize(M.ciphertext);return z},_parse:function(P,M){return typeof P=="string"?M.parse(P,this):P}}),S=i.kdf={},I=S.OpenSSL={execute:function(P,M,B,L,z){if(L||(L=a.random(64/8)),z)var G=d.create({keySize:M+B,hasher:z}).compute(P,L);else var G=d.create({keySize:M+B}).compute(P,L);var W=a.create(G.words.slice(M),B*4);return G.sigBytes=M*4,w.create({key:G,iv:W,salt:L})}},R=o.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:I}),encrypt:function(P,M,B,L){L=this.cfg.extend(L);var z=L.kdf.execute(B,P.keySize,P.ivSize,L.salt,L.hasher);L.iv=z.iv;var G=C.encrypt.call(this,P,M,z.key,L);return G.mixIn(z),G},decrypt:function(P,M,B,L){L=this.cfg.extend(L),M=this._parse(M,L.format);var z=L.kdf.execute(B,P.keySize,P.ivSize,M.salt,L.hasher);L.iv=z.iv;var G=C.decrypt.call(this,P,M,z.key,L);return G}})}()})}(Q4)),Q4.exports}var J4={exports:{}},llt=J4.exports,yae;function clt(){return yae||(yae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(llt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize;i.call(this,o,s,u,a),this._prevBlock=o.slice(s,s+u)}}),r.Decryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize,l=o.slice(s,s+u);i.call(this,o,s,u,a),this._prevBlock=l}});function i(o,s,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)o[s+f]^=l[f]}return r}(),n.mode.CFB})}(J4)),J4.exports}var Z4={exports:{}},flt=Z4.exports,vae;function dlt(){return vae||(vae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(flt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)o[s+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(Z4)),Z4.exports}var eO={exports:{}},hlt=eO.exports,bae;function plt(){return bae||(bae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(hlt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function o(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var s=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),o(d);var h=d.slice(0);l.encryptBlock(h,0);for(var m=0;m<c;m++)a[u+m]^=h[m]}});return r.Decryptor=s,r}(),n.mode.CTRGladman})}(eO)),eO.exports}var tO={exports:{}},mlt=tO.exports,xae;function glt(){return xae||(xae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(mlt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)o[s+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(tO)),tO.exports}var nO={exports:{}},ylt=nO.exports,wae;function vlt(){return wae||(wae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(ylt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,o){this._cipher.encryptBlock(i,o)}}),r.Decryptor=r.extend({processBlock:function(i,o){this._cipher.decryptBlock(i,o)}}),r}(),n.mode.ECB})}(nO)),nO.exports}var rO={exports:{}},blt=rO.exports,_ae;function xlt(){return _ae||(_ae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(blt,function(n){return n.pad.AnsiX923={pad:function(r,i){var o=r.sigBytes,s=i*4,a=s-o%s,u=o+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(rO)),rO.exports}var iO={exports:{}},wlt=iO.exports,Eae;function _lt(){return Eae||(Eae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(wlt,function(n){return n.pad.Iso10126={pad:function(r,i){var o=i*4,s=o-r.sigBytes%o;r.concat(n.lib.WordArray.random(s-1)).concat(n.lib.WordArray.create([s<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(iO)),iO.exports}var oO={exports:{}},Elt=oO.exports,Tae;function Tlt(){return Tae||(Tae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(Elt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(oO)),oO.exports}var sO={exports:{}},Clt=sO.exports,Cae;function Slt(){return Cae||(Cae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(Clt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var o=i*4;r.clamp(),r.sigBytes+=o-(r.sigBytes%o||o)},unpad:function(r){for(var i=r.words,o=r.sigBytes-1,o=r.sigBytes-1;o>=0;o--)if(i[o>>>2]>>>24-o%4*8&255){r.sigBytes=o+1;break}}},n.pad.ZeroPadding})}(sO)),sO.exports}var aO={exports:{}},Alt=aO.exports,Sae;function Dlt(){return Sae||(Sae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(Alt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(aO)),aO.exports}var uO={exports:{}},klt=uO.exports,Aae;function Ilt(){return Aae||(Aae=1,function(e,t){(function(n,r,i){e.exports=r($r(),xa())})(klt,function(n){return function(r){var i=n,o=i.lib,s=o.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return s.create({ciphertext:f})}}}(),n.format.Hex})}(uO)),uO.exports}var lO={exports:{}},Rlt=lO.exports,Dae;function Nlt(){return Dae||(Dae=1,function(e,t){(function(n,r,i){e.exports=r($r(),cw(),fw(),uv(),xa())})(Rlt,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,s=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],m=[],p=[],g=[];(function(){for(var w=[],E=0;E<256;E++)E<128?w[E]=E<<1:w[E]=E<<1^283;for(var T=0,C=0,E=0;E<256;E++){var S=C^C<<1^C<<2^C<<3^C<<4;S=S>>>8^S&255^99,a[T]=S,u[S]=T;var I=w[T],R=w[I],P=w[R],M=w[S]*257^S*16843008;l[T]=M<<24|M>>>8,c[T]=M<<16|M>>>16,f[T]=M<<8|M>>>24,d[T]=M;var M=P*16843009^R*65537^I*257^T*16843008;h[S]=M<<24|M>>>8,m[S]=M<<16|M>>>16,p[S]=M<<8|M>>>24,g[S]=M,T?(T=I^w[w[w[P^I]]],C^=w[w[C]]):T=C=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],b=s.AES=o.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,T=E.words,C=E.sigBytes/4,S=this._nRounds=C+6,I=(S+1)*4,R=this._keySchedule=[],P=0;P<I;P++)P<C?R[P]=T[P]:(w=R[P-1],P%C?C>6&&P%C==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=v[P/C|0]<<24),R[P]=R[P-C]^w);for(var M=this._invKeySchedule=[],B=0;B<I;B++){var P=I-B;if(B%4)var w=R[P];else var w=R[P-4];B<4||P<=4?M[B]=w:M[B]=h[a[w>>>24]]^m[a[w>>>16&255]]^p[a[w>>>8&255]]^g[a[w&255]]}}},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._keySchedule,l,c,f,d,a)},decryptBlock:function(w,E){var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T,this._doCryptBlock(w,E,this._invKeySchedule,h,m,p,g,u);var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T},_doCryptBlock:function(w,E,T,C,S,I,R,P){for(var M=this._nRounds,B=w[E]^T[0],L=w[E+1]^T[1],z=w[E+2]^T[2],G=w[E+3]^T[3],W=4,te=1;te<M;te++){var Z=C[B>>>24]^S[L>>>16&255]^I[z>>>8&255]^R[G&255]^T[W++],re=C[L>>>24]^S[z>>>16&255]^I[G>>>8&255]^R[B&255]^T[W++],q=C[z>>>24]^S[G>>>16&255]^I[B>>>8&255]^R[L&255]^T[W++],U=C[G>>>24]^S[B>>>16&255]^I[L>>>8&255]^R[z&255]^T[W++];B=Z,L=re,z=q,G=U}var Z=(P[B>>>24]<<24|P[L>>>16&255]<<16|P[z>>>8&255]<<8|P[G&255])^T[W++],re=(P[L>>>24]<<24|P[z>>>16&255]<<16|P[G>>>8&255]<<8|P[B&255])^T[W++],q=(P[z>>>24]<<24|P[G>>>16&255]<<16|P[B>>>8&255]<<8|P[L&255])^T[W++],U=(P[G>>>24]<<24|P[B>>>16&255]<<16|P[L>>>8&255]<<8|P[z&255])^T[W++];w[E]=Z,w[E+1]=re,w[E+2]=q,w[E+3]=U},keySize:256/32});r.AES=o._createHelper(b)}(),n.AES})}(lO)),lO.exports}var cO={exports:{}},Plt=cO.exports,kae;function Olt(){return kae||(kae=1,function(e,t){(function(n,r,i){e.exports=r($r(),cw(),fw(),uv(),xa())})(Plt,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=s.extend({_doReset:function(){for(var v=this._key,b=v.words,w=[],E=0;E<56;E++){var T=u[E]-1;w[E]=b[T>>>5]>>>31-T%32&1}for(var C=this._subKeys=[],S=0;S<16;S++){for(var I=C[S]=[],R=c[S],E=0;E<24;E++)I[E/6|0]|=w[(l[E]-1+R)%28]<<31-E%6,I[4+(E/6|0)]|=w[28+(l[E+24]-1+R)%28]<<31-E%6;I[0]=I[0]<<1|I[0]>>>31;for(var E=1;E<7;E++)I[E]=I[E]>>>(E-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var P=this._invSubKeys=[],E=0;E<16;E++)P[E]=C[15-E]},encryptBlock:function(v,b){this._doCryptBlock(v,b,this._subKeys)},decryptBlock:function(v,b){this._doCryptBlock(v,b,this._invSubKeys)},_doCryptBlock:function(v,b,w){this._lBlock=v[b],this._rBlock=v[b+1],m.call(this,4,252645135),m.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var T=w[E],C=this._lBlock,S=this._rBlock,I=0,R=0;R<8;R++)I|=f[R][((S^T[R])&d[R])>>>0];this._lBlock=S,this._rBlock=C^I}var P=this._lBlock;this._lBlock=this._rBlock,this._rBlock=P,m.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),v[b]=this._lBlock,v[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function m(v,b){var w=(this._lBlock>>>v^this._rBlock)&b;this._rBlock^=w,this._lBlock^=w<<v}function p(v,b){var w=(this._rBlock>>>v^this._lBlock)&b;this._lBlock^=w,this._rBlock^=w<<v}r.DES=s._createHelper(h);var g=a.TripleDES=s.extend({_doReset:function(){var v=this._key,b=v.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=b.slice(0,2),E=b.length<4?b.slice(0,2):b.slice(2,4),T=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(o.create(w)),this._des2=h.createEncryptor(o.create(E)),this._des3=h.createEncryptor(o.create(T))},encryptBlock:function(v,b){this._des1.encryptBlock(v,b),this._des2.decryptBlock(v,b),this._des3.encryptBlock(v,b)},decryptBlock:function(v,b){this._des3.decryptBlock(v,b),this._des2.encryptBlock(v,b),this._des1.decryptBlock(v,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=s._createHelper(g)}(),n.TripleDES})}(cO)),cO.exports}var fO={exports:{}},Flt=fO.exports,Iae;function Mlt(){return Iae||(Iae=1,function(e,t){(function(n,r,i){e.exports=r($r(),cw(),fw(),uv(),xa())})(Flt,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=s.RC4=o.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],m=0;m<256;m++)h[m]=m;for(var m=0,p=0;m<256;m++){var g=m%d,v=f[g>>>2]>>>24-g%4*8&255;p=(p+h[m]+v)%256;var b=h[m];h[m]=h[p],h[p]=b}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,m=0;m<4;m++){f=(f+1)%256,d=(d+c[f])%256;var p=c[f];c[f]=c[d],c[d]=p,h|=c[(c[f]+c[d])%256]<<24-m*8}return this._i=f,this._j=d,h}r.RC4=o._createHelper(a);var l=s.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=o._createHelper(l)}(),n.RC4})}(fO)),fO.exports}var dO={exports:{}},$lt=dO.exports,Rae;function Llt(){return Rae||(Rae=1,function(e,t){(function(n,r,i){e.exports=r($r(),cw(),fw(),uv(),xa())})($lt,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=[],u=[],l=[],c=s.Rabbit=o.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)f.call(this);for(var m=0;m<8;m++)g[m]^=p[m+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|T&4294901760,S=T<<16|E&65535;g[0]^=E,g[1]^=C,g[2]^=T,g[3]^=S,g[4]^=E,g[5]^=C,g[6]^=T,g[7]^=S;for(var m=0;m<4;m++)f.call(this)}},_doProcessBlock:function(d,h){var m=this._X;f.call(this),a[0]=m[0]^m[5]>>>16^m[3]<<16,a[1]=m[2]^m[7]>>>16^m[5]<<16,a[2]=m[4]^m[1]>>>16^m[7]<<16,a[3]=m[6]^m[3]>>>16^m[1]<<16;for(var p=0;p<4;p++)a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360,d[h+p]^=a[p]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,m=0;m<8;m++)u[m]=h[m];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var m=0;m<8;m++){var p=d[m]+h[m],g=p&65535,v=p>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((p&4294901760)*p|0)+((p&65535)*p|0);l[m]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=o._createHelper(c)}(),n.Rabbit})}(dO)),dO.exports}var hO={exports:{}},Blt=hO.exports,Nae;function jlt(){return Nae||(Nae=1,function(e,t){(function(n,r,i){e.exports=r($r(),cw(),fw(),uv(),xa())})(Blt,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=[],u=[],l=[],c=s.RabbitLegacy=o.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],p=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)p[g]^=m[g+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|T&4294901760,S=T<<16|E&65535;p[0]^=E,p[1]^=C,p[2]^=T,p[3]^=S,p[4]^=E,p[5]^=C,p[6]^=T,p[7]^=S;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var m=this._X;f.call(this),a[0]=m[0]^m[5]>>>16^m[3]<<16,a[1]=m[2]^m[7]>>>16^m[5]<<16,a[2]=m[4]^m[1]>>>16^m[7]<<16,a[3]=m[6]^m[3]>>>16^m[1]<<16;for(var p=0;p<4;p++)a[p]=(a[p]<<8|a[p]>>>24)&16711935|(a[p]<<24|a[p]>>>8)&4278255360,d[h+p]^=a[p]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,m=0;m<8;m++)u[m]=h[m];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var m=0;m<8;m++){var p=d[m]+h[m],g=p&65535,v=p>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((p&4294901760)*p|0)+((p&65535)*p|0);l[m]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=o._createHelper(c)}(),n.RabbitLegacy})}(hO)),hO.exports}var pO={exports:{}},zlt=pO.exports,Pae;function Ult(){return Pae||(Pae=1,function(e,t){(function(n,r,i){e.exports=r($r(),cw(),fw(),uv(),xa())})(zlt,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,s=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,v){let b=v>>24&255,w=v>>16&255,E=v>>8&255,T=v&255,C=g.sbox[0][b]+g.sbox[1][w];return C=C^g.sbox[2][E],C=C+g.sbox[3][T],C}function d(g,v,b){let w=v,E=b,T;for(let C=0;C<a;++C)w=w^g.pbox[C],E=f(g,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^g.pbox[a],w=w^g.pbox[a+1],{left:w,right:E}}function h(g,v,b){let w=v,E=b,T;for(let C=a+1;C>1;--C)w=w^g.pbox[C],E=f(g,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^g.pbox[1],w=w^g.pbox[0],{left:w,right:E}}function m(g,v,b){for(let S=0;S<4;S++){g.sbox[S]=[];for(let I=0;I<256;I++)g.sbox[S][I]=l[S][I]}let w=0;for(let S=0;S<a+2;S++)g.pbox[S]=u[S]^v[w],w++,w>=b&&(w=0);let E=0,T=0,C=0;for(let S=0;S<a+2;S+=2)C=d(g,E,T),E=C.left,T=C.right,g.pbox[S]=E,g.pbox[S+1]=T;for(let S=0;S<4;S++)for(let I=0;I<256;I+=2)C=d(g,E,T),E=C.left,T=C.right,g.sbox[S][I]=E,g.sbox[S][I+1]=T;return!0}var p=s.Blowfish=o.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,v=g.words,b=g.sigBytes/4;m(c,v,b)}},encryptBlock:function(g,v){var b=d(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},decryptBlock:function(g,v){var b=h(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=o._createHelper(p)}(),n.Blowfish})}(pO)),pO.exports}var Vlt=P4.exports,Oae;function Hlt(){return Oae||(Oae=1,function(e,t){(function(n,r,i){e.exports=r($r(),g8(),jut(),Uut(),cw(),qut(),fw(),G_e(),kK(),Xut(),Y_e(),Zut(),tlt(),rlt(),IK(),slt(),uv(),xa(),clt(),dlt(),plt(),glt(),vlt(),xlt(),_lt(),Tlt(),Slt(),Dlt(),Ilt(),Nlt(),Olt(),Mlt(),Llt(),jlt(),Ult())})(Vlt,function(n){return n})}(P4)),P4.exports}var UU=Hlt();function sh(e){const t=UU.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function qlt(e){const t=UU.AES.decrypt(atob(e),"notSecret").toString(UU.enc.Utf8);return parseInt(t,10)}function dw(){const{studyId:e}=om();return`${e}`}function Ed(){const{index:e}=om();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:qlt(e)}function jh(){const e=Ed(),t=DK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var BA={exports:{}};BA.exports;var Fae;function Wlt(){return Fae||(Fae=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,s=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",m="[object GeneratorFunction]",p="[object Map]",g="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",E="[object RegExp]",T="[object Set]",C="[object String]",S="[object Undefined]",I="[object WeakMap]",R="[object ArrayBuffer]",P="[object DataView]",M="[object Float32Array]",B="[object Float64Array]",L="[object Int8Array]",z="[object Int16Array]",G="[object Int32Array]",W="[object Uint8Array]",te="[object Uint8ClampedArray]",Z="[object Uint16Array]",re="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,H={};H[M]=H[B]=H[L]=H[z]=H[G]=H[W]=H[te]=H[Z]=H[re]=!0,H[a]=H[u]=H[R]=H[c]=H[P]=H[f]=H[d]=H[h]=H[p]=H[g]=H[b]=H[E]=H[T]=H[C]=H[I]=!1;var X=typeof Bs=="object"&&Bs&&Bs.Object===Object&&Bs,ee=typeof self=="object"&&self&&self.Object===Object&&self,le=X||ee||Function("return this")(),Ee=t&&!t.nodeType&&t,be=Ee&&!0&&e&&!e.nodeType&&e,Ce=be&&be.exports===Ee,Oe=Ce&&X.process,me=function(){try{var ve=be&&be.require&&be.require("util").types;return ve||Oe&&Oe.binding&&Oe.binding("util")}catch{}}(),he=me&&me.isTypedArray;function Fe(ve,Ie,Ze){switch(Ze.length){case 0:return ve.call(Ie);case 1:return ve.call(Ie,Ze[0]);case 2:return ve.call(Ie,Ze[0],Ze[1]);case 3:return ve.call(Ie,Ze[0],Ze[1],Ze[2])}return ve.apply(Ie,Ze)}function Pe(ve,Ie){for(var Ze=-1,on=Array(ve);++Ze<ve;)on[Ze]=Ie(Ze);return on}function Je(ve){return function(Ie){return ve(Ie)}}function ut(ve,Ie){return ve==null?void 0:ve[Ie]}function Ke(ve,Ie){return function(Ze){return ve(Ie(Ze))}}var tt=Array.prototype,pt=Function.prototype,Dt=Object.prototype,St=le["__core-js_shared__"],$t=pt.toString,oe=Dt.hasOwnProperty,xe=function(){var ve=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||"");return ve?"Symbol(src)_1."+ve:""}(),Re=Dt.toString,pe=$t.call(Object),we=RegExp("^"+$t.call(oe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=Ce?le.Buffer:void 0,Ge=le.Symbol,Ve=le.Uint8Array;ke&&ke.allocUnsafe;var at=Ke(Object.getPrototypeOf,Object),rt=Object.create,ln=Dt.propertyIsEnumerable,xn=tt.splice,rn=Ge?Ge.toStringTag:void 0,bn=function(){try{var ve=Tt(Object,"defineProperty");return ve({},"",{}),ve}catch{}}(),Hn=ke?ke.isBuffer:void 0,$n=Math.max,Kr=Date.now,Lr=Tt(le,"Map"),Br=Tt(Object,"create"),mi=function(){function ve(){}return function(Ie){if(!Nl(Ie))return{};if(rt)return rt(Ie);ve.prototype=Ie;var Ze=new ve;return ve.prototype=void 0,Ze}}();function Er(ve){var Ie=-1,Ze=ve==null?0:ve.length;for(this.clear();++Ie<Ze;){var on=ve[Ie];this.set(on[0],on[1])}}function Do(){this.__data__=Br?Br(null):{},this.size=0}function iu(ve){var Ie=this.has(ve)&&delete this.__data__[ve];return this.size-=Ie?1:0,Ie}function hs(ve){var Ie=this.__data__;if(Br){var Ze=Ie[ve];return Ze===r?void 0:Ze}return oe.call(Ie,ve)?Ie[ve]:void 0}function Ks(ve){var Ie=this.__data__;return Br?Ie[ve]!==void 0:oe.call(Ie,ve)}function Tr(ve,Ie){var Ze=this.__data__;return this.size+=this.has(ve)?0:1,Ze[ve]=Br&&Ie===void 0?r:Ie,this}Er.prototype.clear=Do,Er.prototype.delete=iu,Er.prototype.get=hs,Er.prototype.has=Ks,Er.prototype.set=Tr;function li(ve){var Ie=-1,Ze=ve==null?0:ve.length;for(this.clear();++Ie<Ze;){var on=ve[Ie];this.set(on[0],on[1])}}function Dr(){this.__data__=[],this.size=0}function no(ve){var Ie=this.__data__,Ze=Is(Ie,ve);if(Ze<0)return!1;var on=Ie.length-1;return Ze==on?Ie.pop():xn.call(Ie,Ze,1),--this.size,!0}function vr(ve){var Ie=this.__data__,Ze=Is(Ie,ve);return Ze<0?void 0:Ie[Ze][1]}function gi(ve){return Is(this.__data__,ve)>-1}function ko(ve,Ie){var Ze=this.__data__,on=Is(Ze,ve);return on<0?(++this.size,Ze.push([ve,Ie])):Ze[on][1]=Ie,this}li.prototype.clear=Dr,li.prototype.delete=no,li.prototype.get=vr,li.prototype.has=gi,li.prototype.set=ko;function po(ve){var Ie=-1,Ze=ve==null?0:ve.length;for(this.clear();++Ie<Ze;){var on=ve[Ie];this.set(on[0],on[1])}}function Ko(){this.size=0,this.__data__={hash:new Er,map:new(Lr||li),string:new Er}}function Ea(ve){var Ie=wt(this,ve).delete(ve);return this.size-=Ie?1:0,Ie}function Sc(ve){return wt(this,ve).get(ve)}function pr(ve){return wt(this,ve).has(ve)}function ou(ve,Ie){var Ze=wt(this,ve),on=Ze.size;return Ze.set(ve,Ie),this.size+=Ze.size==on?0:1,this}po.prototype.clear=Ko,po.prototype.delete=Ea,po.prototype.get=Sc,po.prototype.has=pr,po.prototype.set=ou;function Ri(ve){var Ie=this.__data__=new li(ve);this.size=Ie.size}function ks(){this.__data__=new li,this.size=0}function Xo(ve){var Ie=this.__data__,Ze=Ie.delete(ve);return this.size=Ie.size,Ze}function Df(ve){return this.__data__.get(ve)}function Ac(ve){return this.__data__.has(ve)}function Dl(ve,Ie){var Ze=this.__data__;if(Ze instanceof li){var on=Ze.__data__;if(!Lr||on.length<n-1)return on.push([ve,Ie]),this.size=++Ze.size,this;Ze=this.__data__=new po(on)}return Ze.set(ve,Ie),this.size=Ze.size,this}Ri.prototype.clear=ks,Ri.prototype.delete=Xo,Ri.prototype.get=Df,Ri.prototype.has=Ac,Ri.prototype.set=Dl;function kl(ve,Ie){var Ze=gs(ve),on=!Ze&&Yi(ve),Jn=!Ze&&!on&&Sa(ve),br=!Ze&&!on&&!Jn&&zm(ve),Xr=Ze||on||Jn||br,pn=Xr?Pe(ve.length,String):[],kr=pn.length;for(var jr in ve)Xr&&(jr=="length"||Jn&&(jr=="offset"||jr=="parent")||br&&(jr=="buffer"||jr=="byteLength"||jr=="byteOffset")||Wt(jr,kr))||pn.push(jr);return pn}function Yu(ve,Ie,Ze){(Ze!==void 0&&!ms(ve[Ie],Ze)||Ze===void 0&&!(Ie in ve))&&en(ve,Ie,Ze)}function Ku(ve,Ie,Ze){var on=ve[Ie];(!(oe.call(ve,Ie)&&ms(on,Ze))||Ze===void 0&&!(Ie in ve))&&en(ve,Ie,Ze)}function Is(ve,Ie){for(var Ze=ve.length;Ze--;)if(ms(ve[Ze][0],Ie))return Ze;return-1}function en(ve,Ie,Ze){Ie=="__proto__"&&bn?bn(ve,Ie,{configurable:!0,enumerable:!0,value:Ze,writable:!0}):ve[Ie]=Ze}var Bi=lt();function mo(ve){return ve==null?ve===void 0?S:v:rn&&rn in Object(ve)?_t(ve):Io(ve)}function ps(ve){return ro(ve)&&mo(ve)==a}function Ei(ve){if(!Nl(ve)||Qn(ve))return!1;var Ie=au(ve)?we:U;return Ie.test(Id(ve))}function su(ve){return ro(ve)&&Vg(ve.length)&&!!H[mo(ve)]}function Dd(ve){if(!Nl(ve))return lr(ve);var Ie=hn(ve),Ze=[];for(var on in ve)on=="constructor"&&(Ie||!oe.call(ve,on))||Ze.push(on);return Ze}function Il(ve,Ie,Ze,on,Jn){ve!==Ie&&Bi(Ie,function(br,Xr){if(Jn||(Jn=new Ri),Nl(br))Qo(ve,Ie,Xr,Ze,Il,on,Jn);else{var pn=on?on(Rl(ve,Xr),br,Xr+"",ve,Ie,Jn):void 0;pn===void 0&&(pn=br),Yu(ve,Xr,pn)}},kf)}function Qo(ve,Ie,Ze,on,Jn,br,Xr){var pn=Rl(ve,Ze),kr=Rl(Ie,Ze),jr=Xr.get(kr);if(jr){Yu(ve,Ze,jr);return}var Ro=br?br(pn,kr,Ze+"",ve,Ie,Xr):void 0,uu=Ro===void 0;if(uu){var Ni=gs(kr),If=!Ni&&Sa(kr),go=!Ni&&!If&&zm(kr);Ro=kr,Ni||If||go?gs(pn)?Ro=pn:kc(pn)?Ro=$e(pn):If?(uu=!1,Ro=ue(kr)):go?(uu=!1,Ro=ye(kr)):Ro=[]:Sv(kr)||Yi(kr)?(Ro=pn,Yi(pn)?Ro=Ic(pn):(!Nl(pn)||au(pn))&&(Ro=Ot(kr))):uu=!1}uu&&(Xr.set(kr,Ro),Jn(Ro,kr,on,br,Xr),Xr.delete(kr)),Yu(ve,Ze,Ro)}function Qh(ve,Ie){return kd(Ta(ve,Ie,or),ve+"")}var Jo=bn?function(ve,Ie){return bn(ve,"toString",{configurable:!0,enumerable:!1,value:cr(Ie),writable:!0})}:or;function ue(ve,Ie){return ve.slice()}function Ae(ve){var Ie=new ve.constructor(ve.byteLength);return new Ve(Ie).set(new Ve(ve)),Ie}function ye(ve,Ie){var Ze=Ae(ve.buffer);return new ve.constructor(Ze,ve.byteOffset,ve.length)}function $e(ve,Ie){var Ze=-1,on=ve.length;for(Ie||(Ie=Array(on));++Ze<on;)Ie[Ze]=ve[Ze];return Ie}function je(ve,Ie,Ze,on){var Jn=!Ze;Ze||(Ze={});for(var br=-1,Xr=Ie.length;++br<Xr;){var pn=Ie[br],kr=void 0;kr===void 0&&(kr=ve[pn]),Jn?en(Ze,pn,kr):Ku(Ze,pn,kr)}return Ze}function Me(ve){return Qh(function(Ie,Ze){var on=-1,Jn=Ze.length,br=Jn>1?Ze[Jn-1]:void 0,Xr=Jn>2?Ze[2]:void 0;for(br=ve.length>3&&typeof br=="function"?(Jn--,br):void 0,Xr&&On(Ze[0],Ze[1],Xr)&&(br=Jn<3?void 0:br,Jn=1),Ie=Object(Ie);++on<Jn;){var pn=Ze[on];pn&&ve(Ie,pn,on,br)}return Ie})}function lt(ve){return function(Ie,Ze,on){for(var Jn=-1,br=Object(Ie),Xr=on(Ie),pn=Xr.length;pn--;){var kr=Xr[++Jn];if(Ze(br[kr],kr,br)===!1)break}return Ie}}function wt(ve,Ie){var Ze=ve.__data__;return dn(Ie)?Ze[typeof Ie=="string"?"string":"hash"]:Ze.map}function Tt(ve,Ie){var Ze=ut(ve,Ie);return Ei(Ze)?Ze:void 0}function _t(ve){var Ie=oe.call(ve,rn),Ze=ve[rn];try{ve[rn]=void 0;var on=!0}catch{}var Jn=Re.call(ve);return on&&(Ie?ve[rn]=Ze:delete ve[rn]),Jn}function Ot(ve){return typeof ve.constructor=="function"&&!hn(ve)?mi(at(ve)):{}}function Wt(ve,Ie){var Ze=typeof ve;return Ie=Ie??s,!!Ie&&(Ze=="number"||Ze!="symbol"&&Y.test(ve))&&ve>-1&&ve%1==0&&ve<Ie}function On(ve,Ie,Ze){if(!Nl(Ze))return!1;var on=typeof Ie;return(on=="number"?Ca(Ze)&&Wt(Ie,Ze.length):on=="string"&&Ie in Ze)?ms(Ze[Ie],ve):!1}function dn(ve){var Ie=typeof ve;return Ie=="string"||Ie=="number"||Ie=="symbol"||Ie=="boolean"?ve!=="__proto__":ve===null}function Qn(ve){return!!xe&&xe in ve}function hn(ve){var Ie=ve&&ve.constructor,Ze=typeof Ie=="function"&&Ie.prototype||Dt;return ve===Ze}function lr(ve){var Ie=[];if(ve!=null)for(var Ze in Object(ve))Ie.push(Ze);return Ie}function Io(ve){return Re.call(ve)}function Ta(ve,Ie,Ze){return Ie=$n(Ie===void 0?ve.length-1:Ie,0),function(){for(var on=arguments,Jn=-1,br=$n(on.length-Ie,0),Xr=Array(br);++Jn<br;)Xr[Jn]=on[Ie+Jn];Jn=-1;for(var pn=Array(Ie+1);++Jn<Ie;)pn[Jn]=on[Jn];return pn[Ie]=Ze(Xr),Fe(ve,this,pn)}}function Rl(ve,Ie){if(!(Ie==="constructor"&&typeof ve[Ie]=="function")&&Ie!="__proto__")return ve[Ie]}var kd=Dc(Jo);function Dc(ve){var Ie=0,Ze=0;return function(){var on=Kr(),Jn=o-(on-Ze);if(Ze=on,Jn>0){if(++Ie>=i)return arguments[0]}else Ie=0;return ve.apply(void 0,arguments)}}function Id(ve){if(ve!=null){try{return $t.call(ve)}catch{}try{return ve+""}catch{}}return""}function ms(ve,Ie){return ve===Ie||ve!==ve&&Ie!==Ie}var Yi=ps(function(){return arguments}())?ps:function(ve){return ro(ve)&&oe.call(ve,"callee")&&!ln.call(ve,"callee")},gs=Array.isArray;function Ca(ve){return ve!=null&&Vg(ve.length)&&!au(ve)}function kc(ve){return ro(ve)&&Ca(ve)}var Sa=Hn||Rc;function au(ve){if(!Nl(ve))return!1;var Ie=mo(ve);return Ie==h||Ie==m||Ie==l||Ie==w}function Vg(ve){return typeof ve=="number"&&ve>-1&&ve%1==0&&ve<=s}function Nl(ve){var Ie=typeof ve;return ve!=null&&(Ie=="object"||Ie=="function")}function ro(ve){return ve!=null&&typeof ve=="object"}function Sv(ve){if(!ro(ve)||mo(ve)!=b)return!1;var Ie=at(ve);if(Ie===null)return!0;var Ze=oe.call(Ie,"constructor")&&Ie.constructor;return typeof Ze=="function"&&Ze instanceof Ze&&$t.call(Ze)==pe}var zm=he?Je(he):su;function Ic(ve){return je(ve,kf(ve))}function kf(ve){return Ca(ve)?kl(ve):Dd(ve)}var Hg=Me(function(ve,Ie,Ze){Il(ve,Ie,Ze)});function cr(ve){return function(){return ve}}function or(ve){return ve}function Rc(){return!1}e.exports=Hg}(BA,BA.exports)),BA.exports}var Glt=Wlt();const RK=_c(Glt);function J0(e){return structuredClone(e)}function NK(){const e=Ed(),n=`${jh()}_${e}`;return Zr(i=>i.answers[n])}const K_e=F.createContext(null);function Ylt(){const e=F.useContext(K_e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function yg(){return Zr(e=>e.config)}function iC(){const[e]=Rg();return!!e.get("participantId")}function Mae(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),o=Object.entries(r.components).find(([a])=>a===i),s=o?o[1]:null;if(!s)throw new Error(`Component ${i} could not be found in the study components.`);return s.correctAnswer?s.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Klt(){const e=Ed(),t=DK(),r=`${jh()}_${e}`,i=Zr(M=>M.trialValidation),o=Zr(M=>M.sequence),s=Zr(M=>M.answers),a=Zr(M=>M.modes),u=Zr(M=>M.otherTexts),l=Gu(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:m}=eu(),{storageEngine:p}=Go(),g=dw(),v=F.useMemo(()=>a.dataCollectionEnabled,[a]),b=Fut(r),w=iC(),E=typeof e!="number"||w||!b,T=NK(),C=Lh(),S=yg(),I=F.useMemo(()=>Date.now(),[]),R=Ylt(),P=F.useCallback((M=!0)=>{if(typeof e!="number")return;const B=J0(i[r]),L=Object.values(B).reduce((H,X)=>Object.hasOwn(X,"values")?{...H,...X.values}:H,{});Object.entries(u).forEach(([H,X])=>{Array.isArray(L[H])&&L[H].includes("__other")&&(L[H]=L[H].filter(ee=>ee!=="__other"),L[H].push(`other:${X}`)),typeof L[H]=="string"&&L[H]==="__other"&&(L[H]=`other:${X}`)});const{provenanceGraph:z}=B,G=Date.now(),{incorrectAnswers:W,helpButtonClickedCount:te}=T,Z=R&&"current"in R&&R.current?R.current.splice(0,R.current.length):[];if(v&&T.endTime===-1){const H={answer:M?L:{},startTime:I,endTime:G,incorrectAnswers:W,provenanceGraph:z,windowEvents:Z,timedOut:!M,helpButtonClickedCount:te};l(c({identifier:r,...H})),p&&p.saveAnswers({...s,[r]:H}),l(f({})),l(m()),l(h(null)),l(d(null))}let re=e+1;const q=SK(o,e),U=q!==null&&q.some(H=>Object.hasOwn(H.currentBlock,"skip")&&H.currentBlock.skip!==void 0),Y={...s,[r]:{answer:L,startTime:I,endTime:G,provenanceGraph:z,windowEvents:Z}};U&&[...q.flatMap(X=>X.currentBlock.skip?X.currentBlock.skip.map(ee=>({...ee,firstIndex:X.firstIndex,lastIndex:X.lastIndex})):[])].some(X=>{let ee=!1;const le=Object.fromEntries(Object.entries(Y).filter(([be])=>{const Ce=parseInt(be.slice(be.lastIndexOf("_")+1),10);return Ce>=X.firstIndex&&Ce<=e})),Ee=X.check!=="block"?Object.entries(le).filter(([be])=>be.slice(0,be.lastIndexOf("_"))===X.name):Object.entries(le);if(Ee.length===0)return!1;if(Ee.some(([be,Ce])=>!Ce))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(X,null,2)}`);if(X.check==="response"||X.check==="responses"){const[be,Ce]=Ee[0];X.check==="response"?ee=X.comparison==="equal"?X.value===Ce.answer[X.responseId]:X.value!==Ce.answer[X.responseId]:ee=!Mae(Ce.answer,be,S.components[be.slice(0,be.lastIndexOf("_"))],S)}else if(X.check==="block"||X.check==="repeatedComponent"){if(Ee.length<X.value)return!1;const be=Ee.map(([me,he])=>Mae(he.answer,me,S.components[me.slice(0,me.lastIndexOf("_"))],S)),Ce=be.filter(me=>me).length,Oe=be.length-Ce;ee=X.condition==="numCorrect"&&Ce===X.value||X.condition==="numIncorrect"&&Oe===X.value}if(ee){const be=t.indexOf(X.to),Ce=be===-1?Put(o,X.to):-1;return re=be===-1?Ce:be,!0}return!1}),C(`/${g}/${sh(re)}${window.location.search}`)},[e,i,r,u,T,R,v,o,s,I,C,g,l,c,p,f,m,h,d,S,t]);return{isNextDisabled:E,goToNextStep:P}}function Xlt({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:o}=Klt(),s=yg(),a=Lh(),u=F.useCallback(()=>{n&&n(),o()},[o,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=F.useState(void 0);F.useEffect(()=>{let m=0;const p=setInterval(()=>{m+=100,d(m)},100);return()=>{clearInterval(p)}},[]),F.useEffect(()=>{f&&l&&f>=l&&s.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,s.uiConfig.timeoutReject]);const h=F.useMemo(()=>{const m=l&&f?f<=l:!0,p=f?f>=c:!0;return m&&p},[l,c,f]);return F.useEffect(()=>{const m=p=>{p.key==="Enter"&&!t&&!i&&h&&o()};return s.uiConfig.nextOnEnter?(window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}):()=>{}},[t,i,h,o,s.uiConfig.nextOnEnter]),A.jsxs(A.Fragment,{children:[A.jsx(wn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&A.jsxs(Y0,{mt:"md",title:"Please wait",color:"blue",icon:A.jsx(YG,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?A.jsxs(Y0,{mt:"md",title:"Next button disables soon",color:"yellow",icon:A.jsx(ED,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!s.uiConfig.timeoutReject&&A.jsxs(Y0,{mt:"md",title:"Next button disabled",color:"red",icon:A.jsx(ED,{}),children:["The next button has timed out and is now disabled.",A.jsx(ui,{justify:"right",mt:"sm",children:A.jsx(wn,{onClick:()=>o(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function Qlt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Jlt=typeof window<"u"?F.useLayoutEffect:F.useEffect;function Pa(e,t){Jlt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Zlt(e,t){e&&Qlt(e),Pa(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Pa(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Pa(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Pa(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Pa(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Pa(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Pa(`mantine-form:${e}:clear-errors`,t.clearErrors),Pa(`mantine-form:${e}:reset`,t.reset),Pa(`mantine-form:${e}:validate`,t.validate),Pa(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Pa(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Pa(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Pa(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Pa(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Pa(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Pa(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Pa(`mantine-form:${e}:reset-touched`,t.resetTouched)}function ect(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function VU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function tct(e){const[t,n]=F.useState(VU(e)),r=F.useRef(t),i=F.useCallback(u=>{n(l=>{const c=VU(typeof u=="function"?u(l):u);return r.current=c,c})},[]),o=F.useCallback(()=>i({}),[]),s=F.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=F.useCallback((u,l)=>{l==null||l===!1?s(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:o,setFieldError:a,clearFieldError:s}}function HU(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function $ae(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Lae(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let o=n;r===-1&&(o=HU(`${i}.${t}`,o));const s={...o},a=new Set;return Object.entries(o).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=$ae(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=$ae(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);s[f]=l,a.add(f),a.has(u)||delete s[u]}),s}function nct(e,{from:t,to:n},r){const i=`${e}.${t}`,o=`${e}.${n}`,s={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,o)),a.startsWith(o)&&(u=a.replace(o,i),l=a),u&&l){const c=s[u],f=s[l];return f===void 0?delete s[u]:s[u]=f,c===void 0?delete s[l]:s[l]=c,!1}return!0}),s}function Bae(e,t,n){typeof n.value=="object"&&(n.value=ME(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function ME(e){if(typeof e!="object")return e;var t=0,n,r,i,o=Object.prototype.toString.call(e);if(o==="[object Object]"?i=Object.create(e.__proto__||null):o==="[object Array]"?i=Array(e.length):o==="[object Set]"?(i=new Set,e.forEach(function(s){i.add(ME(s))})):o==="[object Map]"?(i=new Map,e.forEach(function(s,a){i.set(ME(a),ME(s))})):o==="[object Date]"?i=new Date(+e):o==="[object RegExp]"?i=new RegExp(e.source,e.flags):o==="[object DataView]"?i=new e.constructor(ME(e.buffer)):o==="[object ArrayBuffer]"?i=e.slice(0):o.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Bae(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Bae(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function X_e(e){return typeof e!="string"?[]:e.split(".")}function Ha(e,t){const n=X_e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function YI(e,t,n){const r=X_e(e);if(r.length===0)return n;const i=ME(n);if(r.length===1)return i[r[0]]=t,i;let o=i[r[0]];for(let s=1;s<r.length-1;s+=1){if(o===void 0)return i;o=o[r[s]]}return o[r[r.length-1]]=t,i}function rct(e,{from:t,to:n},r){const i=Ha(e,r);if(!Array.isArray(i))return r;const o=[...i],s=i[t];return o.splice(t,1),o.splice(n,0,s),YI(e,o,r)}function ict(e,t,n,r){const i=Ha(e,r);if(!Array.isArray(i))return r;const o=[...i];return o.splice(typeof n=="number"?n:o.length,0,t),YI(e,o,r)}function oct(e,t,n){const r=Ha(e,n);return Array.isArray(r)?YI(e,r.filter((i,o)=>o!==t),n):n}function sct(e,t,n,r){const i=Ha(e,r);if(!Array.isArray(i)||i.length<=n)return r;const o=[...i];return o[n]=t,YI(e,o,r)}function act({$values:e,$errors:t,$status:n}){const r=F.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>nct(a,u,l)),e.setValues({values:rct(a,u,e.refValues.current),updateState:!0})},[]),i=F.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>Lae(a,u,l,-1)),e.setValues({values:oct(a,u,e.refValues.current),updateState:!0})},[]),o=F.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>Lae(a,l,c,1)),e.setValues({values:ict(a,u,l,e.refValues.current),updateState:!0})},[]),s=F.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:sct(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:o,replaceListItem:s}}var i7,jae;function PK(){return jae||(jae=1,i7=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),i7}var uct=PK();const jA=_c(uct);function XS(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function lct({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,o]=F.useState(t),[s,a]=F.useState(e),u=F.useRef(t),l=F.useRef(e),c=F.useCallback(C=>{const S=typeof C=="function"?C(u.current):C;u.current=S,n==="controlled"&&o(S)},[]),f=F.useCallback((C,S=!1)=>{const I=typeof C=="function"?C(l.current):C;l.current=I,(n==="controlled"||S)&&a(I)},[]),d=F.useCallback(()=>c({}),[]),h=F.useCallback(C=>{const S=C?{...C,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},[]),m=F.useCallback((C,S)=>{c(I=>XS(I,C)===S?I:{...I,[C]:S})},[]),p=F.useCallback((C,S,I)=>{f(R=>XS(R,C)===S?R:{...R,[C]:S},I)},[]),g=F.useCallback((C,S)=>{const I=XS(l.current,C),R=!jA(Ha(C,r.getValuesSnapshot()),S),P=HU(C,l.current);P[C]=R,f(P,I!==R)},[]),v=F.useCallback(C=>XS(u.current,C),[]),b=F.useCallback(C=>f(S=>{if(typeof C!="string")return S;const I=HU(C,S);return delete I[C],jA(I,S)?S:I}),[]),w=F.useCallback(C=>{if(C){const I=Ha(C,l.current);if(typeof I=="boolean")return I;const R=Ha(C,r.refValues.current),P=Ha(C,r.valuesSnapshot.current);return!jA(R,P)}return Object.keys(l.current).length>0?XS(l.current):!jA(r.refValues.current,r.valuesSnapshot.current)},[]),E=F.useCallback(()=>l.current,[]),T=F.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:s,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:v,setFieldTouched:m,setFieldDirty:p,setTouchedState:o,setDirtyState:a,clearFieldDirty:b,isDirty:w,getDirty:E,getTouched:T,setCalculatedFieldDirty:g}}function cct({initialValues:e,onValuesChange:t,mode:n}){const r=F.useRef(!1),[i,o]=F.useState(e||{}),s=F.useRef(i),a=F.useRef(i),u=F.useCallback(({values:p,subscribers:g,updateState:v=!0,mergeWithPreviousValues:b=!0})=>{const w=s.current,E=p instanceof Function?p(s.current):p,T=b?{...w,...E}:E;s.current=T,v&&o(T),t==null||t(T,w),g==null||g.filter(Boolean).forEach(C=>C({updatedValues:T,previousValues:w}))},[t]),l=F.useCallback(p=>{var b;const g=Ha(p.path,s.current),v=p.value instanceof Function?p.value(g):p.value;if(g!==v){const w=s.current,E=YI(p.path,v,s.current);u({values:E,updateState:p.updateState}),(b=p.subscribers)==null||b.filter(Boolean).forEach(T=>T({path:p.path,updatedValues:E,previousValues:w}))}},[u]),c=F.useCallback(p=>{a.current=p},[]),f=F.useCallback((p,g)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),g())},[u]),d=F.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=F.useCallback(()=>s.current,[]),m=F.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:s,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:m}}function fct({$status:e}){const t=F.useRef({}),n=F.useCallback((i,o)=>{F.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(o),()=>{t.current[i]=t.current[i].filter(s=>s!==o)}),[o])},[]),r=F.useCallback(i=>t.current[i]?t.current[i].map(o=>s=>o({previousValue:Ha(i,s.previousValues),value:Ha(i,s.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function zae(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Uae(e){const t=VU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function qU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,o)=>{const s=e[o],a=`${n===""?"":`${n}.`}${o}`,u=Ha(a,t);let l=!1;return typeof s=="function"&&(i[a]=s(u,t,a)),typeof s=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>qU(s,t,`${a}.${f}`,i))),typeof s=="object"&&typeof u=="object"&&u!==null&&(l||qU(s,t,a,i)),i},r)}function WU(e,t){return Uae(typeof e=="function"?e(t):qU(e,t))}function A3(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=WU(t,n),i=Object.keys(r.errors).find(o=>e.split(".").every((s,a)=>s===o.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const dct="__MANTINE_FORM_INDEX__";function Vae(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${dct}`)):!1:!1}function Q_e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:o={},clearInputErrorOnChange:s=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=p=>p,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:m="change"}={}){const p=tct(r),g=cct({initialValues:n,onValuesChange:l,mode:t}),v=lct({initialDirty:i,initialTouched:o,$values:g,mode:t}),b=act({$values:g,$errors:p,$status:v}),w=fct({$status:v}),[E,T]=F.useState(0),[C,S]=F.useState({}),[I,R]=F.useState(!1),P=F.useCallback(()=>{g.resetValues(),p.clearErrors(),v.resetDirty(),v.resetTouched(),t==="uncontrolled"&&T(ee=>ee+1)},[]),M=F.useCallback(ee=>{s&&p.clearErrors(),t==="uncontrolled"&&T(le=>le+1),Object.keys(w.subscribers.current).forEach(le=>{const Ee=Ha(le,g.refValues.current),be=Ha(le,ee);Ee!==be&&w.getFieldSubscribers(le).forEach(Ce=>Ce({previousValues:ee,updatedValues:g.refValues.current}))})},[s]),B=F.useCallback(ee=>{const le=g.refValues.current;g.initialize(ee,()=>t==="uncontrolled"&&T(Ee=>Ee+1)),M(le)},[M]),L=F.useCallback((ee,le,Ee)=>{const be=Vae(ee,a),Ce=le instanceof Function?le(Ha(ee,g.refValues.current)):le;v.setCalculatedFieldDirty(ee,Ce),m==="change"&&v.setFieldTouched(ee,!0),!be&&s&&p.clearFieldError(ee),g.setFieldValue({path:ee,value:le,updateState:t==="controlled",subscribers:[...w.getFieldSubscribers(ee),be?Oe=>{const me=A3(ee,d,Oe.updatedValues);me.hasError?p.setFieldError(ee,me.error):p.clearFieldError(ee)}:null,(Ee==null?void 0:Ee.forceUpdate)!==!1&&t!=="controlled"?()=>S(Oe=>({...Oe,[ee]:(Oe[ee]||0)+1})):null]})},[l,d]),z=F.useCallback(ee=>{const le=g.refValues.current;g.setValues({values:ee,updateState:t==="controlled"}),M(le)},[l,M]),G=F.useCallback(()=>{const ee=WU(d,g.refValues.current);return p.setErrors(ee.errors),ee},[d]),W=F.useCallback(ee=>{const le=A3(ee,d,g.refValues.current);return le.hasError?p.setFieldError(ee,le.error):p.clearFieldError(ee),le},[d]),te=(ee,{type:le="input",withError:Ee=!0,withFocus:be=!0,...Ce}={})=>{const me={onChange:ect(he=>L(ee,he,{forceUpdate:!1})),"data-path":zae(e,ee)};return Ee&&(me.error=p.errorsState[ee]),le==="checkbox"?me[t==="controlled"?"checked":"defaultChecked"]=Ha(ee,g.refValues.current):me[t==="controlled"?"value":"defaultValue"]=Ha(ee,g.refValues.current),be&&(me.onFocus=()=>v.setFieldTouched(ee,!0),me.onBlur=()=>{if(Vae(ee,u)){const he=A3(ee,d,g.refValues.current);he.hasError?p.setFieldError(ee,he.error):p.clearFieldError(ee)}}),Object.assign(me,f==null?void 0:f({inputProps:me,field:ee,options:{type:le,withError:Ee,withFocus:be,...Ce},form:X}))},Z=(ee,le)=>Ee=>{h==="always"&&(Ee==null||Ee.preventDefault());const be=G();if(be.hasErrors)h==="validation-failed"&&(Ee==null||Ee.preventDefault()),le==null||le(be.errors,g.refValues.current,Ee);else{const Ce=ee==null?void 0:ee(c(g.refValues.current),Ee);Ce instanceof Promise&&(R(!0),Ce.finally(()=>R(!1)))}},re=ee=>c(ee||g.refValues.current),q=F.useCallback(ee=>{ee.preventDefault(),P()},[]),U=F.useCallback(ee=>ee?!A3(ee,d,g.refValues.current).hasError:!WU(d,g.refValues.current).hasErrors,[d]),Y=ee=>`${E}-${ee}-${C[ee]||0}`,H=F.useCallback(ee=>document.querySelector(`[data-path="${zae(e,ee)}"]`),[]),X={watch:w.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:B,setValues:z,setFieldValue:L,submitting:I,setSubmitting:R,errors:p.errorsState,setErrors:p.setErrors,setFieldError:p.setFieldError,clearFieldError:p.clearFieldError,clearErrors:p.clearErrors,resetDirty:v.resetDirty,setTouched:v.setTouched,setDirty:v.setDirty,isTouched:v.isTouched,resetTouched:v.resetTouched,isDirty:v.isDirty,getTouched:v.getTouched,getDirty:v.getDirty,reorderListItem:b.reorderListItem,insertListItem:b.insertListItem,removeListItem:b.removeListItem,replaceListItem:b.replaceListItem,reset:P,validate:G,validateField:W,getInputProps:te,onSubmit:Z,onReset:q,isValid:U,getTransformedValues:re,key:Y,getInputNode:H};return Zlt(e,X),X}function hct(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function pct(e){return hct(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function J_e(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const mct=new URLSearchParams(window.location.search),gct=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let o="";r.paramCapture?o=mct.get(r.paramCapture):r.type==="reactive"?o=[]:r.type==="matrix-radio"||r.type==="matrix-checkbox"?o=Object.fromEntries(r.questionOptions.map(a=>[a,""])):r.type==="slider"&&r.startingValue&&(o=r.startingValue.toString());const s=r.withDontKnow?{[`${r.id}-dontKnow`]:""}:{};n={...n,[r.id]:o,...s}}}),{...n}},yct=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(o=>o!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const o=[...n.requiredValue].sort(),s=[...r].sort();return o.every((a,u)=>a===s[u])?null:"Incorrect input"}return n.type==="checkbox"?J_e(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function vct(e,t,n){const[r,i]=F.useState(null),o=Q_e({initialValues:gct(e,n),validate:yct(e)});return F.useEffect(()=>{r!==t&&(i(t),o.reset())},[r,o,t]),o}function hw(e,t,n){var s;const{requiredValue:r,requiredLabel:i}=e;let o="";return t.checked&&Array.isArray(r)?o=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?o=J_e(e,t.checked):o=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(s=n.find(a=>a.value===r))==null?void 0:s.label:r.toString())} to continue.`:null,o}function Z_e({horizontal:e,children:t,style:n}){return e?A.jsx(ui,{mt:et(4),gap:"lg",style:n,children:t}):A.jsx(qo,{gap:"md",style:n,children:t})}function bct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(w=>typeof w=="string"?{value:w,label:w}:w),[d,h]=F.useState(!1),[m,p]=F.useState(""),{setOtherText:g}=eu(),v=Gu();F.useEffect(()=>{v(g({key:e.id,value:m}))},[m,e.id,g,v]);const b=F.useMemo(()=>hw(e,n,f),[e,n,f]);return A.jsxs(Ru.Group,{label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:o,required:s})})]}),description:u,...n,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[A.jsx(Ue,{mt:"xs",children:A.jsxs(Z_e,{horizontal:!!l,style:{flexGrow:1},children:[f.map(w=>A.jsx(Ru,{disabled:t,value:w.value,label:w.label},w.value)),c&&A.jsx(Ru,{disabled:t,value:"__other",checked:d,onClick:w=>h(w.currentTarget.checked),label:l?"Other":A.jsx(ki,{mt:-8,placeholder:"Other",disabled:!d,value:m,onChange:w=>p(w.currentTarget.value)})},"__other")]})}),l&&c&&A.jsx(ki,{mt:"sm",placeholder:"Other",disabled:!d,value:m,onChange:w=>p(w.currentTarget.value),w:216})]})}function xct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return A.jsx(BT,{disabled:t,label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:s,required:a})})]}),description:l,placeholder:o,data:c,radius:"md",size:"md",...n,error:hw(e,n,c)})}function wct({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:o,secondaryText:s}=e;return A.jsx(ki.Wrapper,{label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[r&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:i,required:o})})]}),description:s,size:"md",children:t.value&&A.jsx(vh,{children:Array.isArray(t.value)?t.value.map(a=>A.jsx(vh.Item,{children:a},a)):A.jsx(vh.Item,{children:t.value})})})}function eEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:o}){const{prompt:s,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,m=u.map(T=>typeof T=="string"?{value:T,label:T}:T),[p,g]=F.useState(!1),[v,b]=F.useState(""),{setOtherText:w}=eu(),E=Gu();return F.useEffect(()=>{E(w({key:e.id,value:v}))},[v,e.id,w,E]),A.jsxs(od.Group,{name:`radioInput${e.id}`,label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:s,required:a})})]}),description:f,...n,error:hw(e,n,m),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[A.jsxs(ui,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?A.jsx(ct,{children:l}):null,A.jsxs(Z_e,{horizontal:!!d,style:{flexGrow:1},children:[m.map(T=>A.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":et(12),flex:o?1:"unset",alignItems:"center"},children:[d&&A.jsx(ct,{size:"sm",children:T.label}),A.jsx(od,{disabled:t,value:T.value,label:T.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&A.jsx(ct,{size:"sm",children:T.label})]},`${T.value}-${e.id}`)),h&&A.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":et(12),flex:o?1:"unset",alignItems:"center"},children:[d&&A.jsx(ct,{size:"sm",children:"Other"}),A.jsx(od,{disabled:t,value:"other",checked:p,onClick:T=>g(T.currentTarget.checked),label:!d&&A.jsx(ki,{mt:-8,placeholder:"Other",disabled:!p,value:v,onChange:T=>b(T.currentTarget.value)}),mt:0})]})]}),A.jsx(ct,{children:c})]}),d&&h&&A.jsx(ki,{mt:"sm",placeholder:"Other",disabled:!p,value:v,onChange:T=>b(T.currentTarget.value),w:216})]},e.id)}function _ct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:o}=e,s=[];for(let u=1;u<=+o;u+=1)s.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:s,horizontal:!0};return A.jsx(eEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Ect({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,min:a,max:u,placeholder:l,secondaryText:c}=e;return A.jsx(xG,{disabled:t,placeholder:l,label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:o,required:s})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:hw(e,n)})}const Tct="_markLabel_18a7j_1",Cct={markLabel:Tct};function Sct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:o,required:s,options:a,secondaryText:u,snap:l}=e,[c,f]=F.useMemo(()=>[Math.min(...a.map(h=>h.value)),Math.max(...a.map(h=>h.value))],[a]),d=hw(e,n);return A.jsx(ki.Wrapper,{label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:o,required:s})})]}),description:u,error:d,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:A.jsx(AG,{disabled:t,marks:a,min:c,max:f,...n,h:40,mt:4,classNames:{markLabel:Cct.markLabel},restrictToMarks:l,label:h=>l?null:h})})}function Act({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,secondaryText:u}=e;return A.jsx(M0,{disabled:t,placeholder:o,label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:s,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:hw(e,n)})}function Dct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:o,prompt:s,required:a,secondaryText:u}=e;return A.jsx(aG,{disabled:t,placeholder:o,label:A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:s,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:hw(e,n)})}function kct({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:o,disabled:s}){return A.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>A.jsx(Ru,{disabled:s,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>o(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function Ict({_choices:e,_n:t,idx:n,question:r,response:i,answer:o,onChange:s,disabled:a}){return A.jsx(od.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>s(u,r.label),value:o.value[r.label],children:A.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>A.jsx(od,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function Rct({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:o,setMatrixAnswersCheckbox:s}=eu(),a=Gu(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,m=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(E=>({value:E,label:E})):u.map(E=>typeof E=="string"?{value:E,label:E}:E),p=l.map(E=>typeof E=="string"?{value:E,label:E}:E),g=(E,T)=>{const C={type:"radio",questionKey:T,val:E,responseId:e.id};a(o(C))},v=(E,T,C)=>{const S=E.target.checked,I={questionKey:T,responseId:e.id,value:C.value,label:C.label,isChecked:S,choiceOptions:m};a(s(I))},b=m.length,w=p.length;return A.jsxs(A.Fragment,{children:[A.jsxs(un,{direction:"row",wrap:"nowrap",gap:4,children:[i&&A.jsx(Ue,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),A.jsx(Ue,{style:{display:"block"},className:"no-last-child-bottom-padding",children:A.jsx(ju,{text:c,required:d})})]}),A.jsx(ct,{c:"dimmed",size:"sm",mt:0,children:f}),A.jsxs(Ue,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[A.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),A.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${b}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:m.map((E,T)=>A.jsx(ct,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${T}-label`))}),A.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w}, 1fr)`},children:p.map((E,T)=>A.jsx(ct,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:E.label},`question-${T}-label`))}),A.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w},1fr)`},children:p.map((E,T)=>A.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?A.jsx(Ict,{disabled:r,idx:T,question:E,answer:t,_choices:m,_n:b,onChange:g,response:e}):A.jsx(kct,{disabled:r,idx:T,question:E,answer:t,_choices:m,_n:b,onChange:v})},`question-${T}`))})]})]})}function Nct({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:o}){const s=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=Rg(),c=yg().uiConfig.enumerateQuestions??!1,f=F.useMemo(()=>{if(e.paramCapture){const m=u.get(e.paramCapture);return a||!!m}return a},[a,e.paramCapture,u]),[d,h]=F.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return F.useEffect(()=>{o.setFieldValue(`${e.id}-dontKnow`,d.toString()),d||o.setFieldValue(e.id,"false")},[d,e.id]),A.jsxs(Ue,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&A.jsx(Ect,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="shortText"&&A.jsx(Act,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="longText"&&A.jsx(Dct,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="likert"&&A.jsx(_ct,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="dropdown"&&A.jsx(xct,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="slider"&&A.jsx(Sct,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="radio"&&A.jsx(eEe,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="checkbox"&&A.jsx(bct,{response:e,disabled:f||d,answer:s,index:r,enumerateQuestions:c}),e.type==="reactive"&&A.jsx(wct,{response:e,answer:s,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&A.jsx(Rct,{disabled:f||d,response:e,answer:s,index:r,enumerateQuestions:c}),e.withDontKnow&&A.jsx(Ru,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:m=>h(m.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&A.jsx(Zx,{mt:"xl",mb:"xs"})]})}function z6({config:e,location:t,status:n,style:r}){var q;const{storageEngine:i}=Go(),o=Gu(),{updateResponseBlockValidation:s,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=eu(),c=Ed(),f=jh(),d=n==null?void 0:n.answer,h=dw(),m=Lh(),p=e,g=F.useMemo(()=>{var U;return((U=p==null?void 0:p.response)==null?void 0:U.filter(Y=>Y.location?Y.location===t:t==="belowStimulus"))||[]},[p==null?void 0:p.response,t]),v=F.useMemo(()=>g.map(U=>({...U,required:U.required===void 0?!0:U.required})),[g]),b=vct(v,c,d||{}),[w,E]=F.useState(void 0),T=Zr(U=>U.reactiveAnswers),C=Zr(U=>U.reactiveProvenance),S=Zr(U=>U.matrixAnswers),I=(p==null?void 0:p.provideFeedback)&&(((q=p==null?void 0:p.correctAnswer)==null?void 0:q.length)||0)>0,R=(p==null?void 0:p.allowFailedTraining)===void 0?!0:p.allowFailedTraining,[P,M]=F.useState(0),B=(p==null?void 0:p.trainingAttempts)||2,[L,z]=F.useState(!1),G=t===((p==null?void 0:p.nextButtonLocation)||"belowStimulus");F.useEffect(()=>{const U=v.find(Y=>Y.type==="reactive");if(T&&U){const Y=U.id;b.setValues({...b.values,[Y]:T[Y]})}},[T]),F.useEffect(()=>{C&&E(C)},[C]),F.useEffect(()=>{const U=v.filter(Y=>Y.type==="matrix-radio"||Y.type==="matrix-checkbox");if(S&&U.length>0){const Y={...b.values};U.forEach(H=>{const{id:X}=H;Y[X]={...b.getInputProps(X).value,...S[X]}}),b.setValues(Y)}},[S]),F.useEffect(()=>{o(s({location:t,identifier:`${f}_${c}`,status:b.isValid(),values:J0(b.values),provenanceGraph:w}))},[b.values,f,c,t,o,s,w]);const[W,te]=F.useState(Object.fromEntries(v.map(U=>[U.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Z=(U,Y,H,X,ee)=>{te(le=>({...le,[U]:{visible:Y,title:H,message:X,color:ee}}))},re=()=>{const U=P+1;M(U);const Y=Object.fromEntries(v.map(H=>{var le,Ee;const X=(Ee=(le=p.correctAnswer)==null?void 0:le.find(be=>be.id===H.id))==null?void 0:Ee.answer,ee=b.values[H.id];return[H.id,Array.isArray(ee)?typeof X=="string"?ee.length===1&&X===ee[0]:ee.length===X.length&&ee.every(be=>X.includes(be)):X===ee]}));I&&(v.forEach(H=>{var X;if(Y[H.id]&&!((X=W[H.id])!=null&&X.message.includes("You've failed to answer this question correctly")))Z(H.id,!0,"Correct Answer","You have answered the question correctly.","green");else{o(u({question:`${f}_${c}`,identifier:H.id,answer:b.values[H.id]}));let ee="";B===-1?ee="Please try again.":U>=B?(ee=`You didn't answer this question correctly after ${B} attempts. ${R?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!R&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{m("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{m("./../__trainingFailed")},5e3)})):B-U===1?ee="Please try again. You have 1 attempt left.":ee=`Please try again. You have ${B-U} attempts left.`,Z(H.id,!0,"Incorrect Answer",ee,"red")}}),z(R&&U>=B||Object.values(Y).every(H=>H)&&U<=B))};return A.jsxs("div",{style:r,children:[v.map((U,Y)=>{var X,ee;const H=(ee=(X=p.correctAnswer)==null?void 0:X.find(le=>le.id===U.id))==null?void 0:ee.answer;return A.jsx(Gr.Fragment,{children:U.hidden?"":A.jsxs(A.Fragment,{children:[A.jsx(Nct,{storedAnswer:d,answer:{...b.getInputProps(U.id,{type:U.type==="checkbox"?"checkbox":"input"})},response:U,index:Y+1,configInUse:p,form:b}),W[U.id].visible&&A.jsxs(Y0,{mb:"md",title:W[U.id].title,color:W[U.id].color,children:[W[U.id].message," ",W[U.id].message.includes("Please try again")&&A.jsxs(A.Fragment,{children:[A.jsx("br",{}),A.jsx("br",{}),"If you're unsure"," ",A.jsx(NT,{style:{fontSize:14},onClick:()=>{o(a()),o(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),A.jsx("br",{}),A.jsx("br",{}),P>=B&&B>=0&&H&&` The correct answer was: ${H}.`]})]})},`${U.id}-${c}`)}),A.jsxs(ui,{justify:"right",gap:"xs",children:[I&&G&&A.jsx(wn,{onClick:()=>re(),disabled:!b.isValid()||P>=B&&B>=0,children:"Check Answer"}),G&&A.jsx(Xlt,{disabled:I&&!L||!b.isValid(),label:p.nextButtonText||"Next",configInUse:p})]})]})}const QS="@REVISIT_COMMS",Pct={minHeight:"500px",width:"100%",border:0};function Oct({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=eu(),r=Gu(),i=D_e(),o=F.useRef(null),s=F.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=jh(),u=F.useCallback((l,c)=>{var f,d;(d=(f=o.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${QS}/${l}`,iframeId:s,message:c},"*")},[o,s]);return F.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&s===f.iframeId)switch(f.type){case`${QS}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${QS}/READY`:o.current&&(o.current.style.height=`${f.message.documentHeight}px`);break;case`${QS}/ANSWERS`:r(t(f.message));break;case`${QS}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,s,e,u,t,n]),A.jsx("iframe",{ref:o,src:e.path.startsWith("http")?e.path:`${va}${e.path}?trialid=${a}&id=${s}`,style:Pct})}async function OK(e){const n=await(await fetch(`${va}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function Fct(e){const t=await fetch(`${va}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function D1({email:e,path:t}){const n=wd();return A.jsxs(lg,{fluid:!0,my:50,maw:800,mx:"auto",children:[A.jsx(zo,{order:2,children:A.jsx(ct,{span:!0,c:"orange",children:"404"})}),A.jsxs(ct,{children:[A.jsx(ct,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),A.jsx(ff,{h:"lg"}),A.jsxs(vh,{children:[A.jsx(vh.Item,{children:A.jsx(ct,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),A.jsx(vh.Item,{children:A.jsxs(ct,{children:["If you're a participant, please contact the study administrator"," ",e&&A.jsxs(A.Fragment,{children:["at"," ",A.jsxs(NT,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Mct={maxWidth:"100%"};function $ct({currentConfig:e}){const t={...Mct,...e.style},[n,r]=F.useState(!0),[i,o]=F.useState(!1);return F.useEffect(()=>{async function s(){const a=await OK(e.path);o(!!a),r(!1)}s()},[e]),n||i?A.jsx(rv,{mx:"auto",src:`${va}${e.path}`,style:t}):A.jsx(D1,{path:e.path})}function Z0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lct(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oC(e){let t,n,r;e.length!==2?(t=Z0,n=(a,u)=>Z0(e(a),u),r=(a,u)=>e(a)-u):(t=e===Z0||e===Lct?e:Bct,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function Bct(){return 0}function tEe(e){return e===null?NaN:+e}function*jct(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const nEe=oC(Z0),k1=nEe.right,zct=nEe.left;oC(tEe).center;function Uct(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function Vct(e,t){const n=Uct(e,t);return n&&Math.sqrt(n)}function Hct(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class xl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class Hae extends Map{constructor(t,n=oEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(GU(this,t))}has(t){return super.has(GU(this,t))}set(t,n){return super.set(rEe(this,t),n)}delete(t){return super.delete(iEe(this,t))}}class U6 extends Set{constructor(t,n=oEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(GU(this,t))}add(t){return super.add(rEe(this,t))}delete(t){return super.delete(iEe(this,t))}}function GU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function rEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function iEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function oEe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function qct(e,t){return Array.from(t,n=>e[n])}function Wct(e=Z0){if(e===Z0)return sEe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function sEe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Gct=Math.sqrt(50),Yct=Math.sqrt(10),Kct=Math.sqrt(2);function V6(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Gct?10:o>=Yct?5:o>=Kct?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*s,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?V6(e,t,n*2):[a,u,l]}function YU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?V6(t,e,n):V6(e,t,n);if(!(o>=i))return[];const a=o-i+1,u=new Array(a);if(r)if(s<0)for(let l=0;l<a;++l)u[l]=(o-l)/-s;else for(let l=0;l<a;++l)u[l]=(o-l)*s;else if(s<0)for(let l=0;l<a;++l)u[l]=(i+l)/-s;else for(let l=0;l<a;++l)u[l]=(i+l)*s;return u}function KU(e,t,n){return t=+t,e=+e,n=+n,V6(e,t,n)[2]}function I1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?KU(t,e,n):KU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ou(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function sf(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function aEe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?sEe:Wct(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),m=Math.min(r,Math.floor(t+(u-l)*f/u+d));aEe(e,t,h,m,i)}const o=e[t];let s=n,a=r;for(JS(e,n,t),i(e[r],o)>0&&JS(e,n,r);s<a;){for(JS(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?JS(e,n,a):(++a,JS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function JS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function XU(e,t,n){if(e=Float64Array.from(jct(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return sf(e);if(t>=1)return Ou(e);var r,i=(r-1)*t,o=Math.floor(i),s=Ou(aEe(e,o).subarray(0,o+1)),a=sf(e.subarray(o+1));return s+(a-s)*(i-o)}}function uEe(e,t,n=tEe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function Xct(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function lEe(e,t){return XU(e,.5,t)}function*Qct(e){for(const t of e)yield*t}function cEe(e){return Array.from(Qct(e))}function af(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function fEe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Jct(e,...t){e=new U6(e),t=t.map(Zct);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Zct(e){return e instanceof U6?e:new U6(e)}function eft(...e){const t=new U6;for(const n of e)for(const r of n)t.add(r);return t}function tft(e){return e}var o7=1,s7=2,QU=3,zA=4,qae=1e-6;function nft(e){return"translate("+e+",0)"}function rft(e){return"translate(0,"+e+")"}function ift(e){return t=>+e(t)}function oft(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function sft(){return!this.__axis}function dEe(e,t){var n=[],r=null,i=null,o=6,s=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===o7||e===zA?-1:1,c=e===zA||e===s7?"x":"y",f=e===o7||e===QU?nft:rft;function d(h){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):tft),g=Math.max(o,0)+a,v=t.range(),b=+v[0]+u,w=+v[v.length-1]+u,E=(t.bandwidth?oft:ift)(t.copy(),u),T=h.selection?h.selection():h,C=T.selectAll(".domain").data([null]),S=T.selectAll(".tick").data(m,t).order(),I=S.exit(),R=S.enter().append("g").attr("class","tick"),P=S.select("line"),M=S.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(R),P=P.merge(R.append("line").attr("stroke","currentColor").attr(c+"2",l*o)),M=M.merge(R.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===o7?"0em":e===QU?"0.71em":"0.32em")),h!==T&&(C=C.transition(h),S=S.transition(h),P=P.transition(h),M=M.transition(h),I=I.transition(h).attr("opacity",qae).attr("transform",function(B){return isFinite(B=E(B))?f(B+u):this.getAttribute("transform")}),R.attr("opacity",qae).attr("transform",function(B){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(B))?L:E(B))+u)})),I.remove(),C.attr("d",e===zA||e===s7?s?"M"+l*s+","+b+"H"+u+"V"+w+"H"+l*s:"M"+u+","+b+"V"+w:s?"M"+b+","+l*s+"V"+u+"H"+w+"V"+l*s:"M"+b+","+u+"H"+w),S.attr("opacity",1).attr("transform",function(B){return f(E(B)+u)}),P.attr(c+"2",l*o),M.attr(c,l*g).text(p),T.filter(sft).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===s7?"start":e===zA?"end":"middle"),T.each(function(){this.__axis=E})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(o=s=+h,d):o},d.tickSizeInner=function(h){return arguments.length?(o=+h,d):o},d.tickSizeOuter=function(h){return arguments.length?(s=+h,d):s},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function hEe(e){return dEe(QU,e)}function H6(e){return dEe(zA,e)}var aft={value:()=>{}};function FK(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mO(n)}function mO(e){this._=e}function uft(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mO.prototype=FK.prototype={constructor:mO,on:function(e,t){var n=this._,r=uft(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=lft(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Wae(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Wae(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mO(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function lft(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Wae(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=aft,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var JU="http://www.w3.org/1999/xhtml";const Gae={svg:"http://www.w3.org/2000/svg",xhtml:JU,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function y8(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gae.hasOwnProperty(t)?{space:Gae[t],local:e}:e}function cft(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===JU&&t.documentElement.namespaceURI===JU?t.createElement(e):t.createElementNS(n,e)}}function fft(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pEe(e){var t=y8(e);return(t.local?fft:cft)(t)}function dft(){}function MK(e){return e==null?dft:function(){return this.querySelector(e)}}function hft(e){typeof e!="function"&&(e=MK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),u,l,c=0;c<s;++c)(u=o[c])&&(l=e.call(u,u.__data__,c,o))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new xf(r,this._parents)}function pft(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mft(){return[]}function mEe(e){return e==null?mft:function(){return this.querySelectorAll(e)}}function gft(e){return function(){return pft(e.apply(this,arguments))}}function yft(e){typeof e=="function"?e=gft(e):e=mEe(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(r.push(e.call(u,u.__data__,l,s)),i.push(u));return new xf(r,i)}function gEe(e){return function(){return this.matches(e)}}function yEe(e){return function(t){return t.matches(e)}}var vft=Array.prototype.find;function bft(e){return function(){return vft.call(this.children,e)}}function xft(){return this.firstElementChild}function wft(e){return this.select(e==null?xft:bft(typeof e=="function"?e:yEe(e)))}var _ft=Array.prototype.filter;function Eft(){return Array.from(this.children)}function Tft(e){return function(){return _ft.call(this.children,e)}}function Cft(e){return this.selectAll(e==null?Eft:Tft(typeof e=="function"?e:yEe(e)))}function Sft(e){typeof e!="function"&&(e=gEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new xf(r,this._parents)}function vEe(e){return new Array(e.length)}function Aft(){return new xf(this._enter||this._groups.map(vEe),this._parents)}function q6(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}q6.prototype={constructor:q6,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Dft(e){return function(){return e}}function kft(e,t,n,r,i,o){for(var s=0,a,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new q6(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Ift(e,t,n,r,i,o,s){var a,u,l=new Map,c=t.length,f=o.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=s.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=s.call(e,o[a],a,o)+"",(u=l.get(h))?(r[a]=u,u.__data__=o[a],l.delete(h)):n[a]=new q6(e,o[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Rft(e){return e.__data__}function Nft(e,t){if(!arguments.length)return Array.from(this,Rft);var n=t?Ift:kft,r=this._parents,i=this._groups;typeof e!="function"&&(e=Dft(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=Pft(e.call(c,c&&c.__data__,l,r)),m=h.length,p=a[l]=new Array(m),g=s[l]=new Array(m),v=u[l]=new Array(d);n(c,f,p,g,v,h,t);for(var b=0,w=0,E,T;b<m;++b)if(E=p[b]){for(b>=w&&(w=b+1);!(T=g[w])&&++w<m;);E._next=T||null}}return s=new xf(s,r),s._enter=a,s._exit=u,s}function Pft(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Oft(){return new xf(this._exit||this._groups.map(vEe),this._parents)}function Fft(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Mft(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,m=0;m<f;++m)(h=l[m]||c[m])&&(d[m]=h);for(;u<i;++u)a[u]=n[u];return new xf(a,this._parents)}function $ft(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Lft(e){e||(e=Bft);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,u=i[o]=new Array(a),l,c=0;c<a;++c)(l=s[c])&&(u[c]=l);u.sort(t)}return new xf(i,this._parents).order()}function Bft(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jft(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zft(){return Array.from(this)}function Uft(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Vft(){let e=0;for(const t of this)++e;return e}function Hft(){return!this.node()}function qft(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function Wft(e){return function(){this.removeAttribute(e)}}function Gft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yft(e,t){return function(){this.setAttribute(e,t)}}function Kft(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xft(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Qft(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Jft(e,t){var n=y8(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Gft:Wft:typeof t=="function"?n.local?Qft:Xft:n.local?Kft:Yft)(n,t))}function bEe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Zft(e){return function(){this.style.removeProperty(e)}}function edt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tdt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ndt(e,t,n){return arguments.length>1?this.each((t==null?Zft:typeof t=="function"?tdt:edt)(e,t,n??"")):F2(this.node(),e)}function F2(e,t){return e.style.getPropertyValue(t)||bEe(e).getComputedStyle(e,null).getPropertyValue(t)}function rdt(e){return function(){delete this[e]}}function idt(e,t){return function(){this[e]=t}}function odt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sdt(e,t){return arguments.length>1?this.each((t==null?rdt:typeof t=="function"?odt:idt)(e,t)):this.node()[e]}function xEe(e){return e.trim().split(/^|\s+/)}function $K(e){return e.classList||new wEe(e)}function wEe(e){this._node=e,this._names=xEe(e.getAttribute("class")||"")}wEe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _Ee(e,t){for(var n=$K(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function EEe(e,t){for(var n=$K(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function adt(e){return function(){_Ee(this,e)}}function udt(e){return function(){EEe(this,e)}}function ldt(e,t){return function(){(t.apply(this,arguments)?_Ee:EEe)(this,e)}}function cdt(e,t){var n=xEe(e+"");if(arguments.length<2){for(var r=$K(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ldt:t?adt:udt)(n,t))}function fdt(){this.textContent=""}function ddt(e){return function(){this.textContent=e}}function hdt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pdt(e){return arguments.length?this.each(e==null?fdt:(typeof e=="function"?hdt:ddt)(e)):this.node().textContent}function mdt(){this.innerHTML=""}function gdt(e){return function(){this.innerHTML=e}}function ydt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vdt(e){return arguments.length?this.each(e==null?mdt:(typeof e=="function"?ydt:gdt)(e)):this.node().innerHTML}function bdt(){this.nextSibling&&this.parentNode.appendChild(this)}function xdt(){return this.each(bdt)}function wdt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _dt(){return this.each(wdt)}function Edt(e){var t=typeof e=="function"?e:pEe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tdt(){return null}function Cdt(e,t){var n=typeof e=="function"?e:pEe(e),r=t==null?Tdt:typeof t=="function"?t:MK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Sdt(){var e=this.parentNode;e&&e.removeChild(this)}function Adt(){return this.each(Sdt)}function Ddt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kdt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Idt(e){return this.select(e?kdt:Ddt)}function Rdt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ndt(e){return function(t){e.call(this,t,this.__data__)}}function Pdt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Odt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Fdt(e,t,n){return function(){var r=this.__on,i,o=Ndt(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Mdt(e,t,n){var r=Pdt(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Fdt:Odt,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function TEe(e,t,n){var r=bEe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function $dt(e,t){return function(){return TEe(this,e,t)}}function Ldt(e,t){return function(){return TEe(this,e,t.apply(this,arguments))}}function Bdt(e,t){return this.each((typeof t=="function"?Ldt:$dt)(e,t))}function*jdt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var CEe=[null];function xf(e,t){this._groups=e,this._parents=t}function KI(){return new xf([[document.documentElement]],CEe)}function zdt(){return this}xf.prototype=KI.prototype={constructor:xf,select:hft,selectAll:yft,selectChild:wft,selectChildren:Cft,filter:Sft,data:Nft,enter:Aft,exit:Oft,join:Fft,merge:Mft,selection:zdt,order:$ft,sort:Lft,call:jft,nodes:zft,node:Uft,size:Vft,empty:Hft,each:qft,attr:Jft,style:ndt,property:sdt,classed:cdt,text:pdt,html:vdt,raise:xdt,lower:_dt,append:Edt,insert:Cdt,remove:Adt,clone:Idt,datum:Rdt,on:Mdt,dispatch:Bdt,[Symbol.iterator]:jdt};function XI(e){return typeof e=="string"?new xf([[document.querySelector(e)]],[document.documentElement]):new xf([[e]],CEe)}function sC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function QI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function lv(){}var wx=.7,M2=1/wx,r2="\\s*([+-]?\\d+)\\s*",Dk="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Udt=/^#([0-9a-f]{3,8})$/,Vdt=new RegExp(`^rgb\\(${r2},${r2},${r2}\\)$`),Hdt=new RegExp(`^rgb\\(${Wp},${Wp},${Wp}\\)$`),qdt=new RegExp(`^rgba\\(${r2},${r2},${r2},${Dk}\\)$`),Wdt=new RegExp(`^rgba\\(${Wp},${Wp},${Wp},${Dk}\\)$`),Gdt=new RegExp(`^hsl\\(${Dk},${Wp},${Wp}\\)$`),Ydt=new RegExp(`^hsla\\(${Dk},${Wp},${Wp},${Dk}\\)$`),Yae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sC(lv,_x,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Kae,formatHex:Kae,formatHex8:Kdt,formatHsl:Xdt,formatRgb:Xae,toString:Xae});function Kae(){return this.rgb().formatHex()}function Kdt(){return this.rgb().formatHex8()}function Xdt(){return SEe(this).formatHsl()}function Xae(){return this.rgb().formatRgb()}function _x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Udt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Qae(t):n===3?new fa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?D3(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?D3(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vdt.exec(e))?new fa(t[1],t[2],t[3],1):(t=Hdt.exec(e))?new fa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qdt.exec(e))?D3(t[1],t[2],t[3],t[4]):(t=Wdt.exec(e))?D3(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Gdt.exec(e))?eue(t[1],t[2]/100,t[3]/100,1):(t=Ydt.exec(e))?eue(t[1],t[2]/100,t[3]/100,t[4]):Yae.hasOwnProperty(e)?Qae(Yae[e]):e==="transparent"?new fa(NaN,NaN,NaN,0):null}function Qae(e){return new fa(e>>16&255,e>>8&255,e&255,1)}function D3(e,t,n,r){return r<=0&&(e=t=n=NaN),new fa(e,t,n,r)}function LK(e){return e instanceof lv||(e=_x(e)),e?(e=e.rgb(),new fa(e.r,e.g,e.b,e.opacity)):new fa}function R1(e,t,n,r){return arguments.length===1?LK(e):new fa(e,t,n,r??1)}function fa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}sC(fa,R1,QI(lv,{brighter(e){return e=e==null?M2:Math.pow(M2,e),new fa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wx:Math.pow(wx,e),new fa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fa(ox(this.r),ox(this.g),ox(this.b),W6(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jae,formatHex:Jae,formatHex8:Qdt,formatRgb:Zae,toString:Zae}));function Jae(){return`#${Qb(this.r)}${Qb(this.g)}${Qb(this.b)}`}function Qdt(){return`#${Qb(this.r)}${Qb(this.g)}${Qb(this.b)}${Qb((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zae(){const e=W6(this.opacity);return`${e===1?"rgb(":"rgba("}${ox(this.r)}, ${ox(this.g)}, ${ox(this.b)}${e===1?")":`, ${e})`}`}function W6(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ox(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qb(e){return e=ox(e),(e<16?"0":"")+e.toString(16)}function eue(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ah(e,t,n,r)}function SEe(e){if(e instanceof ah)return new ah(e.h,e.s,e.l,e.opacity);if(e instanceof lv||(e=_x(e)),!e)return new ah;if(e instanceof ah)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new ah(s,a,u,e.opacity)}function G6(e,t,n,r){return arguments.length===1?SEe(e):new ah(e,t,n,r??1)}function ah(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sC(ah,G6,QI(lv,{brighter(e){return e=e==null?M2:Math.pow(M2,e),new ah(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wx:Math.pow(wx,e),new ah(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new fa(a7(e>=240?e-240:e+120,i,r),a7(e,i,r),a7(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ah(tue(this.h),k3(this.s),k3(this.l),W6(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=W6(this.opacity);return`${e===1?"hsl(":"hsla("}${tue(this.h)}, ${k3(this.s)*100}%, ${k3(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tue(e){return e=(e||0)%360,e<0?e+360:e}function k3(e){return Math.max(0,Math.min(1,e||0))}function a7(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const AEe=Math.PI/180,DEe=180/Math.PI,Y6=18,kEe=.96422,IEe=1,REe=.82521,NEe=4/29,i2=6/29,PEe=3*i2*i2,Jdt=i2*i2*i2;function OEe(e){if(e instanceof Gp)return new Gp(e.l,e.a,e.b,e.opacity);if(e instanceof j0)return FEe(e);e instanceof fa||(e=LK(e));var t=f7(e.r),n=f7(e.g),r=f7(e.b),i=u7((.2225045*t+.7168786*n+.0606169*r)/IEe),o,s;return t===n&&n===r?o=s=i:(o=u7((.4360747*t+.3850649*n+.1430804*r)/kEe),s=u7((.0139322*t+.0971045*n+.7141733*r)/REe)),new Gp(116*i-16,500*(o-i),200*(i-s),e.opacity)}function K6(e,t,n,r){return arguments.length===1?OEe(e):new Gp(e,t,n,r??1)}function Gp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}sC(Gp,K6,QI(lv,{brighter(e){return new Gp(this.l+Y6*(e??1),this.a,this.b,this.opacity)},darker(e){return new Gp(this.l-Y6*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=kEe*l7(t),e=IEe*l7(e),n=REe*l7(n),new fa(c7(3.1338561*t-1.6168667*e-.4906146*n),c7(-.9787684*t+1.9161415*e+.033454*n),c7(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function u7(e){return e>Jdt?Math.pow(e,1/3):e/PEe+NEe}function l7(e){return e>i2?e*e*e:PEe*(e-NEe)}function c7(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function f7(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Zdt(e){if(e instanceof j0)return new j0(e.h,e.c,e.l,e.opacity);if(e instanceof Gp||(e=OEe(e)),e.a===0&&e.b===0)return new j0(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*DEe;return new j0(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function X6(e,t,n,r){return arguments.length===1?Zdt(e):new j0(e,t,n,r??1)}function j0(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function FEe(e){if(isNaN(e.h))return new Gp(e.l,0,0,e.opacity);var t=e.h*AEe;return new Gp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}sC(j0,X6,QI(lv,{brighter(e){return new j0(this.h,this.c,this.l+Y6*(e??1),this.opacity)},darker(e){return new j0(this.h,this.c,this.l-Y6*(e??1),this.opacity)},rgb(){return FEe(this).rgb()}}));var MEe=-.14861,BK=1.78277,jK=-.29227,v8=-.90649,kk=1.97294,nue=kk*v8,rue=kk*BK,iue=BK*jK-v8*MEe;function eht(e){if(e instanceof sx)return new sx(e.h,e.s,e.l,e.opacity);e instanceof fa||(e=LK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(iue*r+nue*t-rue*n)/(iue+nue-rue),o=r-i,s=(kk*(n-i)-jK*o)/v8,a=Math.sqrt(s*s+o*o)/(kk*i*(1-i)),u=a?Math.atan2(s,o)*DEe-120:NaN;return new sx(u<0?u+360:u,a,i,e.opacity)}function ZU(e,t,n,r){return arguments.length===1?eht(e):new sx(e,t,n,r??1)}function sx(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}sC(sx,ZU,QI(lv,{brighter(e){return e=e==null?M2:Math.pow(M2,e),new sx(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wx:Math.pow(wx,e),new sx(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*AEe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new fa(255*(t+n*(MEe*r+BK*i)),255*(t+n*(jK*r+v8*i)),255*(t+n*(kk*r)),this.opacity)}}));function $Ee(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function LEe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return $Ee((n-r/t)*t,s,i,o,a)}}function BEe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return $Ee((n-r/t)*t,i,o,s,a)}}const b8=e=>()=>e;function jEe(e,t){return function(n){return e+n*t}}function tht(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function x8(e,t){var n=t-e;return n?jEe(e,n>180||n<-180?n-360*Math.round(n/360):n):b8(isNaN(e)?t:e)}function nht(e){return(e=+e)==1?da:function(t,n){return n-t?tht(t,n,e):b8(isNaN(t)?n:t)}}function da(e,t){var n=t-e;return n?jEe(e,n):b8(isNaN(e)?t:e)}const Ik=function e(t){var n=nht(t);function r(i,o){var s=n((i=R1(i)).r,(o=R1(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=da(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function zEe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=R1(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}var UEe=zEe(LEe),rht=zEe(BEe);function zK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function VEe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iht(e,t){return(VEe(t)?zK:HEe)(e,t)}function HEe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=cv(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function qEe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Jf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function WEe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=cv(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var eV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d7=new RegExp(eV.source,"g");function oht(e){return function(){return e}}function sht(e){return function(t){return e(t)+""}}function UK(e,t){var n=eV.lastIndex=d7.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(e=e+"",t=t+"";(r=eV.exec(e))&&(i=d7.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Jf(r,i)})),n=d7.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?sht(u[0].x):oht(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function cv(e,t){var n=typeof t,r;return t==null||n==="boolean"?b8(t):(n==="number"?Jf:n==="string"?(r=_x(t))?(t=r,Ik):UK:t instanceof _x?Ik:t instanceof Date?qEe:VEe(t)?zK:Array.isArray(t)?HEe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?WEe:Jf)(e,t)}function aht(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function uht(e,t){var n=x8(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function JI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var oue=180/Math.PI,tV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function GEe(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*oue,skewX:Math.atan(u)*oue,scaleX:s,scaleY:a}}var I3;function lht(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tV:GEe(t.a,t.b,t.c,t.d,t.e,t.f)}function cht(e){return e==null||(I3||(I3=document.createElementNS("http://www.w3.org/2000/svg","g")),I3.setAttribute("transform",e),!(e=I3.transform.baseVal.consolidate()))?tV:(e=e.matrix,GEe(e.a,e.b,e.c,e.d,e.e,e.f))}function YEe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,c,f,d,h,m){if(l!==f||c!==d){var p=h.push("translate(",null,t,null,n);m.push({i:p-4,x:Jf(l,f)},{i:p-2,x:Jf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function s(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Jf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Jf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,m){if(l!==f||c!==d){var p=h.push(i(h)+"scale(",null,",",null,")");m.push({i:p-4,x:Jf(l,f)},{i:p-2,x:Jf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),o(l.translateX,l.translateY,c.translateX,c.translateY,f,d),s(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var m=-1,p=d.length,g;++m<p;)f[(g=d[m]).i]=g.x(h);return f.join("")}}}var KEe=YEe(lht,"px, ","px)","deg)"),XEe=YEe(cht,", ",")",")"),fht=1e-12;function sue(e){return((e=Math.exp(e))+1/e)/2}function dht(e){return((e=Math.exp(e))-1/e)/2}function hht(e){return((e=Math.exp(2*e))-1)/(e+1)}const pht=function e(t,n,r){function i(o,s){var a=o[0],u=o[1],l=o[2],c=s[0],f=s[1],d=s[2],h=c-a,m=f-u,p=h*h+m*m,g,v;if(p<fht)v=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*m,l*Math.exp(t*S*v)]};else{var b=Math.sqrt(p),w=(d*d-l*l+r*p)/(2*l*n*b),E=(d*d-l*l-r*p)/(2*d*n*b),T=Math.log(Math.sqrt(w*w+1)-w),C=Math.log(Math.sqrt(E*E+1)-E);v=(C-T)/t,g=function(S){var I=S*v,R=sue(T),P=l/(n*b)*(R*hht(t*I+T)-dht(T));return[a+P*h,u+P*m,l*R/sue(t*I+T)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,u=a*a;return e(s,a,u)},i}(Math.SQRT2,2,4);function QEe(e){return function(t,n){var r=e((t=G6(t)).h,(n=G6(n)).h),i=da(t.s,n.s),o=da(t.l,n.l),s=da(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const mht=QEe(x8);var ght=QEe(da);function yht(e,t){var n=da((e=K6(e)).l,(t=K6(t)).l),r=da(e.a,t.a),i=da(e.b,t.b),o=da(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function JEe(e){return function(t,n){var r=e((t=X6(t)).h,(n=X6(n)).h),i=da(t.c,n.c),o=da(t.l,n.l),s=da(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const vht=JEe(x8);var bht=JEe(da);function ZEe(e){return function t(n){n=+n;function r(i,o){var s=e((i=ZU(i)).h,(o=ZU(o)).h),a=da(i.s,o.s),u=da(i.l,o.l),l=da(i.opacity,o.opacity);return function(c){return i.h=s(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const xht=ZEe(x8);var wht=ZEe(da);function VK(e,t){t===void 0&&(t=e,e=cv);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function _ht(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Eht=Object.freeze(Object.defineProperty({__proto__:null,interpolate:cv,interpolateArray:iht,interpolateBasis:LEe,interpolateBasisClosed:BEe,interpolateCubehelix:xht,interpolateCubehelixLong:wht,interpolateDate:qEe,interpolateDiscrete:aht,interpolateHcl:vht,interpolateHclLong:bht,interpolateHsl:mht,interpolateHslLong:ght,interpolateHue:uht,interpolateLab:yht,interpolateNumber:Jf,interpolateNumberArray:zK,interpolateObject:WEe,interpolateRgb:Ik,interpolateRgbBasis:UEe,interpolateRgbBasisClosed:rht,interpolateRound:JI,interpolateString:UK,interpolateTransformCss:KEe,interpolateTransformSvg:XEe,interpolateZoom:pht,piecewise:VK,quantize:_ht},Symbol.toStringTag,{value:"Module"}));var $2=0,UA=0,ZS=0,e2e=1e3,Q6,VA,J6=0,Ex=0,w8=0,Rk=typeof performance=="object"&&performance.now?performance:Date,t2e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _8(){return Ex||(t2e(Tht),Ex=Rk.now()+w8)}function Tht(){Ex=0}function Nk(){this._call=this._time=this._next=null}Nk.prototype=HK.prototype={constructor:Nk,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?_8():+n)+(t==null?0:+t),!this._next&&VA!==this&&(VA?VA._next=this:Q6=this,VA=this),this._call=e,this._time=n,nV()},stop:function(){this._call&&(this._call=null,this._time=1/0,nV())}};function HK(e,t,n){var r=new Nk;return r.restart(e,t,n),r}function Cht(){_8(),++$2;for(var e=Q6,t;e;)(t=Ex-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$2}function aue(){Ex=(J6=Rk.now())+w8,$2=UA=0;try{Cht()}finally{$2=0,Aht(),Ex=0}}function Sht(){var e=Rk.now(),t=e-J6;t>e2e&&(w8-=t,J6=e)}function Aht(){for(var e,t=Q6,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Q6=n);VA=e,nV(r)}function nV(e){if(!$2){UA&&(UA=clearTimeout(UA));var t=e-Ex;t>24?(e<1/0&&(UA=setTimeout(aue,e-Rk.now()-w8)),ZS&&(ZS=clearInterval(ZS))):(ZS||(J6=Rk.now(),ZS=setInterval(Sht,e2e)),$2=1,t2e(aue))}}function uue(e,t,n){var r=new Nk;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Dht(e,t,n){var r=new Nk,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?_8():+a,r._restart(function u(l){l+=i,r._restart(u,i+=s,a),o(l)},s,a)},r.restart(e,t,n),r)}var kht=FK("start","end","cancel","interrupt"),Iht=[],n2e=0,lue=1,rV=2,gO=3,cue=4,iV=5,yO=6;function E8(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Rht(e,n,{name:t,index:r,group:i,on:kht,tween:Iht,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:n2e})}function qK(e,t){var n=zh(e,t);if(n.state>n2e)throw new Error("too late; already scheduled");return n}function Sm(e,t){var n=zh(e,t);if(n.state>gO)throw new Error("too late; already running");return n}function zh(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Rht(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=HK(o,0,n.time);function o(l){n.state=lue,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var c,f,d,h;if(n.state!==lue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===gO)return uue(s);h.state===cue?(h.state=yO,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=yO,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(uue(function(){n.state===gO&&(n.state=cue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=rV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===rV){for(n.state=gO,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=iV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===iV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=yO,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Nht(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>rV&&r.state<iV,r.state=yO,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Pht(e){return this.each(function(){Nht(this,e)})}function Oht(e,t){var n,r;return function(){var i=Sm(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Fht(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Sm(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function Mht(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=zh(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?Oht:Fht)(n,e,t))}function WK(e,t,n){var r=e._id;return e.each(function(){var i=Sm(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return zh(i,r).value[t]}}function r2e(e,t){var n;return(typeof t=="number"?Jf:t instanceof _x?Ik:(n=_x(t))?(t=n,Ik):UK)(e,t)}function $ht(e){return function(){this.removeAttribute(e)}}function Lht(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bht(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function jht(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function zht(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Uht(e,t,n){var r,i,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=a+"",s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a)))}}function Vht(e,t){var n=y8(e),r=n==="transform"?XEe:r2e;return this.attrTween(e,typeof t=="function"?(n.local?Uht:zht)(n,r,WK(this,"attr."+e,t)):t==null?(n.local?Lht:$ht)(n):(n.local?jht:Bht)(n,r,t))}function Hht(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function qht(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wht(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&qht(e,o)),n}return i._value=t,i}function Ght(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Hht(e,o)),n}return i._value=t,i}function Yht(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=y8(e);return this.tween(n,(r.local?Wht:Ght)(r,t))}function Kht(e,t){return function(){qK(this,e).delay=+t.apply(this,arguments)}}function Xht(e,t){return t=+t,function(){qK(this,e).delay=t}}function Qht(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Kht:Xht)(t,e)):zh(this.node(),t).delay}function Jht(e,t){return function(){Sm(this,e).duration=+t.apply(this,arguments)}}function Zht(e,t){return t=+t,function(){Sm(this,e).duration=t}}function ept(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jht:Zht)(t,e)):zh(this.node(),t).duration}function tpt(e,t){if(typeof t!="function")throw new Error;return function(){Sm(this,e).ease=t}}function npt(e){var t=this._id;return arguments.length?this.each(tpt(t,e)):zh(this.node(),t).ease}function rpt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Sm(this,e).ease=n}}function ipt(e){if(typeof e!="function")throw new Error;return this.each(rpt(this._id,e))}function opt(e){typeof e!="function"&&(e=gEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],u,l=0;l<s;++l)(u=o[l])&&e.call(u,u.__data__,l,o)&&a.push(u);return new vg(r,this._parents,this._name,this._id)}function spt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u=t[a],l=n[a],c=u.length,f=s[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)s[a]=t[a];return new vg(s,this._parents,this._name,this._id)}function apt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function upt(e,t,n){var r,i,o=apt(t)?qK:Sm;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function lpt(e,t){var n=this._id;return arguments.length<2?zh(this.node(),n).on.on(e):this.each(upt(n,e,t))}function cpt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function fpt(){return this.on("end.remove",cpt(this._id))}function dpt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=MK(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],u=a.length,l=o[s]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,E8(l[d],t,n,d,l,zh(c,n)));return new vg(o,this._parents,t,n)}function hpt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mEe(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,m=zh(c,n),p=0,g=d.length;p<g;++p)(h=d[p])&&E8(h,t,n,p,d,m);o.push(d),s.push(c)}return new vg(o,s,t,n)}var ppt=KI.prototype.constructor;function mpt(){return new ppt(this._groups,this._parents)}function gpt(e,t){var n,r,i;return function(){var o=F2(this,e),s=(this.style.removeProperty(e),F2(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function i2e(e){return function(){this.style.removeProperty(e)}}function ypt(e,t,n){var r,i=n+"",o;return function(){var s=F2(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function vpt(e,t,n){var r,i,o;return function(){var s=F2(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),F2(this,e))),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function bpt(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var u=Sm(this,e),l=u.on,c=u.value[o]==null?a||(a=i2e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(s,i=c),u.on=r}}function xpt(e,t,n){var r=(e+="")=="transform"?KEe:r2e;return t==null?this.styleTween(e,gpt(e,r)).on("end.style."+e,i2e(e)):typeof t=="function"?this.styleTween(e,vpt(e,r,WK(this,"style."+e,t))).each(bpt(this._id,e)):this.styleTween(e,ypt(e,r,t),n).on("end.style."+e,null)}function wpt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function _pt(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&wpt(e,s,n)),r}return o._value=t,o}function Ept(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,_pt(e,t,n??""))}function Tpt(e){return function(){this.textContent=e}}function Cpt(e){return function(){var t=e(this);this.textContent=t??""}}function Spt(e){return this.tween("text",typeof e=="function"?Cpt(WK(this,"text",e)):Tpt(e==null?"":e+""))}function Apt(e){return function(t){this.textContent=e.call(this,t)}}function Dpt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Apt(i)),t}return r._value=e,r}function kpt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Dpt(e))}function Ipt(){for(var e=this._name,t=this._id,n=o2e(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var c=zh(u,t);E8(u,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vg(r,this._parents,e,n)}function Rpt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var l=Sm(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&o()})}var Npt=0;function vg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function o2e(){return++Npt}var g0=KI.prototype;vg.prototype={constructor:vg,select:dpt,selectAll:hpt,selectChild:g0.selectChild,selectChildren:g0.selectChildren,filter:opt,merge:spt,selection:mpt,transition:Ipt,call:g0.call,nodes:g0.nodes,node:g0.node,size:g0.size,empty:g0.empty,each:g0.each,on:lpt,attr:Vht,attrTween:Yht,style:xpt,styleTween:Ept,text:Spt,textTween:kpt,remove:fpt,tween:Mht,delay:Qht,duration:ept,ease:npt,easeVarying:ipt,end:Rpt,[Symbol.iterator]:g0[Symbol.iterator]};const Ppt=e=>+e;function Opt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fpt={time:null,delay:0,duration:250,ease:Opt};function Mpt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $pt(e){var t,n;e instanceof vg?(t=e._id,e=e._name):(t=o2e(),(n=Fpt).time=_8(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&E8(u,e,t,l,s,n||Mpt(u,t));return new vg(r,this._parents,e,t)}KI.prototype.interrupt=Pht;KI.prototype.transition=$pt;const oV=Math.PI,sV=2*oV,Nb=1e-6,Lpt=sV-Nb;function s2e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Bpt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return s2e;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let GK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?s2e:Bpt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,u=r-t,l=i-n,c=s-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Nb)if(!(Math.abs(f*u-l*c)>Nb)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-s,m=i-a,p=u*u+l*l,g=h*h+m*m,v=Math.sqrt(p),b=Math.sqrt(d),w=o*Math.tan((oV-Math.acos((p+d-g)/(2*v*b)))/2),E=w/b,T=w/v;Math.abs(E-1)>Nb&&this._append`L${t+E*c},${n+E*f}`,this._append`A${o},${o},0,0,${+(f*h>c*m)},${this._x1=t+T*u},${this._y1=n+T*l}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^s,d=s?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Nb||Math.abs(this._y1-c)>Nb)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%sV+sV),d>Lpt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Nb&&this._append`A${r},${r},0,${+(d>=oV)},${f},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function T8(){return new GK}T8.prototype=GK.prototype;const eg=11102230246251565e-32,bu=134217729,jpt=(3+8*eg)*eg;function h7(e,t,n,r,i){let o,s,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(o=l,l=t[++f]):(o=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(s=l+o,a=o-(s-l),l=t[++f]):(s=c+o,a=o-(s-c),c=r[++d]),o=s,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f]):(s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d]),o=s,a!==0&&(i[h++]=a);for(;f<e;)s=o+l,u=s-o,a=o-(s-u)+(l-u),l=t[++f],o=s,a!==0&&(i[h++]=a);for(;d<n;)s=o+c,u=s-o,a=o-(s-u)+(c-u),c=r[++d],o=s,a!==0&&(i[h++]=a);return(o!==0||h===0)&&(i[h++]=o),h}function zpt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function ZI(e){return new Float64Array(e)}const Upt=(3+16*eg)*eg,Vpt=(2+12*eg)*eg,Hpt=(9+64*eg)*eg*eg,nE=ZI(4),fue=ZI(8),due=ZI(12),hue=ZI(16),sl=ZI(4);function qpt(e,t,n,r,i,o,s){let a,u,l,c,f,d,h,m,p,g,v,b,w,E,T,C,S,I;const R=e-i,P=n-i,M=t-o,B=r-o;E=R*B,d=bu*R,h=d-(d-R),m=R-h,d=bu*B,p=d-(d-B),g=B-p,T=m*g-(E-h*p-m*p-h*g),C=M*P,d=bu*M,h=d-(d-M),m=M-h,d=bu*P,p=d-(d-P),g=P-p,S=m*g-(C-h*p-m*p-h*g),v=T-S,f=T-v,nE[0]=T-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,nE[1]=w-(v+f)+(f-C),I=b+v,f=I-b,nE[2]=b-(I-f)+(v-f),nE[3]=I;let L=zpt(4,nE),z=Vpt*s;if(L>=z||-L>=z||(f=e-R,a=e-(R+f)+(f-i),f=n-P,l=n-(P+f)+(f-i),f=t-M,u=t-(M+f)+(f-o),f=r-B,c=r-(B+f)+(f-o),a===0&&u===0&&l===0&&c===0)||(z=Hpt*s+jpt*Math.abs(L),L+=R*c+B*a-(M*l+P*u),L>=z||-L>=z))return L;E=a*B,d=bu*a,h=d-(d-a),m=a-h,d=bu*B,p=d-(d-B),g=B-p,T=m*g-(E-h*p-m*p-h*g),C=u*P,d=bu*u,h=d-(d-u),m=u-h,d=bu*P,p=d-(d-P),g=P-p,S=m*g-(C-h*p-m*p-h*g),v=T-S,f=T-v,sl[0]=T-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,sl[1]=w-(v+f)+(f-C),I=b+v,f=I-b,sl[2]=b-(I-f)+(v-f),sl[3]=I;const G=h7(4,nE,4,sl,fue);E=R*c,d=bu*R,h=d-(d-R),m=R-h,d=bu*c,p=d-(d-c),g=c-p,T=m*g-(E-h*p-m*p-h*g),C=M*l,d=bu*M,h=d-(d-M),m=M-h,d=bu*l,p=d-(d-l),g=l-p,S=m*g-(C-h*p-m*p-h*g),v=T-S,f=T-v,sl[0]=T-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,sl[1]=w-(v+f)+(f-C),I=b+v,f=I-b,sl[2]=b-(I-f)+(v-f),sl[3]=I;const W=h7(G,fue,4,sl,due);E=a*c,d=bu*a,h=d-(d-a),m=a-h,d=bu*c,p=d-(d-c),g=c-p,T=m*g-(E-h*p-m*p-h*g),C=u*l,d=bu*u,h=d-(d-u),m=u-h,d=bu*l,p=d-(d-l),g=l-p,S=m*g-(C-h*p-m*p-h*g),v=T-S,f=T-v,sl[0]=T-(v+f)+(f-S),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,sl[1]=w-(v+f)+(f-C),I=b+v,f=I-b,sl[2]=b-(I-f)+(v-f),sl[3]=I;const te=h7(W,due,4,sl,hue);return hue[te-1]}function R3(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),u=s-a,l=Math.abs(s+a);return Math.abs(u)>=Upt*l?u:-qpt(e,t,n,r,i,o,l)}const pue=Math.pow(2,-52),N3=new Uint32Array(512);class Z6{static from(t,n=Xpt,r=Qpt){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new Z6(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let R=0;R<s;R++){const P=t[2*R],M=t[2*R+1];P<a&&(a=P),M<u&&(u=M),P>l&&(l=P),M>c&&(c=M),this._ids[R]=R}const f=(a+l)/2,d=(u+c)/2;let h,m,p;for(let R=0,P=1/0;R<s;R++){const M=p7(f,d,t[2*R],t[2*R+1]);M<P&&(h=R,P=M)}const g=t[2*h],v=t[2*h+1];for(let R=0,P=1/0;R<s;R++){if(R===h)continue;const M=p7(g,v,t[2*R],t[2*R+1]);M<P&&M>0&&(m=R,P=M)}let b=t[2*m],w=t[2*m+1],E=1/0;for(let R=0;R<s;R++){if(R===h||R===m)continue;const P=Ypt(g,v,b,w,t[2*R],t[2*R+1]);P<E&&(p=R,E=P)}let T=t[2*p],C=t[2*p+1];if(E===1/0){for(let M=0;M<s;M++)this._dists[M]=t[2*M]-t[0]||t[2*M+1]-t[1];$E(this._ids,this._dists,0,s-1);const R=new Uint32Array(s);let P=0;for(let M=0,B=-1/0;M<s;M++){const L=this._ids[M],z=this._dists[L];z>B&&(R[P++]=L,B=z)}this.hull=R.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(R3(g,v,b,w,T,C)<0){const R=m,P=b,M=w;m=p,b=T,w=C,p=R,T=P,C=M}const S=Kpt(g,v,b,w,T,C);this._cx=S.x,this._cy=S.y;for(let R=0;R<s;R++)this._dists[R]=p7(t[2*R],t[2*R+1],S.x,S.y);$E(this._ids,this._dists,0,s-1),this._hullStart=h;let I=3;r[h]=n[p]=m,r[m]=n[h]=p,r[p]=n[m]=h,i[h]=0,i[m]=1,i[p]=2,o.fill(-1),o[this._hashKey(g,v)]=h,o[this._hashKey(b,w)]=m,o[this._hashKey(T,C)]=p,this.trianglesLen=0,this._addTriangle(h,m,p,-1,-1,-1);for(let R=0,P,M;R<this._ids.length;R++){const B=this._ids[R],L=t[2*B],z=t[2*B+1];if(R>0&&Math.abs(L-P)<=pue&&Math.abs(z-M)<=pue||(P=L,M=z,B===h||B===m||B===p))continue;let G=0;for(let q=0,U=this._hashKey(L,z);q<this._hashSize&&(G=o[(U+q)%this._hashSize],!(G!==-1&&G!==r[G]));q++);G=n[G];let W=G,te;for(;te=r[W],R3(L,z,t[2*W],t[2*W+1],t[2*te],t[2*te+1])>=0;)if(W=te,W===G){W=-1;break}if(W===-1)continue;let Z=this._addTriangle(W,B,r[W],-1,-1,i[W]);i[B]=this._legalize(Z+2),i[W]=Z,I++;let re=r[W];for(;te=r[re],R3(L,z,t[2*re],t[2*re+1],t[2*te],t[2*te+1])<0;)Z=this._addTriangle(re,B,te,i[B],-1,i[re]),i[B]=this._legalize(Z+2),r[re]=re,I--,re=te;if(W===G)for(;te=n[W],R3(L,z,t[2*te],t[2*te+1],t[2*W],t[2*W+1])<0;)Z=this._addTriangle(te,B,W,-1,i[W],i[te]),this._legalize(Z+2),i[te]=Z,r[W]=W,I--,W=te;this._hullStart=n[B]=W,r[W]=n[re]=B,r[B]=re,o[this._hashKey(L,z)]=B,o[this._hashKey(t[2*W],t[2*W+1])]=W}this.hull=new Uint32Array(I);for(let R=0,P=this._hullStart;R<I;R++)this.hull[R]=P,P=r[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Wpt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],u=t-t%3;if(s=u+(t+2)%3,a===-1){if(o===0)break;t=N3[--o];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[s],h=n[t],m=n[c],p=n[f];if(Gpt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*m],i[2*m+1],i[2*p],i[2*p+1])){n[t]=p,n[a]=d;const v=r[f];if(v===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,v),this._link(a,r[s]),this._link(s,f);const b=l+(a+1)%3;o<N3.length&&(N3[o++]=b)}else{if(o===0)break;t=N3[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function Wpt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function p7(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function Gpt(e,t,n,r,i,o,s,a){const u=e-s,l=t-a,c=n-s,f=r-a,d=i-s,h=o-a,m=u*u+l*l,p=c*c+f*f,g=d*d+h*h;return u*(f*g-p*h)-l*(c*g-p*d)+m*(c*h-f*d)<0}function Ypt(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=(l*c-a*f)*d,m=(s*f-u*c)*d;return h*h+m*m}function Kpt(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,l=o-t,c=s*s+a*a,f=u*u+l*l,d=.5/(s*l-a*u),h=e+(l*c-a*f)*d,m=t+(s*f-u*c)*d;return{x:h,y:m}}function $E(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;eA(e,i,o),t[e[n]]>t[e[r]]&&eA(e,n,r),t[e[o]]>t[e[r]]&&eA(e,o,r),t[e[n]]>t[e[o]]&&eA(e,n,o);const a=e[o],u=t[a];for(;;){do o++;while(t[e[o]]<u);do s--;while(t[e[s]]>u);if(s<o)break;eA(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?($E(e,t,o,r),$E(e,t,n,s-1)):($E(e,t,n,s-1),$E(e,t,o,r))}}function eA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Xpt(e){return e[0]}function Qpt(e){return e[1]}const mue=1e-6;class Jb{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>mue||Math.abs(this._y1-o)>mue)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class aV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Jpt=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let p=0,g=0,v=r.length,b,w;p<v;p+=3,g+=2){const E=r[p]*2,T=r[p+1]*2,C=r[p+2]*2,S=t[E],I=t[E+1],R=t[T],P=t[T+1],M=t[C],B=t[C+1],L=R-S,z=P-I,G=M-S,W=B-I,te=(L*W-z*G)*2;if(Math.abs(te)<1e-9){if(o===void 0){o=s=0;for(const re of n)o+=t[re*2],s+=t[re*2+1];o/=n.length,s/=n.length}const Z=1e9*Math.sign((o-S)*W-(s-I)*G);b=(S+M)/2-Z*W,w=(I+B)/2+Z*G}else{const Z=1/te,re=L*L+z*z,q=G*G+W*W;b=S+(W*re-z*q)*Z,w=I+(L*q-G*re)*Z}a[g]=b,a[g+1]=w}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,m=t[2*u+1];i.fill(0);for(let p=0;p<n.length;++p)u=n[p],l=c,f=d,h=m,c=u*4,d=t[2*u],m=t[2*u+1],i[l+2]=i[c]=h-m,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Jb:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,m=Math.floor(d/3)*2,p=s[h],g=s[h+1],v=s[m],b=s[m+1];this._renderSegment(p,g,v,b,t)}let u,l=o[o.length-1];for(let c=0;c<o.length;++c){u=l,l=o[c];const f=Math.floor(i[l]/3)*2,d=s[f],h=s[f+1],m=u*4,p=this._project(d,h,a[m+2],a[m+3]);p&&this._renderSegment(d,h,p[0],p[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Jb:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Jb:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new aV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,u))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+u-2)%u]&&n[(o+3)%s]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let u=s;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==s&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(o=a,s=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let m,p,g,v,b;if(l===0){if((m=this._clipSegment(o,s,a,u,l,c))===null)continue;[p,g,v,b]=m}else{if((m=this._clipSegment(a,u,o,s,c,l))===null)continue;[v,b,p,g]=m,f=d,d=this._edgecode(p,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(p,g):i=[p,g]}f=d,d=this._edgecode(v,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,b):i=[v,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let u,l,c=o||s;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),o?(t=u,n=l,o=this._regioncode(t,n)):(r=u,i=l,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,u;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(u=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(u=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,u=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,u=n+(o=s)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Zpt=2*Math.PI,rE=Math.pow;function emt(e){return e[0]}function tmt(e){return e[1]}function nmt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function rmt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class YK{static from(t,n=emt,r=tmt,i){return new YK("length"in t?imt(t,n,r,i):Float64Array.from(omt(t,n,r,i)))}constructor(t){this._delaunator=new Z6(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&nmt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const m=rmt(n[2*d],n[2*d+1],f);n[2*d]=m[0],n[2*d+1]=m[1]}this._delaunator=new Z6(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=o[u%3===2?u-2:u+1];(r[u]===-1||s[c]===-1)&&(s[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Jpt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=s[l],l=l%3===2?l-2:l+1,s[l]!==t)return;if(l=o[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=rE(n-l[t*2],2)+rE(r-l[t*2+1],2);const d=i[t];let h=d;do{let m=u[h];const p=rE(n-l[m*2],2)+rE(r-l[m*2+1],2);if(p<f&&(f=p,c=m),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=o[(s[t]+1)%o.length],h!==m&&rE(n-l[h*2],2)+rE(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Jb:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const u=i[s];if(u<s)continue;const l=o[s]*2,c=o[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Jb:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],u=i[o+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Zpt)}return r&&r.value()}renderHull(t){const n=t==null?t=new Jb:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new aV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Jb:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,u=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new aV;return this.renderTriangle(t,n),n.value()}}function imt(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*omt(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}var gue={},m7={},g7=34,tA=10,y7=13;function a2e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function smt(e,t){var n=a2e(e);return function(r,i){return t(n(r),i,e)}}function yue(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function ec(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function amt(e){return e<0?"-"+ec(-e,6):e>9999?"+"+ec(e,6):ec(e,4)}function umt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":amt(e.getUTCFullYear())+"-"+ec(e.getUTCMonth()+1,2)+"-"+ec(e.getUTCDate(),2)+(i?"T"+ec(t,2)+":"+ec(n,2)+":"+ec(r,2)+"."+ec(i,3)+"Z":r?"T"+ec(t,2)+":"+ec(n,2)+":"+ec(r,2)+"Z":n||t?"T"+ec(t,2)+":"+ec(n,2)+"Z":"")}function lmt(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,m,p=i(f,function(g,v){if(h)return h(g,v-1);m=g,h=d?smt(g,d):a2e(g)});return p.columns=m||[],p}function i(f,d){var h=[],m=f.length,p=0,g=0,v,b=m<=0,w=!1;f.charCodeAt(m-1)===tA&&--m,f.charCodeAt(m-1)===y7&&--m;function E(){if(b)return m7;if(w)return w=!1,gue;var C,S=p,I;if(f.charCodeAt(S)===g7){for(;p++<m&&f.charCodeAt(p)!==g7||f.charCodeAt(++p)===g7;);return(C=p)>=m?b=!0:(I=f.charCodeAt(p++))===tA?w=!0:I===y7&&(w=!0,f.charCodeAt(p)===tA&&++p),f.slice(S+1,C-1).replace(/""/g,'"')}for(;p<m;){if((I=f.charCodeAt(C=p++))===tA)w=!0;else if(I===y7)w=!0,f.charCodeAt(p)===tA&&++p;else if(I!==n)continue;return f.slice(S,C)}return b=!0,f.slice(S,m)}for(;(v=E())!==m7;){for(var T=[];v!==gue&&v!==m7;)T.push(v),v=E();d&&(T=d(T,g++))==null||h.push(T)}return h}function o(f,d){return f.map(function(h){return d.map(function(m){return c(h[m])}).join(e)})}function s(f,d){return d==null&&(d=yue(f)),[d.map(c).join(e)].concat(o(f,d)).join(`
`)}function a(f,d){return d==null&&(d=yue(f)),o(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?umt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}function cmt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-e)*r,l=(l/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function fmt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return u2e(this.cover(t,n),t,n,e)}function u2e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,m,p,g,v,b;if(!o)return e._root=s,e;for(;o.length;)if((p=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=o,!(o=o[v=g<<1|p]))return i[v]=s,e;if(h=+e._x.call(null,o.data),m=+e._y.call(null,o.data),t===h&&n===m)return s.next=o,i?i[v]=s:e._root=s,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(p=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((v=g<<1|p)===(b=(m>=d)<<1|h>=f));return i[b]=o,i[v]=s,e}function dmt(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<u&&(u=i),i>c&&(c=i),o<l&&(l=o),o>f&&(f=o));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)u2e(this,s[n],a[n],e[n]);return this}function hmt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=o;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function pmt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function mmt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ml(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function gmt(e,t,n){var r,i=this._x0,o=this._y0,s,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,m,p;for(h&&d.push(new ml(h,i,o,c,f)),n==null?n=1/0:(i=e-n,o=t-n,c=e+n,f=t+n,n*=n);m=d.pop();)if(!(!(h=m.node)||(s=m.x0)>c||(a=m.y0)>f||(u=m.x1)<i||(l=m.y1)<o))if(h.length){var g=(s+u)/2,v=(a+l)/2;d.push(new ml(h[3],g,v,u,l),new ml(h[2],s,v,g,l),new ml(h[1],g,a,u,v),new ml(h[0],s,a,g,v)),(p=(t>=v)<<1|e>=g)&&(m=d[d.length-1],d[d.length-1]=d[d.length-1-p],d[d.length-1-p]=m)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var T=Math.sqrt(n=E);i=e-T,o=t-T,c=e+T,f=t+T,r=h.data}}return r}function ymt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,m,p,g,v;if(!n)return this;if(n.length)for(;;){if((m=c>=(d=(s+u)/2))?s=d:u=d,(p=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=p<<1|m]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[g]=o:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=o,this)}function vmt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function bmt(){return this._root}function xmt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function wmt(e){var t=[],n,r=this._root,i,o,s,a,u;for(r&&t.push(new ml(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(o+a)/2,c=(s+u)/2;(i=r[3])&&t.push(new ml(i,l,c,a,u)),(i=r[2])&&t.push(new ml(i,o,c,l,u)),(i=r[1])&&t.push(new ml(i,l,s,a,c)),(i=r[0])&&t.push(new ml(i,o,s,l,c))}return this}function _mt(e){var t=[],n=[],r;for(this._root&&t.push(new ml(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(s+u)/2,f=(a+l)/2;(o=i[0])&&t.push(new ml(o,s,a,c,f)),(o=i[1])&&t.push(new ml(o,c,a,u,f)),(o=i[2])&&t.push(new ml(o,s,f,c,l)),(o=i[3])&&t.push(new ml(o,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Emt(e){return e[0]}function Tmt(e){return arguments.length?(this._x=e,this):this._x}function Cmt(e){return e[1]}function Smt(e){return arguments.length?(this._y=e,this):this._y}function KK(e,t,n){var r=new XK(t??Emt,n??Cmt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function XK(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function vue(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Sl=KK.prototype=XK.prototype;Sl.copy=function(){var e=new XK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=vue(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=vue(r));return e};Sl.add=fmt;Sl.addAll=dmt;Sl.cover=hmt;Sl.data=pmt;Sl.extent=mmt;Sl.find=gmt;Sl.remove=ymt;Sl.removeAll=vmt;Sl.root=bmt;Sl.size=xmt;Sl.visit=wmt;Sl.visitAfter=_mt;Sl.x=Tmt;Sl.y=Smt;function yl(e){return function(){return e}}function Ky(e){return(e()-.5)*1e-6}function Amt(e){return e.x+e.vx}function Dmt(e){return e.y+e.vy}function kmt(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=yl(e==null?1:+e));function s(){for(var l,c=t.length,f,d,h,m,p,g,v=0;v<o;++v)for(f=KK(t,Amt,Dmt).visitAfter(a),l=0;l<c;++l)d=t[l],p=n[d.index],g=p*p,h=d.x+d.vx,m=d.y+d.vy,f.visit(b);function b(w,E,T,C,S){var I=w.data,R=w.r,P=p+R;if(I){if(I.index>d.index){var M=h-I.x-I.vx,B=m-I.y-I.vy,L=M*M+B*B;L<P*P&&(M===0&&(M=Ky(r),L+=M*M),B===0&&(B=Ky(r),L+=B*B),L=(P-(L=Math.sqrt(L)))/L*i,d.vx+=(M*=L)*(P=(R*=R)/(g+R)),d.vy+=(B*=L)*P,I.vx-=M*(P=1-P),I.vy-=B*P)}return}return E>h+P||C<h-P||T>m+P||S<m-P}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return s.initialize=function(l,c){t=l,r=c,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:yl(+l),u(),s):e},s}function Imt(e){return e.index}function bue(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Rmt(e){var t=Imt,n=f,r,i=yl(30),o,s,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var v=0,b=e.length;v<c;++v)for(var w=0,E,T,C,S,I,R,P;w<b;++w)E=e[w],T=E.source,C=E.target,S=C.x+C.vx-T.x-T.vx||Ky(l),I=C.y+C.vy-T.y-T.vy||Ky(l),R=Math.sqrt(S*S+I*I),R=(R-o[w])/R*g*r[w],S*=R,I*=R,C.vx-=S*(P=u[w]),C.vy-=I*P,T.vx+=S*(P=1-P),T.vy+=I*P}function h(){if(s){var g,v=s.length,b=e.length,w=new Map(s.map((T,C)=>[t(T,C,s),T])),E;for(g=0,a=new Array(v);g<b;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=bue(w,E.source)),typeof E.target!="object"&&(E.target=bue(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),m(),o=new Array(b),p()}}function m(){if(s)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function p(){if(s)for(var g=0,v=e.length;g<v;++g)o[g]=+i(e[g],g,e)}return d.initialize=function(g,v){s=g,l=v,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:yl(+g),m(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:yl(+g),p(),d):i},d}const Nmt=1664525,Pmt=1013904223,xue=4294967296;function Omt(){let e=1;return()=>(e=(Nmt*e+Pmt)%xue)/xue}function Fmt(e){return e.x}function Mmt(e){return e.y}var $mt=10,Lmt=Math.PI*(3-Math.sqrt(5));function Bmt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,u=HK(f),l=FK("tick","end"),c=Omt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(p){var g,v=e.length,b;p===void 0&&(p=1);for(var w=0;w<p;++w)for(n+=(o-n)*i,a.forEach(function(E){E(n)}),g=0;g<v;++g)b=e[g],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return t}function h(){for(var p=0,g=e.length,v;p<g;++p){if(v=e[p],v.index=p,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var b=$mt*Math.sqrt(.5+p),w=p*Lmt;v.x=b*Math.cos(w),v.y=b*Math.sin(w)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function m(p){return p.initialize&&p.initialize(e,c),p}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(p){return arguments.length?(e=p,h(),a.forEach(m),t):e},alpha:function(p){return arguments.length?(n=+p,t):n},alphaMin:function(p){return arguments.length?(r=+p,t):r},alphaDecay:function(p){return arguments.length?(i=+p,t):+i},alphaTarget:function(p){return arguments.length?(o=+p,t):o},velocityDecay:function(p){return arguments.length?(s=1-p,t):1-s},randomSource:function(p){return arguments.length?(c=p,a.forEach(m),t):c},force:function(p,g){return arguments.length>1?(g==null?a.delete(p):a.set(p,m(g)),t):a.get(p)},find:function(p,g,v){var b=0,w=e.length,E,T,C,S,I;for(v==null?v=1/0:v*=v,b=0;b<w;++b)S=e[b],E=p-S.x,T=g-S.y,C=E*E+T*T,C<v&&(I=S,v=C);return I},on:function(p,g){return arguments.length>1?(l.on(p,g),t):l.on(p)}}}function jmt(){var e,t,n,r,i=yl(-30),o,s=1,a=1/0,u=.81;function l(h){var m,p=e.length,g=KK(e,Fmt,Mmt).visitAfter(f);for(r=h,m=0;m<p;++m)t=e[m],g.visit(d)}function c(){if(e){var h,m=e.length,p;for(o=new Array(m),h=0;h<m;++h)p=e[h],o[p.index]=+i(p,h,e)}}function f(h){var m=0,p,g,v=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(p=h[E])&&(g=Math.abs(p.value))&&(m+=p.value,v+=g,b+=g*p.x,w+=g*p.y);h.x=b/v,h.y=w/v}else{p=h,p.x=p.data.x,p.y=p.data.y;do m+=o[p.data.index];while(p=p.next)}h.value=m}function d(h,m,p,g){if(!h.value)return!0;var v=h.x-t.x,b=h.y-t.y,w=g-m,E=v*v+b*b;if(w*w/u<E)return E<a&&(v===0&&(v=Ky(n),E+=v*v),b===0&&(b=Ky(n),E+=b*b),E<s&&(E=Math.sqrt(s*E)),t.vx+=v*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(v===0&&(v=Ky(n),E+=v*v),b===0&&(b=Ky(n),E+=b*b),E<s&&(E=Math.sqrt(s*E)));do h.data!==t&&(w=o[h.data.index]*r/E,t.vx+=v*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,m){e=h,n=m,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:yl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function zmt(e){var t=yl(.1),n,r,i;typeof e!="function"&&(e=yl(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:yl(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:yl(+a),s(),o):e},o}function Umt(e){var t=yl(.1),n,r,i;typeof e!="function"&&(e=yl(e==null?0:+e));function o(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function s(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:yl(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:yl(+a),s(),o):e},o}function Vmt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function eF(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function L2(e){return e=eF(Math.abs(e)),e?e[1]:NaN}function Hmt(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function qmt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Wmt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tx(e){if(!(t=Wmt.exec(e)))throw new Error("invalid format: "+e);var t;return new QK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Tx.prototype=QK.prototype;function QK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}QK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gmt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var l2e;function Ymt(e,t){var n=eF(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(l2e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+eF(e,Math.max(0,t+o-1))[0]}function wue(e,t){var n=eF(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _ue={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Vmt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wue(e*100,t),r:wue,s:Ymt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Eue(e){return e}var Tue=Array.prototype.map,Cue=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function c2e(e){var t=e.grouping===void 0||e.thousands===void 0?Eue:Hmt(Tue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Eue:qmt(Tue.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Tx(f);var d=f.fill,h=f.align,m=f.sign,p=f.symbol,g=f.zero,v=f.width,b=f.comma,w=f.precision,E=f.trim,T=f.type;T==="n"?(b=!0,T="g"):_ue[T]||(w===void 0&&(w=12),E=!0,T="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=p==="$"?n:p==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",S=p==="$"?r:/[%p]/.test(T)?s:"",I=_ue[T],R=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(M){var B=C,L=S,z,G,W;if(T==="c")L=I(M)+L,M="";else{M=+M;var te=M<0||1/M<0;if(M=isNaN(M)?u:I(Math.abs(M),w),E&&(M=Gmt(M)),te&&+M==0&&m!=="+"&&(te=!1),B=(te?m==="("?m:a:m==="-"||m==="("?"":m)+B,L=(T==="s"?Cue[8+l2e/3]:"")+L+(te&&m==="("?")":""),R){for(z=-1,G=M.length;++z<G;)if(W=M.charCodeAt(z),48>W||W>57){L=(W===46?i+M.slice(z+1):M.slice(z))+L,M=M.slice(0,z);break}}}b&&!g&&(M=t(M,1/0));var Z=B.length+M.length+L.length,re=Z<v?new Array(v-Z+1).join(d):"";switch(b&&g&&(M=t(re+M,re.length?v-L.length:1/0),re=""),h){case"<":M=B+M+L+re;break;case"=":M=B+re+M+L;break;case"^":M=re.slice(0,Z=re.length>>1)+B+M+L+re.slice(Z);break;default:M=re+B+M+L;break}return o(M)}return P.toString=function(){return f+""},P}function c(f,d){var h=l((f=Tx(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(L2(d)/3)))*3,p=Math.pow(10,-m),g=Cue[8+m/3];return function(v){return h(p*v)+g}}return{format:l,formatPrefix:c}}var P3,C8,JK;Kmt({thousands:",",grouping:[3],currency:["$",""]});function Kmt(e){return P3=c2e(e),C8=P3.format,JK=P3.formatPrefix,P3}function f2e(e){return Math.max(0,-L2(Math.abs(e)))}function d2e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(L2(t)/3)))*3-L2(Math.abs(e)))}function h2e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,L2(t)-L2(e))+1}var Pn=1e-6,uV=1e-12,gr=Math.PI,Uo=gr/2,tF=gr/4,_l=gr*2,ss=180/gr,hr=gr/180,Fr=Math.abs,aC=Math.atan,ld=Math.atan2,Rn=Math.cos,O3=Math.ceil,p2e=Math.exp,lV=Math.hypot,nF=Math.log,v7=Math.pow,Tn=Math.sin,td=Math.sign||function(e){return e>0?1:e<0?-1:0},El=Math.sqrt,ZK=Math.tan;function m2e(e){return e>1?0:e<-1?gr:Math.acos(e)}function mc(e){return e>1?Uo:e<-1?-Uo:Math.asin(e)}function Wa(){}function rF(e,t){e&&Aue.hasOwnProperty(e.type)&&Aue[e.type](e,t)}var Sue={Feature:function(e,t){rF(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)rF(n[r].geometry,t)}},Aue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){cV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)cV(n[r],t,0)},Polygon:function(e,t){Due(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Due(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)rF(n[r],t)}};function cV(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Due(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)cV(e[n],t,1);t.polygonEnd()}function O0(e,t){e&&Sue.hasOwnProperty(e.type)?Sue[e.type](e,t):rF(e,t)}var iF=new xl,oF=new xl,g2e,y2e,fV,dV,hV,cm={point:Wa,lineStart:Wa,lineEnd:Wa,polygonStart:function(){iF=new xl,cm.lineStart=Xmt,cm.lineEnd=Qmt},polygonEnd:function(){var e=+iF;oF.add(e<0?_l+e:e),this.lineStart=this.lineEnd=this.point=Wa},sphere:function(){oF.add(_l)}};function Xmt(){cm.point=Jmt}function Qmt(){v2e(g2e,y2e)}function Jmt(e,t){cm.point=v2e,g2e=e,y2e=t,e*=hr,t*=hr,fV=e,dV=Rn(t=t/2+tF),hV=Tn(t)}function v2e(e,t){e*=hr,t*=hr,t=t/2+tF;var n=e-fV,r=n>=0?1:-1,i=r*n,o=Rn(t),s=Tn(t),a=hV*s,u=dV*o+a*Rn(i),l=a*r*Tn(i);iF.add(ld(l,u)),fV=e,dV=o,hV=s}function Zmt(e){return oF=new xl,O0(e,cm),oF*2}function sF(e){return[ld(e[1],e[0]),mc(e[2])]}function Cx(e){var t=e[0],n=e[1],r=Rn(n);return[r*Rn(t),r*Tn(t),Tn(n)]}function F3(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function B2(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function b7(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function M3(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function aF(e){var t=El(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var xo,oc,Mo,ef,Pb,b2e,x2e,o2,LD,Oy,bg,D0={point:pV,lineStart:kue,lineEnd:Iue,polygonStart:function(){D0.point=_2e,D0.lineStart=e0t,D0.lineEnd=t0t,LD=new xl,cm.polygonStart()},polygonEnd:function(){cm.polygonEnd(),D0.point=pV,D0.lineStart=kue,D0.lineEnd=Iue,iF<0?(xo=-(Mo=180),oc=-(ef=90)):LD>Pn?ef=90:LD<-1e-6&&(oc=-90),bg[0]=xo,bg[1]=Mo},sphere:function(){xo=-(Mo=180),oc=-(ef=90)}};function pV(e,t){Oy.push(bg=[xo=e,Mo=e]),t<oc&&(oc=t),t>ef&&(ef=t)}function w2e(e,t){var n=Cx([e*hr,t*hr]);if(o2){var r=B2(o2,n),i=[r[1],-r[0],0],o=B2(i,r);aF(o),o=sF(o);var s=e-Pb,a=s>0?1:-1,u=o[0]*ss*a,l,c=Fr(s)>180;c^(a*Pb<u&&u<a*e)?(l=o[1]*ss,l>ef&&(ef=l)):(u=(u+360)%360-180,c^(a*Pb<u&&u<a*e)?(l=-o[1]*ss,l<oc&&(oc=l)):(t<oc&&(oc=t),t>ef&&(ef=t))),c?e<Pb?Jc(xo,e)>Jc(xo,Mo)&&(Mo=e):Jc(e,Mo)>Jc(xo,Mo)&&(xo=e):Mo>=xo?(e<xo&&(xo=e),e>Mo&&(Mo=e)):e>Pb?Jc(xo,e)>Jc(xo,Mo)&&(Mo=e):Jc(e,Mo)>Jc(xo,Mo)&&(xo=e)}else Oy.push(bg=[xo=e,Mo=e]);t<oc&&(oc=t),t>ef&&(ef=t),o2=n,Pb=e}function kue(){D0.point=w2e}function Iue(){bg[0]=xo,bg[1]=Mo,D0.point=pV,o2=null}function _2e(e,t){if(o2){var n=e-Pb;LD.add(Fr(n)>180?n+(n>0?360:-360):n)}else b2e=e,x2e=t;cm.point(e,t),w2e(e,t)}function e0t(){cm.lineStart()}function t0t(){_2e(b2e,x2e),cm.lineEnd(),Fr(LD)>Pn&&(xo=-(Mo=180)),bg[0]=xo,bg[1]=Mo,o2=null}function Jc(e,t){return(t-=e)<0?t+360:t}function n0t(e,t){return e[0]-t[0]}function Rue(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function r0t(e){var t,n,r,i,o,s,a;if(ef=Mo=-(xo=oc=1/0),Oy=[],O0(e,D0),n=Oy.length){for(Oy.sort(n0t),t=1,r=Oy[0],o=[r];t<n;++t)i=Oy[t],Rue(r,i[0])||Rue(r,i[1])?(Jc(r[0],i[1])>Jc(r[0],r[1])&&(r[1]=i[1]),Jc(i[0],r[1])>Jc(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Jc(r[1],i[0]))>s&&(s=a,xo=i[0],Mo=r[1])}return Oy=bg=null,xo===1/0||oc===1/0?[[NaN,NaN],[NaN,NaN]]:[[xo,oc],[Mo,ef]]}var HA,uF,lF,cF,fF,dF,hF,pF,mV,gV,yV,E2e,T2e,dl,hl,pl,dh={sphere:Wa,point:eX,lineStart:Nue,lineEnd:Pue,polygonStart:function(){dh.lineStart=s0t,dh.lineEnd=a0t},polygonEnd:function(){dh.lineStart=Nue,dh.lineEnd=Pue}};function eX(e,t){e*=hr,t*=hr;var n=Rn(t);eR(n*Rn(e),n*Tn(e),Tn(t))}function eR(e,t,n){++HA,lF+=(e-lF)/HA,cF+=(t-cF)/HA,fF+=(n-fF)/HA}function Nue(){dh.point=i0t}function i0t(e,t){e*=hr,t*=hr;var n=Rn(t);dl=n*Rn(e),hl=n*Tn(e),pl=Tn(t),dh.point=o0t,eR(dl,hl,pl)}function o0t(e,t){e*=hr,t*=hr;var n=Rn(t),r=n*Rn(e),i=n*Tn(e),o=Tn(t),s=ld(El((s=hl*o-pl*i)*s+(s=pl*r-dl*o)*s+(s=dl*i-hl*r)*s),dl*r+hl*i+pl*o);uF+=s,dF+=s*(dl+(dl=r)),hF+=s*(hl+(hl=i)),pF+=s*(pl+(pl=o)),eR(dl,hl,pl)}function Pue(){dh.point=eX}function s0t(){dh.point=u0t}function a0t(){C2e(E2e,T2e),dh.point=eX}function u0t(e,t){E2e=e,T2e=t,e*=hr,t*=hr,dh.point=C2e;var n=Rn(t);dl=n*Rn(e),hl=n*Tn(e),pl=Tn(t),eR(dl,hl,pl)}function C2e(e,t){e*=hr,t*=hr;var n=Rn(t),r=n*Rn(e),i=n*Tn(e),o=Tn(t),s=hl*o-pl*i,a=pl*r-dl*o,u=dl*i-hl*r,l=lV(s,a,u),c=mc(l),f=l&&-c/l;mV.add(f*s),gV.add(f*a),yV.add(f*u),uF+=c,dF+=c*(dl+(dl=r)),hF+=c*(hl+(hl=i)),pF+=c*(pl+(pl=o)),eR(dl,hl,pl)}function l0t(e){HA=uF=lF=cF=fF=dF=hF=pF=0,mV=new xl,gV=new xl,yV=new xl,O0(e,dh);var t=+mV,n=+gV,r=+yV,i=lV(t,n,r);return i<uV&&(t=dF,n=hF,r=pF,uF<Pn&&(t=lF,n=cF,r=fF),i=lV(t,n,r),i<uV)?[NaN,NaN]:[ld(n,t)*ss,mc(r/i)*ss]}function vV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function bV(e,t){return Fr(e)>gr&&(e-=Math.round(e/_l)*_l),[e,t]}bV.invert=bV;function S2e(e,t,n){return(e%=_l)?t||n?vV(Fue(e),Mue(t,n)):Fue(e):t||n?Mue(t,n):bV}function Oue(e){return function(t,n){return t+=e,Fr(t)>gr&&(t-=Math.round(t/_l)*_l),[t,n]}}function Fue(e){var t=Oue(e);return t.invert=Oue(-e),t}function Mue(e,t){var n=Rn(e),r=Tn(e),i=Rn(t),o=Tn(t);function s(a,u){var l=Rn(u),c=Rn(a)*l,f=Tn(a)*l,d=Tn(u),h=d*n+c*r;return[ld(f*i-h*o,c*n-d*r),mc(h*i+f*o)]}return s.invert=function(a,u){var l=Rn(u),c=Rn(a)*l,f=Tn(a)*l,d=Tn(u),h=d*i-f*o;return[ld(f*i+d*o,c*n+h*r),mc(h*n-c*r)]},s}function c0t(e){e=S2e(e[0]*hr,e[1]*hr,e.length>2?e[2]*hr:0);function t(n){return n=e(n[0]*hr,n[1]*hr),n[0]*=ss,n[1]*=ss,n}return t.invert=function(n){return n=e.invert(n[0]*hr,n[1]*hr),n[0]*=ss,n[1]*=ss,n},t}function f0t(e,t,n,r,i,o){if(n){var s=Rn(t),a=Tn(t),u=r*n;i==null?(i=t+r*_l,o=t-u/2):(i=$ue(s,i),o=$ue(s,o),(r>0?i<o:i>o)&&(i+=r*_l));for(var l,c=i;r>0?c>o:c<o;c-=u)l=sF([s,-a*Rn(c),-a*Tn(c)]),e.point(l[0],l[1])}}function $ue(e,t){t=Cx(t),t[0]-=e,aF(t);var n=m2e(-t[1]);return((-t[2]<0?-n:n)+_l-Pn)%_l}function A2e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Wa,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function vO(e,t){return Fr(e[0]-t[0])<Pn&&Fr(e[1]-t[1])<Pn}function $3(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function D2e(e,t,n,r,i){var o=[],s=[],a,u;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,g=m[0],v=m[p],b;if(vO(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),a=0;a<p;++a)i.point((g=m[a])[0],g[1]);i.lineEnd();return}v[0]+=2*Pn}o.push(b=new $3(g,m,null,!0)),s.push(b.o=new $3(g,null,b,!1)),o.push(b=new $3(v,m,null,!1)),s.push(b.o=new $3(v,null,b,!0))}}),!!o.length){for(s.sort(t),Lue(o),Lue(s),a=0,u=s.length;a<u;++a)s[a].e=n=!n;for(var l=o[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Lue(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function x7(e){return Fr(e[0])<=gr?e[0]:td(e[0])*((Fr(e[0])+gr)%_l-gr)}function d0t(e,t){var n=x7(t),r=t[1],i=Tn(r),o=[Tn(n),-Rn(n),0],s=0,a=0,u=new xl;i===1?r=Uo+Pn:i===-1&&(r=-Uo-Pn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],m=x7(h),p=h[1]/2+tF,g=Tn(p),v=Rn(p),b=0;b<d;++b,m=E,g=C,v=S,h=w){var w=f[b],E=x7(w),T=w[1]/2+tF,C=Tn(T),S=Rn(T),I=E-m,R=I>=0?1:-1,P=R*I,M=P>gr,B=g*C;if(u.add(ld(B*R*Tn(P),v*S+B*Rn(P))),s+=M?I+R*_l:I,M^m>=n^E>=n){var L=B2(Cx(h),Cx(w));aF(L);var z=B2(o,L);aF(z);var G=(M^I>=0?-1:1)*mc(z[2]);(r>G||r===G&&(L[0]||L[1]))&&(a+=M^I>=0?1:-1)}}return(s<-1e-6||s<Pn&&u<-1e-12)^a&1}function k2e(e,t,n,r){return function(i){var o=t(i),s=A2e(),a=t(s),u=!1,l,c,f,d={point:h,lineStart:p,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=w,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=p,d.lineEnd=g,c=cEe(c);var E=d0t(l,r);c.length?(u||(i.polygonStart(),u=!0),D2e(c,p0t,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,T){e(E,T)&&i.point(E,T)}function m(E,T){o.point(E,T)}function p(){d.point=m,o.lineStart()}function g(){d.point=h,o.lineEnd()}function v(E,T){f.push([E,T]),a.point(E,T)}function b(){a.lineStart(),f=[]}function w(){v(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),T=s.result(),C,S=T.length,I,R,P;if(f.pop(),l.push(f),f=null,!!S){if(E&1){if(R=T[0],(I=R.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<I;++C)i.point((P=R[C])[0],P[1]);i.lineEnd()}return}S>1&&E&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(h0t))}}return d}}function h0t(e){return e.length>1}function p0t(e,t){return((e=e.x)[0]<0?e[1]-Uo-Pn:Uo-e[1])-((t=t.x)[0]<0?t[1]-Uo-Pn:Uo-t[1])}const Bue=k2e(function(){return!0},m0t,y0t,[-gr,-Uo]);function m0t(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?gr:-gr,u=Fr(o-t);Fr(u-gr)<Pn?(e.point(t,n=(n+s)/2>0?Uo:-Uo),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&u>=gr&&(Fr(t-r)<Pn&&(t-=r*Pn),Fr(o-a)<Pn&&(o-=a*Pn),n=g0t(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function g0t(e,t,n,r){var i,o,s=Tn(e-n);return Fr(s)>Pn?aC((Tn(t)*(o=Rn(r))*Tn(n)-Tn(r)*(i=Rn(t))*Tn(e))/(i*o*s)):(t+r)/2}function y0t(e,t,n,r){var i;if(e==null)i=n*Uo,r.point(-gr,i),r.point(0,i),r.point(gr,i),r.point(gr,0),r.point(gr,-i),r.point(0,-i),r.point(-gr,-i),r.point(-gr,0),r.point(-gr,i);else if(Fr(e[0]-t[0])>Pn){var o=e[0]<t[0]?gr:-gr;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function v0t(e){var t=Rn(e),n=2*hr,r=t>0,i=Fr(t)>Pn;function o(c,f,d,h){f0t(h,e,n,d,c,f)}function s(c,f){return Rn(c)*Rn(f)>t}function a(c){var f,d,h,m,p;return{lineStart:function(){m=h=!1,p=1},point:function(g,v){var b=[g,v],w,E=s(g,v),T=r?E?0:l(g,v):E?l(g+(g<0?gr:-gr),v):0;if(!f&&(m=h=E)&&c.lineStart(),E!==h&&(w=u(f,b),(!w||vO(f,w)||vO(b,w))&&(b[2]=1)),E!==h)p=0,E?(c.lineStart(),w=u(b,f),c.point(w[0],w[1])):(w=u(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^E){var C;!(T&d)&&(C=u(b,f,!0))&&(p=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}E&&(!f||!vO(f,b))&&c.point(b[0],b[1]),f=b,h=E,d=T},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return p|(m&&h)<<1}}}function u(c,f,d){var h=Cx(c),m=Cx(f),p=[1,0,0],g=B2(h,m),v=F3(g,g),b=g[0],w=v-b*b;if(!w)return!d&&c;var E=t*v/w,T=-t*b/w,C=B2(p,g),S=M3(p,E),I=M3(g,T);b7(S,I);var R=C,P=F3(S,R),M=F3(R,R),B=P*P-M*(F3(S,S)-1);if(!(B<0)){var L=El(B),z=M3(R,(-P-L)/M);if(b7(z,S),z=sF(z),!d)return z;var G=c[0],W=f[0],te=c[1],Z=f[1],re;W<G&&(re=G,G=W,W=re);var q=W-G,U=Fr(q-gr)<Pn,Y=U||q<Pn;if(!U&&Z<te&&(re=te,te=Z,Z=re),Y?U?te+Z>0^z[1]<(Fr(z[0]-G)<Pn?te:Z):te<=z[1]&&z[1]<=Z:q>gr^(G<=z[0]&&z[0]<=W)){var H=M3(R,(-P+L)/M);return b7(H,S),[z,sF(H)]}}}function l(c,f){var d=r?e:gr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return k2e(s,a,o,r?[0,-e]:[-gr,e-gr])}function b0t(e,t,n,r,i,o){var s=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-s,h=l-a,m;if(m=n-s,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=i-s,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}if(m=r-a,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=o-a,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=s+c*d,e[1]=a+c*h),f<1&&(t[0]=s+f*d,t[1]=a+f*h),!0}}}}}var L3=1e9,B3=-1e9;function I2e(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function o(l,c,f,d){var h=0,m=0;if(l==null||(h=s(l,f))!==(m=s(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==m);else d.point(c[0],c[1])}function s(l,c){return Fr(l[0]-e)<Pn?c>0?0:3:Fr(l[0]-n)<Pn?c>0?2:1:Fr(l[1]-t)<Pn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=s(l,1),d=s(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=A2e(),d,h,m,p,g,v,b,w,E,T,C,S={point:I,lineStart:B,lineEnd:L,polygonStart:P,polygonEnd:M};function I(G,W){i(G,W)&&c.point(G,W)}function R(){for(var G=0,W=0,te=h.length;W<te;++W)for(var Z=h[W],re=1,q=Z.length,U=Z[0],Y,H,X=U[0],ee=U[1];re<q;++re)Y=X,H=ee,U=Z[re],X=U[0],ee=U[1],H<=r?ee>r&&(X-Y)*(r-H)>(ee-H)*(e-Y)&&++G:ee<=r&&(X-Y)*(r-H)<(ee-H)*(e-Y)&&--G;return G}function P(){c=f,d=[],h=[],C=!0}function M(){var G=R(),W=C&&G,te=(d=cEe(d)).length;(W||te)&&(l.polygonStart(),W&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),te&&D2e(d,a,G,o,l),l.polygonEnd()),c=l,d=h=m=null}function B(){S.point=z,h&&h.push(m=[]),T=!0,E=!1,b=w=NaN}function L(){d&&(z(p,g),v&&E&&f.rejoin(),d.push(f.result())),S.point=I,E&&c.lineEnd()}function z(G,W){var te=i(G,W);if(h&&m.push([G,W]),T)p=G,g=W,v=te,T=!1,te&&(c.lineStart(),c.point(G,W));else if(te&&E)c.point(G,W);else{var Z=[b=Math.max(B3,Math.min(L3,b)),w=Math.max(B3,Math.min(L3,w))],re=[G=Math.max(B3,Math.min(L3,G)),W=Math.max(B3,Math.min(L3,W))];b0t(Z,re,e,t,n,r)?(E||(c.lineStart(),c.point(Z[0],Z[1])),c.point(re[0],re[1]),te||c.lineEnd(),C=!1):te&&(c.lineStart(),c.point(G,W),C=!1)}b=G,w=W,E=te}return S}}function jue(e,t,n){var r=af(e,t-Pn,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function zue(e,t,n){var r=af(e,t-Pn,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function x0t(){var e,t,n,r,i,o,s,a,u=10,l=u,c=90,f=360,d,h,m,p,g=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return af(O3(r/c)*c,n,c).map(m).concat(af(O3(a/f)*f,s,f).map(p)).concat(af(O3(t/u)*u,e,u).filter(function(w){return Fr(w%c)>Pn}).map(d)).concat(af(O3(o/l)*l,i,l).filter(function(w){return Fr(w%f)>Pn}).map(h))}return v.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[m(r).concat(p(s).slice(1),m(n).reverse().slice(1),p(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],s=+w[1][1],r>n&&(w=r,r=n,n=w),a>s&&(w=a,a=s,s=w),v.precision(g)):[[r,a],[n,s]]},v.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],o=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),o>i&&(w=o,o=i,i=w),v.precision(g)):[[t,o],[e,i]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],v):[c,f]},v.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],v):[u,l]},v.precision=function(w){return arguments.length?(g=+w,d=jue(o,i,90),h=zue(t,e,g),m=jue(a,s,90),p=zue(r,n,g),v):g},v.extentMajor([[-180,-90+Pn],[180,90-Pn]]).extentMinor([[-180,-80-Pn],[180,80+Pn]])}const Pk=e=>e;var w7=new xl,xV=new xl,R2e,N2e,wV,_V,F0={point:Wa,lineStart:Wa,lineEnd:Wa,polygonStart:function(){F0.lineStart=w0t,F0.lineEnd=E0t},polygonEnd:function(){F0.lineStart=F0.lineEnd=F0.point=Wa,w7.add(Fr(xV)),xV=new xl},result:function(){var e=w7/2;return w7=new xl,e}};function w0t(){F0.point=_0t}function _0t(e,t){F0.point=P2e,R2e=wV=e,N2e=_V=t}function P2e(e,t){xV.add(_V*e-wV*t),wV=e,_V=t}function E0t(){P2e(R2e,N2e)}var j2=1/0,mF=j2,Ok=-j2,gF=Ok,yF={point:T0t,lineStart:Wa,lineEnd:Wa,polygonStart:Wa,polygonEnd:Wa,result:function(){var e=[[j2,mF],[Ok,gF]];return Ok=gF=-(mF=j2=1/0),e}};function T0t(e,t){e<j2&&(j2=e),e>Ok&&(Ok=e),t<mF&&(mF=t),t>gF&&(gF=t)}var EV=0,TV=0,qA=0,vF=0,bF=0,LE=0,CV=0,SV=0,WA=0,O2e,F2e,Np,Pp,ed={point:Sx,lineStart:Uue,lineEnd:Vue,polygonStart:function(){ed.lineStart=A0t,ed.lineEnd=D0t},polygonEnd:function(){ed.point=Sx,ed.lineStart=Uue,ed.lineEnd=Vue},result:function(){var e=WA?[CV/WA,SV/WA]:LE?[vF/LE,bF/LE]:qA?[EV/qA,TV/qA]:[NaN,NaN];return EV=TV=qA=vF=bF=LE=CV=SV=WA=0,e}};function Sx(e,t){EV+=e,TV+=t,++qA}function Uue(){ed.point=C0t}function C0t(e,t){ed.point=S0t,Sx(Np=e,Pp=t)}function S0t(e,t){var n=e-Np,r=t-Pp,i=El(n*n+r*r);vF+=i*(Np+e)/2,bF+=i*(Pp+t)/2,LE+=i,Sx(Np=e,Pp=t)}function Vue(){ed.point=Sx}function A0t(){ed.point=k0t}function D0t(){M2e(O2e,F2e)}function k0t(e,t){ed.point=M2e,Sx(O2e=Np=e,F2e=Pp=t)}function M2e(e,t){var n=e-Np,r=t-Pp,i=El(n*n+r*r);vF+=i*(Np+e)/2,bF+=i*(Pp+t)/2,LE+=i,i=Pp*e-Np*t,CV+=i*(Np+e),SV+=i*(Pp+t),WA+=i*3,Sx(Np=e,Pp=t)}function $2e(e){this._context=e}$2e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,_l);break}}},result:Wa};var AV=new xl,_7,L2e,B2e,GA,YA,Fk={point:Wa,lineStart:function(){Fk.point=I0t},lineEnd:function(){_7&&j2e(L2e,B2e),Fk.point=Wa},polygonStart:function(){_7=!0},polygonEnd:function(){_7=null},result:function(){var e=+AV;return AV=new xl,e}};function I0t(e,t){Fk.point=j2e,L2e=GA=e,B2e=YA=t}function j2e(e,t){GA-=e,YA-=t,AV.add(El(GA*GA+YA*YA)),GA=e,YA=t}let Hue,xF,que,Wue;class Gue{constructor(t){this._append=t==null?z2e:R0t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==que||this._append!==xF){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,que=r,xF=this._append,Wue=this._,this._=i}this._+=Wue;break}}}result(){const t=this._;return this._="",t.length?t:null}}function z2e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function R0t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return z2e;if(t!==Hue){const n=10**t;Hue=t,xF=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return xF}function U2e(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),O0(a,i(o))),o.result()}return s.area=function(a){return O0(a,i(F0)),F0.result()},s.measure=function(a){return O0(a,i(Fk)),Fk.result()},s.bounds=function(a){return O0(a,i(yF)),yF.result()},s.centroid=function(a){return O0(a,i(ed)),ed.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,Pk):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new Gue(n)):new $2e(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(o=new Gue(n)),s},s.projection(e).digits(n).context(t)}function S8(e){return function(t){var n=new DV;for(var r in e)n[r]=e[r];return n.stream=t,n}}function DV(){}DV.prototype={constructor:DV,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tX(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),O0(n,e.stream(yF)),t(yF.result()),r!=null&&e.clipExtent(r),e}function A8(e,t,n){return tX(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,u])},n)}function nX(e,t,n){return A8(e,[[0,0],t],n)}function rX(e,t,n){return tX(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function iX(e,t,n){return tX(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var Yue=16,N0t=Rn(30*hr);function Kue(e,t){return+t?O0t(e,t):P0t(e)}function P0t(e){return S8({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function O0t(e,t){function n(r,i,o,s,a,u,l,c,f,d,h,m,p,g){var v=l-r,b=c-i,w=v*v+b*b;if(w>4*t&&p--){var E=s+d,T=a+h,C=u+m,S=El(E*E+T*T+C*C),I=mc(C/=S),R=Fr(Fr(C)-1)<Pn||Fr(o-f)<Pn?(o+f)/2:ld(T,E),P=e(R,I),M=P[0],B=P[1],L=M-r,z=B-i,G=b*L-v*z;(G*G/w>t||Fr((v*L+b*z)/w-.5)>.3||s*d+a*h+u*m<N0t)&&(n(r,i,o,s,a,u,M,B,R,E/=S,T/=S,C,p,g),g.point(M,B),n(M,B,R,E,T,C,l,c,f,d,h,m,p,g))}}return function(r){var i,o,s,a,u,l,c,f,d,h,m,p,g={point:v,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=T},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function v(I,R){I=e(I,R),r.point(I[0],I[1])}function b(){f=NaN,g.point=w,r.lineStart()}function w(I,R){var P=Cx([I,R]),M=e(I,R);n(f,d,c,h,m,p,f=M[0],d=M[1],c=I,h=P[0],m=P[1],p=P[2],Yue,r),r.point(f,d)}function E(){g.point=v,r.lineEnd()}function T(){b(),g.point=C,g.lineEnd=S}function C(I,R){w(i=I,R),o=f,s=d,a=h,u=m,l=p,g.point=w}function S(){n(f,d,c,h,m,p,o,s,i,a,u,l,Yue,r),g.lineEnd=E,E()}return g}}var F0t=S8({point:function(e,t){this.stream.point(e*hr,t*hr)}});function M0t(e){return S8({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function $0t(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function Xue(e,t,n,r,i,o){if(!o)return $0t(e,t,n,r,i);var s=Rn(o),a=Tn(o),u=s*e,l=a*e,c=s/e,f=a/e,d=(a*n-s*t)/e,h=(a*t+s*n)/e;function m(p,g){return p*=r,g*=i,[u*p-l*g+t,n-l*p-u*g]}return m.invert=function(p,g){return[r*(c*p-f*g+d),i*(h-f*p-c*g)]},m}function Am(e){return V2e(function(){return e})()}function V2e(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,u=0,l=0,c,f=0,d=1,h=1,m=null,p=Bue,g=null,v,b,w,E=Pk,T=.5,C,S,I,R,P;function M(G){return I(G[0]*hr,G[1]*hr)}function B(G){return G=I.invert(G[0],G[1]),G&&[G[0]*ss,G[1]*ss]}M.stream=function(G){return R&&P===G?R:R=F0t(M0t(c)(p(C(E(P=G)))))},M.preclip=function(G){return arguments.length?(p=G,m=void 0,z()):p},M.postclip=function(G){return arguments.length?(E=G,g=v=b=w=null,z()):E},M.clipAngle=function(G){return arguments.length?(p=+G?v0t(m=G*hr):(m=null,Bue),z()):m*ss},M.clipExtent=function(G){return arguments.length?(E=G==null?(g=v=b=w=null,Pk):I2e(g=+G[0][0],v=+G[0][1],b=+G[1][0],w=+G[1][1]),z()):g==null?null:[[g,v],[b,w]]},M.scale=function(G){return arguments.length?(n=+G,L()):n},M.translate=function(G){return arguments.length?(r=+G[0],i=+G[1],L()):[r,i]},M.center=function(G){return arguments.length?(o=G[0]%360*hr,s=G[1]%360*hr,L()):[o*ss,s*ss]},M.rotate=function(G){return arguments.length?(a=G[0]%360*hr,u=G[1]%360*hr,l=G.length>2?G[2]%360*hr:0,L()):[a*ss,u*ss,l*ss]},M.angle=function(G){return arguments.length?(f=G%360*hr,L()):f*ss},M.reflectX=function(G){return arguments.length?(d=G?-1:1,L()):d<0},M.reflectY=function(G){return arguments.length?(h=G?-1:1,L()):h<0},M.precision=function(G){return arguments.length?(C=Kue(S,T=G*G),z()):El(T)},M.fitExtent=function(G,W){return A8(M,G,W)},M.fitSize=function(G,W){return nX(M,G,W)},M.fitWidth=function(G,W){return rX(M,G,W)},M.fitHeight=function(G,W){return iX(M,G,W)};function L(){var G=Xue(n,0,0,d,h,f).apply(null,t(o,s)),W=Xue(n,r-G[0],i-G[1],d,h,f);return c=S2e(a,u,l),S=vV(t,W),I=vV(c,S),C=Kue(S,T),z()}function z(){return R=P=null,M}return function(){return t=e.apply(this,arguments),M.invert=t.invert&&B,L()}}function oX(e){var t=0,n=gr/3,r=V2e(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*hr,n=o[1]*hr):[t*ss,n*ss]},i}function L0t(e){var t=Rn(e);function n(r,i){return[r*t,Tn(i)/t]}return n.invert=function(r,i){return[r/t,mc(i*t)]},n}function B0t(e,t){var n=Tn(e),r=(n+Tn(t))/2;if(Fr(r)<Pn)return L0t(e);var i=1+n*(2*r-n),o=El(i)/r;function s(a,u){var l=El(i-2*r*Tn(u))/r;return[l*Tn(a*=r),o-l*Rn(a)]}return s.invert=function(a,u){var l=o-u,c=ld(a,Fr(l))*td(l);return l*r<0&&(c-=gr*td(a)*td(l)),[c/r,mc((i-(a*a+l*l)*r*r)/(2*r))]},s}function wF(){return oX(B0t).scale(155.424).center([0,33.6442])}function H2e(){return wF().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function j0t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function z0t(){var e,t,n=H2e(),r,i=wF().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=wF().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],m=d[1];return u=null,r.point(h,m),u||(o.point(h,m),u)||(a.point(h,m),u)}c.invert=function(d){var h=n.scale(),m=n.translate(),p=(d[0]-m[0])/h,g=(d[1]-m[1])/h;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?s:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=j0t([n.stream(t=d),i.stream(d),s.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),s.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),s.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),m=+d[0],p=+d[1];return r=n.translate(d).clipExtent([[m-.455*h,p-.238*h],[m+.455*h,p+.238*h]]).stream(l),o=i.translate([m-.307*h,p+.201*h]).clipExtent([[m-.425*h+Pn,p+.12*h+Pn],[m-.214*h-Pn,p+.234*h-Pn]]).stream(l),a=s.translate([m-.205*h,p+.212*h]).clipExtent([[m-.214*h+Pn,p+.166*h+Pn],[m-.115*h-Pn,p+.234*h-Pn]]).stream(l),f()},c.fitExtent=function(d,h){return A8(c,d,h)},c.fitSize=function(d,h){return nX(c,d,h)},c.fitWidth=function(d,h){return rX(c,d,h)},c.fitHeight=function(d,h){return iX(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function q2e(e){return function(t,n){var r=Rn(t),i=Rn(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Tn(t),o*Tn(n)]}}function tR(e){return function(t,n){var r=El(t*t+n*n),i=e(r),o=Tn(i),s=Rn(i);return[ld(t*o,r*s),mc(r&&n*o/r)]}}var W2e=q2e(function(e){return El(2/(1+e))});W2e.invert=tR(function(e){return 2*mc(e/2)});function U0t(){return Am(W2e).scale(124.75).clipAngle(180-.001)}var G2e=q2e(function(e){return(e=m2e(e))&&e/Tn(e)});G2e.invert=tR(function(e){return e});function V0t(){return Am(G2e).scale(79.4188).clipAngle(180-.001)}function D8(e,t){return[e,nF(ZK((Uo+t)/2))]}D8.invert=function(e,t){return[e,2*aC(p2e(t))-Uo]};function H0t(){return Y2e(D8).scale(961/_l)}function Y2e(e){var t=Am(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?s=a=u=l=null:(s=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):s==null?null:[[s,a],[u,l]]};function c(){var f=gr*r(),d=t(c0t(t.rotate()).invert([0,0]));return o(s==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===D8?[[Math.max(d[0]-f,s),a],[Math.min(d[0]+f,u),l]]:[[s,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function j3(e){return ZK((Uo+e)/2)}function q0t(e,t){var n=Rn(e),r=e===t?Tn(e):nF(n/Rn(t))/nF(j3(t)/j3(e)),i=n*v7(j3(e),r)/r;if(!r)return D8;function o(s,a){i>0?a<-Uo+Pn&&(a=-Uo+Pn):a>Uo-Pn&&(a=Uo-Pn);var u=i/v7(j3(a),r);return[u*Tn(r*s),i-u*Rn(r*s)]}return o.invert=function(s,a){var u=i-a,l=td(r)*El(s*s+u*u),c=ld(s,Fr(u))*td(u);return u*r<0&&(c-=gr*td(s)*td(u)),[c/r,2*aC(v7(i/l,1/r))-Uo]},o}function W0t(){return oX(q0t).scale(109.5).parallels([30,30])}function _F(e,t){return[e,t]}_F.invert=_F;function G0t(){return Am(_F).scale(152.63)}function Y0t(e,t){var n=Rn(e),r=e===t?Tn(e):(n-Rn(t))/(t-e),i=n/r+e;if(Fr(r)<Pn)return _F;function o(s,a){var u=i-a,l=r*s;return[u*Tn(l),i-u*Rn(l)]}return o.invert=function(s,a){var u=i-a,l=ld(s,Fr(u))*td(u);return u*r<0&&(l-=gr*td(s)*td(u)),[l/r,i-td(r)*El(s*s+u*u)]},o}function K0t(){return oX(Y0t).scale(131.154).center([0,13.9389])}var BD=1.340264,jD=-.081106,zD=893e-6,UD=.003796,EF=El(3)/2,X0t=12;function K2e(e,t){var n=mc(EF*Tn(t)),r=n*n,i=r*r*r;return[e*Rn(n)/(EF*(BD+3*jD*r+i*(7*zD+9*UD*r))),n*(BD+jD*r+i*(zD+UD*r))]}K2e.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,u;o<X0t&&(a=n*(BD+jD*r+i*(zD+UD*r))-t,u=BD+3*jD*r+i*(7*zD+9*UD*r),n-=s=a/u,r=n*n,i=r*r*r,!(Fr(s)<uV));++o);return[EF*e*(BD+3*jD*r+i*(7*zD+9*UD*r))/Rn(n),mc(Tn(n)/EF)]};function Q0t(){return Am(K2e).scale(177.158)}function X2e(e,t){var n=Rn(t),r=Rn(e)*n;return[n*Tn(e)/r,Tn(t)/r]}X2e.invert=tR(aC);function J0t(){return Am(X2e).scale(144.049).clipAngle(60)}function Z0t(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,u=null,l,c,f,d=1,h=1,m=S8({point:function(E,T){var C=w([E,T]);this.stream.point(C[0],C[1])}}),p=Pk,g,v;function b(){return d=e*r,h=e*i,g=v=null,w}function w(E){var T=E[0]*d,C=E[1]*h;if(o){var S=C*s-T*a;T=T*s+C*a,C=S}return[T+t,C+n]}return w.invert=function(E){var T=E[0]-t,C=E[1]-n;if(o){var S=C*s+T*a;T=T*s-C*a,C=S}return[T/d,C/h]},w.stream=function(E){return g&&v===E?g:g=m(p(v=E))},w.postclip=function(E){return arguments.length?(p=E,u=l=c=f=null,b()):p},w.clipExtent=function(E){return arguments.length?(p=E==null?(u=l=c=f=null,Pk):I2e(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),b()):u==null?null:[[u,l],[c,f]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(o=E%360*hr,a=Tn(o),s=Rn(o),b()):o*ss},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,T){return A8(w,E,T)},w.fitSize=function(E,T){return nX(w,E,T)},w.fitWidth=function(E,T){return rX(w,E,T)},w.fitHeight=function(E,T){return iX(w,E,T)},w}function Q2e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Q2e.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Fr(i)>Pn&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function egt(){return Am(Q2e).scale(175.295)}function J2e(e,t){return[Rn(t)*Tn(e),Tn(t)]}J2e.invert=tR(mc);function tgt(){return Am(J2e).scale(249.5).clipAngle(90+Pn)}function Z2e(e,t){var n=Rn(t),r=1+Rn(e)*n;return[n*Tn(e)/r,Tn(t)/r]}Z2e.invert=tR(function(e){return 2*aC(e)});function ngt(){return Am(Z2e).scale(250).clipAngle(142)}function eTe(e,t){return[nF(ZK((Uo+t)/2)),-e]}eTe.invert=function(e,t){return[-t,2*aC(p2e(e))-Uo]};function rgt(){var e=Y2e(eTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function igt(e,t){return e.parent===t.parent?1:2}function ogt(e){return e.reduce(sgt,0)/e.length}function sgt(e,t){return e+t.x}function agt(e){return 1+e.reduce(ugt,0)}function ugt(e,t){return Math.max(e,t.y)}function lgt(e){for(var t;t=e.children;)e=t[0];return e}function cgt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function fgt(){var e=igt,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(d){var h=d.children;h?(d.x=ogt(h),d.y=agt(h)):(d.x=s?a+=e(d,s):0,d.y=0,s=d)});var u=lgt(o),l=cgt(o),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function dgt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function hgt(){return this.eachAfter(dgt)}function pgt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function mgt(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function ggt(e,t){for(var n=this,r=[n],i=[],o,s,a,u=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function ygt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function vgt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function bgt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function xgt(e){for(var t=this,n=wgt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function wgt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function _gt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Egt(){return Array.from(this)}function Tgt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Cgt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Sgt(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function sX(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=kgt)):t===void 0&&(t=Dgt);for(var n=new z2(e),r,i=[n],o,s,a,u;r=i.pop();)if((s=t(r.data))&&(u=(s=Array.from(s)).length))for(r.children=s,a=u-1;a>=0;--a)i.push(o=s[a]=new z2(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(tTe)}function Agt(){return sX(this).eachBefore(Igt)}function Dgt(e){return e.children}function kgt(e){return Array.isArray(e)?e[1]:null}function Igt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function tTe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function z2(e){this.data=e,this.depth=this.height=0,this.parent=null}z2.prototype=sX.prototype={constructor:z2,count:hgt,each:pgt,eachAfter:ggt,eachBefore:mgt,find:ygt,sum:vgt,sort:bgt,path:xgt,ancestors:_gt,descendants:Egt,leaves:Tgt,links:Cgt,copy:Agt,[Symbol.iterator]:Sgt};function bO(e){return e==null?null:nTe(e)}function nTe(e){if(typeof e!="function")throw new Error;return e}function jb(){return 0}function IE(e){return function(){return e}}const Rgt=1664525,Ngt=1013904223,Que=4294967296;function Pgt(){let e=1;return()=>(e=(Rgt*e+Ngt)%Que)/Que}function Ogt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fgt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Mgt(e,t){for(var n=0,r=(e=Fgt(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&rTe(s,o)?++n:(s=Lgt(i=$gt(i,o)),n=0);return s}function $gt(e,t){var n,r;if(E7(t,e))return[t];for(n=0;n<e.length;++n)if(z3(t,e[n])&&E7(KA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(z3(KA(e[n],e[r]),t)&&z3(KA(e[n],t),e[r])&&z3(KA(e[r],t),e[n])&&E7(iTe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function z3(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function rTe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function E7(e,t){for(var n=0;n<t.length;++n)if(!rTe(e,t[n]))return!1;return!0}function Lgt(e){switch(e.length){case 1:return Bgt(e[0]);case 2:return KA(e[0],e[1]);case 3:return iTe(e[0],e[1],e[2])}}function Bgt(e){return{x:e.x,y:e.y,r:e.r}}function KA(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,u=o-n,l=s-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+s+l/f*c)/2,r:(f+i+a)/2}}function iTe(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-s,h=r-l,m=i-a,p=i-c,g=u-o,v=f-o,b=r*r+i*i-o*o,w=b-s*s-a*a+u*u,E=b-l*l-c*c+f*f,T=h*m-d*p,C=(m*E-p*w)/(T*2)-r,S=(p*g-m*v)/T,I=(h*w-d*E)/(T*2)-i,R=(d*v-h*g)/T,P=S*S+R*R-1,M=2*(o+C*S+I*R),B=C*C+I*I-o*o,L=-(Math.abs(P)>1e-6?(M+Math.sqrt(M*M-4*P*B))/(2*P):B/M);return{x:r+C+S*L,y:i+I+R*L,r:L}}function Jue(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,u,l=r*r+s*s;l?(o=t.r+n.r,o*=o,u=e.r+n.r,u*=u,o>u?(i=(l+u-o)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(l+o-u)/(2*l),a=Math.sqrt(Math.max(0,o/l-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Zue(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ele(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function U3(e){this._=e,this.next=null,this.previous=null}function jgt(e,t){if(!(o=(e=Ogt(e)).length))return 0;var n,r,i,o,s,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;Jue(r,n,i=e[2]),n=new U3(n),r=new U3(r),i=new U3(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){Jue(n._,r._,i=e[u]),i=new U3(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Zue(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Zue(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=ele(n);(i=i.next)!==r;)(a=ele(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Mgt(n,t),u=0;u<o;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function zgt(e){return Math.sqrt(e.value)}function Ugt(){var e=null,t=1,n=1,r=jb;function i(o){const s=Pgt();return o.x=t/2,o.y=n/2,e?o.eachBefore(tle(e)).eachAfter(T7(r,.5,s)).eachBefore(nle(1)):o.eachBefore(tle(zgt)).eachAfter(T7(jb,1,s)).eachAfter(T7(r,o.r/Math.min(t,n),s)).eachBefore(nle(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=bO(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:IE(+o),i):r},i}function tle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function T7(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,u;if(a)for(o=0;o<s;++o)i[o].r+=a;if(u=jgt(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=u+a}}}function nle(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function oTe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function nR(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(r-t)/e.value;++a<u;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*l}function Vgt(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(oTe),s}function o(s,a){return function(u){u.children&&nR(u,u.x0,s*(u.depth+1)/a,u.x1,s*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var Hgt={depth:-1},rle={},C7={};function qgt(e){return e.id}function Wgt(e){return e.parentId}function ile(){var e=qgt,t=Wgt,n;function r(i){var o=Array.from(i),s=e,a=t,u,l,c,f,d,h,m,p,g=new Map;if(n!=null){const v=o.map((E,T)=>Ggt(n(E,T,i))),b=v.map(ole),w=new Set(v).add("");for(const E of b)w.has(E)||(w.add(E),v.push(E),b.push(ole(E)),o.push(C7));s=(E,T)=>v[T],a=(E,T)=>b[T]}for(c=0,u=o.length;c<u;++c)l=o[c],h=o[c]=new z2(l),(m=s(l,c,i))!=null&&(m+="")&&(p=h.id=m,g.set(p,g.has(p)?rle:h)),(m=a(l,c,i))!=null&&(m+="")&&(h.parent=m);for(c=0;c<u;++c)if(h=o[c],m=h.parent){if(d=g.get(m),!d)throw new Error("missing: "+m);if(d===rle)throw new Error("ambiguous: "+m);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===C7&&f.children.length===1;)f=f.children[0],--u;for(let v=o.length-1;v>=0&&(h=o[v],h.data===C7);--v)h.data=null}if(f.parent=Hgt,f.eachBefore(function(v){v.depth=v.parent.depth+1,--u}).eachBefore(tTe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=bO(i),r):e},r.parentId=function(i){return arguments.length?(t=bO(i),r):t},r.path=function(i){return arguments.length?(n=bO(i),r):n},r}function Ggt(e){e=`${e}`;let t=e.length;return kV(e,t-1)&&!kV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ole(e){let t=e.length;if(t<2)return"";for(;--t>1&&!kV(e,t););return e.slice(0,t)}function kV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Ygt(e,t){return e.parent===t.parent?1:2}function S7(e){var t=e.children;return t?t[0]:e.t}function A7(e){var t=e.children;return t?t[t.length-1]:e.t}function Kgt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Xgt(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function Qgt(e,t,n){return e.a.parent===t.parent?e.a:n}function xO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}xO.prototype=Object.create(z2.prototype);function Jgt(e){for(var t=new xO(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new xO(o[s],s)),i.parent=n;return(t.parent=new xO(null,0)).children=[t],t}function Zgt(){var e=Ygt,t=1,n=1,r=null;function i(l){var c=Jgt(l);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(s),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var m=f===d?1:e(f,d)/2,p=m-f.x,g=t/(d.x+m+p),v=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+p)*g,b.y=b.depth*v})}return l}function o(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Xgt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function s(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,m=c,p=d.parent.children[0],g=d.m,v=h.m,b=m.m,w=p.m,E;m=A7(m),d=S7(d),m&&d;)p=S7(p),h=A7(h),h.a=l,E=m.z+b-d.z-g+e(m._,d._),E>0&&(Kgt(Qgt(m,l,f),l,E),g+=E,v+=E),b+=m.m,g+=d.m,w+=p.m,v+=h.m;m&&!A7(h)&&(h.t=m,h.m+=b-v),d&&!S7(p)&&(p.t=d,p.m+=g-w,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function k8(e,t,n,r,i){for(var o=e.children,s,a=-1,u=o.length,l=e.value&&(i-n)/e.value;++a<u;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*l}var sTe=(1+Math.sqrt(5))/2;function aTe(e,t,n,r,i,o){for(var s=[],a=t.children,u,l,c=0,f=0,d=a.length,h,m,p=t.value,g,v,b,w,E,T,C;c<d;){h=i-n,m=o-r;do g=a[f++].value;while(!g&&f<d);for(v=b=g,T=Math.max(m/h,h/m)/(p*e),C=g*g*T,E=Math.max(b/C,C/v);f<d;++f){if(g+=l=a[f].value,l<v&&(v=l),l>b&&(b=l),C=g*g*T,w=Math.max(b/C,C/v),w>E){g-=l;break}E=w}s.push(u={value:g,dice:h<m,children:a.slice(c,f)}),u.dice?nR(u,n,r,i,p?r+=m*g/p:o):k8(u,n,r,p?n+=h*g/p:i,o),p-=g,c=f}return s}const uTe=function e(t){function n(r,i,o,s,a){aTe(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(sTe);function eyt(){var e=uTe,t=!1,n=1,r=1,i=[0],o=jb,s=jb,a=jb,u=jb,l=jb;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(oTe),d}function f(d){var h=i[d.depth],m=d.x0+h,p=d.y0+h,g=d.x1-h,v=d.y1-h;g<m&&(m=g=(m+g)/2),v<p&&(p=v=(p+v)/2),d.x0=m,d.y0=p,d.x1=g,d.y1=v,d.children&&(h=i[d.depth+1]=o(d)/2,m+=l(d)-h,p+=s(d)-h,g-=a(d)-h,v-=u(d)-h,g<m&&(m=g=(m+g)/2),v<p&&(p=v=(p+v)/2),e(d,m,p,g,v))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=nTe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:IE(+d),c):o},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(s=typeof d=="function"?d:IE(+d),c):s},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:IE(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:IE(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:IE(+d),c):l},c}function tyt(e,t,n,r,i){var o=e.children,s,a=o.length,u,l=new Array(a+1);for(l[0]=u=s=0;s<a;++s)l[s+1]=u+=o[s].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,m,p,g,v){if(f>=d-1){var b=o[f];b.x0=m,b.y0=p,b.x1=g,b.y1=v;return}for(var w=l[f],E=h/2+w,T=f+1,C=d-1;T<C;){var S=T+C>>>1;l[S]<E?T=S+1:C=S}E-l[T-1]<l[T]-E&&f+1<T&&--T;var I=l[T]-w,R=h-I;if(g-m>v-p){var P=h?(m*R+g*I)/h:g;c(f,T,I,m,p,P,v),c(T,d,R,P,p,g,v)}else{var M=h?(p*R+v*I)/h:v;c(f,T,I,m,p,g,M),c(T,d,R,m,M,g,v)}}}function nyt(e,t,n,r,i){(e.depth&1?k8:nR)(e,t,n,r,i)}const ryt=function e(t){function n(r,i,o,s,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,m=u.length,p=r.value;++d<m;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?nR(l,i,o,s,p?o+=(a-o)*l.value/p:a):k8(l,i,o,p?i+=(s-i)*l.value/p:s,a),p-=l.value}else r._squarify=u=aTe(t,r,i,o,s,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(sTe);function Dm(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function fv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const IV=Symbol("implicit");function aX(){var e=new Hae,t=[],n=[],r=IV;function i(o){let s=e.get(o);if(s===void 0){if(r!==IV)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Hae;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return aX(t,n).unknown(r)},Dm.apply(i,arguments),i}function iyt(e){return function(){return e}}function RV(e){return+e}var sle=[0,1];function lc(e){return e}function NV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:iyt(isNaN(t)?NaN:.5)}function oyt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function syt(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=NV(i,r),o=n(s,o)):(r=NV(r,i),o=n(o,s)),function(a){return o(r(a))}}function ayt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=NV(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var u=k1(e,a,1,r)-1;return o[u](i[u](a))}}function rR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function I8(){var e=sle,t=sle,n=cv,r,i,o,s=lc,a,u,l;function c(){var d=Math.min(e.length,t.length);return s!==lc&&(s=oyt(e[0],e[d-1])),a=d>2?ayt:syt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?o:(u||(u=a(e.map(r),t,n)))(r(s(d)))}return f.invert=function(d){return s(i((l||(l=a(t,e.map(r),Jf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,RV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=JI,c()},f.clamp=function(d){return arguments.length?(s=d?!0:lc,c()):s!==lc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(o=d,f):o},function(d,h){return r=d,i=h,c()}}function lTe(){return I8()(lc,lc)}function cTe(e,t,n,r){var i=I1(e,t,n),o;switch(r=Tx(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=d2e(i,s))&&(r.precision=o),JK(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=h2e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=f2e(i))&&(r.precision=o-(r.type==="%")*2);break}}return C8(r)}function pw(e){var t=e.domain;return e.ticks=function(n){var r=t();return YU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return cTe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=KU(s,a,n),l===u)return r[i]=s,r[o]=a,t(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function fm(){var e=lTe();return e.copy=function(){return rR(e,fm())},Dm.apply(e,arguments),pw(e)}function fTe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,RV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return fTe(e).unknown(t)},e=arguments.length?Array.from(e,RV):[0,1],pw(n)}function dTe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function ale(e){return Math.log(e)}function ule(e){return Math.exp(e)}function uyt(e){return-Math.log(-e)}function lyt(e){return-Math.exp(-e)}function cyt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function fyt(e){return e===10?cyt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function dyt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lle(e){return(t,n)=>-e(-t,n)}function uX(e){const t=e(ale,ule),n=t.domain;let r=10,i,o;function s(){return i=dyt(r),o=fyt(r),n()[0]<0?(i=lle(i),o=lle(o),e(uyt,lyt)):e(ale,ule),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),m,p;const g=a==null?10:+a;let v=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(m=1;m<r;++m)if(p=d<0?m/o(-d):m*o(d),!(p<l)){if(p>c)break;v.push(p)}}else for(;d<=h;++d)for(m=r-1;m>=1;--m)if(p=d>0?m/o(-d):m*o(d),!(p<l)){if(p>c)break;v.push(p)}v.length*2<g&&(v=YU(l,c,g))}else v=YU(d,h,Math.min(h-d,g)).map(o);return f?v.reverse():v},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Tx(u)).precision==null&&(u.trim=!0),u=C8(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(dTe(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function hTe(){const e=uX(I8()).domain([1,10]);return e.copy=()=>rR(e,hTe()).base(e.base()),Dm.apply(e,arguments),e}function cle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function fle(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function lX(e){var t=1,n=e(cle(t),fle(t));return n.constant=function(r){return arguments.length?e(cle(t=+r),fle(t)):t},pw(n)}function pTe(){var e=lX(I8());return e.copy=function(){return rR(e,pTe()).constant(e.constant())},Dm.apply(e,arguments)}function dle(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hyt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pyt(e){return e<0?-e*e:e*e}function cX(e){var t=e(lc,lc),n=1;function r(){return n===1?e(lc,lc):n===.5?e(hyt,pyt):e(dle(n),dle(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},pw(t)}function fX(){var e=cX(I8());return e.copy=function(){return rR(e,fX()).exponent(e.exponent())},Dm.apply(e,arguments),e}function myt(){return fX.apply(null,arguments).exponent(.5)}function mTe(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=uEe(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[k1(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Z0),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return mTe().domain(e).range(t).unknown(r)},Dm.apply(o,arguments)}function gTe(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(u){return u!=null&&u<=u?i[k1(r,u,0,n)]:o}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},s.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},s.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},s.unknown=function(u){return arguments.length&&(o=u),s},s.thresholds=function(){return r.slice()},s.copy=function(){return gTe().domain([e,t]).range(i).unknown(o)},Dm.apply(pw(s),arguments)}function yTe(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[k1(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return yTe().domain(e).range(t).unknown(n)},Dm.apply(i,arguments)}const D7=new Date,k7=new Date;function Gs(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const u=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return u;let l;do u.push(l=new Date(+o)),t(o,a),e(o);while(l<o&&o<s);return u},i.filter=o=>Gs(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(D7.setTime(+o),k7.setTime(+s),e(D7),e(k7),Math.floor(n(D7,k7))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const U2=Gs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);U2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Gs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):U2);U2.range;const z0=1e3,nd=z0*60,U0=nd*60,xg=U0*24,dX=xg*7,hle=xg*30,I7=xg*365,V0=Gs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*z0)},(e,t)=>(t-e)/z0,e=>e.getUTCSeconds());V0.range;const R8=Gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*z0)},(e,t)=>{e.setTime(+e+t*nd)},(e,t)=>(t-e)/nd,e=>e.getMinutes());R8.range;const N8=Gs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*nd)},(e,t)=>(t-e)/nd,e=>e.getUTCMinutes());N8.range;const P8=Gs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*z0-e.getMinutes()*nd)},(e,t)=>{e.setTime(+e+t*U0)},(e,t)=>(t-e)/U0,e=>e.getHours());P8.range;const O8=Gs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*U0)},(e,t)=>(t-e)/U0,e=>e.getUTCHours());O8.range;const tg=Gs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nd)/xg,e=>e.getDate()-1);tg.range;const f1=Gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xg,e=>e.getUTCDate()-1);f1.range;const vTe=Gs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xg,e=>Math.floor(e/xg));vTe.range;function mw(e){return Gs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*nd)/dX)}const uC=mw(0),TF=mw(1),gyt=mw(2),yyt=mw(3),V2=mw(4),vyt=mw(5),byt=mw(6);uC.range;TF.range;gyt.range;yyt.range;V2.range;vyt.range;byt.range;function gw(e){return Gs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/dX)}const lC=gw(0),CF=gw(1),xyt=gw(2),wyt=gw(3),H2=gw(4),_yt=gw(5),Eyt=gw(6);lC.range;CF.range;xyt.range;wyt.range;H2.range;_yt.range;Eyt.range;const Mk=Gs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Mk.range;const $k=Gs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());$k.range;const dm=Gs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());dm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});dm.range;const hm=Gs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Gs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});hm.range;function bTe(e,t,n,r,i,o){const s=[[V0,1,z0],[V0,5,5*z0],[V0,15,15*z0],[V0,30,30*z0],[o,1,nd],[o,5,5*nd],[o,15,15*nd],[o,30,30*nd],[i,1,U0],[i,3,3*U0],[i,6,6*U0],[i,12,12*U0],[r,1,xg],[r,2,2*xg],[n,1,dX],[t,1,hle],[t,3,3*hle],[e,1,I7]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),m=h?h.range(l,+c+1):[];return d?m.reverse():m}function u(l,c,f){const d=Math.abs(c-l)/f,h=oC(([,,g])=>g).right(s,d);if(h===s.length)return e.every(I1(l/I7,c/I7,f));if(h===0)return U2.every(Math.max(I1(l,c,f),1));const[m,p]=s[d/s[h-1][2]<s[h][2]/d?h-1:h];return m.every(p)}return[a,u]}const[Tyt,Cyt]=bTe(hm,$k,lC,vTe,O8,N8),[Syt,Ayt]=bTe(dm,Mk,uC,tg,P8,R8);function R7(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function N7(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nA(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function xTe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,u=e.shortMonths,l=rA(i),c=iA(i),f=rA(o),d=iA(o),h=rA(s),m=iA(s),p=rA(a),g=iA(a),v=rA(u),b=iA(u),w={a:te,A:Z,b:re,B:q,c:null,d:ble,e:ble,f:Xyt,g:s1t,G:u1t,H:Gyt,I:Yyt,j:Kyt,L:wTe,m:Qyt,M:Jyt,p:U,q:Y,Q:_le,s:Ele,S:Zyt,u:e1t,U:t1t,V:n1t,w:r1t,W:i1t,x:null,X:null,y:o1t,Y:a1t,Z:l1t,"%":wle},E={a:H,A:X,b:ee,B:le,c:null,d:xle,e:xle,f:h1t,g:E1t,G:C1t,H:c1t,I:f1t,j:d1t,L:ETe,m:p1t,M:m1t,p:Ee,q:be,Q:_le,s:Ele,S:g1t,u:y1t,U:v1t,V:b1t,w:x1t,W:w1t,x:null,X:null,y:_1t,Y:T1t,Z:S1t,"%":wle},T={a:P,A:M,b:B,B:L,c:z,d:yle,e:yle,f:Vyt,g:gle,G:mle,H:vle,I:vle,j:Byt,L:Uyt,m:Lyt,M:jyt,p:R,q:$yt,Q:qyt,s:Wyt,S:zyt,u:Nyt,U:Pyt,V:Oyt,w:Ryt,W:Fyt,x:G,X:W,y:gle,Y:mle,Z:Myt,"%":Hyt};w.x=C(n,w),w.X=C(r,w),w.c=C(t,w),E.x=C(n,E),E.X=C(r,E),E.c=C(t,E);function C(Ce,Oe){return function(me){var he=[],Fe=-1,Pe=0,Je=Ce.length,ut,Ke,tt;for(me instanceof Date||(me=new Date(+me));++Fe<Je;)Ce.charCodeAt(Fe)===37&&(he.push(Ce.slice(Pe,Fe)),(Ke=ple[ut=Ce.charAt(++Fe)])!=null?ut=Ce.charAt(++Fe):Ke=ut==="e"?" ":"0",(tt=Oe[ut])&&(ut=tt(me,Ke)),he.push(ut),Pe=Fe+1);return he.push(Ce.slice(Pe,Fe)),he.join("")}}function S(Ce,Oe){return function(me){var he=nA(1900,void 0,1),Fe=I(he,Ce,me+="",0),Pe,Je;if(Fe!=me.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Oe&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Pe=N7(nA(he.y,0,1)),Je=Pe.getUTCDay(),Pe=Je>4||Je===0?CF.ceil(Pe):CF(Pe),Pe=f1.offset(Pe,(he.V-1)*7),he.y=Pe.getUTCFullYear(),he.m=Pe.getUTCMonth(),he.d=Pe.getUTCDate()+(he.w+6)%7):(Pe=R7(nA(he.y,0,1)),Je=Pe.getDay(),Pe=Je>4||Je===0?TF.ceil(Pe):TF(Pe),Pe=tg.offset(Pe,(he.V-1)*7),he.y=Pe.getFullYear(),he.m=Pe.getMonth(),he.d=Pe.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),Je="Z"in he?N7(nA(he.y,0,1)).getUTCDay():R7(nA(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(Je+5)%7:he.w+he.U*7-(Je+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,N7(he)):R7(he)}}function I(Ce,Oe,me,he){for(var Fe=0,Pe=Oe.length,Je=me.length,ut,Ke;Fe<Pe;){if(he>=Je)return-1;if(ut=Oe.charCodeAt(Fe++),ut===37){if(ut=Oe.charAt(Fe++),Ke=T[ut in ple?Oe.charAt(Fe++):ut],!Ke||(he=Ke(Ce,me,he))<0)return-1}else if(ut!=me.charCodeAt(he++))return-1}return he}function R(Ce,Oe,me){var he=l.exec(Oe.slice(me));return he?(Ce.p=c.get(he[0].toLowerCase()),me+he[0].length):-1}function P(Ce,Oe,me){var he=h.exec(Oe.slice(me));return he?(Ce.w=m.get(he[0].toLowerCase()),me+he[0].length):-1}function M(Ce,Oe,me){var he=f.exec(Oe.slice(me));return he?(Ce.w=d.get(he[0].toLowerCase()),me+he[0].length):-1}function B(Ce,Oe,me){var he=v.exec(Oe.slice(me));return he?(Ce.m=b.get(he[0].toLowerCase()),me+he[0].length):-1}function L(Ce,Oe,me){var he=p.exec(Oe.slice(me));return he?(Ce.m=g.get(he[0].toLowerCase()),me+he[0].length):-1}function z(Ce,Oe,me){return I(Ce,t,Oe,me)}function G(Ce,Oe,me){return I(Ce,n,Oe,me)}function W(Ce,Oe,me){return I(Ce,r,Oe,me)}function te(Ce){return s[Ce.getDay()]}function Z(Ce){return o[Ce.getDay()]}function re(Ce){return u[Ce.getMonth()]}function q(Ce){return a[Ce.getMonth()]}function U(Ce){return i[+(Ce.getHours()>=12)]}function Y(Ce){return 1+~~(Ce.getMonth()/3)}function H(Ce){return s[Ce.getUTCDay()]}function X(Ce){return o[Ce.getUTCDay()]}function ee(Ce){return u[Ce.getUTCMonth()]}function le(Ce){return a[Ce.getUTCMonth()]}function Ee(Ce){return i[+(Ce.getUTCHours()>=12)]}function be(Ce){return 1+~~(Ce.getUTCMonth()/3)}return{format:function(Ce){var Oe=C(Ce+="",w);return Oe.toString=function(){return Ce},Oe},parse:function(Ce){var Oe=S(Ce+="",!1);return Oe.toString=function(){return Ce},Oe},utcFormat:function(Ce){var Oe=C(Ce+="",E);return Oe.toString=function(){return Ce},Oe},utcParse:function(Ce){var Oe=S(Ce+="",!0);return Oe.toString=function(){return Ce},Oe}}}var ple={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,Dyt=/^%/,kyt=/[\\^$*+?|[\]().{}]/g;function ei(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Iyt(e){return e.replace(kyt,"\\$&")}function rA(e){return new RegExp("^(?:"+e.map(Iyt).join("|")+")","i")}function iA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Ryt(e,t,n){var r=wa.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Nyt(e,t,n){var r=wa.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Pyt(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Oyt(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Fyt(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function mle(e,t,n){var r=wa.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function gle(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Myt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $yt(e,t,n){var r=wa.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Lyt(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function yle(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Byt(e,t,n){var r=wa.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function vle(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function jyt(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function zyt(e,t,n){var r=wa.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Uyt(e,t,n){var r=wa.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Vyt(e,t,n){var r=wa.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hyt(e,t,n){var r=Dyt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function qyt(e,t,n){var r=wa.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Wyt(e,t,n){var r=wa.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ble(e,t){return ei(e.getDate(),t,2)}function Gyt(e,t){return ei(e.getHours(),t,2)}function Yyt(e,t){return ei(e.getHours()%12||12,t,2)}function Kyt(e,t){return ei(1+tg.count(dm(e),e),t,3)}function wTe(e,t){return ei(e.getMilliseconds(),t,3)}function Xyt(e,t){return wTe(e,t)+"000"}function Qyt(e,t){return ei(e.getMonth()+1,t,2)}function Jyt(e,t){return ei(e.getMinutes(),t,2)}function Zyt(e,t){return ei(e.getSeconds(),t,2)}function e1t(e){var t=e.getDay();return t===0?7:t}function t1t(e,t){return ei(uC.count(dm(e)-1,e),t,2)}function _Te(e){var t=e.getDay();return t>=4||t===0?V2(e):V2.ceil(e)}function n1t(e,t){return e=_Te(e),ei(V2.count(dm(e),e)+(dm(e).getDay()===4),t,2)}function r1t(e){return e.getDay()}function i1t(e,t){return ei(TF.count(dm(e)-1,e),t,2)}function o1t(e,t){return ei(e.getFullYear()%100,t,2)}function s1t(e,t){return e=_Te(e),ei(e.getFullYear()%100,t,2)}function a1t(e,t){return ei(e.getFullYear()%1e4,t,4)}function u1t(e,t){var n=e.getDay();return e=n>=4||n===0?V2(e):V2.ceil(e),ei(e.getFullYear()%1e4,t,4)}function l1t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ei(t/60|0,"0",2)+ei(t%60,"0",2)}function xle(e,t){return ei(e.getUTCDate(),t,2)}function c1t(e,t){return ei(e.getUTCHours(),t,2)}function f1t(e,t){return ei(e.getUTCHours()%12||12,t,2)}function d1t(e,t){return ei(1+f1.count(hm(e),e),t,3)}function ETe(e,t){return ei(e.getUTCMilliseconds(),t,3)}function h1t(e,t){return ETe(e,t)+"000"}function p1t(e,t){return ei(e.getUTCMonth()+1,t,2)}function m1t(e,t){return ei(e.getUTCMinutes(),t,2)}function g1t(e,t){return ei(e.getUTCSeconds(),t,2)}function y1t(e){var t=e.getUTCDay();return t===0?7:t}function v1t(e,t){return ei(lC.count(hm(e)-1,e),t,2)}function TTe(e){var t=e.getUTCDay();return t>=4||t===0?H2(e):H2.ceil(e)}function b1t(e,t){return e=TTe(e),ei(H2.count(hm(e),e)+(hm(e).getUTCDay()===4),t,2)}function x1t(e){return e.getUTCDay()}function w1t(e,t){return ei(CF.count(hm(e)-1,e),t,2)}function _1t(e,t){return ei(e.getUTCFullYear()%100,t,2)}function E1t(e,t){return e=TTe(e),ei(e.getUTCFullYear()%100,t,2)}function T1t(e,t){return ei(e.getUTCFullYear()%1e4,t,4)}function C1t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?H2(e):H2.ceil(e),ei(e.getUTCFullYear()%1e4,t,4)}function S1t(){return"+0000"}function wle(){return"%"}function _le(e){return+e}function Ele(e){return Math.floor(+e/1e3)}var iE,hX,CTe,pX,STe;A1t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function A1t(e){return iE=xTe(e),hX=iE.format,CTe=iE.parse,pX=iE.utcFormat,STe=iE.utcParse,iE}function D1t(e){return new Date(e)}function k1t(e){return e instanceof Date?+e:+new Date(+e)}function mX(e,t,n,r,i,o,s,a,u,l){var c=lTe(),f=c.invert,d=c.domain,h=l(".%L"),m=l(":%S"),p=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),w=l("%B"),E=l("%Y");function T(C){return(u(C)<C?h:a(C)<C?m:s(C)<C?p:o(C)<C?g:r(C)<C?i(C)<C?v:b:n(C)<C?w:E)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,k1t)):d().map(D1t)},c.ticks=function(C){var S=d();return e(S[0],S[S.length-1],C??10)},c.tickFormat=function(C,S){return S==null?T:l(S)},c.nice=function(C){var S=d();return(!C||typeof C.range!="function")&&(C=t(S[0],S[S.length-1],C??10)),C?d(dTe(S,C)):c},c.copy=function(){return rR(c,mX(e,t,n,r,i,o,s,a,u,l))},c}function I1t(){return Dm.apply(mX(Syt,Ayt,dm,Mk,uC,tg,P8,R8,V0,hX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function R1t(){return Dm.apply(mX(Tyt,Cyt,hm,$k,lC,f1,O8,N8,V0,pX).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function F8(){var e=0,t=1,n,r,i,o,s=lc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:s(i===0?.5:(f=(o(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(s=f,l):s};function c(f){return function(d){var h,m;return arguments.length?([h,m]=d,s=f(h,m),l):[s(0),s(1)]}}return l.range=c(cv),l.rangeRound=c(JI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function dv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function gX(){var e=pw(F8()(lc));return e.copy=function(){return dv(e,gX())},fv.apply(e,arguments)}function ATe(){var e=uX(F8()).domain([1,10]);return e.copy=function(){return dv(e,ATe()).base(e.base())},fv.apply(e,arguments)}function DTe(){var e=lX(F8());return e.copy=function(){return dv(e,DTe()).constant(e.constant())},fv.apply(e,arguments)}function yX(){var e=cX(F8());return e.copy=function(){return dv(e,yX()).exponent(e.exponent())},fv.apply(e,arguments)}function N1t(){return yX.apply(null,arguments).exponent(.5)}function M8(){var e=0,t=.5,n=1,r=1,i,o,s,a,u,l=lc,c,f=!1,d;function h(p){return isNaN(p=+p)?d:(p=.5+((p=+c(p))-o)*(r*p<r*o?a:u),l(f?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),o=c(t=+t),s=c(n=+n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(f=!!p,h):f},h.interpolator=function(p){return arguments.length?(l=p,h):l};function m(p){return function(g){var v,b,w;return arguments.length?([v,b,w]=g,l=VK(p,[v,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=m(cv),h.rangeRound=m(JI),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return c=p,i=p(e),o=p(t),s=p(n),a=i===o?0:.5/(o-i),u=o===s?0:.5/(s-o),r=o<i?-1:1,h}}function kTe(){var e=pw(M8()(lc));return e.copy=function(){return dv(e,kTe())},fv.apply(e,arguments)}function ITe(){var e=uX(M8()).domain([.1,1,10]);return e.copy=function(){return dv(e,ITe()).base(e.base())},fv.apply(e,arguments)}function RTe(){var e=lX(M8());return e.copy=function(){return dv(e,RTe()).constant(e.constant())},fv.apply(e,arguments)}function vX(){var e=cX(M8());return e.copy=function(){return dv(e,vX()).exponent(e.exponent())},fv.apply(e,arguments)}function P1t(){return vX.apply(null,arguments).exponent(.5)}function Td(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const O1t=Td("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),F1t=Td("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),M1t=Td("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),$1t=Td("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),L1t=Td("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),B1t=Td("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),j1t=Td("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),z1t=Td("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),U1t=Td("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),V1t=Td("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),NTe=e=>UEe(e[e.length-1]);var H1t=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Td);const Tle=NTe(H1t);var q1t=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Td);const W1t=NTe(q1t);function di(e){return function(){return e}}const Cle=Math.abs,xu=Math.atan2,db=Math.cos,G1t=Math.max,P7=Math.min,bp=Math.sin,Zb=Math.sqrt,wu=1e-12,q2=Math.PI,SF=q2/2,PTe=2*q2;function Y1t(e){return e>1?0:e<-1?q2:Math.acos(e)}function Sle(e){return e>=1?SF:e<=-1?-SF:Math.asin(e)}function $8(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new GK(t)}function K1t(e){return e.innerRadius}function X1t(e){return e.outerRadius}function Q1t(e){return e.startAngle}function J1t(e){return e.endAngle}function Z1t(e){return e&&e.padAngle}function evt(e,t,n,r,i,o,s,a){var u=n-e,l=r-t,c=s-i,f=a-o,d=f*u-c*l;if(!(d*d<wu))return d=(c*(t-o)-f*(e-i))/d,[e+d*u,t+d*l]}function V3(e,t,n,r,i,o,s){var a=e-n,u=t-r,l=(s?o:-o)/Zb(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,m=n+c,p=r+f,g=(d+m)/2,v=(h+p)/2,b=m-d,w=p-h,E=b*b+w*w,T=i-o,C=d*p-m*h,S=(w<0?-1:1)*Zb(G1t(0,T*T*E-C*C)),I=(C*w-b*S)/E,R=(-C*b-w*S)/E,P=(C*w+b*S)/E,M=(-C*b+w*S)/E,B=I-g,L=R-v,z=P-g,G=M-v;return B*B+L*L>z*z+G*G&&(I=P,R=M),{cx:I,cy:R,x01:-c,y01:-f,x11:I*(i/T-1),y11:R*(i/T-1)}}function tvt(){var e=K1t,t=X1t,n=di(0),r=null,i=Q1t,o=J1t,s=Z1t,a=null,u=$8(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),m=i.apply(this,arguments)-SF,p=o.apply(this,arguments)-SF,g=Cle(p-m),v=p>m;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>wu))a.moveTo(0,0);else if(g>PTe-wu)a.moveTo(h*db(m),h*bp(m)),a.arc(0,0,h,m,p,!v),d>wu&&(a.moveTo(d*db(p),d*bp(p)),a.arc(0,0,d,p,m,v));else{var b=m,w=p,E=m,T=p,C=g,S=g,I=s.apply(this,arguments)/2,R=I>wu&&(r?+r.apply(this,arguments):Zb(d*d+h*h)),P=P7(Cle(h-d)/2,+n.apply(this,arguments)),M=P,B=P,L,z;if(R>wu){var G=Sle(R/d*bp(I)),W=Sle(R/h*bp(I));(C-=G*2)>wu?(G*=v?1:-1,E+=G,T-=G):(C=0,E=T=(m+p)/2),(S-=W*2)>wu?(W*=v?1:-1,b+=W,w-=W):(S=0,b=w=(m+p)/2)}var te=h*db(b),Z=h*bp(b),re=d*db(T),q=d*bp(T);if(P>wu){var U=h*db(w),Y=h*bp(w),H=d*db(E),X=d*bp(E),ee;if(g<q2)if(ee=evt(te,Z,H,X,U,Y,re,q)){var le=te-ee[0],Ee=Z-ee[1],be=U-ee[0],Ce=Y-ee[1],Oe=1/bp(Y1t((le*be+Ee*Ce)/(Zb(le*le+Ee*Ee)*Zb(be*be+Ce*Ce)))/2),me=Zb(ee[0]*ee[0]+ee[1]*ee[1]);M=P7(P,(d-me)/(Oe-1)),B=P7(P,(h-me)/(Oe+1))}else M=B=0}S>wu?B>wu?(L=V3(H,X,te,Z,h,B,v),z=V3(U,Y,re,q,h,B,v),a.moveTo(L.cx+L.x01,L.cy+L.y01),B<P?a.arc(L.cx,L.cy,B,xu(L.y01,L.x01),xu(z.y01,z.x01),!v):(a.arc(L.cx,L.cy,B,xu(L.y01,L.x01),xu(L.y11,L.x11),!v),a.arc(0,0,h,xu(L.cy+L.y11,L.cx+L.x11),xu(z.cy+z.y11,z.cx+z.x11),!v),a.arc(z.cx,z.cy,B,xu(z.y11,z.x11),xu(z.y01,z.x01),!v))):(a.moveTo(te,Z),a.arc(0,0,h,b,w,!v)):a.moveTo(te,Z),!(d>wu)||!(C>wu)?a.lineTo(re,q):M>wu?(L=V3(re,q,U,Y,d,-M,v),z=V3(te,Z,H,X,d,-M,v),a.lineTo(L.cx+L.x01,L.cy+L.y01),M<P?a.arc(L.cx,L.cy,M,xu(L.y01,L.x01),xu(z.y01,z.x01),!v):(a.arc(L.cx,L.cy,M,xu(L.y01,L.x01),xu(L.y11,L.x11),!v),a.arc(0,0,d,xu(L.cy+L.y11,L.cx+L.x11),xu(z.cy+z.y11,z.cx+z.x11),v),a.arc(z.cx,z.cy,M,xu(z.y11,z.x11),xu(z.y01,z.x01),!v))):a.arc(0,0,d,T,E,v)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-q2/2;return[db(f)*c,bp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:di(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:di(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:di(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:di(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:di(+c),l):i},l.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:di(+c),l):o},l.padAngle=function(c){return arguments.length?(s=typeof c=="function"?c:di(+c),l):s},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function OTe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FTe(e){this._context=e}FTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function bX(e){return new FTe(e)}function MTe(e){return e[0]}function $Te(e){return e[1]}function xX(e,t){var n=di(!0),r=null,i=bX,o=null,s=$8(a);e=typeof e=="function"?e:e===void 0?MTe:di(e),t=typeof t=="function"?t:t===void 0?$Te:di(t);function a(u){var l,c=(u=OTe(u)).length,f,d=!1,h;for(r==null&&(o=i(h=s())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(f,l,u),+t(f,l,u));if(h)return o=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:di(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:di(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:di(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),a):r},a}function LTe(e,t,n){var r=null,i=di(!0),o=null,s=bX,a=null,u=$8(l);e=typeof e=="function"?e:e===void 0?MTe:di(+e),t=typeof t=="function"?t:di(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?$Te:di(+n);function l(f){var d,h,m,p=(f=OTe(f)).length,g,v=!1,b,w=new Array(p),E=new Array(p);for(o==null&&(a=s(b=u())),d=0;d<=p;++d){if(!(d<p&&i(g=f[d],d,f))===v)if(v=!v)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=d-1;m>=h;--m)a.point(w[m],E[m]);a.lineEnd(),a.areaEnd()}v&&(w[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):w[d],n?+n(g,d,f):E[d]))}if(b)return a=null,b+""||null}function c(){return xX().defined(i).curve(s).context(o)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:di(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:di(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:di(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:di(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:di(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:di(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:di(!!f),l):i},l.curve=function(f){return arguments.length?(s=f,o!=null&&(a=s(o)),l):s},l.context=function(f){return arguments.length?(f==null?o=a=null:a=s(o=f),l):o},l}const nvt={draw(e,t){const n=Zb(t/q2);e.moveTo(n,0),e.arc(0,0,n,0,PTe)}};function rvt(e,t){let n=null,r=$8(i);e=typeof e=="function"?e:di(e||nvt),t=typeof t=="function"?t:di(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:di(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:di(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function N1(){}function AF(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function L8(e){this._context=e}L8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:AF(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:AF(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ivt(e){return new L8(e)}function BTe(e){this._context=e}BTe.prototype={areaStart:N1,areaEnd:N1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:AF(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ovt(e){return new BTe(e)}function jTe(e){this._context=e}jTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:AF(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function svt(e){return new jTe(e)}function zTe(e,t){this._basis=new L8(e),this._beta=t}zTe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*o),this._beta*t[a]+(1-this._beta)*(i+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const avt=function e(t){function n(r){return t===1?new L8(r):new zTe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function DF(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function wX(e,t){this._context=e,this._k=(1-t)/6}wX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:DF(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:DF(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const uvt=function e(t){function n(r){return new wX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function _X(e,t){this._context=e,this._k=(1-t)/6}_X.prototype={areaStart:N1,areaEnd:N1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:DF(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const lvt=function e(t){function n(r){return new _X(r,t)}return n.tension=function(r){return e(+r)},n}(0);function EX(e,t){this._context=e,this._k=(1-t)/6}EX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:DF(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cvt=function e(t){function n(r){return new EX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function TX(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>wu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>wu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,s=(s*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function UTe(e,t){this._context=e,this._alpha=t}UTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:TX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fvt=function e(t){function n(r){return t?new UTe(r,t):new wX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function VTe(e,t){this._context=e,this._alpha=t}VTe.prototype={areaStart:N1,areaEnd:N1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:TX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dvt=function e(t){function n(r){return t?new VTe(r,t):new _X(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function HTe(e,t){this._context=e,this._alpha=t}HTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:TX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hvt=function e(t){function n(r){return t?new HTe(r,t):new EX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function qTe(e){this._context=e}qTe.prototype={areaStart:N1,areaEnd:N1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pvt(e){return new qTe(e)}function Ale(e){return e<0?-1:1}function Dle(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(Ale(o)+Ale(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function kle(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function O7(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function kF(e){this._context=e}kF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O7(this,this._t0,kle(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,O7(this,kle(this,n=Dle(this,e,t)),n);break;default:O7(this,this._t0,n=Dle(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function WTe(e){this._context=new GTe(e)}(WTe.prototype=Object.create(kF.prototype)).point=function(e,t){kF.prototype.point.call(this,t,e)};function GTe(e){this._context=e}GTe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function mvt(e){return new kF(e)}function gvt(e){return new WTe(e)}function YTe(e){this._context=e}YTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ile(e),i=Ile(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ile(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function yvt(e){return new YTe(e)}function B8(e,t){this._context=e,this._t=t}B8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function vvt(e){return new B8(e,.5)}function bvt(e){return new B8(e,0)}function xvt(e){return new B8(e,1)}function XA(e,t,n){this.k=e,this.x=t,this.y=n}XA.prototype={constructor:XA,scale:function(e){return e===1?this:new XA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new XA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};XA.prototype;var wO={exports:{}},wvt=wO.exports,Rle;function _vt(){return Rle||(Rle=1,function(e){(function(t,n,r){function i(u){var l=this,c=a();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(u),l.s0<0&&(l.s0+=1),l.s1-=c(u),l.s1<0&&(l.s1+=1),l.s2-=c(u),l.s2<0&&(l.s2+=1),c=null}function o(u,l){return l.c=u.c,l.s0=u.s0,l.s1=u.s1,l.s2=u.s2,l}function s(u,l){var c=new i(u),f=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,f&&(typeof f=="object"&&o(f,c),d.state=function(){return o(c,{})}),d}function a(){var u=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){u+=c.charCodeAt(f);var d=.02519603282416938*u;u=d>>>0,d-=u,d*=u,u=d>>>0,d-=u,u+=d*4294967296}return(u>>>0)*23283064365386963e-26};return l}n.exports?n.exports=s:this.alea=s})(wvt,e)}(wO)),wO.exports}var _O={exports:{}},Evt=_O.exports,Nle;function Tvt(){return Nle||(Nle=1,function(e){(function(t,n,r){function i(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function s(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n.exports?n.exports=s:this.xor128=s})(Evt,e)}(_O)),_O.exports}var EO={exports:{}},Cvt=EO.exports,Ple;function Svt(){return Ple||(Ple=1,function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(f^f<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(a|0)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=l.charCodeAt(c)|0,c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function s(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n.exports?n.exports=s:this.xorwow=s})(Cvt,e)}(EO)),EO.exports}var TO={exports:{}},Avt=TO.exports,Ole;function Dvt(){return Ole||(Ole=1,function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.x,f=u.i,d,h;return d=c[f],d^=d>>>7,h=d^d<<24,d=c[f+1&7],h^=d^d>>>10,d=c[f+3&7],h^=d^d>>>3,d=c[f+4&7],h^=d^d<<7,d=c[f+7&7],d=d^d<<13,h^=d^d<<9,c[f]=h,u.i=f+1&7,h};function l(c,f){var d,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,d=0;d<f.length;++d)h[d&7]=h[d&7]<<15^f.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function s(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&o(c,l),f.state=function(){return o(l,{})}),f}n.exports?n.exports=s:this.xorshift7=s})(Avt,e)}(TO)),TO.exports}var CO={exports:{}},kvt=CO.exports,Fle;function Ivt(){return Fle||(Fle=1,function(e){(function(t,n,r){function i(a){var u=this;u.next=function(){var c=u.w,f=u.X,d=u.i,h,m;return u.w=c=c+1640531527|0,m=f[d+34&127],h=f[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=f[d]=m^h,u.i=d,m+(c^c>>>16)|0};function l(c,f){var d,h,m,p,g,v=[],b=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,b=Math.max(b,f.length)),m=0,p=-32;p<b;++p)f&&(h^=f.charCodeAt((p+32)%f.length)),p===0&&(g=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(g=g+1640531527|0,d=v[p&127]^=h+g,m=d==0?m+1:0);for(m>=128&&(v[(f&&f.length||0)&127]=-1),m=127,p=4*128;p>0;--p)h=v[m+34&127],d=v[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,v[m]=h^d;c.w=g,c.X=v,c.i=m}l(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function s(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&o(c,l),f.state=function(){return o(l,{})}),f}n.exports?n.exports=s:this.xor4096=s})(kvt,e)}(CO)),CO.exports}var SO={exports:{}},Rvt=SO.exports,Mle;function Nvt(){return Mle||(Mle=1,function(e){(function(t,n,r){function i(a){var u=this,l="";u.next=function(){var f=u.b,d=u.c,h=u.d,m=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^m,u.a=m-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=a|0):l+=a;for(var c=0;c<l.length+20;c++)u.b^=l.charCodeAt(c)|0,u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function s(a,u){var l=new i(a),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var d=l.next()>>>11,h=(l.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n.exports?n.exports=s:this.tychei=s})(Rvt,e)}(SO)),SO.exports}var AO={exports:{}},Pvt=AO.exports,$le;function Ovt(){return $le||($le=1,function(e){(function(t,n,r){var i=256,o=6,s=52,a="random",u=r.pow(i,o),l=r.pow(2,s),c=l*2,f=i-1,d;function h(E,T,C){var S=[];T=T==!0?{entropy:!0}:T||{};var I=v(g(T.entropy?[E,w(n)]:E??b(),3),S),R=new m(S),P=function(){for(var M=R.g(o),B=u,L=0;M<l;)M=(M+L)*i,B*=i,L=R.g(1);for(;M>=c;)M/=2,B/=2,L>>>=1;return(M+L)/B};return P.int32=function(){return R.g(4)|0},P.quick=function(){return R.g(4)/4294967296},P.double=P,v(w(R.S),n),(T.pass||C||function(M,B,L,z){return z&&(z.S&&p(z,R),M.state=function(){return p(R,{})}),L?(r[a]=M,B):M})(P,I,"global"in T?T.global:this==r,T.state)}function m(E){var T,C=E.length,S=this,I=0,R=S.i=S.j=0,P=S.S=[];for(C||(E=[C++]);I<i;)P[I]=I++;for(I=0;I<i;I++)P[I]=P[R=f&R+E[I%C]+(T=P[I])],P[R]=T;(S.g=function(M){for(var B,L=0,z=S.i,G=S.j,W=S.S;M--;)B=W[z=f&z+1],L=L*i+W[f&(W[z]=W[G=f&G+B])+(W[G]=B)];return S.i=z,S.j=G,L})(i)}function p(E,T){return T.i=E.i,T.j=E.j,T.S=E.S.slice(),T}function g(E,T){var C=[],S=typeof E,I;if(T&&S=="object")for(I in E)try{C.push(g(E[I],T-1))}catch{}return C.length?C:S=="string"?E:E+"\0"}function v(E,T){for(var C=E+"",S,I=0;I<C.length;)T[f&I]=f&(S^=T[f&I]*19)+C.charCodeAt(I++);return w(T)}function b(){try{var E;return d&&(E=d.randomBytes)?E=E(i):(E=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(E)),w(E)}catch{var T=t.navigator,C=T&&T.plugins;return[+new Date,t,C,t.screen,w(n)]}}function w(E){return String.fromCharCode.apply(0,E)}if(v(r.random(),n),e.exports){e.exports=h;try{d=mY}catch{}}else r["seed"+a]=h})(typeof self<"u"?self:Pvt,[],Math)}(AO)),AO.exports}var F7,Lle;function Fvt(){if(Lle)return F7;Lle=1;var e=_vt(),t=Tvt(),n=Svt(),r=Dvt(),i=Ivt(),o=Nvt(),s=Ovt();return s.alea=e,s.xor128=t,s.xorwow=n,s.xorshift7=r,s.xor4096=i,s.tychei=o,F7=s,F7}var Mvt=Fvt();const KTe=_c(Mvt);function IF(){return IF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IF.apply(null,arguments)}var XTe={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Vi(e){return typeof e=="number"}function Vo(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function $vt(e){return typeof e=="bigint"}function QTe(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function JTe(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function ZTe(e){return e&&e.constructor.prototype.isUnit===!0||!1}function k0(e){return typeof e=="string"}var wo=Array.isArray;function To(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function W2(e){return Array.isArray(e)||To(e)}function Lvt(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Bvt(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function jvt(e){return e&&e.constructor.prototype.isRange===!0||!1}function CX(e){return e&&e.constructor.prototype.isIndex===!0||!1}function zvt(e){return typeof e=="boolean"}function Uvt(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Vvt(e){return e&&e.constructor.prototype.isHelp===!0||!1}function Hvt(e){return typeof e=="function"}function qvt(e){return e instanceof Date}function Wvt(e){return e instanceof RegExp}function SX(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!QTe(e)&&!JTe(e))}function Gvt(e){return e===null}function Yvt(e){return e===void 0}function Kvt(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Xvt(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function Qvt(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Jvt(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function Zvt(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function ebt(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function tbt(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function nbt(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function rbt(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function ibt(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function obt(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function sbt(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function abt(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function ubt(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function lbt(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function cbt(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function fbt(e){return e&&e.constructor.prototype.isChain===!0||!1}function wh(e){var t=typeof e;return t==="object"?e===null?"null":Vo(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function Bo(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(n){return Bo(n)});if(e instanceof Date)return new Date(e.valueOf());if(Vo(e))return e;if(SX(e))return dbt(e,Bo);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function dbt(e,t){var n={};for(var r in e)Lk(e,r)&&(n[r]=t(e[r]));return n}function eCe(e,t){for(var n in t)Lk(t,n)&&(e[n]=t[n]);return e}function G2(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!G2(e[r],t[r]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!G2(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}else return e===t}}function Lk(e,t){return e&&Object.hasOwnProperty.call(e,t)}function hbt(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],o=e[i];o!==void 0&&(n[i]=o)}return n}var pbt=["Matrix","Array"],mbt=["number","BigNumber","Fraction"],yw=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(XTe)};IF(yw,XTe,{MATRIX_OPTIONS:pbt,NUMBER_OPTIONS:mbt});function Ble(){return!0}function Gf(){return!1}function oE(){}const jle="Argument is not a typed-function.";function tCe(){function e(oe){return typeof oe=="object"&&oe!==null&&oe.constructor===Object}const t=[{name:"number",test:function(oe){return typeof oe=="number"}},{name:"string",test:function(oe){return typeof oe=="string"}},{name:"boolean",test:function(oe){return typeof oe=="boolean"}},{name:"Function",test:function(oe){return typeof oe=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(oe){return oe instanceof Date}},{name:"RegExp",test:function(oe){return oe instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(oe){return oe===null}},{name:"undefined",test:function(oe){return oe===void 0}}],n={name:"any",test:Ble,isAny:!0};let r,i,o=0,s={createCount:0};function a(oe){const xe=r.get(oe);if(xe)return xe;let Re='Unknown type "'+oe+'"';const pe=oe.toLowerCase();let we;for(we of i)if(we.toLowerCase()===pe){Re+='. Did you mean "'+we+'" ?';break}throw new TypeError(Re)}function u(oe){let xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const Re=xe?a(xe).index:i.length,pe=[];for(let ke=0;ke<oe.length;++ke){if(!oe[ke]||typeof oe[ke].name!="string"||typeof oe[ke].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Ge=oe[ke].name;if(r.has(Ge))throw new TypeError('Duplicate type name "'+Ge+'"');pe.push(Ge),r.set(Ge,{name:Ge,test:oe[ke].test,isAny:oe[ke].isAny,index:Re+ke,conversionsTo:[]})}const we=i.slice(Re);i=i.slice(0,Re).concat(pe).concat(we);for(let ke=Re+pe.length;ke<i.length;++ke)r.get(i[ke]).index=ke}function l(){r=new Map,i=[],o=0,u([n],!1)}l(),u(t);function c(){let oe;for(oe of i)r.get(oe).conversionsTo=[];o=0}function f(oe){const xe=i.filter(Re=>{const pe=r.get(Re);return!pe.isAny&&pe.test(oe)});return xe.length?xe:["any"]}function d(oe){return oe&&typeof oe=="function"&&"_typedFunctionData"in oe}function h(oe,xe,Re){if(!d(oe))throw new TypeError(jle);const pe=Re&&Re.exact,we=Array.isArray(xe)?xe.join(","):xe,ke=E(we),Ge=g(ke);if(!pe||Ge in oe.signatures){const ln=oe._typedFunctionData.signatureMap.get(Ge);if(ln)return ln}const Ve=ke.length;let at;if(pe){at=[];let ln;for(ln in oe.signatures)at.push(oe._typedFunctionData.signatureMap.get(ln))}else at=oe._typedFunctionData.signatures;for(let ln=0;ln<Ve;++ln){const xn=ke[ln],rn=[];let bn;for(bn of at){const Hn=I(bn.params,ln);if(!(!Hn||xn.restParam&&!Hn.restParam)){if(!Hn.hasAny){const $n=w(Hn);if(xn.types.some(Kr=>!$n.has(Kr.name)))continue}rn.push(bn)}}if(at=rn,at.length===0)break}let rt;for(rt of at)if(rt.params.length<=Ve)return rt;throw new TypeError("Signature not found (signature: "+(oe.name||"unnamed")+"("+g(ke,", ")+"))")}function m(oe,xe,Re){return h(oe,xe,Re).implementation}function p(oe,xe){const Re=a(xe);if(Re.test(oe))return oe;const pe=Re.conversionsTo;if(pe.length===0)throw new Error("There are no conversions to "+xe+" defined.");for(let we=0;we<pe.length;we++)if(a(pe[we].from).test(oe))return pe[we].convert(oe);throw new Error("Cannot convert "+oe+" to "+xe)}function g(oe){let xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return oe.map(Re=>Re.name).join(xe)}function v(oe){const xe=oe.indexOf("...")===0,pe=(xe?oe.length>3?oe.slice(3):"any":oe).split("|").map(Ve=>a(Ve.trim()));let we=!1,ke=xe?"...":"";return{types:pe.map(function(Ve){return we=Ve.isAny||we,ke+=Ve.name+"|",{name:Ve.name,typeIndex:Ve.index,test:Ve.test,isAny:Ve.isAny,conversion:null,conversionIndex:-1}}),name:ke.slice(0,-1),hasAny:we,hasConversion:!1,restParam:xe}}function b(oe){const xe=oe.types.map(Ge=>Ge.name),Re=te(xe);let pe=oe.hasAny,we=oe.name;const ke=Re.map(function(Ge){const Ve=a(Ge.from);return pe=Ve.isAny||pe,we+="|"+Ge.from,{name:Ge.from,typeIndex:Ve.index,test:Ve.test,isAny:Ve.isAny,conversion:Ge,conversionIndex:Ge.index}});return{types:oe.types.concat(ke),name:we,hasAny:pe,hasConversion:ke.length>0,restParam:oe.restParam}}function w(oe){return oe.typeSet||(oe.typeSet=new Set,oe.types.forEach(xe=>oe.typeSet.add(xe.name))),oe.typeSet}function E(oe){const xe=[];if(typeof oe!="string")throw new TypeError("Signatures must be strings");const Re=oe.trim();if(Re==="")return xe;const pe=Re.split(",");for(let we=0;we<pe.length;++we){const ke=v(pe[we].trim());if(ke.restParam&&we!==pe.length-1)throw new SyntaxError('Unexpected rest parameter "'+pe[we]+'": only allowed for the last parameter');if(ke.types.length===0)return null;xe.push(ke)}return xe}function T(oe){const xe=Ce(oe);return xe?xe.restParam:!1}function C(oe){if(!oe||oe.types.length===0)return Ble;if(oe.types.length===1)return a(oe.types[0].name).test;if(oe.types.length===2){const xe=a(oe.types[0].name).test,Re=a(oe.types[1].name).test;return function(we){return xe(we)||Re(we)}}else{const xe=oe.types.map(function(Re){return a(Re.name).test});return function(pe){for(let we=0;we<xe.length;we++)if(xe[we](pe))return!0;return!1}}}function S(oe){let xe,Re,pe;if(T(oe)){xe=be(oe).map(C);const we=xe.length,ke=C(Ce(oe)),Ge=function(Ve){for(let at=we;at<Ve.length;at++)if(!ke(Ve[at]))return!1;return!0};return function(at){for(let rt=0;rt<xe.length;rt++)if(!xe[rt](at[rt]))return!1;return Ge(at)&&at.length>=we+1}}else return oe.length===0?function(ke){return ke.length===0}:oe.length===1?(Re=C(oe[0]),function(ke){return Re(ke[0])&&ke.length===1}):oe.length===2?(Re=C(oe[0]),pe=C(oe[1]),function(ke){return Re(ke[0])&&pe(ke[1])&&ke.length===2}):(xe=oe.map(C),function(ke){for(let Ge=0;Ge<xe.length;Ge++)if(!xe[Ge](ke[Ge]))return!1;return ke.length===xe.length})}function I(oe,xe){return xe<oe.length?oe[xe]:T(oe)?Ce(oe):null}function R(oe,xe){const Re=I(oe,xe);return Re?w(Re):new Set}function P(oe){return oe.conversion===null||oe.conversion===void 0}function M(oe,xe){const Re=new Set;return oe.forEach(pe=>{const we=R(pe.params,xe);let ke;for(ke of we)Re.add(ke)}),Re.has("any")?["any"]:Array.from(Re)}function B(oe,xe,Re){let pe,we;const ke=oe||"unnamed";let Ge=Re,Ve;for(Ve=0;Ve<xe.length;Ve++){const xn=[];if(Ge.forEach(rn=>{const bn=I(rn.params,Ve),Hn=C(bn);(Ve<rn.params.length||T(rn.params))&&Hn(xe[Ve])&&xn.push(rn)}),xn.length===0){if(we=M(Ge,Ve),we.length>0){const rn=f(xe[Ve]);return pe=new TypeError("Unexpected type of argument in function "+ke+" (expected: "+we.join(" or ")+", actual: "+rn.join(" | ")+", index: "+Ve+")"),pe.data={category:"wrongType",fn:ke,index:Ve,actual:rn,expected:we},pe}}else Ge=xn}const at=Ge.map(function(xn){return T(xn.params)?1/0:xn.params.length});if(xe.length<Math.min.apply(null,at))return we=M(Ge,Ve),pe=new TypeError("Too few arguments in function "+ke+" (expected: "+we.join(" or ")+", index: "+xe.length+")"),pe.data={category:"tooFewArgs",fn:ke,index:xe.length,expected:we},pe;const rt=Math.max.apply(null,at);if(xe.length>rt)return pe=new TypeError("Too many arguments in function "+ke+" (expected: "+rt+", actual: "+xe.length+")"),pe.data={category:"tooManyArgs",fn:ke,index:xe.length,expectedLength:rt},pe;const ln=[];for(let xn=0;xn<xe.length;++xn)ln.push(f(xe[xn]).join("|"));return pe=new TypeError('Arguments of type "'+ln.join(", ")+'" do not match any of the defined signatures of function '+ke+"."),pe.data={category:"mismatch",actual:ln},pe}function L(oe){let xe=i.length+1;for(let Re=0;Re<oe.types.length;Re++)P(oe.types[Re])&&(xe=Math.min(xe,oe.types[Re].typeIndex));return xe}function z(oe){let xe=o+1;for(let Re=0;Re<oe.types.length;Re++)P(oe.types[Re])||(xe=Math.min(xe,oe.types[Re].conversionIndex));return xe}function G(oe,xe){if(oe.hasAny){if(!xe.hasAny)return 1}else if(xe.hasAny)return-1;if(oe.restParam){if(!xe.restParam)return 1}else if(xe.restParam)return-1;if(oe.hasConversion){if(!xe.hasConversion)return 1}else if(xe.hasConversion)return-1;const Re=L(oe)-L(xe);if(Re<0)return-1;if(Re>0)return 1;const pe=z(oe)-z(xe);return pe<0?-1:pe>0?1:0}function W(oe,xe){const Re=oe.params,pe=xe.params,we=Ce(Re),ke=Ce(pe),Ge=T(Re),Ve=T(pe);if(Ge&&we.hasAny){if(!Ve||!ke.hasAny)return 1}else if(Ve&&ke.hasAny)return-1;let at=0,rt=0,ln;for(ln of Re)ln.hasAny&&++at,ln.hasConversion&&++rt;let xn=0,rn=0;for(ln of pe)ln.hasAny&&++xn,ln.hasConversion&&++rn;if(at!==xn)return at-xn;if(Ge&&we.hasConversion){if(!Ve||!ke.hasConversion)return 1}else if(Ve&&ke.hasConversion)return-1;if(rt!==rn)return rt-rn;if(Ge){if(!Ve)return 1}else if(Ve)return-1;const bn=(Re.length-pe.length)*(Ge?-1:1);if(bn!==0)return bn;const Hn=[];let $n=0;for(let Lr=0;Lr<Re.length;++Lr){const Br=G(Re[Lr],pe[Lr]);Hn.push(Br),$n+=Br}if($n!==0)return $n;let Kr;for(Kr of Hn)if(Kr!==0)return Kr;return 0}function te(oe){if(oe.length===0)return[];const xe=oe.map(a);oe.length>1&&xe.sort((we,ke)=>we.index-ke.index);let Re=xe[0].conversionsTo;if(oe.length===1)return Re;Re=Re.concat([]);const pe=new Set(oe);for(let we=1;we<xe.length;++we){let ke;for(ke of xe[we].conversionsTo)pe.has(ke.from)||(Re.push(ke),pe.add(ke.from))}return Re}function Z(oe,xe){let Re=xe;if(oe.some(we=>we.hasConversion)){const we=T(oe),ke=oe.map(re);Re=function(){const Ve=[],at=we?arguments.length-1:arguments.length;for(let rt=0;rt<at;rt++)Ve[rt]=ke[rt](arguments[rt]);return we&&(Ve[at]=arguments[at].map(ke[at])),xe.apply(this,Ve)}}let pe=Re;if(T(oe)){const we=oe.length-1;pe=function(){return Re.apply(this,Oe(arguments,0,we).concat([Oe(arguments,we)]))}}return pe}function re(oe){let xe,Re,pe,we;const ke=[],Ge=[];switch(oe.types.forEach(function(Ve){Ve.conversion&&(ke.push(a(Ve.conversion.from).test),Ge.push(Ve.conversion.convert))}),Ge.length){case 0:return function(at){return at};case 1:return xe=ke[0],pe=Ge[0],function(at){return xe(at)?pe(at):at};case 2:return xe=ke[0],Re=ke[1],pe=Ge[0],we=Ge[1],function(at){return xe(at)?pe(at):Re(at)?we(at):at};default:return function(at){for(let rt=0;rt<Ge.length;rt++)if(ke[rt](at))return Ge[rt](at);return at}}}function q(oe){function xe(Re,pe,we){if(pe<Re.length){const ke=Re[pe];let Ge=[];if(ke.restParam){const Ve=ke.types.filter(P);Ve.length<ke.types.length&&Ge.push({types:Ve,name:"..."+Ve.map(at=>at.name).join("|"),hasAny:Ve.some(at=>at.isAny),hasConversion:!1,restParam:!0}),Ge.push(ke)}else Ge=ke.types.map(function(Ve){return{types:[Ve],name:Ve.name,hasAny:Ve.isAny,hasConversion:Ve.conversion,restParam:!1}});return he(Ge,function(Ve){return xe(Re,pe+1,we.concat([Ve]))})}else return[we]}return xe(oe,0,[])}function U(oe,xe){const Re=Math.max(oe.length,xe.length);for(let Ve=0;Ve<Re;Ve++){const at=R(oe,Ve),rt=R(xe,Ve);let ln=!1,xn;for(xn of rt)if(at.has(xn)){ln=!0;break}if(!ln)return!1}const pe=oe.length,we=xe.length,ke=T(oe),Ge=T(xe);return ke?Ge?pe===we:we>=pe:Ge?pe>=we:pe===we}function Y(oe){return oe.map(xe=>Ke(xe)?Je(xe.referToSelf.callback):ut(xe)?Pe(xe.referTo.references,xe.referTo.callback):xe)}function H(oe,xe,Re){const pe=[];let we;for(we of oe){let ke=Re[we];if(typeof ke!="number")throw new TypeError('No definition for referenced signature "'+we+'"');if(ke=xe[ke],typeof ke!="function")return!1;pe.push(ke)}return pe}function X(oe,xe,Re){const pe=Y(oe),we=new Array(pe.length).fill(!1);let ke=!0;for(;ke;){ke=!1;let Ge=!0;for(let Ve=0;Ve<pe.length;++Ve){if(we[Ve])continue;const at=pe[Ve];if(Ke(at))pe[Ve]=at.referToSelf.callback(Re),pe[Ve].referToSelf=at.referToSelf,we[Ve]=!0,Ge=!1;else if(ut(at)){const rt=H(at.referTo.references,pe,xe);rt?(pe[Ve]=at.referTo.callback.apply(this,rt),pe[Ve].referTo=at.referTo,we[Ve]=!0,Ge=!1):ke=!0}}if(Ge&&ke)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return pe}function ee(oe){const xe=/\bthis(\(|\.signatures\b)/;Object.keys(oe).forEach(Re=>{const pe=oe[Re];if(xe.test(pe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function le(oe,xe){if(s.createCount++,Object.keys(xe).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&ee(xe);const Re=[],pe=[],we={},ke=[];let Ge;for(Ge in xe){if(!Object.prototype.hasOwnProperty.call(xe,Ge))continue;const en=E(Ge);if(!en)continue;Re.forEach(function(Ei){if(U(Ei,en))throw new TypeError('Conflicting signatures "'+g(Ei)+'" and "'+g(en)+'".')}),Re.push(en);const Bi=pe.length;pe.push(xe[Ge]);const mo=en.map(b);let ps;for(ps of q(mo)){const Ei=g(ps);ke.push({params:ps,name:Ei,fn:Bi}),ps.every(su=>!su.hasConversion)&&(we[Ei]=Bi)}}ke.sort(W);const Ve=X(pe,we,Is);let at;for(at in we)Object.prototype.hasOwnProperty.call(we,at)&&(we[at]=Ve[we[at]]);const rt=[],ln=new Map;for(at of ke)ln.has(at.name)||(at.fn=Ve[at.fn],rt.push(at),ln.set(at.name,at));const xn=rt[0]&&rt[0].params.length<=2&&!T(rt[0].params),rn=rt[1]&&rt[1].params.length<=2&&!T(rt[1].params),bn=rt[2]&&rt[2].params.length<=2&&!T(rt[2].params),Hn=rt[3]&&rt[3].params.length<=2&&!T(rt[3].params),$n=rt[4]&&rt[4].params.length<=2&&!T(rt[4].params),Kr=rt[5]&&rt[5].params.length<=2&&!T(rt[5].params),Lr=xn&&rn&&bn&&Hn&&$n&&Kr;for(let en=0;en<rt.length;++en)rt[en].test=S(rt[en].params);const Br=xn?C(rt[0].params[0]):Gf,mi=rn?C(rt[1].params[0]):Gf,Er=bn?C(rt[2].params[0]):Gf,Do=Hn?C(rt[3].params[0]):Gf,iu=$n?C(rt[4].params[0]):Gf,hs=Kr?C(rt[5].params[0]):Gf,Ks=xn?C(rt[0].params[1]):Gf,Tr=rn?C(rt[1].params[1]):Gf,li=bn?C(rt[2].params[1]):Gf,Dr=Hn?C(rt[3].params[1]):Gf,no=$n?C(rt[4].params[1]):Gf,vr=Kr?C(rt[5].params[1]):Gf;for(let en=0;en<rt.length;++en)rt[en].implementation=Z(rt[en].params,rt[en].fn);const gi=xn?rt[0].implementation:oE,ko=rn?rt[1].implementation:oE,po=bn?rt[2].implementation:oE,Ko=Hn?rt[3].implementation:oE,Ea=$n?rt[4].implementation:oE,Sc=Kr?rt[5].implementation:oE,pr=xn?rt[0].params.length:-1,ou=rn?rt[1].params.length:-1,Ri=bn?rt[2].params.length:-1,ks=Hn?rt[3].params.length:-1,Xo=$n?rt[4].params.length:-1,Df=Kr?rt[5].params.length:-1,Ac=Lr?6:0,Dl=rt.length,kl=rt.map(en=>en.test),Yu=rt.map(en=>en.implementation),Ku=function(){for(let Bi=Ac;Bi<Dl;Bi++)if(kl[Bi](arguments))return Yu[Bi].apply(this,arguments);return s.onMismatch(oe,arguments,rt)};function Is(en,Bi){return arguments.length===pr&&Br(en)&&Ks(Bi)?gi.apply(this,arguments):arguments.length===ou&&mi(en)&&Tr(Bi)?ko.apply(this,arguments):arguments.length===Ri&&Er(en)&&li(Bi)?po.apply(this,arguments):arguments.length===ks&&Do(en)&&Dr(Bi)?Ko.apply(this,arguments):arguments.length===Xo&&iu(en)&&no(Bi)?Ea.apply(this,arguments):arguments.length===Df&&hs(en)&&vr(Bi)?Sc.apply(this,arguments):Ku.apply(this,arguments)}try{Object.defineProperty(Is,"name",{value:oe})}catch{}return Is.signatures=we,Is._typedFunctionData={signatures:rt,signatureMap:ln},Is}function Ee(oe,xe,Re){throw B(oe,xe,Re)}function be(oe){return Oe(oe,0,oe.length-1)}function Ce(oe){return oe[oe.length-1]}function Oe(oe,xe,Re){return Array.prototype.slice.call(oe,xe,Re)}function me(oe,xe){for(let Re=0;Re<oe.length;Re++)if(xe(oe[Re]))return oe[Re]}function he(oe,xe){return Array.prototype.concat.apply([],oe.map(xe))}function Fe(){const oe=be(arguments).map(Re=>g(E(Re))),xe=Ce(arguments);if(typeof xe!="function")throw new TypeError("Callback function expected as last argument");return Pe(oe,xe)}function Pe(oe,xe){return{referTo:{references:oe,callback:xe}}}function Je(oe){if(typeof oe!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:oe}}}function ut(oe){return oe&&typeof oe.referTo=="object"&&Array.isArray(oe.referTo.references)&&typeof oe.referTo.callback=="function"}function Ke(oe){return oe&&typeof oe.referToSelf=="object"&&typeof oe.referToSelf.callback=="function"}function tt(oe,xe){if(!oe)return xe;if(xe&&xe!==oe){const Re=new Error("Function names do not match (expected: "+oe+", actual: "+xe+")");throw Re.data={actual:xe,expected:oe},Re}return oe}function pt(oe){let xe;for(const Re in oe)Object.prototype.hasOwnProperty.call(oe,Re)&&(d(oe[Re])||typeof oe[Re].signature=="string")&&(xe=tt(xe,oe[Re].name));return xe}function Dt(oe,xe){let Re;for(Re in xe)if(Object.prototype.hasOwnProperty.call(xe,Re)){if(Re in oe&&xe[Re]!==oe[Re]){const pe=new Error('Signature "'+Re+'" is defined twice');throw pe.data={signature:Re,sourceFunction:xe[Re],destFunction:oe[Re]},pe}oe[Re]=xe[Re]}}const St=s;s=function(oe){const xe=typeof oe=="string",Re=xe?1:0;let pe=xe?oe:"";const we={};for(let ke=Re;ke<arguments.length;++ke){const Ge=arguments[ke];let Ve={},at;if(typeof Ge=="function"?(at=Ge.name,typeof Ge.signature=="string"?Ve[Ge.signature]=Ge:d(Ge)&&(Ve=Ge.signatures)):e(Ge)&&(Ve=Ge,xe||(at=pt(Ge))),Object.keys(Ve).length===0){const rt=new TypeError("Argument to 'typed' at index "+ke+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw rt.data={index:ke,argument:Ge},rt}xe||(pe=tt(pe,at)),Dt(we,Ve)}return le(pe||"",we)},s.create=tCe,s.createCount=St.createCount,s.onMismatch=Ee,s.throwMismatchError=Ee,s.createError=B,s.clear=l,s.clearConversions=c,s.addTypes=u,s._findType=a,s.referTo=Fe,s.referToSelf=Je,s.convert=p,s.findSignature=h,s.find=m,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(oe,xe){let Re="any";xe!==!1&&r.has("Object")&&(Re="Object"),s.addTypes([oe],Re)};function $t(oe){if(!oe||typeof oe.from!="string"||typeof oe.to!="string"||typeof oe.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(oe.to===oe.from)throw new SyntaxError('Illegal to define conversion from "'+oe.from+'" to itself.')}return s.addConversion=function(oe){let xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};$t(oe);const Re=a(oe.to),pe=Re.conversionsTo.find(we=>we.from===oe.from);if(pe)if(xe&&xe.override)s.removeConversion({from:pe.from,to:oe.to,convert:pe.convert});else throw new Error('There is already a conversion from "'+oe.from+'" to "'+Re.name+'"');Re.conversionsTo.push({from:oe.from,convert:oe.convert,index:o++})},s.addConversions=function(oe,xe){oe.forEach(Re=>s.addConversion(Re,xe))},s.removeConversion=function(oe){$t(oe);const xe=a(oe.to),Re=me(xe.conversionsTo,we=>we.from===oe.from);if(!Re)throw new Error("Attempt to remove nonexistent conversion from "+oe.from+" to "+oe.to);if(Re.convert!==oe.convert)throw new Error("Conversion to remove does not match existing conversion");const pe=xe.conversionsTo.indexOf(Re);xe.conversionsTo.splice(pe,1)},s.resolve=function(oe,xe){if(!d(oe))throw new TypeError(jle);const Re=oe._typedFunctionData.signatures;for(let pe=0;pe<Re.length;++pe)if(Re[pe].test(xe))return Re[pe];return null},s}const BE=tCe();function Es(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function M7(e,t,n){var r={2:"0b",8:"0o",16:"0x"},i=r[t],o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Es(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Es(e))throw new Error("Value must be an integer");e<0&&(e=e+2**n),o="i".concat(n)}var s="";return e<0&&(e=-e,s="-"),"".concat(s).concat(i).concat(e.toString(t)).concat(o)}function PV(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=nCe(t);switch(n){case"fixed":return ybt(e,r);case"exponential":return rCe(e,r);case"engineering":return gbt(e,r);case"bin":return M7(e,2,i);case"oct":return M7(e,8,i);case"hex":return M7(e,16,i);case"auto":return vbt(e,r,t).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],s=arguments[4];return o!=="."?o+s:s});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function nCe(e){var t="auto",n,r;if(e!==void 0)if(Vi(e))n=e;else if(Vo(e))n=e.toNumber();else if(SX(e))e.precision!==void 0&&(n=zle(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(r=zle(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:n,wordSize:r}}function j8(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),o=r.indexOf(".");i+=o!==-1?o-1:r.length-1;var s=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return s.length===0&&(s.push(0),i++),{sign:n,coefficients:s,exponent:i}}function gbt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=j8(e),r=z8(n,t),i=r.exponent,o=r.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Vi(t))for(;t>o.length||i-s+1>o.length;)o.push(0);else for(var a=Math.abs(i-s)-(o.length-1),u=0;u<a;u++)o.push(0);for(var l=Math.abs(i-s),c=1;l>0;)c++,l--;var f=o.slice(c).join(""),d=Vi(t)&&f.length||f.match(/[1-9]/)?"."+f:"",h=o.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+s.toString();return r.sign+h}function ybt(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=j8(e),r=typeof t=="number"?z8(n,n.exponent+1+t):n,i=r.coefficients,o=r.exponent+1,s=o+(t||0);return i.length<s&&(i=i.concat(s2(s-i.length))),o<0&&(i=s2(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),r.sign+i.join("")}function rCe(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=j8(e),r=t?z8(n,t):n,i=r.coefficients,o=r.exponent;i.length<t&&(i=i.concat(s2(t-i.length)));var s=i.shift();return r.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function vbt(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=Ule(n==null?void 0:n.lowerExp,-3),i=Ule(n==null?void 0:n.upperExp,5),o=j8(e),s=t?z8(o,t):o;if(s.exponent<r||s.exponent>=i)return rCe(e,t);var a=s.coefficients,u=s.exponent;a.length<t&&(a=a.concat(s2(t-a.length))),a=a.concat(s2(u-a.length+1+(a.length<t?t-a.length:0))),a=s2(-u).concat(a);var l=u>0?u:0;return l<a.length-1&&a.splice(l+1,0,"."),s.sign+a.join("")}function z8(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t){var i=r.splice(t,r.length-t);if(i[0]>=5){var o=t-1;for(r[o]++;r[o]===10;)r.pop(),o===0&&(r.unshift(0),n.exponent++,o++),o--,r[o]++}}return n}function s2(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}function bbt(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function RF(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)}function zle(e,t){if(Vi(e))return e;if(Vo(e))return e.toNumber();t()}function Ule(e,t){return Vi(e)?e:Vo(e)?e.toNumber():t}function Nn(e,t,n,r){function i(o){var s=hbt(o,t.map(_bt));return xbt(e,t,o),n(s)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function xbt(e,t,n){var r=t.filter(o=>!wbt(o)).every(o=>n[o]!==void 0);if(!r){var i=t.filter(o=>n[o]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function wbt(e){return e&&e[0]==="?"}function _bt(e){return e&&e[0]==="?"?e.slice(1):e}function Ebt(e,t){if(oCe(e)&&iCe(e,t))return e[t];throw typeof e[t]=="function"&&Sbt(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Tbt(e,t,n){if(oCe(e)&&iCe(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function Cbt(e,t){return t in e}function iCe(e,t){return!e||typeof e!="object"?!1:Lk(Abt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Sbt(e,t){return e==null||typeof e[t]!="function"||Lk(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Lk(Dbt,t)?!0:!(t in Object.prototype||t in Function.prototype)}function oCe(e){return typeof e=="object"&&e&&e.constructor===Object}var Abt={length:!0,name:!0},Dbt={toString:!0,valueOf:!0,toLocaleString:!0};class kbt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(t){return Ebt(this.wrappedObject,t)}set(t,n){return Tbt(this.wrappedObject,t,n),this}has(t){return Cbt(this.wrappedObject,t)}entries(){return Ibt(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var n of this.keys())t(this.get(n),n,this)}delete(t){delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function Ibt(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function Rbt(e){return e?e instanceof Map||e instanceof kbt||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var sCe=function(){return sCe=BE.create,BE},Nbt=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Pbt=Nn("typed",Nbt,function(t){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:o}=t,s=sCe();return s.clear(),s.addTypes([{name:"number",test:Vi},{name:"Complex",test:QTe},{name:"BigNumber",test:Vo},{name:"bigint",test:$vt},{name:"Fraction",test:JTe},{name:"Unit",test:ZTe},{name:"identifier",test:a=>/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:k0},{name:"Chain",test:fbt},{name:"Array",test:wo},{name:"Matrix",test:To},{name:"DenseMatrix",test:Lvt},{name:"SparseMatrix",test:Bvt},{name:"Range",test:jvt},{name:"Index",test:CX},{name:"boolean",test:zvt},{name:"ResultSet",test:Uvt},{name:"Help",test:Vvt},{name:"function",test:Hvt},{name:"Date",test:qvt},{name:"RegExp",test:Wvt},{name:"null",test:Gvt},{name:"undefined",test:Yvt},{name:"AccessorNode",test:Kvt},{name:"ArrayNode",test:Xvt},{name:"AssignmentNode",test:Qvt},{name:"BlockNode",test:Jvt},{name:"ConditionalNode",test:Zvt},{name:"ConstantNode",test:ebt},{name:"FunctionNode",test:nbt},{name:"FunctionAssignmentNode",test:tbt},{name:"IndexNode",test:rbt},{name:"Node",test:ibt},{name:"ObjectNode",test:obt},{name:"OperatorNode",test:sbt},{name:"ParenthesisNode",test:abt},{name:"RangeNode",test:ubt},{name:"RelationalNode",test:lbt},{name:"SymbolNode",test:cbt},{name:"Map",test:Rbt},{name:"Object",test:SX}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(u){if(n||H3(u),bbt(u)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+u+"). Use function bignumber(x) to convert to BigNumber.");return new n(u)}},{from:"number",to:"Complex",convert:function(u){return r||q3(u),new r(u,0)}},{from:"BigNumber",to:"Complex",convert:function(u){return r||q3(u),new r(u.toNumber(),0)}},{from:"bigint",to:"number",convert:function(u){if(u>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+u+")");return Number(u)}},{from:"bigint",to:"BigNumber",convert:function(u){return n||H3(u),new n(u.toString())}},{from:"bigint",to:"Fraction",convert:function(u){return o||W3(u),new o(u.toString())}},{from:"Fraction",to:"BigNumber",convert:function(u){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(u){return r||q3(u),new r(u.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(u){o||W3(u);var l=new o(u);if(l.valueOf()!==u)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+u+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(u){var l=Number(u);if(isNaN(l))throw new Error('Cannot convert "'+u+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(u){n||H3(u);try{return new n(u)}catch{throw new Error('Cannot convert "'+u+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(u){try{return BigInt(u)}catch{throw new Error('Cannot convert "'+u+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(u){o||W3(u);try{return new o(u)}catch{throw new Error('Cannot convert "'+u+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(u){r||q3(u);try{return new r(u)}catch{throw new Error('Cannot convert "'+u+'" to Complex')}}},{from:"boolean",to:"number",convert:function(u){return+u}},{from:"boolean",to:"BigNumber",convert:function(u){return n||H3(u),new n(+u)}},{from:"boolean",to:"bigint",convert:function(u){return BigInt(+u)}},{from:"boolean",to:"Fraction",convert:function(u){return o||W3(u),new o(+u)}},{from:"boolean",to:"string",convert:function(u){return String(u)}},{from:"Array",to:"Matrix",convert:function(u){return i||Obt(),new i(u)}},{from:"Matrix",to:"Array",convert:function(u){return u.valueOf()}}]),s.onMismatch=(a,u,l)=>{var c=s.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&W2(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},s.onMismatch=(a,u,l)=>{var c=s.createError(a,u,l);if(["wrongType","mismatch"].includes(c.data.category)&&u.length===1&&W2(u[0])&&l.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},s});function H3(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function q3(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function Obt(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function W3(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var OV=9e15,hv=1e9,FV="0123456789abcdef",NF="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PF="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",MV={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:OV,crypto:!1},aCe,H0,Wn=!0,U8="[DecimalError] ",P1=U8+"Invalid argument: ",uCe=U8+"Precision limit exceeded",lCe=U8+"crypto unavailable",cCe="[object Decimal]",Uu=Math.floor,Ms=Math.pow,Fbt=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Mbt=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$bt=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,fCe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_h=1e7,Mn=7,Lbt=9007199254740991,Bbt=NF.length-1,$V=PF.length-1,Ct={toStringTag:cCe};Ct.absoluteValue=Ct.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Cn(e)};Ct.ceil=function(){return Cn(new this.constructor(this),this.e+1,2)};Ct.clampedTo=Ct.clamp=function(e,t){var n,r=this,i=r.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(P1+t);return n=r.cmp(e),n<0?e:r.cmp(t)>0?t:new i(r)};Ct.comparedTo=Ct.cmp=function(e){var t,n,r,i,o=this,s=o.d,a=(e=new o.constructor(e)).d,u=o.s,l=e.s;if(!s||!a)return!u||!l?NaN:u!==l?u:s===a?0:!s^u<0?1:-1;if(!s[0]||!a[0])return s[0]?u:a[0]?-l:0;if(u!==l)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(r=s.length,i=a.length,t=0,n=r<i?r:i;t<n;++t)if(s[t]!==a[t])return s[t]>a[t]^u<0?1:-1;return r===i?0:r>i^u<0?1:-1};Ct.cosine=Ct.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Mn,r.rounding=1,n=jbt(r,gCe(r,n)),r.precision=e,r.rounding=t,Cn(H0==2||H0==3?n.neg():n,e,t,!0)):new r(1):new r(NaN)};Ct.cubeRoot=Ct.cbrt=function(){var e,t,n,r,i,o,s,a,u,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Wn=!1,o=c.s*Ms(c.s*c,1/3),!o||Math.abs(o)==1/0?(n=Ga(c.d),e=c.e,(o=(e-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=Ms(n,1/3),e=Uu((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?n="5e"+e:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+e),r=new f(n),r.s=c.s):r=new f(o.toString()),s=(e=f.precision)+3;;)if(a=r,u=a.times(a).times(a),l=u.plus(c),r=Mi(l.plus(c).times(a),l.plus(u),s+2,1),Ga(a.d).slice(0,s)===(n=Ga(r.d)).slice(0,s))if(n=n.slice(s-3,s+1),n=="9999"||!i&&n=="4999"){if(!i&&(Cn(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}s+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Cn(r,e+1,1),t=!r.times(r).times(r).eq(c));break}return Wn=!0,Cn(r,e,f.rounding,t)};Ct.decimalPlaces=Ct.dp=function(){var e,t=this.d,n=NaN;if(t){if(e=t.length-1,n=(e-Uu(this.e/Mn))*Mn,e=t[e],e)for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n};Ct.dividedBy=Ct.div=function(e){return Mi(this,new this.constructor(e))};Ct.dividedToIntegerBy=Ct.divToInt=function(e){var t=this,n=t.constructor;return Cn(Mi(t,new n(e),0,1,1),n.precision,n.rounding)};Ct.equals=Ct.eq=function(e){return this.cmp(e)===0};Ct.floor=function(){return Cn(new this.constructor(this),this.e+1,3)};Ct.greaterThan=Ct.gt=function(e){return this.cmp(e)>0};Ct.greaterThanOrEqualTo=Ct.gte=function(e){var t=this.cmp(e);return t==1||t===0};Ct.hyperbolicCosine=Ct.cosh=function(){var e,t,n,r,i,o=this,s=o.constructor,a=new s(1);if(!o.isFinite())return new s(o.s?1/0:NaN);if(o.isZero())return a;n=s.precision,r=s.rounding,s.precision=n+Math.max(o.e,o.sd())+4,s.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),t=(1/H8(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=Y2(s,1,o.times(t),new s(1),!0);for(var u,l=e,c=new s(8);l--;)u=o.times(o),o=a.minus(u.times(c.minus(u.times(c))));return Cn(o,s.precision=n,s.rounding=r,!0)};Ct.hyperbolicSine=Ct.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,r=i.d.length,r<3)i=Y2(o,2,i,i,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,i=i.times(1/H8(5,e)),i=Y2(o,2,i,i,!0);for(var s,a=new o(5),u=new o(16),l=new o(20);e--;)s=i.times(i),i=i.times(a.plus(s.times(u.times(s).plus(l))))}return o.precision=t,o.rounding=n,Cn(i,t,n,!0)};Ct.hyperbolicTangent=Ct.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,Mi(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)};Ct.inverseCosine=Ct.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return r!==-1?r===0?t.isNeg()?hh(n,i,o):new n(0):new n(NaN):t.isZero()?hh(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=hh(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))};Ct.inverseHyperbolicCosine=Ct.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Wn=!1,n=n.times(n).minus(1).sqrt().plus(n),Wn=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)};Ct.inverseHyperbolicSine=Ct.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Wn=!1,n=n.times(n).plus(1).sqrt().plus(n),Wn=!0,r.precision=e,r.rounding=t,n.ln())};Ct.inverseHyperbolicTangent=Ct.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?Cn(new o(i),e,t,!0):(o.precision=n=r-i.e,i=Mi(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)};Ct.inverseSine=Ct.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,t!==-1?t===0?(e=hh(o,n+4,r).times(.5),e.s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))};Ct.inverseTangent=Ct.atan=function(){var e,t,n,r,i,o,s,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=$V)return s=hh(c,f+4,d).times(.25),s.s=l.s,s}else{if(!l.s)return new c(NaN);if(f+4<=$V)return s=hh(c,f+4,d).times(.5),s.s=l.s,s}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/Mn+2|0),e=n;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Wn=!1,t=Math.ceil(a/Mn),r=1,u=l.times(l),s=new c(l),i=l;e!==-1;)if(i=i.times(u),o=s.minus(i.div(r+=2)),i=i.times(u),s=o.plus(i.div(r+=2)),s.d[t]!==void 0)for(e=t;s.d[e]===o.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),Wn=!0,Cn(s,c.precision=f,c.rounding=d,!0)};Ct.isFinite=function(){return!!this.d};Ct.isInteger=Ct.isInt=function(){return!!this.d&&Uu(this.e/Mn)>this.d.length-2};Ct.isNaN=function(){return!this.s};Ct.isNegative=Ct.isNeg=function(){return this.s<0};Ct.isPositive=Ct.isPos=function(){return this.s>0};Ct.isZero=function(){return!!this.d&&this.d[0]===0};Ct.lessThan=Ct.lt=function(e){return this.cmp(e)<0};Ct.lessThanOrEqualTo=Ct.lte=function(e){return this.cmp(e)<1};Ct.logarithm=Ct.log=function(e){var t,n,r,i,o,s,a,u,l=this,c=l.constructor,f=c.precision,d=c.rounding,h=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),n=e.d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(t)if(n.length>1)o=!0;else{for(i=n[0];i%10===0;)i/=10;o=i!==1}if(Wn=!1,a=f+h,s=Xy(l,a),r=t?OF(c,a+10):Xy(e,a),u=Mi(s,r,a,1),Bk(u.d,i=f,d))do if(a+=10,s=Xy(l,a),r=t?OF(c,a+10):Xy(e,a),u=Mi(s,r,a,1),!o){+Ga(u.d).slice(i+1,i+15)+1==1e14&&(u=Cn(u,f+1,0));break}while(Bk(u.d,i+=10,d));return Wn=!0,Cn(u,f,d)};Ct.minus=Ct.sub=function(e){var t,n,r,i,o,s,a,u,l,c,f,d,h=this,m=h.constructor;if(e=new m(e),!h.d||!e.d)return!h.s||!e.s?e=new m(NaN):h.d?e.s=-e.s:e=new m(e.d||h.s!==e.s?h:NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(l=h.d,d=e.d,a=m.precision,u=m.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else if(l[0])e=new m(h);else return new m(u===3?-0:0);return Wn?Cn(e,a,u):e}if(n=Uu(e.e/Mn),c=Uu(h.e/Mn),l=l.slice(),o=c-n,o){for(f=o<0,f?(t=l,o=-o,s=d.length):(t=d,n=c,s=l.length),r=Math.max(Math.ceil(a/Mn),s)+2,o>r&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for(r=l.length,s=d.length,f=r<s,f&&(s=r),r=0;r<s;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}o=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),s=l.length,r=d.length-s;r>0;--r)l[s++]=0;for(r=d.length;r>o;){if(l[--r]<d[r]){for(i=r;i&&l[--i]===0;)l[i]=_h-1;--l[i],l[r]+=_h}l[r]-=d[r]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=V8(l,n),Wn?Cn(e,a,u):e):new m(u===3?-0:0)};Ct.modulo=Ct.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?Cn(new r(n),r.precision,r.rounding):(Wn=!1,r.modulo==9?(t=Mi(n,e.abs(),0,3,1),t.s*=e.s):t=Mi(n,e,0,r.modulo,1),t=t.times(e),Wn=!0,n.minus(t))};Ct.naturalExponential=Ct.exp=function(){return LV(this)};Ct.naturalLogarithm=Ct.ln=function(){return Xy(this)};Ct.negated=Ct.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Cn(e)};Ct.plus=Ct.add=function(e){var t,n,r,i,o,s,a,u,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return!f.s||!e.s?e=new d(NaN):f.d||(e=new d(e.d||f.s===e.s?f:NaN)),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),Wn?Cn(e,a,u):e;if(o=Uu(f.e/Mn),r=Uu(e.e/Mn),l=l.slice(),i=o-r,i){for(i<0?(n=l,i=-i,s=c.length):(n=c,r=o,s=l.length),o=Math.ceil(a/Mn),s=o>s?o+1:s+1,i>s&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(s=l.length,i=c.length,s-i<0&&(i=s,n=c,c=l,l=n),t=0;i;)t=(l[--i]=l[i]+c[i]+t)/_h|0,l[i]%=_h;for(t&&(l.unshift(t),++r),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=V8(l,r),Wn?Cn(e,a,u):e};Ct.precision=Ct.sd=function(e){var t,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(P1+e);return n.d?(t=dCe(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t};Ct.round=function(){var e=this,t=e.constructor;return Cn(new t(e),e.e+1,t.rounding)};Ct.sine=Ct.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Mn,r.rounding=1,n=Ubt(r,gCe(r,n)),r.precision=e,r.rounding=t,Cn(H0>2?n.neg():n,e,t,!0)):new r(NaN)};Ct.squareRoot=Ct.sqrt=function(){var e,t,n,r,i,o,s=this,a=s.d,u=s.e,l=s.s,c=s.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);for(Wn=!1,l=Math.sqrt(+s),l==0||l==1/0?(t=Ga(a),(t.length+u)%2==0&&(t+="0"),l=Math.sqrt(t),u=Uu((u+1)/2)-(u<0||u%2),l==1/0?t="5e"+u:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+u),r=new c(t)):r=new c(l.toString()),n=(u=c.precision)+3;;)if(o=r,r=o.plus(Mi(s,o,n+2,1)).times(.5),Ga(o.d).slice(0,n)===(t=Ga(r.d)).slice(0,n))if(t=t.slice(n-3,n+1),t=="9999"||!i&&t=="4999"){if(!i&&(Cn(o,u+1,0),o.times(o).eq(s))){r=o;break}n+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Cn(r,u+1,1),e=!r.times(r).eq(s));break}return Wn=!0,Cn(r,u,c.rounding,e)};Ct.tangent=Ct.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,n=n.sin(),n.s=1,n=Mi(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,Cn(H0==2||H0==4?n.neg():n,e,t,!0)):new r(NaN)};Ct.times=Ct.mul=function(e){var t,n,r,i,o,s,a,u,l,c=this,f=c.constructor,d=c.d,h=(e=new f(e)).d;if(e.s*=c.s,!d||!d[0]||!h||!h[0])return new f(!e.s||d&&!d[0]&&!h||h&&!h[0]&&!d?NaN:!d||!h?e.s/0:e.s*0);for(n=Uu(c.e/Mn)+Uu(e.e/Mn),u=d.length,l=h.length,u<l&&(o=d,d=h,h=o,s=u,u=l,l=s),o=[],s=u+l,r=s;r--;)o.push(0);for(r=l;--r>=0;){for(t=0,i=u+r;i>r;)a=o[i]+h[r]*d[i-r-1]+t,o[i--]=a%_h|0,t=a/_h|0;o[i]=(o[i]+t)%_h|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=V8(o,n),Wn?Cn(e,f.precision,f.rounding):e};Ct.toBinary=function(e,t){return AX(this,2,e,t)};Ct.toDecimalPlaces=Ct.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(gc(e,0,hv),t===void 0?t=r.rounding:gc(t,0,8),Cn(n,e+n.e+1,t))};Ct.toExponential=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=pm(r,!0):(gc(e,0,hv),t===void 0?t=i.rounding:gc(t,0,8),r=Cn(new i(r),e+1,t),n=pm(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Ct.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return e===void 0?n=pm(i):(gc(e,0,hv),t===void 0?t=o.rounding:gc(t,0,8),r=Cn(new o(i),e+i.e+1,t),n=pm(r,!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Ct.toFraction=function(e){var t,n,r,i,o,s,a,u,l,c,f,d,h=this,m=h.d,p=h.constructor;if(!m)return new p(h);if(l=n=new p(1),r=u=new p(0),t=new p(r),o=t.e=dCe(m)-h.e-1,s=o%Mn,t.d[0]=Ms(10,s<0?Mn+s:s),e==null)e=o>0?t:l;else{if(a=new p(e),!a.isInt()||a.lt(l))throw Error(P1+a);e=a.gt(t)?o>0?t:l:a}for(Wn=!1,a=new p(Ga(m)),c=p.precision,p.precision=o=m.length*Mn*2;f=Mi(a,t,0,1,1),i=n.plus(f.times(r)),i.cmp(e)!=1;)n=r,r=i,i=l,l=u.plus(f.times(i)),u=i,i=t,t=a.minus(f.times(i)),a=i;return i=Mi(e.minus(n),r,0,1,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=h.s,d=Mi(l,r,o,1).minus(h).abs().cmp(Mi(u,n,o,1).minus(h).abs())<1?[l,r]:[u,n],p.precision=c,Wn=!0,d};Ct.toHexadecimal=Ct.toHex=function(e,t){return AX(this,16,e,t)};Ct.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),e==null){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),t===void 0?t=r.rounding:gc(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(Wn=!1,n=Mi(n,e,0,t,1).times(e),Wn=!0,Cn(n)):(e.s=n.s,n=e),n};Ct.toNumber=function(){return+this};Ct.toOctal=function(e,t){return AX(this,8,e,t)};Ct.toPower=Ct.pow=function(e){var t,n,r,i,o,s,a=this,u=a.constructor,l=+(e=new u(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new u(Ms(+a,l));if(a=new u(a),a.eq(1))return a;if(r=u.precision,o=u.rounding,e.eq(1))return Cn(a,r,o);if(t=Uu(e.e/Mn),t>=e.d.length-1&&(n=l<0?-l:l)<=Lbt)return i=hCe(u,a,n,r),e.s<0?new u(1).div(i):Cn(i,r,o);if(s=a.s,s<0){if(t<e.d.length-1)return new u(NaN);if(e.d[t]&1||(s=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=s,a}return n=Ms(+a,l),t=n==0||!isFinite(n)?Uu(l*(Math.log("0."+Ga(a.d))/Math.LN10+a.e+1)):new u(n+"").e,t>u.maxE+1||t<u.minE-1?new u(t>0?s/0:0):(Wn=!1,u.rounding=a.s=1,n=Math.min(12,(t+"").length),i=LV(e.times(Xy(a,r+n)),r),i.d&&(i=Cn(i,r+5,1),Bk(i.d,r,o)&&(t=r+10,i=Cn(LV(e.times(Xy(a,t+n)),t),t+5,1),+Ga(i.d).slice(r+1,r+15)+1==1e14&&(i=Cn(i,r+1,0)))),i.s=s,Wn=!0,u.rounding=o,Cn(i,r,o))};Ct.toPrecision=function(e,t){var n,r=this,i=r.constructor;return e===void 0?n=pm(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(gc(e,1,hv),t===void 0?t=i.rounding:gc(t,0,8),r=Cn(new i(r),e,t),n=pm(r,e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n};Ct.toSignificantDigits=Ct.toSD=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(gc(e,1,hv),t===void 0?t=r.rounding:gc(t,0,8)),Cn(new r(n),e,t)};Ct.toString=function(){var e=this,t=e.constructor,n=pm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n};Ct.truncated=Ct.trunc=function(){return Cn(new this.constructor(this),this.e+1,1)};Ct.valueOf=Ct.toJSON=function(){var e=this,t=e.constructor,n=pm(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};function Ga(e){var t,n,r,i=e.length-1,o="",s=e[0];if(i>0){for(o+=s,t=1;t<i;t++)r=e[t]+"",n=Mn-r.length,n&&(o+=Fy(n)),o+=r;s=e[t],r=s+"",n=Mn-r.length,n&&(o+=Fy(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return o+s}function gc(e,t,n){if(e!==~~e||e<t||e>n)throw Error(P1+e)}function Bk(e,t,n,r){var i,o,s,a;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=Mn,i=0):(i=Math.ceil((t+1)/Mn),t%=Mn),o=Ms(10,Mn-t),a=e[i]%o|0,r==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),s=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):s=(n<4&&a+1==o||n>3&&a+1==o/2)&&(e[i+1]/o/100|0)==Ms(10,t-2)-1||(a==o/2||a==0)&&(e[i+1]/o/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),s=(r||n<4)&&a==9999||!r&&n>3&&a==4999):s=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(e[i+1]/o/1e3|0)==Ms(10,t-3)-1,s}function DO(e,t,n){for(var r,i=[0],o,s=0,a=e.length;s<a;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=FV.indexOf(e.charAt(s++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function jbt(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?(n=Math.ceil(r/3),i=(1/H8(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),e.precision+=n,t=Y2(e,1,t.times(i),new e(1));for(var o=n;o--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}var Mi=function(){function e(r,i,o){var s,a=0,u=r.length;for(r=r.slice();u--;)s=r[u]*i+a,r[u]=s%o|0,a=s/o|0;return a&&r.unshift(a),r}function t(r,i,o,s){var a,u;if(o!=s)u=o>s?1:-1;else for(a=u=0;a<o;a++)if(r[a]!=i[a]){u=r[a]>i[a]?1:-1;break}return u}function n(r,i,o,s){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*s+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,s,a,u){var l,c,f,d,h,m,p,g,v,b,w,E,T,C,S,I,R,P,M,B,L=r.constructor,z=r.s==i.s?1:-1,G=r.d,W=i.d;if(!G||!G[0]||!W||!W[0])return new L(!r.s||!i.s||(G?W&&G[0]==W[0]:!W)?NaN:G&&G[0]==0||!W?z*0:z/0);for(u?(h=1,c=r.e-i.e):(u=_h,h=Mn,c=Uu(r.e/h)-Uu(i.e/h)),M=W.length,R=G.length,v=new L(z),b=v.d=[],f=0;W[f]==(G[f]||0);f++);if(W[f]>(G[f]||0)&&c--,o==null?(C=o=L.precision,s=L.rounding):a?C=o+(r.e-i.e)+1:C=o,C<0)b.push(1),m=!0;else{if(C=C/h+2|0,f=0,M==1){for(d=0,W=W[0],C++;(f<R||d)&&C--;f++)S=d*u+(G[f]||0),b[f]=S/W|0,d=S%W|0;m=d||f<R}else{for(d=u/(W[0]+1)|0,d>1&&(W=e(W,d,u),G=e(G,d,u),M=W.length,R=G.length),I=M,w=G.slice(0,M),E=w.length;E<M;)w[E++]=0;B=W.slice(),B.unshift(0),P=W[0],W[1]>=u/2&&++P;do d=0,l=t(W,w,M,E),l<0?(T=w[0],M!=E&&(T=T*u+(w[1]||0)),d=T/P|0,d>1?(d>=u&&(d=u-1),p=e(W,d,u),g=p.length,E=w.length,l=t(p,w,g,E),l==1&&(d--,n(p,M<g?B:W,g,u))):(d==0&&(l=d=1),p=W.slice()),g=p.length,g<E&&p.unshift(0),n(w,p,E,u),l==-1&&(E=w.length,l=t(W,w,M,E),l<1&&(d++,n(w,M<E?B:W,E,u))),E=w.length):l===0&&(d++,w=[0]),b[f++]=d,l&&w[0]?w[E++]=G[I]||0:(w=[G[I]],E=1);while((I++<R||w[0]!==void 0)&&C--);m=w[0]!==void 0}b[0]||b.shift()}if(h==1)v.e=c,aCe=m;else{for(f=1,d=b[0];d>=10;d/=10)f++;v.e=f+c*h-1,Cn(v,a?o+v.e+1:o,s,m)}return v}}();function Cn(e,t,n,r){var i,o,s,a,u,l,c,f,d,h=e.constructor;e:if(t!=null){if(f=e.d,!f)return e;for(i=1,a=f[0];a>=10;a/=10)i++;if(o=t-i,o<0)o+=Mn,s=t,c=f[d=0],u=c/Ms(10,i-s-1)%10|0;else if(d=Math.ceil((o+1)/Mn),a=f.length,d>=a)if(r){for(;a++<=d;)f.push(0);c=u=0,i=1,o%=Mn,s=o-Mn+1}else break e;else{for(c=a=f[d],i=1;a>=10;a/=10)i++;o%=Mn,s=o-Mn+i,u=s<0?0:c/Ms(10,i-s-1)%10|0}if(r=r||t<0||f[d+1]!==void 0||(s<0?c:c%Ms(10,i-s-1)),l=n<4?(u||r)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||r||n==6&&(o>0?s>0?c/Ms(10,i-s):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=Ms(10,(Mn-t%Mn)%Mn),e.e=-t||0):f[0]=e.e=0,e;if(o==0?(f.length=d,a=1,d--):(f.length=d+1,a=Ms(10,Mn-o),f[d]=s>0?(c/Ms(10,i-s)%Ms(10,s)|0)*a:0),l)for(;;)if(d==0){for(o=1,s=f[0];s>=10;s/=10)o++;for(s=f[0]+=a,a=1;s>=10;s/=10)a++;o!=a&&(e.e++,f[0]==_h&&(f[0]=1));break}else{if(f[d]+=a,f[d]!=_h)break;f[d--]=0,a=1}for(o=f.length;f[--o]===0;)f.pop()}return Wn&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function pm(e,t,n){if(!e.isFinite())return mCe(e);var r,i=e.e,o=Ga(e.d),s=o.length;return t?(n&&(r=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+Fy(r):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+Fy(-i-1)+o,n&&(r=n-s)>0&&(o+=Fy(r))):i>=s?(o+=Fy(i+1-s),n&&(r=n-i-1)>0&&(o=o+"."+Fy(r))):((r=i+1)<s&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(o+="."),o+=Fy(r))),o}function V8(e,t){var n=e[0];for(t*=Mn;n>=10;n/=10)t++;return t}function OF(e,t,n){if(t>Bbt)throw Wn=!0,n&&(e.precision=n),Error(uCe);return Cn(new e(NF),t,1,!0)}function hh(e,t,n){if(t>$V)throw Error(uCe);return Cn(new e(PF),t,n,!0)}function dCe(e){var t=e.length-1,n=t*Mn+1;if(t=e[t],t){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function Fy(e){for(var t="";e--;)t+="0";return t}function hCe(e,t,n,r){var i,o=new e(1),s=Math.ceil(r/Mn+4);for(Wn=!1;;){if(n%2&&(o=o.times(t),Hle(o.d,s)&&(i=!0)),n=Uu(n/2),n===0){n=o.d.length-1,i&&o.d[n]===0&&++o.d[n];break}t=t.times(t),Hle(t.d,s)}return Wn=!0,o}function Vle(e){return e.d[e.d.length-1]&1}function pCe(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;)if(r=new e(t[o]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function LV(e,t){var n,r,i,o,s,a,u,l=0,c=0,f=0,d=e.constructor,h=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(Wn=!1,u=m):u=t,a=new d(.03125);e.e>-2;)e=e.times(a),f+=5;for(r=Math.log(Ms(2,f))/Math.LN10*2+5|0,u+=r,n=o=s=new d(1),d.precision=u;;){if(o=Cn(o.times(e),u,1),n=n.times(++c),a=s.plus(Mi(o,n,u,1)),Ga(a.d).slice(0,u)===Ga(s.d).slice(0,u)){for(i=f;i--;)s=Cn(s.times(s),u,1);if(t==null)if(l<3&&Bk(s.d,u-r,h,l))d.precision=u+=10,n=o=a=new d(1),c=0,l++;else return Cn(s,d.precision=m,h,Wn=!0);else return d.precision=m,s}s=a}}function Xy(e,t){var n,r,i,o,s,a,u,l,c,f,d,h=1,m=10,p=e,g=p.d,v=p.constructor,b=v.rounding,w=v.precision;if(p.s<0||!g||!g[0]||!p.e&&g[0]==1&&g.length==1)return new v(g&&!g[0]?-1/0:p.s!=1?NaN:g?0:p);if(t==null?(Wn=!1,c=w):c=t,v.precision=c+=m,n=Ga(g),r=n.charAt(0),Math.abs(o=p.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(e),n=Ga(p.d),r=n.charAt(0),h++;o=p.e,r>1?(p=new v("0."+n),o++):p=new v(r+"."+n.slice(1))}else return l=OF(v,c+2,w).times(o+""),p=Xy(new v(r+"."+n.slice(1)),c-m).plus(l),v.precision=w,t==null?Cn(p,w,b,Wn=!0):p;for(f=p,u=s=p=Mi(p.minus(1),p.plus(1),c,1),d=Cn(p.times(p),c,1),i=3;;){if(s=Cn(s.times(d),c,1),l=u.plus(Mi(s,new v(i),c,1)),Ga(l.d).slice(0,c)===Ga(u.d).slice(0,c))if(u=u.times(2),o!==0&&(u=u.plus(OF(v,c+2,w).times(o+""))),u=Mi(u,new v(h),c,1),t==null)if(Bk(u.d,c-m,b,a))v.precision=c+=m,l=s=p=Mi(f.minus(1),f.plus(1),c,1),d=Cn(p.times(p),c,1),i=a=1;else return Cn(u,v.precision=w,b,Wn=!0);else return v.precision=w,u;u=l,i+=2}}function mCe(e){return String(e.s*e.s/0)}function BV(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;r++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(r,i),t){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Mn,n<0&&(r+=Mn),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Mn;r<i;)e.d.push(+t.slice(r,r+=Mn));t=t.slice(r),r=Mn-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),Wn&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function zbt(e,t){var n,r,i,o,s,a,u,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),fCe.test(t))return BV(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Mbt.test(t))n=16,t=t.toLowerCase();else if(Fbt.test(t))n=2;else if($bt.test(t))n=8;else throw Error(P1+t);for(o=t.search(/p/i),o>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),s=o>=0,r=e.constructor,s&&(t=t.replace(".",""),a=t.length,o=a-o,i=hCe(r,new r(n),o,o*2)),l=DO(t,n,_h),c=l.length-1,o=c;l[o]===0;--o)l.pop();return o<0?new r(e.s*0):(e.e=V8(l,c),e.d=l,Wn=!1,s&&(e=Mi(e,i,a*4)),u&&(e=e.times(Math.abs(u)<54?Ms(2,u):K2.pow(2,u))),Wn=!0,e)}function Ubt(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Y2(e,2,t,t);n=1.4*Math.sqrt(r),n=n>16?16:n|0,t=t.times(1/H8(5,n)),t=Y2(e,2,t,t);for(var i,o=new e(5),s=new e(16),a=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(s.times(i).minus(a))));return t}function Y2(e,t,n,r,i){var o,s,a,u,l=e.precision,c=Math.ceil(l/Mn);for(Wn=!1,u=n.times(n),a=new e(r);;){if(s=Mi(a.times(u),new e(t++*t++),l,1),a=i?r.plus(s):r.minus(s),r=Mi(s.times(u),new e(t++*t++),l,1),s=a.plus(r),s.d[c]!==void 0){for(o=c;s.d[o]===a.d[o]&&o--;);if(o==-1)break}o=a,a=r,r=s,s=o}return Wn=!0,s.d.length=c+1,s}function H8(e,t){for(var n=e;--t;)n*=e;return n}function gCe(e,t){var n,r=t.s<0,i=hh(e,e.precision,1),o=i.times(.5);if(t=t.abs(),t.lte(o))return H0=r?4:1,t;if(n=t.divToInt(i),n.isZero())H0=r?3:2;else{if(t=t.minus(n.times(i)),t.lte(o))return H0=Vle(n)?r?2:3:r?4:1,t;H0=Vle(n)?r?1:4:r?3:2}return t.minus(i).abs()}function AX(e,t,n,r){var i,o,s,a,u,l,c,f,d,h=e.constructor,m=n!==void 0;if(m?(gc(n,1,hv),r===void 0?r=h.rounding:gc(r,0,8)):(n=h.precision,r=h.rounding),!e.isFinite())c=mCe(e);else{for(c=pm(e),s=c.indexOf("."),m?(i=2,t==16?n=n*4-3:t==8&&(n=n*3-2)):i=t,s>=0&&(c=c.replace(".",""),d=new h(1),d.e=c.length-s,d.d=DO(pm(d),10,i),d.e=d.d.length),f=DO(c,10,i),o=u=f.length;f[--u]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(s<0?o--:(e=new h(e),e.d=f,e.e=o,e=Mi(e,d,n,r,0,i),f=e.d,o=e.e,l=aCe),s=f[n],a=i/2,l=l||f[n+1]!==void 0,l=r<4?(s!==void 0||l)&&(r===0||r===(e.s<0?3:2)):s>a||s===a&&(r===4||l||r===6&&f[n-1]&1||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++o,f.unshift(1));for(u=f.length;!f[u-1];--u);for(s=0,c="";s<u;s++)c+=FV.charAt(f[s]);if(m){if(u>1)if(t==16||t==8){for(s=t==16?4:3,--u;u%s;u++)c+="0";for(f=DO(c,i,t),u=f.length;!f[u-1];--u);for(s=1,c="1.";s<u;s++)c+=FV.charAt(f[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>u)for(o-=u;o--;)c+="0";else o<u&&(c=c.slice(0,o)+"."+c.slice(o))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function Hle(e,t){if(e.length>t)return e.length=t,!0}function Vbt(e){return new this(e).abs()}function Hbt(e){return new this(e).acos()}function qbt(e){return new this(e).acosh()}function Wbt(e,t){return new this(e).plus(t)}function Gbt(e){return new this(e).asin()}function Ybt(e){return new this(e).asinh()}function Kbt(e){return new this(e).atan()}function Xbt(e){return new this(e).atanh()}function Qbt(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return!e.s||!t.s?n=new this(NaN):!e.d&&!t.d?(n=hh(this,o,1).times(t.s>0?.25:.75),n.s=e.s):!t.d||e.isZero()?(n=t.s<0?hh(this,r,i):new this(0),n.s=e.s):!e.d||t.isZero()?(n=hh(this,o,1).times(.5),n.s=e.s):t.s<0?(this.precision=o,this.rounding=1,n=this.atan(Mi(e,t,o,1)),t=hh(this,o,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Mi(e,t,o,1)),n}function Jbt(e){return new this(e).cbrt()}function Zbt(e){return Cn(e=new this(e),e.e+1,2)}function ext(e,t,n){return new this(e).clamp(t,n)}function txt(e){if(!e||typeof e!="object")throw Error(U8+"Object expected");var t,n,r,i=e.defaults===!0,o=["precision",1,hv,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,OV,"maxE",0,OV,"minE",-9e15,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(n=o[t],i&&(this[n]=MV[n]),(r=e[n])!==void 0)if(Uu(r)===r&&r>=o[t+1]&&r<=o[t+2])this[n]=r;else throw Error(P1+n+": "+r);if(n="crypto",i&&(this[n]=MV[n]),(r=e[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(lCe);else this[n]=!1;else throw Error(P1+n+": "+r);return this}function nxt(e){return new this(e).cos()}function rxt(e){return new this(e).cosh()}function yCe(e){var t,n,r;function i(o){var s,a,u,l=this;if(!(l instanceof i))return new i(o);if(l.constructor=i,qle(o)){l.s=o.s,Wn?!o.d||o.e>i.maxE?(l.e=NaN,l.d=null):o.e<i.minE?(l.e=0,l.d=[0]):(l.e=o.e,l.d=o.d.slice()):(l.e=o.e,l.d=o.d?o.d.slice():o.d);return}if(u=typeof o,u==="number"){if(o===0){l.s=1/o<0?-1:1,l.e=0,l.d=[0];return}if(o<0?(o=-o,l.s=-1):l.s=1,o===~~o&&o<1e7){for(s=0,a=o;a>=10;a/=10)s++;Wn?s>i.maxE?(l.e=NaN,l.d=null):s<i.minE?(l.e=0,l.d=[0]):(l.e=s,l.d=[o]):(l.e=s,l.d=[o]);return}else if(o*0!==0){o||(l.s=NaN),l.e=NaN,l.d=null;return}return BV(l,o.toString())}else if(u!=="string")throw Error(P1+o);return(a=o.charCodeAt(0))===45?(o=o.slice(1),l.s=-1):(a===43&&(o=o.slice(1)),l.s=1),fCe.test(o)?BV(l,o):zbt(l,o)}if(i.prototype=Ct,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=txt,i.clone=yCe,i.isDecimal=qle,i.abs=Vbt,i.acos=Hbt,i.acosh=qbt,i.add=Wbt,i.asin=Gbt,i.asinh=Ybt,i.atan=Kbt,i.atanh=Xbt,i.atan2=Qbt,i.cbrt=Jbt,i.ceil=Zbt,i.clamp=ext,i.cos=nxt,i.cosh=rxt,i.div=ixt,i.exp=oxt,i.floor=sxt,i.hypot=axt,i.ln=uxt,i.log=lxt,i.log10=fxt,i.log2=cxt,i.max=dxt,i.min=hxt,i.mod=pxt,i.mul=mxt,i.pow=gxt,i.random=yxt,i.round=vxt,i.sign=bxt,i.sin=xxt,i.sinh=wxt,i.sqrt=_xt,i.sub=Ext,i.sum=Txt,i.tan=Cxt,i.tanh=Sxt,i.trunc=Axt,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return i.config(e),i}function ixt(e,t){return new this(e).div(t)}function oxt(e){return new this(e).exp()}function sxt(e){return Cn(e=new this(e),e.e+1,3)}function axt(){var e,t,n=new this(0);for(Wn=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return Wn=!0,new this(1/0);n=t}return Wn=!0,n.sqrt()}function qle(e){return e instanceof K2||e&&e.toStringTag===cCe||!1}function uxt(e){return new this(e).ln()}function lxt(e,t){return new this(e).log(t)}function cxt(e){return new this(e).log(2)}function fxt(e){return new this(e).log(10)}function dxt(){return pCe(this,arguments,"lt")}function hxt(){return pCe(this,arguments,"gt")}function pxt(e,t){return new this(e).mod(t)}function mxt(e,t){return new this(e).mul(t)}function gxt(e,t){return new this(e).pow(t)}function yxt(e){var t,n,r,i,o=0,s=new this(1),a=[];if(e===void 0?e=this.precision:gc(e,1,hv),r=Math.ceil(e/Mn),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));o<r;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(r*=4);o<r;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(a.push(i%1e7),o+=4);o=r/4}else throw Error(lCe);else for(;o<r;)a[o++]=Math.random()*1e7|0;for(r=a[--o],e%=Mn,r&&e&&(i=Ms(10,Mn-e),a[o]=(r/i|0)*i);a[o]===0;o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=Mn)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<Mn&&(n-=Mn-r)}return s.e=n,s.d=a,s}function vxt(e){return Cn(e=new this(e),e.e+1,this.rounding)}function bxt(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function xxt(e){return new this(e).sin()}function wxt(e){return new this(e).sinh()}function _xt(e){return new this(e).sqrt()}function Ext(e,t){return new this(e).sub(t)}function Txt(){var e=0,t=arguments,n=new this(t[e]);for(Wn=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return Wn=!0,Cn(n,this.precision,this.rounding)}function Cxt(e){return new this(e).tan()}function Sxt(e){return new this(e).tanh()}function Axt(e){return Cn(e=new this(e),e.e+1,1)}Ct[Symbol.for("nodejs.util.inspect.custom")]=Ct.toString;Ct[Symbol.toStringTag]="Decimal";var K2=Ct.constructor=yCe(MV);NF=new K2(NF);PF=new K2(PF);var Dxt="BigNumber",kxt=["?on","config"],Ixt=Nn(Dxt,kxt,e=>{var{on:t,config:n}=e,r=K2.clone({precision:n.precision,modulo:K2.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},t&&t("config",function(i,o){i.precision!==o.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),$7={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var Wle;function Rxt(){return Wle||(Wle=1,function(e,t){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},o=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var h=f*f;return h*(h*(h*(h*(h*(h*(h*(h/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(f,d){var h=Math.abs(f),m=Math.abs(d);return h<3e3&&m<3e3?Math.sqrt(h*h+m*m):(h<m?(h=m,m=f/d):m=d/f,h*Math.sqrt(1+m*m))},a=function(){throw SyntaxError("Invalid Param")};function u(f,d){var h=Math.abs(f),m=Math.abs(d);return f===0?Math.log(m):d===0?Math.log(h):h<3e3&&m<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var l=function(f,d){var h={re:0,im:0};if(f==null)h.re=h.im=0;else if(d!==void 0)h.re=f,h.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)h.re=f.re,h.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;h.re=f.abs*Math.cos(f.arg),h.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;h.re=f.r*Math.cos(f.phi),h.im=f.r*Math.sin(f.phi)}else f.length===2?(h.re=f[0],h.im=f[1]):a();break;case"string":h.im=h.re=0;var m=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),p=1,g=0;m===null&&a();for(var v=0;v<m.length;v++){var b=m[v];b===" "||b==="	"||b===`
`||(b==="+"?p++:b==="-"?g++:b==="i"||b==="I"?(p+g===0&&a(),m[v+1]!==" "&&!isNaN(m[v+1])?(h.im+=parseFloat((g%2?"-":"")+m[v+1]),v++):h.im+=parseFloat((g%2?"-":"")+"1"),p=g=0):((p+g===0||isNaN(b))&&a(),m[v+1]==="i"||m[v+1]==="I"?(h.im+=parseFloat((g%2?"-":"")+b),v++):h.re+=parseFloat((g%2?"-":"")+b),p=g=0))}p+g>0&&a();break;case"number":h.im=0,h.re=f;break;default:a()}return isNaN(h.re)||isNaN(h.im),h};function c(f,d){if(!(this instanceof c))return new c(f,d);var h=l(f,d);this.re=h.re,this.im=h.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re+h.re,this.im+h.im)},sub:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:new c(this.re-h.re,this.im-h.im)},mul:function(f,d){var h=new c(f,d);return this.isInfinite()&&h.isZero()||this.isZero()&&h.isInfinite()?c.NAN:this.isInfinite()||h.isInfinite()?c.INFINITY:h.im===0&&this.im===0?new c(this.re*h.re,0):new c(this.re*h.re-this.im*h.im,this.re*h.im+this.im*h.re)},div:function(f,d){var h=new c(f,d);if(this.isZero()&&h.isZero()||this.isInfinite()&&h.isInfinite())return c.NAN;if(this.isInfinite()||h.isZero())return c.INFINITY;if(this.isZero()||h.isInfinite())return c.ZERO;f=this.re,d=this.im;var m=h.re,p=h.im,g,v;return p===0?new c(f/m,d/m):Math.abs(m)<Math.abs(p)?(v=m/p,g=m*v+p,new c((f*v+d)/g,(d*v-f)/g)):(v=p/m,g=p*v+m,new c((f+d*v)/g,(d-f*v)/g))},pow:function(f,d){var h=new c(f,d);if(f=this.re,d=this.im,h.isZero())return c.ONE;if(h.im===0){if(d===0&&f>0)return new c(Math.pow(f,h.re),0);if(f===0)switch((h.re%4+4)%4){case 0:return new c(Math.pow(d,h.re),0);case 1:return new c(0,Math.pow(d,h.re));case 2:return new c(-Math.pow(d,h.re),0);case 3:return new c(0,-Math.pow(d,h.re))}}if(f===0&&d===0&&h.re>0&&h.im>=0)return c.ZERO;var m=Math.atan2(d,f),p=u(f,d);return f=Math.exp(h.re*p-h.im*m),d=h.im*p+h.re*m,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,h=this.abs(),m,p;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);m=.5*Math.sqrt(2*(h+f))}else m=Math.abs(d)/Math.sqrt(2*(h-f));return f<=0?p=.5*Math.sqrt(2*(h-f)):p=Math.abs(d)/Math.sqrt(2*(h+f)),new c(m,d<0?-p:p)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+o(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(u(f,d),Math.atan2(d,f))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*r(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*r(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)+r(d);return new c(Math.sin(f)/h,i(d)/h)},cot:function(){var f=2*this.re,d=2*this.im,h=Math.cos(f)-r(d);return new c(-Math.sin(f)/h,i(d)/h)},sec:function(){var f=this.re,d=this.im,h=.5*r(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(d)/h,Math.sin(f)*i(d)/h)},csc:function(){var f=this.re,d=this.im,h=.5*r(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(d)/h,-Math.cos(f)*i(d)/h)},asin:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(m.im,-m.re)},acos:function(){var f=this.re,d=this.im,h=new c(d*d-f*f+1,-2*f*d).sqrt(),m=new c(h.re-d,h.im+f).log();return new c(Math.PI/2-m.im,m.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var h=f*f+(1-d)*(1-d),m=new c((1-d*d-f*f)/h,-2*f/h).log();return new c(-.5*m.im,.5*m.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),r(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(r(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,h=r(f)+Math.cos(d);return new c(i(f)/h,Math.sin(d)/h)},coth:function(){var f=2*this.re,d=2*this.im,h=r(f)-Math.cos(d);return new c(i(f)/h,-Math.sin(d)/h)},csch:function(){var f=this.re,d=this.im,h=Math.cos(2*d)-r(2*f);return new c(-2*i(f)*Math.cos(d)/h,2*r(f)*Math.sin(d)/h)},sech:function(){var f=this.re,d=this.im,h=Math.cos(2*d)+r(2*f);return new c(2*r(f)*Math.cos(d)/h,-2*i(f)*Math.sin(d)/h)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,h=f>1&&d===0,m=1-f,p=1+f,g=m*m+d*d,v=g!==0?new c((p*m-d*d)/g,(d*m+p*d)/g):new c(f!==-1?f/0:0,d!==0?d/0:0),b=v.re;return v.re=u(v.re,v.im)/2,v.im=Math.atan2(v.im,b)/2,h&&(v.im=-v.im),v},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var h=f*f+d*d;return h!==0?new c(f/h,-d/h).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var h=f*f+d*d;return h!==0?new c(f/h,-d/h).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,h=f*f+d*d;return new c(f/h,-d/h)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var h=new c(f,d);return Math.abs(h.re-this.re)<=c.EPSILON&&Math.abs(h.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,h="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?h+f:(f!==0?(h+=f,h+=" ",d<0?(d=-d,h+="-"):h+="+",h+=" "):d<0&&(d=-d,h+="-"),d!==1&&(h+=d),h+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,e.exports=c})()}($7)),$7.exports}var Nxt=Rxt();const Oa=_c(Nxt);var Pxt="Complex",Oxt=[],Fxt=Nn(Pxt,Oxt,()=>(Object.defineProperty(Oa,"name",{value:"Complex"}),Oa.prototype.constructor=Oa,Oa.prototype.type="Complex",Oa.prototype.isComplex=!0,Oa.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Oa.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Oa.prototype.format=function(e){var t="",n=this.im,r=this.re,i=PV(this.re,e),o=PV(this.im,e),s=Vi(e)?e:e?e.precision:null;if(s!==null){var a=Math.pow(10,-s);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?t=i:r===0?n===1?t="i":n===-1?t="-i":t=o+"i":n<0?n===-1?t=i+" - i":t=i+" - "+o.substring(1)+"i":n===1?t=i+" + i":t=i+" + "+o+"i",t},Oa.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Oa(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(Vi(n)){if(ZTe(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Vi(r))return new Oa({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Oa.prototype.valueOf=Oa.prototype.toString,Oa.fromJSON=function(e){return new Oa(e)},Oa.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Oa),{isClass:!0});/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var Mxt=2e3,mn={s:1,n:0,d:1};function y0(e,t){if(isNaN(e=parseInt(e,10)))throw kO();return e*t}function bo(e,t){if(t===0)throw DX();var n=Object.create(Tu.prototype);n.s=e<0?-1:1,e=e<0?-e:e;var r=jE(e,t);return n.n=e/r,n.d=t/r,n}function Gle(e){for(var t={},n=e,r=2,i=4;i<=n;){for(;n%r===0;)n/=r,t[r]=(t[r]||0)+1;i+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var Xc=function(e,t){var n=0,r=1,i=1,o=0,s=0,a=0,u=1,l=1,c=0,f=1,d=1,h=1,m=1e7,p;if(e!=null)if(t!==void 0){if(n=e,r=t,i=n*r,n%1!==0||r%1!==0)throw jxt()}else switch(typeof e){case"object":{if("d"in e&&"n"in e)n=e.n,r=e.d,"s"in e&&(n*=e.s);else if(0 in e)n=e[0],1 in e&&(r=e[1]);else throw kO();i=n*r;break}case"number":{if(e<0&&(i=e,e=-e),e%1===0)n=e;else if(e>0){for(e>=1&&(l=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)),e/=l);f<=m&&h<=m;)if(p=(c+d)/(f+h),e===p){f+h<=m?(n=c+d,r=f+h):h>f?(n=d,r=h):(n=c,r=f);break}else e>p?(c+=d,f+=h):(d+=c,h+=f),f>m?(n=d,r=h):(n=c,r=f);n*=l}else(isNaN(e)||isNaN(t))&&(r=n=NaN);break}case"string":{if(f=e.match(/\d+|./g),f===null)throw kO();if(f[c]==="-"?(i=-1,c++):f[c]==="+"&&c++,f.length===c+1?s=y0(f[c++],i):f[c+1]==="."||f[c]==="."?(f[c]!=="."&&(o=y0(f[c++],i)),c++,(c+1===f.length||f[c+1]==="("&&f[c+3]===")"||f[c+1]==="'"&&f[c+3]==="'")&&(s=y0(f[c],i),u=Math.pow(10,f[c].length),c++),(f[c]==="("&&f[c+2]===")"||f[c]==="'"&&f[c+2]==="'")&&(a=y0(f[c+1],i),l=Math.pow(10,f[c+1].length)-1,c+=3)):f[c+1]==="/"||f[c+1]===":"?(s=y0(f[c],i),u=y0(f[c+2],1),c+=3):f[c+3]==="/"&&f[c+1]===" "&&(o=y0(f[c],i),s=y0(f[c+2],i),u=y0(f[c+4],1),c+=5),f.length<=c){r=u*l,i=n=a+r*o+l*s;break}}default:throw kO()}if(r===0)throw DX();mn.s=i<0?-1:1,mn.n=Math.abs(n),mn.d=Math.abs(r)};function $xt(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)t&1&&(r=r*e%n);return r}function Lxt(e,t){for(;t%2===0;t/=2);for(;t%5===0;t/=5);if(t===1)return 0;for(var n=10%t,r=1;n!==1;r++)if(n=n*10%t,r>Mxt)return 0;return r}function Bxt(e,t,n){for(var r=1,i=$xt(10,n,t),o=0;o<300;o++){if(r===i)return o;r=r*10%t,i=i*10%t}return 0}function jE(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function Tu(e,t){if(Xc(e,t),this instanceof Tu)e=jE(mn.d,mn.n),this.s=mn.s,this.n=mn.n/e,this.d=mn.d/e;else return bo(mn.s*mn.n,mn.d)}var DX=function(){return new Error("Division by Zero")},kO=function(){return new Error("Invalid argument")},jxt=function(){return new Error("Parameters must be integer")};Tu.prototype={s:1,n:0,d:1,abs:function(){return bo(this.n,this.d)},neg:function(){return bo(-this.s*this.n,this.d)},add:function(e,t){return Xc(e,t),bo(this.s*this.n*mn.d+mn.s*this.d*mn.n,this.d*mn.d)},sub:function(e,t){return Xc(e,t),bo(this.s*this.n*mn.d-mn.s*this.d*mn.n,this.d*mn.d)},mul:function(e,t){return Xc(e,t),bo(this.s*mn.s*this.n*mn.n,this.d*mn.d)},div:function(e,t){return Xc(e,t),bo(this.s*mn.s*this.n*mn.d,this.d*mn.n)},clone:function(){return bo(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new Tu(NaN);if(e===void 0)return bo(this.s*this.n%this.d,1);if(Xc(e,t),mn.n===0&&this.d===0)throw DX();return bo(this.s*(mn.d*this.n)%(mn.n*this.d),mn.d*this.d)},gcd:function(e,t){return Xc(e,t),bo(jE(mn.n,this.n)*jE(mn.d,this.d),mn.d*this.d)},lcm:function(e,t){return Xc(e,t),mn.n===0&&this.n===0?bo(0,1):bo(mn.n*this.n,jE(mn.n,this.n)*jE(mn.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new Tu(NaN):bo(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new Tu(NaN):bo(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new Tu(NaN):bo(Math.round(e*this.s*this.n/this.d),e)},roundTo:function(e,t){return Xc(e,t),bo(this.s*Math.round(this.n*mn.d/(this.d*mn.n))*mn.n,mn.d)},inverse:function(){return bo(this.s*this.d,this.n)},pow:function(e,t){if(Xc(e,t),mn.d===1)return mn.s<0?bo(Math.pow(this.s*this.d,mn.n),Math.pow(this.n,mn.n)):bo(Math.pow(this.s*this.n,mn.n),Math.pow(this.d,mn.n));if(this.s<0)return null;var n=Gle(this.n),r=Gle(this.d),i=1,o=1;for(var s in n)if(s!=="1"){if(s==="0"){i=0;break}if(n[s]*=mn.n,n[s]%mn.d===0)n[s]/=mn.d;else return null;i*=Math.pow(s,n[s])}for(var s in r)if(s!=="1"){if(r[s]*=mn.n,r[s]%mn.d===0)r[s]/=mn.d;else return null;o*=Math.pow(s,r[s])}return mn.s<0?bo(o,i):bo(i,o)},equals:function(e,t){return Xc(e,t),this.s*this.n*mn.d===mn.s*mn.n*this.d},compare:function(e,t){Xc(e,t);var n=this.s*this.n*mn.d-mn.s*mn.n*this.d;return(0<n)-(n<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var i=bo(n[r-1],1),o=r-2;o>=0;o--)i=i.inverse().add(n[o]);if(Math.abs(i.sub(t).valueOf())<e)return i.mul(this.s)}return this},divisible:function(e,t){return Xc(e,t),!(!(mn.n*this.d)||this.n*mn.d%(mn.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,n+=" ",r%=i),n+=r,n+="/",n+=i),n},toLatex:function(e){var t,n="",r=this.n,i=this.d;return this.s<0&&(n+="-"),i===1?n+=r:(e&&(t=Math.floor(r/i))>0&&(n+=t,r%=i),n+="\\frac{",n+=r,n+="}{",n+=i,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do r.push(Math.floor(t/n)),e=t%n,t=n,n=e;while(t!==1);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=Lxt(t,n),i=Bxt(t,n,r),o=this.s<0?"-":"";if(o+=t/n|0,t%=n,t*=10,t&&(o+="."),r){for(var s=i;s--;)o+=t/n|0,t%=n,t*=10;o+="(";for(var s=r;s--;)o+=t/n|0,t%=n,t*=10;o+=")"}else for(var s=e;t&&s--;)o+=t/n|0,t%=n,t*=10;return o}};var zxt="Fraction",Uxt=[],Vxt=Nn(zxt,Uxt,()=>(Object.defineProperty(Tu,"name",{value:"Fraction"}),Tu.prototype.constructor=Tu,Tu.prototype.type="Fraction",Tu.prototype.isFraction=!0,Tu.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},Tu.fromJSON=function(e){return new Tu(e)},Tu),{isClass:!0}),Hxt="Matrix",qxt=[],Wxt=Nn(Hxt,qxt,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,n){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,n,r){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,n){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,n){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,n){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function L7(e,t,n){var r=e.constructor,i=new r(2),o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Es(n))throw new Error("size must be an integer");if(e.greaterThan(i.pow(n-1).sub(1))||e.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(n))),o="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(o);case 8:return"".concat(e.toOctal()).concat(o);case 16:return"".concat(e.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(t," not supported "))}}function Gxt(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=nCe(t);switch(n){case"fixed":return Kxt(e,r);case"exponential":return Yle(e,r);case"engineering":return Yxt(e,r);case"bin":return L7(e,2,i);case"oct":return L7(e,8,i);case"hex":return L7(e,16,i);case"auto":{var o=Kle(t==null?void 0:t.lowerExp,-3),s=Kle(t==null?void 0:t.upperExp,5);if(e.isZero())return"0";var a,u=e.toSignificantDigits(r),l=u.e;return l>=o&&l<s?a=u.toFixed():a=Yle(e,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Yxt(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),o=i.toPrecision(t);if(o.includes("e")){var s=e.constructor;o=new s(o).toFixed()}return o+"e"+(n>=0?"+":"")+r.toString()}function Yle(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Kxt(e,t){return e.toFixed(t)}function Kle(e,t){return Vi(e)?e:Vo(e)?e.toNumber():t}function _s(e,t){var n=Xxt(e,t);return t&&typeof t=="object"&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function Xxt(e,t){if(typeof e=="number")return PV(e,t);if(Vo(e))return Gxt(e,t);if(Qxt(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return vCe(e,t);if(k0(e))return Xle(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var n=Object.keys(e).map(r=>Xle(r)+": "+_s(e[r],t));return"{"+n.join(", ")+"}"}return String(e)}function Xle(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in Qle?Qle[i]:i,r++}return'"'+n+'"'}var Qle={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function vCe(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=vCe(e[i],t);return n+="]",n}else return _s(e,t)}function Qxt(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function hi(e,t,n){if(!(this instanceof hi))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}hi.prototype=new RangeError;hi.prototype.constructor=RangeError;hi.prototype.name="DimensionError";hi.prototype.isDimensionError=!0;function Ng(e,t,n){if(!(this instanceof Ng))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ng.prototype=new RangeError;Ng.prototype.constructor=RangeError;Ng.prototype.name="IndexError";Ng.prototype.isIndexError=!0;function Fu(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function bCe(e,t,n){var r,i=e.length;if(i!==t[n])throw new hi(i,t[n]);if(n<t.length-1){var o=n+1;for(r=0;r<i;r++){var s=e[r];if(!Array.isArray(s))throw new hi(t.length-1,t.length,"<");bCe(e[r],t,o)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new hi(t.length+1,t.length,">")}function Jle(e,t){var n=t.length===0;if(n){if(Array.isArray(e))throw new hi(e.length,0)}else bCe(e,t,0)}function _o(e,t){if(e!==void 0){if(!Vi(e)||!Es(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Ng(e,t)}}function jV(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!Vi(i)||!Es(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+_s(t)+")")}),(Vi(e)||Vo(e))&&(e=[e]);var r=n!==void 0?n:0;return zV(e,t,0,r),e}function zV(e,t,n,r){var i,o,s=e.length,a=t[n],u=Math.min(s,a);if(e.length=a,n<t.length-1){var l=n+1;for(i=0;i<u;i++)o=e[i],Array.isArray(o)||(o=[o],e[i]=o),zV(o,t,l,r);for(i=u;i<a;i++)o=[],e[i]=o,zV(o,t,l,r)}else{for(i=0;i<u;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=u;i<a;i++)e[i]=r}}function xCe(e,t){var n=Zxt(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new hi(0,r,"!=");t=kX(t,r);var i=wCe(t);if(r!==i)throw new hi(i,r,"!=");try{return Jxt(n,t)}catch(o){throw o instanceof hi?new hi(i,r,"!="):o}}function kX(e,t){var n=wCe(e),r=e.slice(),i=-1,o=e.indexOf(i),s=e.indexOf(i,o+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var a=o>=0,u=t%n===0;if(a)if(u)r[o]=-t/n;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);return r}function wCe(e){return e.reduce((t,n)=>t*n,1)}function Jxt(e,t){for(var n=e,r,i=t.length-1;i>0;i--){var o=t[i];r=[];for(var s=n.length/o,a=0;a<s;a++)r.push(n.slice(a*o,(a+1)*o));n=r}return n}function _Ce(e,t,n,r){var i=r||Fu(e);if(n)for(var o=0;o<n;o++)e=[e],i.unshift(1);for(e=ECe(e,t,0);i.length<t;)i.push(1);return e}function ECe(e,t,n){var r,i;if(Array.isArray(e)){var o=n+1;for(r=0,i=e.length;r<i;r++)e[r]=ECe(e[r],t,o)}else for(var s=n;s<t;s++)e=[e];return e}function Zxt(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function n(r){Array.isArray(r)?r.forEach(n):t.push(r)}),t}function FF(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],s=Array.isArray(o);if(i===0&&s&&(r=o.length),s&&o.length!==r)return;var a=s?FF(o,t):t(o);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function TCe(e,t,n,r){if(r<n){if(e.length!==t.length)throw new hi(e.length,t.length);for(var i=[],o=0;o<e.length;o++)i[o]=TCe(e[o],t[o],n,r+1);return i}else return e.concat(t)}function CCe(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(n,r){return TCe(n,r,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function ewt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map(d=>d.length),i=Math.max(...r),o=new Array(i).fill(null),s=0;s<t.length;s++)for(var a=t[s],u=r[s],l=0;l<u;l++){var c=i-u+l;a[l]>o[c]&&(o[c]=a[l])}for(var f=0;f<t.length;f++)MF(t[f],o);return o}function MF(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var o=n-r+i;if(e[i]<t[o]&&e[i]>1||e[i]>t[o])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[o]))}}function Zle(e,t){var n=Fu(e);if(G2(n,t))return e;MF(n,t);var r=ewt(n,t),i=r.length,o=[...Array(i-n.length).fill(1),...n],s=nwt(e);n.length<i&&(s=xCe(s,o),n=Fu(s));for(var a=0;a<i;a++)n[a]<r[a]&&(s=twt(s,r[a],a),n=Fu(s));return s}function twt(e,t,n){return CCe(...Array(t).fill(e),n)}function nwt(e){return IF([],e)}function SCe(e){return Object.keys(e.signatures||{}).reduce(function(t,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)}var rwt="DenseMatrix",iwt=["Matrix"],owt=Nn(rwt,iwt,e=>{var{Matrix:t}=e;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!k0(f))throw new Error("Invalid datatype: "+f);if(To(c))c.type==="DenseMatrix"?(this._data=Bo(c._data),this._size=Bo(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&wo(c.data)&&wo(c.size))this._data=c.data,this._size=c.size,Jle(this._data,this._size),this._datatype=f||c.datatype;else if(wo(c))this._data=l(c),this._size=Fu(this._data),Jle(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+wh(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new t,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return FF(this._data,wh)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return o(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!wo(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new hi(c.length,this._size.length);for(var f=0;f<c.length;f++)_o(c[f],this._size[f]);for(var d=this._data,h=0,m=c.length;h<m;h++){var p=c[h];_o(p,d.length),d=d[p]}return d},n.prototype.set=function(c,f,d){if(!wo(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new hi(c.length,this._size.length,"<");var h,m,p,g=c.map(function(b){return b+1});u(this,g,d);var v=this._data;for(h=0,m=c.length-1;h<m;h++)p=c[h],_o(p,v.length),v=v[p];return p=c[c.length-1],_o(p,v.length),v[p]=f,this};function r(c,f){if(!CX(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var h=f.size();if(h.length!==c._size.length)throw new hi(h.length,c._size.length);for(var m=f.min(),p=f.max(),g=0,v=c._size.length;g<v;g++)_o(m[g],c._size[g]),_o(p[g],c._size[g]);return new n(i(c._data,f,h.length,0),c._datatype)}function i(c,f,d,h){var m=h===d-1,p=f.dimension(h);return m?p.map(function(g){return _o(g,c.length),c[g]}).valueOf():p.map(function(g){_o(g,c.length);var v=c[g];return i(v,f,d,h+1)}).valueOf()}function o(c,f,d,h){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),p=f.isScalar(),g;if(To(d)?(g=d.size(),d=d.valueOf()):g=Fu(d),p){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,h)}else{if(!G2(g,m))try{g.length===0?d=Zle([d],m):d=Zle(d,m),g=Fu(d)}catch{}if(m.length<c._size.length)throw new hi(m.length,c._size.length,"<");if(g.length<m.length){for(var v=0,b=0;m[v]===1&&g[v]===1;)v++;for(;m[v]===1;)b++,v++;d=_Ce(d,m.length,b,g)}if(!G2(m,g))throw new hi(m,g,">");var w=f.max().map(function(C){return C+1});u(c,w,h);var E=m.length,T=0;s(c._data,f,d,E,T)}return c}function s(c,f,d,h,m){var p=m===h-1,g=f.dimension(m);p?g.forEach(function(v,b){_o(v),c[v]=d[b[0]]}):g.forEach(function(v,b){_o(v),s(c[v],f,d[b[0]],h,m+1)})}n.prototype.resize=function(c,f,d){if(!W2(c))throw new TypeError("Array or Matrix expected");var h=c.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),m=d?this.clone():this;return a(m,h,f)};function a(c,f,d){if(f.length===0){for(var h=c._data;wo(h);)h=h[0];return h}return c._size=f.slice(0),c._data=jV(c._data,c._size,d),c}n.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=xCe(d._data,c);var h=d._size.reduce((m,p)=>m*p);return d._size=kX(c,h),d};function u(c,f,d){for(var h=c._size.slice(0),m=!1;h.length<f.length;)h.push(0),m=!0;for(var p=0,g=f.length;p<g;p++)f[p]>h[p]&&(h[p]=f[p],m=!0);m&&a(c,h,d)}n.prototype.clone=function(){var c=new n({data:Bo(this._data),size:Bo(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,d=SCe(c),h=function g(v,b){return wo(v)?v.map(function(w,E){return g(w,b.concat(E))}):d===1?c(v):d===2?c(v,b):c(v,b,f)},m=h(this._data,[]),p=this._datatype!==void 0?FF(m,wh):void 0;return new n(m,p)},n.prototype.forEach=function(c){var f=this,d=function h(m,p){wo(m)?m.forEach(function(g,v){h(g,p.concat(v))}):c(m,p,f)};d(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(d,h){if(wo(d))for(var m=0;m<d.length;m++)yield*f(d[m],h.concat(m));else yield{value:d,index:h}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var h of d)c.push(new n([h],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var h=this._data,m=function(v){var b=h.map(w=>[w[v]]);f.push(new n(b,c._datatype))},p=0;p<d[1];p++)m(p);return f},n.prototype.toArray=function(){return Bo(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return _s(this._data,c)},n.prototype.toString=function(){return _s(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Vo(c)&&(c=c.toNumber()),!Vi(c)||!Es(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,h=this._size[0],m=this._size[1],p=Math.min(h-d,m-f),g=[],v=0;v<p;v++)g[v]=this._data[v+d][v+f];return new n({data:g,size:[p],datatype:this._datatype})},n.diagonal=function(c,f,d,h){if(!wo(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(S){if(Vo(S)&&(S=S.toNumber()),!Vi(S)||!Es(S)||S<1)throw new Error("Size values must be positive integers");return S}),d){if(Vo(d)&&(d=d.toNumber()),!Vi(d)||!Es(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var m=d>0?d:0,p=d<0?-d:0,g=c[0],v=c[1],b=Math.min(g-p,v-m),w;if(wo(f)){if(f.length!==b)throw new Error("Invalid value array length");w=function(I){return f[I]}}else if(To(f)){var E=f.size();if(E.length!==1||E[0]!==b)throw new Error("Invalid matrix length");w=function(I){return f.get([I])}}else w=function(){return f};h||(h=Vo(w(0))?w(0).mul(0):0);var T=[];if(c.length>0){T=jV(T,c,h);for(var C=0;C<b;C++)T[C+p][C+m]=w(C)}return new n({data:T,size:[g,v]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!Vi(c)||!Es(c)||!Vi(f)||!Es(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _o(c,this._size[0]),_o(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,d){var h=d[c];d[c]=d[f],d[f]=h};function l(c){return To(c)?l(c.valueOf()):wo(c)?c.map(l):c}return n},{isClass:!0});function swt(e){var t=e.length,n=e[0].length,r,i,o=[];for(i=0;i<n;i++){var s=[];for(r=0;r<t;r++)s.push(e[r][i]);o.push(s)}return o}function awt(e){for(var t=0;t<e.length;t++)if(W2(e[t]))return!0;return!1}function $F(e,t){To(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?$F(i,t):t(i)}}function km(e,t,n){return e&&typeof e.map=="function"?e.map(function(r){return km(r,t)}):t(e)}function uwt(e,t,n){var r=Array.isArray(e)?Fu(e):e.size();if(t<0||t>=r.length)throw new Ng(t,r.length);return To(e)?e.create(LF(e.valueOf(),t,n)):LF(e,t,n)}function LF(e,t,n){var r,i,o,s;if(t<=0)if(Array.isArray(e[0])){for(s=swt(e),i=[],r=0;r<s.length;r++)i[r]=LF(s[r],t-1,n);return i}else{for(o=e[0],r=1;r<e.length;r++)o=n(o,e[r]);return o}else{for(i=[],r=0;r<e.length;r++)i[r]=LF(e[r],t-1,n);return i}}var ece="isInteger",lwt=["typed"],cwt=Nn(ece,lwt,e=>{var{typed:t}=e;return t(ece,{number:Es,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":t.referToSelf(n=>r=>km(r,n))})}),ACe="number",IX="number, number";function DCe(e){return Math.abs(e)}DCe.signature=ACe;function kCe(e,t){return e+t}kCe.signature=IX;function ICe(e,t){return e-t}ICe.signature=IX;function RCe(e,t){return e*t}RCe.signature=IX;function NCe(e){return-e}NCe.signature=ACe;function fwt(e,t){return Math.log(e)}var dwt="number";function PCe(e){return Number.isNaN(e)}PCe.signature=dwt;function hwt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r))}var tce="isZero",pwt=["typed","equalScalar"],mwt=Nn(tce,pwt,e=>{var{typed:t,equalScalar:n}=e;return t(tce,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:t.referToSelf(r=>i=>t.find(r,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(r=>i=>km(i,r))})}),nce="isNaN",gwt=["typed"],ywt=Nn(nce,gwt,e=>{var{typed:t}=e;return t(nce,{number:PCe,BigNumber:function(r){return r.isNaN()},bigint:function(r){return!1},Fraction:function(r){return!1},Complex:function(r){return r.isNaN()},Unit:function(r){return Number.isNaN(r.value)},"Array | Matrix":t.referToSelf(n=>r=>km(r,n))})});function vwt(e,t,n,r){return RF(e.re,t.re,n,r)&&RF(e.im,t.im,n,r)}var bwt=Nn("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),BF="equalScalar",xwt=["typed","config"],wwt=Nn(BF,xwt,e=>{var{typed:t,config:n}=e,r=bwt({typed:t});return t(BF,{"boolean, boolean":function(o,s){return o===s},"number, number":function(o,s){return RF(o,s,n.relTol,n.absTol)},"BigNumber, BigNumber":function(o,s){return o.eq(s)||hwt(o,s,n.relTol,n.absTol)},"bigint, bigint":function(o,s){return o===s},"Fraction, Fraction":function(o,s){return o.equals(s)},"Complex, Complex":function(o,s){return vwt(o,s,n.relTol,n.absTol)}},r)});Nn(BF,["typed","config"],e=>{var{typed:t,config:n}=e;return t(BF,{"number, number":function(i,o){return RF(i,o,n.relTol,n.absTol)}})});var _wt="SparseMatrix",Ewt=["typed","equalScalar","Matrix"],Twt=Nn(_wt,Ewt,e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(p,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!k0(g))throw new Error("Invalid datatype: "+g);if(To(p))o(this,p,g);else if(p&&wo(p.index)&&wo(p.ptr)&&wo(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=g||p.datatype;else if(wo(p))s(this,p,g);else{if(p)throw new TypeError("Unsupported type of data ("+wh(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function o(p,g,v){g.type==="SparseMatrix"?(p._values=g._values?Bo(g._values):void 0,p._index=Bo(g._index),p._ptr=Bo(g._ptr),p._size=Bo(g._size),p._datatype=v||g._datatype):s(p,g.valueOf(),v||g._datatype)}function s(p,g,v){p._values=[],p._index=[],p._ptr=[],p._datatype=v;var b=g.length,w=0,E=n,T=0;if(k0(v)&&(E=t.find(n,[v,v])||n,T=t.convert(0,v)),b>0){var C=0;do{p._ptr.push(p._index.length);for(var S=0;S<b;S++){var I=g[S];if(wo(I)){if(C===0&&w<I.length&&(w=I.length),C<I.length){var R=I[C];E(R,T)||(p._values.push(R),p._index.push(S))}}else C===0&&w<1&&(w=1),E(I,T)||(p._values.push(I),p._index.push(S))}C++}while(C<w)}p._ptr.push(p._index.length),p._size=[b,w]}i.prototype=new r,i.prototype.createSparseMatrix=function(p,g){return new i(p,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return FF(this._values,wh)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,g){return new i(p,g)},i.prototype.density=function(){var p=this._size[0],g=this._size[1];return p!==0&&g!==0?this._index.length/(p*g):0},i.prototype.subset=function(p,g,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,p);case 2:case 3:return u(this,p,g,v);default:throw new SyntaxError("Wrong number of arguments")}};function a(p,g){if(!CX(g))throw new TypeError("Invalid index");var v=g.isScalar();if(v)return p.get(g.min());var b=g.size();if(b.length!==p._size.length)throw new hi(b.length,p._size.length);var w,E,T,C,S=g.min(),I=g.max();for(w=0,E=p._size.length;w<E;w++)_o(S[w],p._size[w]),_o(I[w],p._size[w]);var R=p._values,P=p._index,M=p._ptr,B=g.dimension(0),L=g.dimension(1),z=[],G=[];B.forEach(function(re,q){G[re]=q[0],z[re]=!0});var W=R?[]:void 0,te=[],Z=[];return L.forEach(function(re){for(Z.push(te.length),T=M[re],C=M[re+1];T<C;T++)w=P[T],z[w]===!0&&(te.push(G[w]),W&&W.push(R[T]))}),Z.push(te.length),new i({values:W,index:te,ptr:Z,size:b,datatype:p._datatype})}function u(p,g,v,b){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var w=g.size(),E=g.isScalar(),T;if(To(v)?(T=v.size(),v=v.toArray()):T=Fu(v),E){if(T.length!==0)throw new TypeError("Scalar expected");p.set(g.min(),v,b)}else{if(w.length!==1&&w.length!==2)throw new hi(w.length,p._size.length,"<");if(T.length<w.length){for(var C=0,S=0;w[C]===1&&T[C]===1;)C++;for(;w[C]===1;)S++,C++;v=_Ce(v,w.length,S,T)}if(!G2(w,T))throw new hi(w,T,">");if(w.length===1){var I=g.dimension(0);I.forEach(function(M,B){_o(M),p.set([M,0],v[B[0]],b)})}else{var R=g.dimension(0),P=g.dimension(1);R.forEach(function(M,B){_o(M),P.forEach(function(L,z){_o(L),p.set([M,L],v[B[0]][z[0]],b)})})}}return p}i.prototype.get=function(p){if(!wo(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new hi(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=p[0],v=p[1];_o(g,this._size[0]),_o(v,this._size[1]);var b=l(g,this._ptr[v],this._ptr[v+1],this._index);return b<this._ptr[v+1]&&this._index[b]===g?this._values[b]:0},i.prototype.set=function(p,g,v){if(!wo(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new hi(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var b=p[0],w=p[1],E=this._size[0],T=this._size[1],C=n,S=0;k0(this._datatype)&&(C=t.find(n,[this._datatype,this._datatype])||n,S=t.convert(0,this._datatype)),(b>E-1||w>T-1)&&(d(this,Math.max(b+1,E),Math.max(w+1,T),v),E=this._size[0],T=this._size[1]),_o(b,E),_o(w,T);var I=l(b,this._ptr[w],this._ptr[w+1],this._index);return I<this._ptr[w+1]&&this._index[I]===b?C(g,S)?c(I,w,this._values,this._index,this._ptr):this._values[I]=g:C(g,S)||f(I,b,w,g,this._values,this._index,this._ptr),this};function l(p,g,v,b){if(v-g===0)return v;for(var w=g;w<v;w++)if(b[w]===p)return w;return g}function c(p,g,v,b,w){v.splice(p,1),b.splice(p,1);for(var E=g+1;E<w.length;E++)w[E]--}function f(p,g,v,b,w,E,T){w.splice(p,0,b),E.splice(p,0,g);for(var C=v+1;C<T.length;C++)T[C]++}i.prototype.resize=function(p,g,v){if(!W2(p))throw new TypeError("Array or Matrix expected");var b=p.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(b.length!==2)throw new Error("Only two dimensions matrix are supported");b.forEach(function(E){if(!Vi(E)||!Es(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+_s(b)+")")});var w=v?this.clone():this;return d(w,b[0],b[1],g)};function d(p,g,v,b){var w=b||0,E=n,T=0;k0(p._datatype)&&(E=t.find(n,[p._datatype,p._datatype])||n,T=t.convert(0,p._datatype),w=t.convert(w,p._datatype));var C=!E(w,T),S=p._size[0],I=p._size[1],R,P,M;if(v>I){for(P=I;P<v;P++)if(p._ptr[P]=p._values.length,C)for(R=0;R<S;R++)p._values.push(w),p._index.push(R);p._ptr[v]=p._values.length}else v<I&&(p._ptr.splice(v+1,I-v),p._values.splice(p._ptr[v],p._values.length),p._index.splice(p._ptr[v],p._index.length));if(I=v,g>S){if(C){var B=0;for(P=0;P<I;P++){p._ptr[P]=p._ptr[P]+B,M=p._ptr[P+1]+B;var L=0;for(R=S;R<g;R++,L++)p._values.splice(M+L,0,w),p._index.splice(M+L,0,R),B++}p._ptr[I]=p._values.length}}else if(g<S){var z=0;for(P=0;P<I;P++){p._ptr[P]=p._ptr[P]-z;var G=p._ptr[P],W=p._ptr[P+1]-z;for(M=G;M<W;M++)R=p._index[M],R>g-1&&(p._values.splice(M,1),p._index.splice(M,1),z++)}p._ptr[P]=p._values.length}return p._size[0]=g,p._size[1]=v,p}i.prototype.reshape=function(p,g){if(!wo(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(re){if(!Vi(re)||!Es(re)||re<=-2||re===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+_s(p)+")")});var v=this._size[0]*this._size[1];p=kX(p,v);var b=p[0]*p[1];if(v!==b)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=g?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return w;for(var E=[],T=0;T<w._ptr.length;T++)for(var C=0;C<w._ptr[T+1]-w._ptr[T];C++)E.push(T);for(var S=w._values.slice(),I=w._index.slice(),R=0;R<w._index.length;R++){var P=I[R],M=E[R],B=P*w._size[1]+M;E[R]=B%p[1],I[R]=Math.floor(B/p[1])}w._values.length=0,w._index.length=0,w._ptr.length=p[1]+1,w._size=p.slice();for(var L=0;L<w._ptr.length;L++)w._ptr[L]=0;for(var z=0;z<S.length;z++){var G=I[z],W=E[z],te=S[z],Z=l(G,w._ptr[W],w._ptr[W+1],w._index);f(Z,G,W,te,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var p=new i({values:this._values?Bo(this._values):void 0,index:Bo(this._index),ptr:Bo(this._ptr),size:Bo(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,b=this._size[0],w=this._size[1],E=SCe(p),T=function(S,I,R){return E===1?p(S):E===2?p(S,[I,R]):p(S,[I,R],v)};return h(this,0,b-1,0,w-1,T,g)};function h(p,g,v,b,w,E,T){var C=[],S=[],I=[],R=n,P=0;k0(p._datatype)&&(R=t.find(n,[p._datatype,p._datatype])||n,P=t.convert(0,p._datatype));for(var M=function(H,X,ee){H=E(H,X,ee),R(H,P)||(C.push(H),S.push(X))},B=b;B<=w;B++){I.push(C.length);var L=p._ptr[B],z=p._ptr[B+1];if(T)for(var G=L;G<z;G++){var W=p._index[G];W>=g&&W<=v&&M(p._values[G],W-g,B-b)}else{for(var te={},Z=L;Z<z;Z++){var re=p._index[Z];te[re]=p._values[Z]}for(var q=g;q<=v;q++){var U=q in te?te[q]:0;M(U,q-g,B-b)}}}return I.push(C.length),new i({values:C,index:S,ptr:I,size:[v-g+1,w-b+1]})}i.prototype.forEach=function(p,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,b=this._size[0],w=this._size[1],E=0;E<w;E++){var T=this._ptr[E],C=this._ptr[E+1];if(g)for(var S=T;S<C;S++){var I=this._index[S];p(this._values[S],[I,E],v)}else{for(var R={},P=T;P<C;P++){var M=this._index[P];R[M]=this._values[P]}for(var B=0;B<b;B++){var L=B in R?R[B]:0;p(L,[B,E],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],g=0;g<p;g++)for(var v=this._ptr[g],b=this._ptr[g+1],w=v;w<b;w++){var E=this._index[w];yield{value:this._values[w],index:[E,g]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(p,g,v,b,w){var E=b[0],T=b[1],C=[],S,I;for(S=0;S<E;S++)for(C[S]=[],I=0;I<T;I++)C[S][I]=0;for(I=0;I<T;I++)for(var R=v[I],P=v[I+1],M=R;M<P;M++)S=g[M],C[S][I]=p?w?Bo(p[M]):p[M]:1;return C}return i.prototype.format=function(p){for(var g=this._size[0],v=this._size[1],b=this.density(),w="Sparse Matrix ["+_s(g,p)+" x "+_s(v,p)+"] density: "+_s(b,p)+`
`,E=0;E<v;E++)for(var T=this._ptr[E],C=this._ptr[E+1],S=T;S<C;S++){var I=this._index[S];w+=`
    (`+_s(I,p)+", "+_s(E,p)+") ==> "+(this._values?_s(this._values[S],p):"X")}return w},i.prototype.toString=function(){return _s(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(Vo(p)&&(p=p.toNumber()),!Vi(p)||!Es(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var g=p>0?p:0,v=p<0?-p:0,b=this._size[0],w=this._size[1],E=Math.min(b-v,w-g),T=[],C=[],S=[];S[0]=0;for(var I=g;I<w&&T.length<E;I++)for(var R=this._ptr[I],P=this._ptr[I+1],M=R;M<P;M++){var B=this._index[M];if(B===I-g+v){T.push(this._values[M]),C[T.length-1]=B-v;break}}return S.push(T.length),new i({values:T,index:C,ptr:S,size:[E,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,g,v,b,w){if(!wo(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(re){if(Vo(re)&&(re=re.toNumber()),!Vi(re)||!Es(re)||re<1)throw new Error("Size values must be positive integers");return re}),v){if(Vo(v)&&(v=v.toNumber()),!Vi(v)||!Es(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var E=n,T=0;k0(w)&&(E=t.find(n,[w,w])||n,T=t.convert(0,w));var C=v>0?v:0,S=v<0?-v:0,I=p[0],R=p[1],P=Math.min(I-S,R-C),M;if(wo(g)){if(g.length!==P)throw new Error("Invalid value array length");M=function(q){return g[q]}}else if(To(g)){var B=g.size();if(B.length!==1||B[0]!==P)throw new Error("Invalid matrix length");M=function(q){return g.get([q])}}else M=function(){return g};for(var L=[],z=[],G=[],W=0;W<R;W++){G.push(L.length);var te=W-C;if(te>=0&&te<P){var Z=M(te);E(Z,T)||(z.push(te+S),L.push(Z))}}return G.push(L.length),new i({values:L,index:z,ptr:G,size:[I,R]})},i.prototype.swapRows=function(p,g){if(!Vi(p)||!Es(p)||!Vi(g)||!Es(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return _o(p,this._size[0]),_o(g,this._size[0]),i._swapRows(p,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,g,v,b,w){for(var E=b[p],T=b[p+1],C=E;C<T;C++)w(v[C],g[C])},i._swapRows=function(p,g,v,b,w,E){for(var T=0;T<v;T++){var C=E[T],S=E[T+1],I=l(p,C,S,w),R=l(g,C,S,w);if(I<S&&R<S&&w[I]===p&&w[R]===g){if(b){var P=b[I];b[I]=b[R],b[R]=P}continue}if(I<S&&w[I]===p&&(R>=S||w[R]!==g)){var M=b?b[I]:void 0;w.splice(R,0,g),b&&b.splice(R,0,M),w.splice(R<=I?I+1:I,1),b&&b.splice(R<=I?I+1:I,1);continue}if(R<S&&w[R]===g&&(I>=S||w[I]!==p)){var B=b?b[R]:void 0;w.splice(I,0,p),b&&b.splice(I,0,B),w.splice(I<=R?R+1:R,1),b&&b.splice(I<=R?R+1:R,1)}}},i},{isClass:!0}),Cwt="number",Swt=["typed"];function Awt(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var n={"0b":2,"0o":8,"0x":16}[t[1]],r=t[2],i=t[3];return{input:e,radix:n,integerPart:r,fractionalPart:i}}else return null}function Dwt(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++){var i=parseInt(e.fractionalPart[r],e.radix);n+=i/Math.pow(e.radix,r+1)}var o=t+n;if(isNaN(o))throw new SyntaxError('String "'+e.input+'" is not a valid number');return o}var kwt=Nn(Cwt,Swt,e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=Awt(i);if(o)return Dwt(o);var s=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(s=Number(a[2]),i=a[1]);var u=Number(i);if(isNaN(u))throw new SyntaxError('String "'+i+'" is not a valid number');if(a){if(u>2**s-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));u>=2**(s-1)&&(u=u-2**s)}return u},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":t.referToSelf(r=>i=>km(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),Iwt="bignumber",Rwt=["typed","BigNumber"],Nwt=Nn(Iwt,Rwt,e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var s=o[2],a=n(o[1]),u=new n(2).pow(Number(s));if(a.gt(u.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var l=new n(2).pow(Number(s)-1);return a.gte(l)?a.sub(u):a}return new n(i)},BigNumber:function(i){return i},bigint:function(i){return new n(i.toString())},Unit:t.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":t.referToSelf(r=>i=>km(i,r))})}),Pwt="fraction",Owt=["typed","Fraction"],Fwt=Nn(Pwt,Owt,e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,o){return new n(i,o)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},bigint:function(i){return new n(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(r=>i=>{var o=i.clone();return o.value=r(i.value),o}),Object:function(i){return new n(i)},"Array | Matrix":t.referToSelf(r=>i=>km(i,r))})}),rce="matrix",Mwt=["typed","Matrix","DenseMatrix","SparseMatrix"],$wt=Nn(rce,Mwt,e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(rce,{"":function(){return o([])},string:function(a){return o([],a)},"string, string":function(a,u){return o([],a,u)},Array:function(a){return o(a)},Matrix:function(a){return o(a,a.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(s,a,u){if(a==="dense"||a==="default"||a===void 0)return new r(s,u);if(a==="sparse")return new i(s,u);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),ice="unaryMinus",Lwt=["typed"],Bwt=Nn(ice,Lwt,e=>{var{typed:t}=e;return t(ice,{number:NCe,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:t.referToSelf(n=>r=>{var i=r.clone();return i.value=t.find(n,i.valueType())(r.value),i}),"Array | Matrix":t.referToSelf(n=>r=>km(r,n))})}),oce="abs",jwt=["typed"],zwt=Nn(oce,jwt,e=>{var{typed:t}=e;return t(oce,{number:DCe,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":t.referToSelf(n=>r=>km(r,n))})}),sce="apply",Uwt=["typed","isInteger"],Vwt=Nn(sce,Uwt,e=>{var{typed:t,isInteger:n}=e;return t(sce,{"Array | Matrix, number | BigNumber, function":function(i,o,s){if(!n(o))throw new TypeError("Integer number expected for dimension");var a=Array.isArray(i)?Fu(i):i.size();if(o<0||o>=a.length)throw new Ng(o,a.length);return To(i)?i.create(jF(i.valueOf(),o,s)):jF(i,o,s)}})});function jF(e,t,n){var r,i,o;if(t<=0)if(Array.isArray(e[0])){for(o=Hwt(e),i=[],r=0;r<o.length;r++)i[r]=jF(o[r],t-1,n);return i}else return n(e);else{for(i=[],r=0;r<e.length;r++)i[r]=jF(e[r],t-1,n);return i}}function Hwt(e){var t=e.length,n=e[0].length,r,i,o=[];for(i=0;i<n;i++){var s=[];for(r=0;r<t;r++)s.push(e[r][i]);o.push(s)}return o}var ace="addScalar",qwt=["typed"],Wwt=Nn(ace,qwt,e=>{var{typed:t}=e;return t(ace,{"number, number":kCe,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"bigint, bigint":function(r,i){return r+i},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=t.find(n,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),uce="subtractScalar",Gwt=["typed"],Ywt=Nn(uce,Gwt,e=>{var{typed:t}=e;return t(uce,{"number, number":ICe,"Complex, Complex":function(r,i){return r.sub(i)},"BigNumber, BigNumber":function(r,i){return r.minus(i)},"bigint, bigint":function(r,i){return r-i},"Fraction, Fraction":function(r,i){return r.sub(i)},"Unit, Unit":t.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var o=r.clone();return o.value=t.find(n,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})}),Kwt="matAlgo11xS0s",Xwt=["typed","equalScalar"],OCe=Nn(Kwt,Xwt,e=>{var{typed:t,equalScalar:n}=e;return function(i,o,s,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],p,g=n,v=0,b=s;typeof d=="string"&&(p=d,g=t.find(n,[p,p]),v=t.convert(0,p),o=t.convert(o,p),b=t.find(s,[p,p]));for(var w=[],E=[],T=[],C=0;C<m;C++){T[C]=E.length;for(var S=c[C],I=c[C+1],R=S;R<I;R++){var P=l[R],M=a?b(o,u[R]):b(u[R],o);g(M,v)||(E.push(P),w.push(M))}}return T[m]=E.length,i.createSparseMatrix({values:w,index:E,ptr:T,size:[h,m],datatype:p})}}),Qwt="matAlgo12xSfs",Jwt=["typed","DenseMatrix"],Zwt=Nn(Qwt,Jwt,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,o,s,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],p,g=s;typeof d=="string"&&(p=d,o=t.convert(o,p),g=t.find(s,[p,p]));for(var v=[],b=[],w=[],E=0;E<m;E++){for(var T=E+1,C=c[E],S=c[E+1],I=C;I<S;I++){var R=l[I];b[R]=u[I],w[R]=T}for(var P=0;P<h;P++)E===0&&(v[P]=[]),w[P]===T?v[P][E]=a?g(o,b[P]):g(b[P],o):v[P][E]=a?g(o,0):g(0,o)}return new n({data:v,size:[h,m],datatype:p})}}),e_t="matAlgo14xDs",t_t=["typed"],RX=Nn(e_t,t_t,e=>{var{typed:t}=e;return function(i,o,s,a){var u=i._data,l=i._size,c=i._datatype,f,d=s;typeof c=="string"&&(f=c,o=t.convert(o,f),d=t.find(s,[f,f]));var h=l.length>0?n(d,0,l,l[0],u,o,a):[];return i.createDenseMatrix({data:h,size:Bo(l),datatype:f})};function n(r,i,o,s,a,u,l){var c=[];if(i===o.length-1)for(var f=0;f<s;f++)c[f]=l?r(u,a[f]):r(a[f],u);else for(var d=0;d<s;d++)c[d]=n(r,i+1,o,o[i+1],a[d],u,l);return c}}),n_t="matAlgo03xDSf",r_t=["typed"],i_t=Nn(n_t,r_t,e=>{var{typed:t}=e;return function(r,i,o,s){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new hi(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=u[0],g=u[1],v,b=0,w=o;typeof l=="string"&&l===m&&l!=="mixed"&&(v=l,b=t.convert(0,v),w=t.find(o,[v,v]));for(var E=[],T=0;T<p;T++)E[T]=[];for(var C=[],S=[],I=0;I<g;I++){for(var R=I+1,P=d[I],M=d[I+1],B=P;B<M;B++){var L=f[B];C[L]=s?w(c[B],a[L][I]):w(a[L][I],c[B]),S[L]=R}for(var z=0;z<p;z++)S[z]===R?E[z][I]=C[z]:E[z][I]=s?w(b,a[z][I]):w(a[z][I],b)}return r.createDenseMatrix({data:E,size:[p,g],datatype:l===r._datatype&&m===i._datatype?v:void 0})}}),o_t="matAlgo05xSfSf",s_t=["typed","equalScalar"],a_t=Nn(o_t,s_t,e=>{var{typed:t,equalScalar:n}=e;return function(i,o,s){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,p=o._size,g=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==p.length)throw new hi(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],b=c[1],w,E=n,T=0,C=s;typeof f=="string"&&f===g&&f!=="mixed"&&(w=f,E=t.find(n,[w,w]),T=t.convert(0,w),C=t.find(s,[w,w]));var S=a&&d?[]:void 0,I=[],R=[],P=S?[]:void 0,M=S?[]:void 0,B=[],L=[],z,G,W,te;for(G=0;G<b;G++){R[G]=I.length;var Z=G+1;for(W=l[G],te=l[G+1];W<te;W++)z=u[W],I.push(z),B[z]=Z,P&&(P[z]=a[W]);for(W=m[G],te=m[G+1];W<te;W++)z=h[W],B[z]!==Z&&I.push(z),L[z]=Z,M&&(M[z]=d[W]);if(S)for(W=R[G];W<I.length;){z=I[W];var re=B[z],q=L[z];if(re===Z||q===Z){var U=re===Z?P[z]:T,Y=q===Z?M[z]:T,H=C(U,Y);E(H,T)?I.splice(W,1):(S.push(H),W++)}}}return R[b]=I.length,i.createSparseMatrix({values:S,index:I,ptr:R,size:[v,b],datatype:f===i._datatype&&g===o._datatype?w:void 0})}}),u_t="matAlgo13xDD",l_t=["typed"],c_t=Nn(u_t,l_t,e=>{var{typed:t}=e;return function(i,o,s){var a=i._data,u=i._size,l=i._datatype,c=o._data,f=o._size,d=o._datatype,h=[];if(u.length!==f.length)throw new hi(u.length,f.length);for(var m=0;m<u.length;m++){if(u[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+f+")");h[m]=u[m]}var p,g=s;typeof l=="string"&&l===d&&(p=l,g=t.find(s,[p,p]));var v=h.length>0?n(g,0,h,h[0],a,c):[];return i.createDenseMatrix({data:v,size:h,datatype:p})};function n(r,i,o,s,a,u){var l=[];if(i===o.length-1)for(var c=0;c<s;c++)l[c]=r(a[c],u[c]);else for(var f=0;f<s;f++)l[f]=n(r,i+1,o,o[i+1],a[f],u[f]);return l}}),f_t="broadcast",d_t=["concat"],h_t=Nn(f_t,d_t,e=>{var{concat:t}=e;return function(i,o){var s=Math.max(i._size.length,o._size.length);if(i._size.length===o._size.length&&i._size.every((m,p)=>m===o._size[p]))return[i,o];for(var a=n(i._size,s,0),u=n(o._size,s,0),l=[],c=0;c<s;c++)l[c]=Math.max(a[c],u[c]);MF(a,l),MF(u,l);var f=i.clone(),d=o.clone();f._size.length<s?f.reshape(n(f._size,s,1)):d._size.length<s&&d.reshape(n(d._size,s,1));for(var h=0;h<s;h++)f._size[h]<l[h]&&(f=r(f,l[h],h)),d._size[h]<l[h]&&(d=r(d,l[h],h));return[f,d]};function n(i,o,s){return[...Array(o-i.length).fill(s),...i]}function r(i,o,s){return t(...Array(o).fill(i),s)}}),p_t="matrixAlgorithmSuite",m_t=["typed","matrix","concat"],FCe=Nn(p_t,m_t,e=>{var{typed:t,matrix:n,concat:r}=e,i=c_t({typed:t}),o=RX({typed:t}),s=h_t({concat:r});return function(u){var l=u.elop,c=u.SD||u.DS,f;l?(f={"DenseMatrix, DenseMatrix":(p,g)=>i(...s(p,g),l),"Array, Array":(p,g)=>i(...s(n(p),n(g)),l).valueOf(),"Array, DenseMatrix":(p,g)=>i(...s(n(p),g),l),"DenseMatrix, Array":(p,g)=>i(...s(p,n(g)),l)},u.SS&&(f["SparseMatrix, SparseMatrix"]=(p,g)=>u.SS(...s(p,g),l,!1)),u.DS&&(f["DenseMatrix, SparseMatrix"]=(p,g)=>u.DS(...s(p,g),l,!1),f["Array, SparseMatrix"]=(p,g)=>u.DS(...s(n(p),g),l,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(p,g)=>c(...s(g,p),l,!0),f["SparseMatrix, Array"]=(p,g)=>c(...s(n(g),p),l,!0))):(f={"DenseMatrix, DenseMatrix":t.referToSelf(p=>(g,v)=>i(...s(g,v),p)),"Array, Array":t.referToSelf(p=>(g,v)=>i(...s(n(g),n(v)),p).valueOf()),"Array, DenseMatrix":t.referToSelf(p=>(g,v)=>i(...s(n(g),v),p)),"DenseMatrix, Array":t.referToSelf(p=>(g,v)=>i(...s(g,n(v)),p))},u.SS&&(f["SparseMatrix, SparseMatrix"]=t.referToSelf(p=>(g,v)=>u.SS(...s(g,v),p,!1))),u.DS&&(f["DenseMatrix, SparseMatrix"]=t.referToSelf(p=>(g,v)=>u.DS(...s(g,v),p,!1)),f["Array, SparseMatrix"]=t.referToSelf(p=>(g,v)=>u.DS(...s(n(g),v),p,!1))),c&&(f["SparseMatrix, DenseMatrix"]=t.referToSelf(p=>(g,v)=>c(...s(v,g),p,!0)),f["SparseMatrix, Array"]=t.referToSelf(p=>(g,v)=>c(...s(n(v),g),p,!0))));var d=u.scalar||"any",h=u.Ds||u.Ss;h&&(l?(f["DenseMatrix,"+d]=(p,g)=>o(p,g,l,!1),f[d+", DenseMatrix"]=(p,g)=>o(g,p,l,!0),f["Array,"+d]=(p,g)=>o(n(p),g,l,!1).valueOf(),f[d+", Array"]=(p,g)=>o(n(g),p,l,!0).valueOf()):(f["DenseMatrix,"+d]=t.referToSelf(p=>(g,v)=>o(g,v,p,!1)),f[d+", DenseMatrix"]=t.referToSelf(p=>(g,v)=>o(v,g,p,!0)),f["Array,"+d]=t.referToSelf(p=>(g,v)=>o(n(g),v,p,!1).valueOf()),f[d+", Array"]=t.referToSelf(p=>(g,v)=>o(n(v),g,p,!0).valueOf())));var m=u.sS!==void 0?u.sS:u.Ss;return l?(u.Ss&&(f["SparseMatrix,"+d]=(p,g)=>u.Ss(p,g,l,!1)),m&&(f[d+", SparseMatrix"]=(p,g)=>m(g,p,l,!0))):(u.Ss&&(f["SparseMatrix,"+d]=t.referToSelf(p=>(g,v)=>u.Ss(g,v,p,!1))),m&&(f[d+", SparseMatrix"]=t.referToSelf(p=>(g,v)=>m(v,g,p,!0)))),l&&l.signatures&&eCe(f,l.signatures),f}}),g_t="matAlgo01xDSid",y_t=["typed"],MCe=Nn(g_t,y_t,e=>{var{typed:t}=e;return function(r,i,o,s){var a=r._data,u=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,d=i._ptr,h=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(u.length!==h.length)throw new hi(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=u[0],g=u[1],v=typeof l=="string"&&l!=="mixed"&&l===m?l:void 0,b=v?t.find(o,[v,v]):o,w,E,T=[];for(w=0;w<p;w++)T[w]=[];var C=[],S=[];for(E=0;E<g;E++){for(var I=E+1,R=d[E],P=d[E+1],M=R;M<P;M++)w=f[M],C[w]=s?b(c[M],a[w][E]):b(a[w][E],c[M]),S[w]=I;for(w=0;w<p;w++)S[w]===I?T[w][E]=C[w]:T[w][E]=a[w][E]}return r.createDenseMatrix({data:T,size:[p,g],datatype:l===r._datatype&&m===i._datatype?v:void 0})}}),v_t="matAlgo04xSidSid",b_t=["typed","equalScalar"],x_t=Nn(v_t,b_t,e=>{var{typed:t,equalScalar:n}=e;return function(i,o,s){var a=i._values,u=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),d=o._values,h=o._index,m=o._ptr,p=o._size,g=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==p.length)throw new hi(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],b=c[1],w,E=n,T=0,C=s;typeof f=="string"&&f===g&&f!=="mixed"&&(w=f,E=t.find(n,[w,w]),T=t.convert(0,w),C=t.find(s,[w,w]));var S=a&&d?[]:void 0,I=[],R=[],P=a&&d?[]:void 0,M=a&&d?[]:void 0,B=[],L=[],z,G,W,te,Z;for(G=0;G<b;G++){R[G]=I.length;var re=G+1;for(te=l[G],Z=l[G+1],W=te;W<Z;W++)z=u[W],I.push(z),B[z]=re,P&&(P[z]=a[W]);for(te=m[G],Z=m[G+1],W=te;W<Z;W++)if(z=h[W],B[z]===re){if(P){var q=C(P[z],d[W]);E(q,T)?B[z]=null:P[z]=q}}else I.push(z),L[z]=re,M&&(M[z]=d[W]);if(P&&M)for(W=R[G];W<I.length;)z=I[W],B[z]===re?(S[W]=P[z],W++):L[z]===re?(S[W]=M[z],W++):I.splice(W,1)}return R[b]=I.length,i.createSparseMatrix({values:S,index:I,ptr:R,size:[v,b],datatype:f===i._datatype&&g===o._datatype?w:void 0})}}),w_t="matAlgo10xSids",__t=["typed","DenseMatrix"],$Ce=Nn(w_t,__t,e=>{var{typed:t,DenseMatrix:n}=e;return function(i,o,s,a){var u=i._values,l=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h=f[0],m=f[1],p,g=s;typeof d=="string"&&(p=d,o=t.convert(o,p),g=t.find(s,[p,p]));for(var v=[],b=[],w=[],E=0;E<m;E++){for(var T=E+1,C=c[E],S=c[E+1],I=C;I<S;I++){var R=l[I];b[R]=u[I],w[R]=T}for(var P=0;P<h;P++)E===0&&(v[P]=[]),w[P]===T?v[P][E]=a?g(o,b[P]):g(b[P],o):v[P][E]=o}return new n({data:v,size:[h,m],datatype:p})}}),E_t="multiplyScalar",T_t=["typed"],C_t=Nn(E_t,T_t,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":RCe,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"bigint, bigint":function(r,i){return r*i},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),lce="multiply",S_t=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],A_t=Nn(lce,S_t,e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:o,dot:s}=e,a=OCe({typed:t,equalScalar:o}),u=RX({typed:t});function l(T,C){switch(T.length){case 1:switch(C.length){case 1:if(T[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(T[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+T[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(T[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+T[1]+") must match Vector length ("+C[0]+")");break;case 2:if(T[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+T[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+T.length+" dimensions)")}}function c(T,C,S){if(S===0)throw new Error("Cannot multiply two empty vectors");return s(T,C)}function f(T,C){if(C.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(T,C)}function d(T,C){var S=T._data,I=T._size,R=T._datatype||T.getDataType(),P=C._data,M=C._size,B=C._datatype||C.getDataType(),L=I[0],z=M[1],G,W=r,te=i;R&&B&&R===B&&typeof R=="string"&&R!=="mixed"&&(G=R,W=t.find(r,[G,G]),te=t.find(i,[G,G]));for(var Z=[],re=0;re<z;re++){for(var q=te(S[0],P[0][re]),U=1;U<L;U++)q=W(q,te(S[U],P[U][re]));Z[re]=q}return T.createDenseMatrix({data:Z,size:[z],datatype:R===T._datatype&&B===C._datatype?G:void 0})}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":p,"SparseMatrix, any":b}),m=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":g,"DenseMatrix, SparseMatrix":v,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":E});function p(T,C){var S=T._data,I=T._size,R=T._datatype||T.getDataType(),P=C._data,M=C._datatype||C.getDataType(),B=I[0],L=I[1],z,G=r,W=i;R&&M&&R===M&&typeof R=="string"&&R!=="mixed"&&(z=R,G=t.find(r,[z,z]),W=t.find(i,[z,z]));for(var te=[],Z=0;Z<B;Z++){for(var re=S[Z],q=W(re[0],P[0]),U=1;U<L;U++)q=G(q,W(re[U],P[U]));te[Z]=q}return T.createDenseMatrix({data:te,size:[B],datatype:R===T._datatype&&M===C._datatype?z:void 0})}function g(T,C){var S=T._data,I=T._size,R=T._datatype||T.getDataType(),P=C._data,M=C._size,B=C._datatype||C.getDataType(),L=I[0],z=I[1],G=M[1],W,te=r,Z=i;R&&B&&R===B&&typeof R=="string"&&R!=="mixed"&&R!=="mixed"&&(W=R,te=t.find(r,[W,W]),Z=t.find(i,[W,W]));for(var re=[],q=0;q<L;q++){var U=S[q];re[q]=[];for(var Y=0;Y<G;Y++){for(var H=Z(U[0],P[0][Y]),X=1;X<z;X++)H=te(H,Z(U[X],P[X][Y]));re[q][Y]=H}}return T.createDenseMatrix({data:re,size:[L,G],datatype:R===T._datatype&&B===C._datatype?W:void 0})}function v(T,C){var S=T._data,I=T._size,R=T._datatype||T.getDataType(),P=C._values,M=C._index,B=C._ptr,L=C._size,z=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!P)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var G=I[0],W=L[1],te,Z=r,re=i,q=o,U=0;R&&z&&R===z&&typeof R=="string"&&R!=="mixed"&&(te=R,Z=t.find(r,[te,te]),re=t.find(i,[te,te]),q=t.find(o,[te,te]),U=t.convert(0,te));for(var Y=[],H=[],X=[],ee=C.createSparseMatrix({values:Y,index:H,ptr:X,size:[G,W],datatype:R===T._datatype&&z===C._datatype?te:void 0}),le=0;le<W;le++){X[le]=H.length;var Ee=B[le],be=B[le+1];if(be>Ee)for(var Ce=0,Oe=0;Oe<G;Oe++){for(var me=Oe+1,he=void 0,Fe=Ee;Fe<be;Fe++){var Pe=M[Fe];Ce!==me?(he=re(S[Oe][Pe],P[Fe]),Ce=me):he=Z(he,re(S[Oe][Pe],P[Fe]))}Ce===me&&!q(he,U)&&(H.push(Oe),Y.push(he))}}return X[W]=H.length,ee}function b(T,C){var S=T._values,I=T._index,R=T._ptr,P=T._datatype||T._data===void 0?T._datatype:T.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=C._data,B=C._datatype||C.getDataType(),L=T._size[0],z=C._size[0],G=[],W=[],te=[],Z,re=r,q=i,U=o,Y=0;P&&B&&P===B&&typeof P=="string"&&P!=="mixed"&&(Z=P,re=t.find(r,[Z,Z]),q=t.find(i,[Z,Z]),U=t.find(o,[Z,Z]),Y=t.convert(0,Z));var H=[],X=[];te[0]=0;for(var ee=0;ee<z;ee++){var le=M[ee];if(!U(le,Y))for(var Ee=R[ee],be=R[ee+1],Ce=Ee;Ce<be;Ce++){var Oe=I[Ce];X[Oe]?H[Oe]=re(H[Oe],q(le,S[Ce])):(X[Oe]=!0,W.push(Oe),H[Oe]=q(le,S[Ce]))}}for(var me=W.length,he=0;he<me;he++){var Fe=W[he];G[he]=H[Fe]}return te[1]=W.length,T.createSparseMatrix({values:G,index:W,ptr:te,size:[L,1],datatype:P===T._datatype&&B===C._datatype?Z:void 0})}function w(T,C){var S=T._values,I=T._index,R=T._ptr,P=T._datatype||T._data===void 0?T._datatype:T.getDataType();if(!S)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var M=C._data,B=C._datatype||C.getDataType(),L=T._size[0],z=C._size[0],G=C._size[1],W,te=r,Z=i,re=o,q=0;P&&B&&P===B&&typeof P=="string"&&P!=="mixed"&&(W=P,te=t.find(r,[W,W]),Z=t.find(i,[W,W]),re=t.find(o,[W,W]),q=t.convert(0,W));for(var U=[],Y=[],H=[],X=T.createSparseMatrix({values:U,index:Y,ptr:H,size:[L,G],datatype:P===T._datatype&&B===C._datatype?W:void 0}),ee=[],le=[],Ee=0;Ee<G;Ee++){H[Ee]=Y.length;for(var be=Ee+1,Ce=0;Ce<z;Ce++){var Oe=M[Ce][Ee];if(!re(Oe,q))for(var me=R[Ce],he=R[Ce+1],Fe=me;Fe<he;Fe++){var Pe=I[Fe];le[Pe]!==be?(le[Pe]=be,Y.push(Pe),ee[Pe]=Z(Oe,S[Fe])):ee[Pe]=te(ee[Pe],Z(Oe,S[Fe]))}}for(var Je=H[Ee],ut=Y.length,Ke=Je;Ke<ut;Ke++){var tt=Y[Ke];U[Ke]=ee[tt]}}return H[G]=Y.length,X}function E(T,C){var S=T._values,I=T._index,R=T._ptr,P=T._datatype||T._data===void 0?T._datatype:T.getDataType(),M=C._values,B=C._index,L=C._ptr,z=C._datatype||C._data===void 0?C._datatype:C.getDataType(),G=T._size[0],W=C._size[1],te=S&&M,Z,re=r,q=i;P&&z&&P===z&&typeof P=="string"&&P!=="mixed"&&(Z=P,re=t.find(r,[Z,Z]),q=t.find(i,[Z,Z]));for(var U=te?[]:void 0,Y=[],H=[],X=T.createSparseMatrix({values:U,index:Y,ptr:H,size:[G,W],datatype:P===T._datatype&&z===C._datatype?Z:void 0}),ee=te?[]:void 0,le=[],Ee,be,Ce,Oe,me,he,Fe,Pe,Je=0;Je<W;Je++){H[Je]=Y.length;var ut=Je+1;for(me=L[Je],he=L[Je+1],Oe=me;Oe<he;Oe++)if(Pe=B[Oe],te)for(be=R[Pe],Ce=R[Pe+1],Ee=be;Ee<Ce;Ee++)Fe=I[Ee],le[Fe]!==ut?(le[Fe]=ut,Y.push(Fe),ee[Fe]=q(M[Oe],S[Ee])):ee[Fe]=re(ee[Fe],q(M[Oe],S[Ee]));else for(be=R[Pe],Ce=R[Pe+1],Ee=be;Ee<Ce;Ee++)Fe=I[Ee],le[Fe]!==ut&&(le[Fe]=ut,Y.push(Fe));if(te)for(var Ke=H[Je],tt=Y.length,pt=Ke;pt<tt;pt++){var Dt=Y[pt];U[pt]=ee[Dt]}}return H[W]=Y.length,X}return t(lce,i,{"Array, Array":t.referTo("Matrix, Matrix",T=>(C,S)=>{l(Fu(C),Fu(S));var I=T(n(C),n(S));return To(I)?I.valueOf():I}),"Matrix, Matrix":function(C,S){var I=C.size(),R=S.size();return l(I,R),I.length===1?R.length===1?c(C,S,I[0]):f(C,S):R.length===1?h(C,S):m(C,S)},"Matrix, Array":t.referTo("Matrix,Matrix",T=>(C,S)=>T(C,n(S))),"Array, Matrix":t.referToSelf(T=>(C,S)=>T(n(C,S.storage()),S)),"SparseMatrix, any":function(C,S){return a(C,S,i,!1)},"DenseMatrix, any":function(C,S){return u(C,S,i,!1)},"any, SparseMatrix":function(C,S){return a(S,C,i,!0)},"any, DenseMatrix":function(C,S){return u(S,C,i,!0)},"Array, any":function(C,S){return u(n(C),S,i,!1).valueOf()},"any, Array":function(C,S){return u(n(S),C,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(T=>(C,S,I)=>{for(var R=T(C,S),P=0;P<I.length;P++)R=T(R,I[P]);return R})})}),D_t="sqrt",k_t=["config","typed","Complex"],I_t=Nn(D_t,k_t,e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(s){return s.sqrt()},BigNumber:function(s){return!s.isNegative()||t.predictable?s.sqrt():i(s.toNumber())},Unit:function(s){return s.pow(.5)}});function i(o){return isNaN(o)?NaN:o>=0||t.predictable?Math.sqrt(o):new r(o,0).sqrt()}}),cce="subtract",R_t=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],N_t=Nn(cce,R_t,e=>{var{typed:t,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:o,DenseMatrix:s,concat:a}=e,u=MCe({typed:t}),l=i_t({typed:t}),c=a_t({typed:t,equalScalar:r}),f=$Ce({typed:t,DenseMatrix:s}),d=Zwt({typed:t,DenseMatrix:s}),h=FCe({typed:t,matrix:n,concat:a});return t(cce,{"any, any":i},h({elop:i,SS:c,DS:u,SD:l,Ss:d,sS:f}))}),fce="conj",P_t=["typed"],O_t=Nn(fce,P_t,e=>{var{typed:t}=e;return t(fce,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":t.referToSelf(n=>r=>km(r,n))})}),dce="concat",F_t=["typed","matrix","isInteger"],M_t=Nn(dce,F_t,e=>{var{typed:t,matrix:n,isInteger:r}=e;return t(dce,{"...Array | Matrix | number | BigNumber":function(o){var s,a=o.length,u=-1,l,c=!1,f=[];for(s=0;s<a;s++){var d=o[s];if(To(d)&&(c=!0),Vi(d)||Vo(d)){if(s!==a-1)throw new Error("Dimension must be specified as last argument");if(l=u,u=d.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||s>0&&u>l)throw new Ng(u,l+1)}else{var h=Bo(d).valueOf(),m=Fu(h);if(f[s]=h,l=u,u=m.length-1,s>0&&u!==l)throw new hi(l+1,u+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var p=f.shift();f.length;)p=CCe(p,f.shift(),u);return c?n(p):p},"...string":function(o){return o.join("")}})});function $_t(e,t,n,r,i){if(BE.isTypedFunction(e)){var o=[t,n,r],s=BE.resolve(e,o);if(s)return f(s.implementation,o);var a=[t,n],u=BE.resolve(e,a);if(u)return f(u.implementation,a);var l=[t],c=BE.resolve(e,l);return c?f(c.implementation,l):f(e,o)}else return e(t,n,r);function f(d,h){try{return d.apply(d,h)}catch(g){var m;if(g instanceof TypeError&&((m=g.data)===null||m===void 0?void 0:m.category)==="wrongType"){var p=[];throw p.push("value: ".concat(wh(t))),h.length>=2&&p.push("index: ".concat(wh(n))),h.length>=3&&p.push("array: ".concat(wh(r))),new TypeError("Function ".concat(i," cannot apply callback arguments ")+"".concat(e.name,"(").concat(p.join(", "),") at index ").concat(JSON.stringify(n)))}else throw new TypeError("Function ".concat(i," cannot apply callback arguments ")+"to function ".concat(e.name,": ").concat(g.message))}}}var hce="identity",L_t=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],B_t=Nn(hce,L_t,e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:o,SparseMatrix:s}=e;return t(hce,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(c){return r(c)},"number | BigNumber":function(c){return u(c,c,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return u(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return u(c,f,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,d){return u(c,f,d)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(l,c){switch(l.length){case 0:return c?r(c):[];case 1:return u(l[0],l[0],c);case 2:return u(l[0],l[1],c);default:throw new Error("Vector containing two values expected")}}function u(l,c,f){var d=Vo(l)||Vo(c)?i:null;if(Vo(l)&&(l=l.toNumber()),Vo(c)&&(c=c.toNumber()),!Es(l)||l<1)throw new Error("Parameters in function identity must be positive integers");if(!Es(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var h=d?new i(1):1,m=d?new d(0):0,p=[l,c];if(f){if(f==="sparse")return s.diagonal(p,h,0,m);if(f==="dense")return o.diagonal(p,h,0,m);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var g=jV([],p,m),v=l<c?l:c,b=0;b<v;b++)g[b][b]=h;return g}}),pce="map",j_t=["typed"],z_t=Nn(pce,j_t,e=>{var{typed:t}=e;return t(pce,{"Array, function":U_t,"Matrix, function":function(r,i){return r.map(i)}})});function U_t(e,t){var n=function r(i,o){return Array.isArray(i)?i.map(function(s,a){return r(s,o.concat(a))}):$_t(t,i,o,e,"map")};return n(e,[])}function V_t(){throw new Error('No "bignumber" implementation available')}function H_t(){throw new Error('No "fraction" implementation available')}function q_t(){throw new Error('No "matrix" implementation available')}var mce="size",W_t=["typed","config","?matrix"],G_t=Nn(mce,W_t,e=>{var{typed:t,config:n,matrix:r}=e;return t(mce,{Matrix:function(o){return o.create(o.size())},Array:Fu,string:function(o){return n.matrix==="Array"?[o.length]:r([o.length])},"number | Complex | BigNumber | Unit | boolean | null":function(o){return n.matrix==="Array"?[]:r?r([]):q_t()}})});function zF(e,t,n){var r;return String(e).includes("Unexpected type")?(r=arguments.length>2?" (type: "+wh(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):String(e).includes("complex numbers")?(r=arguments.length>2?" (type: "+wh(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}var Y_t="numeric",K_t=["number","?bignumber","?fraction"],X_t=Nn(Y_t,K_t,e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:s=>t(s),BigNumber:n?s=>n(s):V_t,bigint:s=>BigInt(s),Fraction:r?s=>r(s):H_t};return function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",l=arguments.length>2?arguments[2]:void 0;if(l!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=wh(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(u in o))throw new TypeError("Cannot convert "+a+' to type "'+u+'"; valid output types are '+Object.keys(o).join(", "));return u===c?a:o[u](a)}}),gce="divideScalar",Q_t=["typed","numeric"],J_t=Nn(gce,Q_t,e=>{var{typed:t,numeric:n}=e;return t(gce,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"bigint, bigint":function(i,o){return i/o},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),yce="log",Z_t=["config","typed","divideScalar","Complex"],eEt=Nn(yce,Z_t,e=>{var{typed:t,config:n,divideScalar:r,Complex:i}=e;return t(yce,{number:function(s){return s>=0||n.predictable?fwt(s):new i(s,0).log()},Complex:function(s){return s.log()},BigNumber:function(s){return!s.isNegative()||n.predictable?s.ln():new i(s.toNumber(),0).log()},"any, any":t.referToSelf(o=>(s,a)=>r(o(s),o(a)))})}),vce="add",tEt=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],nEt=Nn(vce,tEt,e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:o,SparseMatrix:s,concat:a}=e,u=MCe({typed:t}),l=x_t({typed:t,equalScalar:i}),c=$Ce({typed:t,DenseMatrix:o}),f=FCe({typed:t,matrix:n,concat:a});return t(vce,{"any, any":r,"any, any, ...any":t.referToSelf(d=>(h,m,p)=>{for(var g=d(h,m),v=0;v<p.length;v++)g=d(g,p[v]);return g})},f({elop:r,DS:u,SS:l,Ss:c}))}),bce="dot",rEt=["typed","addScalar","multiplyScalar","conj","size"],iEt=Nn(bce,rEt,e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:o}=e;return t(bce,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":u});function s(c,f){var d=l(c),h=l(f),m,p;if(d.length===1)m=d[0];else if(d.length===2&&d[1]===1)m=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m!==p)throw new RangeError("Vectors must have equal length ("+m+" != "+p+")");if(m===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return m}function a(c,f){var d=s(c,f),h=To(c)?c._data:c,m=To(c)?c._datatype||c.getDataType():void 0,p=To(f)?f._data:f,g=To(f)?f._datatype||f.getDataType():void 0,v=l(c).length===2,b=l(f).length===2,w=n,E=r;if(m&&g&&m===g&&typeof m=="string"&&m!=="mixed"){var T=m;w=t.find(n,[T,T]),E=t.find(r,[T,T])}if(!v&&!b){for(var C=E(i(h[0]),p[0]),S=1;S<d;S++)C=w(C,E(i(h[S]),p[S]));return C}if(!v&&b){for(var I=E(i(h[0]),p[0][0]),R=1;R<d;R++)I=w(I,E(i(h[R]),p[R][0]));return I}if(v&&!b){for(var P=E(i(h[0][0]),p[0]),M=1;M<d;M++)P=w(P,E(i(h[M][0]),p[M]));return P}if(v&&b){for(var B=E(i(h[0][0]),p[0][0]),L=1;L<d;L++)B=w(B,E(i(h[L][0]),p[L][0]));return B}}function u(c,f){s(c,f);for(var d=c._index,h=c._values,m=f._index,p=f._values,g=0,v=n,b=r,w=0,E=0;w<d.length&&E<m.length;){var T=d[w],C=m[E];if(T<C){w++;continue}if(T>C){E++;continue}T===C&&(g=v(g,b(h[w],p[E])),w++,E++)}return g}function l(c){return To(c)?c.size():o(c)}}),xce="det",oEt=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],sEt=Nn(xce,oEt,e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:o,isZero:s,unaryMinus:a}=e;return t(xce,{any:function(c){return Bo(c)},"Array | Matrix":function(c){var f;switch(To(c)?f=c.size():Array.isArray(c)?(c=n(c),f=c.size()):f=[],f.length){case 0:return Bo(c);case 1:if(f[0]===1)return Bo(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+_s(f)+")");case 2:{var d=f[0],h=f[1];if(d===h)return u(c.clone().valueOf(),d);if(h===0)return 1;throw new RangeError("Matrix must be square (size: "+_s(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_s(f)+")")}}});function u(l,c,f){if(c===1)return Bo(l[0][0]);if(c===2)return r(i(l[0][0],l[1][1]),i(l[1][0],l[0][1]));for(var d=!1,h=new Array(c).fill(0).map((S,I)=>I),m=0;m<c;m++){var p=h[m];if(s(l[p][m])){var g=void 0;for(g=m+1;g<c;g++)if(!s(l[h[g]][m])){p=h[g],h[g]=h[m],h[m]=p,d=!d;break}if(g===c)return l[p][m]}for(var v=l[p][m],b=m===0?1:l[h[m-1]][m-1],w=m+1;w<c;w++)for(var E=h[w],T=m+1;T<c;T++)l[E][T]=o(r(i(l[E][T],v),i(l[E][m],l[p][T])),b)}var C=l[h[c-1]][c-1];return d?a(C):C}}),wce="inv",aEt=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],uEt=Nn(wce,aEt,e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:o,unaryMinus:s,det:a,identity:u,abs:l}=e;return t(wce,{"Array | Matrix":function(d){var h=To(d)?d.size():Fu(d);switch(h.length){case 1:if(h[0]===1)return To(d)?n([r(1,d.valueOf()[0])]):[r(1,d[0])];throw new RangeError("Matrix must be square (size: "+_s(h)+")");case 2:{var m=h[0],p=h[1];if(m===p)return To(d)?n(c(d.valueOf(),m,p),d.storage()):c(d,m,p);throw new RangeError("Matrix must be square (size: "+_s(h)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+_s(h)+")")}},any:function(d){return r(1,d)}});function c(f,d,h){var m,p,g,v,b;if(d===1){if(v=f[0][0],v===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,v)]]}else if(d===2){var w=a(f);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(f[1][1],w),r(s(f[0][1]),w)],[r(s(f[1][0]),w),r(f[0][0],w)]]}else{var E=f.concat();for(m=0;m<d;m++)E[m]=E[m].concat();for(var T=u(d).valueOf(),C=0;C<h;C++){var S=l(E[C][C]),I=C;for(m=C+1;m<d;)l(E[m][C])>S&&(S=l(E[m][C]),I=m),m++;if(S===0)throw Error("Cannot calculate inverse, determinant is zero");m=I,m!==C&&(b=E[C],E[C]=E[m],E[m]=b,b=T[C],T[C]=T[m],T[m]=b);var R=E[C],P=T[C];for(m=0;m<d;m++){var M=E[m],B=T[m];if(m!==C){if(M[C]!==0){for(g=r(s(M[C]),R[C]),p=C;p<h;p++)M[p]=i(M[p],o(g,R[p]));for(p=0;p<h;p++)B[p]=i(B[p],o(g,P[p]))}}else{for(g=R[C],p=C;p<h;p++)M[p]=r(M[p],g);for(p=0;p<h;p++)B[p]=r(B[p],g)}}}return T}}}),lEt="divide",cEt=["typed","matrix","multiply","equalScalar","divideScalar","inv"],fEt=Nn(lEt,cEt,e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:o,inv:s}=e,a=OCe({typed:t,equalScalar:i}),u=RX({typed:t});return t("divide",eCe({"Array | Matrix, Array | Matrix":function(c,f){return r(c,s(f))},"DenseMatrix, any":function(c,f){return u(c,f,o,!1)},"SparseMatrix, any":function(c,f){return a(c,f,o,!1)},"Array, any":function(c,f){return u(n(c),f,o,!1).valueOf()},"any, Array | Matrix":function(c,f){return r(c,s(f))}},o.signatures))}),_ce="mean",dEt=["typed","add","divide"],hEt=Nn(_ce,dEt,e=>{var{typed:t,add:n,divide:r}=e;return t(_ce,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":i,"...":function(a){if(awt(a))throw new TypeError("Scalar values expected in function mean");return o(a)}});function i(s,a){try{var u=uwt(s,a,n),l=Array.isArray(s)?Fu(s):s.size();return r(u,l[a])}catch(c){throw zF(c,"mean")}}function o(s){var a,u=0;if($F(s,function(l){try{a=a===void 0?l:n(a,l),u++}catch(c){throw zF(c,"mean",l)}}),u===0)throw new Error("Cannot calculate the mean of an empty array");return r(a,u)}}),B7="unbiased",Ece="variance",pEt=["typed","add","subtract","multiply","divide","apply","isNaN"],mEt=Nn(Ece,pEt,e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:o,apply:s,isNaN:a}=e;return t(Ece,{"Array | Matrix":function(f){return u(f,B7)},"Array | Matrix, string":u,"Array | Matrix, number | BigNumber":function(f,d){return l(f,d,B7)},"Array | Matrix, number | BigNumber, string":l,"...":function(f){return u(f,B7)}});function u(c,f){var d,h=0;if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if($F(c,function(g){try{d=d===void 0?g:n(d,g),h++}catch(v){throw zF(v,"variance",g)}}),h===0)throw new Error("Cannot calculate variance of an empty array");var m=o(d,h);if(d=void 0,$F(c,function(g){var v=r(g,m);d=d===void 0?i(v,v):n(d,i(v,v))}),a(d))return d;switch(f){case"uncorrected":return o(d,h);case"biased":return o(d,h+1);case"unbiased":{var p=Vo(d)?d.mul(0):0;return h===1?p:o(d,h-1)}default:throw new Error('Unknown normalization "'+f+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function l(c,f,d){try{if(c.length===0)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return s(c,f,h=>u(h,d))}catch(h){throw zF(h,"variance")}}}),Tce="std",gEt=["typed","map","sqrt","variance"],yEt=Nn(Tce,gEt,e=>{var{typed:t,map:n,sqrt:r,variance:i}=e;return t(Tce,{"Array | Matrix":o,"Array | Matrix, string":o,"Array | Matrix, number | BigNumber":o,"Array | Matrix, number | BigNumber, string":o,"...":function(a){return o(a)}});function o(s,a){if(s.length===0)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var u=i.apply(null,arguments);return W2(u)?n(u,r):r(u)}catch(l){throw l instanceof TypeError&&l.message.includes(" variance")?new TypeError(l.message.replace(" variance"," std")):l}}}),NX=Ixt({config:yw}),PX=Fxt({}),LCe=Vxt({}),OX=Wxt({}),iR=owt({Matrix:OX}),Yr=Pbt({BigNumber:NX,Complex:PX,DenseMatrix:iR,Fraction:LCe}),vEt=zwt({typed:Yr}),q8=Wwt({typed:Yr}),bEt=O_t({typed:Yr}),cC=wwt({config:yw,typed:Yr}),BCe=cwt({typed:Yr}),xEt=mwt({equalScalar:cC,typed:Yr}),wEt=z_t({typed:Yr}),jCe=C_t({typed:Yr}),_Et=kwt({typed:Yr}),FX=Twt({Matrix:OX,equalScalar:cC,typed:Yr}),zCe=Ywt({typed:Yr}),EEt=Vwt({isInteger:BCe,typed:Yr}),TEt=Nwt({BigNumber:NX,typed:Yr}),CEt=ywt({typed:Yr}),SEt=I_t({Complex:PX,config:yw,typed:Yr}),MX=Bwt({typed:Yr}),AEt=Fwt({Fraction:LCe,typed:Yr}),Pg=$wt({DenseMatrix:iR,Matrix:OX,SparseMatrix:FX,typed:Yr}),DEt=X_t({bignumber:TEt,fraction:AEt,number:_Et}),kEt=G_t({matrix:Pg,config:yw,typed:Yr}),UCe=M_t({isInteger:BCe,matrix:Pg,typed:Yr}),W8=J_t({numeric:DEt,typed:Yr}),IEt=B_t({BigNumber:NX,DenseMatrix:iR,SparseMatrix:FX,config:yw,matrix:Pg,typed:Yr}),REt=N_t({DenseMatrix:iR,concat:UCe,equalScalar:cC,matrix:Pg,subtractScalar:zCe,typed:Yr,unaryMinus:MX}),VCe=nEt({DenseMatrix:iR,SparseMatrix:FX,addScalar:q8,concat:UCe,equalScalar:cC,matrix:Pg,typed:Yr}),NEt=iEt({addScalar:q8,conj:bEt,multiplyScalar:jCe,size:kEt,typed:Yr}),HCe=eEt({Complex:PX,config:yw,divideScalar:W8,typed:Yr}),G8=A_t({addScalar:q8,dot:NEt,equalScalar:cC,matrix:Pg,multiplyScalar:jCe,typed:Yr}),PEt=sEt({divideScalar:W8,isZero:xEt,matrix:Pg,multiply:G8,subtractScalar:zCe,typed:Yr,unaryMinus:MX}),OEt=uEt({abs:vEt,addScalar:q8,det:PEt,divideScalar:W8,identity:IEt,matrix:Pg,multiply:G8,typed:Yr,unaryMinus:MX}),qCe=fEt({divideScalar:W8,equalScalar:cC,inv:OEt,matrix:Pg,multiply:G8,typed:Yr}),Cce=hEt({add:VCe,divide:qCe,typed:Yr}),FEt=mEt({add:VCe,apply:EEt,divide:qCe,isNaN:CEt,multiply:G8,subtract:REt,typed:Yr}),Sce=yEt({map:wEt,sqrt:SEt,typed:Yr,variance:FEt});const WCe=0,X2=1,Ace=KTe("thisisjndexperimentseed"),GCe=2*Math.PI;function MEt(e){let t=e.length,n;for(;t>0;)n=Math.floor(Math.random()*t),t-=1,[e[t],e[n]]=[e[n],e[t]];return e}function $Et(e){const t=e(),n=e();return Math.sqrt(-2*Number(HCe(Number(t))))*Math.cos(GCe*n)*X2+WCe}function LEt(){const e=Ace(),t=Ace();return Math.sqrt(-2*Number(HCe(Number(e))))*Math.cos(GCe*t)*X2+WCe}function YCe(e,t){if(e.length===t.length){const n=Cce(e),r=Cce(t),i=Number(Sce(e)),o=Number(Sce(t));let s=0;for(let u=0;u<e.length;u++)s+=e[u]-n+(t[u]-r);return s/(e.length-1)/(i*o)}return NaN}function KCe(e,t){const n=e**2,r=t**2;return((t-1)*(n+t)+Math.sqrt(n*(r-1)*(n-1)))/((t-1)*(2*n+t-1))}function XCe(e,t,n){const r=n**2;return t.map((i,o)=>(n*e[o]+(1-n)*i)/Math.sqrt(r+(1-n)**2))}function Dce(e){const t=[];for(;t.length<e;){const n=LEt();n>=-2*X2&&n<=X2*2&&t.push(n)}return t}function kce(e,t){const n=[];for(;n.length<t;){const r=$Et(e);r>=-2*X2&&r<=X2*2&&n.push(r)}return n}function oR(e,t,n=100){const r=KTe(t),i=kce(r,n);let o=kce(r,n);const s=YCe(i,o),a=KCe(e,s);return o=XCe(i,o,a),i.map((u,l)=>e<0?[u,-o[l]]:[u,o[l]])}function BEt(e,t=100){const n=Dce(t);let r=Dce(t);const i=YCe(n,r),o=KCe(e,i);return r=XCe(n,r,o),n.map((s,a)=>[s,r[a]])}const jEt=Object.freeze(Object.defineProperty({__proto__:null,generateDataSet:BEt,generateDataSetFixed:oR,shuffle:MEt},Symbol.toStringTag,{value:"Module"})),hb=400,sE=40,G3=10;function QA({r:e,onClick:t}){const n=F.useRef(null),r=F.useRef(Date.now().toString()),[i,o]=F.useState(!1),s=F.useCallback(()=>{const a=oR(e,r.current),u=a.map(f=>f[0]).sort((f,d)=>f-d),l=a.map(f=>f[1]),c=XI(n.current).attr("width",hb).attr("height",sE*2+G3);c.selectAll("*").remove(),c.append("g").selectAll("rect").data(u).enter().append("rect").attr("x",(f,d)=>d*(hb/u.length)).attr("y",0).attr("width",hb/u.length).attr("height",sE).style("fill",f=>Tle((f-sf(u))/(Ou(u)-sf(u)))).style("cursor","pointer").on("click",()=>t()),c.append("g").selectAll("rect").data(l).enter().append("rect").attr("x",(f,d)=>d*(hb/l.length)).attr("y",sE+G3).attr("width",hb/l.length).attr("height",sE).style("fill",f=>Tle((f-sf(l))/(Ou(l)-sf(l)))).style("cursor","pointer").on("click",()=>t())},[e,t]);return F.useEffect(()=>{s()},[s]),A.jsx("svg",{ref:n,className:"d3-component",width:hb,height:sE*2+G3,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:A.jsx("rect",{onClick:t,x:0,y:0,width:hb,height:sE*2+G3,cursor:"pointer",opacity:i?.2:0,fill:"none"})})}const zEt=Object.freeze(Object.defineProperty({__proto__:null,default:QA},Symbol.toStringTag,{value:"Module"}));function $X({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=F.useMemo(()=>Math.random()>.5,[e,t]),[o,s]=F.useState(0),a=()=>{n&&s(l=>l+1)},u=l=>{r(l),a()};return i?A.jsxs(ui,{style:{gap:"100px"},children:[A.jsx(QA,{onClick:()=>u(1),r:e},o),A.jsx(QA,{onClick:()=>u(2),r:t},o+1)]}):A.jsxs(ui,{style:{gap:"100px"},children:[A.jsx(QA,{onClick:()=>u(2),r:t},o),A.jsx(QA,{onClick:()=>u(1),r:e},o+1)]})}const UEt=Object.freeze(Object.defineProperty({__proto__:null,default:$X},Symbol.toStringTag,{value:"Module"}));var RE=Math.PI/3,VEt=[0,RE,2*RE,3*RE,4*RE,5*RE];function HEt(e){return e[0]}function qEt(e){return e[1]}function WEt(){var e=0,t=0,n=1,r=1,i=HEt,o=qEt,s,a,u;function l(f){var d={},h=[],m,p=f.length;for(m=0;m<p;++m)if(!(isNaN(v=+i.call(null,g=f[m],m,f))||isNaN(b=+o.call(null,g,m,f)))){var g,v,b,w=Math.round(b=b/u),E=Math.round(v=v/a-(w&1)/2),T=b-w;if(Math.abs(T)*3>1){var C=v-E,S=E+(v<E?-1:1)/2,I=w+(b<w?-1:1),R=v-S,P=b-I;C*C+T*T>R*R+P*P&&(E=S+(w&1?1:-1)/2,w=I)}var M=E+"-"+w,B=d[M];B?B.push(g):(h.push(B=d[M]=[g]),B.x=(E+(w&1)/2)*a,B.y=w*u)}return h}function c(f){var d=0,h=0;return VEt.map(function(m){var p=Math.sin(m)*f,g=-Math.cos(m)*f,v=p-d,b=g-h;return d=p,h=g,[v,b]})}return l.hexagon=function(f){return"m"+c(f==null?s:+f).join("l")+"z"},l.centers=function(){for(var f=[],d=Math.round(t/u),h=Math.round(e/a),m=d*u;m<r+s;m+=u,++d)for(var p=h*a+(d&1)*a/2;p<n+a/2;p+=a)f.push([p,m]);return f},l.mesh=function(){var f=c(s).slice(0,4).join("l");return l.centers().map(function(d){return"M"+d+"m"+f}).join("")},l.x=function(f){return arguments.length?(i=f,l):i},l.y=function(f){return arguments.length?(o=f,l):o},l.radius=function(f){return arguments.length?(s=+f,a=s*2*Math.sin(RE),u=s*1.5,l):s},l.size=function(f){return arguments.length?(e=t=0,n=+f[0],r=+f[1],l):[n-e,r-t]},l.extent=function(f){return arguments.length?(e=+f[0][0],t=+f[0][1],n=+f[1][0],r=+f[1][1],l):[[e,t],[n,r]]},l.radius(1)}const Y3=300,oA=300;function JA({r:e,onClick:t}){const n=F.useRef(null),[r,i]=F.useState(!1),o=F.useCallback(()=>{const s=oR(e,Date.now().toString(),1e3),a={left:0,top:20,right:20,bottom:0},u=oA-a.bottom,l=Y3-a.left-a.right,c=fm().domain([sf(s,v=>v[0]),Ou(s,v=>v[0])]).range([0,l]),f=fm().domain([sf(s,v=>v[1]),Ou(s,v=>v[1])]).range([u,0]),d=WEt().x(v=>c(v[0])).y(v=>f(v[1])).radius(10).extent([[0,0],[l,u]]),h=d(s),m=XI(n.current).attr("width",Y3).attr("height",oA);m.selectAll("*").remove(),m.append("g").attr("transform",`translate(${a.left}, ${a.top})`),m.append("g").selectAll(".hexagon").data(h).enter().append("path").attr("class","hexagon").attr("d",d.hexagon()).attr("transform",v=>`translate(${v.x}, ${v.y})`).style("fill",v=>W1t(v.length/Ou(h,b=>b.length))).style("stroke","white").style("stroke-width","0.5px");const p=hEe(c).ticks(5),g=H6(f).ticks(5);m.append("g").attr("transform",`translate(${a.left}, ${oA-a.bottom})`).call(p),m.append("g").attr("transform",`translate(${a.left}, ${a.top})`).call(g)},[e]);return F.useEffect(()=>{o()},[o]),A.jsxs("svg",{className:"d3-component",width:Y3,height:oA,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[A.jsx("g",{id:"d3Stuff",ref:n}),A.jsx("rect",{onClick:t,x:0,y:0,width:Y3,height:oA,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const GEt=Object.freeze(Object.defineProperty({__proto__:null,default:JA},Symbol.toStringTag,{value:"Module"}));function LX({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=F.useMemo(()=>Math.random()>.5,[e,t]),[o,s]=F.useState(0),a=()=>{n&&s(l=>l+1)},u=l=>{r(l),a()};return i?A.jsxs(ui,{children:[A.jsx(JA,{onClick:()=>u(1),r:e},o),A.jsx(JA,{onClick:()=>u(2),r:t},o+1)]}):A.jsxs(ui,{children:[A.jsx(JA,{onClick:()=>u(2),r:t},o),A.jsx(JA,{onClick:()=>u(1),r:e},o+1)]})}const YEt=Object.freeze(Object.defineProperty({__proto__:null,default:LX},Symbol.toStringTag,{value:"Module"}));function KEt({setAnswer:e,parameters:t}){const[n,r]=F.useState(0),[i,o]=F.useState(t.above),[s,a]=F.useState([]),[u,l]=F.useState(t.r1),[c,f]=F.useState(t.r2),d=F.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return F.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:s}})},[n,s]),n===50?A.jsx(ct,{children:"Completed! Great job, please continue."}):A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx($X,{onClick:d,r1:u,r2:c})}),A.jsx(xi,{style:{marginTop:20},children:A.jsx("progress",{value:n,max:50})})]})}const XEt=Object.freeze(Object.defineProperty({__proto__:null,default:KEt},Symbol.toStringTag,{value:"Module"}));function QEt({setAnswer:e,parameters:t}){const[n,r]=F.useState(0),[i,o]=F.useState(t.above),[s,a]=F.useState([]),[u,l]=F.useState(t.r1),[c,f]=F.useState(t.r2),d=F.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return F.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:s}})},[n,s]),n===50?A.jsx(ct,{children:"Completed! Great job, please continue."}):A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(LX,{onClick:d,r1:u,r2:c})}),A.jsx(xi,{style:{marginTop:20},children:A.jsx("progress",{value:n,max:50})})]})}const JEt=Object.freeze(Object.defineProperty({__proto__:null,default:QEt},Symbol.toStringTag,{value:"Module"})),j7=300,z7=300;function ZA({v:e,onClick:t}){const n=F.useRef(null),[r,i]=F.useState(!1),o=F.useCallback(()=>{const s=oR(e,Date.now().toString()),a={left:40,top:20,right:20,bottom:20},u=z7-a.bottom,l=j7-a.left-a.right,c=s.map(E=>E[0]),f=s.map(E=>E[1]),d=XI(n.current);d.selectAll("*").remove();const h=fm().range([0,u]),m=fm().range([0,u]);h.domain([sf(c),Ou(c)]).range([0,u]),m.domain([sf(f),Ou(f)]).range([0,u]);const p=H6(h).tickSize(0).tickValues([]),g=H6(m).tickSize(0).tickValues([]),v=`translate(${a.left},${a.top})`,b=`translate(${a.left+l},${a.top})`,w=(E,T,C,S,I)=>{E.selectAll(T).data([0]).enter().append("g").attr("class",S),E.selectAll(T).data([0]).exit().remove(),E.selectAll(T).attr("transform",I).call(C)};w(d,".x.axis",p,"x axis",v),w(d,".y.axis",g,"y axis",b),d.selectAll(".line").data(s).enter().append("line").style("stroke","grey").style("stroke-width",.5).attr("x1",a.left).attr("y1",E=>h(E[0])+a.top).attr("x2",a.left+l).attr("y2",E=>m(E[1])+a.top)},[e]);return F.useEffect(()=>{o()},[o]),A.jsxs("svg",{className:"d3-component",width:j7,height:z7,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[A.jsx("g",{id:"d3Stuff",ref:n}),A.jsx("rect",{onClick:t,x:0,y:0,width:j7,height:z7,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const ZEt=Object.freeze(Object.defineProperty({__proto__:null,default:ZA},Symbol.toStringTag,{value:"Module"}));function Y8({r1:e,r2:t,onClick:n}){const r=F.useMemo(()=>Math.random()>.5,[e,t]),[i,o]=F.useState(0),s=()=>{o(u=>u+1)},a=u=>{n(u),s()};return r?A.jsxs(ui,{children:[A.jsx(ZA,{onClick:()=>a(1),v:e},i),A.jsx(ZA,{onClick:()=>a(2),v:t},i+1)]}):A.jsxs(ui,{children:[A.jsx(ZA,{onClick:()=>a(2),v:t},i),A.jsx(ZA,{onClick:()=>a(1),v:e},i+1)]})}const e2t=Object.freeze(Object.defineProperty({__proto__:null,default:Y8},Symbol.toStringTag,{value:"Module"})),Ice=[.6,.7,.8],Rce=[.3,.4,.5];function t2t({setAnswer:e}){const[t,n]=F.useState(0),[r,i]=F.useState(Ice[Math.floor(Math.random()*Ice.length)]),[o,s]=F.useState(Rce[Math.floor(Math.random()*Rce.length)]),[a,u]=F.useState([]),l=F.useCallback(c=>{u([...a,{r1:r,r2:o,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?s(Math.min(o+.01,1)):i(Math.min(r-.01,1)):f?s(Math.max(o-.03,0)):i(Math.max(r+.03,0))},[t,a,r,o]);return F.useEffect(()=>{if(t===50){const c=Math.abs(r-o);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:o,observedJnd:c}})}},[t,a,r,o,e]),A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsxs(ct,{children:[t,"/50"]}),A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(Y8,{onClick:l,r1:r,r2:o})})]})}const n2t=Object.freeze(Object.defineProperty({__proto__:null,default:t2t},Symbol.toStringTag,{value:"Module"}));function r2t({setAnswer:e,parameters:t}){const[n,r]=F.useState(0),[i,o]=F.useState(t.above),[s,a]=F.useState([]),[u,l]=F.useState(t.r1),[c,f]=F.useState(t.r2),d=F.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return F.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{parallelSelections:s}})},[n,s]),n===50?A.jsx(ct,{children:"Completed! Great job, please continue."}):A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(Y8,{onClick:d,r1:u,r2:c})}),A.jsx(xi,{style:{marginTop:20},children:A.jsx("progress",{value:n,max:50})})]})}const i2t=Object.freeze(Object.defineProperty({__proto__:null,default:r2t},Symbol.toStringTag,{value:"Module"})),K3=300,sA=300;function eD({r:e,onClick:t}){const n=F.useRef(null),[r,i]=F.useState(!1),o=F.useCallback(()=>{const s=oR(e,Date.now().toString()),a={left:40,top:20,right:20,bottom:20},u=sA-a.bottom,l=K3-a.left-a.right,c=s.map(v=>v[0]),f=s.map(v=>v[1]),d=fm().range([0,l]),h=fm().range([u,0]),m=hEe(d).tickSize(0).tickFormat(()=>""),p=H6(h).tickSize(0),g=XI(n.current).attr("width",K3).attr("height",sA);g.selectAll("*").remove(),g.append("g").attr("transform",`translate(0, ${sA-a.bottom})`).attr("class","main axis date").call(m),g.append("g").attr("class","main axis date").call(p),d.domain([sf(c),Ou(c)]).range([10,l-10]),h.domain([sf(f),Ou(f)]).range([u-10,10]),g.selectAll(".dot").data(s).enter().append("circle").attr("class","dot").attr("r",2).attr("cx",v=>d(v[0])).attr("cy",v=>h(v[1])).style("fill","black")},[e]);return F.useEffect(()=>{o()},[o]),A.jsxs("svg",{className:"d3-component",width:K3,height:sA,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[A.jsx("g",{id:"d3Stuff",ref:n}),A.jsx("rect",{onClick:t,x:0,y:0,width:K3,height:sA,cursor:"pointer",opacity:r?.2:0,fill:"cornflowerblue"})]})}const o2t=Object.freeze(Object.defineProperty({__proto__:null,default:eD},Symbol.toStringTag,{value:"Module"}));function K8({r1:e,r2:t,shouldReRender:n=!0,onClick:r}){const i=F.useMemo(()=>Math.random()>.5,[e,t]),[o,s]=F.useState(0),a=()=>{n&&s(l=>l+1)},u=l=>{r(l),a()};return i?A.jsxs(ui,{children:[A.jsx(eD,{onClick:()=>u(1),r:e},o),A.jsx(eD,{onClick:()=>u(2),r:t},o+1)]}):A.jsxs(ui,{children:[A.jsx(eD,{onClick:()=>u(2),r:t},o),A.jsx(eD,{onClick:()=>u(1),r:e},o+1)]})}const s2t=Object.freeze(Object.defineProperty({__proto__:null,default:K8},Symbol.toStringTag,{value:"Module"})),Nce=[.6,.7,.8],Pce=[.3,.4,.5];function a2t({setAnswer:e}){const[t,n]=F.useState(0),[r,i]=F.useState(Nce[Math.floor(Math.random()*Nce.length)]),[o,s]=F.useState(Pce[Math.floor(Math.random()*Pce.length)]),[a,u]=F.useState([]),l=F.useCallback(c=>{u([...a,{r1:r,r2:o,correct:c===1}]),n(t+1);const f=Math.random()>.5;c===1?f?s(Math.min(o+.01,1)):i(Math.min(r-.01,1)):f?s(Math.max(o-.03,0)):i(Math.max(r+.03,0))},[t,a,r,o]);return F.useEffect(()=>{if(t===50){const c=Math.abs(r-o);e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:a,r1:r,final_r2:o,observedJnd:c}})}},[t,a,r,o,e]),A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsxs(ct,{children:[t,"/50"]}),A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(K8,{onClick:l,r1:r,r2:o})})]})}const u2t=Object.freeze(Object.defineProperty({__proto__:null,default:a2t},Symbol.toStringTag,{value:"Module"}));function l2t({setAnswer:e,parameters:t}){const[n,r]=F.useState(0),[i,o]=F.useState(t.above),[s,a]=F.useState([]),[u,l]=F.useState(t.r1),[c,f]=F.useState(t.r2),d=F.useCallback(h=>{a([...s,{correct:h===1}]),r(n+1),i&&h===2?c<u||c-u<=.01?r(50):f(Math.min(c-.01,1)):i&&h===1?c>=1?f(1):f(Math.max(c+.03,0)):!i&&h===1?u<c||u-c<=.01?r(50):f(Math.min(c+.01,1)):!i&&h===2&&(c<=0&&f(0),f(Math.max(c-.03,0)))},[i,n,s,u,c]);return F.useEffect(()=>{n===50&&e({status:!0,provenanceGraph:void 0,answers:{scatterSelections:s}})},[n,s]),n===50?A.jsx(ct,{children:"Completed! Great job, please continue."}):A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(K8,{onClick:d,r1:u,r2:c})}),A.jsx(xi,{style:{marginTop:20},children:A.jsx("progress",{value:n,max:50})})]})}const c2t=Object.freeze(Object.defineProperty({__proto__:null,default:l2t},Symbol.toStringTag,{value:"Module"})),f2t=[.1,.2,.3,.4,.5],Oce=[.6,.7,.8,.9,1],U7=e=>{const t=e[Math.floor(Math.random()*e.length)];let n=e[Math.floor(Math.random()*e.length)];for(;t===n;)n=e[Math.floor(Math.random()*e.length)];return[t,n]};function d2t({setAnswer:e}){const[t,n]=F.useState(0),[r,i]=F.useState(()=>U7(Oce)),[o,s]=F.useState(null),[a,u]=F.useState(!1),l=F.useCallback(f=>{const[d,h]=r;o===null&&(f===1&&d>h||f===2&&h>d?s("Correct"):s("Incorrect"),u(!0))},[r,o]),c=()=>{s(null),u(!1),n(f=>f+1),t+1<10?i(U7(Oce)):t+1<20?i(U7(f2t)):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),s("Practice Completed, please continue."))};return A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsxs(ct,{children:[t,"/20"]}),A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx($X,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),o&&A.jsx(ct,{style:{textAlign:"center",marginTop:"1rem"},children:o}),a&&A.jsx(xi,{children:A.jsx(wn,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const h2t=Object.freeze(Object.defineProperty({__proto__:null,default:d2t},Symbol.toStringTag,{value:"Module"})),p2t=[.1,.2,.3,.4,.5],Fce=[.6,.7,.8,.9,1],V7=e=>{const t=e[Math.floor(Math.random()*e.length)];let n=e[Math.floor(Math.random()*e.length)];for(;t===n;)n=e[Math.floor(Math.random()*e.length)];return[t,n]};function m2t({setAnswer:e}){const[t,n]=F.useState(0),[r,i]=F.useState(()=>V7(Fce)),[o,s]=F.useState(null),[a,u]=F.useState(!1),l=F.useCallback(f=>{const[d,h]=r;o===null&&(f===1&&d>h||f===2&&h>d?s("Correct"):s("Incorrect"),u(!0))},[r,o]),c=()=>{s(null),u(!1),n(f=>f+1),t+1<10?i(V7(Fce)):t+1<20?i(V7(p2t)):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),s("Practice Completed, please continue."))};return A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsxs(ct,{children:[t,"/20"]}),A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(LX,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),o&&A.jsx(ct,{style:{textAlign:"center",marginTop:"1rem"},children:o}),a&&A.jsx(xi,{children:A.jsx(wn,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const g2t=Object.freeze(Object.defineProperty({__proto__:null,default:m2t},Symbol.toStringTag,{value:"Module"})),Mce=[.1,.2,.3,.4,.5],aE=[.6,.7,.8,.9,1];function y2t({setAnswer:e}){const[t,n]=F.useState(0),[r,i]=F.useState(aE[Math.floor(Math.random()*aE.length)]),[o,s]=F.useState(aE[Math.floor(Math.random()*aE.length)]),[a,u]=F.useState(""),l=f=>{i(f[Math.floor(Math.random()*f.length)]),s(f[Math.floor(Math.random()*f.length)])},c=F.useCallback(f=>{n(t+1),f===1&&r>o||f===2&&o>r?u("Correct"):u("Incorrect"),t<10?l(aE):l(Mce)},[t,r,o]);return F.useEffect(()=>{r===o&&(t<10?l(aE):l(Mce)),t===20&&(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),u("Practice Completed, please continue."))},[t]),A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsxs(ct,{children:[t,"/20"]}),A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(Y8,{onClick:c,r1:r,r2:o})}),A.jsx(ct,{style:{textAlign:"center"},children:a})]})}const v2t=Object.freeze(Object.defineProperty({__proto__:null,default:y2t},Symbol.toStringTag,{value:"Module"})),b2t=[.1,.2,.3,.4,.5],$ce=[.6,.7,.8,.9,1],H7=e=>{const t=e[Math.floor(Math.random()*e.length)];let n=e[Math.floor(Math.random()*e.length)];for(;t===n;)n=e[Math.floor(Math.random()*e.length)];return[t,n]};function x2t({setAnswer:e}){const[t,n]=F.useState(0),[r,i]=F.useState(()=>H7($ce)),[o,s]=F.useState(null),[a,u]=F.useState(!1),l=F.useCallback(f=>{const[d,h]=r;o===null&&(f===1&&d>h||f===2&&h>d?s("Correct"):s("Incorrect"),u(!0))},[r,o]),c=()=>{s(null),u(!1),n(f=>f+1),t+1<10?i(H7($ce)):t+1<20?i(H7(b2t)):(e({status:!0,provenanceGraph:void 0,answers:{completed:!0}}),s("Practice Completed, please continue."))};return A.jsxs(qo,{style:{width:"100%",height:"100%"},children:[A.jsxs(ct,{children:[t,"/20"]}),A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(xi,{children:A.jsx(K8,{onClick:l,r1:r[0],r2:r[1],shouldReRender:!1})}),o&&A.jsx(ct,{style:{textAlign:"center",marginTop:"1rem"},children:o}),a&&A.jsx(xi,{children:A.jsx(wn,{onClick:c,style:{marginTop:"1rem"},children:"Next"})})]})}const w2t=Object.freeze(Object.defineProperty({__proto__:null,default:x2t},Symbol.toStringTag,{value:"Module"}));function _2t(){const[e,t]=F.useState("");return A.jsxs(xi,{style:{flexDirection:"column"},children:[A.jsx(ct,{style:{textAlign:"center",paddingBottom:"24px"},children:"Select the option with the higher correlation"}),A.jsx(S5,{value:e,onChange:t,children:A.jsxs(un,{gap:"md",justify:"justify-content",direction:"row",children:[A.jsx(od,{value:"Option 1",label:"Option 1"}),A.jsx(od,{value:"Option 2",label:"Option 2"})]})})]})}const E2t=Object.freeze(Object.defineProperty({__proto__:null,RadioOptions:_2t},Symbol.toStringTag,{value:"Module"}));function T2t({v:e}){const t=F.useRef(null),n=(i,o,s)=>{const a=[];for(let u=0;u<i;u++){let l="";for(let c=0;u<5+Math.random()*5;c++)l+=o*i,l+=" ",l+=s+(150-Math.random()*i),l+=" ";a.push(l)}return a},r=()=>{const s=e>0?e:0,a=50,c=n(s,.2,10),f=s,d=.1+s/200,h=-100,m=a/f,p=10+Math.random()*140,g=1e3*(Math.abs(h)/s),v=XI(t.current);v.selectAll("*").remove(),v.attr("width",300).attr("height",300).style("background-color","grey");for(let b=0;b<f;b++){const w=[],E=p+m*b,T=xX()([[0,E],[300,E]]),C=v.append("path").attr("stroke","white").attr("fill","none").attr("stroke-width",2).attr("d",T).attr("class","flowline").attr("stroke-linecap","round").attr("stroke-dasharray",c[b]).attr("stroke-dashoffset",(I,R)=>{const P=Math.random()*100;return w[R]=P,P}).attr("opacity",d),S=I=>{const R=w;I.transition().duration(g).ease(Ppt).attr("stroke-dasharray",c[b]).attr("stroke-dashoffset",(P,M)=>(R[M]+=h,R[M])).attr("opacity",()=>Math.floor(Math.random()*100)%4===0?0:d).on("end",()=>{S(I)})};C.call(S)}};return F.useEffect(()=>{r()},[e]),A.jsx("svg",{className:"d3-component",width:300,height:300,ref:t})}const C2t=Object.freeze(Object.defineProperty({__proto__:null,default:T2t},Symbol.toStringTag,{value:"Module"})),S2t=F.createContext(null);function ku(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(s,a)}u((r=r.apply(e,t||[])).next())})}let sR=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const X3={decode:function(e,t){return ku(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let o=0;for(let s=0;s<i;s++){const a=Math.abs(r[s]);a>o&&(o=a)}for(const s of n)for(let a=0;a<i;a++)s[a]/=o}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function QCe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[o,s]of Object.entries(t))typeof s=="string"?n.appendChild(document.createTextNode(s)):n.appendChild(QCe(o,s));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Lce(e,t,n){const r=QCe(e,t||{});return n==null||n.appendChild(r),r}var A2t=Object.freeze({__proto__:null,createElement:Lce,default:Lce});const D2t={fetchBlob:function(e,t,n){return ku(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,o){ku(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const s=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>ku(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);o(d)}),c=()=>ku(this,void 0,void 0,function*(){let f;try{f=yield s.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let k2t=class extends sR{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return ku(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},UV=class VV extends sR{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,o]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),n&&o.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,o=n.clientY-r.top;return[i/r.width,o/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,o=n/r,s=(n+i)/r;this.emit("scroll",o,s,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,o=3,s=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==s)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,m=!1;const p=Date.now(),g=T=>{if(T.preventDefault(),T.stopPropagation(),u&&Date.now()-p<a)return;const C=T.clientX,S=T.clientY,I=C-d,R=S-h;if(m||Math.abs(I)>o||Math.abs(R)>o){const P=t.getBoundingClientRect(),{left:M,top:B}=P;m||(r==null||r(d-M,h-B),m=!0),n(I,R,C-M,S-B),d=C,h=S}},v=T=>{if(m){const C=T.clientX,S=T.clientY,I=t.getBoundingClientRect(),{left:R,top:P}=I;i==null||i(C-R,S-P)}l()},b=T=>{T.relatedTarget&&T.relatedTarget!==document.documentElement||v(T)},w=T=>{m&&(T.stopPropagation(),T.preventDefault())},E=T=>{m&&T.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",v),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const o=this.parent.clientHeight||128;return n!=null&&n.every(s=>!s.overlay)?o/i:o}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((o,s)=>{i(),r=s,n=setTimeout(()=>{n=void 0,r=void 0,o()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),o=r.createLinearGradient(0,0,0,i),s=1/(t.length-1);return t.forEach((a,u)=>{const l=u*s;o.addColorStop(l,a)}),o}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const o=t[0],s=t[1]||t[0],a=o.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,m=n.barRadius||0,p=u/(d+h)/a,g=m&&"roundRect"in r?"roundRect":"rect";r.beginPath();let v=0,b=0,w=0;for(let E=0;E<=a;E++){const T=Math.round(E*p);if(T>v){const I=Math.round(b*c*i),R=I+Math.round(w*c*i)||1;let P=c-I;n.barAlign==="top"?P=0:n.barAlign==="bottom"&&(P=l-R),r[g](v*(d+h),P,d,R,m),v=T,b=0,w=0}const C=Math.abs(o[E]||0),S=Math.abs(s[E]||0);C>b&&(b=C),S>w&&(w=S)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const o=s=>{const a=t[s]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let m=0;m<=u;m++){const p=Math.round(m*f);if(p>d){const v=c+(Math.round(h*c*i)||1)*(s===0?-1:1);r.lineTo(d,v),d=p,h=0}const g=Math.abs(a[m]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),o(0),o(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const o=Array.from(t[0]).reduce((s,a)=>Math.max(s,Math.abs(a)),0);i=o?1/o:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,o,s,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(o)}px`,s.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,o,s){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(VV.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,v=g+(n.barGap||g/2);c%v!=0&&(c=Math.floor(c/v)*v)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const v=g*c,b=Math.min(l-v,c);if(b<=0)return;const w=t.map(E=>{const T=Math.floor(v/l*E.length),C=Math.floor((v+b)/l*E.length);return E.slice(T,C)});this.renderSingleCanvas(w,n,b,i,v,o,s)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const m=this.scrollContainer.scrollLeft/l,p=Math.floor(m*h);if(d(p-1),d(p),d(p+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:v}=this.scrollContainer,b=Math.floor(v/l*h);Object.keys(f).length>VV.MAX_NODES&&(o.innerHTML="",s.innerHTML="",f={}),d(b-1),d(b),d(b+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:o}=n,s=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(h=Object.getOwnPropertySymbols(c);m<h.length;m++)f.indexOf(h[m])<0&&Object.prototype.propertyIsEnumerable.call(c,h[m])&&(d[h[m]]=c[h[m]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(s.height,s.splitChannels);a.style.height=`${u}px`,o&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,s,r,u,a,l)}render(t){return ku(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,o=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=o>i;const s=this.options.fillParent&&!this.isScrollable,a=(s?i:o)*r;if(this.wrapper.style.width=s?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:o}=this.scrollContainer,s=t*i,a=r,u=r+o,l=o/2;if(this.isDragging)s+30>u?this.scrollContainer.scrollLeft+=30:s-30<a&&(this.scrollContainer.scrollLeft-=30);else{(s<a||s>u)&&(this.scrollContainer.scrollLeft=s-(this.options.autoCenter?l:0));const c=s-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+o)/i;this.emit("scroll",f,d,c,c+o)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return ku(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const o=Array.from(i).map(s=>s.toDataURL(t,n));return Promise.resolve(o)}return Promise.all(Array.from(i).map(o=>new Promise((s,a)=>{o.toBlob(u=>{u?s(u):a(new Error("Could not export image"))},t,n)})))})}};UV.MAX_CANVAS_WIDTH=8e3,UV.MAX_NODES=10;let I2t=class extends sR{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}},Bce=class extends sR{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ku(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ku(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return ku(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}};const R2t={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let HV=class JCe extends k2t{static create(t){return new JCe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Bce:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},R2t,t),this.timer=new I2t;const r=n?void 0:this.getMediaElement();this.renderer=new UV(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:o,duration:s}=this.options;(i||o&&s)&&this.load(i,o,s).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const o=this.getDuration();this.emit("scroll",t*o,n*o,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=X3.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=X3.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return ku(this,void 0,void 0,function*(){var o;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(o=this.abortController)===null||o===void 0?void 0:o.signal);const u=c=>this.emit("loading",c);n=yield D2t.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const s=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Bce&&(a.duration=s)}if(r)this.decodedData=X3.createBuffer(r,s||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield X3.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return ku(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return ku(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),o=[];for(let s=0;s<i;s++){const a=this.decodedData.getChannelData(s),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const m=f[h];Math.abs(m)>Math.abs(d)&&(d=m)}u.push(Math.round(d*r)/r)}o.push(u)}return o}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return ku(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return ku(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};HV.BasePlugin=class extends sR{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},HV.dom=A2t;function N2t(e){return HV.create(e)}function P2t(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const jce=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),O2t=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([s])=>r.findIndex(([a])=>a===s)===-1),o=r.filter(([s])=>n.findIndex(([a])=>a===s)===-1);return{disabled:jce(i),enabled:jce(o)}};function zce(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=P2t(i)}return n}function F2t({container:e,plugins:t=[],onMount:n,...r}){const i=F.useRef(!1),[o,s]=F.useState({}),a=F.useRef([]),[u,l]=F.useState(null);return F.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=zce(o,t);a.current=Object.keys(f);const d=N2t({container:e,...r,plugins:Object.values(f)});return n==null||n(d),s(f),l(d),()=>{c!==e&&d.destroy()}},[e]),F.useEffect(()=>{if(u){const c=zce(o,t),{disabled:f,enabled:d}=O2t(o,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),s(c)}},[t]),[u,o,Object.values(o)]}function ZCe({children:e,plugins:t=[],onMount:n,...r}){const i=F2t({plugins:t,onMount:n,...r});return Gr.createElement(S2t.Provider,{value:i},e)}const eSe=({id:e="waveform",children:t})=>Gr.createElement("div",{id:e},t);function q7(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(s,a)}u((r=r.apply(e,[])).next())})}let tSe=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},M2t=class extends tSe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}},$2t=class extends tSe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};const L2t=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let B2t=class nSe extends M2t{constructor(t){var n,r,i,o,s,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(o=t.continuousWaveform)!==null&&o!==void 0&&o,renderRecordedAudio:(s=t.renderRecordedAudio)===null||s===void 0||s,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new $2t,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new nSe(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),o=r.createAnalyser();i.connect(o),this.options.continuousWaveform&&(o.fftSize=32);const s=o.frequencyBinCount,a=new Float32Array(s);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(o.getFloatTimeDomainData(a),this.options.scrollingWaveform){const m=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),p=Math.min(m,this.dataWindow?this.dataWindow.length+s:s),g=new Float32Array(m);if(this.dataWindow){const v=Math.max(0,m-this.dataWindow.length);g.set(this.dataWindow.slice(-p+s),v)}g.set(a,m-s),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const p=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(p)}let m=0;for(let p=0;p<s;p++){const g=Math.abs(a[p]);g>m&&(m=g)}if(u+1>this.dataWindow.length){const p=new Float32Array(2*this.dataWindow.length);p.set(this.dataWindow,0),this.dataWindow=p}this.dataWindow[u]=m,u++}else this.dataWindow=a;if(this.wavesurfer){const m=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:m).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(p=>{console.error("Error rendering real-time recording data:",p)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return q7(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return q7(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||L2t.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=s=>{s.data.size>0&&i.push(s.data),this.emit("record-data-available",s.data)};const o=s=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(s,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>o("record-pause"),r.onstop=()=>o("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return q7(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}};function rSe({width:e=70,height:t=36}){const n=F.useRef(null),r=F.useRef(null),[i,o]=F.useState(!1);F.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(B2t.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const s=F.useCallback(a=>{n.current=a,o(!0)},[]);return A.jsx(Ue,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:A.jsx(ZCe,{onMount:s,plugins:[],container:"#waveformDiv",height:t,children:A.jsx(eSe,{id:"waveform",height:t})})})}function Uce({setAnswer:e}){return F.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,o=i.createMediaStreamSource(n),s=i.createAnalyser();s.minDecibels=-45,o.connect(s);const a=s.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){s.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),A.jsx(xi,{style:{height:"70%",width:"100%"},children:A.jsxs(qo,{children:[A.jsx(ct,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),A.jsx(ct,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),A.jsx(ct,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),A.jsx(xi,{children:A.jsx(rSe,{height:200,width:400})})]})})}const j2t=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Uce,default:Uce},Symbol.toStringTag,{value:"Module"}));function z2t(){return A.jsx("div",{children:"test react file"})}const U2t=Object.freeze(Object.defineProperty({__proto__:null,default:z2t},Symbol.toStringTag,{value:"Module"}));class V2t extends Gr.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?A.jsx(ct,{children:this.state.error.toString()}):this.props.children}}const Vce=Object.assign({"../public/emma-jnd/vistaJND/src/components/vis/HeatmapPlots.tsx":zEt,"../public/emma-jnd/vistaJND/src/components/vis/HeatmapWrapper.tsx":UEt,"../public/emma-jnd/vistaJND/src/components/vis/HexbinPlots.tsx":GEt,"../public/emma-jnd/vistaJND/src/components/vis/HexbinWrapper.tsx":YEt,"../public/emma-jnd/vistaJND/src/components/vis/JNDHeatmap.tsx":XEt,"../public/emma-jnd/vistaJND/src/components/vis/JNDHexbin.tsx":JEt,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallel.tsx":n2t,"../public/emma-jnd/vistaJND/src/components/vis/JNDParallelRevised.tsx":i2t,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatter.tsx":u2t,"../public/emma-jnd/vistaJND/src/components/vis/JNDScatterRevised.tsx":c2t,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinates.tsx":ZEt,"../public/emma-jnd/vistaJND/src/components/vis/ParallelCoordinatesWrapper.tsx":e2t,"../public/emma-jnd/vistaJND/src/components/vis/PracticeHeatmap.tsx":h2t,"../public/emma-jnd/vistaJND/src/components/vis/PracticeHexbin.tsx":g2t,"../public/emma-jnd/vistaJND/src/components/vis/PracticeParallel.tsx":v2t,"../public/emma-jnd/vistaJND/src/components/vis/PracticeScatter.tsx":w2t,"../public/emma-jnd/vistaJND/src/components/vis/RadioOptions.tsx":E2t,"../public/emma-jnd/vistaJND/src/components/vis/ScatterPlots.tsx":o2t,"../public/emma-jnd/vistaJND/src/components/vis/ScatterWrapper.tsx":s2t,"../public/emma-jnd/vistaJND/src/components/vis/Windflow.tsx":C2t,"../public/emma-jnd/vistaJND/src/utils/dataGeneration.ts":jEt,"../public/libraries/mic-check/assets/AudioTest.tsx":j2t,"../public/libraries/test/assets/test.tsx":U2t});function H2t({currentConfig:e,provState:t}){const n=Ed(),r=jh(),i=`../public/${e.path}`,o=i in Vce?Vce[i].default:null,s=Gu(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=eu(),l=F.useCallback(({status:c,provenanceGraph:f,answers:d})=>{s(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),s(u(d))},[r,n,u,s,a]);return A.jsx(F.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:o?A.jsx(V2t,{children:A.jsx(o,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):A.jsx(D1,{path:e.path})})}function q2t({currentConfig:e}){const[t,n]=F.useState(""),[r,i]=F.useState(!0);return F.useEffect(()=>{async function o(){const s=await OK(e.path);s!==void 0&&n(s),i(!1)}o()},[e.path]),r||t?A.jsx(ju,{text:t}):A.jsx(D1,{path:e.path})}function fC(e){return e.baseComponent!==void 0}function iSe(){const e=Ed(),{setAlertModal:t}=eu(),n=Gu();F.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Hce=Object.prototype.hasOwnProperty;function qce(e,t,n){for(n of e.keys())if(VD(n,t))return n}function VD(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&VD(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=qce(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=qce(t,i),!i)||!VD(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Hce.call(e,n)&&++r&&!Hce.call(t,n)||!(n in t)||!VD(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function W2t(e){var t=F.useRef(e),n=F.useRef(0);return VD(e,t.current)||(t.current=e,n.current+=1),F.useMemo(function(){return t.current},[n.current])}function G2t(e,t){return F.useEffect(e,W2t(t))}const UF=(e,t=null)=>{const[n,r]=F.useState("idle"),[i,o]=F.useState(null),[s,a]=F.useState(null),u=F.useRef(null),l=F.useRef(!1);F.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=F.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(o(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(o(null),a(h),r("error")),h});return u.current=d,d},[e]);return G2t(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:s}};function oSe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(s=>s!==void 0).filter(([s,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let s=i+1;s<n.length;s+=1)if(n[s][2]==="visible"){r+=n[s][0]-n[i][0],i=s;break}}i+=1}return t?t-r:void 0}const Y2t="_root_1spq0_1",K2t="_description_1spq0_9",X2t="_title_1spq0_10",Q2t="_closeButton_1spq0_14",J2t={root:Y2t,description:K2t,title:X2t,closeButton:Q2t},jk=e=>{const{title:t,message:n,color:r}=e;nw.show({title:t,message:n,position:"top-center",classNames:J2t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},Wce=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],sSe=["participantId","trialId","trialOrder","responseId"];function BX(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Z2t(e,t,n){const r=(Object.entries(e.answers).filter(([i,o])=>o.endTime!==-1).length/(kh(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,o])=>{const s=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[s],l=fC(u)&&u.baseComponent&&n.baseComponents?RK({},n.baseComponents[u.baseComponent],u):u,c=o.endTime===-1?void 0:o.endTime-o.startTime,f=oSe(o);return Object.entries(o.answer).map(([h,m])=>{var v,b;const p={participantId:e.participantId,trialId:s,trialOrder:a,responseId:h},g=l.response.find(w=>w.id===h);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(p.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(p.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(p.answer=m),t.includes("correctAnswer")){const w=(b=(v=l.correctAnswer)==null?void 0:v.find(E=>E.id===h))==null?void 0:b.answer;p.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(p.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(p.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(p.startTime=new Date(o.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(o.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("cleanedDuration")&&(p.cleanedDuration=f),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()]}async function eTt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...sSe,...e],o=[...new Set(t.map(c=>c.participantConfigHash))],s=await n.getAllConfigsFromHash(o,r),a=i,l=(await Promise.all(t.map(async c=>await Z2t(c,i,s[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function tTt({opened:e,close:t,filename:n,data:r,studyId:i}){const[o,s]=F.useState([...Wce].filter(m=>m!=="meta")),a=Go(),{value:u,status:l,error:c}=UF(eTt,[o,r,a.storageEngine,i]),f=F.useCallback(()=>{if(!u)return;const m=[u.header.join(","),...u.rows.map(p=>u.header.map(g=>`"${`${p[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);BX(m,n)},[n,u]),d=F.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),jk({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=F.useMemo(()=>{if(!u)return"";const m=u.rows.length>5?5:u.rows.length,p=m===1?"":"s";return`This is a preview of the first ${p?m:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return A.jsxs(Co,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[A.jsx(yG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Wce],value:o,onChange:m=>s(m),label:"Included optional columns:",leftSection:A.jsx(_He,{}),variant:"filled"}),A.jsx(ff,{h:"md"}),A.jsxs(Ue,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?A.jsxs(Dn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[A.jsx(Dn.Thead,{children:A.jsx(Dn.Tr,{children:u.header.map(m=>A.jsx(Dn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(m)?200:void 0},children:A.jsxs(un,{direction:"row",justify:"space-between",align:"center",children:[m,!sSe.includes(m)&&A.jsx(ev,{onClick:()=>s(o.filter(p=>p!==m)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:A.jsx(DI,{size:16})})]})},m))})}),A.jsx(Dn.Tbody,{children:u.rows.slice(0,5).map((m,p)=>A.jsx(Dn.Tr,{children:u.header.map(g=>A.jsx(Dn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:m[g]},`${p}-${g}`))},p))})]}):l==="error"&&c?A.jsx(Y0,{variant:"light",children:c.message}):null,A.jsx(yf,{visible:l==="pending"||l==="idle"})]}),A.jsx(ff,{h:"sm"}),A.jsx(un,{justify:"center",fz:"sm",c:"dimmed",children:A.jsx(ct,{children:h})}),A.jsx(ff,{h:"md"}),A.jsxs(ui,{justify:"right",children:[A.jsx(wn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),A.jsx(wn,{leftSection:A.jsx(cve,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&A.jsx(wn,{onClick:d,children:A.jsx(fHe,{})})]})]})}function nTt(){const e=yg(),{storageEngine:t}=Go(),n=Zr(w=>w.answers),r=iC(),[i,o]=F.useState(!1);F.useEffect(()=>{if(r){o(!0);return}const w=setInterval(async()=>{await t.verifyCompletion(n)&&(o(!0),clearInterval(w))},1e3)},[]),iSe();const[s,a]=F.useState(),[u,l]=F.useState(""),c=e.studyMetadata.title.replace(" ","_");F.useEffect(()=>{async function w(){if(t){const E=await t.getCurrentParticipantId(),T=await t.getParticipantData();l(E),a(T)}}w()},[t]);const f=F.useCallback(async()=>{BX(JSON.stringify(s,null,2),`${c}_${u}.json`)},[c,s,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[m,p]=F.useState(Math.floor(h/1e3));F.useEffect(()=>{if(i){const w=setInterval(()=>{p(E=>E-1)},1e3);return m<=0?(d&&f(),clearInterval(w),()=>clearInterval(w)):()=>clearInterval(w)}return()=>{}},[d,i,m,f]);const g=dw(),[v,b]=F.useState(!1);return F.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(g);b(E.dataCollectionEnabled)}})()},[t,g]),A.jsx(xi,{style:{height:"100%"},children:A.jsx(un,{direction:"column",children:i||!v?e.uiConfig.studyEndMsg?A.jsx(ju,{text:e.uiConfig.studyEndMsg}):A.jsx(ct,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):A.jsxs(A.Fragment,{children:[A.jsx(ct,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),A.jsx(ff,{h:"lg"}),A.jsx(xi,{children:A.jsx(Em,{color:"blue"})})]})})})}function rTt(){return A.jsx(ct,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function iTt(){return A.jsx(ct,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Gce={};function qV(e,t){e===void 0&&(e=Gce),t===void 0&&(t=Gce);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oTt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sTt=Object.prototype.hasOwnProperty;function WV(e,t){return sTt.call(e,t)}function GV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)WV(e,i)&&r.push(i);return r}function uf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function YV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ob(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function aSe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function KV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(KV(e[t]))return!0}else if(typeof e=="object"){for(var r=GV(e),i=r.length,o=0;o<i;o++)if(KV(e[r[o]]))return!0}}return!1}function Yce(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var uSe=function(e){oTt(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,Yce(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=Yce(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),$o=uSe,aTt=uf,zE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=VF(n,this.path);r&&(r=uf(r));var i=ax(n,{op:"remove",path:this.from}).removed;return ax(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=VF(n,this.from);return ax(n,{op:"add",path:this.path,value:uf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:zk(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},uTt={add:function(e,t,n){return YV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:zE.move,copy:zE.copy,test:zE.test,_get:zE._get};function VF(e,t){if(t=="")return e;var n={op:"_get",path:t};return ax(e,n),n.value}function ax(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):HF(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=VF(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=zk(e,t.value),s.test===!1)throw new $o("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new $o("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=uf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=HF;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=aSe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&m(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!YV(h))throw new $o("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);YV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new $o("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=uTt[t.op].call(t,l,h,e);if(s.test===!1)throw new $o("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=zE[t.op].call(t,l,h,e);if(s.test===!1)throw new $o("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new $o("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function X8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new $o("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=uf(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=ax(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function lTt(e,t,n){var r=ax(e,t);if(r.test===!1)throw new $o("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function HF(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new $o("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(zE[e.op]){if(typeof e.path!="string")throw new $o("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new $o('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new $o("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new $o("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&KV(e.value))throw new $o("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new $o("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new $o("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=lSe([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new $o("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new $o("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function lSe(e,t,n){try{if(!Array.isArray(e))throw new $o("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)X8(uf(t),uf(e),n||!0);else{n=n||HF;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof $o)return i;throw i}}function zk(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!zk(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!zk(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const cTt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:$o,_areEquals:zk,applyOperation:ax,applyPatch:X8,applyReducer:lTt,deepClone:aTt,getValueByPointer:VF,validate:lSe,validator:HF},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var jX=new WeakMap,fTt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),dTt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function hTt(e){return jX.get(e)}function pTt(e,t){return e.observers.get(t)}function mTt(e,t){e.observers.delete(t.callback)}function gTt(e,t){t.unobserve()}function yTt(e,t){var n=[],r,i=hTt(e);if(!i)i=new fTt(e),jX.set(e,i);else{var o=pTt(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=uf(e),t){r.callback=t,r.next=null;var s=function(){XV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){XV(r),clearTimeout(r.next),mTt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new dTt(t,r)),r}function XV(e,t){t===void 0&&(t=!1);var n=jX.get(e.object);zX(n.value,e.object,e.patches,"",t),e.patches.length&&X8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function zX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=GV(t),s=GV(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(WV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?zX(c,f,n,r+"/"+Ob(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Ob(l),value:uf(c)}),n.push({op:"replace",path:r+"/"+Ob(l),value:uf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ob(l),value:uf(c)}),n.push({op:"remove",path:r+"/"+Ob(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!WV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Ob(l),value:uf(t[l])})}}}function vTt(e,t,n){n===void 0&&(n=!1);var r=[];return zX(e,t,r,"",n),r}const bTt=Object.freeze(Object.defineProperty({__proto__:null,compare:vTt,generate:XV,observe:yTt,unobserve:gTt},Symbol.toStringTag,{value:"Module"}));Object.assign({},cTt,bTt,{JsonPatchError:uSe,deepClone:uf,escapePathComponent:Ob,unescapePathComponent:aSe});var W7,Kce;function xTt(){if(Kce)return W7;Kce=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return W7=function(n,r){var i,o,s;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),o=i===""?1/0:r.maxLength===void 0?80:r.maxLength,s=r.replacer,function a(u,l,c){var f,d,h,m,p,g,v,b,w,E,T,C;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),T=JSON.stringify(u,s),T===void 0)return T;if(v=o-l.length-c,T.length<=v&&(w=T.replace(e,function(S,I){return I||S+" "}),w.length<=v))return w;if(s!=null&&(u=JSON.parse(T),s=void 0),typeof u=="object"&&u!==null){if(b=l+i,h=[],d=0,Array.isArray(u))for(E="[",f="]",v=u.length;d<v;d++)h.push(a(u[d],b,d===v-1?0:1)||"null");else for(E="{",f="}",g=Object.keys(u),v=g.length;d<v;d++)m=g[d],p=JSON.stringify(m)+": ",C=a(u[m],b,p.length+(d===v-1?0:1)),C!==void 0&&h.push(p+C);if(h.length>0)return[E,i+h.join(`,
`+b),f].join(`
`+l)}return T}(n,"",0)},W7}var wTt=xTt();const G7=_c(wTt);function Tc(e,t,n){return e.fields=t||[],e.fname=n,e}function Ho(e){return e==null?null:e.fname}function Mu(e){return e==null?null:e.fields}function cSe(e){return e.length===1?_Tt(e[0]):ETt(e)}const _Tt=e=>function(t){return t[e]},ETt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ht(e){throw Error(e)}function Im(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,u;e=e+"";function l(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(u=e[a],u==="\\")o+=e.substring(s,a++),s=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;s===i&&u==='"'||s===i&&u==="'"?(s=a+1,r=u):u==="."&&!i?a>s?l():s=a+1:u==="["?(a>s&&l(),i=s=a+1):u==="]"&&(i||ht("Access path missing open bracket: "+e),i>0&&l(),i=0,s=a+1)}return i&&ht("Access path missing closing bracket: "+e),r&&ht("Access path missing closing quote: "+e),a>s&&(a++,l()),t}function cd(e,t,n){const r=Im(e);return e=r.length===1?r[0]:e,Tc((n&&n.get||cSe)(r),[e],t||e)}const aR=cd("id"),Vu=Tc(e=>e,[],"identity"),Wy=Tc(()=>0,[],"zero"),dC=Tc(()=>1,[],"one"),fd=Tc(()=>!0,[],"true"),Iy=Tc(()=>!1,[],"false");function TTt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const fSe=0,UX=1,VX=2,dSe=3,hSe=4;function HX(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TTt,r=e||fSe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=UX&&n(t||"error","ERROR",arguments),this},warn(){return r>=VX&&n(t||"warn","WARN",arguments),this},info(){return r>=dSe&&n(t||"log","INFO",arguments),this},debug(){return r>=hSe&&n(t||"log","DEBUG",arguments),this}}}var gt=Array.isArray;function qt(e){return e===Object(e)}const Xce=e=>e!=="__proto__";function hC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=CTt(r.signals,i.signals);else{const s=o==="legend"?{layout:1}:o==="style"?!0:null;pC(r,o,i[o],s)}return r},{})}function pC(e,t,n,r){if(!Xce(t))return;let i,o;if(qt(n)&&!gt(n)){o=qt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?pC(o,i,n[i]):Xce(i)&&(o[i]=n[i])}else e[t]=n}function CTt(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Mr(e){return e[e.length-1]}function Nu(e){return e==null||e===""?null:+e}const pSe=e=>t=>e*Math.exp(t),mSe=e=>t=>Math.log(e*t),gSe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),ySe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,qF=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Q8(e,t,n,r){const i=n(e[0]),o=n(Mr(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function vSe(e,t){return Q8(e,t,Nu,Vu)}function bSe(e,t){var n=Math.sign(e[0]);return Q8(e,t,mSe(n),pSe(n))}function xSe(e,t,n){return Q8(e,t,qF(n),qF(1/n))}function wSe(e,t,n){return Q8(e,t,gSe(n),ySe(n))}function J8(e,t,n,r,i){const o=r(e[0]),s=r(Mr(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function qX(e,t,n){return J8(e,t,n,Nu,Vu)}function WX(e,t,n){const r=Math.sign(e[0]);return J8(e,t,n,mSe(r),pSe(r))}function WF(e,t,n,r){return J8(e,t,n,qF(r),qF(1/r))}function GX(e,t,n,r){return J8(e,t,n,gSe(r),ySe(r))}function _Se(e){return 1+~~(new Date(e).getMonth()/3)}function ESe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Gt(e){return e!=null?gt(e)?e:[e]:[]}function TSe(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function ir(e){return typeof e=="function"}const STt="descending";function YX(e,t,n){n=n||{},t=Gt(t)||[];const r=[],i=[],o={},s=n.comparator||ATt;return Gt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===STt?-1:1),i.push(a=ir(a)?a:cd(a,null,n)),(Mu(a)||[]).forEach(l=>o[l]=1))}),i.length===0?null:Tc(s(i,r),Object.keys(o))}const Z8=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),ATt=(e,t)=>e.length===1?DTt(e[0],t[0]):kTt(e,t,e.length),DTt=(e,t)=>function(n,r){return Z8(e(n),e(r))*t},kTt=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=Z8(o(r),o(i));return s*t[a]});function Hu(e){return ir(e)?e:()=>e}function KX(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function rr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function mm(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function CSe(e,t){const n=e.length;let r=-1,i,o,s,a,u;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,u=r))}return[a,u]}const ITt=Object.prototype.hasOwnProperty;function Zt(e,t){return ITt.call(e,t)}const Q3={};function mC(e){let t={},n;function r(o){return Zt(t,o)&&t[o]!==Q3}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===Q3&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=Q3),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const u=t[a];u!==Q3&&(!n||!n(u))&&(o[a]=u,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function SSe(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],u=Mr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=s?r:c<=s?i:o}function Vt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),rr(r,n)}function UE(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function pv(e){return typeof e=="boolean"}function d1(e){return Object.prototype.toString.call(e)==="[object Date]"}function ASe(e){return e&&ir(e[Symbol.iterator])}function ti(e){return typeof e=="number"}function DSe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Yt(e){return typeof e=="string"}function XX(e,t,n){e&&(e=t?Gt(e).map(a=>a.replace(/\\(.)/g,"$1")):Gt(e));const r=e&&e.length,i=n&&n.get||cSe,o=a=>i(t?[a]:Im(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(u){return""+a(u)}}else{const a=e.map(o);s=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Tc(s,e,"key")}function kSe(e,t){const n=e[0],r=Mr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const RTt=1e4;function ISe(e){e=+e||RTt;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>Zt(t,s)||Zt(n,s),get:s=>Zt(t,s)?t[s]:Zt(n,s)?o(s,n[s]):void 0,set:(s,a)=>Zt(t,s)?t[s]=a:o(s,a)}}function RSe(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,u=0,l=0;for(;a<i&&u<o;++l)s[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)s[l]=t[a];for(;u<o;++u,++l)s[l]=n[u];return s}function tD(e,t){let n="";for(;--t>=0;)n+=e;return n}function NSe(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?tD(i,s)+o:r==="center"?tD(i,~~(s/2))+o+tD(i,Math.ceil(s/2)):o+tD(i,s)}function uR(e){return e&&Mr(e)-e[0]||0}function zt(e){return gt(e)?"["+e.map(zt)+"]":qt(e)||Yt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function QX(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const NTt=e=>ti(e)||d1(e)?e:Date.parse(e);function JX(e,t){return t=t||NTt,e==null||e===""?null:t(e)}function ZX(e){return e==null||e===""?null:e+""}function Ih(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function PSe(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function My(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}function PTt(e){return e}function OTt(e){if(e==null)return PTt;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+o,f[1]=(n+=a[1])*i+s;l<c;)f[l]=a[l],++l;return f}}function FTt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function MTt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Qce(e,n)})}:Qce(e,t)}function Qce(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=OSe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function OSe(e,t){var n=OTt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,m=d.length;h<m;++h)f.push(n(d[h],h));c<0&&FTt(f,m)}function o(c){return n(c)}function s(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=s(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=o(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(o);break;case"LineString":d=s(c.arcs);break;case"MultiLineString":d=c.arcs.map(s);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function $Tt(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++s],t[s]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,m;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,m=r[d]){delete r[m.start];var p=m===h?h:h.concat(m);r[p.start=h.start]=i[p.end=m.end]=p}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,m=i[f]){delete i[m.end];var g=m===h?h:m.concat(h);r[g.start=m.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),o.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||o.push([l])}),o}function LTt(e){return OSe(e,BTt.apply(this,arguments))}function BTt(e,t,n){var r,i,o;if(arguments.length>1)r=jTt(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:$Tt(e,r)}}function jTt(e,t,n){var r=[],i=[],o;function s(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:o})}function a(f){f.forEach(s)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(o=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Qa="year",yc="quarter",$u="month",js="week",vc="date",Iu="day",gm="dayofyear",wf="hours",_f="minutes",dd="seconds",Rh="milliseconds",eQ=[Qa,yc,$u,js,vc,Iu,gm,wf,_f,dd,Rh],Y7=eQ.reduce((e,t,n)=>(e[t]=1+n,e),{});function tQ(e){const t=Gt(e).slice(),n={};return t.length||ht("Missing time unit."),t.forEach(i=>{Zt(Y7,i)?n[i]=1:ht(`Invalid time unit: ${i}.`)}),(n[js]||n[Iu]?1:0)+(n[yc]||n[$u]||n[vc]?1:0)+(n[gm]?1:0)>1&&ht(`Incompatible time units: ${e}`),t.sort((i,o)=>Y7[i]-Y7[o]),t}const zTt={[Qa]:"%Y ",[yc]:"Q%q ",[$u]:"%b ",[vc]:"%d ",[js]:"W%U ",[Iu]:"%a ",[gm]:"%j ",[wf]:"%H:00",[_f]:"00:%M",[dd]:":%S",[Rh]:".%L",[`${Qa}-${$u}`]:"%Y-%m ",[`${Qa}-${$u}-${vc}`]:"%Y-%m-%d ",[`${wf}-${_f}`]:"%H:%M"};function FSe(e,t){const n=rr({},zTt,t),r=tQ(e),i=r.length;let o="",s=0,a,u;for(s=0;s<i;)for(a=r.length;a>s;--a)if(u=r.slice(s,a).join("-"),n[u]!=null){o+=n[u],s=a;break}return o.trim()}const zb=new Date;function nQ(e){return zb.setFullYear(e),zb.setMonth(0),zb.setDate(1),zb.setHours(0,0,0,0),zb}function MSe(e){return LSe(new Date(e))}function $Se(e){return QV(new Date(e))}function LSe(e){return tg.count(nQ(e.getFullYear())-1,e)}function QV(e){return uC.count(nQ(e.getFullYear())-1,e)}function JV(e){return nQ(e).getDay()}function UTt(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function BSe(e){return zSe(new Date(e))}function jSe(e){return ZV(new Date(e))}function zSe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return f1.count(t-1,e)}function ZV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lC.count(t-1,e)}function eH(e){return zb.setTime(Date.UTC(e,0,1)),zb.getUTCDay()}function VTt(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function USe(e,t,n,r,i){const o=t||1,s=Mr(e),a=(v,b,w)=>(w=w||v,HTt(n[w],r[w],v===s&&o,b)),u=new Date,l=Ih(e),c=l[Qa]?a(Qa):Hu(2012),f=l[$u]?a($u):l[yc]?a(yc):Wy,d=l[js]&&l[Iu]?a(Iu,1,js+Iu):l[js]?a(js,1):l[Iu]?a(Iu,1):l[vc]?a(vc,1):l[gm]?a(gm,1):dC,h=l[wf]?a(wf):Wy,m=l[_f]?a(_f):Wy,p=l[dd]?a(dd):Wy,g=l[Rh]?a(Rh):Wy;return function(v){u.setTime(+v);const b=c(u);return i(b,f(u),d(u,b),h(u),m(u),p(u),g(u))}}function HTt(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function Q2(e,t,n){return t+e*7-(n+6)%7}const qTt={[Qa]:e=>e.getFullYear(),[yc]:e=>Math.floor(e.getMonth()/3),[$u]:e=>e.getMonth(),[vc]:e=>e.getDate(),[wf]:e=>e.getHours(),[_f]:e=>e.getMinutes(),[dd]:e=>e.getSeconds(),[Rh]:e=>e.getMilliseconds(),[gm]:e=>LSe(e),[js]:e=>QV(e),[js+Iu]:(e,t)=>Q2(QV(e),e.getDay(),JV(t)),[Iu]:(e,t)=>Q2(1,e.getDay(),JV(t))},WTt={[yc]:e=>3*e,[js]:(e,t)=>Q2(e,0,JV(t))};function VSe(e,t){return USe(e,t||1,qTt,WTt,UTt)}const GTt={[Qa]:e=>e.getUTCFullYear(),[yc]:e=>Math.floor(e.getUTCMonth()/3),[$u]:e=>e.getUTCMonth(),[vc]:e=>e.getUTCDate(),[wf]:e=>e.getUTCHours(),[_f]:e=>e.getUTCMinutes(),[dd]:e=>e.getUTCSeconds(),[Rh]:e=>e.getUTCMilliseconds(),[gm]:e=>zSe(e),[js]:e=>ZV(e),[Iu]:(e,t)=>Q2(1,e.getUTCDay(),eH(t)),[js+Iu]:(e,t)=>Q2(ZV(e),e.getUTCDay(),eH(t))},YTt={[yc]:e=>3*e,[js]:(e,t)=>Q2(e,0,eH(t))};function HSe(e,t){return USe(e,t||1,GTt,YTt,VTt)}const KTt={[Qa]:dm,[yc]:Mk.every(3),[$u]:Mk,[js]:uC,[vc]:tg,[Iu]:tg,[gm]:tg,[wf]:P8,[_f]:R8,[dd]:V0,[Rh]:U2},XTt={[Qa]:hm,[yc]:$k.every(3),[$u]:$k,[js]:lC,[vc]:f1,[Iu]:f1,[gm]:f1,[wf]:O8,[_f]:N8,[dd]:V0,[Rh]:U2};function gC(e){return KTt[e]}function yC(e){return XTt[e]}function qSe(e,t,n){return e?e.offset(t,n):void 0}function WSe(e,t,n){return qSe(gC(e),t,n)}function GSe(e,t,n){return qSe(yC(e),t,n)}function YSe(e,t,n,r){return e?e.range(t,n,r):void 0}function KSe(e,t,n,r){return YSe(gC(e),t,n,r)}function XSe(e,t,n,r){return YSe(yC(e),t,n,r)}const nD=1e3,rD=nD*60,iD=rD*60,e$=iD*24,QTt=e$*7,Jce=e$*30,tH=e$*365,QSe=[Qa,$u,vc,wf,_f,dd,Rh],oD=QSe.slice(0,-1),sD=oD.slice(0,-1),aD=sD.slice(0,-1),JTt=aD.slice(0,-1),ZTt=[Qa,js],Zce=[Qa,$u],JSe=[Qa],aA=[[oD,1,nD],[oD,5,5*nD],[oD,15,15*nD],[oD,30,30*nD],[sD,1,rD],[sD,5,5*rD],[sD,15,15*rD],[sD,30,30*rD],[aD,1,iD],[aD,3,3*iD],[aD,6,6*iD],[aD,12,12*iD],[JTt,1,e$],[ZTt,1,QTt],[Zce,1,Jce],[Zce,3,3*Jce],[JSe,1,tH]];function ZSe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(uR(t))/n;let i=oC(a=>a[2]).right(aA,r),o,s;return i===aA.length?(o=JSe,s=I1(t[0]/tH,t[1]/tH,n)):i?(i=aA[r/aA[i-1][2]<aA[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=QSe,s=Math.max(I1(t[0],t[1],n),1)),{units:o,step:s}}function uD(e){const t={};return n=>t[n]||(t[n]=e(n))}function eCt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=tCt(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function tCt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function eAe(e){const t=uD(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Tx(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return eCt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=Tx(s??",f");const a=I1(r,i,o),u=Math.max(Math.abs(r),Math.abs(i));let l;if(s.precision==null)switch(s.type){case"s":return isNaN(l=d2e(a,u))||(s.precision=l),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=h2e(a,u))||(s.precision=l-(s.type==="e"));break}case"f":case"%":{isNaN(l=f2e(a))||(s.precision=l-(s.type==="%")*2);break}}return t(s)}}}let nH;tAe();function tAe(){return nH=eAe({format:C8,formatPrefix:JK})}function nAe(e){return eAe(c2e(e))}function GF(e){return arguments.length?nH=nAe(e):nH}function efe(e,t,n){n=n||{},qt(n)||ht(`Invalid time multi-format specifier: ${n}`);const r=t(dd),i=t(_f),o=t(wf),s=t(vc),a=t(js),u=t($u),l=t(yc),c=t(Qa),f=e(n[Rh]||".%L"),d=e(n[dd]||":%S"),h=e(n[_f]||"%I:%M"),m=e(n[wf]||"%I %p"),p=e(n[vc]||n[Iu]||"%a %d"),g=e(n[js]||"%b %d"),v=e(n[$u]||"%B"),b=e(n[yc]||"%B"),w=e(n[Qa]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:o(E)<E?h:s(E)<E?m:u(E)<E?a(E)<E?p:g:c(E)<E?l(E)<E?v:b:w)(E)}function rAe(e){const t=uD(e.format),n=uD(e.utcFormat);return{timeFormat:r=>Yt(r)?t(r):efe(t,gC,r),utcFormat:r=>Yt(r)?n(r):efe(n,yC,r),timeParse:uD(e.parse),utcParse:uD(e.utcParse)}}let rH;iAe();function iAe(){return rH=rAe({format:hX,parse:CTe,utcFormat:pX,utcParse:STe})}function oAe(e){return rAe(xTe(e))}function Uk(e){return arguments.length?rH=oAe(e):rH}const iH=(e,t)=>rr({},e,t);function sAe(e,t){const n=e?nAe(e):GF(),r=t?oAe(t):Uk();return iH(n,r)}function rQ(e,t){const n=arguments.length;return n&&n!==2&&ht("defaultLocale expects either zero or two arguments."),n?iH(GF(e),Uk(t)):iH(GF(),Uk())}function nCt(){return tAe(),iAe(),rQ()}const rCt=/^(data:|([A-Za-z]+:)?\/\/)/,iCt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,oCt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,tfe="file://";function sCt(e,t){return n=>({options:n||{},sanitize:uCt,load:aCt,fileAccess:!1,file:lCt(t),http:fCt(e)})}async function aCt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function uCt(e,t){t=rr({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=iCt.test(e.replace(oCt,""));(e==null||typeof e!="string"||!a)&&ht("Sanitize failure, invalid URI: "+zt(e));const u=rCt.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(tfe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(tfe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function lCt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,o)=>{i?r(i):n(o)})}):cCt}async function cCt(){ht("No file system access.")}function fCt(e){return e?async function(t,n){const r=rr({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?ir(o[i])?o[i]():o.text():ht(o.status+""+o.statusText)}:dCt}async function dCt(){ht("No HTTP fetch method available.")}const hCt=e=>e!=null&&e===e,pCt=e=>e==="true"||e==="false"||e===!0||e===!1,mCt=e=>!Number.isNaN(Date.parse(e)),aAe=e=>!Number.isNaN(+e)&&!(e instanceof Date),gCt=e=>aAe(e)&&Number.isInteger(+e),oH={boolean:QX,integer:Nu,number:Nu,date:JX,string:ZX,unknown:Vu},J3=[pCt,gCt,aAe,mCt],yCt=["boolean","integer","number","date"];function uAe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=J3.length,i=J3.map((o,s)=>s+1);for(let o=0,s=0,a,u;o<n;++o)for(u=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&hCt(u)&&!J3[a](u)&&(i[a]=0,++s,s===J3.length))return"string";return yCt[i.reduce((o,s)=>o===0?s:o,0)-1]}function lAe(e,t){return t.reduce((n,r)=>(n[r]=uAe(e,r),n),{})}function nfe(e){const t=function(n,r){const i={delimiter:e};return iQ(n,r?rr(r,i):i)};return t.responseType="text",t}function iQ(e,t){return t.header&&(e=t.header.map(zt).join(t.delimiter)+`
`+e),lmt(t.delimiter).parse(e+"")}iQ.responseType="text";function vCt(e){return typeof Buffer=="function"&&ir(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function oQ(e,t){const n=t&&t.property?cd(t.property):Vu;return qt(e)&&!vCt(e)?bCt(n(e),t):n(JSON.parse(e))}oQ.responseType="json";function bCt(e,t){return!gt(e)&&ASe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const xCt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function cAe(e,t){let n,r,i,o;return e=oQ(e,t),t&&t.feature?(n=MTt,i=t.feature):t&&t.mesh?(n=LTt,i=t.mesh,o=xCt[t.filter]):ht("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):ht("Invalid TopoJSON object: "+i),r&&r.features||[r]}cAe.responseType="json";const IO={dsv:iQ,csv:nfe(","),tsv:nfe("	"),json:oQ,topojson:cAe};function sQ(e,t){return arguments.length>1?(IO[e]=t,this):Zt(IO,e)?IO[e]:null}function fAe(e){const t=sQ(e);return t&&t.responseType||"text"}function dAe(e,t,n,r){t=t||{};const i=sQ(t.type||"json");return i||ht("Unknown data format type: "+t.type),e=i(e,t),t.parse&&wCt(e,t.parse,n,r),Zt(e,"columns")&&delete e.columns,e}function wCt(e,t,n,r){if(!e.length)return;const i=Uk();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,u,l,c,f;t==="auto"&&(t=lAe(e,o)),o=Object.keys(t);const d=o.map(h=>{const m=t[h];let p,g;if(m&&(m.startsWith("date:")||m.startsWith("utc:")))return p=m.split(/:(.+)?/,2),g=p[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(p[0]==="utc"?r:n)(g);if(!oH[m])throw Error("Illegal format pattern: "+h+":"+m);return oH[m]});for(u=0,c=e.length,f=o.length;u<c;++u)for(s=e[u],l=0;l<f;++l)a=o[l],s[a]=d[l](s[a])}const t$=sCt(typeof fetch<"u"&&fetch,null);function n$(e){const t=e||Vu,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function RO(e,t){try{await t(e)}catch(n){e.error(n)}}const hAe=Symbol("vega_id");let _Ct=1;function r$(e){return!!(e&&En(e))}function En(e){return e[hAe]}function pAe(e,t){return e[hAe]=t,e}function ai(e){const t=e===Object(e)?e:{data:e};return En(t)?t:pAe(t,_Ct++)}function aQ(e){return i$(e,ai({}))}function i$(e,t){for(const n in e)t[n]=e[n];return t}function mAe(e,t){return pAe(t,En(e))}function vw(e,t){return e?t?(n,r)=>e(n,r)||En(t(n))-En(t(r)):(n,r)=>e(n,r)||En(n)-En(r):null}function gAe(e){return e&&e.constructor===bw}function bw(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:bw,insert(a){const u=Gt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=ir(a)?r:t,l=Gt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Hu(l)};return ir(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return ir(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,u){const l={},c={};let f,d,h,m,p,g;for(f=0,d=u.length;f<d;++f)l[En(u[f])]=1;for(f=0,d=t.length;f<d;++f)p=t[f],l[En(p)]=-1;for(f=0,d=r.length;f<d;++f)m=r[f],u.forEach(b=>{m(b)&&(l[En(b)]=-1)});for(f=0,d=e.length;f<d;++f)p=e[f],g=En(p),l[g]?l[g]=1:a.add.push(ai(e[f]));for(f=0,d=u.length;f<d;++f)p=u[f],l[En(p)]<0&&a.rem.push(p);function v(b,w,E){E?b[w]=E(b):a.encode=w,s||(c[En(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],p=h.tuple,m=h.field,g=l[En(p)],g>0&&(v(p,m,h.value),a.modifies(m));for(f=0,d=i.length;f<d;++f)h=i[f],m=h.filter,u.forEach(b=>{m(b)&&l[En(b)]>0&&v(b,h.field,h.value)}),a.modifies(h.field);if(s)a.mod=t.length||r.length?u.filter(b=>l[En(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const NO="_:mod:_";function o$(){Object.defineProperty(this,NO,{writable:!0,value:{}})}o$.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[NO];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=gt(n)?1+n.length:-1),i},modified(e,t){const n=this[NO];if(arguments.length){if(gt(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[NO]={},this}};let ECt=0;const TCt="pulse",CCt=new o$,SCt=1,ACt=2;function $i(e,t,n,r){this.id=++ECt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function rfe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}$i.prototype={targets(){return this._targets||(this._targets=n$(aR))},set(e){return this.value!==e?(this.value=e,1):0},skip:rfe(SCt),modified:rfe(ACt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new o$,i=this._argops=this._argops||[],o=[];let s,a,u,l;const c=(f,d,h)=>{h instanceof $i?(h!==this&&(t&&h.targets().add(this),o.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(s in e)if(a=e[s],s===TCt)Gt(a).forEach(f=>{f instanceof $i?f!==this&&(f.targets().add(this),o.push(f)):ht("Pulse parameters must be operator instances.")}),this.source=a;else if(gt(a))for(r.set(s,-1,Array(u=a.length)),l=0;l<u;++l)c(s,l,a[l]);else c(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||CCt,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function DCt(e,t,n,r){let i=1,o;return e instanceof $i?o=e:e&&e.prototype instanceof $i?o=new e:ir(e)?o=new $i(null,e):(i=0,o=new $i(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function kCt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let ICt=0;function s$(e,t,n){this.id=++ICt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ry(e,t,n){return new s$(e,t,n)}s$.prototype={_filter:fd,_apply:Vu,targets(){return this._targets||(this._targets=n$(aR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ry(e);return this.targets().add(t),t},apply(e){const t=Ry(null,e);return this.targets().add(t),t},merge(){const e=Ry();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ry();return this.targets().add(Ry(null,null,KX(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ry(null,null,()=>n=!0)),t.targets().add(Ry(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=fd,this._targets=null}};function RCt(e,t,n,r){const i=this,o=Ry(n,r),s=function(l){l.dataflow=i;try{o.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Gt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,s);return o}function NCt(e,t){const n=this.locale();return dAe(e,t,n.timeParse,n.utcParse)}function PCt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function OCt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:fAe(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function FCt(e,t,n){const r=this,i=r._pending||MCt(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(fd).insert(o.data||[])),i.done(),o}function MCt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const $Ct={skip:!0};function LCt(e,t,n,r,i){return(e instanceof $i?jCt:BCt)(this,e,t,n,r,i),this}function BCt(e,t,n,r,i,o){const s=rr({},o,$Ct);let a,u;ir(n)||(n=Hu(n)),r===void 0?a=l=>e.touch(n(l)):ir(r)?(u=new $i(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;gAe(f)?e.pulse(c,f,o):e.update(c,f,s)}):a=l=>e.update(n(l),r,s),t.apply(a)}function jCt(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new $i(null,zCt(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function zCt(e,t){return t=ir(t)?t:Hu(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function UCt(e){e.rank=++this._rank}function VCt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ht("Cycle detected in dataflow graph.")}const YF={},Sp=1,$y=2,S0=4,HCt=Sp|$y,ife=Sp|S0,uE=Sp|$y|S0,ofe=8,uA=16,sfe=32,afe=64;function h1(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function K7(e,t){const n=[];return My(e,t,r=>n.push(r)),n}function ufe(e,t){const n={};return e.visit(t,r=>{n[En(r)]=1}),r=>n[En(r)]?null:r}function Z3(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}h1.prototype={StopPropagation:YF,ADD:Sp,REM:$y,MOD:S0,ADD_REM:HCt,ADD_MOD:ife,ALL:uE,REFLOW:ofe,SOURCE:uA,NO_SOURCE:sfe,NO_FIELDS:afe,fork(e){return new h1(this.dataflow).init(this,e)},clone(){const e=this.fork(uE);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(uE|uA)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new h1(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&afe)&&(n.fields=e.fields),t&Sp?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&$y?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&S0?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&sfe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||uE;return t&Sp&&this.add.length||t&$y&&this.rem.length||t&S0&&this.mod.length},reflow(e){if(e)return this.fork(uE).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(S0,ufe(this,Sp))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return gt(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?gt(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Sp&&(n.addF=Z3(n.addF,t)),e&$y&&(n.remF=Z3(n.remF,t)),e&S0&&(n.modF=Z3(n.modF,t)),e&uA&&(n.srcF=Z3(n.srcF,t)),n},materialize(e){e=e||uE;const t=this;return e&Sp&&t.addF&&(t.add=K7(t.add,t.addF),t.addF=null),e&$y&&t.remF&&(t.rem=K7(t.rem,t.remF),t.remF=null),e&S0&&t.modF&&(t.mod=K7(t.mod,t.modF),t.modF=null),e&uA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&uA)return My(n.source,n.srcF,r),n;e&Sp&&My(n.add,n.addF,r),e&$y&&My(n.rem,n.remF,r),e&S0&&My(n.mod,n.modF,r);const i=n.source;if(e&ofe&&i){const o=n.add.length+n.mod.length;o===i.length||(o?My(i,ufe(n,ife),r):My(i,n.srcF,r))}return n}};function uQ(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const u in s.fields)a[u]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}Vt(uQ,h1,{fork(e){const t=new h1(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?gt(e)?e.some(r=>n[r]):n[e]:0},filter(){ht("MultiPulse does not support filtering.")},materialize(){ht("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function qCt(e,t,n){const r=this,i=[];if(r._pulse)return yAe(r);if(r._pending&&await r._pending,t&&await RO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new h1(r,o,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=n$(aR);let s=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=YF),u!==YF&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++s}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await RO(r,c[f].callback)}return n&&await RO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function WCt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function GCt(e,t,n){return this._pulse?yAe(this):(this.evaluate(e,t,n),this)}function YCt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function yAe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function KCt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function XCt(e,t){const n=e.source,r=this._clock;return n&&gt(n)?new uQ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||QCt(this._pulse,n&&n.pulse)}function QCt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==YF&&(e.source=t.source),e)}const lQ={skip:!1,force:!1};function JCt(e,t){const n=t||lQ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function ZCt(e,t,n){const r=n||lQ;return(e.set(t)||r.force)&&this.touch(e,r),this}function eSt(e,t,n){this.touch(e,n||lQ);const r=new h1(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function tSt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),vAe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,nSt(t,0,e)):r=n,r}}}function vAe(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function nSt(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,vAe(e,r,t,n)}function a2(){this.logger(HX()),this.logLevel(UX),this._clock=0,this._rank=0,this._locale=rQ();try{this._loader=t$()}catch{}this._touched=n$(aR),this._input={},this._pulse=null,this._heap=tSt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function lA(e){return function(){return this._log[e].apply(this,arguments)}}a2.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:lA("error"),warn:lA("warn"),info:lA("info"),debug:lA("debug"),logLevel:lA("level"),cleanThreshold:1e4,add:DCt,connect:kCt,rank:UCt,rerank:VCt,pulse:eSt,touch:JCt,update:ZCt,changeset:bw,ingest:PCt,parse:NCt,preload:FCt,request:OCt,events:RCt,on:LCt,evaluate:qCt,run:GCt,runAsync:WCt,runAfter:YCt,_enqueue:KCt,_getPulse:XCt};function st(e,t){$i.call(this,e,null,t)}Vt(st,$i,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const J2={};function bAe(e){const t=xAe(e);return t&&t.Definition||null}function xAe(e){return e=e&&e.toLowerCase(),Zt(J2,e)?J2[e]:null}function*wAe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function cQ(e,t,n){const r=Float64Array.from(wAe(e,n));return r.sort(Z0),t.map(i=>uEe(r,i))}function fQ(e,t){return cQ(e,[.25,.5,.75],t)}function dQ(e,t){const n=e.length,r=Vct(e,t),i=fQ(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function _Ae(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,u,l,c,f,d;const h=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const m=c>=0?0:~~(-c/r)+1,p=Math.pow(n,-m-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/a+p)*a,o=o<c?c-a:c,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var hd=Math.random;function rSt(e){hd=e}function EAe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(wAe(e,r)),o=i.length,s=t;let a,u,l,c;for(l=0,c=Array(s);l<s;++l){for(a=0,u=0;u<o;++u)a+=i[~~(hd()*o)];c[l]=a/o}return c.sort(Z0),[XU(c,n/2),XU(c,1-n/2)]}function TAe(e,t,n,r){r=r||(d=>d);const i=e.length,o=new Float64Array(i);let s=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;s<a;++s)o[s]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;s<a;++s)o[s]=l;return n?iSt(o,t+t/4):o}function iSt(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function oSt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function sSt(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*hd())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const CAe=Math.sqrt(2*Math.PI),aSt=Math.SQRT2;let cA=NaN;function a$(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(cA===cA)n=cA,cA=NaN;else{do n=hd()*2-1,r=hd()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,cA=r*o}return e+n*t}function hQ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*CAe)}function u$(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function l$(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*aSt*uSt(2*e-1)}function uSt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function pQ(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>a$(n,r),pdf:o=>hQ(o,n,r),cdf:o=>u$(o,n,r),icdf:o=>l$(o,n,r)};return i.mean(e).stdev(t)}function mQ(e,t){const n=pQ();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=dQ(e)),i):t},sample(){return e[~~(hd()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function gQ(e,t){return e=e||0,t=t??1,Math.exp(e+a$()*t)}function yQ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*CAe*e)}function vQ(e,t,n){return u$(Math.log(e),t,n)}function bQ(e,t,n){return Math.exp(l$(e,t,n))}function SAe(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>gQ(n,r),pdf:o=>yQ(o,n,r),cdf:o=>vQ(o,n,r),icdf:o=>bQ(o,n,r)};return i.mean(e).stdev(t)}function AAe(e,t){let n=0,r;function i(s){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=s[l]==null?1:+s[l];for(l=0;l<n;++l)a[l]/=u;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=hd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(s<u){a=e[l];break}return a.sample()},pdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(s);return a},cdf(s){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function xQ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*hd()}function wQ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function _Q(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function EQ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function DAe(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>xQ(n,r),pdf:o=>wQ(o,n,r),cdf:o=>_Q(o,n,r),icdf:o=>EQ(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function TQ(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function lR(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function c$(e,t,n,r){e=e.filter(h=>{let m=t(h),p=n(h);return m!=null&&(m=+m)>=m&&p!=null&&(p=+p)>=p}),r&&e.sort((h,m)=>t(h)-t(m));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)o[a]=c=+t(d),s[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)o[a]-=u,s[a]-=l;return[o,s,u,l]}function cR(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function vC(e,t,n,r,i){let o=0,s=0;return cR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;o+=l*l,s+=c*c}),1-o/s}function CQ(e,t,n){let r=0,i=0,o=0,s=0,a=0;cR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=lR(r,i,o,s),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:vC(e,t,n,i,l)}}function kAe(e,t,n){let r=0,i=0,o=0,s=0,a=0;cR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,o+=(c*f-o)/a,s+=(c*c-s)/a});const u=lR(r,i,o,s),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:vC(e,t,n,i,l)}}function IAe(e,t,n){const[r,i,o,s]=c$(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,m;cR(e,t,n,(b,w)=>{d=r[f++],h=Math.log(w),m=d*w,a+=(w*h-a)/f,u+=(m-u)/f,l+=(m*h-l)/f,c+=(d*m-c)/f});const[p,g]=lR(u/s,a/s,l/s,c/s),v=b=>Math.exp(p+g*(b-o));return{coef:[Math.exp(p-g*o),g],predict:v,rSquared:vC(e,t,n,s,v)}}function RAe(e,t,n){let r=0,i=0,o=0,s=0,a=0,u=0;cR(e,t,n,(f,d)=>{const h=Math.log(f),m=Math.log(d);++u,r+=(h-r)/u,i+=(m-i)/u,o+=(h*m-o)/u,s+=(h*h-s)/u,a+=(d-a)/u});const l=lR(r,i,o,s),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:vC(e,t,n,a,c)}}function SQ(e,t,n){const[r,i,o,s]=c$(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,m,p,g;for(h=0;h<a;)m=r[h],p=i[h++],g=m*m,u+=(g-u)/h,l+=(g*m-l)/h,c+=(g*g-c)/h,f+=(m*p-f)/h,d+=(g*p-d)/h;const v=c-u*u,b=u*v-l*l,w=(d*u-f*l)/b,E=(f*v-d*l)/b,T=-w*u,C=S=>(S=S-o,w*S*S+E*S+T+s);return{coef:[T-E*o+w*o*o+s,E-2*w*o,w],predict:C,rSquared:vC(e,t,n,s,C)}}function NAe(e,t,n,r){if(r===0)return TQ(e,t,n);if(r===1)return CQ(e,t,n);if(r===2)return SQ(e,t,n);const[i,o,s,a]=c$(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,m,p,g;for(d=0;d<f;++d){for(m=0,p=0;m<u;++m)p+=Math.pow(i[m],d)*o[m];for(l.push(p),g=new Float64Array(f),h=0;h<f;++h){for(m=0,p=0;m<u;++m)p+=Math.pow(i[m],d+h);g[h]=p}c.push(g)}c.push(l);const v=cSt(c),b=w=>{w-=s;let E=a+v[0]+v[1]*w+v[2]*w*w;for(d=3;d<f;++d)E+=v[d]*Math.pow(w,d);return E};return{coef:lSt(f,v,-s,a),predict:b,rSquared:vC(e,t,n,a,b)}}function lSt(e,t,n,r){const i=Array(e);let o,s,a,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],u=1,i[o]+=a,s=1;s<=o;++s)u*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*u;return i[0]+=r,i}function cSt(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const lfe=2,cfe=1e-12;function PAe(e,t,n,r){const[i,o,s,a]=c$(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=lfe;){const m=[0,l-1];for(let g=0;g<u;++g){const v=i[g],b=m[0],w=m[1],E=v-i[b]>i[w]-v?b:w;let T=0,C=0,S=0,I=0,R=0;const P=1/Math.abs(i[E]-v||1);for(let L=b;L<=w;++L){const z=i[L],G=o[L],W=fSt(Math.abs(v-z)*P)*d[L],te=z*W;T+=W,C+=te,S+=G*W,I+=G*te,R+=z*te}const[M,B]=lR(C/T,S/T,I/T,R/T);c[g]=M+B*v,f[g]=Math.abs(o[g]-c[g]),dSt(i,g+1,m)}if(h===lfe)break;const p=lEe(f);if(Math.abs(p)<cfe)break;for(let g=0,v,b;g<u;++g)v=f[g]/(6*p),d[g]=v>=1?cfe:(b=1-v*v)*b}return hSt(i,c,s,a)}function fSt(e){return(e=1-e*e*e)*e*e}function dSt(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function hSt(e,t,n,r){const i=e.length,o=[];let s=0,a=0,u=[],l;for(;s<i;++s)l=e[s]+n,u[0]===l?u[1]+=(t[s]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[s]],o.push(u));return u[1]+=r,o}const pSt=.5*Math.PI/180;function f$(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=p=>[p,e(p)],o=t[0],s=t[1],a=s-o,u=a/r,l=[i(o)],c=[];if(n===r){for(let p=1;p<r;++p)l.push(i(o+p/n*a));return l.push(i(s)),l}else{c.push(i(s));for(let p=n;--p>0;)c.push(i(o+p/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,m=mSt(f[1],c);for(;d;){const p=i((f[0]+d[0])/2);p[0]-f[0]>=u&&gSt(f,p,d,h,m)>pSt?c.push(p):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function mSt(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function gSt(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function ySt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function sH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:ySt(e)}function OAe(e,t,n){return n||e+(t?"_"+t:"")}const X7=()=>{},vSt={init:X7,add:X7,rem:X7,idx:0},Vk={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},fR=Object.keys(Vk).filter(e=>e!=="__count__");function bSt(e,t){return(n,r)=>rr({name:e,aggregate_param:r,out:n||e},vSt,t)}[...fR,"__count__"].forEach(e=>{Vk[e]=bSt(e,Vk[e])});function FAe(e,t,n){return Vk[e](n,t)}function MAe(e,t){return e.idx-t.idx}function xSt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Vk[i]())})};return e.forEach(n),Object.values(t).sort(MAe)}function wSt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function _St(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function ESt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function TSt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function $Ae(e,t){const n=t||Vu,r=xSt(e),i=e.slice().sort(MAe);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=wSt,o.prototype.add=_St,o.prototype.rem=ESt,o.prototype.set=TSt,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function AQ(e){this._key=e?cd(e):En,this.reset()}const ru=AQ.prototype;ru.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ru.add=function(e){this._add.push(e)};ru.rem=function(e){this._rem.push(e)};ru.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,u,l;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,u=0;a<r;++a)s[n(l=e[a])]?s[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o};ru.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",Zt(n,o)||(n[o]=1,++i);return i};ru.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=CSe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ru.argmin=function(e){return this.extent(e)[0]||{}};ru.argmax=function(e){return this.extent(e)[1]||{}};ru.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ru.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ru.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=fQ(this.values(),e),this._get=e),this._q};ru.q1=function(e){return this.quartile(e)[0]};ru.q2=function(e){return this.quartile(e)[1]};ru.q3=function(e){return this.quartile(e)[2]};ru.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=EAe(this.values(),1e3,.05,e),this._get=e),this._ci};ru.ci0=function(e){return this.ci(e)[0]};ru.ci1=function(e){return this.ci(e)[1]};function O1(e){st.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}O1.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:fR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Vt(O1,st,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}o(e._prev),o(t);function s(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?s(h,u,l):t[h]||e.cell(h,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Gt(Mu(b)),E=w.length;let T=0,C;for(;T<E;++T)r[C=w[T]]||(r[C]=1,t.push(C))}this._dims=Gt(e.groupby),this._dnames=this._dims.map(b=>{const w=Ho(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:sH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=o.length,c={};let f,d,h,m,p,g,v;for(l!==s.length&&ht("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=o[v],d=s[v],h=a[v]||null,f==null&&d!=="count"&&ht("Null aggregate field specified."),p=Ho(f),g=OAe(d,p,u[v]),n.push(g),d==="count"){this._counts.push(g);continue}m=c[p],m||(i(f),m=c[p]=[],m.field=f,this._measures.push(m)),d!=="count"&&(this._countOnly=!1),m.push(FAe(d,h,g))}return this._measures=this._measures.map(b=>$Ae(b,b.field)),Object.create(null)},cellkey:sH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new AQ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?mAe(t.tuple,o):ai(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&s.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?s:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const CSt=1e-14;function DQ(e){st.call(this,null,e)}DQ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Vt(DQ,st,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],u=s[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Mu(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+o*(1+(f-i)/o)}:c=>c[a]=r(c)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=_Ae(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const u=function(l){let c=Nu(t(l));return c==null?null:c<i?-1/0:c>o?1/0:(c=Math.max(i,Math.min(c,o-r)),i+r*Math.floor(CSt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Tc(u,Mu(t),e.name||"bin_"+Ho(t))}});function LAe(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:u=>o.push(u),remove:u=>s[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!s[r(c)]),s={},a=0),l&&u&&i.sort(u),o.length&&(i=u?RSe(u,i,o.sort(u)):i.concat(o),o=[]),i)}}function kQ(e){st.call(this,[],e)}kQ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Vt(kQ,st,{transform(e,t){const n=t.fork(t.ALL),r=LAe(En,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(vw(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function BAe(e){$i.call(this,null,SSt,e)}Vt(BAe,$i);function SSt(e){return this.value&&!e.modified()?this.value:YX(e.fields,e.orders)}function IQ(e){st.call(this,null,e)}IQ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function ASt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Vt(IQ,st,{transform(e,t){const n=f=>d=>{for(var h=ASt(a(d),e.case,o)||[],m,p=0,g=h.length;p<g;++p)s.test(m=h[p])||f(m)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=ai({}),u[i]=a,u[o]=l,s.add.push(u)):l===0?(u&&s.rem.push(u),n[a]=null,r[a]=null):u[o]!==l&&(u[o]=l,s.mod.push(u));return s.modifies(t)}});function RQ(e){st.call(this,null,e)}RQ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Vt(RQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=DSt(a,i,o,e.filter||fd)):n.mod=a,n.source=this.value,n.modifies(r)}});function DSt(e,t,n,r){for(var i=[],o={},s=e.length,a=0,u,l;a<s;++a)for(o[t]=l=e[a],u=0;u<s;++u)o[n]=e[u],r(o)&&(i.push(ai(o)),o={},o[t]=l);return i}const ffe={kde:mQ,mixture:AAe,normal:pQ,lognormal:SAe,uniform:DAe},kSt="distributions",dfe="function",ISt="field";function jAe(e,t){const n=e[dfe];Zt(ffe,n)||ht("Unknown distribution function: "+n);const r=ffe[n]();for(const i in e)i===ISt?r.data((e.from||t()).map(e[i])):i===kSt?r[i](e[i].map(o=>jAe(o,t))):typeof r[i]===dfe&&r[i](e[i]);return r}function NQ(e){st.call(this,null,e)}const zAe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],RSt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:zAe},{name:"weights",type:"number",array:!0}]};NQ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:zAe.concat(RSt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Vt(NQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=jAe(e.distribution,NSt(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&ht("Invalid density method: "+s),!e.extent&&!r.data&&ht("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],u=e.extent||mm(r.data()),l=f$(s,u,i,o).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],ai(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function NSt(e){return()=>e.materialize(e.SOURCE).source}function UAe(e,t){return e?e.map((n,r)=>t[r]||Ho(n)):null}function PQ(e,t,n){const r=[],i=f=>f(u);let o,s,a,u,l,c;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)u=e[s],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const VAe="bin";function OQ(e){st.call(this,null,e)}OQ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:VAe}]};const PSt=(e,t)=>uR(mm(e,t))/30;Vt(OQ,st,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=PQ(t.source,e.groupby,Vu),i=e.smooth||!1,o=e.field,s=e.step||PSt(n,o),a=vw((m,p)=>o(m)-o(p)),u=e.as||VAe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const m=r[d].sort(a);h=-1;for(const p of TAe(m,s,i,o))p<c&&(c=p),p>f&&(f=p),m[++h][u]=p}return this.value={start:c,stop:f,step:s},t.reflow(!0).modifies(u)}});function HAe(e){$i.call(this,null,OSt,e),this.modified(!0)}Vt(HAe,$i);function OSt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Tc(n=>t(n,e),Mu(t),Ho(t))}function FQ(e){st.call(this,[void 0,void 0],e)}FQ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Vt(FQ,st,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Nu(r(a));u!=null&&(u<o&&(o=u),u>s&&(s=u))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Ho(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function MQ(e,t){$i.call(this,e),this.parent=t,this.count=0}Vt(MQ,$i,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function d$(e){st.call(this,{},e),this._keys=mC();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Vt(d$,st,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=Zt(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new MQ(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=En(u),c=o.get(l);c!==void 0&&(o.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);o.set(En(u),l),a(l).add(u)}),s||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=En(u),c=o.get(l),f=r(u);c===f?a(f).mod(u):(o.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(o.get(En(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const l=En(u),c=o.get(l),f=r(u);c!==f&&(o.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function qAe(e){$i.call(this,null,FSt,e)}Vt(qAe,$i);function FSt(e){return this.value&&!e.modified()?this.value:gt(e.name)?Gt(e.name).map(t=>cd(t)):cd(e.name,e.as)}function $Q(e){st.call(this,mC(),e)}$Q.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Vt($Q,st,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=En(f);r.has(d)?r.delete(d):s.push(f)}),t.visit(t.ADD,f=>{u(f,e)?o.push(f):r.set(En(f),1)});function c(f){const d=En(f),h=u(f,e),m=r.get(d);h&&m?(r.delete(d),o.push(f)):!h&&!m?(r.set(d,1),s.push(f)):l&&h&&!m&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function LQ(e){st.call(this,[],e)}LQ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Vt(LQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=UAe(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(m=>m(a)),l=u.reduce((m,p)=>Math.max(m,p.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=aQ(a),f=0;f<s;++f)d[i[f]]=(h=u[f][c])==null?null:h;o&&(d[o]=c),n.add.push(d)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function BQ(e){st.call(this,[],e)}BQ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Vt(BQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ho),o=e.as||["key","value"],s=o[0],a=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=aQ(l),f[s]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(o)}});function jQ(e){st.call(this,null,e)}jQ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Vt(jQ,st,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function WAe(e){st.call(this,[],e)}Vt(WAe,st,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,u;if(o>0){for(s=[];--o>=0;)s.push(u=ai(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const eP={value:"value",median:lEe,mean:Xct,min:sf,max:Ou},MSt=[];function zQ(e){st.call(this,[],e)}zQ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function $St(e){var t=e.method||eP.value,n;if(eP[t]==null)ht("Unrecognized imputation method: "+t);else return t===eP.value?(n=e.value!==void 0?e.value:0,()=>n):eP[t]}function LSt(e){const t=e.field;return n=>n?t(n):NaN}Vt(zQ,st,{transform(e,t){var n=t.fork(t.ALL),r=$St(e),i=LSt(e),o=Ho(e.field),s=Ho(e.key),a=(e.groupby||[]).map(Ho),u=BSt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,m,p,g,v,b,w,E,T;for(g=0,w=u.length;g<w;++g)for(d=u[g],m=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(p=u.domain[b],T={_impute:!0},v=0,E=m.length;v<E;++v)T[a[v]]=m[v];T[s]=p,T[o]=Number.isNaN(h)?h=r(d,i):h,l.push(ai(T))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function BSt(e,t,n,r){var i=v=>v(g),o=[],s=r?r.slice():[],a={},u={},l,c,f,d,h,m,p,g;for(s.forEach((v,b)=>a[v]=b+1),d=0,p=e.length;d<p;++d)g=e[d],m=n(g),h=a[m]||(a[m]=s.push(m)),c=(l=t?t.map(i):MSt)+"",(f=u[c])||(f=u[c]=[],o.push(f),f.values=l),f[h-1]=g;return o.domain=s,o}function UQ(e){O1.call(this,e)}UQ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:fR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Vt(UQ,O1,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{rr(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function VQ(e){st.call(this,null,e)}VQ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Vt(VQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PQ(r,e.groupby,e.field),o=(e.groupby||[]).map(Ho),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ht("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=mm(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const m=mQ(h,s)[a],p=e.counts?h.length:1,g=c||mm(h);f$(m,g,f,d).forEach(v=>{const b={};for(let w=0;w<o.length;++w)b[o[w]]=h.dims[w];b[u[0]]=v[0],b[u[1]]=v[1]*p,l.push(ai(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function GAe(e){$i.call(this,null,jSt,e)}Vt(GAe,$i);function jSt(e){return this.value&&!e.modified()?this.value:XX(e.fields,e.flat)}function YAe(e){st.call(this,[],e),this._pending=null}Vt(YAe,st,{transform(e,t){const n=t.dataflow;return this._pending?Q7(this,t,this._pending):zSt(e)?t.StopPropagation:e.values?Q7(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Gt(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>Q7(this,t,Gt(r.data)))}});function zSt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Q7(e,t,n){n.forEach(ai);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function HQ(e){st.call(this,{},e)}HQ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Vt(HQ,st,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let u=s?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&ht('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&ht('The "as" parameter has too few output field names.'),c=c||i.map(Ho),f=function(m){for(var p=0,g=0,v,b;p<a;++p)if(b=r.get(n[p](m)),b==null)for(v=0;v<d;++v,++g)m[c[g]]=o;else for(v=0;v<d;++v,++g)m[c[g]]=i[v](b)}):(c||ht("Missing output field names."),f=function(m){for(var p=0,g;p<a;++p)g=r.get(n[p](m)),m[c[p]]=g??o}),s?l=t.reflow(!0):(h=n.some(m=>t.modified(m.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function KAe(e){$i.call(this,null,USt,e)}Vt(KAe,$i);function USt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function XAe(e){$i.call(this,null,VSt,e)}Vt(XAe,$i);function VSt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function QAe(e){st.call(this,null,e)}Vt(QAe,st,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function qQ(e){O1.call(this,e)}qQ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:fR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Vt(qQ,O1,{_transform:O1.prototype.transform,transform(e,t){return this._transform(HSt(e,t),t)}});function HSt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=Mu(n).concat(Mu(r)),s=WSt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>qSt(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function qSt(e,t,n,r){return Tc(i=>t(i)===e?n(i):NaN,r,e+"")}function WSt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(Z8),t?i.slice(0,t):i}function JAe(e){d$.call(this,e)}Vt(JAe,d$,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(En(o),n,t,o);return(e.modified("field")||r&&t.modified(Mu(r)))&&ht("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(ai(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function WQ(e){st.call(this,null,e)}WQ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Vt(WQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=UAe(e.fields,e.as||[]),o=r?(a,u)=>GSt(a,u,r,i):i$;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const u=En(a);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,a=>{const u=o(a,ai({}));s[En(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[En(a)]))}),n}});function GSt(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function ZAe(e){st.call(this,null,e)}Vt(ZAe,st,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function GQ(e){st.call(this,null,e)}GQ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const YSt=1e-14;Vt(GQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=PQ(i,e.groupby,e.field),s=(e.groupby||[]).map(Ho),a=[],u=e.step||.01,l=e.probs||af(u/2,1-YSt,u),c=l.length;return o.forEach(f=>{const d=cQ(f,l);for(let h=0;h<c;++h){const m={};for(let p=0;p<s.length;++p)m[s[p]]=f.dims[p];m[r[0]]=l[h],m[r[1]]=d[h],a.push(ai(m))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function eDe(e){st.call(this,null,e)}Vt(eDe,st,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=En(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=aQ(i);r[En(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[En(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function YQ(e){st.call(this,[],e),this.count=0}YQ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Vt(YQ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((c,f)=>(c[En(f)]=1,c),{});let s=this.value,a=this.count,u=0;function l(c){let f,d;s.length<i?s.push(c):(d=~~((a+1)*hd()),d<s.length&&d>=u&&(f=s[d],o[En(f)]&&n.rem.push(f),s[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=En(c);o[f]&&(o[f]=-1,n.rem.push(c)),--a}),s=s.filter(c=>o[En(c)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(u=a=s.length,t.visit(t.SOURCE,c=>{o[En(c)]||l(c)}),u=-1),r&&s.length>i){const c=s.length-i;for(let f=0;f<c;++f)o[En(s[f])]=-1,n.rem.push(s[f]);s=s.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[En(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=s.filter(c=>!o[En(c)])),this.count=a,this.value=n.source=s,n}});function KQ(e){st.call(this,null,e)}KQ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Vt(KQ,st,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=af(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,ai(o)}),n.add=t.add.concat(this.value),n}});function tDe(e){st.call(this,null,e),this.modified(!0)}Vt(tDe,st,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function XQ(e){st.call(this,null,e)}const nDe=["unit0","unit1"];XQ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:eQ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:nDe}]};Vt(XQ,st,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?yC:gC)(o.unit).offset,a=e.as||nDe,u=a[0],l=a[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Mu(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,m=>{const p=n(m);let g,v;p==null?(m[u]=null,r&&(m[l]=null)):(m[u]=g=v=o(p),r&&(m[l]=v=s(g,c)),g<f&&(f=g),v>d&&(d=v))}),o.start=f,o.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:ZSe({extent:e.extent||mm(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=tQ(r),s=this.value||{},a=(n?HSe:VSe)(o,i);return a.unit=Mr(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function rDe(e){st.call(this,mC(),e)}Vt(rDe,st,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function iDe(e){st.call(this,null,e)}Vt(iDe,st,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(vw(e.sort)):t.source).map(e.field))}});function KSt(e,t,n,r){const i=Hk[e](t,n);return{init:i.init||Wy,update:function(o,s){s[r]=i.next(o)}}}const Hk={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Hk.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ht("ntile num must be greater than zero.");const n=Hk.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ht("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=XSt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function XSt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const QSt=Object.keys(Hk);function oDe(e){const t=Gt(e.ops),n=Gt(e.fields),r=Gt(e.params),i=Gt(e.aggregate_params),o=Gt(e.as),s=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(m){Gt(Mu(m)).forEach(p=>u[p]=1)}h(e.sort),t.forEach((m,p)=>{const g=n[p],v=r[p],b=i[p]||null,w=Ho(g),E=OAe(m,w,o[p]);if(h(g),s.push(E),Zt(Hk,m))a.push(KSt(m,g,v,E));else{if(g==null&&m!=="count"&&ht("Null aggregate field specified."),m==="count"){c.push(E);return}d=!1;let T=l[w];T||(T=l[w]=[],T.field=g,f.push(T)),T.push(FAe(m,b,E))}}),(c.length||f.length)&&(this.cell=JSt(f,c,d)),this.inputs=Object.keys(u)}const sDe=oDe.prototype;sDe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};sDe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function JSt(e,t,n){e=e.map(u=>$Ae(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new AQ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)o[l].add(o[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)o[l].rem(o[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=o.length;l<c;++l)o[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)o[u].init()},r}function QQ(e){st.call(this,{},e),this._mlen=0,this._mods=[]}QQ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:QSt.concat(fR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Vt(QQ,st,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=vw(e.sort),i=sH(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new oDe(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)ZSt(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=LAe(En),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function ZSt(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),u=a.length,l=o?oC(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Hu(-1)};t.init();for(let f=0;f<u;++f)eAt(c,s,f,u),o&&tAt(c,l),t.update(c,a[f])}function eAt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function tAt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const nAt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:O1,bin:DQ,collect:kQ,compare:BAe,countpattern:IQ,cross:RQ,density:NQ,dotbin:OQ,expression:HAe,extent:FQ,facet:d$,field:qAe,filter:$Q,flatten:LQ,fold:BQ,formula:jQ,generate:WAe,impute:zQ,joinaggregate:UQ,kde:VQ,key:GAe,load:YAe,lookup:HQ,multiextent:KAe,multivalues:XAe,params:QAe,pivot:qQ,prefacet:JAe,project:WQ,proxy:ZAe,quantile:GQ,relay:eDe,sample:YQ,sequence:KQ,sieve:tDe,subflow:MQ,timeunit:XQ,tupleindex:rDe,values:iDe,window:QQ},Symbol.toStringTag,{value:"Module"}));function p1(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const rAt=()=>typeof Image<"u"?Image:null;function JQ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const iAt="identity",Z2="linear",wg="log",dR="pow",hR="sqrt",h$="symlog",Ax="time",Dx="utc",Yp="sequential",bC="diverging",eT="quantile",p$="quantize",m$="threshold",ZQ="ordinal",aH="point",aDe="band",eJ="bin-ordinal",Ys="continuous",pR="discrete",mR="discretizing",Cd="interpolating",tJ="temporal";function oAt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function sAt(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(o<0&&(o=u),s=u);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function nJ(){const e=aX().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],m=JQ(f,a,u);let p=r[d-0];i=(h-p)/(m||1),s&&(i=Math.floor(i)),p+=(h-p-i*(f-a))*l,o=i*(1-a),s&&(p=Math.round(p),o=Math.round(o));const g=af(f).map(v=>p+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],s=!0,c()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(s=!!f,c()):s},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),m=h.length-1;let p=+f[0],g=+f[1],v,b,w;if(!(p!==p||g!==g)&&(g<p&&(w=p,p=g,g=w),!(g<h[0]||p>r[1-d])))return v=Math.max(0,k1(h,p)-1),b=p===g?v:k1(h,g)-1,p-h[v]>o+1e-10&&++v,d&&(w=v,v=m-b,b=m-w),v>b?void 0:t().slice(v,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return nJ().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(u).align(l)},c()}function uDe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return uDe(t())},e}function aAt(){return uDe(nJ().paddingInner(1))}var uAt=Array.prototype.map;function lAt(e){return uAt.call(e,Nu)}const cAt=Array.prototype.slice;function lDe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(k1(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=lAt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=cAt.call(r),n):t.slice()},n.tickFormat=function(r,i){return cTe(e[0],Mr(e),r??10,i)},n.copy=function(){return lDe().domain(n.domain()).range(n.range())},n}const KF=new Map,cDe=Symbol("vega_scale");function fDe(e){return e[cDe]=!0,e}function fAt(e){return e&&e[cDe]===!0}function dAt(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?oAt(o):o.invertExtent?sAt(o):void 0),o.type=e,fDe(o)};return r.metadata=Ih(Gt(n)),r}function ni(e,t,n){return arguments.length>1?(KF.set(e,dAt(e,t,n)),this):dDe(e)?KF.get(e):void 0}ni(iAt,fTe);ni(Z2,fm,Ys);ni(wg,hTe,[Ys,wg]);ni(dR,fX,Ys);ni(hR,myt,Ys);ni(h$,pTe,Ys);ni(Ax,I1t,[Ys,tJ]);ni(Dx,R1t,[Ys,tJ]);ni(Yp,gX,[Ys,Cd]);ni(`${Yp}-${Z2}`,gX,[Ys,Cd]);ni(`${Yp}-${wg}`,ATe,[Ys,Cd,wg]);ni(`${Yp}-${dR}`,yX,[Ys,Cd]);ni(`${Yp}-${hR}`,N1t,[Ys,Cd]);ni(`${Yp}-${h$}`,DTe,[Ys,Cd]);ni(`${bC}-${Z2}`,kTe,[Ys,Cd]);ni(`${bC}-${wg}`,ITe,[Ys,Cd,wg]);ni(`${bC}-${dR}`,vX,[Ys,Cd]);ni(`${bC}-${hR}`,P1t,[Ys,Cd]);ni(`${bC}-${h$}`,RTe,[Ys,Cd]);ni(eT,mTe,[mR,eT]);ni(p$,gTe,mR);ni(m$,yTe,mR);ni(eJ,lDe,[pR,mR]);ni(ZQ,aX,pR);ni(aDe,nJ,pR);ni(aH,aAt,pR);function dDe(e){return KF.has(e)}function xw(e,t){const n=KF.get(e);return n&&n.metadata[t]}function rJ(e){return xw(e,Ys)}function tT(e){return xw(e,pR)}function uH(e){return xw(e,mR)}function hDe(e){return xw(e,wg)}function hAt(e){return xw(e,tJ)}function pDe(e){return xw(e,Cd)}function mDe(e){return xw(e,eT)}const pAt=["clamp","base","constant","exponent"];function gDe(e,t){const n=t[0],r=Mr(t)-n;return function(i){return e(n+i*r)}}function g$(e,t,n){return VK(iJ(t||"rgb",n),e)}function yDe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function vDe(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Hu(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=ni(o)().domain([t,n]).range([0,1]),pAt.forEach(a=>e[a]?s[a](e[a]()):0),s)}function iJ(e,t){const n=Eht[mAt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function mAt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const gAt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},yAt={accent:F1t,category10:O1t,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:M1t,observable10:$1t,paired:L1t,pastel1:B1t,pastel2:j1t,set1:z1t,set2:U1t,set3:V1t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function bDe(e){if(gt(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function xDe(e,t){for(const n in e)oJ(n,t(e[n]))}const hfe={};xDe(yAt,bDe);xDe(gAt,e=>g$(bDe(e)));function oJ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(hfe[e]=t,this):hfe[e]}const PO="symbol",vAt="discrete",bAt="gradient",xAt=e=>gt(e)?e.map(t=>String(t)):String(e),wAt=(e,t)=>e[1]-t[1],_At=(e,t)=>t[1]-e[1];function sJ(e,t,n){let r;return ti(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(uR(e.domain())/n||1)+1))),qt(t)&&(r=t.step,t=t.interval),Yt(t)&&(t=e.type===Ax?gC(t):e.type==Dx?yC(t):ht("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function wDe(e,t,n){let r=e.range(),i=r[0],o=Mr(r),s=wAt;if(i>o&&(r=o,o=i,i=r,s=_At),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Mr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function aJ(e,t){return e.bins?wDe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function _De(e,t,n,r,i,o){const s=t.type;let a=xAt;if(s===Ax||i===Ax)a=e.timeFormat(r);else if(s===Dx||i===Dx)a=e.utcFormat(r);else if(hDe(s)){const u=e.formatFloat(r);if(o||t.bins)a=u;else{const l=EDe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function EDe(e,t,n){const r=aJ(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/o));return l*i<i-.5&&(l*=i),l<=s};return n?r.filter(a):a}const lH={[eT]:"quantiles",[p$]:"thresholds",[m$]:"domain"},TDe={[eT]:"quantiles",[p$]:"domain"};function CDe(e,t){return e.bins?CAt(e.bins):e.type===wg?EDe(e,t,!0):lH[e.type]?TAt(e[lH[e.type]]()):aJ(e,t)}function EAt(e,t,n){const r=t[TDe[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,3*10,n)}function TAt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function CAt(e){const t=e.slice(0,-1);return t.max=Mr(e),t}const SAt=e=>lH[e.type]||e.bins;function SDe(e,t,n,r,i,o,s){const a=TDe[t.type]&&o!==Ax&&o!==Dx?EAt(e,t,i):_De(e,t,n,i,o,s);return r===PO&&SAt(t)?AAt(a):r===vAt?DAt(a):kAt(a)}const AAt=e=>(t,n,r)=>{const i=pfe(r[n+1],pfe(r.max,1/0)),o=mfe(t,e),s=mfe(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},pfe=(e,t)=>e??t,DAt=e=>(t,n)=>n?e(t):null,kAt=e=>t=>e(t),mfe=(e,t)=>Number.isFinite(e)?t(e):null;function IAt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Mr(t),o=i-r;if(e.type===m$){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function RAt(e,t,n,r){const i=r||t.type;return Yt(n)&&hAt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Ax?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Dx?e.utcFormat("%A, %d %B %Y, %X UTC"):SDe(e,t,5,null,n,r,!0)}function ADe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=RAt(e,t,n.format,n.formatType);if(uH(t.type)){const o=CDe(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(tT(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(Mr(o))}`}}let DDe=0;function NAt(){DDe=0}const XF="p_";function uJ(e){return e&&e.gradient}function kDe(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?XF:"";return i||(i=e.id="gradient_"+DDe++,r==="radial"?(e.x1=xp(e.x1,.5),e.y1=xp(e.y1,.5),e.r1=xp(e.r1,0),e.x2=xp(e.x2,.5),e.y2=xp(e.y2,.5),e.r2=xp(e.r2,.5),o=XF):(e.x1=xp(e.x1,0),e.y1=xp(e.y1,0),e.x2=xp(e.x2,1),e.y2=xp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function xp(e,t){return e??t}function IDe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const gfe={basis:{curve:ivt},"basis-closed":{curve:ovt},"basis-open":{curve:svt},bundle:{curve:avt,tension:"beta",value:.85},cardinal:{curve:uvt,tension:"tension",value:0},"cardinal-open":{curve:cvt,tension:"tension",value:0},"cardinal-closed":{curve:lvt,tension:"tension",value:0},"catmull-rom":{curve:fvt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:dvt,tension:"alpha",value:.5},"catmull-rom-open":{curve:hvt,tension:"alpha",value:.5},linear:{curve:bX},"linear-closed":{curve:pvt},monotone:{horizontal:gvt,vertical:mvt},natural:{curve:yvt},step:{curve:vvt},"step-after":{curve:xvt},"step-before":{curve:bvt}};function lJ(e,t,n){var r=Zt(gfe,e)&&gfe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const PAt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},OAt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,FAt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,MAt=/^((\s+,?\s*)|(,\s*))/,$At=/^[01]/;function nT(e){const t=[];return(e.match(OAt)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=PAt[o],a=LAt(o,s,r.slice(1).trim()),u=a.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),u!==s){o==="m"&&(i=i==="M"?"L":"l");for(let l=s;l<u;l+=s)t.push([i,...a.slice(l,l+s)])}}),t}function LAt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?$At:FAt,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(MAt);u!==null&&(i+=u[0].length)}return r}const F1=Math.PI/180,BAt=1e-14,Ub=Math.PI/2,Op=Math.PI*2,lE=Math.sqrt(3)/2;var J7={},Z7={},RDe=[].join;function jAt(e,t,n,r,i,o,s,a,u){const l=RDe.call(arguments);if(J7[l])return J7[l];const c=s*F1,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,m=d*(u-t)*.5-f*(a-e)*.5;let p=h*h/(n*n)+m*m/(r*r);p>1&&(p=Math.sqrt(p),n*=p,r*=p);const g=d/n,v=f/n,b=-f/r,w=d/r,E=g*a+v*u,T=b*a+w*u,C=g*e+v*t,S=b*e+w*t;let R=1/((C-E)*(C-E)+(S-T)*(S-T))-.25;R<0&&(R=0);let P=Math.sqrt(R);o==i&&(P=-P);const M=.5*(E+C)-P*(S-T),B=.5*(T+S)+P*(C-E),L=Math.atan2(T-B,E-M);let G=Math.atan2(S-B,C-M)-L;G<0&&o===1?G+=Op:G>0&&o===0&&(G-=Op);const W=Math.ceil(Math.abs(G/(Ub+.001))),te=[];for(let Z=0;Z<W;++Z){const re=L+Z*G/W,q=L+(Z+1)*G/W;te[Z]=[M,B,re,q,n,r,f,d]}return J7[l]=te}function zAt(e){const t=RDe.call(e);if(Z7[t])return Z7[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7];const c=l*s,f=-u*a,d=u*s,h=l*a,m=Math.cos(i),p=Math.sin(i),g=Math.cos(o),v=Math.sin(o),b=.5*(o-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),T=n+m-E*p,C=r+p+E*m,S=n+g,I=r+v,R=S+E*v,P=I-E*g;return Z7[t]=[c*T+f*C,d*T+h*C,c*R+f*P,d*R+h*P,c*S+f*I,d*S+h*I]}const Yf=["l",0,0,0,0,0,0,0];function UAt(e,t,n){const r=Yf[0]=e[0];if(r==="a"||r==="A")Yf[1]=t*e[1],Yf[2]=n*e[2],Yf[3]=e[3],Yf[4]=e[4],Yf[5]=e[5],Yf[6]=t*e[6],Yf[7]=n*e[7];else if(r==="h"||r==="H")Yf[1]=t*e[1];else if(r==="v"||r==="V")Yf[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Yf[i]=(i%2==1?t:n)*e[i];return Yf}function qk(e,t,n,r,i,o){var s,a=null,u=0,l=0,c=0,f=0,d,h,m,p,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(s=t[b],(i!==1||o!==1)&&(s=UAt(s,i,o)),s[0]){case"l":u+=s[1],l+=s[2],e.lineTo(u+n,l+r);break;case"L":u=s[1],l=s[2],e.lineTo(u+n,l+r);break;case"h":u+=s[1],e.lineTo(u+n,l+r);break;case"H":u=s[1],e.lineTo(u+n,l+r);break;case"v":l+=s[1],e.lineTo(u+n,l+r);break;case"V":l=s[1],e.lineTo(u+n,l+r);break;case"m":u+=s[1],l+=s[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"M":u=s[1],l=s[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"c":d=u+s[5],h=l+s[6],c=u+s[3],f=l+s[4],e.bezierCurveTo(u+s[1]+n,l+s[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=s[5],l=s[6],c=s[3],f=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+s[3],h=l+s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+s[1]+n,l+s[2]+r,d+n,h+r),c=u+s[1],f=l+s[2],u=d,l=h;break;case"S":d=s[3],h=s[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"q":d=u+s[3],h=l+s[4],c=u+s[1],f=l+s[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=s[3],h=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,d+n,h+r),u=d,l=h,c=s[1],f=s[2];break;case"t":d=u+s[1],h=l+s[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-m,f=2*l-p):a[0]==="q"&&(c=2*u-c,f=2*l-f),m=c,p=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+s[1],f=l+s[2];break;case"T":d=s[1],h=s[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":yfe(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+l+r]),u+=s[6],l+=s[7];break;case"A":yfe(e,u+n,l+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),u=s[6],l=s[7];break;case"z":case"Z":u=g,l=v,e.closePath();break}a=s}}function yfe(e,t,n,r){const i=jAt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=zAt(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const vfe=.5773502691896257,bfe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Op)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=lE*n,i=r-n*vfe,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=lE*n,i=r-n*vfe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=lE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function NDe(e){return Zt(bfe,e)?bfe[e]:VAt(e)}var ej={};function VAt(e){if(!Zt(ej,e)){const t=nT(e);ej[e]={draw:function(n,r){qk(n,t,0,0,Math.sqrt(r)/2)}}}return ej[e]}const Sy=.448084975506;function HAt(e){return e.x}function qAt(e){return e.y}function WAt(e){return e.width}function GAt(e){return e.height}function v0(e){return typeof e=="function"?e:()=>+e}function tP(e,t,n){return Math.max(t,Math.min(e,n))}function PDe(){var e=HAt,t=qAt,n=WAt,r=GAt,i=v0(0),o=i,s=i,a=i,u=null;function l(c,f,d){var h,m=f??+e.call(this,c),p=d??+t.call(this,c),g=+n.call(this,c),v=+r.call(this,c),b=Math.min(g,v)/2,w=tP(+i.call(this,c),0,b),E=tP(+o.call(this,c),0,b),T=tP(+s.call(this,c),0,b),C=tP(+a.call(this,c),0,b);if(u||(u=h=T8()),w<=0&&E<=0&&T<=0&&C<=0)u.rect(m,p,g,v);else{var S=m+g,I=p+v;u.moveTo(m+w,p),u.lineTo(S-E,p),u.bezierCurveTo(S-Sy*E,p,S,p+Sy*E,S,p+E),u.lineTo(S,I-C),u.bezierCurveTo(S,I-Sy*C,S-Sy*C,I,S-C,I),u.lineTo(m+T,I),u.bezierCurveTo(m+Sy*T,I,m,I-Sy*T,m,I-T),u.lineTo(m,p+w),u.bezierCurveTo(m,p+Sy*w,m+Sy*w,p,m+w,p),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=v0(c),l):e},l.y=function(c){return arguments.length?(t=v0(c),l):t},l.width=function(c){return arguments.length?(n=v0(c),l):n},l.height=function(c){return arguments.length?(r=v0(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=v0(c),o=f!=null?v0(f):i,a=d!=null?v0(d):i,s=h!=null?v0(h):o,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function ODe(){var e,t,n,r,i=null,o,s,a,u;function l(f,d,h){const m=h/2;if(o){var p=a-d,g=f-s;if(p||g){var v=Math.hypot(p,g),b=(p/=v)*u,w=(g/=v)*u,E=Math.atan2(g,p);i.moveTo(s-b,a-w),i.lineTo(f-p*m,d-g*m),i.arc(f,d,m,E-Math.PI,E),i.lineTo(s+b,a+w),i.arc(s,a,u,E,E+Math.PI)}else i.arc(f,d,m,0,Op);i.closePath()}else o=1;s=f,a=d,u=m}function c(f){var d,h=f.length,m,p=!1,g;for(i==null&&(i=g=T8()),d=0;d<=h;++d)!(d<h&&r(m=f[d],d,f))===p&&(p=!p)&&(o=0),p&&l(+e(m,d,f),+t(m,d,f),+n(m,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function gR(e,t){return e??t}const yR=e=>e.x||0,vR=e=>e.y||0,YAt=e=>e.width||0,KAt=e=>e.height||0,XAt=e=>(e.x||0)+(e.width||0),QAt=e=>(e.y||0)+(e.height||0),JAt=e=>e.startAngle||0,ZAt=e=>e.endAngle||0,eDt=e=>e.padAngle||0,tDt=e=>e.innerRadius||0,nDt=e=>e.outerRadius||0,rDt=e=>e.cornerRadius||0,iDt=e=>gR(e.cornerRadiusTopLeft,e.cornerRadius)||0,oDt=e=>gR(e.cornerRadiusTopRight,e.cornerRadius)||0,sDt=e=>gR(e.cornerRadiusBottomRight,e.cornerRadius)||0,aDt=e=>gR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,uDt=e=>gR(e.size,64),lDt=e=>e.size||1,y$=e=>e.defined!==!1,cDt=e=>NDe(e.shape||"circle"),fDt=tvt().startAngle(JAt).endAngle(ZAt).padAngle(eDt).innerRadius(tDt).outerRadius(nDt).cornerRadius(rDt),dDt=LTe().x(yR).y1(vR).y0(QAt).defined(y$),hDt=LTe().y(vR).x1(yR).x0(XAt).defined(y$),pDt=xX().x(yR).y(vR).defined(y$),mDt=PDe().x(yR).y(vR).width(YAt).height(KAt).cornerRadius(iDt,oDt,sDt,aDt),gDt=rvt().type(cDt).size(uDt),yDt=ODe().x(yR).y(vR).defined(y$).size(lDt);function cJ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function vDt(e,t){return fDt.context(e)(t)}function bDt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?hDt:dDt).curve(lJ(r,n.orient,n.tension)).context(e)(t)}function xDt(e,t){const n=t[0],r=n.interpolate||"linear";return pDt.curve(lJ(r,n.orient,n.tension)).context(e)(t)}function xC(e,t,n,r){return mDt.context(e)(t,n,r)}function wDt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function _Dt(e,t){return gDt.context(e)(t)}function EDt(e,t){return yDt.context(e)(t)}var FDe=1;function MDe(){FDe=1}function fJ(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+FDe++),s=i.clipping[o]||(i.clipping[o]={id:o});return ir(r)?s.path=r(null):cJ(n)?s.path=xC(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Ss(e){this.clear(),e&&this.union(e)}Ss.prototype={clone(){return new Ss(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*s+l,u*r+a*s+c,a*o-u*i+l,u*o+a*i+c,a*o-u*s+l,u*o+a*s+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function v$(e){this.mark=e,this.bounds=this.bounds||new Ss}function b$(e){v$.call(this,e),this.items=this.items||[]}Vt(b$,v$);class $De{constructor(t){this._pending=0,this._loader=t||t$()}pending(){return this._pending}sanitizeURL(t){const n=this;return xfe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(fA(n),r)).catch(()=>(fA(n),null))}loadImage(t){const n=this,r=rAt();return xfe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=Zt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>fA(n),s.onerror=()=>fA(n),s.src=o,s}).catch(i=>(fA(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function xfe(e){e._pending+=1}function fA(e){e._pending-=1}function Og(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?TDt(t,r):0))}return e}function TDt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const CDt=Op-1e-8;let x$,OO,FO,ex,cH,MO,fH,dH;const Qy=(e,t)=>x$.add(e,t),$O=(e,t)=>Qy(OO=e,FO=t),wfe=e=>Qy(e,x$.y1),_fe=e=>Qy(x$.x1,e),Vb=(e,t)=>cH*e+fH*t,Hb=(e,t)=>MO*e+dH*t,tj=(e,t)=>Qy(Vb(e,t),Hb(e,t)),nj=(e,t)=>$O(Vb(e,t),Hb(e,t));function bR(e,t){return x$=e,t?(ex=t*F1,cH=dH=Math.cos(ex),MO=Math.sin(ex),fH=-MO):(cH=dH=1,ex=MO=fH=0),SDt}const SDt={beginPath(){},closePath(){},moveTo:nj,lineTo:nj,rect(e,t,n,r){ex?(tj(e+n,t),tj(e+n,t+r),tj(e,t+r),nj(e,t)):(Qy(e+n,t+r),$O(e,t))},quadraticCurveTo(e,t,n,r){const i=Vb(e,t),o=Hb(e,t),s=Vb(n,r),a=Hb(n,r);Efe(OO,i,s,wfe),Efe(FO,o,a,_fe),$O(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=Vb(e,t),a=Hb(e,t),u=Vb(n,r),l=Hb(n,r),c=Vb(i,o),f=Hb(i,o);Tfe(OO,s,u,c,wfe),Tfe(FO,a,l,f,_fe),$O(c,f)},arc(e,t,n,r,i,o){if(r+=ex,i+=ex,OO=n*Math.cos(i)+e,FO=n*Math.sin(i)+t,Math.abs(i-r)>CDt)Qy(e-n,t-n),Qy(e+n,t+n);else{const s=l=>Qy(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(s(r),s(i),i!==r)if(r=r%Op,r<0&&(r+=Op),i=i%Op,i<0&&(i+=Op),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Op,a=r-r%Ub,u=0;u<4&&a>i;++u,a-=Ub)s(a);else for(a=r-r%Ub+Ub,u=0;u<4&&a<i;++u,a=a+Ub)s(a)}}};function Efe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Tfe(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(o)>BAt?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),u=(-s+c)/o,l=(-s-c)/o)):u=.5*a/s,0<u&&u<1&&i(Cfe(u,e,t,n,r)),0<l&&l<1&&i(Cfe(l,e,t,n,r))}function Cfe(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var m1=(m1=p1(1,1))?m1.getContext("2d"):null;const hH=new Ss;function dJ(e){return function(t,n){if(!m1)return!0;e(m1,t),hH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=hH;for(let a=i;a<=s;++a)for(let u=r;u<=o;++u)if(m1.isPointInPath(u,a))return!0;return!1}}function hJ(e,t){return t.contains(e.x||0,e.y||0)}function LDe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(hH.set(n,r,n+i,r+o))}function BDe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return VE(t,n,r,i,o)}function VE(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,m,p,g;for(g=0;g<4;++g){if(g===0&&(h=-l,m=-(o-t)),g===1&&(h=l,m=a-t),g===2&&(h=-c,m=-(s-n)),g===3&&(h=c,m=u-n),Math.abs(h)<1e-10&&m<0)return!1;if(p=m/h,h<0){if(p>d)return!1;p>f&&(f=p)}else if(h>0){if(p<f)return!1;p<d&&(d=p)}}return!0}function rT(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Qd(e,t){return e??t}function Sfe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function ADt(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Qd(t.x1,.5)*r,n.y1+Qd(t.y1,.5)*i,Math.max(r,i)*Qd(t.r1,0),n.x1+Qd(t.x2,.5)*r,n.y1+Qd(t.y2,.5)*i,Math.max(r,i)*Qd(t.r2,.5));else{const s=Qd(t.x1,0),a=Qd(t.y1,0),u=Qd(t.x2,1),l=Qd(t.y2,0);if(s===u||a===l||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=p1(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Sfe(f.createLinearGradient(s,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Sfe(o,t.stops)}function jDe(e,t,n){return uJ(n)?ADt(e,n,t.bounds):n}function QF(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=jDe(e,t,t.fill),!0):!1}var DDt=[];function iT(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=jDe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||DDt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function kDt(e,t){return e.zindex-t.zindex||e.index-t.index}function pJ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(kDt)}function Nh(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=pJ(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function JF(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=pJ(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function mJ(e){return function(t,n,r){Nh(n,i=>{(!r||r.intersects(i.bounds))&&zDe(e,t,i,i)})}}function IDt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&zDe(e,t,n.items[0],n.items)}}function zDe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(rT(t,n),n.fill&&QF(t,n,i)&&t.fill(),n.stroke&&iT(t,n,i)&&t.stroke()))}function w$(e){return e=e||fd,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,JF(n,a=>{const u=a.bounds;if(!(u&&!u.contains(o,s)||!u)&&e(t,a,r,i,o,s))return a})}}function xR(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,u=s.stroke&&n.isPointInStroke,l,c;return u&&(l=s.strokeWidth,c=s.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||u&&n.isPointInStroke(i,o)}}function gJ(e){return w$(xR(e))}function ux(e,t){return"translate("+e+","+t+")"}function yJ(e){return"rotate("+e+")"}function RDt(e,t){return"scale("+e+","+t+")"}function UDe(e){return ux(e.x||0,e.y||0)}function NDt(e){return ux(e.x||0,e.y||0)+(e.angle?" "+yJ(e.angle):"")}function PDt(e){return ux(e.x||0,e.y||0)+(e.angle?" "+yJ(e.angle):"")+(e.scaleX||e.scaleY?" "+RDt(e.scaleX||1,e.scaleY||1):"")}function vJ(e,t,n){function r(s,a){s("transform",NDt(a)),s("d",t(null,a))}function i(s,a){return t(bR(s,a.angle),a),Og(s,a).translate(a.x||0,a.y||0)}function o(s,a){var u=a.x||0,l=a.y||0,c=a.angle||0;s.translate(u,l),c&&s.rotate(c*=F1),s.beginPath(),t(s,a),c&&s.rotate(-c),s.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:mJ(o),pick:gJ(o),isect:n||dJ(o)}}var ODt=vJ("arc",vDt);function FDt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function MDt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function $Dt(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function bJ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(bR(u),c),Og(u,c[0]))}function o(u,l){u.beginPath(),t(u,l)}const s=xR(o);function a(u,l,c,f,d,h){var m=l.items,p=l.bounds;return!m||!m.length||p&&!p.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,s(u,m,c,f)?m[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:IDt(o),pick:a,isect:hJ,tip:n}}var LDt=bJ("area",bDt,FDt);function BDt(e,t){var n=t.clip;e.save(),ir(n)?(e.beginPath(),n(e),e.clip()):VDe(e,t.group)}function VDe(e,t){e.beginPath(),cJ(t)?xC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function HDe(e){const t=Qd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function jDt(e,t){e("transform",UDe(t))}function qDe(e,t){const n=HDe(t);e("d",xC(null,t,n,n))}function zDt(e,t){e("class","background"),e("aria-hidden",!0),qDe(e,t)}function UDt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?qDe(e,t):e("d","")}function VDt(e,t,n){const r=t.clip?fJ(n,t,t):null;e("clip-path",r)}function HDt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Og(e,t),e.translate(t.x||0,t.y||0)}function Wk(e,t,n,r){const i=HDe(t);e.beginPath(),xC(e,t,(n||0)+i,(r||0)+i)}const qDt=xR(Wk),WDt=xR(Wk,!1),GDt=xR(Wk,!0);function YDt(e,t,n,r){Nh(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(Wk(e,i,o,s),rT(e,i),i.fill&&QF(e,i,u)&&e.fill(),i.stroke&&!a&&iT(e,i,u)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&VDe(e,i),n&&n.translate(-o,-s),Nh(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&u&&(Wk(e,i,o,s),rT(e,i),iT(e,i,u)&&e.stroke())})}function KDt(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return JF(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),m=f+(u.height||0),p=u.clip;if(p&&(i<c||i>h||o<f||o>m))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,p&&cJ(u)&&!GDt(e,u,s,a))return e.restore(),null;const g=u.strokeForeground,v=t.interactive!==!1;return v&&g&&u.stroke&&WDt(e,u,s,a)?(e.restore(),u):(l=JF(u,b=>XDt(b,c,f)?this.pick(b,n,r,c,f):null),!l&&v&&(u.fill||!g&&u.stroke)&&qDt(e,u,s,a)&&(l=u),e.restore(),l||null)})}function XDt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var QDt={type:"group",tag:"g",nested:!1,attr:jDt,bound:HDt,draw:YDt,pick:KDt,isect:LDe,content:VDt,background:zDt,foreground:UDt},Gk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function xJ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function wJ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function _J(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function _$(e,t){return e==="center"?t/2:e==="right"?t:0}function E$(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function JDt(e,t,n){const r=xJ(t,n),i=wJ(t,r),o=_J(t,r),s=(t.x||0)-_$(t.align,i),a=(t.y||0)-E$(t.baseline,o),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,Gk["xmlns:xlink"],"xlink:href"),e("transform",ux(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function ZDt(e,t){const n=t.image,r=wJ(t,n),i=_J(t,n),o=(t.x||0)-_$(t.align,r),s=(t.y||0)-E$(t.baseline,i);return e.set(o,s,o+r,s+i)}function ekt(e,t,n){Nh(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=xJ(r,this);let o=wJ(r,i),s=_J(r,i);if(o===0||s===0)return;let a=(r.x||0)-_$(r.align,o),u=(r.y||0)-E$(r.baseline,s),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=o/c,u+=(s-d)/2,s=d):(d=s*c,a+=(o-d)/2,o=d))),(i.complete||i.toDataURL)&&(rT(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,o,s))})}var tkt={type:"image",tag:"image",nested:!1,attr:JDt,bound:ZDt,draw:ekt,pick:w$(),isect:fd,get:xJ,xOffset:_$,yOffset:E$},nkt=bJ("line",xDt,MDt);function rkt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",PDt(t)),e("d",t.path)}function LO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*F1,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=nT(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),qk(e,u,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):qk(e,u,r,i,o,s)}function ikt(e,t){return LO(bR(e,t.angle),t)?e.set(0,0,0,0):Og(e,t,!0)}var okt={type:"path",tag:"path",nested:!1,attr:rkt,bound:ikt,draw:mJ(LO),pick:gJ(LO),isect:dJ(LO)};function skt(e,t){e("d",xC(null,t))}function akt(e,t){var n,r;return Og(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Afe(e,t){e.beginPath(),xC(e,t)}var ukt={type:"rect",tag:"path",nested:!1,attr:skt,bound:akt,draw:mJ(Afe),pick:gJ(Afe),isect:LDe};function lkt(e,t){e("transform",UDe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function ckt(e,t){var n,r;return Og(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function WDe(e,t,n){var r,i,o,s;return t.stroke&&iT(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function fkt(e,t,n){Nh(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&WDe(e,r,i)&&(rT(e,r),e.stroke())}})}function dkt(e,t,n,r){return e.isPointInStroke?WDe(e,t,1)&&e.isPointInStroke(n,r):!1}var hkt={type:"rule",tag:"line",nested:!1,attr:lkt,bound:ckt,draw:fkt,pick:w$(dkt),isect:BDe},pkt=vJ("shape",wDt),mkt=vJ("symbol",_Dt,hJ);const Dfe=ISe();var hf={height:Rm,measureWidth:EJ,estimateWidth:ZF,width:ZF,canvas:GDe};GDe(!0);function GDe(e){hf.width=e&&m1?EJ:ZF}function ZF(e,t){return YDe($1(e,t),Rm(e))}function YDe(e,t){return~~(.8*e.length*t)}function EJ(e,t){return Rm(e)<=0||!(t=$1(e,t))?0:KDe(t,T$(e))}function KDe(e,t){const n=`(${t}) ${e}`;let r=Dfe.get(n);return r===void 0&&(m1.font=t,r=m1.measureText(e).width,Dfe.set(n,r)),r}function Rm(e){return e.fontSize!=null?+e.fontSize||0:11}function M1(e){return e.lineHeight!=null?e.lineHeight:Rm(e)+2}function gkt(e){return gt(e)?e.length>1?e:e[0]:e}function wR(e){return gkt(e.lineBreak&&e.text&&!gt(e.text)?e.text.split(e.lineBreak):e.text)}function TJ(e){const t=wR(e);return(gt(t)?t.length-1:0)*M1(e)}function $1(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?vkt(e,n):n}function ykt(e){if(hf.width===EJ){const t=T$(e);return n=>KDe(n,t)}else if(hf.width===ZF){const t=Rm(e);return n=>YDe(n,t)}else return t=>hf.width(e,t)}function vkt(e,t){var n=+e.limit,r=ykt(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,u;if(n-=r(i),o){for(;s<a;)u=s+a>>>1,r(t.slice(u))>n?s=u+1:a=u;return i+t.slice(s)}else{for(;s<a;)u=1+(s+a>>>1),r(t.slice(0,u))<n?s=u:a=u-1;return t.slice(0,s)+i}}function _R(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function T$(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Rm(e)+"px "+_R(e,t)}function CJ(e){var t=e.baseline,n=Rm(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*M1(e):t==="line-bottom"?.29*n-.5*M1(e):0)}const bkt={left:"start",center:"middle",right:"end"},HD=new Ss;function C$(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ub,t+=r*Math.cos(i),n+=r*Math.sin(i)),HD.x1=t,HD.y1=n,HD}function xkt(e,t){var n=t.dx||0,r=(t.dy||0)+CJ(t),i=C$(t),o=i.x1,s=i.y1,a=t.angle||0,u;e("text-anchor",bkt[t.align]||"start"),a?(u=ux(o,s)+" "+yJ(a),(n||r)&&(u+=" "+ux(n,r))):u=ux(o+n,s+r),e("transform",u)}function SJ(e,t,n){var r=hf.height(t),i=t.align,o=C$(t),s=o.x1,a=o.y1,u=t.dx||0,l=(t.dy||0)+CJ(t)-Math.round(.8*r),c=wR(t),f;if(gt(c)?(r+=M1(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,hf.width(t,h)),0)):f=hf.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=s,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*F1,s,a);else if(n===2)return e.rotatedPoints(t.angle*F1,s,a);return e}function wkt(e,t,n){Nh(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=T$(r),e.textAlign=r.align||"left",o=C$(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*F1),s=a=0),s+=r.dx||0,a+=(r.dy||0)+CJ(r),c=wR(r),rT(e,r),gt(c))for(l=M1(r),u=0;u<c.length;++u)f=$1(r,c[u]),r.fill&&QF(e,r,i)&&e.fillText(f,s,a),r.stroke&&iT(e,r,i)&&e.strokeText(f,s,a),a+=l;else f=$1(r,c),r.fill&&QF(e,r,i)&&e.fillText(f,s,a),r.stroke&&iT(e,r,i)&&e.strokeText(f,s,a);r.angle&&e.restore()}})}function _kt(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=C$(t),a=s.x1,u=s.y1,l=SJ(HD,t,1),c=-t.angle*F1,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(a-f*a+d*u),m=d*i+f*o+(u-d*a-f*u);return l.contains(h,m)}function Ekt(e,t){const n=SJ(HD,e,2);return VE(t,n[0],n[1],n[2],n[3])||VE(t,n[0],n[1],n[4],n[5])||VE(t,n[4],n[5],n[6],n[7])||VE(t,n[2],n[3],n[6],n[7])}var Tkt={type:"text",tag:"text",nested:!1,attr:xkt,bound:SJ,draw:wkt,pick:w$(_kt),isect:Ekt},Ckt=bJ("trail",EDt,$Dt),Ef={arc:ODt,area:LDt,group:QDt,image:tkt,line:nkt,path:okt,rect:ukt,rule:hkt,shape:pkt,symbol:mkt,text:Tkt,trail:Ckt};function pH(e,t,n){var r=Ef[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ss),e,n)}var kfe={mark:null};function XDe(e,t,n){var r=Ef[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,u,l,c;if(r.nested)return s?l=o[0]:(kfe.mark=e,l=kfe),c=pH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ss,s)for(a=0,u=o.length;a<u;++a)t.union(pH(o[a],i,n));return e.bounds=t}const Skt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function QDe(e,t){return JSON.stringify(e,Skt,t)}function JDe(e){const t=typeof e=="string"?JSON.parse(e):e;return ZDe(t)}function ZDe(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&ZDe(n[i]);return t&&XDe(e),e}class eke{constructor(t){arguments.length?this.root=JDe(t):(this.root=Ife({marktype:"group",name:"root",role:"frame"}),this.root.items=[new b$(this.root)])}toJSON(t){return QDe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Ife(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Ife(e,t){const n={bounds:new Ss,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Jy(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function AJ(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ls(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Jy(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Zf(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function tke(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function S$(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Akt(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Ef[i.marktype]).tip){for(s=S$(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let DJ=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||t$(),this._tooltip=n||Dkt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Jy(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Akt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let u=o.x1+i[0]+r.left,l=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:s,height:a,left:u,top:l,right:u+s,bottom:l+a}}};function Dkt(e,t,n,r){e.element().setAttribute("title",r||"")}class ER{constructor(t){this._el=null,this._bgcolor=null,this._loader=new $De(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const kkt="keydown",Ikt="keypress",Rkt="keyup",nke="dragenter",BO="dragleave",rke="dragover",mH="pointerdown",Nkt="pointerup",eM="pointermove",jO="pointerout",ike="pointerover",gH="mousedown",Pkt="mouseup",oke="mousemove",tM="mouseout",ske="mouseover",nM="click",Okt="dblclick",Fkt="wheel",ake="mousewheel",rM="touchstart",iM="touchmove",oM="touchend",Mkt=[kkt,Ikt,Rkt,nke,BO,rke,mH,Nkt,eM,jO,ike,gH,Pkt,oke,tM,ske,nM,Okt,Fkt,ake,rM,iM,oM],yH=eM,qD=tM,vH=nM;class TR extends DJ{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Mkt,this.pointermove=Nfe([eM,oke],[ike,ske],[jO,tM]),this.dragover=Nfe([rke],[nke],[BO]),this.pointerout=Pfe([jO,tM]),this.dragleave=Pfe([BO])}initialize(t,n,r){return this._canvas=t&&AJ(t,"canvas"),[nM,gH,mH,eM,jO,BO].forEach(i=>Rfe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(ake,t)}pointerdown(t){this._down=this._active,this.fire(mH,t)}mousedown(t){this._down=this._active,this.fire(gH,t)}click(t){this._down===this._active&&(this.fire(nM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(rM,t,!0)}touchmove(t){this.fire(iM,t,!0)}touchend(t){this.fire(oM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===vH&&i&&i.href?this.handleHref(n,i,i.href):(t===yH||t===qD)&&this.handleTooltip(n,i,t!==qD),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Rfe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=S$(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Ef[t.marktype].pick.call(this,s,t,n,r,i,o)}}const $kt=e=>e===rM||e===iM||e===oM?[rM,iM,oM]:[e];function Rfe(e,t){$kt(t).forEach(n=>Lkt(e,n))}function Lkt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function lD(e,t,n){t.forEach(r=>e.fire(r,n))}function Nfe(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?lD(this,e,r):((!i||!i.exit)&&lD(this,n,r),this._active=o,lD(this,t,r),lD(this,e,r))}}function Pfe(e){return function(t){lD(this,e,t),this._active=null}}function Bkt(){return typeof window<"u"&&window.devicePixelRatio||1}function jkt(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=s?Bkt():i;e.width=t*u,e.height=n*u;for(const l in o)a[l]=o[l];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class sM extends ER{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ss,this._tempb=new Ss}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:p1(1,1,this._options.type),t&&this._canvas&&(Zf(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)jkt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||ht("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,u=zkt(i,o,s);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):Ukt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Ef[n.marktype];n.clip&&BDt(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const zkt=(e,t,n)=>new Ss().set(0,0,t,n).translate(-e[0],-e[1]);function Ukt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class uke extends DJ{constructor(t,n){super(t,n);const r=this;r._hrefHandler=rj(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=rj(r,(i,o)=>{r.handleTooltip(i,o,i.type!==qD)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(vH,this._hrefHandler),i.removeEventListener(yH,this._tooltipHandler),i.removeEventListener(qD,this._tooltipHandler)),this._svg=i=t&&AJ(t,"svg"),i&&(i.addEventListener(vH,this._hrefHandler),i.addEventListener(yH,this._tooltipHandler),i.addEventListener(qD,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:rj(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const rj=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},lke="aria-hidden",kJ="aria-label",IJ="role",RJ="aria-roledescription",cke="graphics-object",NJ="graphics-symbol",fke=(e,t,n)=>({[IJ]:e,[RJ]:t,[kJ]:n||void 0}),Vkt=Ih(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ofe={axis:{desc:"axis",caption:Wkt},legend:{desc:"legend",caption:Gkt},"title-text":{desc:"title",caption:e=>`Title text '${Mfe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Mfe(e)}'`}},Ffe={ariaRole:IJ,ariaRoleDescription:RJ,description:kJ};function dke(e,t){const n=t.aria===!1;if(e(lke,n||void 0),n||t.description==null)for(const r in Ffe)e(Ffe[r],void 0);else{const r=t.mark.marktype;e(kJ,t.description),e(IJ,t.ariaRole||(r==="group"?cke:NJ)),e(RJ,t.ariaRoleDescription||`${r} mark`)}}function hke(e){return e.aria===!1?{[lke]:!0}:Vkt[e.role]?null:Ofe[e.role]?qkt(e,Ofe[e.role]):Hkt(e)}function Hkt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return fke(n?cke:NJ,`${t} mark container`,e.description)}function qkt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return fke(t.role||NJ,t.desc,n.description||r(n))}catch{return null}}function Mfe(e){return Gt(e.text).join(" ")}function Wkt(e){const t=e.datum,n=e.orient,r=t.title?pke(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${tT(a)?"discrete":a} scale with ${ADe(s,o,e)}`}function Gkt(e){const t=e.datum,n=t.title?pke(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,u=s.dataflow.locale();return Kkt(r)+(n?` titled '${n}'`:"")+` for ${Ykt(o)} with ${ADe(u,a,e)}`}function pke(e){try{return Gt(Mr(e.items).items[0].text).join(" ")}catch{return null}}function Ykt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Mr(e)}function Kkt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const mke=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Xkt=e=>mke(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function PJ(){let e="",t="",n="";const r=[],i=()=>t=n="",o=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},s=(u,l)=>(l!=null&&(t+=` ${u}="${Xkt(l)}"`),a),a={open(u){o(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)s(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:s,text:u=>(n+=mke(u),a),toString:()=>e};return a}const gke=e=>yke(PJ(),e)+"";function yke(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):yke(e,r)}return e.close()}const aM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},uM={blend:"mix-blend-mode"},vke={fill:"none","stroke-miterlimit":10},dA=0,$fe="http://www.w3.org/2000/xmlns/",$s=Gk.xmlns;class OJ extends ER{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=Ls(t,0,"svg",$s),this._svg.setAttributeNS($fe,"xmlns",$s),this._svg.setAttributeNS($fe,"xmlns:xlink",Gk["xmlns:xlink"]),this._svg.setAttribute("version",Gk.version),this._svg.setAttribute("class","marks"),Zf(t,1),this._root=Ls(this._svg,dA,"g",$s),Zy(this._root,vke),Zf(this._svg,dA+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Zy(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ls(t,dA,"rect",$s),Zy(r,{width:this._width,height:this._height,fill:n}));const i=gke(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Zf(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Ef[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Lfe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Lfe(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Ef[s],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Bfe(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return Zf(c,0),n._svg;c.setAttribute("class",tke(n));const f=hke(n);for(const p in f)ll(c,p,f[p]);l||ll(c,"pointer-events",u),ll(c,"clip-path",n.clip?fJ(this,n,n.group):null);let d=null,h=0;const m=p=>{const g=this.isDirty(p),v=Bfe(p,c,d,a.tag,o);g&&(this._update(a,v,p),l&&Zkt(this,v,p,i)),d=v,++h};return a.nested?n.items.length&&m(n.items[0]):Nh(n,m),Zf(c,h),c}_update(t,n,r){q0=n,Cu=n.__values__,dke(WD,r),t.attr(WD,r,this);const i=tIt[t.type];i&&i.call(this,t,n,r),q0&&this.style(q0,r)}style(t,n){if(n!=null){for(const r in aM){let i=r==="font"?_R(n):n[r];if(i===Cu[r])continue;const o=aM[r];i==null?t.removeAttribute(o):(uJ(i)&&(i=kDe(i,this._defs.gradient,bke())),t.setAttribute(o,i+"")),Cu[r]=i}for(const r in uM)zO(t,uM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=Ls(t,dA+1,"defs",$s)),i=Qkt(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=Ls(t,dA+1,"defs",$s)),i=Jkt(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):Zf(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Lfe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Qkt(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=Ls(e,n++,"pattern",$s);Zy(s,{id:XF+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=Ls(s,0,"rect",$s),Zy(s,{width:1,height:1,fill:`url(${bke()}#${t.id})`}),e=Ls(e,n++,"radialGradient",$s),Zy(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ls(e,n++,"linearGradient",$s),Zy(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=Ls(e,r,"stop",$s),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Zf(e,r),n}function Jkt(e,t,n){let r;return e=Ls(e,n,"clipPath",$s),e.setAttribute("id",t.id),t.path?(r=Ls(e,0,"path",$s),r.setAttribute("d",t.path)):(r=Ls(e,0,"rect",$s),Zy(r,{x:0,y:0,width:t.width,height:t.height})),Zf(e,1),n+1}function Zkt(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;Nh(n,s=>{i=e.mark(t,s,i,r),++o}),Zf(t,1+o)}function Bfe(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Jy(s,r,$s),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Jy(s,"path",$s);o.appendChild(a),a.__data__=e;const u=Jy(s,"g",$s);o.appendChild(u),u.__data__=e;const l=Jy(s,"path",$s);o.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(o.ownerSVGElement!==i||eIt(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function eIt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let q0=null,Cu=null;const tIt={group(e,t,n){const r=q0=t.childNodes[2];Cu=r.__values__,e.foreground(WD,n,this),Cu=t.__values__,q0=t.childNodes[1],e.content(WD,n,this);const i=q0=t.childNodes[0];e.background(WD,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Cu.events&&(ll(r,"pointer-events",o),ll(i,"pointer-events",o),Cu.events=o),n.strokeForeground&&n.stroke){const s=n.fill;ll(r,"display",null),this.style(i,n),ll(i,"stroke",null),s&&(n.fill=null),Cu=r.__values__,this.style(r,n),s&&(n.fill=s),q0=null}else ll(r,"display","none")},image(e,t,n){n.smooth===!1?(zO(t,"image-rendering","optimizeSpeed"),zO(t,"image-rendering","pixelated")):zO(t,"image-rendering",null)},text(e,t,n){const r=wR(n);let i,o,s,a;gt(r)?(o=r.map(u=>$1(n,u)),i=o.join(`
`),i!==Cu.text&&(Zf(t,0),s=t.ownerDocument,a=M1(n),o.forEach((u,l)=>{const c=Jy(s,"tspan",$s);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Cu.text=i)):(o=$1(n,r),o!==Cu.text&&(t.textContent=o,Cu.text=o)),ll(t,"font-family",_R(n)),ll(t,"font-size",Rm(n)+"px"),ll(t,"font-style",n.fontStyle),ll(t,"font-variant",n.fontVariant),ll(t,"font-weight",n.fontWeight)}};function WD(e,t,n){t!==Cu[e]&&(n?nIt(q0,e,t,n):ll(q0,e,t),Cu[e]=t)}function zO(e,t,n){n!==Cu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Cu[t]=n)}function Zy(e,t){for(const n in t)ll(e,n,t[n])}function ll(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function nIt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function bke(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class xke extends ER{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=PJ();n.open("svg",rr({},Gk,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",vke,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ef[n.marktype],i=r.tag,o=[dke,r.attr];t.open("g",{class:tke(n),"clip-path":n.clip?fJ(this,n,n.group):null},hke(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const l=wR(a);if(gt(l)){const c={x:0,dy:M1(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text($1(a,l[f])).close()}else t.text($1(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Nh(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):Nh(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,u,l,c)=>{o[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&rIt(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:XF+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function rIt(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=_R(t),e["font-size"]=Rm(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in aM){let a=t[s];const u=aM[s];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(uJ(a)&&(a=kDe(a,i.gradient,"")),e[u]=a)}for(const s in uM){const a=t[s];a!=null&&(o=o||[],o.push(`${uM[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const th={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function iIt(e){th.svgMarkTypes=e.svgMarkTypes??["text"],th.svgOnTop=e.svgOnTop??!0,th.debug=e.debug??!1}class bH extends ER{constructor(t){super(t),this._svgRenderer=new OJ(t),this._canvasRenderer=new sM(t)}initialize(t,n,r,i,o){this._root_el=Ls(t,0,"div");const s=Ls(this._root_el,0,"div"),a=Ls(this._root_el,1,"div");return this._root_el.style.position="relative",th.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=th.svgOnTop?a:s,this._canvasEl=th.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return th.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!th.svgMarkTypes.includes(o));this._svgRenderer.render(t,th.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return th.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class wke extends TR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ls(Ls(t,0,"div"),th.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const _ke="canvas",Eke="hybrid",Tke="png",Cke="svg",Ske="none",e1={Canvas:_ke,PNG:Tke,SVG:Cke,Hybrid:Eke,None:Ske},kx={};kx[_ke]=kx[Tke]={renderer:sM,headless:sM,handler:TR};kx[Cke]={renderer:OJ,headless:xke,handler:uke};kx[Eke]={renderer:bH,headless:bH,handler:wke};kx[Ske]={};function A$(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(kx[e]=t,this):kx[e]}function Ake(e,t,n){const r=[],i=new Ss().union(t),o=e.marktype;return o?Dke(e,i,n,r):o==="group"?kke(e,i,n,r):ht("Intersect scene must be mark node or group item.")}function Dke(e,t,n,r){if(oIt(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)kke(i[a],t,n,r);else for(const u=Ef[o].isect;a<s;++a){const l=i[a];Ike(l,t,u)&&r.push(l)}}return r}function oIt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function kke(e,t,n,r){n&&n(e.mark)&&Ike(e,t,Ef.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let u=0;u<o;++u)Dke(i[u],t,n,r);t.translate(s,a)}return r}function Ike(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const ij=new Ss;function Rke(e){const t=e.clip;if(ir(t))t(bR(ij.clear()));else if(t)ij.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(ij)}const sIt=1e-9;function FJ(e,t,n){return e===t?!0:n==="path"?Nke(e,t):e instanceof Date&&t instanceof Date?+e==+t:ti(e)&&ti(t)?Math.abs(e-t)<=sIt:!e||!t||!qt(e)&&!qt(t)?e==t:aIt(e,t)}function Nke(e,t){return FJ(nT(e),nT(t))}function aIt(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!FJ(e[i],t[i],i))return!1;return typeof e==typeof t}function uIt(){MDe(),NAt()}const oT="top",uh="left",ph="right",L1="bottom",lIt="top-left",cIt="top-right",fIt="bottom-left",dIt="bottom-right",MJ="start",xH="middle",fl="end",hIt="x",pIt="y",D$="group",$J="axis",LJ="title",mIt="frame",gIt="scope",BJ="legend",Pke="row-header",Oke="row-footer",Fke="row-title",Mke="column-header",$ke="column-footer",Lke="column-title",yIt="padding",vIt="symbol",Bke="fit",jke="fit-x",zke="fit-y",bIt="pad",jJ="none",nP="all",wH="each",zJ="flush",t1="column",n1="row";function Uke(e){st.call(this,null,e)}Vt(Uke,st,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Ef[i],s=o.bound;let a=r.bounds,u;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=rP(r,s),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===D$||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(rP(l,s))),r.role){case $J:case BJ:case LJ:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(rP(l,s))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(rP(l,s))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return Rke(r),t.modifies("bounds")}});function rP(e,t,n){return t(e.bounds.clear(),e,n)}const jfe=":vega_identifier:";function UJ(e){st.call(this,0,e)}UJ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Vt(UJ,st,{transform(e,t){const n=xIt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function xIt(e){return e._signals[jfe]||(e._signals[jfe]=e.add(0))}function Vke(e){st.call(this,null,e)}Vt(Vke,st,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,wIt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===D$?b$:v$;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function wIt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Hke(e){st.call(this,null,e)}const zfe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!qke(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},qke=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Ufe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(qke(i,o=e[n].bounds,t))return!0},_It=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},EIt=(e,t,n)=>{var r=e.range(),i=new Ss;return t===oT||t===L1?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},Vfe=e=>(e.forEach(t=>t.opacity=1),e),Hfe=(e,t)=>e.reflow(t.modified()).modifies("opacity");Vt(Hke,st,{transform(e,t){const n=zfe[e.method]||zfe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Vfe(i),t=Hfe(t,e)),t;if(i=i.filter(_It),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=Vfe(i),t=Hfe(t,e),o.length>=3&&Ufe(o,r)){do o=n(o,r);while(o.length>=3&&Ufe(o,r));o.length<3&&!Mr(i).opacity&&(o.length>1&&(Mr(o).opacity=0),Mr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=EIt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{s(u)||(u.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function Wke(e){st.call(this,null,e)}Vt(Wke,st,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const _u=new Ss;function HE(e,t,n){return e[t]===n?0:(e[t]=n,1)}function TIt(e){var t=e.items[0].orient;return t===uh||t===ph}function CIt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function SIt(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,u=CIt(o),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,m=o.title&&i.items[u[2]].items[0],p=i.titlePadding,g=i.bounds,v=m&&TJ(m),b=0,w=0,E,T;switch(_u.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case oT:b=f||0,w=-c,T=Math.max(d,Math.min(h,-g.y1)),g.add(0,-T).add(l,0),m&&iP(e,m,T,p,v,0,-1,g);break;case uh:b=-c,w=f||0,T=Math.max(d,Math.min(h,-g.x1)),g.add(-T,0).add(0,l),m&&iP(e,m,T,p,v,1,-1,g);break;case ph:b=n+c,w=f||0,T=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(T,l),m&&iP(e,m,T,p,v,1,1,g);break;case L1:b=f||0,w=r+c,T=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,T),m&&iP(e,m,T,p,0,0,1,g);break;default:b=i.x,w=i.y}return Og(g.translate(b,w),i),HE(i,"x",b+s)|HE(i,"y",w+s)&&(i.bounds=_u,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function iP(e,t,n,r,i,o,s,a){const u=t.bounds;if(t.auto){const l=s*(n+i+r);let c=0,f=0;e.dirty(t),o?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const qfe=(e,t)=>Math.floor(Math.min(e,t)),Wfe=(e,t)=>Math.ceil(Math.max(e,t));function AIt(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===D$)switch(i.role){case $J:case BJ:case LJ:break;case Pke:s.rowheaders.push(...o);break;case Oke:s.rowfooters.push(...o);break;case Mke:s.colheaders.push(...o);break;case $ke:s.colfooters.push(...o);break;case Fke:s.rowtitle=o[0];break;case Lke:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function DIt(e){return new Ss().set(0,0,e.width||0,e.height||0)}function kIt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function uo(e,t,n){const r=qt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Gfe(e){return e<0?Math.ceil(-e):0}function Gke(e,t,n){var r=!n.nodirty,i=n.bounds===zJ?DIt:kIt,o=_u.set(0,0,0,0),s=uo(n.align,t1),a=uo(n.align,n1),u=uo(n.padding,t1),l=uo(n.padding,n1),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),m=Array(c),p=0,g=Array(d),v=Array(f),b=0,w=Array(d),E=Array(d),T=Array(d),C,S,I,R,P,M,B,L,z,G,W;for(S=0;S<c;++S)m[S]=0;for(S=0;S<f;++S)v[S]=0;for(S=0;S<d;++S)M=t[S],P=T[S]=i(M),M.x=M.x||0,w[S]=0,M.y=M.y||0,E[S]=0,I=S%c,R=~~(S/c),p=Math.max(p,B=Math.ceil(P.x2)),b=Math.max(b,L=Math.ceil(P.y2)),m[I]=Math.max(m[I],B),v[R]=Math.max(v[R],L),h[S]=u+Gfe(P.x1),g[S]=l+Gfe(P.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(s===wH)for(I=1;I<c;++I){for(W=0,S=I;S<d;S+=c)W<h[S]&&(W=h[S]);for(S=I;S<d;S+=c)h[S]=W+m[I-1]}else if(s===nP){for(W=0,S=0;S<d;++S)S%c&&W<h[S]&&(W=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=W+p)}else for(s=!1,I=1;I<c;++I)for(S=I;S<d;S+=c)h[S]+=m[I-1];if(a===wH)for(R=1;R<f;++R){for(W=0,S=R*c,C=S+c;S<C;++S)W<g[S]&&(W=g[S]);for(S=R*c;S<C;++S)g[S]=W+v[R-1]}else if(a===nP){for(W=0,S=c;S<d;++S)W<g[S]&&(W=g[S]);for(S=c;S<d;++S)g[S]=W+b}else for(a=!1,R=1;R<f;++R)for(S=R*c,C=S+c;S<C;++S)g[S]+=v[R-1];for(z=0,S=0;S<d;++S)z=h[S]+(S%c?z:0),w[S]+=z-t[S].x;for(I=0;I<c;++I)for(G=0,S=I;S<d;S+=c)G+=g[S],E[S]+=G-t[S].y;if(s&&uo(n.center,t1)&&f>1)for(S=0;S<d;++S)P=s===nP?p:m[S%c],z=P-T[S].x2-t[S].x-w[S],z>0&&(w[S]+=z/2);if(a&&uo(n.center,n1)&&c!==1)for(S=0;S<d;++S)P=a===nP?b:v[~~(S/c)],G=P-T[S].y2-t[S].y-E[S],G>0&&(E[S]+=G/2);for(S=0;S<d;++S)o.union(T[S].translate(w[S],E[S]));switch(z=uo(n.anchor,hIt),G=uo(n.anchor,pIt),uo(n.anchor,t1)){case fl:z-=o.width();break;case xH:z-=o.width()/2}switch(uo(n.anchor,n1)){case fl:G-=o.height();break;case xH:G-=o.height()/2}for(z=Math.round(z),G=Math.round(G),o.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)M=t[S],M.x+=w[S]+=z,M.y+=E[S]+=G,o.union(M.mark.bounds.union(M.bounds.translate(w[S],E[S]))),r&&e.dirty(M);return o}function IIt(e,t,n){var r=AIt(t),i=r.marks,o=n.bounds===zJ?RIt:NIt,s=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,m,p,g;const v=Gke(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(p=uo(n.headerBand,n1,null),c=oP(e,r.rowheaders,i,a,u,-uo(s,"rowHeader"),qfe,0,o,"x1",0,a,1,p)),r.colheaders&&(p=uo(n.headerBand,t1,null),f=oP(e,r.colheaders,i,a,a,-uo(s,"columnHeader"),qfe,1,o,"y1",0,1,a,p)),r.rowfooters&&(p=uo(n.footerBand,n1,null),d=oP(e,r.rowfooters,i,a,u,uo(s,"rowFooter"),Wfe,0,o,"x2",a-1,a,1,p)),r.colfooters&&(p=uo(n.footerBand,t1,null),h=oP(e,r.colfooters,i,a,a,uo(s,"columnFooter"),Wfe,1,o,"y2",l-a,1,a,p)),r.rowtitle&&(m=uo(n.titleAnchor,n1),g=uo(s,"rowTitle"),g=m===fl?d+g:c-g,p=uo(n.titleBand,n1,.5),Yfe(e,r.rowtitle,g,0,v,p)),r.coltitle&&(m=uo(n.titleAnchor,t1),g=uo(s,"columnTitle"),g=m===fl?h+g:f-g,p=uo(n.titleBand,t1,.5),Yfe(e,r.coltitle,g,1,v,p))}function RIt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function NIt(e,t){return e.bounds[t]}function oP(e,t,n,r,i,o,s,a,u,l,c,f,d,h){var m=n.length,p=0,g=0,v,b,w,E,T,C,S,I,R;if(!m)return p;for(v=c;v<m;v+=f)n[v]&&(p=s(p,u(n[v],l)));if(!t.length)return p;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),p+=o,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(v=c,b=0,E=t.length;b<E;++b,v+=f){for(C=t[b],T=C.mark.bounds,w=v;w>=0&&(S=n[w])==null;w-=d);a?(I=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),R=p):(I=p,R=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),T.union(C.bounds.translate(I-(C.x||0),R-(C.y||0))),C.x=I,C.y=R,e.dirty(C),g=s(g,T[l])}return g}function Yfe(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function PIt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function OIt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function FIt(e,t,n,r,i,o,s){const a=PIt(n,t),u=OIt(e,a("offset",0)),l=a("anchor",MJ),c=l===fl?1:l===xH?.5:0,f={align:wH,bounds:a("bounds",zJ),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case uh:f.anchor={x:Math.floor(r.x1)-u,column:fl,y:c*(s||r.height()+2*r.y1),row:l};break;case ph:f.anchor={x:Math.ceil(r.x2)+u,y:c*(s||r.height()+2*r.y1),row:l};break;case oT:f.anchor={y:Math.floor(i.y1)-u,row:fl,x:c*(o||i.width()+2*i.x1),column:l};break;case L1:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case lIt:f.anchor={x:u,y:u};break;case cIt:f.anchor={x:o-u,y:u,column:fl};break;case fIt:f.anchor={x:u,y:s-u,row:fl};break;case dIt:f.anchor={x:o-u,y:s-u,column:fl,row:fl};break}return f}function MIt(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),LIt(e,n,n.items[0].items[0]),o=$It(n,o),u=2*n.padding,l=2*n.padding,o.empty()||(u=Math.ceil(o.width()+u),l=Math.ceil(o.height()+l)),r.type===vIt&&BIt(n.items[0].items[0].items[0].items),i!==jJ&&(n.x=s=0,n.y=a=0),n.width=u,n.height=l,Og(o.set(s,a,s+u,a+l),n),n.mark.bounds.clear().union(o),n}function $It(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function LIt(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&hA(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,u=t.titlePadding||0,l=r-s.x,c=r-s.y;switch(s.orient){case uh:i+=Math.ceil(s.bounds.width())+u;break;case ph:case L1:break;default:o+=s.bounds.height()+u}switch((i||o)&&hA(e,n,i,o),s.orient){case uh:c+=cE(t,n,s,a,1,1);break;case ph:l+=cE(t,n,s,fl,0,0)+u,c+=cE(t,n,s,a,1,1);break;case L1:l+=cE(t,n,s,a,0,0),c+=cE(t,n,s,fl,-1,0,1)+u;break;default:l+=cE(t,n,s,a,0,0)}(l||c)&&hA(e,s,l,c),(l=Math.round(s.bounds.x1-r))<0&&(hA(e,n,-l,0),hA(e,s,-l,0))}}function cE(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(o||!u)&&!s?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&o?c:0,d=u&&o?0:c,h=i<=0?0:TJ(n);return Math.round(r===MJ?f:r===fl?d-h:.5*(c-h))}function hA(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function BIt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function jIt(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,u=o.anchor,l=o.offset,c=o.padding,f=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],h=a===uh||a===ph?r:n,m=0,p=0,g=0,v=0,b=0,w;if(s!==D$?a===uh?(m=i.y2,h=i.y1):a===ph?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):a===uh&&(m=r,h=0),w=u===MJ?m:u===fl?h:(m+h)/2,d&&d.text){switch(a){case oT:case L1:b=f.bounds.height()+c;break;case uh:v=f.bounds.width()+c;break;case ph:v=-f.bounds.width()-c;break}_u.clear().union(d.bounds),_u.translate(v-(d.x||0),b-(d.y||0)),HE(d,"x",v)|HE(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(_u),d.mark.bounds.clear().union(_u),e.dirty(d)),_u.clear().union(d.bounds)}else _u.clear();switch(_u.union(f.bounds),a){case oT:p=w,g=i.y1-_u.height()-l;break;case uh:p=i.x1-_u.width()-l,g=w;break;case ph:p=i.x2+_u.width()+l,g=w;break;case L1:p=w,g=i.y2+l;break;default:p=o.x,g=o.y}return HE(o,"x",p)|HE(o,"y",g)&&(_u.translate(p,g),e.dirty(o),o.bounds.clear().union(_u),t.bounds.clear().union(_u),e.dirty(o)),o.bounds}function Yke(e){st.call(this,null,e)}Vt(Yke,st,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&IIt(n,r,e.layout),UIt(n,r,e)}),zIt(e.mark.group)?t.reflow():t}});function zIt(e){return e&&e.mark.role!=="legend-entry"}function UIt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Ss().set(0,0,i,o),a=s.clone(),u=s.clone(),l=[],c,f,d,h,m,p;for(m=0,p=r.length;m<p;++m)switch(f=r[m],f.role){case $J:h=TIt(f)?a:u,h.union(SIt(e,f,i,o));break;case LJ:c=f;break;case BJ:l.push(MIt(e,f));break;case mIt:case gIt:case Pke:case Oke:case Fke:case Mke:case $ke:case Lke:a.union(f.bounds),u.union(f.bounds);break;default:s.union(f.bounds)}if(l.length){const g={};l.forEach(v=>{d=v.orient||ph,d!==jJ&&(g[d]||(g[d]=[])).push(v)});for(const v in g){const b=g[v];Gke(e,b,FIt(b,v,n.legends,a,u,i,o))}l.forEach(v=>{const b=v.bounds;if(b.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=b,e.dirty(v)),n.autosize&&(n.autosize.type===Bke||n.autosize.type===jke||n.autosize.type===zke))switch(v.orient){case uh:case ph:s.add(b.x1,0).add(b.x2,0);break;case oT:case L1:s.add(0,b.y1).add(0,b.y2)}else s.union(b)})}s.union(a).union(u),c&&s.union(jIt(e,c,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),VIt(e,t,s,n)}function VIt(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===yIt){const m=e.padding();s-=m.left+m.right,a-=m.top+m.bottom}o===jJ?(l=0,f=0,u=s,c=a):o===Bke?(u=Math.max(0,s-l-d),c=Math.max(0,a-f-h)):o===jke?(u=Math.max(0,s-l-d),a=c+f+h):o===zke?(s=u+l+d,c=Math.max(0,a-f-h)):o===bIt&&(s=u+l+d,a=c+f+h),e._resizeView(s,a,u,c,[l,f],i.resize)}const HIt=Object.freeze(Object.defineProperty({__proto__:null,bound:Uke,identifier:UJ,mark:Vke,overlap:Hke,render:Wke,viewlayout:Yke},Symbol.toStringTag,{value:"Module"}));function Kke(e){st.call(this,null,e)}Vt(Kke,st,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=sJ(o,s,e.minstep),u=e.format||_De(n,o,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?wDe(o,e.values,a):aJ(o,a);return i&&(r.rem=i),i=l.map((c,f)=>ai({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(ai({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Xke(e){st.call(this,null,e)}function qIt(){return ai({})}function WIt(e){const t=mC().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Vt(Xke,st,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||qIt,o=e.key||En,s=this.value;return gt(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&ht("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=WIt(o)),t.visit(t.ADD,a=>{const u=o(a);let l=s.get(u);l?l.exit?(s.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),s.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=o(a),l=s.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=o(a),l=s.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function Qke(e){st.call(this,null,e)}Vt(Qke,st,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(gt(o))if(n.changed()||o.every(f=>i[f]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||Iy,u=i.enter||Iy,l=i.exit||Iy,c=(o&&!s?i[o]:a)||Iy;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Iy&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Iy&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),s||c!==Iy){const f=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Jke(e){st.call(this,[],e)}Vt(Jke,st,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||PO,s=e.scale,a=+e.limit,u=sJ(s,e.count==null?5:e.count,e.minstep),l=!!e.values||o===PO,c=e.format||SDe(n,s,u,o,e.formatSpecifier,e.formatType,l),f=e.values||CDe(s,u),d,h,m,p,g;return i&&(r.rem=i),o===PO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,ir(m=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),p=i.reduce((v,b)=>Math.max(v,m(b,e)),0)):m=Hu(p=m||8),i=i.map((v,b)=>ai({index:b,label:c(v,b,i),value:v,offset:p,size:m(v,e)})),g&&(g=f[i.length],i.push(ai({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:p,size:m(g,e)})))):o===bAt?(d=s.domain(),h=vDe(s,d[0],Mr(d)),f.length<3&&!e.values&&d[0]!==Mr(d)&&(f=[d[0],Mr(d)]),i=f.map((v,b)=>ai({index:b,label:c(v,b,f),value:v,perc:h(v)}))):(m=f.length-1,h=IAt(s),i=f.map((v,b)=>ai({index:b,label:c(v,b,f),value:v,perc:b?h(v):0,perc2:b===m?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const GIt=e=>e.source.x,YIt=e=>e.source.y,KIt=e=>e.target.x,XIt=e=>e.target.y;function VJ(e){st.call(this,{},e)}VJ.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Vt(VJ,st,{transform(e,t){var n=e.sourceX||GIt,r=e.sourceY||YIt,i=e.targetX||KIt,o=e.targetY||XIt,s=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Kfe.get(u+"-"+a)||Kfe.get(u);return l||ht("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[s]=l(n(c),r(c),i(c),o(c))}),t.reflow(e.modified()).modifies(s)}});const Zke=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,QIt=(e,t,n,r)=>Zke(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),eIe=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},JIt=(e,t,n,r)=>eIe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),tIe=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},ZIt=(e,t,n,r)=>tIe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),eRt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,tRt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,nRt=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},rRt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},iRt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},oRt=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*s+","+u*a+" "+r*s+","+r*a},Kfe=mC({line:Zke,"line-radial":QIt,arc:eIe,"arc-radial":JIt,curve:tIe,"curve-radial":ZIt,"orthogonal-horizontal":eRt,"orthogonal-vertical":tRt,"orthogonal-radial":nRt,"diagonal-horizontal":rRt,"diagonal-vertical":iRt,"diagonal-radial":oRt});function HJ(e){st.call(this,null,e)}HJ.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Vt(HJ,st,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||dC,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(o),c=l.length,f=s,d=(a-s)/fEe(l),h=af(c),m,p,g;for(e.sort&&h.sort((v,b)=>l[v]-l[b]),m=0;m<c;++m)g=l[h[m]],p=u[h[m]],p[r]=f,p[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const sRt=5;function aRt(e){const t=e.type;return!e.bins&&(t===Z2||t===dR||t===hR)}function nIe(e){return rJ(e)&&e!==Yp}const uRt=Ih(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function rIe(e){st.call(this,null,e),this.modified(!0)}Vt(rIe,st,{transform(e,t){var n=t.dataflow,r=this.value,i=lRt(e);(!r||i!==r.type)&&(this.value=r=ni(i)());for(i in e)if(!uRt[i]){if(i==="padding"&&nIe(r.type))continue;ir(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return mRt(r,e,pRt(r,e,fRt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function lRt(e){var t=e.type,n="",r;return t===Yp?Yp+"-"+Z2:(cRt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Yp+"-":r===3?bC+"-":""),(n+t||Z2).toLowerCase())}function cRt(e){const t=e.type;return rJ(t)&&t!==Ax&&t!==Dx&&(e.scheme||e.range&&e.range.length&&e.range.every(Yt))}function fRt(e,t,n){const r=dRt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&aRt(e),a,u;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return nIe(o)&&t.padding&&i[0]!==Mr(i)&&(i=hRt(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(iIe(o,i,n)),o===ZQ&&e.unknown(t.domainImplicit?IV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&sJ(e,t.nice)||null),i.length}function dRt(e,t,n){return t?(e.domain(iIe(e.type,t,n)),t.length):-1}function hRt(e,t,n,r,i,o){var s=Math.abs(Mr(n)-n[0]),a=s/(s-2*r),u=e===wg?WX(t,null,a):e===hR?WF(t,null,a,.5):e===dR?WF(t,null,a,i||1):e===h$?GX(t,null,a,o||1):qX(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function iIe(e,t,n){if(hDe(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+zt(t))}return t}function pRt(e,t,n){let r=t.bins;if(r&&!gt(r)){const i=e.domain(),o=i[0],s=Mr(i),a=r.step;let u=r.start==null?o:r.start,l=r.stop==null?s:r.stop;a||ht("Scale bins parameter missing step property."),u<o&&(u=a*Math.ceil(o/a)),l>s&&(l=a*Math.floor(s/a)),r=af(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===eJ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function mRt(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=gRt(r,t,n);else if(t.scheme&&(o=yRt(r,t,n),ir(o))){if(e.interpolator)return e.interpolator(o);ht(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&pDe(r))return e.interpolator(g$(_H(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(iJ(t.interpolate,t.interpolateGamma)):ir(e.round)?e.round(i):ir(e.rangeRound)&&e.interpolate(i?JI:cv),o&&e.range(_H(o,t.reverse))}function gRt(e,t,n){e!==aDe&&e!==aH&&ht("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===aH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*JQ(n,i,r)]}function yRt(e,t,n){var r=t.schemeExtent,i,o;return gt(t.scheme)?o=g$(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=oJ(i),o||ht(`Unrecognized scheme name: ${t.scheme}`)),n=e===m$?n+1:e===eJ?n-1:e===eT||e===p$?+t.schemeCount||sRt:n,pDe(e)?Xfe(o,r,t.reverse):ir(o)?yDe(Xfe(o,r),n):e===ZQ?o:o.slice(0,n)}function Xfe(e,t,n){return ir(e)&&(t||n)?gDe(e,_H(t||[0,1],n)):e}function _H(e,t){return t?e.slice().reverse():e}function oIe(e){st.call(this,null,e)}Vt(oIe,st,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(vw(e.sort)),this.modified(n),t}});const Qfe="zero",sIe="center",aIe="normalize",uIe=["y0","y1"];function qJ(e){st.call(this,null,e)}qJ.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Qfe,values:[Qfe,sIe,aIe]},{name:"as",type:"string",array:!0,length:2,default:uIe}]};Vt(qJ,st,{transform(e,t){var n=e.as||uIe,r=n[0],i=n[1],o=vw(e.sort),s=e.field||dC,a=e.offset===sIe?vRt:e.offset===aIe?bRt:xRt,u,l,c,f;for(u=wRt(t.source,e.groupby,o,s),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,s,r,i);return t.reflow(e.modified()).modifies(n)}});function vRt(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,u;a<s;++a)u=e[a],u[r]=o,u[i]=o+=Math.abs(n(u))}function bRt(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=s,c[i]=s=o*(l+=Math.abs(n(c)))}function xRt(e,t,n,r,i){for(var o=0,s=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=s,c[i]=s+=l):(c[r]=o,c[i]=o+=l)}function wRt(e,t,n,r){var i=[],o=p=>p(c),s,a,u,l,c,f,d,h,m;if(t==null)i.push(e.slice());else for(s={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(o),d=s[f],d||(s[f]=d=[],i.push(d)),d.push(c);for(f=0,m=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>m&&(m=h),n&&d.sort(n)}return i.max=m,i}const _Rt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:Kke,datajoin:Xke,encode:Qke,legendentries:Jke,linkpath:VJ,pie:HJ,scale:rIe,sortitems:oIe,stack:qJ},Symbol.toStringTag,{value:"Module"}));var ERt=Math.abs,EH=Math.cos,lM=Math.sin,TRt=1e-6,lIe=Math.PI,TH=lIe/2,Jfe=CRt(2);function Zfe(e){return e>1?TH:e<-1?-TH:Math.asin(e)}function CRt(e){return e>0?Math.sqrt(e):0}function SRt(e,t){var n=e*lM(t),r=30,i;do t-=i=(t+lM(t)-n)/(1+EH(t));while(ERt(i)>TRt&&--r>0);return t/2}function ARt(e,t,n){function r(i,o){return[e*i*EH(o=SRt(n,o)),t*lM(o)]}return r.invert=function(i,o){return o=Zfe(o/t),[i/(e*EH(o)),Zfe((2*o+lM(2*o))/n)]},r}var DRt=ARt(Jfe/TH,Jfe,lIe);function kRt(){return Am(DRt).scale(169.529)}const IRt=U2e(),CH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function RRt(e,t){return function n(){const r=t();return r.type=e,r.path=U2e().projection(r),r.copy=r.copy||function(){const i=n();return CH.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},fDe(r)}}function WJ(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(cM[e]=RRt(e,t),this):cM[e]||null}function cIe(e){return e&&e.path||IRt}const cM={albers:H2e,albersusa:z0t,azimuthalequalarea:U0t,azimuthalequidistant:V0t,conicconformal:W0t,conicequalarea:wF,conicequidistant:K0t,equalEarth:Q0t,equirectangular:G0t,gnomonic:J0t,identity:Z0t,mercator:H0t,mollweide:kRt,naturalEarth1:egt,orthographic:tgt,stereographic:ngt,transversemercator:rgt};for(const e in cM)WJ(e,cM[e]);function NRt(){}const b0=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function fIe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return o(u,l,d=>{n(d,u,l),PRt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,m=c.length,p;h<m;++h)if(ORt((p=c[h])[0],d)!==-1){p.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function o(u,l,c){var f=[],d=[],h,m,p,g,v,b;for(h=m=-1,g=u[0]>=l,b0[g<<1].forEach(w);++h<e-1;)p=g,g=u[h+1]>=l,b0[p|g<<1].forEach(w);for(b0[g<<0].forEach(w);++m<t-1;){for(h=-1,g=u[m*e+e]>=l,v=u[m*e]>=l,b0[g<<1|v<<2].forEach(w);++h<e-1;)p=g,g=u[m*e+e+h+1]>=l,b=v,v=u[m*e+h+1]>=l,b0[p|g<<1|v<<2|b<<3].forEach(w);b0[g|v<<3].forEach(w)}for(h=-1,v=u[m*e]>=l,b0[v<<2].forEach(w);++h<e-1;)b=v,v=u[m*e+h+1]>=l,b0[v<<2|b<<3].forEach(w);b0[v<<3].forEach(w);function w(E){var T=[E[0][0]+h,E[0][1]+m],C=[E[1][0]+h,E[1][1]+m],S=s(T),I=s(C),R,P;(R=d[S])?(P=f[I])?(delete d[R.end],delete f[P.start],R===P?(R.ring.push(C),c(R.ring)):f[R.start]=d[P.end]={start:R.start,end:P.end,ring:R.ring.concat(P.ring)}):(delete d[R.end],R.ring.push(C),d[R.end=I]=R):(R=f[I])?(P=d[S])?(delete f[R.start],delete d[P.end],R===P?(R.ring.push(C),c(R.ring)):f[P.start]=d[R.end]={start:P.start,end:R.end,ring:P.ring.concat(R.ring)}):(delete f[R.start],R.ring.unshift(T),f[R.start=S]=R):f[S]=d[I]={start:S,end:I,ring:[T,C]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],m=d|0,p=h|0,g,v=l[p*e+m];d>0&&d<e&&m===d&&(g=l[p*e+m-1],f[0]=d+(c-g)/(v-g)-.5),h>0&&h<t&&p===h&&(g=l[(p-1)*e+m],f[1]=h+(c-g)/(v-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||ht("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:NRt,r):n===a},r}function PRt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function ORt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=FRt(e,t[n]))return i;return 0}function FRt(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var u=e[o],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(MRt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function MRt(e,t,n){var r;return $Rt(e,t,n)&&LRt(e[r=+(e[0]===t[0])],n[r],t[r])}function $Rt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function LRt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function dIe(e,t,n){return function(r){var i=mm(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,u=t?I1(o,s,e):a/(e+1);return af(o+u,s,u)}}function GJ(e){st.call(this,null,e)}GJ.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Vt(GJ,st,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Vu,o=fIe().smooth(e.smooth!==!1),s=e.thresholds||BRt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=o.size([c.width,c.height])(c.values,gt(s)?s:s(c.values));jRt(f,c,l,e),f.forEach(d=>{u.push(i$(l,ai(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function BRt(e,t,n){const r=dIe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Ou(t(i).values)))}function jRt(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(ir(i)&&(i=i(n,r)),ir(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(ti(i)?i:i[0])||1,a=(ti(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(hIe(t,s,a,u,l))}function hIe(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-o)*t+r,f[1]=(f[1]-s)*n+i}return function(f){return f.coordinates.forEach(u),f}}function ede(e,t,n){const r=e>=0?e:dQ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function oj(e){return ir(e)?e:Hu(+e)}function pIe(){var e=u=>u[0],t=u=>u[1],n=dC,r=[-1,-1],i=960,o=500,s=2;function a(u,l){const c=ede(r[0],u,e)>>s,f=ede(r[1],u,t)>>s,d=c?c+2:0,h=f?f+2:0,m=2*d+(i>>s),p=2*h+(o>>s),g=new Float32Array(m*p),v=new Float32Array(m*p);let b=g;u.forEach(E=>{const T=d+(+e(E)>>s),C=h+(+t(E)>>s);T>=0&&T<m&&C>=0&&C<p&&(g[T+C*m]+=+n(E))}),c>0&&f>0?(fE(m,p,g,v,c),dE(m,p,v,g,f),fE(m,p,g,v,c),dE(m,p,v,g,f),fE(m,p,g,v,c),dE(m,p,v,g,f)):c>0?(fE(m,p,g,v,c),fE(m,p,v,g,c),fE(m,p,g,v,c),b=v):f>0&&(dE(m,p,g,v,f),dE(m,p,v,g,f),dE(m,p,g,v,f),b=v);const w=l?Math.pow(2,-2*s):1/fEe(b);for(let E=0,T=m*p;E<T;++E)b[E]*=w;return{values:b,scale:1<<s,width:m,height:p,x1:d,y1:h,x2:d+(i>>s),y2:h+(o>>s)}}return a.x=function(u){return arguments.length?(e=oj(u),a):e},a.y=function(u){return arguments.length?(t=oj(u),a):t},a.weight=function(u){return arguments.length?(n=oj(u),a):n},a.size=function(u){if(!arguments.length)return[i,o];var l=+u[0],c=+u[1];return l>=0&&c>=0||ht("invalid size"),i=l,o=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||ht("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),a):1<<s},a.bandwidth=function(u){return arguments.length?(u=Gt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&ht("invalid bandwidth"),r=u,a):r},a}function fE(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+s*e]),a>=i&&(a>=o&&(u-=n[a-o+s*e]),r[a-i+s*e]=u/Math.min(a+1,e-1+o-a,o))}function dE(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[s+a*e]),a>=i&&(a>=o&&(u-=n[s+(a-o)*e]),r[s+(a-i)*e]=u/Math.min(a+1,t-1+o-a,o))}function YJ(e){st.call(this,null,e)}YJ.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const zRt=["x","y","weight","size","cellSize","bandwidth"];function mIe(e,t){return zRt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Vt(YJ,st,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=URt(r,e.groupby),o=(e.groupby||[]).map(Ho),s=mIe(pIe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<o.length;++d)c[o[d]]=f[d];return c}return u=i.map(c=>ai(l({[a]:s(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function URt(e,t){var n=[],r=c=>c(a),i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function KJ(e){st.call(this,null,e)}KJ.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Vt(KJ,st,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=fIe().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||dIe(e.count||10,e.nice,!!i),s=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=mIe(pIe(),e)(i,!0),u=hIe(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=gt(o)?o:o(i),i=r.size(s)(i,o),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ai),n}});const SH="Feature",XJ="FeatureCollection",VRt="MultiPoint";function QJ(e){st.call(this,null,e)}QJ.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Vt(QJ,st,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Vu,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Mu(a))||o&&t.modified(Mu(o))||s&&t.modified(Mu(s)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),o&&s&&(t.visit(u,c=>{var f=o(c),d=s(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:SH,geometry:{type:VRt,coordinates:r}})),this.value={type:XJ,features:n}}});function JJ(e){st.call(this,null,e)}JJ.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Vt(JJ,st,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Vu,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=cIe(e.projection),n.materialize().reflow()):s=i===Vu||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=HRt(r,e.pointRadius);return n.visit(s,u=>u[o]=r(i(u))),r.pointRadius(a),n.modifies(o)}});function HRt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ZJ(e){st.call(this,null,e)}ZJ.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Vt(ZJ,st,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[s]=f[0],c[a]=f[1]):(c[s]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(o)}});function eZ(e){st.call(this,null,e)}eZ.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Vt(eZ,st,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=qRt(cIe(e.projection),e.field||cd("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function qRt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function tZ(e){st.call(this,[],e),this.generator=x0t()}tZ.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Vt(tZ,st,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)ir(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(mAe(n[0],i)):t.add.push(ai(i)),n[0]=i,t}});function nZ(e){st.call(this,null,e)}nZ.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Vt(nZ,st,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Vu,o=GRt(e.opacity,e),s=WRt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Ou(n.map(l=>Ou(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=rr({},l,u);r||(f.$max=Ou(c.values||[])),l[a]=YRt(c,f,s.dep?s:Hu(s(f)),o.dep?o:Hu(o(f)))}),t.reflow(!0).modifies(a)}});function WRt(e,t){let n;return ir(e)?(n=r=>R1(e(r,t)),n.dep=gIe(e)):n=Hu(R1(e||"#888")),n}function GRt(e,t){let n;return ir(e)?(n=r=>e(r,t),n.dep=gIe(e)):e?n=Hu(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function gIe(e){if(!ir(e))return!1;const t=Ih(Mu(e));return t.$x||t.$y||t.$value||t.$max}function YRt(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?g=>c[g]:Wy,d=p1(u-s,l-a),h=d.getContext("2d"),m=h.getImageData(0,0,u-s,l-a),p=m.data;for(let g=a,v=0;g<l;++g){t.$y=g-a;for(let b=s,w=g*i;b<u;++b,v+=4){t.$x=b-s,t.$value=f(b+w);const E=n(t);p[v+0]=E.r,p[v+1]=E.g,p[v+2]=E.b,p[v+3]=~~(255*r(t))}}return h.putImageData(m,0,0),d}function yIe(e){st.call(this,null,e),this.modified(!0)}Vt(yIe,st,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=XRt(e.type),CH.forEach(r=>{e[r]!=null&&tde(n,r,e[r])})):CH.forEach(r=>{e.modified(r)&&tde(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&KRt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function KRt(e,t){const n=QRt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function XRt(e){const t=WJ((e||"mercator").toLowerCase());return t||ht("Unrecognized projection type: "+e),t()}function tde(e,t,n){ir(e[t])&&e[t](n)}function QRt(e){return e=Gt(e),e.length===1?e[0]:{type:XJ,features:e.reduce((t,n)=>t.concat(JRt(n)),[])}}function JRt(e){return e.type===XJ?e.features:Gt(e).filter(t=>t!=null).map(t=>t.type===SH?t:{type:SH,geometry:t})}const ZRt=Object.freeze(Object.defineProperty({__proto__:null,contour:KJ,geojson:QJ,geopath:JJ,geopoint:ZJ,geoshape:eZ,graticule:tZ,heatmap:nZ,isocontour:GJ,kde2d:YJ,projection:yIe},Symbol.toStringTag,{value:"Module"})),nde={center:cmt,collide:kmt,nbody:jmt,link:Rmt,x:zmt,y:Umt},cD="forces",AH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],eNt=["static","iterations"],vIe=["x","y","vx","vy"];function rZ(e){st.call(this,null,e)}rZ.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:vIe}]};Vt(rZ,st,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(AH),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&bIe(n,e,0,t)):(this.value=n=nNt(t.source,e),n.on("tick",tNt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(eNt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==cD||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(vIe)}});function tNt(e,t){return()=>e.touch(t).run()}function nNt(e,t){const n=Bmt(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),bIe(n,t,!0).on("end",()=>o=!0)}function bIe(e,t,n,r){var i=Gt(t.forces),o,s,a,u;for(o=0,s=AH.length;o<s;++o)a=AH[o],a!==cD&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)u=cD+o,a=n||t.modified(cD,o)?iNt(i[o]):r&&rNt(i[o],r)?e.force(u):null,a&&e.force(u,a);for(s=e.numForces||0;o<s;++o)e.force(cD+o,null);return e.numForces=i.length,e}function rNt(e,t){var n,r;for(n in e)if(ir(r=e[n])&&t.modified(Mu(r)))return 1;return 0}function iNt(e){var t,n;Zt(nde,e.force)||ht("Unrecognized force: "+e.force),t=nde[e.force]();for(n in e)ir(t[n])&&oNt(t[n],e[n],e);return t}function oNt(e,t,n){e(ir(t)?r=>t(r,n):t)}const sNt=Object.freeze(Object.defineProperty({__proto__:null,force:rZ},Symbol.toStringTag,{value:"Module"}));function DH(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function iZ(e){st.call(this,null,e)}iZ.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const aNt=e=>e.values;Vt(iZ,st,{transform(e,t){t.source||ht("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&r$(s.data)&&i.rem.push(s.data)}),this.value=o=sX({values:Gt(e.keys).reduce((s,a)=>(s.key(a),s),uNt()).entries(i.source)},aNt),n&&o.each(s=>{s.children&&(s=ai(s.data),i.add.push(s),i.source.push(s))}),DH(o,En,En)),i.source.root=o,i}});function uNt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],u={},l={};let c=-1,f,d,h;for(;++c<s;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],o);return l}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Fg(e){st.call(this,null,e)}const lNt=(e,t)=>e.parent===t.parent?1:2;Vt(Fg,st,{transform(e,t){(!t.source||!t.source.root)&&ht(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(vw(e.sort,s=>s.data)),cNt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?lNt:dC);try{this.value=n(i)}catch(s){ht(s)}return i.each(s=>fNt(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function cNt(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function fNt(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const kH=["x","y","r","depth","children"];function oZ(e){Fg.call(this,e)}oZ.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kH.length,default:kH}]};Vt(oZ,Fg,{layout:Ugt,params:["radius","size","padding"],fields:kH});const IH=["x0","y0","x1","y1","depth","children"];function sZ(e){Fg.call(this,e)}sZ.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:IH.length,default:IH}]};Vt(sZ,Fg,{layout:Vgt,params:["size","round","padding"],fields:IH});function aZ(e){st.call(this,null,e)}aZ.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Vt(aZ,st,{transform(e,t){t.source||ht("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?DH(ile().id(e.key).parentId(e.parentKey)(i.source),e.key,fd):DH(ile()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const rde={tidy:Zgt,cluster:fgt},RH=["x","y","depth","children"];function uZ(e){Fg.call(this,e)}uZ.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:RH.length,default:RH}]};Vt(uZ,Fg,{layout(e){const t=e||"tidy";if(Zt(rde,t))return rde[t]();ht("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:RH});function lZ(e){st.call(this,[],e)}lZ.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Vt(lZ,st,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||ht("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[En(s)]=1),r.each(s=>{const a=s.data,u=s.parent&&s.parent.data;u&&o[En(a)]&&o[En(u)]&&i.add.push(ai({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[En(s)]=1),n.forEach(s=>{(o[En(s.source)]||o[En(s.target)])&&i.mod.push(s)})),i}});const ide={binary:tyt,dice:nR,slice:k8,slicedice:nyt,squarify:uTe,resquarify:ryt},NH=["x0","y0","x1","y1","depth","children"];function cZ(e){Fg.call(this,e)}cZ.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:NH.length,default:NH}]};Vt(cZ,Fg,{layout(){const e=eyt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Zt(ide,t)?e.tile(ide[t]):ht("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:NH});const dNt=Object.freeze(Object.defineProperty({__proto__:null,nest:iZ,pack:oZ,partition:sZ,stratify:aZ,tree:uZ,treelinks:lZ,treemap:cZ},Symbol.toStringTag,{value:"Module"})),sj=4278190080;function hNt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function pNt(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,u=p1(o,s).getContext("2d"),l=p1(o,s).getContext("2d"),c=a&&p1(o,s).getContext("2d");n.forEach(I=>UO(u,I,!1)),UO(l,t,!1),a&&UO(c,t,!0);const f=aj(u,o,s),d=aj(l,o,s),h=a&&aj(c,o,s),m=e.bitmap(),p=a&&e.bitmap();let g,v,b,w,E,T,C,S;for(v=0;v<s;++v)for(g=0;g<o;++g)E=v*o+g,T=f[E]&sj,S=d[E]&sj,C=a&&h[E]&sj,(T||C||S)&&(b=e(g),w=e(v),!i&&(T||S)&&m.set(b,w),a&&(T||C)&&p.set(b,w));return[m,p]}function aj(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function UO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>UO(e,o.items,n))}):Ef[r].draw(e,{items:n?t.map(mNt):t})}function mNt(e){const t=i$(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const x0=5,al=31,Yk=32,Ly=new Uint32Array(Yk+1),ih=new Uint32Array(Yk+1);ih[0]=0;Ly[0]=~ih[0];for(let e=1;e<=Yk;++e)ih[e]=ih[e-1]<<1|1,Ly[e]=~ih[e];function gNt(e,t){const n=new Uint32Array(~~((e*t+Yk)/Yk));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>x0]&1<<(a&al)},set:(o,s)=>{const a=s*e+o;r(a>>>x0,1<<(a&al))},clear:(o,s)=>{const a=s*e+o;i(a>>>x0,~(1<<(a&al)))},getRange:(o,s,a,u)=>{let l=u,c,f,d,h;for(;l>=s;--l)if(c=l*e+o,f=l*e+a,d=c>>>x0,h=f>>>x0,d===h){if(n[d]&Ly[c&al]&ih[(f&al)+1])return!0}else{if(n[d]&Ly[c&al]||n[h]&ih[(f&al)+1])return!0;for(let m=d+1;m<h;++m)if(n[m])return!0}return!1},setRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>x0,d=c>>>x0,f===d)r(f,Ly[l&al]&ih[(c&al)+1]);else for(r(f,Ly[l&al]),r(d,ih[(c&al)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(o,s,a,u)=>{let l,c,f,d,h;for(;s<=u;++s)if(l=s*e+o,c=s*e+a,f=l>>>x0,d=c>>>x0,f===d)i(f,ih[l&al]|Ly[(c&al)+1]);else for(i(f,ih[l&al]),i(d,Ly[(c&al)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(o,s,a,u)=>o<0||s<0||u>=t||a>=e}}function yNt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>gNt(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function vNt(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,u=a.length,l=s.datum.fontSize,c=hf.width(s.datum,s.datum.text);let f=0,d,h,m,p,g,v,b;for(let w=0;w<u;++w)d=a[w].x,m=a[w].y,h=a[w].x2===void 0?d:a[w].x2,p=a[w].y2===void 0?m:a[w].y2,g=(d+h)/2,v=(m+p)/2,b=Math.abs(h-d+p-m),b>=f&&(f=b,s.x=g,s.y=v);return g=c/2,v=l/2,d=s.x-g,h=s.x+g,m=s.y-v,p=s.y+v,s.align="center",d<0&&h<=i?s.align="left":0<=d&&i<h&&(s.align="right"),s.baseline="middle",m<0&&p<=o?s.baseline="top":0<=m&&o<p&&(s.baseline="bottom"),!0}}function fM(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function r1(e,t,n,r,i,o,s,a){const u=i*o/(r*2),l=e(t-u),c=e(t+u),f=e(n-(o=o/2)),d=e(n+o);return s.outOfBounds(l,f,c,d)||s.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function bNt(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function u(l,c,f,d,h){const m=e.invert(l),p=e.invert(c);let g=f,v=o,b;if(!fM(m,p,d,h,i,o)&&!r1(e,m,p,h,d,g,s,a)&&!r1(e,m,p,h,d,h,s,null)){for(;v-g>=1;)b=(g+v)/2,r1(e,m,p,h,d,b,s,a)?v=b:g=b;if(g>f)return[m,p,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=hf.width(l.datum,l.datum.text);let m=n?d:0,p=!1,g=!1,v=0,b,w,E,T,C,S,I,R,P,M,B,L,z,G,W,te,Z;for(let re=0;re<f;++re){for(b=c[re].x,E=c[re].y,w=c[re].x2===void 0?b:c[re].x2,T=c[re].y2===void 0?E:c[re].y2,b>w&&(Z=b,b=w,w=Z),E>T&&(Z=E,E=T,T=Z),P=e(b),B=e(w),M=~~((P+B)/2),L=e(E),G=e(T),z=~~((L+G)/2),I=M;I>=P;--I)for(R=z;R>=L;--R)te=u(I,R,m,h,d),te&&([l.x,l.y,m,p]=te);for(I=M;I<=B;++I)for(R=z;R<=G;++R)te=u(I,R,m,h,d),te&&([l.x,l.y,m,p]=te);!p&&!n&&(W=Math.abs(w-b+T-E),C=(b+w)/2,S=(E+T)/2,W>=v&&!fM(C,S,h,d,i,o)&&!r1(e,C,S,d,h,d,s,null)&&(v=W,l.x=C,l.y=S,g=!0))}return p||g?(C=h/2,S=d/2,s.setRange(e(l.x-C),e(l.y-S),e(l.x+C),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const xNt=[-1,-1,1,1],wNt=[-1,1,-1,1];function _Nt(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=hf.width(l.datum,l.datum.text),m=[];let p=n?d:0,g=!1,v=!1,b=0,w,E,T,C,S,I,R,P,M,B,L,z;for(let G=0;G<f;++G){for(w=c[G].x,T=c[G].y,E=c[G].x2===void 0?w:c[G].x2,C=c[G].y2===void 0?T:c[G].y2,m.push([e((w+E)/2),e((T+C)/2)]);m.length;)if([R,P]=m.pop(),!(s.get(R,P)||a.get(R,P)||u.get(R,P))){u.set(R,P);for(let W=0;W<4;++W)S=R+xNt[W],I=P+wNt[W],u.outOfBounds(S,I,S,I)||m.push([S,I]);if(S=e.invert(R),I=e.invert(P),M=p,B=o,!fM(S,I,h,d,i,o)&&!r1(e,S,I,d,h,M,s,a)&&!r1(e,S,I,d,h,d,s,null)){for(;B-M>=1;)L=(M+B)/2,r1(e,S,I,d,h,L,s,a)?B=L:M=L;M>p&&(l.x=S,l.y=I,p=M,g=!0)}}!g&&!n&&(z=Math.abs(E-w+C-T),S=(w+E)/2,I=(T+C)/2,z>=b&&!fM(S,I,h,d,i,o)&&!r1(e,S,I,d,h,d,s,null)&&(b=z,l.x=S,l.y=I,v=!0))}return g||v?(S=h/2,I=d/2,s.setRange(e(l.x-S),e(l.y-I),e(l.x+S),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const ENt=["right","center","left"],TNt=["bottom","middle","top"];function CNt(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>o)return!1;let d=l.textWidth??0,h,m,p,g,v,b,w,E,T,C,S,I,R,P,M;for(let B=0;B<u;++B){if(h=(n[B]&3)-1,m=(n[B]>>>2&3)-1,p=h===0&&m===0||r[B]<0,g=h&&m?Math.SQRT1_2:1,v=r[B]<0?-1:1,b=c[1+h]+r[B]*h*g,S=c[4+m]+v*f*m/2+r[B]*m*g,E=S-f/2,T=S+f/2,I=e(b),P=e(E),M=e(T),!d)if(ode(I,I,P,M,s,a,b,b,E,T,c,p))d=hf.width(l.datum,l.datum.text);else continue;if(C=b+v*d*h/2,b=C-d/2,w=C+d/2,I=e(b),R=e(w),ode(I,R,P,M,s,a,b,w,E,T,c,p))return l.x=h?h*v<0?w:b:C,l.y=m?m*v<0?T:E:S,l.align=ENt[h*v+1],l.baseline=TNt[m*v+1],s.setRange(I,P,R,M),!0}return!1}}function ode(e,t,n,r,i,o,s,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o||i).getRange(e,n,t,r))}const uj=0,lj=4,cj=8,fj=0,dj=1,hj=2,SNt={"top-left":uj+fj,top:uj+dj,"top-right":uj+hj,left:lj+fj,middle:lj+dj,right:lj+hj,"bottom-left":cj+fj,bottom:cj+dj,"bottom-right":cj+hj},ANt={naive:vNt,"reduced-search":bNt,floodfill:_Nt};function DNt(e,t,n,r,i,o,s,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=kNt(r,f),h=INt(i,f),m=RNt(e[0].datum),p=m==="group"&&e[0].datum.items[u].marktype,g=p==="area",v=NNt(m,p,a,u),b=l===null||l===1/0,w=g&&c==="naive";let E=-1,T=-1;const C=e.map(P=>{const M=b?hf.width(P,P.text):void 0;return E=Math.max(E,M),T=Math.max(T,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(P),textWidth:M}});l=l===null||l===1/0?Math.max(E,T)+Math.max(...r):l;const S=yNt(t[0],t[1],l);let I;if(!w){n&&C.sort((B,L)=>n(B.datum,L.datum));let P=!1;for(let B=0;B<h.length&&!P;++B)P=h[B]===5||d[B]<0;const M=(m&&s||g)&&e.map(B=>B.datum);I=o.length||M?pNt(S,M||[],o,P,g):hNt(S,s&&C)}const R=g?ANt[c](S,I,s,u):CNt(S,I,h,d);return C.forEach(P=>P.opacity=+R(P)),C}function kNt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function INt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=SNt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function RNt(e){return e&&e.mark&&e.mark.marktype}function NNt(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const PH=["x","y","opacity","align","baseline"],xIe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function fZ(e){st.call(this,null,e)}fZ.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:xIe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:PH.length,default:PH}]};Vt(fZ,st,{transform(e,t){function n(o){const s=e[o];return ir(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ht("Size parameter should be specified as a [width, height] array.");const i=e.as||PH;return DNt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Gt(e.offset==null?1:e.offset),Gt(e.anchor||xIe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const PNt=Object.freeze(Object.defineProperty({__proto__:null,label:fZ},Symbol.toStringTag,{value:"Module"}));function wIe(e,t){var n=[],r=function(c){return c(a)},i,o,s,a,u,l;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function dZ(e){st.call(this,null,e)}dZ.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Vt(dZ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=wIe(r,e.groupby),o=(e.groupby||[]).map(Ho),s=o.length,a=e.as||[Ho(e.x),Ho(e.y)],u=[];i.forEach(l=>{PAe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<s;++d)f[o[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(ai(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const OH={constant:TQ,linear:CQ,log:kAe,exp:IAe,pow:RAe,quad:SQ,poly:NAe},ONt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function hZ(e){st.call(this,null,e)}hZ.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(OH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Vt(hZ,st,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=wIe(r,e.groupby),o=(e.groupby||[]).map(Ho),s=e.method||"linear",a=e.order==null?3:e.order,u=ONt(s,a),l=e.as||[Ho(e.x),Ho(e.y)],c=OH[s],f=[];let d=e.extent;Zt(OH,s)||ht("Invalid regression method: "+s),d!=null&&s==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const p=c(h,e.x,e.y,a);if(e.params){f.push(ai({keys:h.dims,coef:p.coef,rSquared:p.rSquared}));return}const g=d||mm(h,e.x),v=b=>{const w={};for(let E=0;E<o.length;++E)w[o[E]]=h.dims[E];w[l[0]]=b[0],w[l[1]]=b[1],f.push(ai(w))};s==="linear"||s==="constant"?g.forEach(b=>v([b,p.predict(b)])):f$(p.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const FNt=Object.freeze(Object.defineProperty({__proto__:null,loess:dZ,regression:hZ},Symbol.toStringTag,{value:"Module"}));function pZ(e){st.call(this,null,e)}pZ.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const MNt=[-1e5,-1e5,1e5,1e5];Vt(pZ,st,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:MNt;const o=this.value=YK.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const u=o.cellPolygon(s);r[s][n]=u&&!LNt(u)?$Nt(u):null}return t.reflow(e.modified()).modifies(n)}});function $Nt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function LNt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const BNt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:pZ},Symbol.toStringTag,{value:"Module"}));var pj=Math.PI/180,fD=64,VO=2048;function jNt(){var e=[256,256],t,n,r,i,o,s,a,u=_Ie,l=[],c=Math.random,f={};f.layout=function(){for(var m=d(p1()),p=WNt((e[0]>>5)*e[1]),g=null,v=l.length,b=-1,w=[],E=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:o(C),rotate:s(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,S)=>S.size-C.size);++b<v;){var T=E[b];T.x=e[0]*(c()+.5)>>1,T.y=e[1]*(c()+.5)>>1,zNt(m,T,E,b),T.hasText&&h(p,T,g)&&(w.push(T),g?VNt(g,T):g=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return w};function d(m){m.width=m.height=1;var p=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(fD<<5)/p,m.height=VO/p;var g=m.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:p}}function h(m,p,g){for(var v=p.x,b=p.y,w=Math.hypot(e[0],e[1]),E=u(e),T=c()<.5?1:-1,C=-T,S,I,R;(S=E(C+=T))&&(I=~~S[0],R=~~S[1],!(Math.min(Math.abs(I),Math.abs(R))>=w));)if(p.x=v+I,p.y=b+R,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>e[0]||p.y+p.y1>e[1])&&(!g||!UNt(p,m,e[0]))&&(!g||HNt(p,g))){for(var P=p.sprite,M=p.width>>5,B=e[0]>>5,L=p.x-(M<<4),z=L&127,G=32-z,W=p.y1-p.y0,te=(p.y+p.y0)*B+(L>>5),Z,re=0;re<W;re++){Z=0;for(var q=0;q<=M;q++)m[te+q]|=Z<<G|(q<M?(Z=P[re*M+q])>>>z:0);te+=B}return p.sprite=null,!0}return!1}return f.words=function(m){return arguments.length?(l=m,f):l},f.size=function(m){return arguments.length?(e=[+m[0],+m[1]],f):e},f.font=function(m){return arguments.length?(n=pb(m),f):n},f.fontStyle=function(m){return arguments.length?(i=pb(m),f):i},f.fontWeight=function(m){return arguments.length?(o=pb(m),f):o},f.rotate=function(m){return arguments.length?(s=pb(m),f):s},f.text=function(m){return arguments.length?(t=pb(m),f):t},f.spiral=function(m){return arguments.length?(u=GNt[m]||m,f):u},f.fontSize=function(m){return arguments.length?(r=pb(m),f):r},f.padding=function(m){return arguments.length?(a=pb(m),f):a},f.random=function(m){return arguments.length?(c=m,f):c},f}function zNt(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(fD<<5)/o,VO/o);var s=0,a=0,u=0,l=n.length,c,f,d,h,m;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=i.measureText(t.text+"m").width*o,d=t.size<<1,t.rotate){var p=Math.sin(t.rotate*pj),g=Math.cos(t.rotate*pj),v=c*g,b=c*p,w=d*g,E=d*p;c=Math.max(Math.abs(v+E),Math.abs(v-E))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(d>u&&(u=d),s+c>=fD<<5&&(s=0,a+=u,u=0),a+d>=VO)break;i.translate((s+(c>>1))/o,(a+(d>>1))/o),t.rotate&&i.rotate(t.rotate*pj),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=s,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=c}for(var T=i.getImageData(0,0,(fD<<5)/o,VO/o).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(s=t.xoff,s==null)return;a=t.yoff;var S=0,I=-1;for(m=0;m<d;m++){for(h=0;h<c;h++){var R=f*m+(h>>5),P=T[(a+m)*(fD<<5)+(s+h)<<2]?1<<31-h%32:0;C[R]|=P,S|=P}S?I=m:(t.y0++,d--,m--,a++)}t.y1=t.y0+I,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function UNt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,u=e.y1-e.y0,l=(e.y+e.y0)*n+(o>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>s:0))&t[l+d])return!0;l+=n}return!1}function VNt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function HNt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function _Ie(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function qNt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function WNt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function pb(e){return typeof e=="function"?e:function(){return e}}var GNt={archimedean:_Ie,rectangular:qNt};const EIe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],YNt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function mZ(e){st.call(this,jNt(),e)}mZ.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:EIe}]};Vt(mZ,st,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ht("Wordcloud size dimensions must be non-zero.");function n(m){const p=e[m];return ir(p)&&t.modified(p.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||YNt.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||EIe;let a=e.fontSize||14,u;if(ir(a)?u=e.fontSizeRange:a=Hu(a),u){const m=a,p=ni("sqrt")().domain(mm(i,m)).range(u);a=g=>p(m(g))}i.forEach(m=>{m[s[0]]=NaN,m[s[1]]=NaN,m[s[3]]=0});const l=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(hd).layout(),c=o.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let m=0,p,g;m<h;++m)p=l[m],g=p.datum,g[s[0]]=p.x+f,g[s[1]]=p.y+d,g[s[2]]=p.font,g[s[3]]=p.size,g[s[4]]=p.style,g[s[5]]=p.weight,g[s[6]]=p.rotate;return t.reflow(r).modifies(s)}});const KNt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:mZ},Symbol.toStringTag,{value:"Module"})),XNt=e=>new Uint8Array(e),QNt=e=>new Uint16Array(e),GD=e=>new Uint32Array(e);function JNt(){let e=8,t=[],n=GD(0),r=sP(0,e),i=sP(0,e);return{data:()=>t,seen:()=>n=ZNt(n,t.length),add(o){for(let s=0,a=t.length,u=o.length,l;s<u;++s)l=o[s],l._index=a++,t.push(l)},remove(o,s){const a=t.length,u=Array(a-o),l=t;let c,f,d;for(f=0;!s[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],s[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=sP(o,e,r),i=sP(o,e))}}}function ZNt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function sP(e,t,n){const r=(t<257?XNt:t<65537?QNt:GD)(e);return n&&r.set(n),r}function sde(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)o[u[d]]|=r;for(d=c;d<f;++d)o[u[d]]|=r;return s}}}function ade(){let e=GD(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=GD(f);let h=Array(f),m,p,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=e3t(h,d),c)m=t,p=e,t=Array(c+f),e=GD(c+f),t3t(l,m,p,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function o(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function s(a,u){let l;return u?l=u.length:(u=t,l=n),[zct(u,a[0],0,l),k1(u,a[1],0,l)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function e3t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),qct(e,t)}function t3t(e,t,n,r,i,o,s,a,u){let l=0,c=0,f;for(f=0;l<r&&c<s;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=o[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<s;++c,++f)a[f]=i[c],u[f]=o[c]+e}function gZ(e){st.call(this,JNt(),e),this._indices=null,this._dims=null}gZ.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Vt(gZ,st,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,u,l;for(;a<s;++a)u=n[a].fname,l=i[u]||(i[u]=ade()),o.push(sde(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,m={};let p,g,v,b,w,E,T,C,S;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,T=0,C=b.length;T<C;++T)E[b[T]._index]=1;for(T=0;T<h;++T)S=r[T],(!s[T]||e.modified("fields",T)||t.modified(S.fields))&&(v=S.fname,(p=m[v])||(o[v]=g=ade(),m[v]=p=g.insert(S,t.source,0)),s[T]=sde(g,T,i[T]).onAdd(p,u));for(T=0,C=a.data().length;T<C;++T)w[T]||(l[T]!==u[T]?f.push(T):E[T]&&u[T]!==c&&d.push(T));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d=i.size(),h,m,p;i.resize(c,f),i.add(r);const g=i.curr(),v=i.prev(),b=i.all();for(h=0;h<f;++h)m=a[h].fname,p=u[m]||(u[m]=s[m].insert(a[h],r,d)),o[h].onAdd(p,g);for(;d<c;++d)v[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,u,l;for(a=0,u=s.length;a<u;++a)l=s[a]._index,i[l]!==o&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,m;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,s[h]=m=o[h],o[h]=a,m!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,u,l;for(n.filters=0,l=0;l<s;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<s;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],m=l[1],p=e.one;let g,v,b;if(f<h)for(g=f,v=Math.min(h,d);g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;else if(f>h)for(g=h,v=Math.min(f,m);g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;if(d>m)for(g=Math.max(f,m),v=d;g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;else if(d<m)for(g=Math.max(h,d),v=m;g<v;++g)b=u[g],o[b]!==n&&(a[b]=s[b],o[b]=n,r.push(b)),s[b]^=p;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let m,p,g;if(l<f)for(m=l,p=Math.min(f,c);m<p;++m)g=s[m],o[g]^=h,n.push(g);else if(l>f)for(m=f,p=Math.min(l,d);m<p;++m)g=s[m],o[g]^=h,r.push(g);if(c>d)for(m=Math.max(l,d),p=c;m<p;++m)g=s[m],o[g]^=h,n.push(g);else if(c<d)for(m=Math.max(f,c),p=d;m<p;++m)g=s[m],o[g]^=h,r.push(g);e.range=t.slice()}});function yZ(e){st.call(this,null,e)}yZ.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Vt(yZ,st,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:s[c];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?s[c]:null}),o.filter(o.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?s[c]:null})):(o.filter(o.ADD,l),o.filter(o.REM,c=>(a[c]&n)===i?s[c]:null)),o.filter(o.SOURCE,c=>l(c._index))}});const n3t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:gZ,resolvefilter:yZ},Symbol.toStringTag,{value:"Module"})),r3t="RawCode",sT="Literal",i3t="Property",o3t="Identifier",s3t="ArrayExpression",a3t="BinaryExpression",TIe="CallExpression",u3t="ConditionalExpression",l3t="LogicalExpression",c3t="MemberExpression",f3t="ObjectExpression",d3t="UnaryExpression";function Uh(e){this.type=e}Uh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=h3t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function h3t(e){switch(e.type){case s3t:return e.elements;case a3t:case l3t:return[e.left,e.right];case TIe:return[e.callee].concat(e.arguments);case u3t:return[e.test,e.consequent,e.alternate];case c3t:return[e.object,e.property];case f3t:return e.properties;case i3t:return[e.key,e.value];case d3t:return[e.argument];case o3t:case sT:case r3t:default:return[]}}var Nm,gn,dt,Lu,bi,k$=1,CR=2,Ix=3,mv=4,I$=5,ww=6,rc=7,SR=8,p3t=9;Nm={};Nm[k$]="Boolean";Nm[CR]="<end>";Nm[Ix]="Identifier";Nm[mv]="Keyword";Nm[I$]="Null";Nm[ww]="Numeric";Nm[rc]="Punctuator";Nm[SR]="String";Nm[p3t]="RegularExpression";var m3t="ArrayExpression",g3t="BinaryExpression",y3t="CallExpression",v3t="ConditionalExpression",CIe="Identifier",b3t="Literal",x3t="LogicalExpression",w3t="MemberExpression",_3t="ObjectExpression",E3t="Property",T3t="UnaryExpression",ha="Unexpected token %0",C3t="Unexpected number",S3t="Unexpected string",A3t="Unexpected identifier",D3t="Unexpected reserved word",k3t="Unexpected end of input",FH="Invalid regular expression",mj="Invalid regular expression: missing /",SIe="Octal literals are not allowed in strict mode.",I3t="Duplicate data property in object literal not allowed in strict mode",Ya="ILLEGAL",Kk="Disabled.",R3t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),N3t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function R$(e,t){if(!e)throw new Error("ASSERT: "+t)}function I0(e){return e>=48&&e<=57}function vZ(e){return"0123456789abcdefABCDEF".includes(e)}function YD(e){return"01234567".includes(e)}function P3t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Xk(e){return e===10||e===13||e===8232||e===8233}function AR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&R3t.test(String.fromCharCode(e))}function dM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&N3t.test(String.fromCharCode(e))}const O3t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function AIe(){for(;dt<Lu;){const e=gn.charCodeAt(dt);if(P3t(e)||Xk(e))++dt;else break}}function MH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)dt<Lu&&vZ(gn[dt])?(r=gn[dt++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Jr({},ha,Ya);return String.fromCharCode(i)}function F3t(){var e,t,n,r;for(e=gn[dt],t=0,e==="}"&&Jr({},ha,Ya);dt<Lu&&(e=gn[dt++],!!vZ(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Jr({},ha,Ya),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function DIe(){var e,t;for(e=gn.charCodeAt(dt++),t=String.fromCharCode(e),e===92&&(gn.charCodeAt(dt)!==117&&Jr({},ha,Ya),++dt,e=MH("u"),(!e||e==="\\"||!AR(e.charCodeAt(0)))&&Jr({},ha,Ya),t=e);dt<Lu&&(e=gn.charCodeAt(dt),!!dM(e));)++dt,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),gn.charCodeAt(dt)!==117&&Jr({},ha,Ya),++dt,e=MH("u"),(!e||e==="\\"||!dM(e.charCodeAt(0)))&&Jr({},ha,Ya),t+=e);return t}function M3t(){var e,t;for(e=dt++;dt<Lu;){if(t=gn.charCodeAt(dt),t===92)return dt=e,DIe();if(dM(t))++dt;else break}return gn.slice(e,dt)}function $3t(){var e,t,n;return e=dt,t=gn.charCodeAt(dt)===92?DIe():M3t(),t.length===1?n=Ix:O3t.hasOwnProperty(t)?n=mv:t==="null"?n=I$:t==="true"||t==="false"?n=k$:n=Ix,{type:n,value:t,start:e,end:dt}}function gj(){var e=dt,t=gn.charCodeAt(dt),n,r=gn[dt],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++dt,{type:rc,value:String.fromCharCode(t),start:e,end:dt};default:if(n=gn.charCodeAt(dt+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return dt+=2,{type:rc,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:dt};case 33:case 61:return dt+=2,gn.charCodeAt(dt)===61&&++dt,{type:rc,value:gn.slice(e,dt),start:e,end:dt}}}if(s=gn.substr(dt,4),s===">>>=")return dt+=4,{type:rc,value:s,start:e,end:dt};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return dt+=3,{type:rc,value:o,start:e,end:dt};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return dt+=2,{type:rc,value:i,start:e,end:dt};if(i==="//"&&Jr({},ha,Ya),"<>=!+-*%&|^/".includes(r))return++dt,{type:rc,value:r,start:e,end:dt};Jr({},ha,Ya)}function L3t(e){let t="";for(;dt<Lu&&vZ(gn[dt]);)t+=gn[dt++];return t.length===0&&Jr({},ha,Ya),AR(gn.charCodeAt(dt))&&Jr({},ha,Ya),{type:ww,value:parseInt("0x"+t,16),start:e,end:dt}}function B3t(e){let t="0"+gn[dt++];for(;dt<Lu&&YD(gn[dt]);)t+=gn[dt++];return(AR(gn.charCodeAt(dt))||I0(gn.charCodeAt(dt)))&&Jr({},ha,Ya),{type:ww,value:parseInt(t,8),octal:!0,start:e,end:dt}}function ude(){var e,t,n;if(n=gn[dt],R$(I0(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=dt,e="",n!=="."){if(e=gn[dt++],n=gn[dt],e==="0"){if(n==="x"||n==="X")return++dt,L3t(t);if(YD(n))return B3t(t);n&&I0(n.charCodeAt(0))&&Jr({},ha,Ya)}for(;I0(gn.charCodeAt(dt));)e+=gn[dt++];n=gn[dt]}if(n==="."){for(e+=gn[dt++];I0(gn.charCodeAt(dt));)e+=gn[dt++];n=gn[dt]}if(n==="e"||n==="E")if(e+=gn[dt++],n=gn[dt],(n==="+"||n==="-")&&(e+=gn[dt++]),I0(gn.charCodeAt(dt)))for(;I0(gn.charCodeAt(dt));)e+=gn[dt++];else Jr({},ha,Ya);return AR(gn.charCodeAt(dt))&&Jr({},ha,Ya),{type:ww,value:parseFloat(e),start:t,end:dt}}function j3t(){var e="",t,n,r,i,o=!1;for(t=gn[dt],R$(t==="'"||t==='"',"String literal must starts with a quote"),n=dt,++dt;dt<Lu;)if(r=gn[dt++],r===t){t="";break}else if(r==="\\")if(r=gn[dt++],!r||!Xk(r.charCodeAt(0)))switch(r){case"u":case"x":gn[dt]==="{"?(++dt,e+=F3t()):e+=MH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:YD(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),dt<Lu&&YD(gn[dt])&&(o=!0,i=i*8+"01234567".indexOf(gn[dt++]),"0123".includes(r)&&dt<Lu&&YD(gn[dt])&&(i=i*8+"01234567".indexOf(gn[dt++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&gn[dt]===`
`&&++dt;else{if(Xk(r.charCodeAt(0)))break;e+=r}return t!==""&&Jr({},ha,Ya),{type:SR,value:e,octal:o,start:n,end:dt}}function z3t(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Jr({},FH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Jr({},FH)}try{return new RegExp(e,t)}catch{return null}}function U3t(){var e,t,n,r,i;for(e=gn[dt],R$(e==="/","Regular expression literal must start with a slash"),t=gn[dt++],n=!1,r=!1;dt<Lu;)if(e=gn[dt++],t+=e,e==="\\")e=gn[dt++],Xk(e.charCodeAt(0))&&Jr({},mj),t+=e;else if(Xk(e.charCodeAt(0)))Jr({},mj);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Jr({},mj),i=t.substr(1,t.length-2),{value:i,literal:t}}function V3t(){var e,t,n;for(t="",n="";dt<Lu&&(e=gn[dt],!!dM(e.charCodeAt(0)));)++dt,e==="\\"&&dt<Lu?Jr({},ha,Ya):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Jr({},FH,n),{value:n,literal:t}}function H3t(){var e,t,n,r;return bi=null,AIe(),e=dt,t=U3t(),n=V3t(),r=z3t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:dt}}function q3t(e){return e.type===Ix||e.type===mv||e.type===k$||e.type===I$}function kIe(){if(AIe(),dt>=Lu)return{type:CR,start:dt,end:dt};const e=gn.charCodeAt(dt);return AR(e)?$3t():e===40||e===41||e===59?gj():e===39||e===34?j3t():e===46?I0(gn.charCodeAt(dt+1))?ude():gj():I0(e)?ude():gj()}function ac(){const e=bi;return dt=e.end,bi=kIe(),dt=e.end,e}function IIe(){const e=dt;bi=kIe(),dt=e}function W3t(e){const t=new Uh(m3t);return t.elements=e,t}function lde(e,t,n){const r=new Uh(e==="||"||e==="&&"?x3t:g3t);return r.operator=e,r.left=t,r.right=n,r}function G3t(e,t){const n=new Uh(y3t);return n.callee=e,n.arguments=t,n}function Y3t(e,t,n){const r=new Uh(v3t);return r.test=e,r.consequent=t,r.alternate=n,r}function bZ(e){const t=new Uh(CIe);return t.name=e,t}function dD(e){const t=new Uh(b3t);return t.value=e.value,t.raw=gn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function cde(e,t,n){const r=new Uh(w3t);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function K3t(e){const t=new Uh(_3t);return t.properties=e,t}function fde(e,t,n){const r=new Uh(E3t);return r.key=t,r.value=n,r.kind=e,r}function X3t(e,t){const n=new Uh(T3t);return n.operator=e,n.argument=t,n.prefix=!0,n}function Jr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(R$(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=dt,n.description=i,n}function N$(e){e.type===CR&&Jr(e,k3t),e.type===ww&&Jr(e,C3t),e.type===SR&&Jr(e,S3t),e.type===Ix&&Jr(e,A3t),e.type===mv&&Jr(e,D3t),Jr(e,ha,e.value)}function Bu(e){const t=ac();(t.type!==rc||t.value!==e)&&N$(t)}function eo(e){return bi.type===rc&&bi.value===e}function yj(e){return bi.type===mv&&bi.value===e}function Q3t(){const e=[];for(dt=bi.start,Bu("[");!eo("]");)eo(",")?(ac(),e.push(null)):(e.push(Rx()),eo("]")||Bu(","));return ac(),W3t(e)}function dde(){dt=bi.start;const e=ac();return e.type===SR||e.type===ww?(e.octal&&Jr(e,SIe),dD(e)):bZ(e.value)}function J3t(){var e,t,n,r;if(dt=bi.start,e=bi,e.type===Ix)return n=dde(),Bu(":"),r=Rx(),fde("init",n,r);if(e.type===CR||e.type===rc)N$(e);else return t=dde(),Bu(":"),r=Rx(),fde("init",t,r)}function Z3t(){var e=[],t,n,r,i={},o=String;for(dt=bi.start,Bu("{");!eo("}");)t=J3t(),t.key.type===CIe?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Jr({},I3t):i[r]=!0,e.push(t),eo("}")||Bu(",");return Bu("}"),K3t(e)}function ePt(){Bu("(");const e=xZ();return Bu(")"),e}const tPt={if:1};function nPt(){var e,t,n;if(eo("("))return ePt();if(eo("["))return Q3t();if(eo("{"))return Z3t();if(e=bi.type,dt=bi.start,e===Ix||tPt[bi.value])n=bZ(ac().value);else if(e===SR||e===ww)bi.octal&&Jr(bi,SIe),n=dD(ac());else{if(e===mv)throw new Error(Kk);e===k$?(t=ac(),t.value=t.value==="true",n=dD(t)):e===I$?(t=ac(),t.value=null,n=dD(t)):eo("/")||eo("/=")?(n=dD(H3t()),IIe()):N$(ac())}return n}function rPt(){const e=[];if(Bu("("),!eo(")"))for(;dt<Lu&&(e.push(Rx()),!eo(")"));)Bu(",");return Bu(")"),e}function iPt(){dt=bi.start;const e=ac();return q3t(e)||N$(e),bZ(e.value)}function oPt(){return Bu("."),iPt()}function sPt(){Bu("[");const e=xZ();return Bu("]"),e}function aPt(){var e,t,n;for(e=nPt();;)if(eo("."))n=oPt(),e=cde(".",e,n);else if(eo("("))t=rPt(),e=G3t(e,t);else if(eo("["))n=sPt(),e=cde("[",e,n);else break;return e}function hde(){const e=aPt();if(bi.type===rc&&(eo("++")||eo("--")))throw new Error(Kk);return e}function HO(){var e,t;if(bi.type!==rc&&bi.type!==mv)t=hde();else{if(eo("++")||eo("--"))throw new Error(Kk);if(eo("+")||eo("-")||eo("~")||eo("!"))e=ac(),t=HO(),t=X3t(e.value,t);else{if(yj("delete")||yj("void")||yj("typeof"))throw new Error(Kk);t=hde()}}return t}function pde(e){let t=0;if(e.type!==rc&&e.type!==mv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function uPt(){var e,t,n,r,i,o,s,a,u,l;if(e=bi,u=HO(),r=bi,i=pde(r),i===0)return u;for(r.prec=i,ac(),t=[e,bi],s=HO(),o=[u,r,s];(i=pde(bi))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),t.pop(),n=lde(a,u,s),o.push(n);r=ac(),r.prec=i,o.push(r),t.push(bi),n=HO(),o.push(n)}for(l=o.length-1,n=o[l],t.pop();l>1;)t.pop(),n=lde(o[l-1].value,o[l-2],n),l-=2;return n}function Rx(){var e,t,n;return e=uPt(),eo("?")&&(ac(),t=Rx(),Bu(":"),n=Rx(),e=Y3t(e,t,n)),e}function xZ(){const e=Rx();if(eo(","))throw new Error(Kk);return e}function wZ(e){gn=e,dt=0,Lu=gn.length,bi=null,IIe();const t=xZ();if(bi.type!==CR)throw new Error("Unexpect token after expression.");return t}var RIe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function NIe(e){function t(s,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+s+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,u){return l=>t(s,l,a,u)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ht("Missing arguments to clamp function."),s.length>3&&ht("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:o,test:n("test",o),if:function(s){s.length<3&&ht("Missing arguments to if function."),s.length>3&&ht("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function lPt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function PIe(e){e=e||{};const t=e.allowed?Ih(e.allowed):{},n=e.forbidden?Ih(e.forbidden):{},r=e.constants||RIe,i=(e.functions||NIe)(f),o=e.globalvar,s=e.fieldvar,a=ir(o)?o:m=>`${o}["${m}"]`;let u={},l={},c=0;function f(m){if(Yt(m))return m;const p=d[m.type];return p==null&&ht("Unsupported type: "+m.type),p(m)}const d={Literal:m=>m.raw,Identifier:m=>{const p=m.name;return c>0?p:Zt(n,p)?ht("Illegal identifier: "+p):Zt(r,p)?r[p]:Zt(t,p)?p:(u[p]=1,a(p))},MemberExpression:m=>{const p=!m.computed,g=f(m.object);p&&(c+=1);const v=f(m.property);return g===s&&(l[lPt(v)]=1),p&&(c-=1),g+(p?"."+v:"["+v+"]")},CallExpression:m=>{m.callee.type!=="Identifier"&&ht("Illegal callee type: "+m.callee.type);const p=m.callee.name,g=m.arguments,v=Zt(i,p)&&i[p];return v||ht("Unrecognized function: "+p),ir(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:m=>"["+m.elements.map(f).join(",")+"]",BinaryExpression:m=>"("+f(m.left)+" "+m.operator+" "+f(m.right)+")",UnaryExpression:m=>"("+m.operator+f(m.argument)+")",ConditionalExpression:m=>"("+f(m.test)+"?"+f(m.consequent)+":"+f(m.alternate)+")",LogicalExpression:m=>"("+f(m.left)+m.operator+f(m.right)+")",ObjectExpression:m=>"{"+m.properties.map(f).join(",")+"}",Property:m=>{c+=1;const p=f(m.key);return c-=1,p+":"+f(m.value)}};function h(m){const p={code:f(m),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},p}return h.functions=i,h.constants=r,h}const cPt="Literal";var Pm,fPt=1,dPt=2,hPt=3,pPt=4,mPt=5,gPt=6,yPt=7,vPt=8,bPt=9;Pm={};Pm[fPt]="Boolean";Pm[dPt]="<end>";Pm[hPt]="Identifier";Pm[pPt]="Keyword";Pm[mPt]="Null";Pm[gPt]="Numeric";Pm[yPt]="Punctuator";Pm[vPt]="String";Pm[bPt]="RegularExpression";const mde=Symbol("vega_selection_getter");function OIe(e){return(!e.getter||!e.getter[mde])&&(e.getter=cd(e.field),e.getter[mde]=!0),e.getter}const _Z="intersect",gde="union",xPt="vlMulti",wPt="vlPoint",yde="or",_Pt="and",Dp="_vgsid_",Qk=cd(Dp),EPt="E",TPt="R",CPt="R-E",SPt="R-LE",APt="R-RE",hM="index:unit";function vde(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=OIe(a)(e),d1(s)&&(s=Nu(s)),d1(r[o])&&(r[o]=Nu(r[o])),gt(r[o])&&d1(r[o][0])&&(r[o]=r[o].map(Nu)),a.type===EPt){if(gt(r[o])?r[o].indexOf(s)<0:s!==r[o])return!1}else if(a.type===TPt){if(!UE(s,r[o]))return!1}else if(a.type===APt){if(!UE(s,r[o],!0,!1))return!1}else if(a.type===CPt){if(!UE(s,r[o],!1,!1))return!1}else if(a.type===SPt&&!UE(s,r[o],!1,!0))return!1;return!0}function DPt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[hM]&&r[hM].value:void 0,s=n===_Z,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],o&&s){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=vde(t,l),c[d]=h?-1:++f,h&&o.size===1)return!0;if(!h&&f===o.get(d).count)return!1}else if(h=vde(t,l),s^h)return h;return a&&s}const FIe=oC(Qk),kPt=FIe.left,IPt=FIe.right;function RPt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[hM]&&r[hM].value:void 0,s=n===_Z,a=Qk(t),u=kPt(i,a);if(u===i.length||Qk(i[u])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(IPt(i,a)-u<o.size)return!1}return!0}function NPt(e,t){return e.map(n=>rr(t.fields?{values:t.fields.map(r=>OIe(r)(n.datum))}:{[Dp]:Qk(n.datum)},t))}function PPt(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},u={},l,c,f,d,h,m,p,g,v,b,w=o.length,E=0,T,C;E<w;++E)if(l=o[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(T=0,C=c.length;T<C;++T)h=c[T],p=s[h.field]||(s[h.field]={}),g=p[d]||(p[d]=[]),u[h.field]=v=h.type.charAt(0),b=vj[`${v}_union`],p[d]=b(g,Gt(f[T]));n&&(g=a[d]||(a[d]=[]),g.push(Gt(f).reduce((S,I,R)=>(S[c[R].field]=I,S),{})))}else h=Dp,m=Qk(l),p=s[h]||(s[h]={}),g=p[d]||(p[d]=[]),g.push(m),n&&(g=a[d]||(a[d]=[]),g.push({[Dp]:m}));if(t=t||gde,s[Dp]?s[Dp]=vj[`${Dp}_${t}`](...Object.values(s[Dp])):Object.keys(s).forEach(S=>{s[S]=Object.keys(s[S]).map(I=>s[S][I]).reduce((I,R)=>I===void 0?R:vj[`${u[S]}_${t}`](I,R))}),o=Object.keys(a),n&&o.length){const S=r?wPt:xPt;s[S]=t===gde?{[yde]:o.reduce((I,R)=>(I.push(...a[R]),I),[])}:{[_Pt]:o.map(I=>({[yde]:a[I]}))}}return s}var vj={[`${Dp}_union`]:eft,[`${Dp}_intersect`]:Jct,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Nu(t[0]),r=Nu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Nu(t[0]),r=Nu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const OPt=":",FPt="@";function EZ(e,t,n,r){t[0].type!==cPt&&ht("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&Mr(t).value,s="unit",a=FPt+s,u=OPt+i;o===_Z&&!Zt(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),Zt(r,u)||(r[u]=n.getData(i).tuplesRef())}function MIe(e){const t=this.context.data[e];return t?t.values.value:[]}function MPt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function $Pt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(fd).insert(t)),1}function LPt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const DR=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},BPt=DR("format"),$Ie=DR("timeFormat"),jPt=DR("utcFormat"),zPt=DR("timeParse"),UPt=DR("utcParse"),aP=new Date(2e3,0,1);function P$(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(aP.setYear(2e3),aP.setMonth(e),aP.setDate(t),$Ie.call(this,aP,n))}function VPt(e){return P$.call(this,e,1,"%B")}function HPt(e){return P$.call(this,e,1,"%b")}function qPt(e){return P$.call(this,0,2+e,"%A")}function WPt(e){return P$.call(this,0,2+e,"%a")}const GPt=":",YPt="@",$H="%",LIe="$";function TZ(e,t,n,r){t[0].type!==sT&&ht("First argument to data functions must be a string literal.");const i=t[0].value,o=GPt+i;if(!Zt(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function KPt(e,t,n,r){t[0].type!==sT&&ht("First argument to indata must be a string literal."),t[1].type!==sT&&ht("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=YPt+o;Zt(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function wl(e,t,n,r){if(t[0].type===sT)bde(n,r,t[0].value);else for(e in n.scales)bde(n,r,e)}function bde(e,t,n){const r=$H+n;if(!Zt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Om(e,t){if(ir(e))return e;if(Yt(e)){const n=t.scales[e];return n&&fAt(n.value)?n.value:void 0}}function XPt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=wl,n._range=wl,n._scale=wl;const r=i=>"_["+(i.type===sT?zt($H+i.value):zt($H)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function CZ(e,t){return function(n,r,i){if(n){const o=Om(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const QPt=CZ("area",Zmt),JPt=CZ("bounds",r0t),ZPt=CZ("centroid",l0t);function e4t(e,t){const n=Om(e,(t||this).context);return n&&n.scale()}function t4t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function SZ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function n4t(){return SZ(this.context.dataflow,"warn",arguments)}function r4t(){return SZ(this.context.dataflow,"info",arguments)}function i4t(){return SZ(this.context.dataflow,"debug",arguments)}function bj(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function LH(e){const t=R1(e),n=bj(t.r),r=bj(t.g),i=bj(t.b);return .2126*n+.7152*r+.0722*i}function o4t(e,t){const n=LH(e),r=LH(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function s4t(){const e=[].slice.call(arguments);return e.unshift({}),rr(...e)}function BIe(e,t){return e===t||e!==e&&t!==t?!0:gt(e)?gt(t)&&e.length===t.length?a4t(e,t):!1:qt(e)&&qt(t)?jIe(e,t):!1}function a4t(e,t){for(let n=0,r=e.length;n<r;++n)if(!BIe(e[n],t[n]))return!1;return!0}function jIe(e,t){for(const n in e)if(!BIe(e[n],t[n]))return!1;return!0}function xde(e){return t=>jIe(e,t)}function u4t(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],u=a.input,l=s.stamp();let c=a.changes,f,d;if(s._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=s.changeset(),c.stamp=l,s.runAfter(()=>{a.modified=!0,s.pulse(u,c).run()},!0,1)),n&&(f=n===!0?fd:gt(n)||r$(n)?n:xde(n),c.remove(f)),t&&c.insert(t),r&&(f=xde(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in o)c.modify(i,d,o[d]);return 1}function l4t(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function c4t(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const wde={};function f4t(e,t){const n=wde[t]||(wde[t]=cd(t));return gt(e)?e.map(n):n(e)}function AZ(e){return gt(e)||ArrayBuffer.isView(e)?e:null}function DZ(e){return AZ(e)||(Yt(e)?e:null)}function d4t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return AZ(e).join(...n)}function h4t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return DZ(e).indexOf(...n)}function p4t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return DZ(e).lastIndexOf(...n)}function m4t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return DZ(e).slice(...n)}function g4t(e,t,n){return ir(n)&&ht("Function argument passed to replace."),String(e).replace(t,n)}function y4t(e){return AZ(e).slice().reverse()}function v4t(e,t,n){return JQ(e||0,t||0,n||0)}function b4t(e,t){const n=Om(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function x4t(e,t){const n=Om(e,(t||this).context);return n?n.copy():void 0}function w4t(e,t){const n=Om(e,(t||this).context);return n?n.domain():[]}function _4t(e,t,n){const r=Om(e,(n||this).context);return r?gt(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function E4t(e,t){const n=Om(e,(t||this).context);return n&&n.range?n.range():[]}function T4t(e,t,n){const r=Om(e,(n||this).context);return r?r(t):void 0}function C4t(e,t,n,r,i){e=Om(e,(i||this).context);const o=IDe(t,n);let s=e.domain(),a=s[0],u=Mr(s),l=Vu;return u-a?l=vDe(e,a,u):e=(e.interpolator?ni("sequential")().interpolator(e.interpolator()):ni("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),u!==Mr(s)&&s.push(u)),s.forEach(c=>o.stop(l(c),e(c))),o}function S4t(e,t,n){const r=Om(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function A4t(e){let t=null;return function(n){return n?qk(n,t=t||nT(e)):e}}const zIe=e=>e.data;function UIe(e,t){const n=MIe.call(t,e);return n.root&&n.root.lookup||{}}function D4t(e,t,n){const r=UIe(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(zIe):void 0}function k4t(e,t){const n=UIe(e,this)[t];return n?n.ancestors().map(zIe):void 0}const VIe=()=>typeof window<"u"&&window||null;function I4t(){const e=VIe();return e?e.screen:{}}function R4t(){const e=VIe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function N4t(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function HIe(e,t,n){if(!e)return[];const[r,i]=e,o=new Ss().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return Ake(s,o,P4t(t))}function P4t(e){let t=null;if(e){const n=Gt(e.marktype),r=Gt(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function O4t(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Gt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function F4t(e){return Gt(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function M4t(e,t,n){const{x:r,y:i,mark:o}=n,s=new Ss().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),l<s.y1&&(s.y1=l),l>s.y2&&(s.y2=l);return s.translate(r,i),HIe([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(u=>$4t(u.x,u.y,t))}function $4t(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[u,l]=n[i];l>t!=a>t&&e<(s-u)*(t-l)/(a-l)+u&&r++}return r&1}const Jk={random(){return hd()},cumulativeNormal:u$,cumulativeLogNormal:vQ,cumulativeUniform:_Q,densityNormal:hQ,densityLogNormal:yQ,densityUniform:wQ,quantileNormal:l$,quantileLogNormal:bQ,quantileUniform:EQ,sampleNormal:a$,sampleLogNormal:gQ,sampleUniform:xQ,isArray:gt,isBoolean:pv,isDate:d1,isDefined(e){return e!==void 0},isNumber:ti,isObject:qt,isRegExp:DSe,isString:Yt,isTuple:r$,isValid(e){return e!=null&&e===e},toBoolean:QX,toDate(e){return JX(e)},toNumber:Nu,toString:ZX,indexof:h4t,join:d4t,lastindexof:p4t,replace:g4t,reverse:y4t,slice:m4t,flush:SSe,lerp:kSe,merge:s4t,pad:NSe,peek:Mr,pluck:f4t,span:uR,inrange:UE,truncate:PSe,rgb:R1,lab:K6,hcl:X6,hsl:G6,luminance:LH,contrast:o4t,sequence:af,format:BPt,utcFormat:jPt,utcParse:UPt,utcOffset:GSe,utcSequence:XSe,timeFormat:$Ie,timeParse:zPt,timeOffset:WSe,timeSequence:KSe,timeUnitSpecifier:FSe,monthFormat:VPt,monthAbbrevFormat:HPt,dayFormat:qPt,dayAbbrevFormat:WPt,quarter:_Se,utcquarter:ESe,week:$Se,utcweek:jSe,dayofyear:MSe,utcdayofyear:BSe,warn:n4t,info:r4t,debug:i4t,extent(e){return mm(e)},inScope:t4t,intersect:HIe,clampRange:TSe,pinchDistance:l4t,pinchAngle:c4t,screen:I4t,containerSize:N4t,windowSize:R4t,bandspace:v4t,setdata:$Pt,pathShape:A4t,panLinear:vSe,panLog:bSe,panPow:xSe,panSymlog:wSe,zoomLinear:qX,zoomLog:WX,zoomPow:WF,zoomSymlog:GX,encode:LPt,modify:u4t,lassoAppend:O4t,lassoPath:F4t,intersectLasso:M4t},L4t=["view","item","group","xy","x","y"],B4t="event.vega.",qIe="this.",kZ={},WIe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${zt(LIe+e)}]`,functions:j4t,constants:RIe,visitors:kZ},GIe=PIe(WIe);function j4t(e){const t=NIe(e);L4t.forEach(n=>t[n]=B4t+n);for(const n in Jk)t[n]=qIe+n;return rr(t,XPt(e,Jk,kZ)),t}function ds(e,t,n){return arguments.length===1?Jk[e]:(Jk[e]=t,n&&(kZ[e]=n),GIe.functions[e]=qIe+e,this)}ds("bandwidth",b4t,wl);ds("copy",x4t,wl);ds("domain",w4t,wl);ds("range",E4t,wl);ds("invert",_4t,wl);ds("scale",T4t,wl);ds("gradient",C4t,wl);ds("geoArea",QPt,wl);ds("geoBounds",JPt,wl);ds("geoCentroid",ZPt,wl);ds("geoShape",S4t,wl);ds("geoScale",e4t,wl);ds("indata",MPt,KPt);ds("data",MIe,TZ);ds("treePath",D4t,TZ);ds("treeAncestors",k4t,TZ);ds("vlSelectionTest",DPt,EZ);ds("vlSelectionIdTest",RPt,EZ);ds("vlSelectionResolve",PPt,EZ);ds("vlSelectionTuples",NPt);function ym(e,t){const n={};let r;try{e=Yt(e)?e:zt(e)+"",r=wZ(e)}catch{ht("Expression parse error: "+e)}r.visit(o=>{if(o.type!==TIe)return;const s=o.callee.name,a=WIe.visitors[s];a&&a(s,o.arguments,t,n)});const i=GIe(r);return i.globals.forEach(o=>{const s=LIe+o;!Zt(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:rr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function z4t(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const U4t=Ih(["rule"]),_de=Ih(["group","image","rect"]);function V4t(e,t){let n="";return U4t[t]||(e.x2&&(e.x?(_de[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(_de[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function IZ(e){return(e+"").toLowerCase()}function H4t(e){return IZ(e)==="operator"}function q4t(e){return IZ(e)==="collect"}function pA(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function W4t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var G4t={operator:(e,t)=>pA(e,["_"],t.code),parameter:(e,t)=>pA(e,["datum","_"],t.code),event:(e,t)=>pA(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return pA(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+zt(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=V4t(r,n),i+="return m;",pA(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(zt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let u,l;return o.path?(u=`a${o.path}`,l=`b${o.path}`):((n=n||{})["f"+s]=o,u=`this.f${s}(a)`,l=`this.f${s}(b)`),W4t(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Y4t(e){const t=this;H4t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function K4t(e){const t=this;if(e.params){const n=t.get(e.id);n||ht("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function X4t(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=gt(i)?i.map(o=>Ede(o,n,t)):Ede(i,n,t)}return t}function Ede(e,t,n){if(!e||!qt(e))return e;for(let r=0,i=Tde.length,o;r<i;++r)if(o=Tde[r],Zt(e,o.key))return o.parse(e,t,n);return e}var Tde=[{key:"$ref",parse:Q4t},{key:"$key",parse:Z4t},{key:"$expr",parse:J4t},{key:"$field",parse:eOt},{key:"$encode",parse:nOt},{key:"$compare",parse:tOt},{key:"$context",parse:rOt},{key:"$subflow",parse:iOt},{key:"$tupleid",parse:oOt}];function Q4t(e,t){return t.get(e.$ref)||ht("Operator not defined: "+e.$ref)}function J4t(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Tc(t.parameterExpression(e.$expr),e.$fields))}function Z4t(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=XX(e.$key,e.$flat,t.expr.codegen))}function eOt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=cd(e.$field,e.$name,t.expr.codegen))}function tOt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Gt(e.$compare).map(i=>i&&i.$tupleid?En:i);return t.fn[n]||(t.fn[n]=YX(r,e.$order,t.expr.codegen))}function nOt(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Tc(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function rOt(e,t){return t}function iOt(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(o),a.detachSubflow=()=>t.detach(s),a}}function oOt(){return En}function sOt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ht("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function aOt(e){var t=this,n=qt(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||ht("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const uOt={skip:!0};function lOt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function cOt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],uOt)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(fd).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function YIe(e,t,n,r){return new KIe(e,t,n,r)}function KIe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||G4t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Cde(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}KIe.prototype=Cde.prototype={fork(){const e=new Cde(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),q4t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[IZ(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:z4t,parseOperator:Y4t,parseOperatorParameters:K4t,parseParameters:X4t,parseStream:sOt,parseUpdate:aOt,getState:lOt,setState:cOt};function fOt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),XIe(t,e.description()))}function XIe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function dOt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const xj="default";function hOt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:xj,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?Yt(i)?i:i.user:xj,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Yt(r)||(i=r.item,r=r.user),BH(e,r&&r!==xj?r:i||r),i},{cursor:t})}function BH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function pM(e,t){var n=e._runtime.data;return Zt(n,t)||ht("Unrecognized data set: "+t),n[t]}function pOt(e,t){return arguments.length<2?pM(this,e).values.value:O$.call(this,e,bw().remove(fd).insert(t))}function O$(e,t){gAe(t)||ht("Second argument to changes must be a changeset.");const n=pM(this,e);return n.modified=!0,this.pulse(n.input,t)}function mOt(e,t){return O$.call(this,e,bw().insert(t))}function gOt(e,t){return O$.call(this,e,bw().remove(t))}function QIe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function JIe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function F$(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function yOt(e){var t=F$(e),n=QIe(e),r=JIe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function vOt(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=F$(e),s=t.changedTouches?t.changedTouches[0]:t,o=S$(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=bOt(e,n,o),t}function bOt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;Yt(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Hu(e),item:Hu(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const Sde="view",xOt="timer",wOt="window",_Ot={trap:!1};function EOt(e){const t=rr({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{gt(r[o])&&(r[o]=Ih(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function ZIe(e,t,n,r){e._eventListeners.push({type:n,sources:Gt(t),handler:r})}function TOt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function uP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||qt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function COt(e,t,n){var r=this,i=new s$(n),o=function(l,c){r.runAsync(null,()=>{e===Sde&&TOt(r,t)&&l.preventDefault(),i.receive(vOt(r,l,c))})},s;if(e===xOt)uP(r,"timer",t)&&r.timer(o,t);else if(e===Sde)uP(r,"view",t)&&r.addEventListener(t,o,_Ot);else if(e===wOt?uP(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&uP(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=s.length;a<u;++a)s[a].addEventListener(t,o);ZIe(r,s,t,o)}return i}function Ade(e){return e.item}function Dde(e){return e.item.mark.source}function kde(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function SOt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Ade),Dde,kde(e)),this.on(this.events("view","pointerout",Ade),Dde,kde(t)),this}function AOt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function pf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const DOt="vega-bind",kOt="vega-bind-name",IOt="vega-bind-radio";function ROt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=KX(r.debounce,i.update))),(r.input==null&&r.element?NOt:OOt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function NOt(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),ZIe(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(POt(i))}}function POt(e){return typeof Event<"u"?new Event(e):{type:e}}function OOt(e,t,n,r){const i=r.signal(n.signal),o=pf("div",{class:DOt}),s=n.input==="radio"?o:o.appendChild(pf("label"));s.appendChild(pf("span",{class:kOt},n.name||n.signal)),t.appendChild(o);let a=FOt;switch(n.input){case"checkbox":a=MOt;break;case"select":a=$Ot;break;case"radio":a=LOt;break;case"range":a=BOt;break}a(e,s,n,i)}function FOt(e,t,n,r){const i=pf("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function MOt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=pf("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function $Ot(e,t,n,r){const i=pf("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const u={value:s};mM(s,r)&&(u.selected=!0),i.appendChild(pf("option",u,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,u=n.options.length;a<u;++a)if(mM(n.options[a],s)){i.selectedIndex=a;return}}}function LOt(e,t,n,r){const i=pf("span",{class:IOt}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const u={type:"radio",name:n.signal,value:s};mM(s,r)&&(u.checked=!0);const l=pf("input",u);l.addEventListener("change",()=>e.update(s));const c=pf("label",{},(o[a]||s)+"");return c.prepend(l),i.appendChild(c),l}),e.set=s=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)mM(a[l].value,s)&&(a[l].checked=!0)}}function BOt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||I1(o,i,100),a=pf("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const u=pf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function mM(e,t){return e===t||e+""==t+""}function eRe(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,QIe(e),JIe(e),F$(e),i,o).background(e.background())}function RZ(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function jOt(e,t,n,r){const i=new r(e.loader(),RZ(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,F$(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function zOt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=A$(r);e=n._el=e?wj(n,e,!0):null,fOt(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||TR,a=e?o.renderer:o.headless;return n._renderer=a?eRe(n,n._renderer,e,a):null,n._handler=jOt(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=wj(n,t,!0):e.appendChild(pf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=wj(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{ROt(n,u.element||t,u)})),n}function wj(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const mA=e=>+e||0,UOt=e=>({top:e,bottom:e,left:e,right:e});function Ide(e){return qt(e)?{top:mA(e.top),bottom:mA(e.bottom),left:mA(e.left),right:mA(e.right)}:UOt(mA(e))}async function NZ(e,t,n,r){const i=A$(t),o=i&&i.headless;return o||ht("Unrecognized renderer type: "+t),await e.runAsync(),eRe(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function VOt(e,t){e!==e1.Canvas&&e!==e1.SVG&&e!==e1.PNG&&ht("Unrecognized image type: "+e);const n=await NZ(this,e,t);return e===e1.SVG?HOt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function HOt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function qOt(e,t){return(await NZ(this,e1.Canvas,e,t)).canvas()}async function WOt(e){return(await NZ(this,e1.SVG,e)).svg()}function GOt(e,t,n){return YIe(e,J2,Jk,n).parse(t)}function YOt(e){var t=this._runtime.scales;return Zt(t,e)||ht("Unrecognized scale or projection: "+e),t[e].value}var tRe="width",nRe="height",PZ="padding",Rde={skip:!0};function rRe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===PZ?r.left+r.right:0)}function iRe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===PZ?r.top+r.bottom:0)}function KOt(e){var t=e._signals,n=t[tRe],r=t[nRe],i=t[PZ];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=rRe(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=iRe(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function XOt(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(tRe,n,Rde),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(nRe,r,Rde),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(u=>u.resize())},!1,1)}function QOt(e){return this._runtime.getState(e||{data:JOt,signals:ZOt,recurse:!0})}function JOt(e,t){return t.modified&&gt(t.input.value)&&!e.startsWith("_:vega:_")}function ZOt(e,t){return!(e==="parent"||t instanceof J2.proxy)}function e6t(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function t6t(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Dht(n,t))}function n6t(e,t,n,r){const i=e.element();i&&i.setAttribute("title",r6t(r))}function r6t(e){return e==null?"":gt(e)?oRe(e):qt(e)&&!d1(e)?i6t(e):e+""}function i6t(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(gt(n)?oRe(n):sRe(n))}).join(`
`)}function oRe(e){return"["+e.map(sRe).join(", ")+"]"}function sRe(e){return gt(e)?"[]":qt(e)&&!d1(e)?"{}":e}function o6t(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function aRe(e,t){const n=this;if(t=t||{},a2.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=rr({},e.locale,t.locale);n.locale(sAe(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||e1.Canvas,n._scenegraph=new eke;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||n6t,n._redraw=!0,n._handler=new TR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=EOt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=GOt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:rr({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=rRe(n,n._width),n._viewHeight=iRe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,KOt(n),dOt(n),hOt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function lP(e,t){return Zt(e._signals,t)?e._signals[t]:ht("Unrecognized signal name: "+zt(t))}function uRe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Nde(e,t,n,r){let i=uRe(n,r);return i||(i=RZ(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Pde(e,t,n){const r=uRe(t,n);return r&&t._targets.remove(r),e}Vt(aRe,a2,{async evaluate(e,t,n){if(await a2.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,yOt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&RO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&XIe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=lP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Ide(e)):Ide(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(A$(e)||ht("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(a2.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(lP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:XOt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=RZ(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Nde(this,e,lP(this,e),t)},removeSignalListener(e,t){return Pde(this,lP(this,e),t)},addDataListener(e,t){return Nde(this,e,pM(this,e).values,t)},removeDataListener(e,t){return Pde(this,pM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=BH(this,null);this._globalCursor=!!e,t&&BH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:t6t,events:COt,finalize:AOt,hover:SOt,data:pOt,change:O$,insert:mOt,remove:gOt,scale:YOt,initialize:zOt,toImageURL:VOt,toCanvas:qOt,toSVG:WOt,getState:QOt,setState:e6t,_watchPixelRatio:o6t});const s6t="view",gM="[",yM="]",lRe="{",cRe="}",a6t=":",fRe=",",u6t="@",l6t=">",c6t=/[[\]{}]/,f6t={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let dRe,hRe;function gv(e,t,n){return dRe=t||s6t,hRe=n||f6t,pRe(e.trim()).map(jH)}function d6t(e){return hRe[e]}function KD(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function pRe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=KD(e,i,fRe,gM+lRe,yM+cRe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function jH(e){return e[0]==="["?h6t(e):p6t(e)}function h6t(e){const t=e.length;let n=1,r;if(n=KD(e,n,yM,gM,yM),n===t)throw"Empty between selector: "+e;if(r=pRe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==l6t)throw"Expected '>' after between selector: "+e;r=r.map(jH);const i=jH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function p6t(e){const t={source:dRe},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,u,l;if(e[s-1]===cRe){if(a=e.lastIndexOf(lRe),a>=0){try{r=m6t(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===u6t&&(i=++a),u=KD(e,a,a6t),u<s&&(n.push(e.substring(o,u).trim()),o=a=++u),a=KD(e,a,gM),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),l=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=KD(e,a,yM),a===s)throw"Unmatched left bracket: "+e;if(l.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==gM)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||c6t.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):d6t(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function m6t(e){const t=e.split(fRe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function g6t(e){return qt(e)?e:{type:e||"pad"}}const gA=e=>+e||0,y6t=e=>({top:e,bottom:e,left:e,right:e});function v6t(e){return qt(e)?e.signal?e:{top:gA(e.top),bottom:gA(e.bottom),left:gA(e.left),right:gA(e.right)}:y6t(gA(e))}const pa=e=>qt(e)&&!gt(e)?rr({},e):{value:e};function Ode(e,t,n,r){return n!=null?(qt(n)&&!gt(n)||gt(n)&&n.length&&qt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function tu(e,t,n){for(const r in t)Ode(e,r,t[r]);for(const r in n)Ode(e,r,n[r],"update")}function wC(e,t,n){for(const r in t)n&&Zt(n,r)||(e[r]=rr(e[r]||{},t[r]));return e}function NE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const OZ="mark",FZ="frame",MZ="scope",b6t="axis",x6t="axis-domain",w6t="axis-grid",_6t="axis-label",E6t="axis-tick",T6t="axis-title",C6t="legend",S6t="legend-band",A6t="legend-entry",D6t="legend-gradient",mRe="legend-label",k6t="legend-symbol",I6t="legend-title",R6t="title",N6t="title-text",P6t="title-subtitle";function O6t(e,t,n,r,i){const o={},s={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!NE(u,e)&&_j(o,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===FZ?i.group:n===OZ?rr({},i.mark,i[t]):null;for(u in c)l=NE(u,e)||(u==="fill"||u==="stroke")&&(NE("fill",e)||NE("stroke",e)),l||_j(o,u,c[u]);Gt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)NE(h,e)||_j(o,h,d[h])}),e=rr({},e);for(u in o)c=o[u],c.signal?(a=a||{})[u]=c:s[u]=c;return e.enter=rr(s,e.enter),a&&(e.update=rr(a,e.update)),e}function _j(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const gRe=e=>Yt(e)?zt(e):e.signal?`(${e.signal})`:yRe(e);function M$(e){if(e.gradient!=null)return M6t(e);let t=e.signal?`(${e.signal})`:e.color?F6t(e.color):e.field!=null?yRe(e.field):e.value!==void 0?zt(e.value):void 0;return e.scale!=null&&(t=$6t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${qO(e.exponent)})`),e.mult!=null&&(t+=`*${qO(e.mult)}`),e.offset!=null&&(t+=`+${qO(e.offset)}`),e.round&&(t=`round(${t})`),t}const cP=(e,t,n,r)=>`(${e}(${[t,n,r].map(M$).join(",")})+'')`;function F6t(e){return e.c?cP("hcl",e.h,e.c,e.l):e.h||e.s?cP("hsl",e.h,e.s,e.l):e.l||e.a?cP("lab",e.l,e.a,e.b):e.r||e.g||e.b?cP("rgb",e.r,e.g,e.b):null}function M6t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:zt(n));for(;t.length&&Mr(t)==null;)t.pop();return t.unshift(gRe(e.gradient)),`gradient(${t.join(",")})`}function qO(e){return qt(e)?"("+M$(e)+")":e}function yRe(e){return vRe(qt(e)?e:{datum:e})}function vRe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ht("Invalid field reference: "+zt(e));return e.signal||(r=Yt(r)?Im(r).map(zt).join("]["):vRe(r)),t+"["+r+"]"}function $6t(e,t){const n=gRe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+qO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function L6t(e){let t="";return e.forEach(n=>{const r=M$(n);t+=n.test?`(${n.test})?${r}:`:r}),Mr(t)===":"&&(t+="null"),t}function bRe(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=O6t(e,t,n,r,i.config);for(const a in e)s[a]=B6t(e[a],t,o,i);return o}function B6t(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=z6t(j6t(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function j6t(e){return gt(e)?L6t(e):M$(e)}function z6t(e,t,n,r){const i=ym(e,t);return i.$fields.forEach(o=>r[o]=1),rr(n,i.$params),i.$expr}const U6t="outer",V6t=["value","update","init","react","bind"];function Fde(e,t){ht(e+' for "outer" push: '+zt(t))}function xRe(e,t){const n=e.name;if(e.push===U6t)t.signals[n]||Fde("No prior signal definition",n),V6t.forEach(r=>{e[r]!==void 0&&Fde("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function zH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function $$(e,t,n,r){return new zH(e,t,n,r)}function vM(e,t){return $$("operator",e,t)}function _n(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Zk(e,t){return t?{$field:e,$name:t}:{$field:e}}const UH=Zk("key");function Mde(e,t){return{$compare:e,$order:t}}function H6t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const q6t="ascending",W6t="descending";function G6t(e){return qt(e)?(e.order===W6t?"-":"+")+L$(e.op,e.field):""}function L$(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const $Z="scope",VH="view";function qs(e){return e&&e.signal}function Y6t(e){return e&&e.expr}function WO(e){if(qs(e))return!0;if(qt(e)){for(const t in e)if(WO(e[t]))return!0}return!1}function nh(e,t){return e??t}function lx(e){return e&&e.signal||e}const $de="timer";function eI(e,t){return(e.merge?X6t:e.stream?Q6t:e.type?J6t:ht("Invalid stream specification: "+zt(e)))(e,t)}function K6t(e){return e===$Z?VH:e||VH}function X6t(e,t){const n=e.merge.map(i=>eI(i,t)),r=LZ({merge:n},e,t);return t.addStream(r).id}function Q6t(e,t){const n=eI(e.stream,t),r=LZ({stream:n},e,t);return t.addStream(r).id}function J6t(e,t){let n;e.type===$de?(n=t.event($de,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(K6t(e.source),e.type);const r=LZ({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function LZ(e,t,n){let r=t.between;return r&&(r.length!==2&&ht('Stream "between" parameter must have 2 entries: '+zt(t)),e.between=[eI(r[0],n),eI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Z6t(t.marktype,t.markname,t.markrole)),t.source===$Z&&r.push("inScope(event.item)"),r.length&&(e.filter=ym("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Z6t(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const eFt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function tFt(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||ht("Signal update missing events specification."),Yt(o)&&(o=gv(o,t.isSubscope()?$Z:VH)),o=Gt(o).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[rFt(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&ht("Signal encode and update are mutually exclusive."),s="encode(item(),"+zt(r)+")"),i.update=Yt(s)?ym(s,t):s.expr!=null?ym(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:eFt,$params:{$value:t.signalRef(s.signal)}}:ht("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(rr(nFt(u,t),i)))}function nFt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):eI(e,t)}}function rFt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function iFt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ht("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=ym(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>tFt(i,t,n.id))}const Ii=e=>(t,n,r)=>$$(e,n,t||void 0,r),wRe=Ii("aggregate"),oFt=Ii("axisticks"),_Re=Ii("bound"),Vh=Ii("collect"),Lde=Ii("compare"),sFt=Ii("datajoin"),ERe=Ii("encode"),aFt=Ii("expression"),uFt=Ii("facet"),lFt=Ii("field"),cFt=Ii("key"),fFt=Ii("legendentries"),dFt=Ii("load"),hFt=Ii("mark"),pFt=Ii("multiextent"),mFt=Ii("multivalues"),gFt=Ii("overlap"),yFt=Ii("params"),TRe=Ii("prefacet"),vFt=Ii("projection"),bFt=Ii("proxy"),xFt=Ii("relay"),CRe=Ii("render"),wFt=Ii("scale"),_w=Ii("sieve"),_Ft=Ii("sortitems"),SRe=Ii("viewlayout"),EFt=Ii("values");let TFt=0;const ARe={min:"min",max:"max",count:"sum"};function CFt(e,t){const n=e.type||"linear";dDe(n)||ht("Unrecognized scale type: "+zt(n)),t.addScale(e.name,{type:n,domain:void 0})}function SFt(e,t){const n=t.getScale(e.name).params;let r;n.domain=DRe(e.domain,e,t),e.range!=null&&(n.range=IRe(e,t,n)),e.interpolate!=null&&MFt(e.interpolate,n),e.nice!=null&&(n.nice=FFt(e.nice,t)),e.bins!=null&&(n.bins=OFt(e.bins,t));for(r in e)Zt(n,r)||r==="name"||(n[r]=rd(e[r],t))}function rd(e,t){return qt(e)?e.signal?t.signalRef(e.signal):ht("Unsupported object: "+zt(e)):e}function GO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>rd(n,t))}function B$(e){ht("Can not find data set: "+zt(e))}function DRe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ht("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(gt(e)?AFt:e.fields?kFt:DFt)(e,t,n)}function AFt(e,t,n){return e.map(r=>rd(r,n))}function DFt(e,t,n){const r=n.getData(e.data);return r||B$(e.data),tT(t.type)?r.valuesRef(n,e.field,kRe(e.sort,!1)):mDe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function kFt(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=Yt(s)?{data:r,field:s}:gt(s)||s.signal?IFt(s,n):s,o.push(s),o),[]);return(tT(t.type)?RFt:mDe(t.type)?NFt:PFt)(e,n,i)}function IFt(e,t){const n="_:vega:_"+TFt++,r=Vh({});if(gt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+zt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,_w({})]),{data:n,field:"data"}}function RFt(e,t,n){const r=kRe(e.sort,!0);let i,o;const s=n.map(l=>{const c=t.getData(l.data);return c||B$(l.data),c.countsRef(t,l.field,r)}),a={groupby:UH,pulse:s};r&&(i=r.op||"count",o=r.field?L$(i,r.field):"count",a.ops=[ARe[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(wRe(a));const u=t.add(Vh({pulse:_n(i)}));return o=t.add(EFt({field:UH,sort:t.sortRef(r),pulse:_n(u)})),_n(o)}function kRe(e,t){return e&&(!e.field&&!e.op?qt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ht("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!ARe[e.op]&&ht("Multiple domain scales can not be sorted using "+e.op)),e}function NFt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||B$(i.data),o.domainRef(t,i.field)});return _n(t.add(mFt({values:r})))}function PFt(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||B$(i.data),o.extentRef(t,i.field)});return _n(t.add(pFt({extents:r})))}function OFt(e,t){return e.signal||gt(e)?GO(e,t):t.objectProperty(e)}function FFt(e,t){return e.signal?t.signalRef(e.signal):qt(e)?{interval:rd(e.interval),step:rd(e.step)}:rd(e)}function MFt(e,t){t.interpolate=rd(e.type||e),e.gamma!=null&&(t.interpolateGamma=rd(e.gamma))}function IRe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Yt(i)){if(r&&Zt(r,i))return e=rr({},e,{range:r[i]}),IRe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=tT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ht("Unrecognized scale range value: "+zt(i))}else if(i.scheme){n.scheme=gt(i.scheme)?GO(i.scheme,t):rd(i.scheme,t),i.extent&&(n.schemeExtent=GO(i.extent,t)),i.count&&(n.schemeCount=rd(i.count,t));return}else if(i.step){n.rangeStep=rd(i.step,t);return}else{if(tT(e.type)&&!gt(i))return DRe(i,e,t);gt(i)||ht("Unsupported range type: "+zt(i))}return i.map(o=>(gt(o)?GO:rd)(o,t))}function $Ft(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=HH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=HH(n[i],i,t));t.addProjection(e.name,r)}function HH(e,t,n){return gt(e)?e.map(r=>HH(r,t,n)):qt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ht("Unsupported parameter object: "+zt(e)):e}const Hh="top",_C="left",EC="right",B1="bottom",RRe="center",LFt="vertical",BFt="start",jFt="middle",zFt="end",qH="index",BZ="label",UFt="offset",aT="perc",VFt="perc2",sd="value",kR="guide-label",jZ="guide-title",HFt="group-title",qFt="group-subtitle",Bde="symbol",YO="gradient",WH="discrete",GH="size",WFt="shape",GFt="fill",YFt="stroke",KFt="strokeWidth",XFt="strokeDash",QFt="opacity",zZ=[GH,WFt,GFt,YFt,KFt,XFt,QFt],IR={name:1,style:1,interactive:1},qr={value:0},ad={value:1},j$="group",NRe="rect",UZ="rule",JFt="symbol",Ew="text";function tI(e){return e.type=j$,e.interactive=e.interactive||!1,e}function Cc(e,t){const n=(r,i)=>nh(e[r],nh(t[r],i));return n.isVertical=r=>LFt===nh(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>nh(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>nh(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>nh(e.columns,nh(t.columns,+n.isVertical(!0))),n}function PRe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function ZFt(e,t,n){const r=t.config.style[n];return r&&r[e]}function z$(e,t,n){return`item.anchor === '${BFt}' ? ${e} : item.anchor === '${zFt}' ? ${t} : ${n}`}const VZ=z$(zt(_C),zt(EC),zt(RRe));function eMt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},qt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function ORe(e,t){return t?e?qt(e)?Object.assign({},e,{offset:ORe(e.offset,t)}):{value:e,offset:t}:t:e}function Tf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=wC(e.encode,t,IR)):e.interactive=!1,e}function tMt(e,t,n,r){const i=Cc(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=s,d=a):(l=[0,0],c=[1,0],f=a,d=s);const h={enter:u={opacity:qr,x:qr,y:qr,width:pa(f),height:pa(d)},update:rr({},u,{opacity:ad,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:qr}};return tu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Tf({type:NRe,role:D6t,encode:h},r)}function nMt(e,t,n,r,i){const o=Cc(e,n),s=o.isVertical(),a=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";s?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const m={opacity:qr,fill:{scale:t,field:sd}};m[l]={signal:h+"datum."+aT,mult:u},m[c]=qr,m[f]={signal:h+"datum."+VFt,mult:u},m[d]=pa(a);const p={enter:m,update:rr({},m,{opacity:ad}),exit:{opacity:qr}};return tu(p,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),Tf({type:NRe,role:S6t,key:sd,from:i,encode:p},r)}const rMt=`datum.${aT}<=0?"${_C}":datum.${aT}>=1?"${EC}":"${RRe}"`,iMt=`datum.${aT}<=0?"${B1}":datum.${aT}>=1?"${Hh}":"${jFt}"`;function jde(e,t,n,r){const i=Cc(e,t),o=i.isVertical(),s=pa(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const m={enter:l={opacity:qr},update:c={opacity:ad,text:{field:BZ}},exit:{opacity:qr}};return tu(m,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:nh(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=c.baseline={signal:iMt},f="y",d="x",h="1-"):(l.align=c.align={signal:rMt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+aT,mult:a},l[d]=c[d]=s,s.offset=nh(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+qH}:void 0,Tf({type:Ew,role:mRe,style:kR,key:sd,from:r,encode:m,overlap:u},n)}function oMt(e,t,n,r,i){const o=Cc(e,t),s=n.entries,a=!!(s&&s.interactive),u=s?s.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${UFt} : datum.${GH}`,h=l?pa(l):{field:GH},m=`datum.${qH}`,p=`max(1, ${i})`;let g,v,b,w,E;h.mult=.5,g={enter:v={opacity:qr,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:ad,x:v.x,y:v.y},exit:{opacity:qr}};let T=null,C=null;e.fill||(T=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),tu(g,{fill:o("symbolFillColor",T),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",C),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),zZ.forEach(P=>{e[P]&&(b[P]=v[P]={scale:e[P],field:sd})});const S=Tf({type:JFt,role:k6t,key:sd,from:f,clip:l?!0:void 0,encode:g},n.symbols),I=pa(c);I.offset=o("labelOffset"),g={enter:v={opacity:qr,x:{signal:d,offset:I},y:h},update:b={opacity:ad,text:{field:BZ},x:v.x,y:v.y},exit:{opacity:qr}},tu(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const R=Tf({type:Ew,role:mRe,style:kR,key:sd,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:qr,height:l?pa(l):qr,opacity:qr},exit:{opacity:qr},update:b={opacity:ad,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(w=`ceil(item.mark.items.length / ${p})`,b.row.signal=`${m}%${w}`,b.column.signal=`floor(${m} / ${w})`,E={field:["row",m]}):(b.row.signal=`floor(${m} / ${p})`,b.column.signal=`${m} % ${p}`,E={field:m}),b.column.signal=`(${i})?${b.column.signal}:${m}`,r={facet:{data:r,name:"value",groupby:qH}},tI({role:MZ,from:r,encode:wC(g,s,IR),marks:[S,R],name:u,interactive:a,sort:E})}function sMt(e,t){const n=Cc(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const HZ='item.orient === "left"',qZ='item.orient === "right"',U$=`(${HZ} || ${qZ})`,aMt=`datum.vgrad && ${U$}`,uMt=z$('"top"','"bottom"','"middle"'),lMt=z$('"right"','"left"','"center"'),cMt=`datum.vgrad && ${qZ} ? (${lMt}) : (${U$} && !(datum.vgrad && ${HZ})) ? "left" : ${VZ}`,fMt=`item._anchor || (${U$} ? "middle" : "start")`,dMt=`${aMt} ? (${HZ} ? -90 : 90) : 0`,hMt=`${U$} ? (datum.vgrad ? (${qZ} ? "bottom" : "top") : ${uMt}) : "top"`;function pMt(e,t,n,r){const i=Cc(e,t),o={enter:{opacity:qr},update:{opacity:ad,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:qr}};return tu(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:fMt},angle:{signal:dMt},align:{signal:cMt},baseline:{signal:hMt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Tf({type:Ew,role:I6t,style:jZ,from:r,encode:o},n)}function mMt(e,t){let n;return qt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+zde(e.path)+")":e.sphere&&(n="geoShape("+zde(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function zde(e){return qt(e)&&e.signal?e.signal:zt(e)}function FRe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===j$?MZ:t||OZ}function gMt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||FRe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function yMt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function WZ(e,t){const n=bAe(e.type);n||ht("Unrecognized transform type: "+zt(e.type));const r=$$(n.type.toLowerCase(),null,MRe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function MRe(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=vMt(s,t,n)}return r}function vMt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return bMt(e,t,n);if(i===void 0){e.required&&ht("Missing required "+zt(t.type)+" parameter: "+zt(e.name));return}else{if(r==="param")return xMt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!qs(i)?i.map(o=>Ude(e,o,n)):Ude(e,i,n)}function Ude(e,t,n){const r=e.type;if(qs(t))return Hde(r)?ht("Expression references can not be signals."):Ej(r)?n.fieldRef(t):qde(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Ej(r);return i&&wMt(t)?n.exprRef(t.expr,t.as):i&&_Mt(t)?Zk(t.field,t.as):Hde(r)?ym(t,n):EMt(r)?_n(n.getData(t).values):Ej(r)?Zk(t):qde(r)?n.compareRef(t):t}}function bMt(e,t,n){return Yt(t.from)||ht('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function xMt(e,t,n){const r=t[e.name];return e.array?(gt(r)||ht("Expected an array of sub-parameters. Instead: "+zt(r)),r.map(i=>Vde(e,i,n))):Vde(e,r,n)}function Vde(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ht("Unsupported parameter: "+zt(t));const o=rr(MRe(i,t,n),i.key);return _n(n.add(yFt(o)))}const wMt=e=>e&&e.expr,_Mt=e=>e&&e.field,EMt=e=>e==="data",Hde=e=>e==="expr",Ej=e=>e==="field",qde=e=>e==="compare";function TMt(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||ht("Only group marks can be faceted."),r.field!=null?s=a=KO(r,n):(e.data?a=_n(n.getData(e.data).aggregate):(o=WZ(rr({type:"aggregate",groupby:Gt(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=KO(r,n),s=a=_n(n.add(o))),i=n.keyRef(r.groupby,!0))):s=_n(n.add(Vh(null,[{}]))),s||(s=KO(e,n)),{key:i,pulse:s,parent:a}}function KO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:_n(t.getData(e.data).output)}function Nx(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Nx.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=_n(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new Nx(e,o,i,r,s)};function $Re(e){return Yt(e)?e:null}function Wde(e,t,n){const r=L$(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function yA(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),u=G6t(o);let l=$Re(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=o?{field:UH,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:_n(t.output)};u&&(d.sort=e.sortRef(o)),f=e.add($$(r,void 0,d)),s&&(t.index[i]=f),c=_n(f),l!=null&&(a[l]=c)}return c}Nx.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=$Re(t);let s,a,u;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&Wde(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:_n(r.output)},n&&n.field&&Wde(e,u,n),a=e.add(wRe(u)),s=e.add(Vh({pulse:_n(a)})),s={agg:a,ref:_n(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return _n(this.values)},extentRef(e,t){return yA(e,this,"extent","extent",t,!1)},domainRef(e,t){return yA(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return yA(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return yA(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return yA(e,this,"indata","tupleindex",t,!0,!0)}};function CMt(e,t,n){const r=e.from.facet,i=r.name,o=KO(r,t);let s;r.name||ht("Facet must have a name: "+zt(r)),r.data||ht("Facet must reference a data set: "+zt(r)),r.field?s=t.add(TRe({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(uFt({key:t.keyRef(r.groupby),group:_n(t.proxy(n.parent)),pulse:o})):ht("Facet must specify groupby or field: "+zt(r));const a=t.fork(),u=a.add(Vh()),l=a.add(_w({pulse:_n(u)}));a.addData(i,new Nx(a,u,u,l)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function SMt(e,t,n){const r=t.add(TRe({pulse:n.pulse})),i=t.fork();i.add(_w()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function LRe(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,u=t.add(vM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(f=>f??"null").join(",")+"),0)",c=ym(l,t);u.update=c.$expr,u.params=c.$params}function V$(e,t){const n=FRe(e),r=e.type===j$,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===MZ||n===FZ,a,u,l,c,f,d,h;const m=n===OZ||s||i,p=TMt(e.from,r,t);u=t.add(sFt({key:p.key||(e.key?Zk(e.key):void 0),pulse:p.pulse,clean:!r}));const g=_n(u);u=l=t.add(Vh({pulse:g})),u=t.add(hFt({markdef:gMt(e),interactive:yMt(e.interactive,t),clip:mMt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:_n(u)}));const v=_n(u);u=c=t.add(ERe(bRe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const S=WZ(C,t),I=S.metadata;(I.generates||I.changes)&&ht("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),S.params.pulse=_n(u),t.add(u=S)}),e.sort&&(u=t.add(_Ft({sort:t.compareRef(e.sort),pulse:_n(u)})));const b=_n(u);(i||s)&&(s=t.add(SRe({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:b})),d=_n(s));const w=t.add(_Re({mark:v,pulse:d||b}));h=_n(w),r&&(m&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(b,d||h,g),i?CMt(e,t,p):m?SMt(e,t,p):t.parse(e),t.popState(),m&&(s&&a.push(s),a.push(w))),o&&(h=AMt(o,h,t));const E=t.add(CRe({pulse:h})),T=t.add(_w({pulse:_n(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Nx(t,l,E,T)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&ht("Marks only support modify triggers."),LRe(C,t,f)}))}function AMt(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:qs(o)?n.signalRef(o.signal):o,method:qs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=qs(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return _n(n.add(gFt(s)))}function DMt(e,t){const n=t.config.legend,r=e.encode||{},i=Cc(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,u=o.style,l={};let c=0,f,d,h;zZ.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||ht("Missing valid scale for legend.");const m=kMt(e,t.scaleType(c)),p={title:e.title!=null,scales:l,type:m,vgrad:m!=="symbol"&&i.isVertical()},g=_n(t.add(Vh(null,[p]))),v={enter:{x:{value:0},y:{value:0}}},b=_n(t.add(fFt(d={type:m,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return m===YO?(h=[tMt(e,c,n,r.gradient),jde(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${lx(i.gradientLength())})/100))`)):m===WH?h=[nMt(e,c,n,r.gradient,b),jde(e,n,r.labels,b)]:(f=sMt(e,n),h=[oMt(e,n,r,b,lx(f.columns))],d.size=NMt(e,t,h[0].marks)),h=[tI({role:A6t,from:g,encode:v,marks:h,layout:f,interactive:a})],p.title&&h.push(pMt(e,n,r.title,g)),V$(tI({role:C6t,from:g,encode:wC(RMt(i,e,n),o,IR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:u}),t)}function kMt(e,t){let n=e.type||Bde;return!e.type&&IMt(e)===1&&(e.fill||e.stroke)&&(n=rJ(t)?YO:uH(t)?WH:Bde),n!==YO?n:uH(t)?WH:YO}function IMt(e){return zZ.reduce((t,n)=>t+(e[n]?1:0),0)}function RMt(e,t,n){const r={enter:{},update:{}};return tu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function NMt(e,t,n){const r=lx(Gde("size",e,n)),i=lx(Gde("strokeWidth",e,n)),o=lx(PMt(n[1].encode,t,kR));return ym(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function Gde(e,t,n){return t[e]?`scale("${t[e]}",datum)`:PRe(e,n[0].encode)}function PMt(e,t,n){return PRe("fontSize",e)||ZFt("fontSize",t,n)}const OMt=`item.orient==="${_C}"?-90:item.orient==="${EC}"?90:0`;function FMt(e,t){e=Yt(e)?{text:e}:e;const n=Cc(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,u=[],l={},c=_n(t.add(Vh(null,[l])));return u.push(LMt(e,n,MMt(e),c)),e.subtitle&&u.push(BMt(e,n,r.subtitle,c)),V$(tI({role:R6t,from:c,encode:$Mt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function MMt(e){const t=e.encode;return t&&t.title||rr({name:e.name,interactive:e.interactive,style:e.style},t)}function $Mt(e,t){const n={enter:{},update:{}};return tu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:VZ},angle:{signal:OMt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),wC(n,t,IR)}function LMt(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return tu(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Tf({type:Ew,role:N6t,style:HFt,from:r,encode:s},n)}function BMt(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return tu(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Tf({type:Ew,role:P6t,style:qFt,from:r,encode:s},n)}function jMt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(WZ(r,t))}),e.on&&e.on.forEach(r=>{LRe(r,t,e.name)}),t.addDataPipeline(e.name,zMt(e,t,n))}function zMt(e,t,n){const r=[];let i=null,o=!1,s=!1,a,u,l,c,f;for(e.values?qs(e.values)||WO(e.format)?(r.push(Yde(t,e)),r.push(i=mb())):r.push(i=mb({$ingest:e.values,$format:e.format})):e.url?WO(e.url)||WO(e.format)?(r.push(Yde(t,e)),r.push(i=mb())):r.push(i=mb({$request:e.url,$format:e.format})):e.source&&(i=a=Gt(e.source).map(d=>_n(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=mb()),r.push(c),f.generates&&(s=!0),f.modifies&&!s&&(o=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=xFt({derive:o,pulse:l?a:a[0]}),(o||l)&&r.splice(1,0,mb())),i||r.push(mb()),r.push(_w({})),r}function mb(e){const t=Vh({},e);return t.metadata={source:!0},t}function Yde(e,t){return dFt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const BRe=e=>e===B1||e===Hh,H$=(e,t,n)=>qs(e)?qMt(e.signal,t,n):e===_C||e===Hh?t:n,ma=(e,t,n)=>qs(e)?VMt(e.signal,t,n):BRe(e)?t:n,Eh=(e,t,n)=>qs(e)?HMt(e.signal,t,n):BRe(e)?n:t,jRe=(e,t,n)=>qs(e)?WMt(e.signal,t,n):e===Hh?{value:t}:{value:n},UMt=(e,t,n)=>qs(e)?GMt(e.signal,t,n):e===EC?{value:t}:{value:n},VMt=(e,t,n)=>zRe(`${e} === '${Hh}' || ${e} === '${B1}'`,t,n),HMt=(e,t,n)=>zRe(`${e} !== '${Hh}' && ${e} !== '${B1}'`,t,n),qMt=(e,t,n)=>GZ(`${e} === '${_C}' || ${e} === '${Hh}'`,t,n),WMt=(e,t,n)=>GZ(`${e} === '${Hh}'`,t,n),GMt=(e,t,n)=>GZ(`${e} === '${EC}'`,t,n),zRe=(e,t,n)=>(t=t!=null?pa(t):t,n=n!=null?pa(n):n,Kde(t)&&Kde(n)?(t=t?t.signal||zt(t.value):null,n=n?n.signal||zt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[rr({test:e},t)].concat(n||[])),Kde=e=>e==null||Object.keys(e).length===1,GZ=(e,t,n)=>({signal:`${e} ? (${qE(t)}) : (${qE(n)})`}),YMt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${_C}' ? (${qE(r)}) : `:"")+(n!=null?`${e} === '${B1}' ? (${qE(n)}) : `:"")+(i!=null?`${e} === '${EC}' ? (${qE(i)}) : `:"")+(t!=null?`${e} === '${Hh}' ? (${qE(t)}) : `:"")+"(null)"}),qE=e=>qs(e)?e.signal:e==null?null:zt(e),KMt=(e,t)=>t===0?0:qs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},u2=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function hE(e,t,n,r){let i;if(t&&Zt(t,e))return t[e];if(Zt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[jZ][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[kR][i]}return null}function Xde(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function XMt(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,u,l;if(qs(s)){const f=Xde([n.axisX,n.axisY]),d=Xde([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ma(s,hE(l,n.axisX,i,r),hE(l,n.axisY,i,r));u={};for(l of d)u[l]=YMt(s.signal,hE(l,n.axisTop,i,r),hE(l,n.axisBottom,i,r),hE(l,n.axisLeft,i,r),hE(l,n.axisRight,i,r))}else a=s===Hh||s===B1?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||u||o?rr({},i,a,u,o):i}function QMt(e,t,n,r){const i=Cc(e,t),o=e.orient;let s,a;const u={enter:s={opacity:qr},update:a={opacity:ad},exit:{opacity:qr}};tu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Qde(e,0),c=Qde(e,1);return s.x=a.x=ma(o,l,qr),s.x2=a.x2=ma(o,c),s.y=a.y=Eh(o,l,qr),s.y2=a.y2=Eh(o,c),Tf({type:UZ,role:x6t,from:r,encode:u},n)}function Qde(e,t){return{scale:e.scale,range:t}}function JMt(e,t,n,r,i){const o=Cc(e,t),s=e.orient,a=e.gridScale,u=H$(s,1,-1),l=ZMt(e.offset,u);let c,f,d;const h={enter:c={opacity:qr},update:d={opacity:ad},exit:f={opacity:qr}};tu(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const m={scale:e.scale,field:sd,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},p=ma(s,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},v=a?{scale:a,range:1,mult:u,offset:l}:rr(p,{mult:u,offset:l});return c.x=d.x=ma(s,m,g),c.y=d.y=Eh(s,m,g),c.x2=d.x2=Eh(s,v),c.y2=d.y2=ma(s,v),f.x=ma(s,m),f.y=Eh(s,m),Tf({type:UZ,role:w6t,key:sd,from:r,encode:h},n)}function ZMt(e,t){if(t!==1)if(!qt(e))e=qs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=rr({},e);for(;n.mult!=null;)if(qt(n.mult))n=n.mult=rr({},n.mult);else return n.mult=qs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function e5t(e,t,n,r,i,o){const s=Cc(e,t),a=e.orient,u=H$(a,-1,1);let l,c,f;const d={enter:l={opacity:qr},update:f={opacity:ad},exit:c={opacity:qr}};tu(d,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const h=pa(i);h.mult=u;const m={scale:e.scale,field:sd,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return f.y=l.y=ma(a,qr,m),f.y2=l.y2=ma(a,h),c.x=ma(a,m),f.x=l.x=Eh(a,qr,m),f.x2=l.x2=Eh(a,h),c.y=Eh(a,m),Tf({type:UZ,role:E6t,key:sd,from:r,encode:d},n)}function Tj(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function t5t(e,t,n,r,i,o){const s=Cc(e,t),a=e.orient,u=e.scale,l=H$(a,-1,1),c=lx(s("labelFlush")),f=lx(s("labelFlushOffset")),d=s("labelAlign"),h=s("labelBaseline");let m=c===0||!!c,p;const g=pa(i);g.mult=l,g.offset=pa(s("labelPadding")||0),g.offset.mult=l;const v={scale:u,field:sd,band:.5,offset:ORe(o.offset,s("labelOffset"))},b=ma(a,m?Tj(u,c,'"left"','"right"','"center"'):{value:"center"},UMt(a,"left","right")),w=ma(a,jRe(a,"bottom","top"),m?Tj(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=Tj(u,c,`-(${f})`,f,0);m=m&&f;const T={opacity:qr,x:ma(a,v,g),y:Eh(a,v,g)},C={enter:T,update:p={opacity:ad,text:{field:BZ},x:T.x,y:T.y,align:b,baseline:w},exit:{opacity:qr,x:T.x,y:T.y}};tu(C,{dx:!d&&m?ma(a,E):null,dy:!h&&m?Eh(a,E):null}),tu(C,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:d,baseline:h});const S=s("labelBound");let I=s("labelOverlap");return I=I||S?{separation:s("labelSeparation"),method:I,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,p.align!==b&&(p.align=u2(p.align,b)),p.baseline!==w&&(p.baseline=u2(p.baseline,w)),Tf({type:Ew,role:_6t,style:kR,key:sd,from:r,encode:C,overlap:I},n)}function n5t(e,t,n,r){const i=Cc(e,t),o=e.orient,s=H$(o,-1,1);let a,u;const l={enter:a={opacity:qr,anchor:pa(i("titleAnchor",null)),align:{signal:VZ}},update:u=rr({},a,{opacity:ad,text:pa(e.title)}),exit:{opacity:qr}},c={signal:`lerp(range("${e.scale}"), ${z$(0,1,.5)})`};return u.x=ma(o,c),u.y=Eh(o,c),a.angle=ma(o,qr,KMt(s,90)),a.baseline=ma(o,jRe(o,B1,Hh),{value:B1}),u.angle=a.angle,u.baseline=a.baseline,tu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),r5t(i,o,l,n),l.update.align=u2(l.update.align,a.align),l.update.angle=u2(l.update.angle,a.angle),l.update.baseline=u2(l.update.baseline,a.baseline),Tf({type:Ew,role:T6t,style:jZ,from:r,encode:l},n)}function r5t(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=u2(pa(a),n.update[u]),!1):!NE(u,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?pa(s):ma(t,pa(s),pa(o))}function i5t(e,t){const n=XMt(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,u=Cc(e,n),l=eMt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=_n(t.add(Vh({},[c]))),d=_n(t.add(oFt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let m;return c.grid&&h.push(JMt(e,n,r.grid,d,l)),c.ticks&&(m=u("tickSize"),h.push(e5t(e,n,r.ticks,d,m,l))),c.labels&&(m=c.ticks?m:0,h.push(t5t(e,n,r.labels,d,m,l))),c.domain&&h.push(QMt(e,n,r.domain,f)),c.title&&h.push(n5t(e,n,r.title,f)),V$(tI({role:b6t,from:f,encode:wC(o5t(u,e),i,IR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:s,style:a}),t)}function o5t(e,t){const n={enter:{},update:{}};return tu(n,{orient:e("orient"),offset:e("offset")||0,position:nh(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function URe(e,t,n){const r=Gt(e.signals),i=Gt(e.scales);return n||r.forEach(o=>xRe(o,t)),Gt(e.projections).forEach(o=>$Ft(o,t)),i.forEach(o=>CFt(o,t)),Gt(e.data).forEach(o=>jMt(o,t)),i.forEach(o=>SFt(o,t)),(n||r).forEach(o=>iFt(o,t)),Gt(e.axes).forEach(o=>i5t(o,t)),Gt(e.marks).forEach(o=>V$(o,t)),Gt(e.legends).forEach(o=>DMt(o,t)),e.title&&FMt(e.title,t),t.parseLambdas(),t}const s5t=e=>wC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function a5t(e,t){const n=t.config,r=_n(t.root=t.add(vM())),i=u5t(e,n);i.forEach(l=>xRe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Vh()),s=t.add(ERe(bRe(s5t(e.encode),j$,FZ,e.style,t,{pulse:_n(o)}))),a=t.add(SRe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:_n(s)}));t.operators.pop(),t.pushState(_n(s),_n(a),null),URe(e,t,i),t.operators.push(a);let u=t.add(_Re({mark:r,pulse:_n(a)}));return u=t.add(CRe({pulse:_n(u)})),u=t.add(_w({pulse:_n(u)})),t.addData("root",new Nx(t,o,o,u)),t}function vA(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function u5t(e,t){const n=s=>nh(e[s],t[s]),r=[vA("background",n("background")),vA("autosize",g6t(n("autosize"))),vA("padding",v6t(n("padding"))),vA("width",n("width")||0),vA("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return Gt(e.signals).forEach(s=>{Zt(i,s.name)?s=rr(i[s.name],s):r.push(s),o[s.name]=s}),Gt(t.signals).forEach(s=>{!Zt(o,s.name)&&!Zt(i,s.name)&&r.push(s)}),r}function VRe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Jde(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}VRe.prototype=Jde.prototype={parse(e){return URe(e,this)},fork(){return new Jde(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof zH?_n(e):e;return this.add(bFt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(_n(this.add(_w({pulse:e})))),this._parent.push(t),this._lookup.push(n?_n(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Mr(this._parent)},encode(){return Mr(this._encode)},lookup(){return Mr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Yt(e))return Zk(e,t);e.signal||ht("Unsupported field reference: "+zt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=_n(this.add(lFt(i)))}return r},compareRef(e){let t=!1;const n=o=>qs(o)?(t=!0,this.signalRef(o.signal)):Y6t(o)?(t=!0,this.exprRef(o.expr)):o,r=Gt(e.field).map(n),i=Gt(e.order).map(n);return t?_n(this.add(Lde({fields:r,orders:i}))):Mde(r,i)},keyRef(e,t){let n=!1;const r=o=>qs(o)?(n=!0,_n(i[o.signal])):o,i=this.signals;return e=Gt(e).map(r),n?_n(this.add(cFt({fields:e,flat:t}))):H6t(e,t)},sortRef(e){if(!e)return e;const t=L$(e.op,e.field),n=e.order||q6t;return n.signal?_n(this.add(Lde({fields:t,orders:this.signalRef(n.signal)}))):Mde(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Zt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ht("Duplicate signal name: "+zt(e));const n=t instanceof zH?t:this.add(vM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ht("Unrecognized signal name: "+zt(e)),this.signals[e]},signalRef(e){return this.signals[e]?_n(this.signals[e]):(Zt(this.lambdas,e)||(this.lambdas[e]=this.add(vM(null))),_n(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=ym(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!qt(e)?e:this.signalRef(e.signal||YZ(e))},exprRef(e,t){const n={expr:ym(e,this)};return t&&(n.expr.$name=t),_n(this.add(aFt(n)))},addBinding(e,t){this.bindings||ht("Nested signals do not support binding: "+zt(e)),this.bindings.push(rr({signal:e},t))},addScaleProj(e,t){Zt(this.scales,e)&&ht("Duplicate scale or projection name: "+zt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,wFt(t))},addProjection(e,t){this.addScaleProj(e,vFt(t))},getScale(e){return this.scales[e]||ht("Unrecognized scale name: "+zt(e)),this.scales[e]},scaleRef(e){return _n(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Zt(this.data,e)&&ht("Duplicate data set name: "+zt(e)),this.data[e]=t},getData(e){return this.data[e]||ht("Undefined data set name: "+zt(e)),this.data[e]},addDataPipeline(e,t){return Zt(this.data,e)&&ht("Duplicate data set name: "+zt(e)),this.addData(e,Nx.fromEntries(this,t))}};function YZ(e){return(gt(e)?l5t:c5t)(e)}function l5t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(qt(i)?i.signal||YZ(i):zt(i))}return n+"]"}function c5t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+zt(r)+":"+(qt(i)?i.signal||YZ(i):zt(i));return t+"}"}function f5t(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function d5t(e,t,n){return qt(e)||ht("Input Vega specification must be an object."),t=hC(f5t(),t,e.config),a5t(e,new VRe(t,n)).toRuntime()}var h5t="5.30.0";rr(J2,nAt,HIt,_Rt,ZRt,sNt,PNt,dNt,FNt,BNt,KNt,n3t);const p5t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ss,CanvasHandler:TR,CanvasRenderer:sM,DATE:vc,DAY:Iu,DAYOFYEAR:gm,Dataflow:a2,Debug:hSe,Error:UX,EventStream:s$,Gradient:IDe,GroupItem:b$,HOURS:wf,Handler:DJ,HybridHandler:wke,HybridRenderer:bH,Info:dSe,Item:v$,MILLISECONDS:Rh,MINUTES:_f,MONTH:$u,Marks:Ef,MultiPulse:uQ,None:fSe,Operator:$i,Parameters:o$,Pulse:h1,QUARTER:yc,RenderType:e1,Renderer:ER,ResourceLoader:$De,SECONDS:dd,SVGHandler:uke,SVGRenderer:OJ,SVGStringRenderer:xke,Scenegraph:eke,TIME_UNITS:eQ,Transform:st,View:aRe,WEEK:js,Warn:VX,YEAR:Qa,accessor:Tc,accessorFields:Mu,accessorName:Ho,array:Gt,ascending:Z8,bandwidthNRD:dQ,bin:_Ae,bootstrapCI:EAe,boundClip:Rke,boundContext:bR,boundItem:pH,boundMark:XDe,boundStroke:Og,changeset:bw,clampRange:TSe,codegenExpression:PIe,compare:YX,constant:Hu,cumulativeLogNormal:vQ,cumulativeNormal:u$,cumulativeUniform:_Q,dayofyear:MSe,debounce:KX,defaultLocale:rQ,definition:bAe,densityLogNormal:yQ,densityNormal:hQ,densityUniform:wQ,domChild:Ls,domClear:Zf,domCreate:Jy,domFind:AJ,dotbin:TAe,error:ht,expressionFunction:ds,extend:rr,extent:mm,extentIndex:CSe,falsy:Iy,fastmap:mC,field:cd,flush:SSe,font:T$,fontFamily:_R,fontSize:Rm,format:IO,formatLocale:GF,formats:sQ,hasOwnProperty:Zt,id:aR,identity:Vu,inferType:uAe,inferTypes:lAe,ingest:ai,inherits:Vt,inrange:UE,interpolate:iJ,interpolateColors:g$,interpolateRange:gDe,intersect:Ake,intersectBoxLine:VE,intersectPath:dJ,intersectPoint:hJ,intersectRule:BDe,isArray:gt,isBoolean:pv,isDate:d1,isFunction:ir,isIterable:ASe,isNumber:ti,isObject:qt,isRegExp:DSe,isString:Yt,isTuple:r$,key:XX,lerp:kSe,lineHeight:M1,loader:t$,locale:sAe,logger:HX,lruCache:ISe,markup:PJ,merge:RSe,mergeConfig:hC,multiLineOffset:TJ,one:dC,pad:NSe,panLinear:vSe,panLog:bSe,panPow:xSe,panSymlog:wSe,parse:d5t,parseExpression:wZ,parseSelector:gv,path:T8,pathCurves:lJ,pathEqual:Nke,pathParse:nT,pathRectangle:PDe,pathRender:qk,pathSymbols:NDe,pathTrail:ODe,peek:Mr,point:S$,projection:WJ,quantileLogNormal:bQ,quantileNormal:l$,quantileUniform:EQ,quantiles:cQ,quantizeInterpolator:yDe,quarter:_Se,quartiles:fQ,get random(){return hd},randomInteger:sSt,randomKDE:mQ,randomLCG:oSt,randomLogNormal:SAe,randomMixture:AAe,randomNormal:pQ,randomUniform:DAe,read:dAe,regressionConstant:TQ,regressionExp:IAe,regressionLinear:CQ,regressionLoess:PAe,regressionLog:kAe,regressionPoly:NAe,regressionPow:RAe,regressionQuad:SQ,renderModule:A$,repeat:tD,resetDefaultLocale:nCt,resetSVGClipId:MDe,resetSVGDefIds:uIt,responseType:fAe,runtimeContext:YIe,sampleCurve:f$,sampleLogNormal:gQ,sampleNormal:a$,sampleUniform:xQ,scale:ni,sceneEqual:FJ,sceneFromJSON:JDe,scenePickVisit:JF,sceneToJSON:QDe,sceneVisit:Nh,sceneZOrder:pJ,scheme:oJ,serializeXML:gke,setHybridRendererOptions:iIt,setRandom:rSt,span:uR,splitAccessPath:Im,stringValue:zt,textMetrics:hf,timeBin:ZSe,timeFloor:VSe,timeFormatLocale:Uk,timeInterval:gC,timeOffset:WSe,timeSequence:KSe,timeUnitSpecifier:FSe,timeUnits:tQ,toBoolean:QX,toDate:JX,toNumber:Nu,toSet:Ih,toString:ZX,transform:xAe,transforms:J2,truncate:PSe,truthy:fd,tupleid:En,typeParsers:oH,utcFloor:HSe,utcInterval:yC,utcOffset:GSe,utcSequence:XSe,utcdayofyear:BSe,utcquarter:ESe,utcweek:jSe,version:h5t,visitArray:My,week:$Se,writeConfig:pC,zero:Wy,zoomLinear:qX,zoomLog:WX,zoomPow:WF,zoomSymlog:GX},Symbol.toStringTag,{value:"Module"}));function m5t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var g5t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},y5t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},v5t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const b5t=Array.prototype.slice,gb=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,b5t.call(t,1))},x5t=(e,t,n,r,i,o,s)=>new Date(e,t||0,n??1,r||0,i||0,o||0,s||0);var w5t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:x5t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return gb("join",arguments)},indexof:function(){return gb("indexOf",arguments)},lastindexof:function(){return gb("lastIndexOf",arguments)},slice:function(){return gb("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return gb("substring",arguments,String)},split:function(){return gb("split",arguments,String)},replace:function(){return gb("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const _5t=["view","item","group","xy","x","y"],YH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&YH.add(setImmediate);const E5t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:g5t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),YH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||w5t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>y5t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>v5t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,YH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function bA(e,t,n,r,i,o){const s=a=>E5t[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,_5t.forEach(a=>s.fn[a]=function(){return i.vega[a](...arguments)}),s(e)}var T5t={operator(e,t){const n=t.ast,r=e.functions;return i=>bA(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>bA(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>bA(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return bA(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const u=s.datum;let l=0,c;for(const f in r)c=bA(r[f].ast,i,a,u,void 0,s),s[f]!==c&&(s[f]=c,l=1);return n!=="rule"&&m5t(s,r,o),l}}};const C5t="vega-lite",S5t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',A5t="5.23.0",D5t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],k5t="https://vega.github.io/vega-lite/",I5t="Vega-Lite is a concise high-level language for interactive visualization.",R5t=["vega","chart","visualization"],N5t="build/vega-lite.js",P5t="build/vega-lite.min.js",O5t="build/vega-lite.min.js",F5t="build/src/index",M5t="build/src/index.d.ts",$5t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},L5t=["bin","build","src","vega-lite*","tsconfig.json"],B5t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},j5t={type:"git",url:"https://github.com/vega/vega-lite.git"},z5t="BSD-3-Clause",U5t={url:"https://github.com/vega/vega-lite/issues"},V5t={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},H5t={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},q5t={vega:"^5.24.0"},W5t={node:">=18"},G5t="yarn@1.22.22",Y5t={name:C5t,author:S5t,version:A5t,collaborators:D5t,homepage:k5t,description:I5t,keywords:R5t,main:N5t,unpkg:P5t,jsdelivr:O5t,module:F5t,types:M5t,bin:$5t,files:L5t,scripts:B5t,repository:j5t,license:z5t,bugs:U5t,devDependencies:V5t,dependencies:H5t,peerDependencies:q5t,engines:W5t,packageManager:G5t};function KZ(e){return Pt(e,"or")}function XZ(e){return Pt(e,"and")}function QZ(e){return Pt(e,"not")}function XO(e,t){if(QZ(e))XO(e.not,t);else if(XZ(e))for(const n of e.and)XO(n,t);else if(KZ(e))for(const n of e.or)XO(n,t);else t(e)}function l2(e,t){return QZ(e)?{not:l2(e.not,t)}:XZ(e)?{and:e.and.map(n=>l2(n,t))}:KZ(e)?{or:e.or.map(n=>l2(n,t))}:t(e)}const Vn=structuredClone;function HRe(e){throw new Error(e)}function uT(e,t){const n={};for(const r of t)Zt(e,r)&&(n[r]=e[r]);return n}function dc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Di(e)).join(",")})`};function Ar(e){if(ti(e))return e;const t=Yt(e)?e:Di(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function KH(e){return e===!1||e===null}function yr(e,t){return e.includes(t)}function lT(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function JZ(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function qRe(e,...t){for(const n of t)K5t(e,n??{});return e}function K5t(e,t){for(const n of It(t))pC(e,n,t[n],!0)}function jp(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function X5t(e,t){const n=It(e),r=It(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function WRe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ZZ(e,t){for(const n of e)if(t.has(n))return!0;return!1}function XH(e){const t=new Set;for(const n of e){const i=Im(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function eee(e,t){return e===void 0||t===void 0?!0:ZZ(XH(e),XH(t))}function Ai(e){return It(e).length===0}const It=Object.keys,Ja=Object.values,j1=Object.entries;function nI(e){return e===!0||e===!1}function co(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function XD(e,t){return QZ(e)?`!(${XD(e.not,t)})`:XZ(e)?`(${e.and.map(n=>XD(n,t)).join(") && (")})`:KZ(e)?`(${e.or.map(n=>XD(n,t)).join(") || (")})`:t(e)}function bM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&bM(e[n],t)&&delete e[n],Ai(e)}function RR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function tee(e,t="datum"){const n=Im(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(zt).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function GRe(e,t="datum"){return`${t}[${zt(Im(e).join("."))}]`}function vi(e){return`datum['${e.replaceAll("'","\\'")}']`}function Q5t(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function pd(e){return`${Im(e).map(Q5t).join("\\.")}`}function Px(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function TC(e){return`${Im(e).join(".")}`}function cT(e){return e?Im(e).length:0}function cs(...e){return e.find(t=>t!==void 0)}let YRe=42;function KRe(e){const t=++YRe;return e?String(e)+t:t}function J5t(){YRe=42}function XRe(e){return QRe(e)?e:`__${e}`}function QRe(e){return e.startsWith("__")}function rI(e){if(e!==void 0)return(e%360+360)%360}function q$(e){return ti(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Zde=Object.getPrototypeOf(structuredClone({}));function lf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!lf(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!lf(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Zde.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Zde.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!lf(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Di(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return o+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(o&&(o+=","),o+=JSON.stringify(u)+":"+l)}return t.splice(s,1),`{${o}}`}(e)}function Pt(e,t){return qt(e)&&Zt(e,t)&&e[t]!==void 0}const ng="row",rg="column",W$="facet",ho="x",_a="y",qh="x2",Fm="y2",yv="xOffset",CC="yOffset",Wh="radius",Mg="radius2",Sd="theta",$g="theta2",Gh="latitude",Yh="longitude",Kh="latitude2",md="longitude2",vv="time",bc="color",Mm="fill",$m="stroke",xc="shape",Lg="size",Tw="angle",Bg="opacity",bv="fillOpacity",xv="strokeOpacity",wv="strokeWidth",_v="strokeDash",NR="text",fT="order",PR="detail",G$="key",Ox="tooltip",Y$="href",K$="url",X$="description",Z5t={x:1,y:1,x2:1,y2:1},JRe={theta:1,theta2:1,radius:1,radius2:1};function ZRe(e){return Zt(JRe,e)}const nee={longitude:1,longitude2:1,latitude:1,latitude2:1};function eNe(e){switch(e){case Gh:return"y";case Kh:return"y2";case Yh:return"x";case md:return"x2"}}function tNe(e){return Zt(nee,e)}const e8t=It(nee),ree={...Z5t,...JRe,...nee,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function c2(e){return e===bc||e===Mm||e===$m}const nNe={row:1,column:1,facet:1},id=It(nNe),iee={...ree,...nNe},t8t=It(iee),{order:FKt,detail:MKt,tooltip:$Kt,...n8t}=iee,{row:LKt,column:BKt,facet:jKt,...r8t}=n8t;function i8t(e){return Zt(r8t,e)}function rNe(e){return Zt(iee,e)}const o8t=[qh,Fm,Kh,md,$g,Mg];function iNe(e){return Cw(e)!==e}function Cw(e){switch(e){case qh:return ho;case Fm:return _a;case Kh:return Gh;case md:return Yh;case $g:return Sd;case Mg:return Wh}return e}function z1(e){if(ZRe(e))switch(e){case Sd:return"startAngle";case $g:return"endAngle";case Wh:return"outerRadius";case Mg:return"innerRadius"}return e}function Lm(e){switch(e){case ho:return qh;case _a:return Fm;case Gh:return Kh;case Yh:return md;case Sd:return $g;case Wh:return Mg}}function wc(e){switch(e){case ho:case qh:return"width";case _a:case Fm:return"height"}}function oNe(e){switch(e){case ho:return"xOffset";case _a:return"yOffset";case qh:return"x2Offset";case Fm:return"y2Offset";case Sd:return"thetaOffset";case Wh:return"radiusOffset";case $g:return"theta2Offset";case Mg:return"radius2Offset"}}function oee(e){switch(e){case ho:return"xOffset";case _a:return"yOffset"}}function s8t(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const a8t=It(ree),{x:zKt,y:UKt,x2:VKt,y2:HKt,xOffset:qKt,yOffset:WKt,latitude:GKt,longitude:YKt,latitude2:KKt,longitude2:XKt,theta:QKt,theta2:JKt,radius:ZKt,radius2:eXt,...see}=ree,u8t=It(see),aee={x:1,y:1},jg=It(aee);function fs(e){return Zt(aee,e)}const uee={theta:1,radius:1},l8t=It(uee);function Q$(e){return e==="width"?ho:_a}const sNe={xOffset:1,yOffset:1};function OR(e){return Zt(sNe,e)}const c8t={time:1};function Cj(e){return e in c8t}const{text:tXt,tooltip:nXt,href:rXt,url:iXt,description:oXt,detail:sXt,key:aXt,order:uXt,...aNe}=see,f8t=It(aNe);function d8t(e){return Zt(see,e)}function h8t(e){switch(e){case bc:case Mm:case $m:case Lg:case xc:case Bg:case wv:case _v:return!0;case bv:case xv:case Tw:case vv:return!1}}const uNe={...aee,...uee,...sNe,...aNe},lee=It(uNe);function Bm(e){return Zt(uNe,e)}function p8t(e,t){return g8t(e)[t]}const lNe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:lXt,...m8t}=lNe;function g8t(e){switch(e){case bc:case Mm:case $m:case X$:case PR:case G$:case Ox:case Y$:case fT:case Bg:case bv:case xv:case wv:case W$:case ng:case rg:return lNe;case ho:case _a:case yv:case CC:case Gh:case Yh:case vv:return m8t;case qh:case Fm:case Kh:case md:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Lg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case _v:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case xc:return{point:"always",geoshape:"always"};case NR:return{text:"always"};case Tw:return{point:"always",square:"always",text:"always"};case K$:return{image:"always"};case Sd:return{text:"always",arc:"always"};case Wh:return{text:"always",arc:"always"};case $g:case Mg:return{arc:"always"}}}function Sj(e){switch(e){case ho:case _a:case Sd:case Wh:case yv:case CC:case Lg:case Tw:case wv:case Bg:case bv:case xv:case vv:case qh:case Fm:case $g:case Mg:return;case W$:case ng:case rg:case xc:case _v:case NR:case Ox:case Y$:case K$:case X$:return"discrete";case bc:case Mm:case $m:return"flexible";case Gh:case Yh:case Kh:case md:case PR:case G$:case fT:return}}const y8t={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},v8t={count:1,min:1,max:1};function _g(e){return Pt(e,"argmin")}function Ev(e){return Pt(e,"argmax")}function cee(e){return Yt(e)&&Zt(y8t,e)}const b8t=new Set(["count","valid","missing","distinct"]);function J$(e){return Yt(e)&&b8t.has(e)}function x8t(e){return Yt(e)&&yr(["min","max"],e)}const w8t=new Set(["count","sum","distinct","valid","missing"]),_8t=new Set(["mean","average","median","q1","q3","min","max"]);function cNe(e){return pv(e)&&(e=cL(e,void 0)),"bin"+It(e).map(t=>Z$(e[t])?co(`_${t}_${j1(e[t])}`):co(`_${t}_${e[t]}`)).join("")}function Gi(e){return e===!0||Sw(e)&&!e.binned}function ja(e){return e==="binned"||Sw(e)&&e.binned===!0}function Sw(e){return qt(e)}function Z$(e){return Pt(e,"param")}function ehe(e){switch(e){case ng:case rg:case Lg:case bc:case Mm:case $m:case wv:case Bg:case bv:case xv:case xc:return 6;case _v:return 4;default:return 10}}function FR(e){return Pt(e,"expr")}function za(e,{level:t}={level:0}){const n=It(e||{}),r={};for(const i of n)r[i]=t===0?tf(e[i]):za(e[i],{level:t-1});return r}function fNe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:m,...p}=e,g={...p,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...m?{subtitlePadding:m}:{}},w=uT(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:w,nonMarkTitleProperties:v,subtitle:b}}function By(e){return Yt(e)||gt(e)&&Yt(e[0])}function yn(e){return Pt(e,"signal")}function Aw(e){return Pt(e,"step")}function E8t(e){return gt(e)?!1:Pt(e,"fields")&&!Pt(e,"data")}function T8t(e){return gt(e)?!1:Pt(e,"fields")&&Pt(e,"data")}function W0(e){return gt(e)?!1:Pt(e,"field")&&Pt(e,"data")}const C8t={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},S8t=It(C8t),A8t={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},QH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function dNe(e){const t=gt(e.condition)?e.condition.map(the):the(e.condition);return{...tf(e),condition:t}}function tf(e){if(FR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function the(e){if(FR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function to(e){if(FR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return yn(e)?e:e!==void 0?{value:e}:void 0}function D8t(e){return yn(e)?e.signal:zt(e)}function nhe(e){return yn(e)?e.signal:zt(e.value)}function mh(e){return yn(e)?e.signal:e==null?null:zt(e)}function k8t(e,t,n){for(const r of n){const i=vm(r,t.markDef,t.config);i!==void 0&&(e[r]=to(i))}return e}function hNe(e){return[].concat(e.type,e.style??[])}function Si(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&Pt(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:vm(e,t,n,r)}function vm(e,t,n,{vgChannel:r}={}){const i=JH(e,t,n.style);return cs(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function JH(e,t,n){return pNe(e,hNe(t),n)}function pNe(e,t,n){t=Gt(t);let r;for(const i of t){const o=n[i];Pt(o,e)&&(r=o[e])}return r}function mNe(e,t){return Gt(e).reduce((n,r)=>(n.field.push(Ht(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function gNe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(lf(i,r))return;n.push(r)}),n}function yNe(e,t){return lf(e,t)||!t?e:e?[...Gt(e),...Gt(t)].join(", "):t}function vNe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((By(n)||yn(n))&&(By(r)||yn(r)))return{explicit:e.explicit,value:yNe(n,r)};if(By(n)||yn(n))return{explicit:e.explicit,value:n};if(By(r)||yn(r))return{explicit:e.explicit,value:r};if(!By(n)&&!yn(n)&&!By(r)&&!yn(r))return{explicit:e.explicit,value:gNe(n,r)};throw new Error("It should never reach here")}function fee(e){return`Invalid specification ${Di(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const I8t='Autosize "fit" only works for single views and layered views.';function rhe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function ihe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function ohe(e){return e?`Dropping "fit-${e}" because spec has discrete ${wc(e)}.`:'Dropping "fit" because spec has discrete size.'}function dee(e){return`Unknown field for ${e}. Cannot calculate view size.`}function she(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function R8t(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function N8t(e){return`The "nearest" transform is not supported for ${e} marks.`}function bNe(e){return`Selection not supported for ${e} yet.`}function P8t(e){return`Cannot find a selection named "${e}".`}const O8t="Scale bindings are currently only supported for scales with unbinned, continuous domains.",F8t="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",M8t="Legend bindings are only supported for selections over an individual field or encoding channel.";function $8t(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function L8t(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const B8t="The same selection must be used to override scale domains in a layered view.",j8t='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function z8t(e){return`Unknown repeated value "${e}".`}function ahe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const U8t="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",hee="Animation involving facet, layer, or concat is currently unsupported.";function V8t(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${zt(e)}.`}function H8t(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${zt(t)} encoding found for selection ${zt(n.param)}. Using "field": ${zt(r)}.`}const q8t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function W8t(e){return`Unrecognized parse "${e}".`}function uhe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const G8t="Attempt to add the same child twice.";function Y8t(e){return`Ignoring an invalid transform: ${Di(e)}.`}const K8t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function lhe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function X8t(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Di(t)} is overridden by a child projection ${Di(n)}.`}const Q8t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function J8t(e){return`${e}Offset dropped because ${e} is continuous`}function Z8t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Di(n)}}.`}function xNe(e){return`Invalid field type "${e}".`}function e$t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function t$t(e){return`Invalid aggregation operator "${e}".`}function wNe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function n$t(e){return`Position range does not support relative band size for ${e}.`}function ZH(e,t){return`Dropping ${Di(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const r$t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function eL(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function i$t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function o$t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function s$t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function a$t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Aj(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function u$t(e){return`The ${e} for range marks cannot be an expression`}function l$t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function c$t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function f$t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function d$t(e){return`Cannot use the relative band size with ${e} scale.`}function h$t(e){return`Using unaggregated domain with raw field has no effect (${Di(e)}).`}function p$t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function m$t(e){return`Unaggregated domain is currently unsupported for log scale (${Di(e)}).`}function g$t(e){return`Cannot apply size to non-oriented mark "${e}".`}function y$t(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function v$t(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function _Ne(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function ENe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function b$t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Di(n)} and ${Di(r)}). Using ${Di(n)}.`}function x$t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Di(n)} and ${Di(r)}). Using the union of the two domains.`}function w$t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function _$t(e){return`Dropping sort property ${Di(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const che="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",E$t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",T$t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",C$t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function S$t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function A$t(e){return`Stack is applied to a non-linear scale (${e}).`}function D$t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function xM(e,t){return`Invalid ${e}: ${Di(t)}.`}function k$t(e){return`Dropping day from datetime ${Di(e)} as day cannot be combined with other units.`}function I$t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function R$t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function N$t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function fhe(e){return`1D error band does not support ${e}.`}function TNe(e){return`Channel ${e} is required for "binned" bin.`}function P$t(e){return`Channel ${e} should not be used with "binned" bin.`}function O$t(e){return`Domain for ${e} is required for threshold scale.`}const CNe=HX(VX);let Fx=CNe;function F$t(e){return Fx=e,Fx}function M$t(){return Fx=CNe,Fx}function pee(...e){Fx.error(...e)}function Mt(...e){Fx.warn(...e)}function $$t(...e){Fx.debug(...e)}function Dw(e){if(e&&qt(e)){for(const t of gee)if(Pt(e,t))return!0}return!1}const SNe=["january","february","march","april","may","june","july","august","september","october","november","december"],L$t=SNe.map(e=>e.substr(0,3)),ANe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],B$t=ANe.map(e=>e.substr(0,3));function j$t(e){if(q$(e)&&(e=+e),ti(e))return e>4&&Mt(xM("quarter",e)),e-1;throw new Error(xM("quarter",e))}function z$t(e){if(q$(e)&&(e=+e),ti(e))return e-1;{const t=e.toLowerCase(),n=SNe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=L$t.indexOf(r);if(i!==-1)return i;throw new Error(xM("month",e))}}function U$t(e){if(q$(e)&&(e=+e),ti(e))return e%7;{const t=e.toLowerCase(),n=ANe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=B$t.indexOf(r);if(i!==-1)return i;throw new Error(xM("day",e))}}function mee(e,t){const n=[];if(t&&e.day!==void 0&&It(e).length>1&&(Mt(k$t(e)),e=Vn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?z$t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?j$t(e.quarter):e.quarter;n.push(ti(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?U$t(e.day):e.day;n.push(ti(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Mx(e){const n=mee(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function V$t(e){const n=mee(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function H$t(e){const t=mee(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const DNe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},gee=It(DNe);function q$t(e){return Zt(DNe,e)}function kw(e){return qt(e)?e.binned:kNe(e)}function kNe(e){return e&&e.startsWith("binned")}function yee(e){return e.startsWith("utc")}function W$t(e){return e.substring(3)}const G$t={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function tL(e){return gee.filter(t=>RNe(e,t))}function INe(e){const t=tL(e);return t[t.length-1]}function RNe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Y$t(e,t,{end:n}={end:!1}){const r=tee(t),i=yee(e)?"utc":"";function o(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let s;const a={};for(const u of gee)RNe(e,u)&&(a[u]=o(u),s=u);return n&&(a[s]+="+1"),V$t(a)}function NNe(e){if(!e)return;const t=tL(e);return`timeUnitSpecifier(${Di(t)}, ${Di(G$t)})`}function K$t(e,t,n){if(!e)return;const r=NNe(e);return`${n||yee(e)?"utc":"time"}Format(${t}, ${r})`}function ga(e){if(!e)return;let t;return Yt(e)?kNe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:qt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),yee(t.unit)&&(t.utc=!0,t.unit=W$t(t.unit)),t}function X$t(e){const{utc:t,...n}=ga(e);return n.unit?(t?"utc":"")+It(n).map(r=>co(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+It(n).map(r=>co(`_${r}_${n[r]}`)).join("")}function PNe(e,t=n=>n){const n=ga(e),r=INe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=ONe(r,n.step),a={...i,[s]:+i[s]+o};return`${t(Mx(a))} - ${t(Mx(i))}`}}const Q$t={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function J$t(e){return Zt(Q$t,e)}function ONe(e,t=1){if(J$t(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Z$t(e){return Pt(e,"param")}function vee(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function bee(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function xee(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function wee(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function _ee(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Eee(e){if(e!=null&&e.field){if(gt(e.range)&&e.range.length===2)return!0;if(yn(e.range))return!0}return!1}function Tee(e){return!!(e!=null&&e.field)&&(gt(e.oneOf)||gt(e.in))}function eLt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function FNe(e){return Tee(e)||vee(e)||Eee(e)||bee(e)||wee(e)||xee(e)||_ee(e)}function wp(e,t){return fL(e,{timeUnit:t,wrapTime:!0})}function tLt(e,t){return e.map(n=>wp(n,t))}function MNe(e,t=!0){const{field:n}=e,r=ga(e.timeUnit),{unit:i,binned:o}=r||{},s=Ht(e,{expr:"datum"}),a=i?`time(${o?s:Y$t(i,n)})`:s;if(vee(e))return`${a}===${wp(e.equal,i)}`;if(bee(e)){const u=e.lt;return`${a}<${wp(u,i)}`}else if(wee(e)){const u=e.gt;return`${a}>${wp(u,i)}`}else if(xee(e)){const u=e.lte;return`${a}<=${wp(u,i)}`}else if(_ee(e)){const u=e.gte;return`${a}>=${wp(u,i)}`}else{if(Tee(e))return`indexof([${tLt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(eLt(e))return nL(a,e.valid);if(Eee(e)){const{range:u}=za(e),l=yn(u)?{signal:`${u.signal}[0]`}:u[0],c=yn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+wp(l,i)+", "+wp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${wp(l,i)}`),c!==null&&f.push(`${a} <= ${wp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Di(e)}`)}function nL(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function nLt(e){return FNe(e)&&e.timeUnit?{...e,timeUnit:ga(e.timeUnit)}:e}const MR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function rLt(e){return e==="quantitative"||e==="temporal"}function $Ne(e){return e==="ordinal"||e==="nominal"}const $x=MR.quantitative,Cee=MR.ordinal,dT=MR.temporal,See=MR.nominal,SC=MR.geojson;function iLt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case $x:return"quantitative";case"t":case dT:return"temporal";case"o":case Cee:return"ordinal";case"n":case See:return"nominal";case SC:return"geojson"}}const Ua={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},eq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function oLt(e,t){const n=eq[e],r=eq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const sLt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function dhe(e){return sLt[e]}const LNe=new Set(["linear","log","pow","sqrt","symlog"]),BNe=new Set([...LNe,"time","utc"]);function jNe(e){return LNe.has(e)}const zNe=new Set(["quantile","quantize","threshold"]),aLt=new Set([...BNe,...zNe,"sequential","identity"]),uLt=new Set(["ordinal","bin-ordinal","point","band"]);function ba(e){return uLt.has(e)}function Ph(e){return aLt.has(e)}function zp(e){return BNe.has(e)}function hT(e){return zNe.has(e)}const lLt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function cLt(e){return!Yt(e)&&Pt(e,"name")}function UNe(e){return Pt(e,"param")}function fLt(e){return Pt(e,"unionWith")}function dLt(e){return qt(e)&&"field"in e}const hLt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:cXt,domain:fXt,range:dXt,rangeMax:hXt,rangeMin:pXt,scheme:mXt,...pLt}=hLt,mLt=It(pLt);function tq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return zp(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return zp(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return zp(e);case"nice":return zp(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Ph(e)&&!yr(["log","time","utc","threshold","quantile"],e)}}function VNe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return c2(e)?void 0:f$t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function gLt(e,t){return yr([Cee,See],t)?e===void 0||ba(e):t===dT?yr([Ua.TIME,Ua.UTC,void 0],e):t===$x?jNe(e)||hT(e)||e===void 0:!0}function yLt(e,t,n=!1){if(!Bm(e))return!1;switch(e){case ho:case _a:case yv:case CC:case Sd:case Wh:return zp(t)||t==="band"?!0:t==="point"?!n:!1;case vv:return yr(["linear","band"],t);case Lg:case wv:case Bg:case bv:case xv:case Tw:return zp(t)||hT(t)||yr(["band","point","ordinal"],t);case bc:case Mm:case $m:return t!=="band";case _v:case xc:return t==="ordinal"||hT(t)}}function vLt(e){return qt(e)&&"value"in e}const Al={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},HNe=Al.arc,rL=Al.area,iL=Al.bar,bLt=Al.image,oL=Al.line,sL=Al.point,xLt=Al.rect,wM=Al.rule,qNe=Al.text,Aee=Al.tick,wLt=Al.trail,Dee=Al.circle,kee=Al.square,WNe=Al.geoshape;function Tv(e){return["line","area","trail"].includes(e)}function iI(e){return["rect","bar","image","arc","tick"].includes(e)}const _Lt=new Set(It(Al));function bm(e){return Pt(e,"type")}const ELt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],TLt=["fill","fillOpacity"],CLt=[...ELt,...TLt],SLt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},hhe=It(SLt),Dj=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],ALt={area:["line","point"],bar:Dj,rect:Dj,line:["point"],tick:["bandSize","thickness",...Dj]},DLt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},kLt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},GNe=It(kLt);function Lx(e){return Pt(e,"band")}const ILt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},RLt=5,Iee={binSpacing:0,continuousBandSize:RLt,minBandSize:.25,timeUnitBandPosition:.5},NLt={...Iee,binSpacing:1},PLt={...Iee,thickness:1};function OLt(e){return bm(e)?e.type:e}function YNe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Ree({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!Ph(r)||i)return"always-valid";const o=YNe(Si("invalid",e,t),{isPath:Tv(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":o}function FLt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function KNe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function XNe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var c;const s=n==null?void 0:n.get("type"),a=Fh(t),u=J$(a==null?void 0:a.aggregate),l=Ree({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:u});if(a&&l==="show"){const f=((c=o.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:nL(Ht(a,{expr:"datum"}),!1),...MLt(f,n,r)}}}function MLt(e,t,n){if(vLt(e)){const{value:r}=e;return yn(r)?{signal:r.signal}:{value:r}}return KNe({scale:t,scaleName:n,mode:"zeroOrMin"})}function Nee(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=Cw(t),u=Pee(e),l=XNe({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return l!==void 0?[l,u]:u}function $Lt(e){const{datum:t}=e;return Dw(t)?Mx(t):`${Di(t)}`}function cx(e,t,n,r){const i={};if(t&&(i.scale=t),jm(e)){const{datum:o}=e;Dw(o)?i.signal=Mx(o):yn(o)?i.signal=o.signal:FR(o)?i.signal=o.expr:i.value=o}else i.field=Ht(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function _M({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!yn(s)&&0<s&&s<1?"datum":void 0,u=Ht(t,{expr:a,suffix:i}),l=n!==void 0?Ht(n,{expr:a}):Ht(t,{suffix:o,expr:a}),c={};if(s===0||s===1){c.scale=e;const f=s===0?u:l;c.field=f}else{const f=yn(s)?`(1-${s.signal}) * ${u} + ${s.signal} * ${l}`:`${1-s} * ${u} + ${s} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function LLt({scaleName:e,fieldDef:t}){const n=Ht(t,{expr:"datum"}),r=Ht(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Pee({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Yn(t)){const f=s==null?void 0:s.get("type");if(Tl(t)){c??(c=U1({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:m}=t;if(Gi(d)||c&&h&&m===dT)return a!=null&&a.impute?cx(t,o,{binSuffix:"mid"},{offset:u}):c&&!ba(f)?_M({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):cx(t,o,zR(t,e)?{binSuffix:"range"}:{},{offset:u});if(ja(d)){if(Bt(n))return _M({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Mt(TNe(e===ho?qh:Fm))}}return cx(t,o,ba(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Oh(t)){const f=t.value,d=u?{offset:u}:{};return{...QD(e,f),...d}}}return ir(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function QD(e,t){return yr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:yr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:to(t)}function Bx(e){return e&&e!=="number"&&e!=="time"}function QNe(e,t,n){return`${e}(${t}${n?`, ${Di(n)}`:""})`}const BLt="  ";function Oee({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var u,l;if(Bx(n))return gh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=JNe(e,r,i),a=pT(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return gh({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return gh({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&Bt(e)&&e.timeUnit===void 0)return gh({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(gT(e)){const c=zLt({field:s,timeUnit:Bt(e)?(u=ga(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Iw(e)&&((l=e.scale)==null?void 0:l.type)===Ua.UTC});return c?{signal:c}:void 0}if(t=nq({type:a,specifiedFormat:t,config:o,normalizeStack:i}),Bt(e)&&Gi(e.bin)){const c=Ht(e,{expr:r,binSuffix:"end"});return{signal:$R(s,c,t,n,o)}}else return t||pT(e)==="quantitative"?{signal:`${t3e(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function JNe(e,t,n){return Bt(e)?n?`${Ht(e,{expr:t,suffix:"end"})}-${Ht(e,{expr:t,suffix:"start"})}`:Ht(e,{expr:t}):$Lt(e)}function gh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=JNe(e,r,i)),s!=="datum.value"&&Bt(e)&&Gi(e.bin)){const a=Ht(e,{expr:r,binSuffix:"end"});return{signal:$R(s,a,t,n,o)}}return{signal:QNe(n,s,t)}}function ZNe(e,t,n,r,i,o){var s;if(!(Yt(r)&&Bx(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&pT(e)==="quantitative"&&(i.normalizedNumberFormatType&&mT(e)&&e.stack==="normalize"||i.numberFormatType))){if(mT(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return nq({type:"quantitative",config:i,normalizeStack:!0});if(gT(e)){const a=Bt(e)?(s=ga(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:jLt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return nq({type:t,specifiedFormat:n,config:i})}}function e3e(e,t,n){var r;if(e&&(yn(e)||e==="number"||e==="time"))return e;if(gT(t)&&n!=="time"&&n!=="utc")return Bt(t)&&((r=ga(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function nq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Yt(t))return t;if(e===$x)return r?n.normalizedNumberFormat:n.numberFormat}function jLt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:NNe(t)}:r?void 0:n.timeFormat)}function t3e(e,t){return`format(${e}, "${t||""}")`}function phe(e,t,n,r){return Bx(n)?QNe(n,e,t):t3e(e,(Yt(t)?t:void 0)??r.numberFormat)}function $R(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return $R(e,t,i.numberFormat,i.numberFormatType,i);const o=phe(e,n,r,i),s=phe(t,n,r,i);return`${nL(e,!1)} ? "null" : ${o} + "${BLt}" + ${s}`}function zLt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Yt(n)?n:i,`${o?"utc":"time"}Format(${e}, '${n}')`):K$t(t,e,o)}const aL="min",ULt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function mhe(e){return Zt(ULt,e)}function VLt(e){return Pt(e,"encoding")}function ig(e){return e&&(e.op==="count"||Pt(e,"field"))}function n3e(e){return e&&gt(e)}function LR(e){return Pt(e,"row")||Pt(e,"column")}function Fee(e){return Pt(e,"header")}function uL(e){return Pt(e,"facet")}function HLt(e){return Pt(e,"param")}function qLt(e){return!Yt(e)&&Pt(e,"repeat")}function ghe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Mee(e){return Pt(e,"sort")}function U1({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Yn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Bt(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return vm("timeUnitBandPosition",n,r);if(Gi(o))return .5}}function r3e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var l,c,f;const a=wc(e),u=Si(s?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Bt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:vm("timeUnitBandSize",r,i)};if(Gi(h)&&!ba(o))return{band:1}}if(iI(r.type))return o?ba(o)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function i3e(e,t,n,r){return Gi(e.bin)||e.timeUnit&&Tl(e)&&e.type==="temporal"?U1({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function o3e(e){return Pt(e,"sort")&&!Pt(e,"field")}function BR(e){return Pt(e,"condition")}function lL(e){const t=e==null?void 0:e.condition;return!!t&&!gt(t)&&Bt(t)}function jR(e){const t=e==null?void 0:e.condition;return!!t&&!gt(t)&&Yn(t)}function WLt(e){const t=e==null?void 0:e.condition;return!!t&&(gt(t)||Oh(t))}function Bt(e){return Pt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function pT(e){return e==null?void 0:e.type}function jm(e){return Pt(e,"datum")}function i1(e){return Tl(e)&&!TM(e)||EM(e)}function yhe(e){return Tl(e)&&e.type==="quantitative"&&!e.bin||EM(e)}function EM(e){return jm(e)&&ti(e.datum)}function Yn(e){return Bt(e)||jm(e)}function Tl(e){return e&&(Pt(e,"field")||e.aggregate==="count")&&Pt(e,"type")}function Oh(e){return Pt(e,"value")}function Iw(e){return Pt(e,"scale")||Pt(e,"sort")}function mT(e){return Pt(e,"axis")||Pt(e,"stack")||Pt(e,"impute")}function s3e(e){return Pt(e,"legend")}function a3e(e){return Pt(e,"format")||Pt(e,"formatType")}function GLt(e){return dc(e,["legend","axis","header","scale"])}function YLt(e){return Pt(e,"op")}function Ht(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(XLt(e))n=XRe("count");else{let s;if(!t.nofn)if(YLt(e))s=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Gi(a)?(s=cNe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Ev(u)?(o=`["${n}"]`,n=`argmax_${u.argmax}`):_g(u)?(o=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):l&&!kw(l)&&(s=X$t(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?TC(n):t.expr?GRe(n,t.expr)+o:pd(n)+o}function TM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Bt(e)&&!!e.bin;case"temporal":return!1}throw new Error(xNe(e.type))}function KLt(e){var t;return Iw(e)&&hT((t=e.scale)==null?void 0:t.type)}function XLt(e){return e.aggregate==="count"}function QLt(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Gi(r))return`${n} (binned)`;if(i&&!kw(i)){const a=(s=ga(i))==null?void 0:s.unit;if(a)return`${n} (${tL(a).join("-")})`}else if(o)return Ev(o)?`${n} for max ${o.argmax}`:_g(o)?`${n} for min ${o.argmin}`:`${RR(o)} of ${n}`;return n}function JLt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ev(t))return`${i} for argmax(${t.argmax})`;if(_g(t))return`${i} for argmin(${t.argmin})`;const o=r&&!kw(r)?ga(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||Gi(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const u3e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return JLt(e);default:return QLt(e,t)}};let l3e=u3e;function c3e(e){l3e=e}function ZLt(){c3e(u3e)}function f2(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=$ee(e))==null?void 0:a.title;if(!Bt(e))return i??e.title;const o=e,s=r?Lee(o,t):void 0;return n?cs(i,o.title,s):i??o.title??s}function $ee(e){if(mT(e)&&e.axis)return e.axis;if(s3e(e)&&e.legend)return e.legend;if(Fee(e)&&e.header)return e.header}function Lee(e,t){return l3e(e,t)}function CM(e){if(a3e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=$ee(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function e9t(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Mee(e)&&gt(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ev(n)&&!_g(n))return"quantitative";if(Iw(e)&&((o=e.scale)!=null&&o.type))switch(eq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Fh(e){if(Bt(e))return e;if(lL(e))return e.condition}function zs(e){if(Yn(e))return e;if(jR(e))return e.condition}function f3e(e,t,n,r={}){if(Yt(e)||ti(e)||pv(e)){const i=Yt(e)?"string":ti(e)?"number":"boolean";return Mt(Z8t(t,i,e)),{value:e}}return Yn(e)?SM(e,t,n,r):jR(e)?{...e,condition:SM(e.condition,t,n,r)}:e}function SM(e,t,n,r){if(a3e(e)){const{format:i,formatType:o,...s}=e;if(Bx(o)&&!n.customFormatTypes)return Mt(lhe(t)),SM(s,t,n,r)}else{const i=mT(e)?"axis":s3e(e)?"legend":Fee(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(Bx(s)&&!n.customFormatTypes)return Mt(lhe(t)),SM({...e,[i]:a},t,n,r)}}return Bt(e)?Bee(e,t,r):t9t(e)}function t9t(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ti(n)?"quantitative":Yt(n)?"nominal":Dw(n)?"temporal":void 0,{...e,type:t}}function Bee(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!cee(r)&&!Ev(r)&&!_g(r)&&(Mt(t$t(r)),delete a.aggregate),i&&(a.timeUnit=ga(i)),s&&(a.field=`${s}`),Gi(o)&&(a.bin=cL(o,t)),ja(o)&&!fs(t)&&Mt(P$t(t)),Tl(a)){const{type:u}=a,l=iLt(u);u!==l&&(a.type=l),u!=="quantitative"&&J$(r)&&(Mt(e$t(u,r)),a.type="quantitative")}else if(!iNe(t)){const u=e9t(a,t);a.type=u}if(Tl(a)){const{compatible:u,warning:l}=n9t(a,t)||{};u===!1&&Mt(l)}if(Mee(a)&&Yt(a.sort)){const{sort:u}=a;if(mhe(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&mhe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Fee(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function cL(e,t){return pv(e)?{maxbins:ehe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:ehe(t)}:e}const pE={compatible:!0};function n9t(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ng:case rg:case W$:return TM(e)?pE:{compatible:!1,warning:o$t(t)};case ho:case _a:case yv:case CC:case bc:case Mm:case $m:case NR:case PR:case G$:case Ox:case Y$:case K$:case Tw:case Sd:case Wh:case X$:return pE;case Yh:case md:case Gh:case Kh:return n!==$x?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:pE;case Bg:case bv:case xv:case wv:case Lg:case $g:case Mg:case qh:case Fm:case vv:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:pE;case xc:case _v:return!TM(e)&&!KLt(e)?{compatible:!1,warning:s$t(t)}:pE;case fT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:pE}}function gT(e){const{formatType:t}=CM(e);return t==="time"||!t&&r9t(e)}function r9t(e){return e&&(e.type==="temporal"||Bt(e)&&!!e.timeUnit)}function fL(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const o=t&&((u=ga(t))==null?void 0:u.unit);let s=o||n==="temporal",a;return FR(e)?a=e.expr:yn(e)?a=e.signal:Dw(e)?(s=!0,a=Mx(e)):(Yt(e)||ti(e))&&s&&(a=`datetime(${Di(e)})`,q$t(o)&&(ti(e)&&e<1e4||Yt(e)&&isNaN(Date.parse(e)))&&(a=Mx({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:Di(e)}function d3e(e,t){const{type:n}=e;return t.map(r=>{const i=Bt(e)&&!kw(e.timeUnit)?e.timeUnit:void 0,o=fL(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function zR(e,t){return Gi(e.bin)?Bm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const vhe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function UR(e){return e==null?void 0:e.condition}const h3e=["domain","grid","labels","ticks","title"],i9t={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},p3e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},o9t={...p3e,style:1,labelExpr:1,encoding:1};function bhe(e){return Zt(o9t,e)}const s9t={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},m3e=It(s9t);function zg(e){return Pt(e,"mark")}class dL{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return zg(t)?OLt(t.mark)===this.name:!1}}function fx(e,t){const n=e&&e[t];return n?gt(n)?lT(n,r=>!!r.field):Bt(n)||lL(n):!1}function g3e(e,t){const n=e&&e[t];return n?gt(n)?lT(n,r=>!!r.field):Bt(n)||jm(n)||jR(n):!1}function y3e(e,t){if(fs(t)){const n=e[t];if((Bt(n)||jm(n))&&($Ne(n.type)||Bt(n)&&n.timeUnit)){const r=oee(t);return g3e(e,r)}}return!1}function v3e(e){return lT(t8t,t=>{if(fx(e,t)){const n=e[t];if(gt(n))return lT(n,r=>!!r.aggregate);{const r=Fh(n);return r&&!!r.aggregate}}return!1})}function b3e(e,t){const n=[],r=[],i=[],o=[],s={};return jee(e,(a,u)=>{if(Bt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const m=$ee(a),p=m==null?void 0:m.title;let g=Ht(a,{forAs:!0});const v={...p?[]:{title:f2(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(Ev(c)?(b="argmax",g=Ht({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${g}.${l}`):_g(c)?(b="argmin",g=Ht({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:g};l&&(w.field=l),o.push(w)}}else if(n.push(g),Tl(a)&&Gi(f)){if(r.push({bin:f,field:l,as:g}),n.push(Ht(a,{binSuffix:"end"})),zR(a,u)&&n.push(Ht(a,{binSuffix:"range"})),fs(u)){const b={field:`${g}_end`};s[`${u}2`]=b}v.bin="binned",iNe(u)||(v.type=$x)}else if(d&&!kw(d)){i.push({timeUnit:d,field:l,as:g});const b=Tl(a)&&a.type!==dT&&"time";b&&(u===NR||u===Ox?v.formatType=b:d8t(u)?v.legend={formatType:b,...v.legend}:fs(u)&&(v.axis={formatType:b,...v.axis}))}s[u]=v}else n.push(l),s[u]=e[u]}else s[u]=e[u]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function a9t(e,t,n){const r=p8t(t,n);if(r){if(r==="binned"){const i=e[t===qh?ho:_a];return!!(Bt(i)&&Bt(e[t])&&ja(i.bin))}}else return!1;return!0}function u9t(e,t,n,r){const i={};for(const o of It(e))rNe(o)||Mt(i$t(o));for(let o of a8t){if(!e[o])continue;const s=e[o];if(OR(o)){const a=s8t(o),u=i[a];if(Bt(u)&&rLt(u.type)&&Bt(s)&&!u.timeUnit){Mt(J8t(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(Mt(Q8t),o=Sd),!a9t(e,o,t)){Mt(eL(o,t));continue}if(o===Lg&&t==="line"){const a=Fh(e[o]);if(a!=null&&a.aggregate){Mt(r$t);continue}}if(o===bc&&(n?"fill"in e:"stroke"in e)){Mt(wNe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===PR||o===fT&&!gt(s)&&!Oh(s)||o===Ox&&gt(s)){if(s){if(o===fT){const a=e[o];if(o3e(a)){i[o]=a;continue}}i[o]=Gt(s).reduce((a,u)=>(Bt(u)?a.push(Bee(u,o)):Mt(ZH(u,o)),a),[])}}else{if(o===Ox&&s===null)i[o]=null;else if(!Bt(s)&&!jm(s)&&!Oh(s)&&!BR(s)&&!yn(s)){Mt(ZH(s,o));continue}i[o]=f3e(s,o,r)}}return i}function hL(e,t){const n={};for(const r of It(e)){const i=f3e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function l9t(e){const t=[];for(const n of It(e))if(fx(e,n)){const r=e[n],i=Gt(r);for(const o of i)Bt(o)?t.push(o):lL(o)&&t.push(o.condition)}return t}function jee(e,t,n){if(e)for(const r of It(e)){const i=e[r];if(gt(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function c9t(e,t,n,r){return e?It(e).reduce((i,o)=>{const s=e[o];return gt(s)?s.reduce((a,u)=>t.call(r,a,u,o),i):t.call(r,i,s,o)},n):n}function x3e(e,t){return It(t).reduce((n,r)=>{switch(r){case ho:case _a:case Y$:case X$:case K$:case qh:case Fm:case yv:case CC:case Sd:case $g:case Wh:case Mg:case vv:case Gh:case Yh:case Kh:case md:case NR:case xc:case Tw:case Ox:return n;case fT:if(e==="line"||e==="trail")return n;case PR:case G$:{const i=t[r];if(gt(i)||Bt(i))for(const o of Gt(i))o.aggregate||n.push(Ht(o,{}));return n}case Lg:if(e==="trail")return n;case bc:case Mm:case $m:case Bg:case bv:case xv:case _v:case wv:{const i=Fh(t[r]);return i&&!i.aggregate&&n.push(Ht(i,{})),n}}},[])}function f9t(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(gt(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return gt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function rq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const u=r?` of ${zee(t)}`:"";return{field:s+t.field,type:t.type,title:yn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),o=l9t(n).map(GLt);return{tooltip:[...i,...jp(o,Ar)]}}function zee(e){const{title:t,field:n}=e;return cs(t,n)}function Uee(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=zee(n);return w3e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...Yt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function w3e(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...bm(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...pv(e[t])?{}:e[t]}}]:[]}function _3e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:fP(o,n),continuousAxisChannelDef2:fP(s,n),continuousAxisChannelDefError:fP(a,n),continuousAxisChannelDefError2:fP(u,n),continuousAxis:i}}function fP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Mt(N$t(n,t)),r}else return e}function E3e(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(bm(n)&&n.orient)return n.orient;if(i1(i)){if(i1(o)){const s=Bt(i)&&i.aggregate,a=Bt(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return gT(o)&&!gT(i)?"horizontal":"vertical"}return"horizontal"}else{if(i1(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const AM="boxplot",d9t=["box","median","outliers","rule","ticks"],h9t=new dL(AM,C3e);function T3e(e){return ti(e)?"tukey":e}function C3e(e,{config:t}){e={...e,encoding:hL(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=bm(n)?n:{type:n};i&&Mt(bNe("boxplot"));const u=a.extent??t.boxplot.extent,l=Si("size",a,t),c=a.invalid,f=T3e(u),{bins:d,timeUnits:h,transform:m,continuousAxisChannelDef:p,continuousAxis:g,groupby:v,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:C}=p9t(e,u,t),S=TC(p.field),{color:I,size:R,...P}=w,M=tt=>Uee(a,g,p,tt,t.boxplot),B=M(P),L=M(w),z=(qt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",G=M({...P,...R?{size:R}:{},color:{condition:{test:`${vi(`lower_box_${p.field}`)} >= ${vi(`upper_box_${p.field}`)}`,...I||{value:z}}}}),W=rq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],p,w),te={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},Z=f==="min-max"?W:rq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,w),re=[...B({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Z}),...B({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Z}),...B({partName:"ticks",mark:te,positionPrefix:"lower_whisker",extraEncoding:Z}),...B({partName:"ticks",mark:te,positionPrefix:"upper_whisker",extraEncoding:Z})],q=[...f!=="tukey"?re:[],...L({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:T,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:W}),...G({partName:"median",mark:{type:"tick",invalid:c,...qt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:W})];if(f==="min-max")return{...s,transform:(s.transform??[]).concat(m),layer:q};const U=vi(`lower_box_${p.field}`),Y=vi(`upper_box_${p.field}`),H=`(${Y} - ${U})`,X=`${U} - ${u} * ${H}`,ee=`${Y} + ${u} * ${H}`,le=vi(p.field),Ee={joinaggregate:S3e(p.field),groupby:v},be={transform:[{filter:`(${X} <= ${le}) && (${le} <= ${ee})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${S}`},{op:"max",field:p.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${S}`},...b],groupby:v}],layer:re},{tooltip:Ce,...Oe}=P,{scale:me,axis:he}=p,Fe=zee(p),Pe=dc(he,["title"]),Je=w3e(a,"outliers",t.boxplot,{transform:[{filter:`(${le} < ${X}) || (${le} > ${ee})`}],mark:"point",encoding:{[g]:{field:p.field,type:p.type,...Fe!==void 0?{title:Fe}:{},...me!==void 0?{scale:me}:{},...Ai(Pe)?{}:{axis:Pe}},...Oe,...I?{color:I}:{},...C?{tooltip:C}:{}}})[0];let ut;const Ke=[...d,...h,Ee];return Je?ut={transform:Ke,layer:[Je,be]}:(ut=be,ut.transform.unshift(...Ke)),{...s,layer:[ut,{transform:m,layer:q}]}}function S3e(e){const t=TC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function p9t(e,t,n){const r=E3e(e,AM),{continuousAxisChannelDef:i,continuousAxis:o}=_3e(e,r,AM),s=i.field,a=TC(s),u=T3e(t),l=[...S3e(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${vi(`upper_box_${a}`)} - ${vi(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${vi(`upper_box_${a}`)} + ${vi(`iqr_${a}`)} * ${t}, ${vi(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${vi(`lower_box_${a}`)} - ${vi(`iqr_${a}`)} * ${t}, ${vi(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=f9t(d),{bins:p,timeUnits:g,aggregate:v,groupby:b,encoding:w}=b3e(m,n),E=r==="vertical"?"horizontal":"vertical",T=r,C=[...p,...g,{aggregate:[...v,...l],groupby:b},...c];return{bins:p,timeUnits:g,transform:C,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:h}}const Vee="errorbar",m9t=["ticks","rule"],g9t=new dL(Vee,A3e);function A3e(e,{config:t}){e={...e,encoding:hL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:u,tooltipEncoding:l}=D3e(e,Vee,t);delete o.size;const c=Uee(a,i,r,o,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:s,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},m=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...m.length>1?{layer:m}:{...m[0]}}}function y9t(e,t){const{encoding:n}=e;if(v9t(n))return{orient:E3e(e,t),inputType:"raw"};const r=b9t(n),i=x9t(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Yn(a)&&Yn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Yn(a)){if(i1(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Yn(u)){if(i1(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Yn(u)&&!Yn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Yn(c)&&!Yn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Yn(a)&&Yn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Yn(a)){if(i1(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Yn(l)){if(i1(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function v9t(e){return(Yn(e.x)||Yn(e.y))&&!Yn(e.x2)&&!Yn(e.y2)&&!Yn(e.xError)&&!Yn(e.xError2)&&!Yn(e.yError)&&!Yn(e.yError2)}function b9t(e){return Yn(e.x2)||Yn(e.y2)}function x9t(e){return Yn(e.xError)||Yn(e.xError2)||Yn(e.yError)||Yn(e.yError2)}function D3e(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,u=bm(r)?r:{type:r};o&&Mt(bNe(t));const{orient:l,inputType:c}=y9t(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:m,continuousAxis:p}=_3e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:w}=w9t(u,f,d,h,m,c,t,n),{[p]:E,[p==="x"?"x2":"y2"]:T,[p==="x"?"xError":"yError"]:C,[p==="x"?"xError2":"yError2"]:S,...I}=i,{bins:R,timeUnits:P,aggregate:M,groupby:B,encoding:L}=b3e(I,n),z=[...M,...g],G=c!=="raw"?[]:B,W=rq(b,f,L,w);return{transform:[...a.transform??[],...R,...P,...z.length===0?[]:[{aggregate:z,groupby:G}],...v],groupby:G,continuousAxisChannelDef:f,continuousAxis:p,encodingWithoutContinuousAxis:L,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:W}}function w9t(e,t,n,r,i,o,s,a){let u=[],l=[];const c=t.field;let f,d=!1;if(o==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,m=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(m==="iqr")&&Mt(R$t(h,m,s)),m==="stderr"||m==="stdev")u=[{op:m,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${vi(`center_${c}`)} + ${vi(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${vi(`center_${c}`)} - ${vi(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:RR(h)},{fieldPrefix:"upper_",titlePrefix:xhe(h,m,"+")},{fieldPrefix:"lower_",titlePrefix:xhe(h,m,"-")}],d=!0;else{let p,g,v;m==="ci"?(p="mean",g="ci0",v="ci1"):(p="median",g="q1",v="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:p,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:f2({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:f2({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:f2({field:c,aggregate:p,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Mt(I$t(e.center,e.extent)),o==="aggregated-upper-lower"?(f=[],l=[{calculate:vi(n.field),as:`upper_${c}`},{calculate:vi(c),as:`lower_${c}`}]):o==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${vi(c)} + ${vi(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${vi(c)} + ${vi(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${vi(c)} - ${vi(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Px(Px(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function xhe(e,t,n){return`${RR(e)} ${n} ${t}`}const Hee="errorband",_9t=["band","borders"],E9t=new dL(Hee,k3e);function k3e(e,{config:t}){e={...e,encoding:hL(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:u}=D3e(e,Hee,t),l=s,c=Uee(l,i,r,o,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const m={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...m,ariaRoleDescription:"errorband"},h={...h,...m,aria:!1}):l.interpolate?Mt(fhe("interpolate")):l.tension&&Mt(fhe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const I3e={};function qee(e,t,n){const r=new dL(e,t);I3e[e]={normalizer:r,parts:n}}function T9t(){return It(I3e)}qee(AM,C3e,d9t);qee(Vee,A3e,m9t);qee(Hee,k3e,_9t);const C9t=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],R3e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},N3e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},S9t=It(R3e),A9t=It(N3e),D9t={header:1,headerRow:1,headerColumn:1,headerFacet:1},P3e=It(D9t),O3e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],k9t={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},I9t={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Mh="_vgsid_",R9t={point:{on:"click",fields:[Mh],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Wee(e){return e==="legend"||!!(e!=null&&e.legend)}function kj(e){return Wee(e)&&qt(e)}function Gee(e){return!!(e!=null&&e.select)}function F3e(e){const t=[];for(const n of e||[]){if(Gee(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function N9t(e){return pL(e)||Kee(e)||Yee(e)}function Yee(e){return Pt(e,"concat")}function pL(e){return Pt(e,"vconcat")}function Kee(e){return Pt(e,"hconcat")}function M3e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function xm(e){return Pt(e,"step")}function whe(e){return Pt(e,"view")||Pt(e,"width")||Pt(e,"height")}const _he=20,P9t={align:1,bounds:1,center:1,columns:1,spacing:1},O9t=It(P9t);function F9t(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(uL(e)&&!LR(e.facet)||Yee(e))&&(i.columns=s),pL(e)&&(i.columns=1);for(const a of O9t)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ti(u)?u:{row:u.row??o,column:u.column??o}}else i[a]=e[a];return i}function iq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function oq(e,t){const n=DM(e,t);return xm(n)?n.step:$3e}function DM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return cs(n,{step:e.step})}const $3e=20,M9t={continuousWidth:200,continuousHeight:200,step:$3e},$9t={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:M9t,mark:DLt,arc:{},area:{},bar:NLt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Iee,rule:{color:"black"},square:{},text:{color:"black"},tick:PLt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:lLt,projection:{},legend:k9t,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:R9t,style:{},title:{},facet:{spacing:_he},concat:{spacing:_he},normalizedNumberFormat:".0%"},w0=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Ehe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},The={blue:w0[0],orange:w0[1],red:w0[2],teal:w0[3],green:w0[4],yellow:w0[5],purple:w0[6],pink:w0[7],brown:w0[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function L9t(e={}){return{signals:[{name:"color",value:qt(e)?{...The,...e}:The}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function B9t(e){return{signals:[{name:"fontSize",value:qt(e)?{...Ehe,...e}:Ehe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function j9t(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function L3e(e){const t=It(e||{}),n={};for(const r of t){const i=e[r];n[r]=UR(i)?dNe(i):tf(i)}return n}function z9t(e){const t=It(e),n={};for(const r of t)n[r]=L3e(e[r]);return n}const U9t=[...GNe,...m3e,...P3e,"background","padding","legend","lineBreak","scale","style","title","view"];function B3e(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=hC({},Vn($9t),n?j9t(n):{},t?L9t(t):{},r?B9t(r):{},o||{});i&&pC(s,"selection",i,!0);const a=dc(s,U9t);for(const u of["background","lineBreak","padding"])s[u]&&(a[u]=tf(s[u]));for(const u of GNe)s[u]&&(a[u]=za(s[u]));for(const u of m3e)s[u]&&(a[u]=L3e(s[u]));for(const u of P3e)s[u]&&(a[u]=za(s[u]));if(s.legend&&(a.legend=za(s.legend)),s.scale){const{invalid:u,...l}=s.scale,c=za(u,{level:1});a.scale={...za(l),...It(c).length>0?{invalid:c}:{}}}return s.style&&(a.style=z9t(s.style)),s.title&&(a.title=za(s.title)),s.view&&(a.view=za(s.view)),a}const V9t=new Set(["view",..._Lt]),H9t=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],q9t={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...ALt};function W9t(e){e=Vn(e);for(const t of H9t)delete e[t];if(e.axis)for(const t in e.axis)UR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of C9t)delete e.legend[t];if(e.mark){for(const t of hhe)delete e.mark[t];e.mark.tooltip&&qt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(F3e(e.params)),delete e.params);for(const t of V9t){for(const r of hhe)delete e[t][r];const n=q9t[t];if(n)for(const r of n)delete e[t][r];Y9t(e,t)}for(const t of T9t())delete e[t];G9t(e);for(const t in e)qt(e[t])&&Ai(e[t])&&delete e[t];return Ai(e)?void 0:e}function G9t(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=fNe(e.title);Ai(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ai(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ai(r)?delete e.title:e.title=r}function Y9t(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};Ai(o)||(e.style[n??t]=o),delete e[t]}function mL(e){return Pt(e,"layer")}function K9t(e){return Pt(e,"repeat")}function X9t(e){return!gt(e.repeat)&&Pt(e.repeat,"layer")}class Xee{map(t,n){return uL(t)?this.mapFacet(t,n):K9t(t)?this.mapRepeat(t,n):Kee(t)?this.mapHConcat(t,n):pL(t)?this.mapVConcat(t,n):Yee(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(mL(t))return this.mapLayer(t,n);if(zg(t))return this.mapUnit(t,n);throw new Error(fee(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Q9t={zero:1,center:1,normalize:1};function J9t(e){return Zt(Q9t,e)}const Z9t=new Set([HNe,iL,rL,wM,sL,Dee,kee,oL,qNe,Aee]),eBt=new Set([iL,rL,HNe]);function mE(e){return Bt(e)&&pT(e)==="quantitative"&&!e.bin}function Che(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(Bt(s)&&Bt(a))if(mE(s)&&mE(a)){if(s.stack)return t;if(a.stack)return i;const u=Bt(s)&&!!s.aggregate,l=Bt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(mE(s))return t;if(mE(a))return i}else{if(mE(s))return o&&n==="vertical"?void 0:t;if(mE(a))return o&&n==="horizontal"?void 0:i}}function tBt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function j3e(e,t){var p,g;const n=bm(e)?e:{type:e},r=n.type;if(!Z9t.has(r))return null;const i=Che(t,"x",n)||Che(t,"theta",n);if(!i)return null;const o=t[i],s=Bt(o)?Ht(o,{}):void 0,a=tBt(i),u=[],l=new Set;if(t[a]){const v=t[a],b=Bt(v)?Ht(v,{}):void 0;b&&b!==s&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Bt(f)?Ht(f,{}):void 0;d&&d!==s&&(u.push(c),l.add(d));const h=u8t.reduce((v,b)=>{if(b!=="tooltip"&&fx(t,b)){const w=t[b];for(const E of Gt(w)){const T=Fh(E);if(T.aggregate)continue;const C=Ht(T,{});(!C||!l.has(C))&&v.push({channel:b,fieldDef:T})}}return v},[]);let m;return o.stack!==void 0?pv(o.stack)?m=o.stack?"zero":null:m=o.stack:eBt.has(r)&&(m="zero"),!m||!J9t(m)||v3e(t)&&h.length===0?null:((p=o==null?void 0:o.scale)!=null&&p.type&&((g=o==null?void 0:o.scale)==null?void 0:g.type)!==Ua.LINEAR&&o!=null&&o.stack&&Mt(A$t(o.scale.type)),Yn(t[Lm(i)])?(o.stack!==void 0&&Mt(S$t(i)),null):(Bt(o)&&o.aggregate&&!w8t.has(o.aggregate)&&Mt(D$t(o.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:o.impute===null?!1:Tv(r),stackBy:h,offset:m}))}function z3e(e,t,n){const r=za(e),i=Si("orient",r,n);if(r.orient=oBt(r.type,t,i),i!==void 0&&i!==r.orient&&Mt(c$t(r.orient,i)),r.type==="bar"&&r.orient){const u=Si("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:ILt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=Si("opacity",r,n),s=Si("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=rBt(r.type,t)),Si("cursor",r,n)===void 0&&(r.cursor=nBt(r,t,n)),r}function nBt(e,t,n){return t.href||e.href||Si("href",e,n)?"pointer":e.cursor}function rBt(e,t){if(yr([sL,Aee,Dee,kee],e)&&!v3e(t))return .7}function iBt(e,t,{graticule:n}){if(n)return!1;const r=vm("filled",e,t),i=e.type;return cs(r,i!==sL&&i!==oL&&i!==wM)}function oBt(e,t,n){switch(e){case sL:case Dee:case kee:case qNe:case xLt:case bLt:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case iL:if(Bt(r)&&(ja(r.bin)||Bt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Bt(i)&&(ja(i.bin)||Bt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(Bt(r)&&r.type===$x&&!Gi(r.bin)||EM(r))&&Bt(i)&&ja(i.bin)?"horizontal":"vertical";if(!s)return(Bt(i)&&i.type===$x&&!Gi(i.bin)||EM(i))&&Bt(r)&&ja(r.bin)?"vertical":"horizontal"}case wM:if(o&&!(Bt(r)&&ja(r.bin))&&s&&!(Bt(i)&&ja(i.bin)))return;case rL:if(s)return Bt(i)&&ja(i.bin)?"horizontal":"vertical";if(o)return Bt(r)&&ja(r.bin)?"vertical":"horizontal";if(e===wM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case oL:case Aee:{const a=yhe(r),u=yhe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Tl(r)&&r.type===dT,c=Tl(i)&&i.type===dT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function sBt(e){const{point:t,line:n,...r}=e;return It(r).length>1?r:r.type}function aBt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:dc(e[t],["point","line"])});return e}function Ij(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?qt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?qt(t.point)?t.point:{}:void 0}function She(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class uBt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(zg(t)){const{mark:r,encoding:i}=t,o=bm(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!Ij(o,n[o.type],i);case"area":return!!Ij(o,n[o.type],i)||!!She(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:u,encoding:l,...c}=t,f=hL(l,i),d=bm(a)?a:{type:a},h=Ij(d,i[d.type],f),m=d.type==="area"&&She(d,i[d.type]),p=[{name:u,...o?{params:o}:{},mark:sBt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:dc(f,["shape"])}],g=j3e(z3e(d,f,i),f);let v=f;if(g){const{fieldChannel:b,offset:w}=g;v={...f,[b]:{...f[b],...w?{stack:w}:{}}}}return v=dc(v,["y2","x2"]),m&&p.push({...s?{projection:s}:{},mark:{type:"line",...uT(d,["clip","interpolate","tension","tooltip"]),...m},encoding:v}),h&&p.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...uT(d,["clip","tooltip"]),...h},encoding:v}),r({...c,layer:p},{...n,config:aBt(i)})}}function lBt(e,t){return t?LR(e)?V3e(e,t):U3e(e,t):e}function Rj(e,t){return t?V3e(e,t):e}function sq(e,t,n){const r=t[e];if(qLt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Mt(z8t(r.repeat));return}return t}function U3e(e,t){if(e=sq("field",e,t),e!==void 0){if(e===null)return null;if(Mee(e)&&ig(e.sort)){const n=sq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Ahe(e,t){if(Bt(e))return U3e(e,t);{const n=sq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Dhe(e,t){if(Yn(e)){const n=Ahe(e,t);if(n)return n;if(BR(e))return{condition:e.condition}}else{if(jR(e)){const n=Ahe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function V3e(e,t){const n={};for(const r in e)if(Pt(e,r)){const i=e[r];if(gt(i))n[r]=i.map(o=>Dhe(o,t)).filter(o=>o);else{const o=Dhe(i,t);o!==void 0&&(n[r]=o)}}return n}class cBt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(zg(t)){const{encoding:n,mark:r}=t;if(r==="line"||bm(r)&&r.type==="line")for(const i of o8t){const o=Cw(i),s=n[o];if(n[i]&&(Bt(s)&&!ja(s.bin)||jm(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return Mt(l$t(!!i.x2,!!i.y2)),r({...t,mark:qt(o)?{...o,type:"rule"}:"rule"},n)}}class fBt extends Xee{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[h9t,g9t,E9t,new uBt,new cBt]}map(t,n){if(zg(t)){const r=fx(t.encoding,ng),i=fx(t.encoding,rg),o=fx(t.encoding,W$);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=Rj(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(s,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,a);return s}mapRepeat(t,n){return X9t(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:s,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return s||a?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...o,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${co(f)}`,m=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return m.name=h,m})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...s}=t;!gt(r)&&t.columns&&(t=dc(t,["columns"]),Mt(ahe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!gt(r)&&r.row||[u?u.row:null],f=!gt(r)&&r.column||[u?u.column:null],d=gt(r)&&r||[u?u.repeat:null];for(const m of d)for(const p of c)for(const g of f){const v={repeat:m,row:p,column:g,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(gt(r)?`${co(m)}`:(r.row?`row_${co(p)}`:"")+(r.column?`column_${co(g)}`:"")),w=this.map(i,{...n,repeater:v,repeaterPrefix:b});w.name=b,a.push(dc(w,["data"]))}const h=gt(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...s,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return LR(r)&&t.columns&&(t=dc(t,["columns"]),Mt(ahe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:s,config:a}=n,u=Ihe({parentProjection:s,projection:i}),l=khe({parentEncoding:o,encoding:Rj(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...s}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...m}=t,{facetMapping:p,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),v=Rj(s,n.repeater);return this.mapFacet({...m,...g,facet:p,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:v,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&Mt(a$t([...r?[ng]:[],...i?[rg]:[]]));const s={},a={};for(const u of[ng,rg]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...m}=l;s[u]=m;for(const p of["align","center","spacing"])l[p]!==void 0&&(a[p]??(a[p]={}),a[p][u]=l[p])}}return{facetMapping:s,layout:a}}else{const{align:s,center:a,spacing:u,columns:l,...c}=o;return{facetMapping:lBt(c,n.repeater),layout:{...s?{align:s}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:s,...a}=t,u={...i,parentEncoding:khe({parentEncoding:n,encoding:o,layer:!0}),parentProjection:Ihe({parentProjection:r,projection:s})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function khe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...It(e),...It(t)]);for(const o of i){const s=t[o],a=e[o];if(Yn(s)){const u={...a,...s};r[o]=u}else jR(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||Oh(a)||yn(a)||Yn(a)||gt(a))&&(r[o]=a)}}else r=t;return!r||Ai(r)?void 0:r}function Ihe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Mt(X8t({parentProjection:t,projection:n})),n??t}function Qee(e){return Pt(e,"filter")}function dBt(e){return Pt(e,"stop")}function H3e(e){return Pt(e,"lookup")}function hBt(e){return Pt(e,"data")}function pBt(e){return Pt(e,"param")}function mBt(e){return Pt(e,"pivot")}function gBt(e){return Pt(e,"density")}function yBt(e){return Pt(e,"quantile")}function vBt(e){return Pt(e,"regression")}function bBt(e){return Pt(e,"loess")}function xBt(e){return Pt(e,"sample")}function wBt(e){return Pt(e,"window")}function _Bt(e){return Pt(e,"joinaggregate")}function EBt(e){return Pt(e,"flatten")}function TBt(e){return Pt(e,"calculate")}function q3e(e){return Pt(e,"bin")}function CBt(e){return Pt(e,"impute")}function SBt(e){return Pt(e,"timeUnit")}function ABt(e){return Pt(e,"aggregate")}function DBt(e){return Pt(e,"stack")}function kBt(e){return Pt(e,"fold")}function IBt(e){return Pt(e,"extent")&&!Pt(e,"density")&&!Pt(e,"regression")}function RBt(e){return e.map(t=>Qee(t)?{filter:l2(t.filter,nLt)}:t)}class NBt extends Xee{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Rhe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Rhe(t,n),t.encoding){const r={};for(const[i,o]of j1(t.encoding))r[i]=W3e(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:j1(r).map(([o,s])=>{const{init:a,bind:u,empty:l,...c}=s;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=l!=="none";for(const f of Ja(n.selectionPredicates[o]??{}))f.empty=l!=="none";return{name:o,value:a,select:c,bind:u}})}:t}}function Rhe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(Qee(o))return{filter:aq(o,t)};if(q3e(o)&&Sw(o.bin))return{...o,bin:G3e(o.bin)};if(H3e(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function W3e(e,t){var r,i;const n=Vn(e);if(Bt(n)&&Sw(n.bin)&&(n.bin=G3e(n.bin)),Iw(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(BR(n))if(gt(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:u,...l}=o;return a?o:{...l,test:aq(o,t)}});else{const{selection:o,param:s,test:a,...u}=W3e(n.condition,t);n.condition=s?n.condition:{...u,test:aq(n.condition,t)}}return n}function G3e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function aq(e,t){const n=r=>l2(r,i=>{var o;const s=t.emptySelections[i]??!0,a={param:i,empty:s};return(o=t.selectionPredicates)[i]??(o[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):l2(e.test||e.filter,r=>r.selection?n(r.selection):r)}class uq extends Xee{map(t,n){const r=n.selections??[];if(t.params&&!zg(t)){const i=[];for(const o of t.params)Gee(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(Yt(a)&&(a===t.name||i.includes(a))||gt(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=uq.prototype[e];uq.prototype[e]=function(n,r){return t.call(this,n,PBt(n,r))}}function PBt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Y3e(e,t){t===void 0&&(t=B3e(e.config));const n=$Bt(e,t),{width:r,height:i}=e,o=LBt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const OBt=new fBt,FBt=new NBt,MBt=new uq;function $Bt(e,t={}){const n={config:t};return MBt.map(OBt.map(FBt.map(e,n),n),n)}function Nhe(e){return Yt(e)?{type:e}:e??{}}function LBt(e,t,n){let{width:r,height:i}=t;const o=zg(e)||mL(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(Mt(rhe("width")),r=void 0),i=="container"&&(Mt(rhe("height")),i=void 0));const a={type:"pad",...s,...n?Nhe(n.autosize):{},...Nhe(e.autosize)};if(a.type==="fit"&&!o&&(Mt(I8t),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Mt(ihe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Mt(ihe("height")),!lf(a,{type:"pad"}))return a}function BBt(e){return["fit","fit-x","fit-y"].includes(e)}function jBt(e){return e?`fit-${Q$(e)}`:"fit"}const zBt=["background","padding"];function Phe(e,t){const n={};for(const r of zBt)e&&e[r]!==void 0&&(n[r]=tf(e[r]));return t&&(n.params=e.params),n}class Ug{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Ug(Vn(this.explicit),Vn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return cs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of It(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ap(e){return{explicit:!0,value:e}}function Qc(e){return{explicit:!1,value:e}}function K3e(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:gL(t,n,r,i)}}function gL(e,t,n,r){return e.explicit&&t.explicit&&Mt(b$t(n,r,e.value,t.value)),e}function V1(e,t,n,r,i=gL){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:lf(e.value,t.value)?e:i(e,t,n,r)}class UBt extends Ug{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function yT(e){return Pt(e,"url")}function oI(e){return Pt(e,"values")}function X3e(e){return Pt(e,"name")&&!yT(e)&&!oI(e)&&!g1(e)}function g1(e){return e&&(Q3e(e)||J3e(e)||Jee(e))}function Q3e(e){return Pt(e,"sequence")}function J3e(e){return Pt(e,"sphere")}function Jee(e){return Pt(e,"graticule")}var So;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(So||(So={}));function Z3e({invalid:e,isPath:t}){switch(YNe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function VBt(e){const{marks:t,scales:n}=Z3e(e);return t===n?So.Main:n==="include-invalid-values"?So.PreFilterInvalid:So.PostFilterInvalid}class _i{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Mt(G8t);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class hc extends _i{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${KRe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Nj(e){return e.as!==void 0}function Ohe(e){return`${e}_end`}class Kp extends _i{clone(){return new Kp(null,Vn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{const{field:a,timeUnit:u}=o;if(u){let l;if(kw(u)){if(Eo(n)){const{mark:c,markDef:f,config:d}=n,h=U1({fieldDef:o,markDef:f,config:d});(iI(c)||h)&&(l={timeUnit:ga(u),field:a})}}else l={as:Ht(o,{forAs:!0}),field:a,timeUnit:u};if(Eo(n)){const{mark:c,markDef:f,config:d}=n,h=U1({fieldDef:o,markDef:f,config:d});iI(c)&&fs(s)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Ar(l)]=l)}return i},{});return Ai(r)?null:new Kp(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=ga(r),s={...i,timeUnit:o};return new Kp(t,{[Ar(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of j1(this.timeUnits)){const o=Nj(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ja(this.timeUnits).map(t=>Nj(t)?t.as:Ohe(t.field)))}dependentFields(){return new Set(Ja(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ar(this.timeUnits)}`}assemble(){const t=[];for(const n of Ja(this.timeUnits)){const{rectBandPosition:r}=n,i=ga(n.timeUnit);if(Nj(n)){const{field:o,as:s}=n,{unit:a,utc:u,...l}=i,c=[s,`${s}_end`];t.push({field:pd(o),type:"timeunit",...a?{units:tL(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Fhe(c,r,i))}else if(n){const{field:o}=n,s=o.replaceAll("\\.","."),a=ePe({timeUnit:i,field:s}),u=Ohe(s);t.push({type:"formula",expr:a,as:u}),t.push(...Fhe([s,u],r,i))}}return t}}const yL="offsetted_rect_start",vL="offsetted_rect_end";function ePe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=INe(r),{part:s,step:a}=ONe(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${vi(t)}, ${n?-a:a})`}function Fhe([e,t],n,r){if(n!==void 0&&n!==.5){const i=vi(e),o=vi(t);return[{type:"formula",expr:Mhe([ePe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${yL}`},{type:"formula",expr:Mhe([i,o],n+.5),as:`${e}_${vL}`}]}return[]}function Mhe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const VR="_tuple_fields";class HBt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const qBt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new HBt),o={},s={},a=new Set,u=(m,p)=>{const g=p==="visual"?m.channel:m.field;let v=co(`${r}_${g}`);for(let b=1;a.has(v);b++)v=co(`${r}_${g}_${b}`);return a.add(v),{[p]:v}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Gt(n.value):null;let{fields:d,encodings:h}=qt(n.select)?n.select:{};if(!d&&!h&&f){for(const m of f)if(qt(m))for(const p of It(m))i8t(p)?(h||(h=[])).push(p):l==="interval"?(Mt(j8t),h=c.encodings):(d??(d=[])).push(p)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const m of h??[]){const p=e.fieldDef(m);if(p){let g=p.field;if(p.aggregate){Mt(R8t(m,p.aggregate));continue}else if(!g){Mt(she(m));continue}if(p.timeUnit&&!kw(p.timeUnit)){g=e.vgField(m);const v={timeUnit:p.timeUnit,as:g,field:p.field};s[Ar(v)]=v}if(!o[g]){const v=l==="interval"&&Bm(m)&&Ph(e.getScaleComponent(m).get("type"))?"R":p.bin?"R-RE":"E",b={field:g,channel:m,type:v,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(o[g]=b),i.hasField[g]=o[g],i.hasSelectionId=i.hasSelectionId||g===Mh,tNe(m)?(b.geoChannel=m,b.channel=eNe(m),i.hasChannel[b.channel]=o[g]):i.hasChannel[m]=o[g]}}else Mt(she(m))}for(const m of d??[]){if(i.hasField[m])continue;const p={type:"E",field:m,index:i.items.length};p.signals={...u(p,"data")},i.items.push(p),i.hasField[m]=p,i.hasSelectionId=i.hasSelectionId||m===Mh}f&&(t.init=f.map(m=>i.items.map(p=>qt(m)?m[p.geoChannel||p.channel]!==void 0?m[p.geoChannel||p.channel]:m[p.field]:m))),Ai(s)||(i.timeUnit=new Kp(null,s))},signals:(e,t,n)=>{const r=t.name+VR;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(iPe)})}},tPe="_curr",QO="anim_value",PE="anim_clock",lq="eased_anim_clock",nPe="min_extent",rPe="max_range_extent",Pj="last_tick_at",Oj="is_playing",WBt=1/60*1e3,GBt=(e,t)=>[{name:lq,update:PE},{name:`${e}_domain`,init:`domain('${t}')`},{name:nPe,init:`extent(${e}_domain)[0]`},{name:rPe,init:`extent(range('${t}'))[1]`},{name:QO,update:`invert('${t}', ${lq})`}],YBt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Xp(t)&&(n=n.concat([{name:PE,init:"0",on:[{events:{type:"timer",throttle:WBt},update:`${Oj} ? (${PE} + (now() - ${Pj}) > ${rPe} ? 0 : ${PE} + (now() - ${Pj})) : ${PE}`}]},{name:Pj,init:"now()",on:[{events:[{signal:PE},{signal:Oj}],update:"now()"}]},{name:Oj,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+VR,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Ja(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+d2):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${dx(e)}, `;if(t.project.hasSelectionId)l+=`${Mh}: ${s}[${zt(Mh)}]`;else if(Xp(t))l+=`fields: ${i}, values: [${QO} ? ${QO} : ${nPe}]`;else{const c=o.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${s}[${zt(e.vgField(f.channel,{}))}], ${s}[${zt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${s}[${zt(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(Xp(t))return n.concat(GBt(t.name,e.scaleName(vv)),[{name:r+Tg,on:[{events:[{signal:lq},{signal:QO}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+Tg,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function iPe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=pd(i.field),i}function jx(e,t=!0,n=Vu){if(gt(e)){const r=e.map(i=>jx(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Dw(e))return n(t?Mx(e):H$t(e));return t?n(Di(e)):e}function KBt(e,t){for(const n of Ja(e.component.selection??{})){const r=n.name;let i=`${r}${Tg}, ${n.resolve==="global"?"true":`{unit: ${dx(e)}}`}`;for(const o of xL)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+_7t,on:[{events:{signal:n.name+Tg},update:`modify(${zt(n.name+zx)}, ${i})`}]})}return Zee(t)}function XBt(e,t){if(e.component.selection&&It(e.component.selection).length){const n=zt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:gv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Zee(t)}function QBt(e,t){let n=!1;for(const r of Ja(e.component.selection??{})){const i=r.name,o=zt(i+zx);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${wPe}(${o}, ${zt(a)}${u}`})}n=!0;for(const a of xL)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Zee(t)}function JBt(e,t){const n=[],r=[],i=dx(e,{escape:!1});for(const o of Ja(e.component.selection??{})){const s={name:o.name+zx};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Mh}}]),o.init){const u=o.project.items.map(iPe);s.values=o.project.hasSelectionId?o.init.map(l=>({unit:i,[Mh]:jx(l,!1)[0]})):o.init.map(l=>({unit:i,fields:u,values:jx(l,!1)}))}if([...n,...t].filter(u=>u.name===o.name+zx).length||n.push(s),Xp(o)&&t.length){const u=e.lookupDataSource(e.getDataName(So.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+tPe,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function oPe(e,t){for(const n of Ja(e.component.selection??{}))for(const r of xL)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function ZBt(e,t){for(const n of e.children)Eo(n)&&(t=oPe(n,t));return t}function e7t(e,t,n,r){const i=SPe(e,t.param,t);return{signal:Ph(n.get("type"))&&gt(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Zee(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const og={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Bm(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&Mt(F8t),!o||!Ph(s)){Mt(O8t);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||fq(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(wPe))i.update=`{${r.map(s=>`${zt(pd(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${zt(pd(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!fq(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function cq(e,t){return`domain(${zt(e.scaleName(t))})`}function fq(e){return e.parent&&RC(e.parent)&&(!e.parent.parent||fq(e.parent.parent))}const d2="_brush",sPe="_scale_trigger",xA="geo_interval_init_tick",aPe="_init",t7t="_center",n7t={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...qt(n.select)?n.select:{}};i.fields=[Mh],i.encodings||(i.encodings=n.value?It(n.value):[Yh,Gh]),n.select={type:"interval",...i}}if(t.translate&&!og.defined(t)){const i=`!event.item || event.item.mark.name !== ${zt(t.name+d2)}`;for(const o of t.events){if(!o.between){Mt(`${o} is not an ordered event stream for interval selections.`);continue}const s=Gt((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Tg,o=Ja(t.project.hasChannel).filter(a=>a.channel===ho||a.channel===_a),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,u)=>a.concat(r7t(e,t,u,s&&s[u.index])),[])),e.hasProjection){const a=zt(e.projectionName()),u=e.projectionName()+t7t,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?s&&s[l.index]:`${u}[0]`,m=c?s&&s[c.index]:`${u}[1]`,p=T=>e.getSizeSignalRef(T).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":p("width")}, ${d?d+"[1]":p("height")}]]`;s&&(n.unshift({name:r+aPe,init:`[scale(${a}, [${l?h[0]:h}, ${c?m[0]:m}]), scale(${a}, [${l?h[1]:h}, ${c?m[1]:m}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${p("width")}/2, ${p("height")}/2])`})));const v=`intersect(${g}, {markname: ${zt(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${dx(e)}}`,w=`vlSelectionTuples(${v}, ${b})`,E=o.map(T=>T.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...s?[{signal:xA}]:[]],update:w}]})}else{if(!og.defined(t)){const l=r+sPe,c=o.map(f=>{const d=f.channel,{data:h,visual:m}=f.signals,p=zt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=Ph(g)?"+":"";return`(!isArray(${h}) || (${v}invert(${p}, ${m})[0] === ${v}${h}[0] && ${v}invert(${p}, ${m})[1] === ${v}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:o.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=o.map(l=>l.signals.data),u=`unit: ${dx(e)}, fields: ${r+VR}, values`;return n.concat({name:i,...s?{init:`{${u}: ${jx(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Eo(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===xA).length||n.unshift({name:xA,value:null,on:[{events:"timer{1}",update:`${xA} === null ? {} : ${xA}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,u=`data(${zt(t.name+zx)})`;if(og.defined(t)||!i&&!o)return n;const l={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of It(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${dx(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,m=It(h).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[v]},{value:null}],g),{}),p=d??(t.translate?"move":null);return[{name:`${r+d2}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+d2,type:"rect",clip:!0,encode:{enter:{...p?{cursor:{value:p}}:{},fill:{value:"transparent"}},update:{...l,...m}}}]}};function r7t(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=zt(i?e.scaleName(o):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(o===ho?"width":"height").signal,c=`${o}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${s}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=og.defined(t),m=e.getScaleComponent(o),p=m?m.get("type"):void 0,g=r?{init:jx(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+sPe},update:Ph(p)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:s,...g,on:f},{name:d,...r?{init:jx(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const d=o===ho?0:1,h=t.name+aPe,m=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:s,...m,on:f}]}}function AC({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=BR(t)&&t.condition;let s=[];o&&(s=Gt(o).map(l=>{const c=i(l);if(HLt(l)){const{param:f,empty:d}=l;return{test:CPe(e,{param:f,empty:d}),...c}}else return{test:RM(e,l.test),...c}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function ete(e,t="text"){const n=e.encoding[t];return AC({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>bL(r,e.config),invalidValueRef:void 0})}function bL(e,t,n="datum"){if(e){if(Oh(e))return to(e.value);if(Yn(e)){const{format:r,formatType:i}=CM(e);return Oee({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function uPe(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(gt(s))return{tooltip:$he({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return AC({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:l=>{const c=bL(l,i,a);if(c)return c;if(l===null)return;let f=Si("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Yt(f))return{value:f};if(qt(f))return yn(f)?f:f.content==="encoding"?$he(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function lPe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function u(c,f){const d=Cw(f),h=Tl(c)?c:{...c,type:e[d].type},m=h.title||Lee(h,i),p=Gt(m).join(", ").replaceAll(/"/g,'\\"');let g;if(fs(f)){const v=f==="x"?"x2":"y2",b=Fh(e[v]);if(ja(h.bin)&&b){const w=Ht(h,{expr:s}),E=Ht(b,{expr:s}),{format:T,formatType:C}=CM(h);g=$R(w,E,T,C,i),o.add(v)}}if((fs(f)||f===Sd||f===Wh)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:v,formatType:b}=CM(h);g=Oee({fieldOrDatumDef:h,format:v,formatType:b,expr:s,config:i,normalizeStack:!0}).signal}g??(g=bL(h,i,s).signal),a.push({channel:f,key:p,value:g})}jee(e,(c,f)=>{Bt(c)?u(c,f):lL(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!o.has(c)&&!l[f]&&(l[f]=d);return l}function $he(e,t,n,{reactiveGeom:r}={}){const i=lPe(e,t,n,{reactiveGeom:r}),o=j1(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function i7t(e){const{markDef:t,config:n}=e,r=Si("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...o7t(e),...s7t(e)}}function o7t(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Si("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Zt(A8t,t)?{}:{ariaRoleDescription:{value:t}}}function s7t(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return AC({model:e,channelDef:o,vgChannel:"description",mainRefFn:u=>bL(u,e.config),invalidValueRef:void 0});const s=Si("description",n,r);if(s!=null)return{description:to(s)};if(r.aria===!1)return{};const a=lPe(t,i,r);if(!Ai(a))return{description:{signal:j1(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function qa(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=Si(e,r,o,{vgChannel:s,ignoreVgConfig:!BR(l)})),u!==void 0&&(a=to(u)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=XNe({...c,scaleChannel:e,channelDef:l});return AC({model:t,channelDef:l,vgChannel:s??e,invalidValueRef:f,mainRefFn:h=>Pee({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function cPe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??Si("filled",n,i),a=yr(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=Si(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,l=Si(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],c=s?"fill":"stroke",f={...u?{fill:to(u)}:{},...l?{stroke:to(l)}:{}};return n.color&&(s?n.fill:n.stroke)&&Mt(wNe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...qa("color",e,{vgChannel:c,defaultValue:s?u:l}),...qa("fill",e,{defaultValue:r.fill?u:void 0}),...qa("stroke",e,{defaultValue:r.stroke?l:void 0})}}function a7t(e){const{encoding:t,mark:n}=e,r=t.order;return!Tv(n)&&Oh(r)?AC({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>to(i.value),invalidValueRef:void 0}):{}}function vT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:Pee({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:to(s),bandPosition:i})};const u=t[o];return u?{offsetType:"visual",offset:u}:{}}function vl(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,u=i[e],l=i[Lm(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=vT({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),m=tte({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!u&&fs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:u7t({channel:e,channelDef:u,channel2Def:l,markDef:o,config:s,scaleName:c,scale:f,stack:a,offset:d,defaultRef:m,bandPosition:h==="encoding"?0:void 0});return p?{[r||e]:p}:void 0}function u7t(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(Yn(n)&&i&&t===i.fieldChannel){if(Bt(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return _M({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return cx(n,r,{suffix:"end"},{offset:o})}return Nee(e)}function tte({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Cw(n),u=z1(n),l=Si(n,o,s,{vgChannel:u});if(l!==void 0)return QD(n,l);switch(t){case"zeroOrMin":return Lhe({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return Lhe({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[wc(n)],mult:.5}}}}function Lhe({mainChannel:e,config:t,...n}){const r=KNe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const l7t={left:"x",center:"xc",right:"x2"},c7t={top:"y",middle:"yc",bottom:"y2"};function fPe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return z1(e);const i=e==="x"?"align":"baseline",o=Si(i,t,n);let s;return yn(o)?(Mt(u$t(i)),s=void 0):s=o,e==="x"?l7t[s||(r==="top"?"left":"center")]:c7t[s||r]}function kM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?dPe(e,t,{defaultPos:n,defaultPos2:r}):vl(e,t,{defaultPos:n})}function dPe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=Lm(e),a=wc(e),u=f7t(t,r,s),l=u[a]?fPe(e,i,o):z1(e);return{...vl(e,t,{defaultPos:n,vgChannel:l}),...u}}function f7t(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,u=Cw(n),l=wc(n),c=z1(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:m}=n in r||n in o?vT({channel:n,markDef:o,encoding:r,model:e}):vT({channel:u,markDef:o,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=wc(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[c]:{field:e.getName(n)}}}const p=d7t({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:a,scaleName:d,scale:h,stack:s,offset:m,defaultRef:void 0});return p!==void 0?{[c]:p}:dP(n,o)||dP(n,{[n]:JH(n,o,a.style),[l]:JH(l,o,a.style)})||dP(n,a[i])||dP(n,a.mark)||{[c]:tte({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function d7t({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:u,defaultRef:l}){return Yn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?cx(t,o,{suffix:"start"},{offset:u}):Nee({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function dP(e,t){const n=wc(e),r=z1(e);if(t[r]!==void 0)return{[r]:QD(e,t[r])};if(t[e]!==void 0)return{[r]:QD(e,t[e])};if(t[n]){const i=t[n];if(Lx(i))Mt(n$t(n));else return{[n]:QD(e,i)}}}function Eg(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=Lm(t),a=wc(t),u=r[t],l=r[s],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Si("size",i,n,{vgChannel:a}),m=oNe(t),p=o==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||o==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return Bt(u)&&(Gi(u.bin)||ja(u.bin)||u.timeUnit&&!l)&&!(h&&!Lx(h))&&!r[m]&&!ba(f)?m7t({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Yn(u)&&ba(f)||p)&&!l?p7t(u,t,e):dPe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function h7t(e,t,n,r,i,o,s){if(Lx(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=vm("minBandSize",{type:s},r);return{signal:c?`max(${mh(c)}, ${l})`:l}}else i.band!==1&&(Mt(d$t(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(yn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Aw(u)&&ti(u.step))return{value:u.step-2}}if(!o){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=cs(u,s==="tick"?f:s==="bar"?l:c);if(yn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(ti(d))return{signal:`${1-d} * ${e}`}}return{value:oq(r.view,e)-2}}function p7t(e,t,n){var R,P;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=wc(t),f=Lm(t),d=oNe(t),h=n.scaleName(d),m=n.getScaleComponent(oee(t)),p=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(p?g=qa("size",n,{vgChannel:c,defaultRef:to(r.size)}):Mt(g$t(r.type)));const v=!!g,b=r3e({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(R=l||m)==null?void 0:R.get("type"),useVlSizeChannel:p});g=g||{[c]:h7t(c,h||u,m||l,o,b,!!e,r.type)};const w=((P=l||m)==null?void 0:P.get("type"))==="band"&&Lx(b)&&!v?"top":"middle",E=fPe(t,r,o,w),T=E==="xc"||E==="yc",{offset:C,offsetType:S}=vT({channel:t,markDef:r,encoding:i,model:n,bandPosition:T?.5:0}),I=Nee({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:s,offset:C,defaultRef:tte({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:T?S==="encoding"?0:.5:yn(b)?{signal:`(1-${b})/2`}:Lx(b)?(1-b.band)/2:0});if(c)return{[E]:I,...g};{const M=z1(f),B=g[c],L=C?{...B,offset:C}:B;return{[E]:I,[M]:gt(I)?[I[0],{...I[1],offset:L}]:{...I,offset:L}}}}function Bhe(e,t,n,r,i,o,s){if(ZRe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(yn(n)||yn(i)||yn(r)||o){const l=mh(n),c=mh(i),f=mh(r),d=mh(o),m=o?`(${s} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${s})) : ${u})`:u,p=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=c?`(${c} + ${m})`:m;return{signal:p+g+v}}else return i=i||0,r+(n?-i-u:+i+u)}function m7t({fieldDef:e,fieldDef2:t,channel:n,model:r}){var P;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=r3e({channel:n,fieldDef:e,markDef:o,config:i,scaleType:l}),d=(P=r.component.axes[n])==null?void 0:P[0],h=(d==null?void 0:d.get("translate"))??.5,m=fs(n)?Si("binSpacing",o,i)??0:0,p=Lm(n),g=z1(n),v=z1(p),b=vm("minBandSize",o,i),{offset:w}=vT({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:E}=vT({channel:p,markDef:o,encoding:s,model:r,bandPosition:0}),T=LLt({fieldDef:e,scaleName:u}),C=Bhe(n,m,c,h,w,b,T),S=Bhe(p,m,c,h,E??w,b,T),I=yn(f)?{signal:`(1-${f.signal})/2`}:Lx(f)?(1-f.band)/2:.5,R=U1({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Gi(e.bin)||e.timeUnit){const M=e.timeUnit&&R!==.5;return{[v]:jhe({fieldDef:e,scaleName:u,bandPosition:I,offset:S,useRectOffsetField:M}),[g]:jhe({fieldDef:e,scaleName:u,bandPosition:yn(I)?{signal:`1-${I.signal}`}:1-I,offset:C,useRectOffsetField:M})}}else if(ja(e.bin)){const M=cx(e,u,{},{offset:S});if(Bt(t))return{[v]:M,[g]:cx(t,u,{},{offset:C})};if(Sw(e.bin)&&e.bin.step)return{[v]:M,[g]:{signal:`scale("${u}", ${Ht(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}Mt(TNe(p))}function jhe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return _M({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:yL,endSuffix:vL}:{}})}const g7t=new Set(["aria","width","height"]);function Ad(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?cPe(e):{};return{...y7t(e.markDef,t),...zhe("fill",n),...zhe("stroke",r),...qa("opacity",e),...qa("fillOpacity",e),...qa("strokeOpacity",e),...qa("strokeWidth",e),...qa("strokeDash",e),...a7t(e),...uPe(e),...ete(e,"href"),...i7t(e)}}function zhe(e,t){return t?{[e]:t}:{}}function y7t(e,t){return S8t.reduce((n,r)=>(!g7t.has(r)&&Pt(e,r)&&t[r]!=="ignore"&&(n[r]=to(e[r])),n),{})}function nte(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var l;let s;if(!Bm(o)||!(s=e.getScaleType(o)))return;const a=J$(i.aggregate),u=Ree({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(FLt(u)){const c=e.vgField(o,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(o=>nL(o,!0)).join(" && ")}}}function Uhe(e,t){if(t!==void 0)return{[e]:to(t)}}const Fj="voronoi",hPe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Fj)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(Tv(o))return Mt(N8t(o)),n;const s={name:e.getName(Fj),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...uPe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(Fj)&&(u=!0)}),u||n.splice(a+1,0,s),n}},pPe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Wee(e.bind),parse:(e,t,n)=>_Pe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,s=t.init&&t.init[0],a=hPe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=co(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...s?{init:jx(s[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${zt(u.field)}] : null`}]:[],bind:o[u.field]??o[u.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(l=>l.name===r+Tg),s=r+VR,a=i.items.map(l=>co(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(o.update=`${u} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},IM="_toggle",mPe={defined:e=>e.type==="point"&&!Xp(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+IM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Tg,r=t.name+IM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${dx(e)}}, `)+`${r} ? ${n} : null`}},v7t={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Xp(e),parse:(e,t)=>{t.clear&&(t.clear=Yt(t.clear)?gv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(pPe.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===co(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Tg);r(i,"null"),mPe.defined(t)&&(i=n.findIndex(o=>o.name===t.name+IM),r(i,"false"))}return n}},gPe={defined:e=>{const t=e.resolve==="global"&&e.bind&&Wee(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Mh;return t&&!n&&Mt(M8t),t&&n},parse:(e,t,n)=>{const r=Vn(n);if(r.select=Yt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},_Pe(t,r),qt(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Gt(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=kj(t.bind)?t.bind.legend:"click",o=Yt(i)?gv(i,"view"):Gt(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=kj(t.bind)&&t.bind.legend,o=s=>a=>{const u=Vn(a);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${co(s.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(d=>d.name===r+Tg),s=r+VR,a=i.items.filter(d=>d.hasLegend).map(d=>co(`${r}_${co(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(o.update=l,delete o.value,delete o.on);const c=n.find(d=>d.name===r+IM),f=kj(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function b7t(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Ja(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&gPe.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const yPe="_translate_anchor",vPe="_translate_delta",x7t={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=og.defined(t),o=r+yPe,{x:s,y:a}=t.project.hasChannel;let u=gv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+d2,l))),n.push({name:o,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${i?cq(e,ho):`slice(${s.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?cq(e,_a):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+vPe,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&Vhe(e,t,s,"width",n),a!==void 0&&Vhe(e,t,a,"height",n),n}};function Vhe(e,t,n,r,i){const o=t.name,s=o+yPe,a=o+vPe,u=n.channel,l=og.defined(t),c=i.find(T=>T.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),m=d&&d.get("reverse"),p=l?u===ho?m?"":"-":m?"-":"":"",g=`${s}.extent_${u}`,v=`${p}${a}.${u} / ${l?`${f}`:`span(${g})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${g}, ${v}${w})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const bPe="_zoom_anchor",xPe="_zoom_delta",w7t={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=og.defined(t),o=r+xPe,{x:s,y:a}=t.project.hasChannel,u=zt(e.scaleName(ho)),l=zt(e.scaleName(_a));let c=gv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+d2,f))),n.push({name:r+bPe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&Hhe(e,t,s,"width",n),a!==void 0&&Hhe(e,t,a,"height",n),n}};function Hhe(e,t,n,r,i){const o=t.name,s=n.channel,a=og.defined(t),u=i.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(s),f=c&&c.get("type"),d=a?cq(e,s):u.name,h=o+xPe,m=`${o}${bPe}.${s}`,p=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${p}(${d}, ${m}, ${h}${g})`;u.on.push({events:{signal:h},update:a?v:`clampRange(${v}, 0, ${l})`})}const zx="_store",Tg="_tuple",_7t="_modify",wPe="vlSelectionResolve",xL=[YBt,n7t,qBt,mPe,pPe,og,gPe,v7t,x7t,w7t,hPe];function E7t(e){let t=e.parent;for(;t&&!mf(t);)t=t.parent;return t}function dx(e,{escape:t}={escape:!0}){let n=t?zt(e.name):e.name;const r=E7t(e);if(r){const{facet:i}=r;for(const o of id)i[o]&&(n+=` + '__facet_${o}_' + (facet[${zt(r.vgField(o))}])`)}return n}function rte(e){return Ja(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function _Pe(e,t){(Yt(t.select)||!t.select.on)&&delete e.events,(Yt(t.select)||!t.select.clear)&&delete e.clear,(Yt(t.select)||!t.select.toggle)&&delete e.toggle}function Xp(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function dq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...dq(e.object)),t.push(...dq(e.property))),t)}function EPe(e){return e.object.type==="MemberExpression"?EPe(e.object):e.object.name==="datum"}function TPe(e){const t=wZ(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&EPe(r)&&n.add(dq(r).slice(1).join("."))}),n}class DC extends _i{clone(){return new DC(null,this.model,Vn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=RM(this.model,this.filter,this),this._dependentFields=TPe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function T7t(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=co(o.name),a=o.select,u=Yt(a)?a:a.type,l=qt(a)?Vn(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=Vn(c[h]??l[h])));const f=n[s]={...l,name:s,type:u,init:o.value,bind:o.bind,events:Yt(l.on)?gv(l.on,"scope"):Gt(Vn(l.on))};if(Xp(f)&&(i++,i>1)){delete n[s];continue}const d=Vn(o);for(const h of xL)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&Mt(U8t),n}function CPe(e,t,n,r="datum"){const i=Yt(t)?t:t.param,o=co(i),s=zt(o+zx);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${zt(a.resolve)})`,c=`${u}${s}, ${r}${l}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function SPe(e,t,n){const r=co(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&Mt(V8t(o));else if(i&&!o){const a=s.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,Mt(H8t(a,i,n,o))):o=a[0].field}return`${s.name}[${zt(pd(o))}]`}function C7t(e,t){for(const[n,r]of j1(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new hc(new DC(t,e,{param:n}),i,So.Lookup,e.component.data.outputNodeRefCounts)}}function RM(e,t,n){return XD(t,r=>Yt(r)?r:Z$t(r)?CPe(e,r,n):MNe(r))}function S7t(e,t){if(e)return gt(e)&&!By(e)?e.map(n=>Lee(n,t)).join(", "):e}function Mj(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function hD(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:o,scale:s,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const m=h,p=i9t[m],g=c[m];if(p&&p!==t&&p!=="both")delete c[m];else if(UR(g)){const{condition:v,...b}=g,w=Gt(v),E=vhe[m];if(E){const{vgProp:T,part:C}=E,S=[...w.map(I=>{const{test:R,...P}=I;return{test:RM(null,R),...P}}),b];Mj(c,C,T,S),delete c[m]}else if(E===null){const T={signal:w.map(C=>{const{test:S,...I}=C;return`${RM(null,S)} ? ${nhe(I)} : `}).join("")+nhe(b)};c[m]=T}}else if(yn(g)){const v=vhe[m];if(v){const{vgProp:b,part:w}=v;Mj(c,w,b,g),delete c[m]}}yr(["labelAlign","labelBaseline"],m)&&c[m]===null&&delete c[m]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Ai(c.encode)&&delete c.encode}return{scale:s,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:cs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let m=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&yn(c.encode.labels.update.text)&&(m=Px(a,"datum.label",c.encode.labels.update.text.signal)),Mj(c,"labels","text",{signal:m})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const m of h3e)e.hasAxisPart(m)||delete c.encode[m];Ai(c.encode)&&delete c.encode}const h=S7t(u,n);return{scale:s,orient:o,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:cs(l,0)}}}}function APe(e){const{axes:t}=e.component,n=[];for(const r of jg)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function A7t(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>hD(i,"grid",t)),...r.map(i=>hD(i,"grid",t)),...n.map(i=>hD(i,"main",t)),...r.map(i=>hD(i,"main",t))].filter(i=>i)}function qhe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...It(s),...It(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${o}" ? ${mh(s[c])} : ${mh(a[c])}`};return l}return t[i]})])}function D7t(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:jNe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=yn(n)?"axisOrient":`axis${RR(n)}`,a=[...i,...i.map(l=>o+l.substr(4))],u=["axis",s,o];return{vlOnlyAxisConfig:qhe(a,r,e,n),vgAxisConfig:qhe(u,r,e,n),axisConfigStyle:k7t([...u,...a],r)}}function k7t(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=Gt(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function hq(e,t,n,r={}){var o;const i=pNe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const Whe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??I7t(n,e),gridScale:({model:e,channel:t})=>R7t(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||kPe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||DPe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??P7t(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??O7t(t.type,n,Bt(t)&&!!t.timeUnit,Bt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??M7t({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:$7t,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=IPe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return gNe(i?[ghe(i)]:[],Bt(s)?[ghe(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>L7t(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??B7t(n,t)};function I7t(e,t){return!ba(e)&&Bt(t)&&!Gi(t==null?void 0:t.bin)&&!ja(t==null?void 0:t.bin)}function R7t(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function N7t(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return yn(o)?o:rI(o);{const{configValue:s}=hq("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?rI(s):n===ho&&yr([See,Cee],e.type)&&!(Bt(e)&&e.timeUnit)?270:void 0}}function pq(e){return`(((${e.signal} % 360) + 360) % 360)`}function DPe(e,t,n,r){if(e!==void 0)if(n==="x"){if(yn(e)){const i=pq(e),o=yn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(yn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(yn(e)){const i=pq(e),o=yn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(yn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function kPe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(yn(e)){const s=pq(e),a=yn(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(yn(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function P7t(e,t){if(t==="x"&&yr(["quantitative","temporal"],e))return!0}function O7t(e,t,n,r){if(n&&!qt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function F7t(e){return e==="x"?"bottom":"left"}function M7t({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ba(t)&&t!=="log"){if(Bt(e)){if(Gi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&yr(["month","hours","day","quarter"],(i=ga(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function $7t({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Bt(t)){const{timeUnit:n}=t;if(n){const r=PNe(n);if(r)return{signal:r}}}}function IPe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return yNe(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function L7t(e,t){const n=e.values;if(gt(n))return d3e(t,n);if(yn(n))return n}function B7t(e,t){return e==="rect"&&TM(t)?1:0}class bT extends _i{clone(){return new bT(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=TPe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Iw(r)&&n3e(r.sort)){const{field:o,timeUnit:s}=r,a=r.sort,u=a.map((l,c)=>`${MNe({field:o,timeUnit:s,equal:l})} ? ${c} : `).join("")+a.length;t=new bT(t,{calculate:u,as:xT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ar(this.transform)}`}}function xT(e,t,n){return Ht(e,{prefix:t,suffix:"sort_index",...n})}function wL(e,t){return yr(["top","bottom"],t)?"column":yr(["left","right"],t)||e==="row"?"row":"column"}function wT(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return cs((t||{})[e],i[e],n.header[e])}function _L(e,t,n,r){const i={};for(const o of e){const s=wT(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const ite=["row","column"],ote=["header","footer"];function j7t(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=_L(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=wL(t,a),l=rI(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...NPe(l,u),...RPe(u,l,o),...PPe(r,i,t,S9t,R3e)}}}function RPe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=kPe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function NPe(e,t){const n=DPe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function z7t(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of ote)if(n[i])for(const o of n[i]){const s=V7t(e,t,i,n,o);s!=null&&r.push(s)}return r}function U7t(e,t){const{sort:n}=e;return ig(n)?{field:Ht(n,{expr:"datum"}),order:n.order??"ascending"}:gt(n)?{field:xT(e,t,{expr:"datum"}),order:"ascending"}:{field:Ht(e,{expr:"datum"}),order:n??"ascending"}}function mq(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:u}=_L(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Oee({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=wL(t,a);return{text:{signal:u?Px(Px(u,"datum.label",l),"datum.value",Ht(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...NPe(o,c),...RPe(c,o,s),...PPe(n,e,t,A9t,N3e)}}function V7t(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:f}=_L(["labelOrient"],s.header,a,t);(t==="row"&&!yr(["top","bottom"],f)||t==="column"&&!yr(["left","right"],f))&&(o=mq(s,t,a))}const u=mf(e)&&!LR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(o||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:U7t(s,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const H7t={column:{start:0,end:1},row:{start:1,end:0}};function q7t(e,t){return H7t[t][e]}function W7t(e,t){const n={};for(const r of id){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=_L(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=wL(r,s),u=q7t(o,a);u!==void 0&&(n[a]=u)}}return Ai(n)?void 0:n}function PPe(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=wT(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function ste(e){return[...hP(e,"width"),...hP(e,"height"),...hP(e,"childWidth"),...hP(e,"childHeight")]}function hP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(ba(s)&&Aw(a)){const u=e.scaleName(n);return mf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Ghe(u,a)]:[Ghe(u,a),{name:i,update:OPe(u,o,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=iq(e.config.view,o?"width":"height"),u=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Ghe(e,t){const n=`${e}_step`;return yn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function OPe(e,t,n){const r=t.get("type"),i=t.get("padding"),o=cs(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${mh(s)}, ${mh(o)}) * ${e}_step`}function FPe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function MPe(e,t){return It(e).reduce((n,r)=>({...n,...AC({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>to(i.value),invalidValueRef:void 0})}),{})}function $Pe(e,t){if(mf(t))return e==="theta"?"independent":"shared";if(RC(t))return"shared";if(hte(t))return fs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function ate(e,t){const n=e.scale[t],r=fs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Mt(w$t(t)),"independent"):e[r][t]||"shared"}const G7t={...I9t,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},LPe=It(G7t);class Y7t extends Ug{}const Yhe={symbols:K7t,gradient:X7t,labels:Q7t,entries:J7t};function K7t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:u,mark:l}=n,c=s.filled&&l!=="trail";let f={...k8t({},n,CLt),...cPe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,m=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,p=d===void 0?BPe(a.opacity)??s.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===bc)delete f.fill;else if(Pt(f.fill,"field"))h?delete f.fill:(f.fill=to(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=to(p??1));else if(gt(f.fill)){const g=gq(a.fill??a.color)??s.fill??(c&&s.color);g&&(f.fill=to(g))}}if(f.stroke){if(r==="stroke"||!c&&r===bc)delete f.stroke;else if(Pt(f.stroke,"field")||m)delete f.stroke;else if(gt(f.stroke)){const g=cs(gq(a.stroke||a.color),s.stroke,c?s.color:void 0);g&&(f.stroke={value:g})}}if(r!==Bg){const g=Bt(t)&&zPe(n,i,t);g?f.opacity=[{test:g,...to(p??1)},to(u.legend.unselectedOpacity)]:p&&(f.opacity=to(p))}return f={...f,...e},Ai(f)?void 0:f}function X7t(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?BPe(s.opacity)||o.opacity:void 0;return l&&(a.opacity=to(l)),a={...a,...e},Ai(a)?void 0:a}function Q7t(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=Bt(t)?zPe(n,i,t):void 0,u=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o;let f;Bx(c)?f=gh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:s}):l===void 0&&c===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?f=gh({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&Bt(t)&&t.timeUnit===void 0&&(f=gh({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Ai(d)?void 0:d}function J7t(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function BPe(e){return jPe(e,(t,n)=>Math.max(t,n.value))}function gq(e){return jPe(e,(t,n)=>cs(t,n.value))}function jPe(e,t){if(WLt(e))return Gt(e.condition).reduce(t,e.value);if(Oh(e))return e.value}function zPe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=zt(n.field);return r.map(o=>`(!length(data(${zt(co(o)+zx)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const Khe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return ZNe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return e3e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??ojt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??sjt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??ejt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>f2(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(c2(n)&&zp(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Z7t(t,e)};function Z7t(e,t){const n=e.values;if(gt(n))return d3e(t,n);if(yn(n))return n}function ejt(e,t,n,r){if(t!=="shape"){const i=gq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function tjt(e){const{legend:t}=e;return cs(t.type,njt(e))}function njt({channel:e,timeUnit:t,scaleType:n}){if(c2(e)){if(yr(["quarter","month","day"],t))return"symbol";if(zp(n))return"gradient"}return"symbol"}function rjt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??ijt(n,t)}function ijt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function ojt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(zp(i))return n==="horizontal"?r==="top"||r==="bottom"?Xhe(t,"width",s,o):s:Xhe(t,"height",u,a)}function Xhe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function sjt(e){if(yr(["quantile","threshold","log","symlog"],e))return"greedy"}function UPe(e){const t=Eo(e)?ajt(e):fjt(e);return e.component.legends=t,t}function ajt(e){const{encoding:t}=e,n={};for(const r of[bc,...O3e]){const i=zs(t[r]);!i||!e.getScaleComponent(r)||r===xc&&Bt(i)&&i.type===SC||(n[r]=cjt(e,r))}return n}function ujt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function ljt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function cjt(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new Y7t({},ujt(e,t));b7t(e,t,a);const u=n!==void 0?!n:s.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=zs(i[t]),f=Bt(c)?(E=ga(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||o.legend.orient||"right",h=tjt({legend:n,channel:t,timeUnit:f,scaleType:l}),m=rjt({legend:n,legendType:h,orient:d,legendConfig:s}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:s,config:o,scaleType:l,orient:d,legendType:h,direction:m};for(const T of LPe){if(h==="gradient"&&T.startsWith("symbol")||h==="symbol"&&T.startsWith("gradient"))continue;const C=T in Khe?Khe[T](p):n[T];if(C!==void 0){const S=ljt(C,T,n,e.fieldDef(t));(S||o.legend[T]===void 0)&&a.set(T,C,S)}}const g=(n==null?void 0:n.encoding)??{},v=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const T of["labels","legend","title","symbols","gradient","entries"]){const C=MPe(g[T]??{},e),S=T in Yhe?Yhe[T](C,w):C;S!==void 0&&!Ai(S)&&(b[T]={...v!=null&&v.length&&Bt(c)?{name:`${co(c.field)}_legend_${T}`}:{},...v!=null&&v.length?{interactive:!!v}:{},update:S})}return Ai(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function fjt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){UPe(r);for(const i of It(r.component.legends))n.legend[i]=ate(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=VPe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of It(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function VPe(e,t){var o,s,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of LPe){const c=V1(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return djt(f,d);case"title":return vNe(f,d);case"type":return i=!0,Qc("symbol")}return gL(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&bM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&bM(e.explicit,["encode","gradient"])),e}function djt(e,t){return t.value==="circle"?t:e}function hjt(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function HPe(e){const t=e.component.legends,n={};for(const i of It(t)){const o=e.getScaleComponent(i),s=Di(o.get("domains"));if(n[s])for(const a of n[s])VPe(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Ja(n).flat().map(i=>pjt(i,e.config)).filter(i=>i!==void 0)}function pjt(e,t){var s,a,u;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const l=o.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!o.stroke&&(l.stroke={value:"transparent"});for(const c of O3e)o[c]&&delete l[c]}if(o.title||delete o.title,r!==void 0){let l=r;(u=(a=o.encode)==null?void 0:a.labels)!=null&&u.update&&yn(o.encode.labels.update.text)&&(l=Px(r,"datum.label",o.encode.labels.update.text.signal)),hjt(o,"labels","text",{signal:l})}return o}}function mjt(e){return RC(e)||hte(e)?gjt(e):qPe(e)}function gjt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),qPe(e))}function qPe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const u=yn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return yr(s,u)||s.push(u),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const yjt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class WPe extends Ug{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function GPe(e){e.component.projection=Eo(e)?vjt(e):wjt(e)}function vjt(e){if(e.hasProjection){const t=za(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?bjt(e):void 0,o=new WPe(e.projectionName(!0),{...za(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function bjt(e){const t=[],{encoding:n}=e;for(const r of[[Yh,Gh],[md,Kh]])(zs(n[r[0]])||zs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(xc)&&e.typedFieldDef(xc).type===SC&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(So.Main)),t}function xjt(e,t){const n=JZ(yjt,i=>!!(!Zt(e.explicit,i)&&!Zt(t.explicit,i)||Zt(e.explicit,i)&&Zt(t.explicit,i)&&lf(e.get(i),t.get(i))));if(lf(e.size,t.size)){if(n)return e;if(lf(e.explicit,{}))return t;if(lf(t.explicit,{}))return e}return null}function wjt(e){if(e.children.length===0)return;let t;for(const r of e.children)GPe(r);const n=JZ(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=xjt(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new WPe(r,t.specifiedProjection,t.size,Vn(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function _jt(e,t,n,r){if(zR(t,n)){const i=Eo(e)?e.axis(n)??e.legend(n)??{}:{},o=Ht(t,{expr:"datum"}),s=Ht(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ht(t,{binSuffix:"range",forAs:!0}),formula:$R(o,s,i.format,i.formatType,r)}}return{}}function YPe(e,t){return`${cNe(e)}_${t}`}function Ejt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function ute(e,t,n){const r=cL(n,void 0)??{},i=YPe(r,t);return e.getName(`${i}_bins`)}function Tjt(e){return"as"in e}function Qhe(e,t,n){let r,i;Tjt(e)?r=Yt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ht(e,{forAs:!0}),Ht(e,{binSuffix:"end",forAs:!0})];const o={...cL(t,void 0)},s=YPe(o,e.field),{signal:a,extentSignal:u}=Ejt(n,s);if(Z$(o.extent)){const c=o.extent;i=SPe(n,c.param,c),delete o.extent}const l={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:s,binComponent:l}}class Qp extends _i{clone(){return new Qp(null,Vn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,s)=>{if(Tl(o)&&Gi(o.bin)){const{key:a,binComponent:u}=Qhe(o,o.bin,n);i[a]={...u,...i[a],..._jt(n,o,s,n.config)}}return i},{});return Ai(r)?null:new Qp(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=Qhe(n,n.bin,r);return new Qp(t,{[i]:o})}merge(t,n){for(const r of It(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=jp([...this.bins[r].as,...t.bins[r].as],Ar)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ja(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ja(this.bins).map(t=>t.field))}hash(){return`Bin ${Ar(this.bins)}`}assemble(){return Ja(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...s}=t.bin,a={type:"bin",field:pd(t.field),as:r,signal:t.signal,...Z$(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!o&&t.extentSignal&&(n.push({type:"extent",field:pd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Ht({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Cjt(e,t,n,r){var o;const i=Eo(r)?r.encoding[Lm(t)]:void 0;if(Tl(n)&&Eo(r)&&i3e(n,i,r.markDef,r.config)){e.add(Ht(n,{})),e.add(Ht(n,{suffix:"end"}));const{mark:s,markDef:a,config:u}=r,l=U1({fieldDef:n,markDef:a,config:u});iI(s)&&l!==.5&&fs(t)&&(e.add(Ht(n,{suffix:yL})),e.add(Ht(n,{suffix:vL}))),n.bin&&zR(n,t)&&e.add(Ht(n,{binSuffix:"range"}))}else if(tNe(t)){const s=eNe(t);e.add(r.getName(s))}else e.add(Ht(n));return Iw(n)&&dLt((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function Sjt(e,t){for(const n of It(t)){const r=t[n];for(const i of It(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Th extends _i{clone(){return new Th(null,new Set(this.dimensions),Vn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(s=>{s.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((s,a)=>{const{aggregate:u,field:l}=s;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Ht(s,{forAs:!0})]);else{if(_g(u)||Ev(u)){const c=_g(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Ht({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Ht(s,{forAs:!0})]);Bm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Ht({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Ht({field:l,aggregate:"max"},{forAs:!0})]))}else Cjt(o,a,s,n)}),o.size+It(i).length===0)?null:new Th(t,o,i)}static makeFromTransform(t,n){var r;const i=new Set,o={};for(const s of n.aggregate){const{op:a,field:u,as:l}=s;a&&(a==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([l||Ht(s,{forAs:!0})])):(o[u]??(o[u]={}),(r=o[u])[a]??(r[a]=new Set),o[u][a].add(l||Ht(s,{forAs:!0}))))}for(const s of n.groupby??[])i.add(s);return i.size+It(o).length===0?null:new Th(t,i,o)}merge(t){return WRe(this.dimensions,t.dimensions)?(Sjt(this.measures,t.measures),!0):($$t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...It(this.measures)])}producedFields(){const t=new Set;for(const n of It(this.measures))for(const r of It(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ar({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of It(this.measures))for(const s of It(this.measures[o]))for(const a of this.measures[o][s])r.push(a),t.push(s),n.push(o==="*"?null:pd(o));return{type:"aggregate",groupby:[...this.dimensions].map(pd),ops:t,fields:n,as:r}}}class kC extends _i{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of id){const s=n.facet[o];if(s){const{bin:a,sort:u}=s;this[o]={name:n.getName(`${o}_domain`),fields:[Ht(s),...Gi(a)?[Ht(s,{binSuffix:"end"})]:[]],...ig(u)?{sortField:u}:gt(u)?{sortIndexField:xT(s,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of id)this[n]&&(t+=` ${n.charAt(0)}:${Ar(this[n])}`);return t}get fields(){var n;const t=[];for(const r of id)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of id)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of jg){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(ba(i)&&Aw(o)){const s=EL(this.childModel,n),a=dte(s);a?t[n]=a:Mt(dee(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],s=[],a=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),s.push("max")):(o.push(r[i]),s.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=aL,field:f}=u;o.push(f),s.push(c),a.push(Ht(u,{forAs:!0}))}else l&&(o.push(l),s.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:s,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of ite){for(const c of ote){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){o[l]=!0;break}}if(o[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:s,column:a}=o;return(s||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:s}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[rg,ng])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(s){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Jhe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Ajt(e,t){const n=tee(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Jhe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Jhe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Mt(W8t(t)),null}function Djt(e){const t={};return XO(e.filter,n=>{if(FNe(n)){let r=null;vee(n)?r=tf(n.equal):xee(n)?r=tf(n.lte):bee(n)?r=tf(n.lt):wee(n)?r=tf(n.gt):_ee(n)?r=tf(n.gte):Eee(n)?r=n.range[0]:Tee(n)&&(r=(n.oneOf??n.in)[0]),r&&(Dw(r)?t[n.field]="date":ti(r)?t[n.field]="number":Yt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function kjt(e){const t={};function n(r){gT(r)?t[r.field]="date":r.type==="quantitative"&&x8t(r.aggregate)?t[r.field]="number":cT(r.field)>1?r.field in t||(t[r.field]="flatten"):Iw(r)&&ig(r.sort)&&cT(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Eo(e)||mf(e))&&e.forEachFieldDef((r,i)=>{if(Tl(r))n(r);else{const o=Cw(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Eo(e)){const{mark:r,markDef:i,encoding:o}=e;if(Tv(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];Bt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Ijt(e){const t={};if(Eo(e)&&e.component.selection)for(const n of It(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&cT(i.field)>1&&(t[i.field]="flatten")}return t}class Pu extends _i{clone(){return new Pu(null,Vn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ar(this._parse)}`}static makeExplicit(t,n,r){var s;let i={};const o=n.data;return!g1(o)&&((s=o==null?void 0:o.format)!=null&&s.parse)&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of It(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Mt(uhe(a,r[a],u.value)))}for(const a of It(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Mt(uhe(a,n[a],u)))}const o=new Ug(n,r);i.copyAll(o);const s={};for(const a of It(o.combine())){const u=o.get(a);u!==null&&(s[a]=u)}return It(s).length===0||i.parseNothing?null:new Pu(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of It(this._parse)){const r=this._parse[n];cT(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(It(this._parse))}dependentFields(){return new Set(It(this._parse))}assembleTransforms(t=!1){return It(this._parse).filter(n=>t?cT(n)>1:!0).map(n=>{const r=Ajt(n,this._parse[n]);return r?{type:"formula",expr:r,as:TC(n)}:null}).filter(n=>n!==null)}}class H1 extends _i{clone(){return new H1(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Mh])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Mh}}}class HR extends _i{clone(){return new HR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ar(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class qR extends _i{clone(){return new qR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ar(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Ux extends _i{constructor(t){super(null),t??(t={name:"source"});let n;if(g1(t)||(n=t.format?{...dc(t.format,["parse"])}:{}),oI(t))this._data={values:t.values};else if(yT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];yr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else J3e(t)?this._data={values:[{type:"Sphere"}]}:(X3e(t)||g1(t))&&(this._data={});this._generator=g1(t),t.name&&(this._name=t.name),n&&!Ai(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Zhe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Rjt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},pD;function lte(e){return e instanceof Ux||e instanceof HR||e instanceof qR}class cte{constructor(){pD.set(this,void 0),Zhe(this,pD,!1,"f")}setModified(){Zhe(this,pD,!0,"f")}get modifiedFlag(){return Rjt(this,pD,"f")}}pD=new WeakMap;class Rw extends cte{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class fte extends cte{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Njt extends fte{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of It(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Pjt extends fte{constructor(t){super(),this.requiresSelectionId=t&&rte(t)}run(t){t instanceof H1&&(this.requiresSelectionId&&(lte(t.parent)||t.parent instanceof Th||t.parent instanceof Pu)||(this.setModified(),t.remove()))}}class Ojt extends cte{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Kp&&(r=t.producedFields(),ZZ(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Fjt extends fte{constructor(){super()}run(t){t instanceof hc&&!t.isRequired()&&(this.setModified(),t.remove())}}class Mjt extends Rw{run(t){if(!lte(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Pu)if(t instanceof Pu)this.setModified(),t.merge(n);else{if(eee(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class $jt extends Rw{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Pu);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const u of It(a))u in i?i[u]!==a[u]&&o.add(u):i[u]=a[u]}for(const s of o)delete i[s];if(!Ai(i)){this.setModified();const s=new Pu(t,i);for(const a of n){if(a instanceof Pu)for(const u of It(i))delete a.parse[u];t.removeChild(a),a.parent=s,a instanceof Pu&&It(a.parse).length===0&&a.remove()}}}}}class Ljt extends Rw{run(t){t instanceof hc||t.numChildren()>0||t instanceof kC||t instanceof Ux||(this.setModified(),t.remove())}}class Bjt extends Rw{run(t){const n=t.children.filter(i=>i instanceof Kp),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class jjt extends Rw{run(t){const n=t.children.filter(i=>i instanceof Th),r={};for(const i of n){const o=Ar(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of It(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class zjt extends Rw{constructor(t){super(),this.model=t}run(t){const n=!(lte(t)||t instanceof DC||t instanceof Pu||t instanceof H1),r=[],i=[];for(const o of t.children)o instanceof Qp&&(n&&!eee(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const s of r)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Qp?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const s of i)o.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class Ujt extends Rw{run(t){const n=[...t.children];if(!lT(n,s=>s instanceof hc)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof hc){let a=s;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof hc)a=u;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class Nw extends _i{clone(){return new Nw(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=jp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ht(t)}hash(){return`JoinAggregateTransform ${Ar(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class _T extends _i{clone(){return new _T(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:s,scales:a}=r;if(s==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=Bm(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:m}=c,p=Ree({scaleChannel:f,markDef:o,config:i,scaleType:h,isCountAggregate:J$(m)});p!=="show"&&p!=="always-valid"&&(l[c.field]=c)}return l},{});return It(u).length?new _T(t,u):null}dependentFields(){return new Set(It(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ar(this.filter)}`}assemble(){const t=It(this.filter).reduce((n,r)=>{const i=this.filter[r],o=Ht(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${yq(o)}))`):i.type==="quantitative"&&n.push(yq(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function yq(e){return`isValid(${e}) && isFinite(+${e})`}function Vjt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ht(r);return i&&t.push(i),t},[])}function Hjt(e){return gt(e)&&e.every(t=>Yt(t))&&e.length>1}class sg extends _i{clone(){return new sg(null,Vn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:s="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(cs(f.order,"ascending"));const l={field:a,order:u};let c;return Hjt(o)?c=o:Yt(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new sg(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:s,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:s,offset:a,impute:u}=r,l=o.map(h=>{const m=i[h];return Fh(m)}).filter(h=>!!h),c=Vjt(n),f=n.encoding.order;let d;if(gt(f)||Bt(f))d=mNe(f);else{const h=o3e(f)?f.sort:s==="y"?"descending":"ascending";d=c.reduce((m,p)=>(m.field.includes(p)||(m.field.push(p),m.order.push(h)),m),{field:[],order:[]})}return new sg(t,{dimensionFieldDefs:l,stackField:n.vgField(s),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ar(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Ht(i,{binSuffix:"mid"})]:[Ht(i,{}),Ht(i,{binSuffix:"end"})]:[Ht(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:s,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Ht(c,{expr:"datum"}),m=Ht(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${yq(h)} ? ${f}*${h}+${1-f}*${m} : ${h}`,as:Ht(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:Ht(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:s,as:l,offset:a}),t}}class IC extends _i{clone(){return new IC(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=jp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ht(t)}hash(){return`WindowTransform ${Ar(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const o=this.transform.frame,s=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(f=>cee(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...s!==void 0?{groupby:s}:{},...o!==void 0?{frame:o}:{}}}}function qjt(e){function t(n){if(!(n instanceof kC)){const r=n.clone();if(r instanceof hc){const i=bq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Th||r instanceof sg||r instanceof IC||r instanceof Nw)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function vq(e){if(e instanceof kC)if(e.numChildren()===1&&!(e.children[0]instanceof hc)){const t=e.children[0];(t instanceof Th||t instanceof sg||t instanceof IC||t instanceof Nw)&&t.addDimensions(e.fields),t.swapWithParent(),vq(e)}else{const t=e.model.component.data.main;KPe(t);const n=qjt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(vq)}function KPe(e){if(e instanceof hc&&e.type===So.Main&&e.numChildren()===1){const t=e.children[0];t instanceof kC||(t.swapWithParent(),KPe(e))}}const bq="scale_",pP=5;function xq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!xq(t.children))return!1}return!0}function Kd(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function epe(e,t,n){let r=e.sources,i=!1;return i=Kd(new Fjt,r)||i,i=Kd(new Pjt(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Kd(new Ljt,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Kd(new Mjt,r)||i,i=Kd(new zjt(t),r)||i,i=Kd(new Ojt,r)||i,i=Kd(new $jt,r)||i,i=Kd(new jjt,r)||i,i=Kd(new Bjt,r)||i,i=Kd(new Njt,r)||i,i=Kd(new Ujt,r)||i),e.sources=r,i}function Wjt(e,t){xq(e.sources);let n=0,r=0;for(let i=0;i<pP&&epe(e,t,!0);i++)n++;e.sources.map(vq);for(let i=0;i<pP&&epe(e,t,!1);i++)r++;xq(e.sources),Math.max(n,r)===pP&&Mt(`Maximum optimization runs(${pP}) reached.`)}class la{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new la(()=>t(n))}}function XPe(e){Eo(e)?Gjt(e):Yjt(e)}function Gjt(e){const t=e.component.scales;for(const n of It(t)){const r=Xjt(e,n);if(t[n].setWithExplicit("domains",r),Jjt(e,n),e.component.data.isFaceted){let o=e;for(;!mf(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)W0(a)&&(a.data=bq+a.data.replace(bq,""))}}}function Yjt(e){for(const n of e.children)XPe(n);const t=e.component.scales;for(const n of It(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=V1(r,s.getWithExplicit("domains"),"domains","scale",wq);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&Mt(B8t),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Kjt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=tpe(t,n);if(!i){Mt(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=tpe(t,n);if(i)return"unaggregated"}return e}function Xjt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Kjt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&zs(r.x2)?zs(r.x)?V1(Ny(n,i,e,"x"),Ny(n,i,e,"x2"),"domain","scale",wq):Ny(n,i,e,"x2"):t==="y"&&zs(r.y2)?zs(r.y)?V1(Ny(n,i,e,"y"),Ny(n,i,e,"y2"),"domain","scale",wq):Ny(n,i,e,"y2"):Ny(n,i,e,t)}function Qjt(e,t,n){return e.map(r=>({signal:`{data: ${fL(r,{timeUnit:n,type:t})}}`}))}function $j(e,t,n){var i;const r=(i=ga(n))==null?void 0:i.unit;return t==="temporal"||r?Qjt(e,t,r):[e]}function Ny(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:u}=n,l=zs(i[r]),{type:c}=l,f=l.timeUnit,d=VBt({invalid:vm("invalid",o,a),isPath:Tv(s)});if(fLt(t)){const p=Ny(e,void 0,n,r),g=$j(t.unionWith,c,f);return Ap([...g,...p.value])}else{if(yn(t))return Ap([t]);if(t&&t!=="unaggregated"&&!UNe(t))return Ap($j(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Qc([[0,1]]);const p=n.requestDataName(d);return Qc([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const h=Bm(r)&&Bt(l)?Zjt(n,r,e):void 0;if(jm(l)){const p=$j([l.datum],c,f);return Qc(p)}const m=l;if(t==="unaggregated"){const{field:p}=l;return Qc([{data:n.requestDataName(d),field:Ht({field:p,aggregate:"min"})},{data:n.requestDataName(d),field:Ht({field:p,aggregate:"max"})}])}else if(Gi(m.bin)){if(ba(e))return Qc(e==="bin-ordinal"?[]:[{data:nI(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r,zR(m,r)?{binSuffix:"range"}:{}),sort:h===!0||!qt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:p}=m;if(Gi(p)){const g=ute(n,m.field,p);return Qc([new la(()=>{const v=n.getSignalName(g);return`[${v}.start, ${v}.stop]`})])}else return Qc([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(m.timeUnit&&yr(["time","utc"],e)){const p=i[Lm(r)];if(i3e(m,p,o,a)){const g=n.requestDataName(d),v=U1({fieldDef:m,fieldDef2:p,markDef:o,config:a}),b=iI(s)&&v!==.5&&fs(r);return Qc([{data:g,field:n.vgField(r,b?{suffix:yL}:{})},{data:g,field:n.vgField(r,{suffix:b?vL:"end"})}])}}return Qc(h?[{data:nI(h)?n.requestDataName(d):n.requestDataName(So.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function Lj(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":aL),...r?{field:pd(r)}:{},...i?{order:i}:{}}}function Jjt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=UNe(r)?r:void 0,s=Sw(i)&&Z$(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function Zjt(e,t,n){if(!ba(n))return;const r=e.fieldDef(t),i=r.sort;if(n3e(i))return{op:"min",field:xT(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(ig(i)){const a=o&&!s.has(i.field);return Lj(i,a)}else if(VLt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=o&&!s.has(f);if(_g(c)||Ev(c))return Lj({field:Ht(l),order:u},d);if(cee(c)||!c)return Lj({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(yr(["ascending",void 0],i))return!0}}function tpe(e,t){const{aggregate:n,type:r}=e;return n?Yt(n)&&!_8t.has(n)?{valid:!1,reason:p$t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:m$t(e)}:{valid:!0}:{valid:!1,reason:h$t(e)}}function wq(e,t,n,r){return e.explicit&&t.explicit&&Mt(x$t(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ezt(e){const t=jp(e.map(s=>{if(W0(s)){const{sort:a,...u}=s;return u}return s}),Ar),n=jp(e.map(s=>{if(W0(s)){const a=s.sort;return a!==void 0&&!nI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Ar);if(t.length===0)return;if(t.length===1){const s=e[0];if(W0(s)&&n.length>0){let a=n[0];if(n.length>1){Mt(che);const u=n.filter(l=>qt(l)&&"op"in l&&l.op!=="min");n.every(l=>qt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(qt(a)&&"field"in a){const u=a.field;s.field===u&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=jp(n.map(s=>nI(s)||!("op"in s)||Yt(s.op)&&Zt(v8t,s.op)?s:(Mt(_$t(s)),!0)),Ar);let i;r.length===1?i=r[0]:r.length>1&&(Mt(che),i=!0);const o=jp(e.map(s=>W0(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function dte(e){if(W0(e)&&Yt(e.field))return e.field;if(E8t(e)){let t;for(const n of e.fields)if(W0(n)&&Yt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Mt(E$t),t}return Mt(T$t),t}else if(T8t(e)){Mt(C$t);const t=e.fields[0];return Yt(t)?t:void 0}}function EL(e,t){const r=e.component.scales[t].get("domains").map(i=>(W0(i)&&(i.data=e.lookupDataSource(i.data)),i));return ezt(r)}function QPe(e){return RC(e)||hte(e)?e.children.reduce((t,n)=>t.concat(QPe(n)),npe(e)):npe(e)}function npe(e){return It(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=tzt(i.range,o,n,e),h=EL(e,n),m=a?e7t(e,a,r,h):null;return t.push({name:o,type:s,...h?{domain:h}:{},...m?{domainRaw:m}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function tzt(e,t,n,r){if(fs(n)){if(Aw(e))return{step:{signal:`${t}_step`}}}else if(qt(e)&&W0(e))return{...e,data:r.lookupDataSource(e.data)};return e}class JPe extends Ug{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(yr([Ua.LOG,Ua.TIME,Ua.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&yr([Ua.LINEAR,Ua.SQRT,Ua.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,s=!1;for(const a of r){if(gt(a)){const u=a[0],l=a[a.length-1];if(ti(u)&&ti(l))if(u<=0&&l>=0){i=!0;continue}else{o=!0;continue}}s=!0}if(i)return"definitely";if(o&&!s)return"definitely-not"}return"maybe"}}const nzt=["range","scheme"];function rzt(e){const t=e.component.scales;for(const n of lee){const r=t[n];if(!r)continue;const i=izt(n,e);r.setWithExplicit("range",i)}}function rpe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=wc(t),s=e.getName(o);if(qt(r)&&r.binned&&r.step!==void 0)return new la(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${u})`});if(Gi(r)){const a=ute(e,i,r);return new la(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${l})`})}}}function izt(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const f of nzt)if(n[f]!==void 0){const d=tq(o,f),h=VNe(e,f);if(!d)Mt(_Ne(o,f,e));else if(h)Mt(h);else switch(f){case"range":{const m=n.range;if(gt(m)){if(fs(e))return Ap(m.map(p=>{if(p==="width"||p==="height"){const g=t.getName(p),v=t.getSignalName.bind(t);return la.fromName(v,g)}return p}))}else if(qt(m))return Ap({data:t.requestDataName(So.Main),field:m.field,sort:{op:"min",field:t.vgField(e)}});return Ap(m)}case"scheme":return Ap(ozt(n[f]))}}const s=e===ho||e==="xOffset"?"width":"height",a=r[s];if(xm(a)){if(fs(e))if(ba(o)){const f=e4e(a,t,e);if(f)return Ap({step:f})}else Mt(ENe(s));else if(OR(e)){const f=e===yv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const m=t4e(a,o);if(m)return Ap(m)}}}const{rangeMin:u,rangeMax:l}=n,c=szt(e,t);return(u!==void 0||l!==void 0)&&tq(o,"rangeMin")&&gt(c)&&c.length===2?Ap([u??c[0],l??c[1]]):Qc(c)}function ozt(e){return cLt(e)?{scheme:e.name,...dc(e,["name"])}:{scheme:e}}function ZPe(e,t,n,{center:r}={}){const i=wc(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===_a&&Ph(n)?r?[la.fromName(a=>`${s(a)}/2`,o),la.fromName(a=>`-${s(a)}/2`,o)]:[la.fromName(s,o),0]:r?[la.fromName(a=>`-${s(a)}/2`,o),la.fromName(a=>`${s(a)}/2`,o)]:[0,la.fromName(s,o)]}function szt(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=zs(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case ho:case _a:{if(yr(["point","band"],u)){const f=n4e(e,n,r.view);if(xm(f))return{step:e4e(f,t,e)}}return ZPe(e,t,u)}case yv:case CC:return azt(e,t,u);case Lg:{const f=czt(i,r),d=fzt(i,n,t,r);return hT(u)?lzt(f,d,uzt(u,r,l,e)):[f,d]}case Sd:return[0,Math.PI*2];case Tw:return[0,360];case Wh:return[0,new la(()=>{const f=t.getSignalName(mf(t.parent)?"child_width":"width"),d=t.getSignalName(mf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case vv:return{step:1e3/r.scale.framesPerSecond};case wv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case _v:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case xc:return"symbol";case bc:case Mm:case $m:return u==="ordinal"?s==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Bg:case bv:case xv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function e4e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=oee(n),s=r[o];if(M3e({step:e,offsetIsDiscrete:Yn(s)&&$Ne(s.type)})==="offset"&&g3e(r,o)){const u=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${D8t(f)})`}}else return e.step}function t4e(e,t){if(M3e({step:e,offsetIsDiscrete:ba(t)})==="offset")return{step:e.step}}function azt(e,t,n){const r=e===yv?"x":"y",i=t.getScaleComponent(r);if(!i)return ZPe(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:u}=t;if(o==="band"){const l=n4e(r,t.size,t.config.view);if(xm(l)){const c=t4e(l,n);if(c)return c}return[0,{signal:`bandwidth('${s}')`}]}else{const l=t.encoding[r];if(Bt(l)&&l.timeUnit){const c=PNe(l.timeUnit,m=>`scale('${s}', ${m})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=U1({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const m=yn(f)?`${f.signal}/2`+h:`${f/2+d}`,p=yn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${m} * (${c})`},{signal:`${p} * (${c})`}]}return[0,{signal:c}]}return HRe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function n4e(e,t,n){const r=e===ho?"width":"height",i=t[r];return i||DM(n,r)}function uzt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&gt(n)?n.length+1:(Mt(O$t(r)),3)}}function lzt(e,t,n){const r=()=>{const i=mh(t),o=mh(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return yn(t)?new la(r):{signal:r()}}function czt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(eL("size",e))}const ipe=.95;function fzt(e,t,n,r){const i={x:rpe(n,"x"),y:rpe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=ope(t,i,r.view);return ti(o)?o-1:new la(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=ope(t,i,r.view);return ti(o)?Math.pow(ipe*o,2):new la(()=>`pow(${ipe} * ${o.signal}, 2)`)}}throw new Error(eL("size",e))}function ope(e,t,n){const r=xm(e.width)?e.width.step:oq(n,"width"),i=xm(e.height)?e.height.step:oq(n,"height");return t.x||t.y?new la(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function r4e(e,t){Eo(e)?dzt(e,t):o4e(e,t)}function dzt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of It(n)){const u=s[a],l=n[a],c=e.getScaleComponent(a),f=zs(i[a]),d=u[t],h=c.get("type"),m=c.get("padding"),p=c.get("paddingInner"),g=tq(h,t),v=VNe(a,t);if(d!==void 0&&(g?v&&Mt(v):Mt(_Ne(h,t,a))),g&&v===void 0)if(d!==void 0){const b=f.timeUnit,w=f.type;switch(t){case"domainMax":case"domainMin":Dw(u[t])||w==="temporal"||b?l.set(t,{signal:fL(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=Pt(spe,t)?spe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:m,scalePaddingInner:p,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:o,config:r,hasNestedOffsetScale:y3e(i,a),hasSecondaryRangeChannel:!!i[Lm(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const spe={bins:({model:e,fieldOrDatumDef:t})=>Bt(t)?hzt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>pzt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>mzt(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>gzt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>yzt(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>vzt(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Bt(e)?e.sort:void 0;return bzt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>xzt(e,t,n,r,i,o.scale,s)};function i4e(e){Eo(e)?rzt(e):o4e(e,"range")}function o4e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?i4e(r):r4e(r,t);for(const r of It(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=V1(i,a,t,"scale",K3e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function hzt(e,t){const n=t.bin;if(Gi(n)){const r=ute(e,t.field,n);return new la(()=>e.getSignalName(r))}else if(ja(n)&&Sw(n)&&n.step!==void 0)return{step:n.step}}function pzt(e,t){if(yr([bc,Mm,$m],e)&&t!=="nominal")return"hcl"}function mzt(e,t,n,r,i,o){var s;if(!((s=Fh(o))!=null&&s.bin||gt(n)||i!=null||r!=null||yr([Ua.TIME,Ua.UTC],e)))return fs(t)?!0:void 0}function gzt(e,t,n,r,i,o){if(fs(e)){if(zp(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(Bt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Ua.POINT)return n.pointPadding}}function yzt(e,t,n,r,i,o=!1){if(e===void 0){if(fs(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return o?c:cs(s,n==="bar"?a:n==="tick"?l:u)}else if(OR(t)&&r===Ua.BAND)return i.offsetBandPaddingInner}}function vzt(e,t,n,r,i,o=!1){if(e===void 0){if(fs(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===Ua.BAND)return cs(s,yn(r)?{signal:`${r.signal}/2`}:r/2)}else if(OR(t)){if(n===Ua.POINT)return .5;if(n===Ua.BAND)return i.offsetBandPaddingOuter}}}function bzt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Ph(e)&&t==="descending"?yn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Ph(e)&&t==="descending")return!0}function xzt(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Ph(i)){if(gt(n)){const u=n[0],l=n[n.length-1];if(ti(u)&&u<=0&&ti(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!hT(i))return!0;if(!(Bt(t)&&t.bin)&&yr([...jg,...l8t],e)){const{orient:u,type:l}=r;return yr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:yr(["bar","area"],l)&&!s?!0:o==null?void 0:o.zero}return!1}function wzt(e,t,n,r,i=!1){const o=_zt(t,n,r,i),{type:s}=e;return Bm(t)?s!==void 0?yLt(t,s)?Bt(n)&&!gLt(s,n.type)?(Mt(v$t(s,o)),o):s:(Mt(y$t(t,s,o)),o):o:null}function _zt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(c2(e)||Sj(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Mt(Aj(e,"ordinal")),"ordinal";if(Cj(e))return"band";if(fs(e)||OR(e)){if(yr(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in uee)return"band";const o=n[wc(e)];return Lx(o)||mT(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return c2(e)?"time":Sj(e)==="discrete"?(Mt(Aj(e,"temporal")),"ordinal"):Bt(t)&&t.timeUnit&&ga(t.timeUnit).utc?"utc":Cj(e)?"band":"time";case"quantitative":return c2(e)?Bt(t)&&Gi(t.bin)?"bin-ordinal":"linear":Sj(e)==="discrete"?(Mt(Aj(e,"quantitative")),"ordinal"):Cj(e)?"band":"linear";case"geojson":return}throw new Error(xNe(t.type))}function Ezt(e,{ignoreRange:t}={}){s4e(e),XPe(e);for(const n of mLt)r4e(e,n);t||i4e(e)}function s4e(e){Eo(e)?e.component.scales=Tzt(e):e.component.scales=Szt(e)}function Tzt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of lee){const s=zs(t[o]);if(s&&n===WNe&&o===xc&&s.type===SC)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const u=y3e(t,o),l=wzt(a,o,s,r,u);i[o]=new JPe(e.scaleName(`${o}`,!0),{value:l,explicit:a.type===l})}}return i}const Czt=K3e((e,t)=>dhe(e)-dhe(t));function Szt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){s4e(o);for(const s of It(o.component.scales))if((t=i.scale)[s]??(t[s]=$Pe(s,e)),i.scale[s]==="shared"){const a=r[s],u=o.component.scales[s].getWithExplicit("type");a?oLt(a.value,u.value)?r[s]=V1(a,u,"type","scale",Czt):(i.scale[s]="independent",delete r[s]):r[s]=u}}for(const o of It(r)){const s=e.scaleName(o,!0),a=r[o];n[o]=new JPe(s,a);for(const u of e.children){const l=u.component.scales[o];l&&(u.renameScale(l.get("name"),s),l.merged=!0)}}return n}class Bj{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Eo(e){return(e==null?void 0:e.type)==="unit"}function mf(e){return(e==null?void 0:e.type)==="facet"}function hte(e){return(e==null?void 0:e.type)==="concat"}function RC(e){return(e==null?void 0:e.type)==="layer"}class pte{constructor(t,n,r,i,o,s,a){this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=za(a),this.name=t.name??i,this.title=By(t.title)?{text:t.title}:t.title?za(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Bj,this.projectionNameMap=r?r.projectionNameMap:new Bj,this.signalNameMap=r?r.signalNameMap:new Bj,this.data=t.data,this.description=t.description,this.transforms=RBt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:F9t(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:uL(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Ug,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Vn(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Ezt(this)}parseProjection(){GPe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){UPe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of It(r)){const s=r[o];s!==void 0&&(i[o]=to(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=to(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ai(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=W7t(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of id)t[r].title&&n.push(j7t(this,r));for(const r of ite)n=n.concat(z7t(this,r));return n}assembleAxes(){return A7t(this.component.axes,this.config)}assembleLegends(){return HPe(this)}assembleProjections(){return mjt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...fNe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return yr(["unit","layer"],this.type)?yr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ai(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||mf(this.parent)?QPe(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return co((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(So[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(mf(this.parent)){const n=FPe(t),r=Q$(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(ba(o)&&Aw(s)){const a=i.get("name"),u=EL(this,r),l=dte(u);if(l){const c=Ht({aggregate:"distinct",field:l},{expr:"datum"});return{signal:OPe(a,i,c)}}else return Mt(dee(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(rNe(t)&&Bm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(P8t(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class a4e extends pte{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ht(r,n)}reduceFieldDef(t,n){return c9t(this.getMapping(),(r,i,o)=>{const s=Fh(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){jee(this.getMapping(),(r,i)=>{const o=Fh(r);o&&t(o,i)},n)}}class TL extends _i{clone(){return new TL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ar(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class CL extends _i{clone(){return new CL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ar(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class SL extends _i{clone(){return new SL(this.parent,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,s)=>i[s]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ar(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class AL extends _i{clone(){return new AL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ar(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class h2 extends _i{clone(){return new h2(null,Vn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Yh,Gh],[md,Kh]]){const o=i.map(s=>{const a=zs(n.encoding[s]);return Bt(a)?a.field:jm(a)?{expr:`${a.datum}`}:Oh(a)?{expr:`${a.value}`}:void 0});(o[0]||o[1])&&(t=new h2(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(xc)){const i=n.typedFieldDef(xc);i.type===SC&&(t=new h2(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Yt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ar(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class sI extends _i{clone(){return new sI(null,this.projection,Vn(this.fields),Vn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Yh,Gh],[md,Kh]]){const i=r.map(s=>{const a=zs(n.encoding[s]);return Bt(a)?a.field:jm(a)?{expr:`${a.datum}`}:Oh(a)?{expr:`${a.value}`}:void 0}),o=r[0]===md?"2":"";(i[0]||i[1])&&(t=new sI(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Yt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ar(this.fields)} ${Ar(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class hx extends _i{clone(){return new hx(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new hx(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(Bt(i)&&Bt(o)){const s=i.impute?i:o.impute?o:void 0;if(s===void 0)return;const a=i.impute?o:o.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=s.impute,d=x3e(n.mark,r);return new hx(t,{impute:s.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Ar(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:s,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:dBt(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?s:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class DL extends _i{clone(){return new DL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ar(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class aI extends _i{clone(){return new aI(null,Vn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:s}=r;let a=null;if(hBt(s)){let u=c4e(s.data,o);u||(u=new Ux(s.data),o.push(u));const l=n.getName(`lookup_${i}`);a=new hc(u,l,So.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(pBt(s)){const u=s.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(co(u),u)}catch{throw new Error($8t(u))}if(a=l.materialized,!a)throw new Error(L8t(u))}return new aI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Gt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ar({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Gt(this.transform.as)}:{}};else{let n=this.transform.as;Yt(n)||(Mt(K8t),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class kL extends _i{clone(){return new kL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ar(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class IL extends _i{clone(){return new IL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Vn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ar(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class RL extends _i{clone(){return new RL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=jp((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ar(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class NL extends _i{clone(){return new NL(null,Vn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ar(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function u4e(e){let t=0;function n(r,i){if(r instanceof Ux&&!r.isGenerator&&!yT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Pu&&(r.parent instanceof Ux&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof kC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof HR||r instanceof qR||r instanceof _T||r instanceof DC||r instanceof bT||r instanceof sI||r instanceof Th||r instanceof aI||r instanceof IC||r instanceof Nw||r instanceof AL||r instanceof SL||r instanceof TL||r instanceof DL||r instanceof kL||r instanceof IL||r instanceof H1||r instanceof NL||r instanceof RL||r instanceof CL)&&i.transform.push(r.assemble()),(r instanceof Qp||r instanceof Kp||r instanceof hx||r instanceof sg||r instanceof h2)&&i.transform.push(...r.assemble()),r instanceof hc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof hc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof hc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function Azt(e){const t=[],n=u4e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Dzt(e,t){const n=[],r=u4e(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function kzt(e){return e==="top"||e==="left"||yn(e)?"header":"footer"}function Izt(e){for(const t of id)Rzt(e,t);ape(e,"x"),ape(e,"y")}function Rzt(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],u=wT("title",null,r,t);let l=f2(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=gt(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=wT("labelOrient",a.header,r,t),f=a.header!==null?cs((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,d=yr(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[l4e(e,t,f)]}}}function l4e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function ape(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=ate(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const u=kzt(a.get("orient"));s[u]??(s[u]=[l4e(e,o,!1)]);const l=hD(a,"main",e.config,{header:!0});l&&s[u][0].axes.push(l),a.mainExtracted=!0}}}}function Nzt(e){mte(e),NM(e,"width"),NM(e,"height")}function Pzt(e){mte(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";NM(e,t),NM(e,n)}function mte(e){for(const t of e.children)t.parseLayoutSize()}function NM(e,t){const n=FPe(t),r=Q$(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??$Pe(r,e);if(l==="independent"&&u.value==="step"){s=void 0;break}if(s){if(l==="independent"&&s.value!==u.value){s=void 0;break}s=V1(s,u,n,"")}else s=u}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Ozt(e){const{size:t,component:n}=e;for(const r of jg){const i=wc(r);if(t[i]){const o=t[i];n.layoutSize.set(i,xm(o)?"step":o,!0)}else{const o=Fzt(e,i);n.layoutSize.set(i,o,!1)}}}function Fzt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(ba(o)){const a=DM(r.view,t);return Aw(s)||xm(a)?"step":a}else return iq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return iq(r.view,t);{const o=DM(r.view,t);return xm(o)?o.step:o}}}function _q(e,t,n){return Ht(t,{suffix:`by_${Ht(e)}`,...n})}class JD extends a4e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=xte(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!LR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=It(t),r={};for(const i of n){if(![ng,rg].includes(i)){Mt(eL(i,"facet"));break}const o=t[i];if(o.field===void 0){Mt(ZH(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=Bee(t,n);return r.header?r.header=za(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Pt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=PL(this),this.child.parseData()}parseLayoutSize(){mte(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Xp(t))&&pee(hee)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Izt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of id)for(const r of ote){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:s}=i;if(s){const a=wT("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(a)){const u=wL(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(o!=null&&o[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof JD))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof JD?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ht(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof JD){if(this.child.channelHasField("column")){const i=Ht(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of jg){const o=this.child.component.scales[i];if(o&&!o.merged){const s=o.get("type"),a=o.get("range");if(ba(s)&&Aw(a)){const u=EL(this.child,i),l=dte(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Mt(dee(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:s,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of id){const f=this.facet[c];if(f){u.push(Ht(f));const{bin:d,sort:h}=f;if(Gi(d)&&u.push(Ht(f,{binSuffix:"end"})),ig(h)){const{field:m,op:p=aL}=h,g=_q(f,h);r&&i?(o.push(g),s.push("max"),a.push(g)):(o.push(m),s.push(p),a.push(g))}else if(gt(h)){const m=xT(f,c);o.push(m),s.push("max"),a.push(m)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||o.length>0?{aggregate:{...l?{cross:l}:{},...o.length?{fields:o,ops:s,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?ig(r.sort)?[_q(r,r.sort,{expr:"datum"})]:gt(r.sort)?[xT(r,t,{expr:"datum"})]:[Ht(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(ig(i)?i.order:!gt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return mq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const o of ite)if(t[o]){const s=wT("labelOrient",(i=t[o])==null?void 0:i.header,n,o);if(r[o].includes(s))return mq(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Azt(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:id.map(u=>this.facetSortFields(u)).flat(),order:id.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(XBt(this,[]))}]}getMapping(){return this.facet}}function Mzt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(ig(o.sort)){const{field:s,op:a=aL}=o.sort;e=i=new Nw(e,{joinaggregate:[{op:a,field:s,as:_q(o,o.sort,{forAs:!0})}],groupby:[Ht(o)]})}return i}return null}function c4e(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(o=a.format)==null?void 0:o.mesh;if(!((u||f)&&u!==f)){if(oI(e)&&oI(a)){if(lf(e.values,a.values))return s}else if(yT(e)&&yT(a)){if(e.url===a.url)return s}else if(X3e(e)&&e.name===s.dataName)return s}}return null}function $zt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Ux({values:[]});return t.push(r),r}const n=c4e(e.data,t);if(n)return g1(e.data)||(n.data.format=qRe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Ux(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Lzt(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(TBt(i))s=e=new bT(e,i),o="derived";else if(Qee(i)){const a=Djt(i);s=e=Pu.makeWithAncestors(e,{},a,n)??e,e=new DC(e,t,i.filter)}else if(q3e(i))s=e=Qp.makeFromTransform(e,i,t),o="number";else if(SBt(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Pu(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=Kp.makeFromTransform(e,i);else if(ABt(i))s=e=Th.makeFromTransform(e,i),o="number",rte(t)&&(e=new H1(e));else if(H3e(i))s=e=aI.make(e,t,i,r++),o="derived";else if(wBt(i))s=e=new IC(e,i),o="number";else if(_Bt(i))s=e=new Nw(e,i),o="number";else if(DBt(i))s=e=sg.makeFromTransform(e,i),o="derived";else if(kBt(i))s=e=new AL(e,i),o="derived";else if(IBt(i))s=e=new CL(e,i),o="derived";else if(EBt(i))s=e=new SL(e,i),o="derived";else if(mBt(i))s=e=new RL(e,i),o="derived";else if(xBt(i))e=new NL(e,i);else if(CBt(i))s=e=hx.makeFromTransform(e,i),o="derived";else if(gBt(i))s=e=new TL(e,i),o="derived";else if(yBt(i))s=e=new kL(e,i),o="derived";else if(vBt(i))s=e=new IL(e,i),o="derived";else if(bBt(i))s=e=new DL(e,i),o="derived";else{Mt(Y8t(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function PL(e){var g;let t=$zt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(g1(i)||yT(i)||oI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new UBt;g1(i)?(Q3e(i)?t=new qR(t,i.sequence):Jee(i)&&(t=new HR(t,i.graticule)),s.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(s.parseNothing=!0),t=Pu.makeExplicit(t,e,s)??t,t=new H1(t);const a=e.parent&&RC(e.parent);(Eo(e)||mf(e))&&a&&(t=Qp.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Lzt(t,e,s));const u=Ijt(e),l=kjt(e);t=Pu.makeWithAncestors(t,{},{...u,...l},s)??t,Eo(e)&&(t=h2.parseAll(t,e),t=sI.parseAll(t,e)),(Eo(e)||mf(e))&&(a||(t=Qp.makeFromEncoding(t,e)??t),t=Kp.makeFromEncoding(t,e)??t,t=bT.parseAllForSortIndex(t,e));const c=t=mP(So.Raw,e,t);if(Eo(e)){const v=Th.makeFromEncoding(t,e);v&&(t=v,rte(e)&&(t=new H1(t))),t=hx.makeFromEncoding(t,e)??t,t=sg.makeFromEncoding(t,e)??t}let f,d;if(Eo(e)){const{markDef:v,mark:b,config:w}=e,E=Si("invalid",v,w),{marks:T,scales:C}=d=Z3e({invalid:E,isPath:Tv(b)});T!==C&&C==="include-invalid-values"&&(f=t=mP(So.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=_T.make(t,e,d)??t)}const h=t=mP(So.Main,e,t);let m;if(Eo(e)&&d){const{marks:v,scales:b}=d;v==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=_T.make(t,e,d)??t,m=t=mP(So.PostFilterInvalid,e,t))}Eo(e)&&C7t(e,h);let p=null;if(mf(e)){const v=e.getName("facet");t=Mzt(t,e.facet)??t,p=new kC(t,e,v,h.getSource()),n[v]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:p,ancestorParse:s,preFilterInvalid:f,postFilterInvalid:m}}function mP(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new hc(n,o,e,i);return r[o]=s,s}class Bzt extends pte{constructor(t,n,r,i){var o,s,a,u;super(t,"concat",n,r,i,t.resolve),(((s=(o=t.resolve)==null?void 0:o.axis)==null?void 0:s.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Mt(q8t),this.children=this.getChildren(t).map((l,c)=>xte(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=PL(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Xp(t))&&pee(hee)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return pL(t)?t.vconcat:Kee(t)?t.hconcat:t.concat}parseLayoutSize(){Pzt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=ste(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function jzt(e){return e===!1||e===null}const zzt={disable:1,gridScale:1,scale:1,...p3e,labelExpr:1,encode:1},f4e=It(zzt);class gte extends Ug{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new gte(Vn(this.explicit),Vn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!jzt(this.get(t))}hasOrientSignalRef(){return yn(this.explicit.orient)}}function Uzt(e,t,n){const{encoding:r,config:i}=e,o=zs(r[t])??zs(r[Lm(t)]),s=e.axis(t)||{},{format:a,formatType:u}=s;if(Bx(u))return{text:gh({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(pT(o)==="quantitative"){if(mT(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:gh({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:gh({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(pT(o)==="temporal"&&i.timeFormatType&&Bt(o)&&!o.timeUnit)return{text:gh({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Vzt(e){return jg.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Xzt(n,e)]),t),{})}const Hzt={bottom:"top",top:"bottom",left:"right",right:"left"};function qzt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of It(i.component.axes))n.axis[o]=ate(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=Wzt(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of jg){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:u}=s.getWithExplicit("orient");if(!yn(a)){if(r[a]>0&&!u){const l=Hzt[a];r[a]>r[l]&&s.set("orient",l,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function Wzt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=Gzt(i,o)}}}else return t.map(n=>n.clone());return e}function Gzt(e,t){for(const n of f4e){const r=V1(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return vNe(i,o);case"gridScale":return{explicit:i.explicit,value:cs(i.value,o.value)}}return gL(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function Yzt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(yn(n.labelAngle)?n.labelAngle:rI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===IPe(r,i))return!0}return e===n[t]}const Kzt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Xzt(e,t){var v,b;let n=t.axis(e);const r=new gte,i=zs(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((v=s[e==="x"?"axisX":"axisY"])==null?void 0:v.orient)||((b=s.axis)==null?void 0:b.orient)||F7t(e),u=t.getScaleComponent(e).get("type"),l=D7t(e,u,a,t.config),c=n!==void 0?!n:hq("disable",s.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=N7t(i,n,e,s.style,l),d=e3e(n.formatType,i,u),h=ZNe(i,i.type,n.format,n.formatType,s,!0),m={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:o,config:s};for(const w of f4e){const E=w in Whe?Whe[w](m):bhe(w)?n[w]:void 0,T=E!==void 0,C=Yzt(E,w,n,t,e);if(T&&C)r.set(w,E,C);else{const{configValue:S=void 0,configFrom:I=void 0}=bhe(w)&&w!=="values"?hq(w,s.style,n.style,l):{},R=S!==void 0;T&&!R?r.set(w,E,C):(I!=="vgAxisConfig"||Kzt.has(w)&&R||UR(S)||yn(S))&&r.set(w,S,!1)}}const p=n.encoding??{},g=h3e.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const T=MPe(p[E]??{},t),C=E==="labels"?Uzt(t,e,T):T;return C!==void 0&&!Ai(C)&&(w[E]={update:C}),w},{});return Ai(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Qzt({encoding:e,size:t}){for(const n of jg){const r=wc(n);xm(t[r])&&i1(e[n])&&(delete t[r],Mt(ENe(r)))}return t}const Jzt={vgMark:"arc",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...vl("x",e,{defaultPos:"mid"}),...vl("y",e,{defaultPos:"mid"}),...Eg(e,"radius"),...Eg(e,"theta")})},Zzt={vgMark:"area",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...kM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...kM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...nte(e)})},eUt={vgMark:"rect",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Eg(e,"x"),...Eg(e,"y")})},tUt={vgMark:"shape",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Bt(n)&&n.type===SC?{field:Ht(n,{expr:"datum"})}:{}}]}},nUt={vgMark:"image",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Eg(e,"x"),...Eg(e,"y"),...ete(e,"url")})},rUt={vgMark:"line",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...vl("x",e,{defaultPos:"mid"}),...vl("y",e,{defaultPos:"mid"}),...qa("size",e,{vgChannel:"strokeWidth"}),...nte(e)})},iUt={vgMark:"trail",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...vl("x",e,{defaultPos:"mid"}),...vl("y",e,{defaultPos:"mid"}),...qa("size",e),...nte(e)})};function yte(e,t){const{config:n}=e;return{...Ad(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...vl("x",e,{defaultPos:"mid"}),...vl("y",e,{defaultPos:"mid"}),...qa("size",e),...qa("angle",e),...oUt(e,n,t)}}function oUt(e,t,n){return n?{shape:{value:n}}:qa("shape",e)}const sUt={vgMark:"symbol",encodeEntry:e=>yte(e)},aUt={vgMark:"symbol",encodeEntry:e=>yte(e,"circle")},uUt={vgMark:"symbol",encodeEntry:e=>yte(e,"square")},lUt={vgMark:"rect",encodeEntry:e=>({...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Eg(e,"x"),...Eg(e,"y")})},cUt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...kM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...kM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...qa("size",e,{vgChannel:"strokeWidth"})}}},fUt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ad(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...vl("x",e,{defaultPos:"mid"}),...vl("y",e,{defaultPos:"mid"}),...ete(e),...qa("size",e,{vgChannel:"fontSize"}),...qa("angle",e),...Uhe("align",dUt(e.markDef,n,t)),...Uhe("baseline",hUt(e.markDef,n,t)),...vl("radius",e,{defaultPos:null}),...vl("theta",e,{defaultPos:null})}}};function dUt(e,t,n){if(Si("align",e,n)===void 0)return"center"}function hUt(e,t,n){if(Si("baseline",e,n)===void 0)return"middle"}const pUt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...Ad(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Eg(e,i),...vl(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:to(Si("thickness",n,t))}}},gP={arc:Jzt,area:Zzt,bar:eUt,circle:aUt,geoshape:tUt,image:nUt,line:rUt,point:sUt,rect:lUt,rule:cUt,square:uUt,text:fUt,tick:pUt,trail:iUt};function mUt(e){if(yr([oL,rL,wLt],e.mark)){const t=x3e(e.mark,e.encoding);if(t.length>0)return gUt(e,t)}else if(e.mark===iL){const t=QH.some(n=>Si(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return yUt(e)}return vte(e)}const upe="faceted_path_";function gUt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:upe+e.requestDataName(So.Main),data:e.requestDataName(So.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:vte(e,{fromPrefix:upe})}]}const lpe="stack_group_";function yUt(e){var l;const[t]=vte(e,{fromPrefix:lpe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...uT(t.encode.update,["y","yc","y2","height",...QH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...dc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...uT(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...dc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of QH){const f=vm(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):f&&(o[c]=to(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Ht(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Ht(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=vm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:to(d)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(So.Main),name:lpe+e.requestDataName(So.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function vUt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!gt(s)&&Oh(s)&&KH(s.value)||!s&&KH(Si("order",i,o)))){if((gt(s)||Bt(s))&&!n)return mNe(s,{expr:"datum"});if(Tv(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(Bt(u))return{field:a}}}}function vte(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,s=cs(r.clip,bUt(e),xUt(e)),a=hNe(r),u=i.key,l=vUt(e),c=wUt(e),f=Si("aria",r,o),d=gP[n].postEncodingTransform?gP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:gP[n].vgMark,...s?{clip:s}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(So.Main)},encode:{update:gP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function bUt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function xUt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function wUt(e){if(!e.component.selection)return null;const t=It(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=It(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class d4e extends a4e{constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,whe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+tPe)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const s=bm(t.mark)?{...t.mark}:{type:t.mark},a=s.type;s.filled===void 0&&(s.filled=iBt(s,o,{graticule:t.data&&Jee(t.data)}));const u=this.encoding=u9t(t.encoding||{},a,s.filled,o);this.markDef=z3e(s,u,o),this.size=Qzt({encoding:u,size:whe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=j3e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Gee(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===WNe,r=t&&e8t.some(i=>Yn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return lee.reduce((r,i)=>{const o=zs(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=za(t);return gt(n)&&(i.domain=n.map(tf)),gt(r)&&(i.range=r.map(tf)),i}initAxes(t){return jg.reduce((n,r)=>{const i=t[r];if(Yn(i)||r===ho&&Yn(t.x2)||r===_a&&Yn(t.y2)){const o=Yn(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=It(t),r={};for(const i of n){const o=t[i];r[i]=UR(o)?dNe(o):tf(o)}return r}initLegends(t){return f8t.reduce((n,r)=>{const i=zs(t[r]);if(i&&h8t(r)){const o=i.legend;n[r]=o&&za(o)}return n},{})}parseData(){this.component.data=PL(this)}parseLayoutSize(){Ozt(this)}parseSelections(){this.component.selection=T7t(this,this.selection)}parseMarkGroup(){this.component.mark=mUt(this)}parseAxesAndHeaders(){this.component.axes=Vzt(this)}assembleSelectionTopLevelSignals(t){return QBt(this,t)}assembleSignals(){return[...APe(this),...KBt(this,[])]}assembleSelectionData(t){return JBt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return ste(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!RC(this.parent))&&(t=oPe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return fx(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Fh(n)}typedFieldDef(t){const n=this.fieldDef(t);return Tl(n)?n:null}}class bte extends pte{constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(mL(a))return new bte(a,this,this.getName(`layer_${u}`),s,o);if(zg(a))return new d4e(a,this,this.getName(`layer_${u}`),s,o);throw new Error(fee(a))})}parseData(){this.component.data=PL(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Nzt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Xp(t))&&pee(hee)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){qzt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),APe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),ste(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Gt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ZBt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),HPe(this))}}function xte(e,t,n,r,i){if(uL(e))return new JD(e,t,n,i);if(mL(e))return new bte(e,t,n,r,i);if(zg(e))return new d4e(e,t,n,r,i);if(N9t(e))return new Bzt(e,t,n,i);throw new Error(fee(e))}function _Ut(e,t={}){t.logger&&F$t(t.logger),t.fieldTitle&&c3e(t.fieldTitle);try{const n=B3e(hC(t.config,e.config)),r=Y3e(e,n),i=xte(r,null,"",void 0,n);return i.parse(),Wjt(i.component.data,i),{spec:TUt(i,EUt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&M$t(),t.fieldTitle&&ZLt()}}function EUt(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Yt(t)&&(t={type:t}),i&&o&&BBt(t.type)){if(i==="step"&&o==="step")Mt(ohe()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";Mt(ohe(Q$(s)));const a=s==="width"?"height":"width";t.type=jBt(a)}}return{...It(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Phe(n,!1),...Phe(e,!0)}}function TUt(e,t,n={},r){const i=e.config?W9t(e.config):void 0,o=Dzt(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(t[m.name]=+m.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...F3e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const CUt=Y5t.version,SUt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:cT,accessPathWithDatum:tee,accessWithDatumToUnescapedPath:vi,compile:_Ut,contains:yr,deepEqual:lf,deleteNestedProperty:bM,duplicate:Vn,entries:j1,every:JZ,fieldIntersection:eee,flatAccessWithDatum:GRe,getFirstDefined:cs,hasIntersection:ZZ,hasProperty:Pt,hash:Ar,internalField:XRe,isBoolean:nI,isEmpty:Ai,isEqual:X5t,isInternalField:QRe,isNullOrFalse:KH,isNumeric:q$,keys:It,logicalExpr:XD,mergeDeep:qRe,never:HRe,normalize:Y3e,normalizeAngle:rI,omit:dc,pick:uT,prefixGenerator:XH,removePathFromField:TC,replaceAll:Px,replacePathInField:pd,resetIdCounter:J5t,setEqual:WRe,some:lT,stringify:Di,titleCase:RR,unique:jp,uniqueId:KRe,vals:Ja,varName:co,version:CUt},Symbol.toStringTag,{value:"Module"}));function h4e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var AUt="vega-themes",DUt="2.15.0",kUt="Themes for stylized Vega and Vega-Lite visualizations.",IUt=["vega","vega-lite","themes","style"],RUt="BSD-3-Clause",NUt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},PUt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],OUt="build/vega-themes.js",wte="build/vega-themes.module.js",FUt="build/vega-themes.min.js",MUt="build/vega-themes.min.js",$Ut="build/vega-themes.module.d.ts",LUt={type:"git",url:"https://github.com/vega/vega-themes.git"},BUt=["src","build"],jUt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},zUt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},UUt={vega:"*","vega-lite":"*"},VUt={},HUt={name:AUt,version:DUt,description:kUt,keywords:IUt,license:RUt,author:NUt,contributors:PUt,main:OUt,module:wte,unpkg:FUt,jsdelivr:MUt,types:$Ut,repository:LUt,files:BUt,scripts:jUt,devDependencies:zUt,peerDependencies:UUt,dependencies:VUt};const gE="#fff",cpe="#888",qUt={background:"#333",view:{stroke:cpe},title:{color:gE,subtitleColor:gE},style:{"guide-label":{fill:gE},"guide-title":{fill:gE}},axis:{domainColor:gE,gridColor:cpe,tickColor:gE}},yb="#4572a7",WUt={background:"#fff",arc:{fill:yb},area:{fill:yb},line:{stroke:yb,strokeWidth:2},path:{stroke:yb},rect:{fill:yb},shape:{stroke:yb},symbol:{fill:yb,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},vb="#30a2da",jj="#cbcbcb",GUt="#999",YUt="#333",fpe="#f0f0f0",dpe="#333",KUt={arc:{fill:vb},area:{fill:vb},axis:{domainColor:jj,grid:!0,gridColor:jj,gridWidth:1,labelColor:GUt,labelFontSize:10,titleColor:YUt,tickColor:jj,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:fpe,group:{fill:fpe},legend:{labelColor:dpe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:dpe,titleFontSize:14,titlePadding:10},line:{stroke:vb,strokeWidth:2},path:{stroke:vb,strokeWidth:.5},rect:{fill:vb},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:vb},bar:{binSpacing:2,fill:vb,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},bb="#000",XUt={group:{fill:"#e5e5e5"},arc:{fill:bb},area:{fill:bb},line:{stroke:bb},path:{stroke:bb},rect:{fill:bb},shape:{stroke:bb},symbol:{fill:bb,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},QUt=22,JUt="normal",hpe="Benton Gothic, sans-serif",ppe=11.5,ZUt="normal",xb="#82c6df",zj="Benton Gothic Bold, sans-serif",mpe="normal",gpe=13,wA={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},eVt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:zj,fontSize:QUt,fontWeight:JUt},arc:{fill:xb},area:{fill:xb},line:{stroke:xb,strokeWidth:2},path:{stroke:xb},rect:{fill:xb},shape:{stroke:xb},symbol:{fill:xb,size:30},axis:{labelFont:hpe,labelFontSize:ppe,labelFontWeight:ZUt,titleFont:zj,titleFontSize:gpe,titleFontWeight:mpe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:hpe,labelFontSize:ppe,symbolType:"square",titleFont:zj,titleFontSize:gpe,titleFontWeight:mpe},range:{category:wA["category-6"],diverging:wA["fireandice-6"],heatmap:wA["fire-7"],ordinal:wA["fire-7"],ramp:wA["fire-7"]}},wb="#ab5787",yP="#979797",tVt={background:"#f9f9f9",arc:{fill:wb},area:{fill:wb},line:{stroke:wb},path:{stroke:wb},rect:{fill:wb},shape:{stroke:wb},symbol:{fill:wb,size:30},axis:{domainColor:yP,domainWidth:.5,gridWidth:.2,labelColor:yP,tickColor:yP,tickWidth:.2,titleColor:yP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},_b="#3e5c69",nVt={background:"#fff",arc:{fill:_b},area:{fill:_b},line:{stroke:_b},path:{stroke:_b},rect:{fill:_b},shape:{stroke:_b},symbol:{fill:_b},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Kf="#1696d2",ype="#000000",rVt="#FFFFFF",vP="Lato",Uj="Lato",iVt="Lato",oVt="#DEDDDD",sVt=18,_A={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},aVt={background:rVt,title:{anchor:"start",fontSize:sVt,font:vP},axisX:{domain:!0,domainColor:ype,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Uj,labelAngle:0,tickColor:ype,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:vP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:oVt,gridWidth:1,labelFontSize:12,labelFont:Uj,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:vP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Uj,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:vP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:_A["six-groups-cat-1"],diverging:_A["diverging-colors"],heatmap:_A["diverging-colors"],ordinal:_A["six-groups-seq"],ramp:_A["shades-blue"]},area:{fill:Kf},rect:{fill:Kf},line:{color:Kf,stroke:Kf,strokeWidth:5},trail:{color:Kf,stroke:Kf,strokeWidth:0,size:1},path:{stroke:Kf,strokeWidth:.5},point:{filled:!0},text:{font:iVt,color:Kf,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Kf,stroke:null}},arc:{fill:Kf},shape:{stroke:Kf},symbol:{fill:Kf,size:30}},Eb="#3366CC",vpe="#ccc",bP="Arial, sans-serif",uVt={arc:{fill:Eb},area:{fill:Eb},path:{stroke:Eb},rect:{fill:Eb},shape:{stroke:Eb},symbol:{stroke:Eb},circle:{fill:Eb},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:bP,fontSize:12},"guide-title":{font:bP,fontSize:12},"group-title":{font:bP,fontSize:12}},title:{font:bP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:vpe,tickColor:vpe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},_te=e=>e*(1/3+1),bpe=_te(9),xpe=_te(10),wpe=_te(12),EA="Segoe UI",_pe="wf_standard-font, helvetica, arial, sans-serif",Epe="#252423",TA="#605E5C",Tpe="transparent",lVt="#C8C6C4",Jd="#118DFF",cVt="#12239E",fVt="#E66C37",dVt="#6B007B",hVt="#E044A7",pVt="#744EC2",mVt="#D9B300",gVt="#D64550",p4e=Jd,m4e="#DEEFFF",Cpe=[m4e,p4e],yVt=[m4e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",p4e],vVt={view:{stroke:Tpe},background:Tpe,font:EA,header:{titleFont:_pe,titleFontSize:wpe,titleColor:Epe,labelFont:EA,labelFontSize:xpe,labelColor:TA},axis:{ticks:!1,grid:!1,domain:!1,labelColor:TA,labelFontSize:bpe,titleFont:_pe,titleColor:Epe,titleFontSize:wpe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:lVt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Jd},line:{stroke:Jd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:EA,fontSize:bpe,fill:TA},arc:{fill:Jd},area:{fill:Jd,line:!0,opacity:.6},path:{stroke:Jd},rect:{fill:Jd},point:{fill:Jd,filled:!0,size:75},shape:{stroke:Jd},symbol:{fill:Jd,strokeWidth:1.5,size:50},legend:{titleFont:EA,titleFontWeight:"bold",titleColor:TA,labelFont:EA,labelFontSize:xpe,labelColor:TA,symbolType:"circle",symbolSize:75},range:{category:[Jd,cVt,fVt,dVt,hVt,pVt,mVt,gVt],diverging:Cpe,heatmap:Cpe,ordinal:yVt}},Vj='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',bVt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Hj=400,xP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},xVt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],wVt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function OL({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=xP.gridBg[e],i=xP.textPrimary[e],o=xP.textSecondary[e],s=n==="dark"?xVt:wVt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Vj,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:bVt,labelFontWeight:Hj,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:xP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Vj,fill:o,fontWeight:Hj},"guide-title":{font:Vj,fill:o,fontWeight:Hj}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const _Vt=OL({theme:"white",background:"#ffffff"}),EVt=OL({theme:"g10",background:"#f4f4f4"}),TVt=OL({theme:"g90",background:"#262626"}),CVt=OL({theme:"g100",background:"#161616"}),SVt=HUt.version,AVt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:EVt,carbong100:CVt,carbong90:TVt,carbonwhite:_Vt,dark:qUt,excel:WUt,fivethirtyeight:KUt,ggplot2:XUt,googlecharts:uVt,latimes:eVt,powerbi:vVt,quartz:tVt,urbaninstitute:aVt,version:SVt,vox:nVt},Symbol.toStringTag,{value:"Module"}));function DVt(e,t,n,r){if(gt(e))return`[${e.map(i=>t(Yt(i)?i:Spe(i,n))).join(", ")}]`;if(qt(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(qt(c)&&(c=Spe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function kVt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Spe(e,t){return JSON.stringify(e,kVt(t))}var IVt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const g4e="vg-tooltip-element",RVt={offsetX:10,offsetY:10,id:g4e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:NVt,maxDepth:2,formatTooltip:DVt,baseURL:""};function NVt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function PVt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return IVt.toString().replace(g4e,e)}function OVt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class FVt{constructor(t){this.options={...RVt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=PVt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=OVt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var qj={};function MVt(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wj,Ape;function $Vt(){return Ape||(Ape=1,Wj=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Wj}var LVt=ri;ri.Node=Vx;ri.create=ri;function ri(e){var t=this;if(t instanceof ri||(t=new ri),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ri.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ri.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ri.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ri.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)jVt(this,arguments[e]);return this.length};ri.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)zVt(this,arguments[e]);return this.length};ri.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ri.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ri.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ri.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ri.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ri.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ri.prototype.map=function(e,t){t=t||this;for(var n=new ri,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ri.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ri,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ri.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ri.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ri.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ri.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ri.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ri;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ri.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ri;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ri.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var o=[],r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=BVt(this,i,n[r]);return o};ri.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function BVt(e,t,n){var r=t===e.head?new Vx(n,null,t,e):new Vx(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function jVt(e,t){e.tail=new Vx(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function zVt(e,t){e.head=new Vx(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Vx(e,t,n,r){if(!(this instanceof Vx))return new Vx(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{$Vt()(ri)}catch{}const UVt=LVt,qb=Symbol("max"),R0=Symbol("length"),yE=Symbol("lengthCalculator"),ZD=Symbol("allowStale"),tx=Symbol("maxAge"),A0=Symbol("dispose"),Dpe=Symbol("noDisposeOnSet"),aa=Symbol("lruList"),Zd=Symbol("cache"),y4e=Symbol("updateAgeOnGet"),Gj=()=>1;class VVt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[qb]=t.max||1/0;const n=t.length||Gj;if(this[yE]=typeof n!="function"?Gj:n,this[ZD]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[tx]=t.maxAge||0,this[A0]=t.dispose,this[Dpe]=t.noDisposeOnSet||!1,this[y4e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[qb]=t||1/0,CA(this)}get max(){return this[qb]}set allowStale(t){this[ZD]=!!t}get allowStale(){return this[ZD]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[tx]=t,CA(this)}get maxAge(){return this[tx]}set lengthCalculator(t){typeof t!="function"&&(t=Gj),t!==this[yE]&&(this[yE]=t,this[R0]=0,this[aa].forEach(n=>{n.length=this[yE](n.value,n.key),this[R0]+=n.length})),CA(this)}get lengthCalculator(){return this[yE]}get length(){return this[R0]}get itemCount(){return this[aa].length}rforEach(t,n){n=n||this;for(let r=this[aa].tail;r!==null;){const i=r.prev;kpe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[aa].head;r!==null;){const i=r.next;kpe(this,t,r,n),r=i}}keys(){return this[aa].toArray().map(t=>t.key)}values(){return this[aa].toArray().map(t=>t.value)}reset(){this[A0]&&this[aa]&&this[aa].length&&this[aa].forEach(t=>this[A0](t.key,t.value)),this[Zd]=new Map,this[aa]=new UVt,this[R0]=0}dump(){return this[aa].map(t=>PM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[aa]}set(t,n,r){if(r=r||this[tx],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,o=this[yE](n,t);if(this[Zd].has(t)){if(o>this[qb])return p2(this,this[Zd].get(t)),!1;const u=this[Zd].get(t).value;return this[A0]&&(this[Dpe]||this[A0](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[R0]+=o-u.length,u.length=o,this.get(t),CA(this),!0}const s=new HVt(t,n,o,i,r);return s.length>this[qb]?(this[A0]&&this[A0](t,n),!1):(this[R0]+=s.length,this[aa].unshift(s),this[Zd].set(t,this[aa].head),CA(this),!0)}has(t){if(!this[Zd].has(t))return!1;const n=this[Zd].get(t).value;return!PM(this,n)}get(t){return Yj(this,t,!0)}peek(t){return Yj(this,t,!1)}pop(){const t=this[aa].tail;return t?(p2(this,t),t.value):null}del(t){p2(this,this[Zd].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{const s=o-n;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Zd].forEach((t,n)=>Yj(this,n,!1))}}const Yj=(e,t,n)=>{const r=e[Zd].get(t);if(r){const i=r.value;if(PM(e,i)){if(p2(e,r),!e[ZD])return}else n&&(e[y4e]&&(r.value.now=Date.now()),e[aa].unshiftNode(r));return i.value}},PM=(e,t)=>{if(!t||!t.maxAge&&!e[tx])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[tx]&&n>e[tx]},CA=e=>{if(e[R0]>e[qb])for(let t=e[aa].tail;e[R0]>e[qb]&&t!==null;){const n=t.prev;p2(e,t),t=n}},p2=(e,t)=>{if(t){const n=t.value;e[A0]&&e[A0](n.key,n.value),e[R0]-=n.length,e[Zd].delete(n.key),e[aa].removeNode(t)}};class HVt{constructor(t,n,r,i,o){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=o||0}}const kpe=(e,t,n,r)=>{let i=n.value;PM(e,i)&&(p2(e,n),e[ZD]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var qVt=VVt;const WVt=Object.freeze({loose:!0}),GVt=Object.freeze({}),YVt=e=>e?typeof e!="object"?WVt:e:GVt;var Ete=YVt,Eq={exports:{}};const KVt="2.0.0",v4e=256,XVt=Number.MAX_SAFE_INTEGER||9007199254740991,QVt=16,JVt=v4e-6,ZVt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Tte={MAX_LENGTH:v4e,MAX_SAFE_COMPONENT_LENGTH:QVt,MAX_SAFE_BUILD_LENGTH:JVt,MAX_SAFE_INTEGER:XVt,RELEASE_TYPES:ZVt,SEMVER_SPEC_VERSION:KVt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const eHt=typeof process=="object"&&qj&&qj.NODE_DEBUG&&/\bsemver\b/i.test(qj.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var FL=eHt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Tte,o=FL;t=e.exports={};const s=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=p=>{for(const[g,v]of d)p=p.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return p},m=(p,g,v)=>{const b=h(g),w=c++;o(p,w,g),l[p]=w,u[w]=g,s[w]=new RegExp(g,v?"g":void 0),a[w]=new RegExp(b,v?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),m("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${f}+`),m("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),m("FULL",`^${u[l.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),m("LOOSE",`^${u[l.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),m("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",u[l.COERCE],!0),m("COERCERTLFULL",u[l.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Eq,Eq.exports);var Cte=Eq.exports;const Ipe=/^[0-9]+$/,b4e=(e,t)=>{const n=Ipe.test(e),r=Ipe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},tHt=(e,t)=>b4e(t,e);var nHt={compareIdentifiers:b4e,rcompareIdentifiers:tHt};const wP=FL,{MAX_LENGTH:Rpe,MAX_SAFE_INTEGER:_P}=Tte,{safeRe:Npe,t:Ppe}=Cte,rHt=Ete,{compareIdentifiers:vE}=nHt;let iHt=class _p{constructor(t,n){if(n=rHt(n),t instanceof _p){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Rpe)throw new TypeError(`version is longer than ${Rpe} characters`);wP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Npe[Ppe.LOOSE]:Npe[Ppe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>_P||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_P||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_P||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const o=+i;if(o>=0&&o<_P)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(wP("SemVer.compare",this.version,this.options,t),!(t instanceof _p)){if(typeof t=="string"&&t===this.version)return 0;t=new _p(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof _p||(t=new _p(t,this.options)),vE(this.major,t.major)||vE(this.minor,t.minor)||vE(this.patch,t.patch)}comparePre(t){if(t instanceof _p||(t=new _p(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(wP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vE(r,i)}while(++n)}compareBuild(t){t instanceof _p||(t=new _p(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(wP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return vE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),vE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ste=iHt;const Ope=Ste,oHt=(e,t,n)=>new Ope(e,n).compare(new Ope(t,n));var NC=oHt;const sHt=NC,aHt=(e,t,n)=>sHt(e,t,n)===0;var uHt=aHt;const lHt=NC,cHt=(e,t,n)=>lHt(e,t,n)!==0;var fHt=cHt;const dHt=NC,hHt=(e,t,n)=>dHt(e,t,n)>0;var pHt=hHt;const mHt=NC,gHt=(e,t,n)=>mHt(e,t,n)>=0;var yHt=gHt;const vHt=NC,bHt=(e,t,n)=>vHt(e,t,n)<0;var xHt=bHt;const wHt=NC,_Ht=(e,t,n)=>wHt(e,t,n)<=0;var EHt=_Ht;const THt=uHt,CHt=fHt,SHt=pHt,AHt=yHt,DHt=xHt,kHt=EHt,IHt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return THt(e,n,r);case"!=":return CHt(e,n,r);case">":return SHt(e,n,r);case">=":return AHt(e,n,r);case"<":return DHt(e,n,r);case"<=":return kHt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var RHt=IHt,Kj,Fpe;function NHt(){if(Fpe)return Kj;Fpe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),s("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(s("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Kj=t;const n=Ete,{safeRe:r,t:i}=Cte,o=RHt,s=FL,a=Ste,u=x4e();return Kj}var Xj,Mpe;function x4e(){if(Mpe)return Xj;Mpe=1;class e{constructor(z,G){if(G=r(G),z instanceof e)return z.loose===!!G.loose&&z.includePrerelease===!!G.includePrerelease?z:new e(z.raw,G);if(z instanceof i)return this.raw=z.value,this.set=[[z]],this.format(),this;if(this.options=G,this.loose=!!G.loose,this.includePrerelease=!!G.includePrerelease,this.raw=z.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(W=>this.parseRange(W.trim())).filter(W=>W.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const W=this.set[0];if(this.set=this.set.filter(te=>!m(te[0])),this.set.length===0)this.set=[W];else if(this.set.length>1){for(const te of this.set)if(te.length===1&&p(te[0])){this.set=[te];break}}}this.format()}format(){return this.range=this.set.map(z=>z.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(z){const W=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+z,te=n.get(W);if(te)return te;const Z=this.options.loose,re=Z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];z=z.replace(re,M(this.options.includePrerelease)),o("hyphen replace",z),z=z.replace(a[u.COMPARATORTRIM],l),o("comparator trim",z),z=z.replace(a[u.TILDETRIM],c),o("tilde trim",z),z=z.replace(a[u.CARETTRIM],f),o("caret trim",z);let q=z.split(" ").map(X=>v(X,this.options)).join(" ").split(/\s+/).map(X=>P(X,this.options));Z&&(q=q.filter(X=>(o("loose invalid filter",X,this.options),!!X.match(a[u.COMPARATORLOOSE])))),o("range list",q);const U=new Map,Y=q.map(X=>new i(X,this.options));for(const X of Y){if(m(X))return[X];U.set(X.value,X)}U.size>1&&U.has("")&&U.delete("");const H=[...U.values()];return n.set(W,H),H}intersects(z,G){if(!(z instanceof e))throw new TypeError("a Range is required");return this.set.some(W=>g(W,G)&&z.set.some(te=>g(te,G)&&W.every(Z=>te.every(re=>Z.intersects(re,G)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new s(z,this.options)}catch{return!1}for(let G=0;G<this.set.length;G++)if(B(this.set[G],z,this.options))return!0;return!1}}Xj=e;const t=qVt,n=new t({max:1e3}),r=Ete,i=NHt(),o=FL,s=Ste,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Cte,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Tte,m=L=>L.value==="<0.0.0-0",p=L=>L.value==="",g=(L,z)=>{let G=!0;const W=L.slice();let te=W.pop();for(;G&&W.length;)G=W.every(Z=>te.intersects(Z,z)),te=W.pop();return G},v=(L,z)=>(o("comp",L,z),L=T(L,z),o("caret",L),L=w(L,z),o("tildes",L),L=S(L,z),o("xrange",L),L=R(L,z),o("stars",L),L),b=L=>!L||L.toLowerCase()==="x"||L==="*",w=(L,z)=>L.trim().split(/\s+/).map(G=>E(G,z)).join(" "),E=(L,z)=>{const G=z.loose?a[u.TILDELOOSE]:a[u.TILDE];return L.replace(G,(W,te,Z,re,q)=>{o("tilde",L,W,te,Z,re,q);let U;return b(te)?U="":b(Z)?U=`>=${te}.0.0 <${+te+1}.0.0-0`:b(re)?U=`>=${te}.${Z}.0 <${te}.${+Z+1}.0-0`:q?(o("replaceTilde pr",q),U=`>=${te}.${Z}.${re}-${q} <${te}.${+Z+1}.0-0`):U=`>=${te}.${Z}.${re} <${te}.${+Z+1}.0-0`,o("tilde return",U),U})},T=(L,z)=>L.trim().split(/\s+/).map(G=>C(G,z)).join(" "),C=(L,z)=>{o("caret",L,z);const G=z.loose?a[u.CARETLOOSE]:a[u.CARET],W=z.includePrerelease?"-0":"";return L.replace(G,(te,Z,re,q,U)=>{o("caret",L,te,Z,re,q,U);let Y;return b(Z)?Y="":b(re)?Y=`>=${Z}.0.0${W} <${+Z+1}.0.0-0`:b(q)?Z==="0"?Y=`>=${Z}.${re}.0${W} <${Z}.${+re+1}.0-0`:Y=`>=${Z}.${re}.0${W} <${+Z+1}.0.0-0`:U?(o("replaceCaret pr",U),Z==="0"?re==="0"?Y=`>=${Z}.${re}.${q}-${U} <${Z}.${re}.${+q+1}-0`:Y=`>=${Z}.${re}.${q}-${U} <${Z}.${+re+1}.0-0`:Y=`>=${Z}.${re}.${q}-${U} <${+Z+1}.0.0-0`):(o("no pr"),Z==="0"?re==="0"?Y=`>=${Z}.${re}.${q}${W} <${Z}.${re}.${+q+1}-0`:Y=`>=${Z}.${re}.${q}${W} <${Z}.${+re+1}.0-0`:Y=`>=${Z}.${re}.${q} <${+Z+1}.0.0-0`),o("caret return",Y),Y})},S=(L,z)=>(o("replaceXRanges",L,z),L.split(/\s+/).map(G=>I(G,z)).join(" ")),I=(L,z)=>{L=L.trim();const G=z.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return L.replace(G,(W,te,Z,re,q,U)=>{o("xRange",L,W,te,Z,re,q,U);const Y=b(Z),H=Y||b(re),X=H||b(q),ee=X;return te==="="&&ee&&(te=""),U=z.includePrerelease?"-0":"",Y?te===">"||te==="<"?W="<0.0.0-0":W="*":te&&ee?(H&&(re=0),q=0,te===">"?(te=">=",H?(Z=+Z+1,re=0,q=0):(re=+re+1,q=0)):te==="<="&&(te="<",H?Z=+Z+1:re=+re+1),te==="<"&&(U="-0"),W=`${te+Z}.${re}.${q}${U}`):H?W=`>=${Z}.0.0${U} <${+Z+1}.0.0-0`:X&&(W=`>=${Z}.${re}.0${U} <${Z}.${+re+1}.0-0`),o("xRange return",W),W})},R=(L,z)=>(o("replaceStars",L,z),L.trim().replace(a[u.STAR],"")),P=(L,z)=>(o("replaceGTE0",L,z),L.trim().replace(a[z.includePrerelease?u.GTE0PRE:u.GTE0],"")),M=L=>(z,G,W,te,Z,re,q,U,Y,H,X,ee,le)=>(b(W)?G="":b(te)?G=`>=${W}.0.0${L?"-0":""}`:b(Z)?G=`>=${W}.${te}.0${L?"-0":""}`:re?G=`>=${G}`:G=`>=${G}${L?"-0":""}`,b(Y)?U="":b(H)?U=`<${+Y+1}.0.0-0`:b(X)?U=`<${Y}.${+H+1}.0-0`:ee?U=`<=${Y}.${H}.${X}-${ee}`:L?U=`<${Y}.${H}.${+X+1}-0`:U=`<=${U}`,`${G} ${U}`.trim()),B=(L,z,G)=>{for(let W=0;W<L.length;W++)if(!L[W].test(z))return!1;if(z.prerelease.length&&!G.includePrerelease){for(let W=0;W<L.length;W++)if(o(L[W].semver),L[W].semver!==i.ANY&&L[W].semver.prerelease.length>0){const te=L[W].semver;if(te.major===z.major&&te.minor===z.minor&&te.patch===z.patch)return!0}return!1}return!0};return Xj}const PHt=x4e(),OHt=(e,t,n)=>{try{t=new PHt(t,n)}catch{return!1}return t.test(e)};var FHt=OHt,w4e=MVt(FHt);function MHt(e,t,n){const r=e.open(t),i=250,{origin:o}=new URL(t);let s=40;function a(l){l.source===r&&(s=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){s<=0||(r.postMessage(n,o),setTimeout(u,i),s-=1)}setTimeout(u,i)}var $Ht=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function _4e(e,...t){for(const n of t)LHt(e,n);return e}function LHt(e,t){for(const n of Object.keys(t))pC(e,n,t[n],!0)}const eh=p5t;let uI=SUt;const EP=typeof window<"u"?window:void 0;var V0e;uI===void 0&&((V0e=EP==null?void 0:EP.vl)!=null&&V0e.compile)&&(uI=EP.vl);const BHt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},jHt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},mD={vega:"Vega","vega-lite":"Vega-Lite"},OM={vega:eh.version,"vega-lite":uI?uI.version:"not available"},zHt={vega:e=>e,"vega-lite":(e,t)=>uI.compile(e,{config:t}).spec},UHt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,VHt="chart-wrapper";function HHt(e){return typeof e=="function"}function $pe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${mD[r]} JSON Source`}function qHt(e,t){if(e.$schema){const n=h4e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${mD[n.library]}, but mode argument sets ${mD[t]??t}.`);const r=n.library;return w4e(OM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${mD[r]} ${n.version}, but the current version of ${mD[r]} is v${OM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function E4e(e){return!!(e&&"load"in e)}function Lpe(e){return E4e(e)?e:eh.loader(e)}function WHt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Yt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function GHt(e,t,n={}){let r,i;Yt(t)?(i=Lpe(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=WHt(r),s=o.loader;(!i||s)&&(i=Lpe(n.loader??s));const a=await Bpe(o,i),u=await Bpe(n,i),l={..._4e(u,a),config:hC(u.config??{},a.config??{})};return await KHt(e,r,l,i)}async function Bpe(e,t){const n=Yt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Yt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function YHt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function KHt(e,t,n={},r){const i=n.theme?hC(AVt[n.theme],n.config??{}):n.config,o=pv(n.actions)?n.actions:_4e({},BHt,n.actions??{}),s={...jHt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??eh.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:C,rootContainer:S}=YHt(c);if(!C.getElementById(T)){const I=document.createElement("style");I.id=T,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?$Ht.toString():n.defaultStyle,S.appendChild(I)}}const f=qHt(t,n.mode);let d=zHt[f](t,i);if(f==="vega-lite"&&d.$schema){const T=h4e(d.$schema);w4e(OM.vega,`^${T.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${T.version}, but current version is v${OM.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(o){const T=document.createElement("div");T.classList.add(VHt),c.appendChild(T),h=T}const m=n.patch;if(m&&(d=m instanceof Function?m(d):X8(d,m,!0,!1).newDocument),n.formatLocale&&eh.formatLocale(n.formatLocale),n.timeFormatLocale&&eh.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const C=n.expressionFunctions[T];"fn"in C?eh.expressionFunction(T,C.fn,C.visitor):C instanceof Function&&eh.expressionFunction(T,C)}const{ast:p}=n,g=eh.parse(d,f==="vega-lite"?{}:i,{ast:p}),v=new(n.viewClass||eh.View)(g,{loader:r,logLevel:u,renderer:a,...p?{expr:eh.expressionInterpreter??n.expr??T5t}:{}});if(v.addSignalListener("autosize",(T,C)=>{const{type:S}=C;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:C}=n,S=T&&!E4e(T)?T==null?void 0:T.baseURL:void 0,I=HHt(C)?C:new FVt({baseURL:S,...C===!0?{}:C}).call;v.tooltip(I)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:T,updateSet:C}=typeof b=="boolean"?{}:b;v.hover(T,C)}n&&(n.width!=null&&v.width(n.width),n.height!=null&&v.height(n.height),n.padding!=null&&v.padding(n.padding)),await v.initialize(h,n.bind).runAsync();let w;if(o!==!1){let T=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=s.CLICK_TO_VIEW_ACTIONS,c.append(S),T=S;const I=document.createElement("summary");I.innerHTML=UHt,S.append(I),w=R=>{S.contains(R.target)||S.removeAttribute("open")},document.addEventListener("click",w)}const C=document.createElement("div");if(T.append(C),C.classList.add("vega-actions"),o===!0||o.export!==!1){for(const S of["svg","png"])if(o===!0||o.export===!0||o.export[S]){const I=s[`${S.toUpperCase()}_ACTION`],R=document.createElement("a"),P=qt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;R.text=I,R.href="#",R.target="_blank",R.download=`${l}.${S}`,R.addEventListener("mousedown",async function(M){M.preventDefault();const B=await v.toImageURL(S,P);this.href=B}),C.append(R)}}if(o===!0||o.source!==!1){const S=document.createElement("a");S.text=s.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(I){$pe(G7(t),n.sourceHeader??"",n.sourceFooter??"",f),I.preventDefault()}),C.append(S)}if(f==="vega-lite"&&(o===!0||o.compiled!==!1)){const S=document.createElement("a");S.text=s.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(I){$pe(G7(d),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),C.append(S)}if(o===!0||o.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=s.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(R){MHt(window,S,{config:i,mode:f,renderer:a,spec:G7(t)}),R.preventDefault()}),C.append(I)}}function E(){w&&document.removeEventListener("click",w),v.finalize()}return{view:v,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function XHt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function QHt(e,t,n){n&&(XHt(n)?n(e.data(t)):e.change(t,eh.changeset().remove(()=>!0).insert(n)))}function JHt(e,t){Object.keys(t).forEach(n=>{QHt(e,n,t[n])})}function T4e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const C4e=()=>{};function Qj(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function ZHt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=T4e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!jA(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function jpe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Jj(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function gD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class S4e extends Gr.PureComponent{constructor(){super(...arguments),gD(this,"containerRef",Gr.createRef()),gD(this,"resultPromise",void 0),gD(this,"handleError",t=>{const{onError:n=C4e}=this.props;n(t,this.containerRef.current),console.warn(t)}),gD(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=T4e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=ZHt(Jj(this.props),Jj(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const s=!qV(i,o);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),s&&(o&&jpe(a,o),i&&Qj(a,i)),a.run()})}else qV(i,o)||this.modifyView(s=>{o&&jpe(s,o),i&&Qj(s,i),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...s}=this.props;if(this.containerRef.current){const a=Jj(this.props);this.resultPromise=GHt(this.containerRef.current,a,s).then(u=>{if(u){const{view:l}=u;Qj(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Gr.createElement("div",{ref:this.containerRef,className:t,style:n})}}gD(S4e,"propTypes",{className:Mre.string,onError:Mre.func});function Tq(){return Tq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tq.apply(this,arguments)}function Cq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const eqt={};class Ate extends Gr.PureComponent{constructor(){super(...arguments),Cq(this,"vegaEmbed",Gr.createRef()),Cq(this,"handleNewView",t=>{this.update();const{onNewView:n=C4e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){qV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{JHt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Gr.createElement(S4e,Tq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Cq(Ate,"defaultProps",{data:eqt});function Sq(){return Sq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sq.apply(this,arguments)}function zpe(e){return Gr.createElement(Ate,Sq({},e,{mode:"vega-lite"}))}function lh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function q1(e){return!!e&&!!e[lo]}function Cg(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===lqt}(e)||Array.isArray(e)||!!e[Ype]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ype])||Dte(e)||kte(e))}function Hx(e,t,n){n===void 0&&(n=!1),PC(e)===0?(n?Object.keys:g2)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function PC(e){var t=e[lo];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Dte(e)?2:kte(e)?3:0}function m2(e,t){return PC(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function tqt(e,t){return PC(e)===2?e.get(t):e[t]}function A4e(e,t,n){var r=PC(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function D4e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Dte(e){return aqt&&e instanceof Map}function kte(e){return uqt&&e instanceof Set}function Fb(e){return e.o||e.t}function Ite(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=I4e(e);delete t[lo];for(var n=g2(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Rte(e,t){return t===void 0&&(t=!1),Nte(e)||q1(e)||!Cg(e)||(PC(e)>1&&(e.set=e.add=e.clear=e.delete=nqt),Object.freeze(e),t&&Hx(e,function(n,r){return Rte(r,!0)},!0)),e}function nqt(){lh(2)}function Nte(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Jp(e){var t=Iq[e];return t||lh(18,e),t}function rqt(e,t){Iq[e]||(Iq[e]=t)}function Aq(){return lI}function Zj(e,t){t&&(Jp("Patches"),e.u=[],e.s=[],e.v=t)}function FM(e){Dq(e),e.p.forEach(iqt),e.p=null}function Dq(e){e===lI&&(lI=e.l)}function Upe(e){return lI={p:[],l:lI,h:e,m:!0,_:0}}function iqt(e){var t=e[lo];t.i===0||t.i===1?t.j():t.g=!0}function ez(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Jp("ES5").S(t,e,r),r?(n[lo].P&&(FM(t),lh(4)),Cg(e)&&(e=MM(t,e),t.l||$M(t,e)),t.u&&Jp("Patches").M(n[lo].t,e,t.u,t.s)):e=MM(t,n,[]),FM(t),t.u&&t.v(t.u,t.s),e!==k4e?e:void 0}function MM(e,t,n){if(Nte(t))return t;var r=t[lo];if(!r)return Hx(t,function(a,u){return Vpe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return $M(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Ite(r.k):r.o,o=i,s=!1;r.i===3&&(o=new Set(i),i.clear(),s=!0),Hx(o,function(a,u){return Vpe(e,r,i,a,u,n,s)}),$M(e,i,!1),n&&e.u&&Jp("Patches").N(r,n,e.u,e.s)}return r.o}function Vpe(e,t,n,r,i,o,s){if(q1(i)){var a=MM(e,i,o&&t&&t.i!==3&&!m2(t.R,r)?o.concat(r):void 0);if(A4e(n,r,a),!q1(a))return;e.m=!1}else s&&n.add(i);if(Cg(i)&&!Nte(i)){if(!e.h.D&&e._<1)return;MM(e,i),t&&t.A.l||$M(e,i)}}function $M(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Rte(t,n)}function tz(e,t){var n=e[lo];return(n?Fb(n):e)[t]}function Hpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Gy(e){e.P||(e.P=!0,e.l&&Gy(e.l))}function nz(e){e.o||(e.o=Ite(e.t))}function kq(e,t,n){var r=Dte(t)?Jp("MapSet").F(t,n):kte(t)?Jp("MapSet").T(t,n):e.O?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:Aq(),P:!1,I:!1,R:{},l:o,t:i,k:null,o:null,j:null,C:!1},u=a,l=cI;s&&(u=[a],l=yD);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Jp("ES5").J(t,n);return(n?n.A:Aq()).p.push(r),r}function oqt(e){return q1(e)||lh(22,e),function t(n){if(!Cg(n))return n;var r,i=n[lo],o=PC(n);if(i){if(!i.P&&(i.i<4||!Jp("ES5").K(i)))return i.t;i.I=!0,r=qpe(n,o),i.I=!1}else r=qpe(n,o);return Hx(r,function(s,a){i&&tqt(i.t,s)===a||A4e(r,s,t(a))}),o===3?new Set(r):r}(e)}function qpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ite(e)}function sqt(){function e(o,s){var a=i[o];return a?a.enumerable=s:i[o]=a={configurable:!0,enumerable:s,get:function(){var u=this[lo];return cI.get(u,o)},set:function(u){var l=this[lo];cI.set(l,o,u)}},a}function t(o){for(var s=o.length-1;s>=0;s--){var a=o[s][lo];if(!a.P)switch(a.i){case 5:r(a)&&Gy(a);break;case 4:n(a)&&Gy(a)}}}function n(o){for(var s=o.t,a=o.k,u=g2(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==lo){var f=s[c];if(f===void 0&&!m2(s,c))return!0;var d=a[c],h=d&&d[lo];if(h?h.t!==f:!D4e(d,f))return!0}}var m=!!s[lo];return u.length!==g2(s).length+(m?0:1)}function r(o){var s=o.k;if(s.length!==o.t.length)return!0;var a=Object.getOwnPropertyDescriptor(s,s.length-1);if(a&&!a.get)return!0;for(var u=0;u<s.length;u++)if(!s.hasOwnProperty(u))return!0;return!1}var i={};rqt("ES5",{J:function(o,s){var a=Array.isArray(o),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var m=I4e(f);delete m[lo];for(var p=g2(m),g=0;g<p.length;g++){var v=p[g];m[v]=e(v,c||!!m[v].enumerable)}return Object.create(Object.getPrototypeOf(f),m)}(a,o),l={i:a?5:4,A:s?s.A:Aq(),P:!1,I:!1,R:{},l:s,t:o,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,lo,{value:l,writable:!0}),u},S:function(o,s,a){a?q1(s)&&s[lo].A===o&&t(o.p):(o.u&&function u(l){if(l&&typeof l=="object"){var c=l[lo];if(c){var f=c.t,d=c.k,h=c.R,m=c.i;if(m===4)Hx(d,function(w){w!==lo&&(f[w]!==void 0||m2(f,w)?h[w]||u(d[w]):(h[w]=!0,Gy(c)))}),Hx(f,function(w){d[w]!==void 0||m2(d,w)||(h[w]=!1,Gy(c))});else if(m===5){if(r(c)&&(Gy(c),h.length=!0),d.length<f.length)for(var p=d.length;p<f.length;p++)h[p]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var v=Math.min(d.length,f.length),b=0;b<v;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(o.p[0]),t(o.p))},K:function(o){return o.i===4?n(o):r(o)}})}var Wpe,lI,Pte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",aqt=typeof Map<"u",uqt=typeof Set<"u",Gpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",k4e=Pte?Symbol.for("immer-nothing"):((Wpe={})["immer-nothing"]=!0,Wpe),Ype=Pte?Symbol.for("immer-draftable"):"__$immer_draftable",lo=Pte?Symbol.for("immer-state"):"__$immer_state",lqt=""+Object.prototype.constructor,g2=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,I4e=Object.getOwnPropertyDescriptors||function(e){var t={};return g2(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Iq={},cI={get:function(e,t){if(t===lo)return e;var n=Fb(e);if(!m2(n,t))return function(i,o,s){var a,u=Hpe(o,s);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Cg(r)?r:r===tz(e.t,t)?(nz(e),e.o[t]=kq(e.A.h,r,e)):r},has:function(e,t){return t in Fb(e)},ownKeys:function(e){return Reflect.ownKeys(Fb(e))},set:function(e,t,n){var r=Hpe(Fb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=tz(Fb(e),t),o=i==null?void 0:i[lo];if(o&&o.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(D4e(n,i)&&(n!==void 0||m2(e.t,t)))return!0;nz(e),Gy(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return tz(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,nz(e),Gy(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Fb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){lh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){lh(12)}},yD={};Hx(cI,function(e,t){yD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),yD.deleteProperty=function(e,t){return yD.set.call(this,e,t,void 0)},yD.set=function(e,t,n){return cI.set.call(this,e[0],t,n,e[0])};var cqt=function(){function e(n){var r=this;this.O=Gpe,this.D=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var u=r;return function(p){var g=this;p===void 0&&(p=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(p,function(E){var T;return(T=o).call.apply(T,[g,E].concat(b))})}}var l;if(typeof o!="function"&&lh(6),s!==void 0&&typeof s!="function"&&lh(7),Cg(i)){var c=Upe(r),f=kq(r,i,void 0),d=!0;try{l=o(f),d=!1}finally{d?FM(c):Dq(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(p){return Zj(c,s),ez(p,c)},function(p){throw FM(c),p}):(Zj(c,s),ez(l,c))}if(!i||typeof i!="object"){if((l=o(i))===void 0&&(l=i),l===k4e&&(l=void 0),r.D&&Rte(l,!0),s){var h=[],m=[];Jp("Patches").M(i,l,h,m),s(h,m)}return l}lh(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var s,a,u=r.produce(i,o,function(l,c){s=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,s,a]}):[u,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Cg(n)||lh(8),q1(n)&&(n=oqt(n));var r=Upe(this),i=kq(this,n,void 0);return i[lo].C=!0,Dq(r),i},t.finishDraft=function(n,r){var i=n&&n[lo],o=i.A;return Zj(o,r),ez(void 0,o)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Gpe&&lh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=Jp("Patches").$;return q1(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Cf=new cqt,R4e=Cf.produce;Cf.produceWithPatches.bind(Cf);Cf.setAutoFreeze.bind(Cf);Cf.setUseProxies.bind(Cf);Cf.applyPatches.bind(Cf);Cf.createDraft.bind(Cf);Cf.finishDraft.bind(Cf);function fI(e){"@babel/helpers - typeof";return fI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fI(e)}function fqt(e,t){if(fI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dqt(e){var t=fqt(e,"string");return fI(t)=="symbol"?t:t+""}function hqt(e,t,n){return(t=dqt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Xpe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kpe(Object(n),!0).forEach(function(r){hqt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kpe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Eu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Qpe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),rz=function(){return Math.random().toString(36).substring(7).split("").join(".")},LM={INIT:"@@redux/INIT"+rz(),REPLACE:"@@redux/REPLACE"+rz(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+rz()}};function pqt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function N4e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Eu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Eu(1));return n(N4e)(e,t)}if(typeof e!="function")throw new Error(Eu(2));var i=e,o=t,s=[],a=s,u=!1;function l(){a===s&&(a=s.slice())}function c(){if(u)throw new Error(Eu(3));return o}function f(p){if(typeof p!="function")throw new Error(Eu(4));if(u)throw new Error(Eu(5));var g=!0;return l(),a.push(p),function(){if(g){if(u)throw new Error(Eu(6));g=!1,l();var b=a.indexOf(p);a.splice(b,1),s=null}}}function d(p){if(!pqt(p))throw new Error(Eu(7));if(typeof p.type>"u")throw new Error(Eu(8));if(u)throw new Error(Eu(9));try{u=!0,o=i(o,p)}finally{u=!1}for(var g=s=a,v=0;v<g.length;v++){var b=g[v];b()}return p}function h(p){if(typeof p!="function")throw new Error(Eu(10));i=p,d({type:LM.REPLACE})}function m(){var p,g=f;return p={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Eu(11));function w(){b.next&&b.next(c())}w();var E=g(w);return{unsubscribe:E}}},p[Qpe]=function(){return this},p}return d({type:LM.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Qpe]=m,r}function mqt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:LM.INIT});if(typeof r>"u")throw new Error(Eu(12));if(typeof n(void 0,{type:LM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Eu(13))})}function gqt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var o=Object.keys(n),s;try{mqt(n)}catch(a){s=a}return function(u,l){if(u===void 0&&(u={}),s)throw s;for(var c=!1,f={},d=0;d<o.length;d++){var h=o[d],m=n[h],p=u[h],g=m(p,l);if(typeof g>"u")throw l&&l.type,new Error(Eu(14));f[h]=g,c=c||g!==p}return c=c||o.length!==Object.keys(u).length,c?f:u}}function BM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function yqt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),o=function(){throw new Error(Eu(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},a=t.map(function(u){return u(s)});return o=BM.apply(void 0,a)(i.dispatch),Xpe(Xpe({},i),{},{dispatch:o})}}}function P4e(e){var t=function(r){var i=r.dispatch,o=r.getState;return function(s){return function(a){return typeof a=="function"?a(i,o,e):s(a)}}};return t}var Rq=P4e();Rq.withExtraArgument=P4e;var O4e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),WR=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},qx=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},vqt=Object.defineProperty,bqt=Object.defineProperties,xqt=Object.getOwnPropertyDescriptors,Jpe=Object.getOwnPropertySymbols,wqt=Object.prototype.hasOwnProperty,_qt=Object.prototype.propertyIsEnumerable,Zpe=function(e,t,n){return t in e?vqt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},y1=function(e,t){for(var n in t||(t={}))wqt.call(t,n)&&Zpe(e,n,t[n]);if(Jpe)for(var r=0,i=Jpe(t);r<i.length;r++){var n=i[r];_qt.call(t,n)&&Zpe(e,n,t[n])}return e},iz=function(e,t){return bqt(e,xqt(t))},GR=function(e,t,n){return new Promise(function(r,i){var o=function(u){try{a(n.next(u))}catch(l){i(l)}},s=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(o,s)};a((n=n.apply(e,t)).next())})},Eqt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?BM:BM.apply(null,arguments)};function F4e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Tqt=function(e){return e&&typeof e.match=="function"};function Zp(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var o=t.apply(void 0,r);if(!o)throw new Error("prepareAction did not return an object");return y1(y1({type:e,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Cqt(e){return F4e(e)&&"type"in e}var Sqt=function(e){O4e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,qx([void 0],n[0].concat(this)))):new(t.bind.apply(t,qx([void 0],n.concat(this))))},t}(Array),Aqt=function(e){O4e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,qx([void 0],n[0].concat(this)))):new(t.bind.apply(t,qx([void 0],n.concat(this))))},t}(Array);function Nq(e){return Cg(e)?R4e(e,function(){}):e}function Dqt(e){return typeof e=="boolean"}function kqt(){return function(t){return Iqt(t)}}function Iqt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Sqt;return n&&(Dqt(n)?r.push(Rq):r.push(Rq.withExtraArgument(n.extraArgument))),r}function Rqt(e){var t=kqt(),n=e,r=n.reducer,i=r===void 0?void 0:r,o=n.middleware,s=o===void 0?t():o,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(F4e(i))h=gqt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var m=s;typeof m=="function"&&(m=m(t));var p=yqt.apply(void 0,m),g=BM;u&&(g=Eqt(y1({trace:!1},typeof u=="object"&&u)));var v=new Aqt(p),b=v;Array.isArray(d)?b=qx([p],d):typeof d=="function"&&(b=d(v));var w=g.apply(void 0,b);return N4e(h,c,w)}function M4e(e){var t={},n=[],r,i={addCase:function(o,s){var a=typeof o=="string"?o:o.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=s,i},addMatcher:function(o,s){return n.push({matcher:o,reducer:s}),i},addDefaultCase:function(o){return r=o,i}};return e(i),[t,n,r]}function Nqt(e){return typeof e=="function"}function Pqt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?M4e(t):[t,n,r],o=i[0],s=i[1],a=i[2],u;if(Nqt(e))u=function(){return Nq(e())};else{var l=Nq(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=qx([o[d.type]],s.filter(function(m){var p=m.matcher;return p(d)}).map(function(m){var p=m.reducer;return p}));return h.filter(function(m){return!!m}).length===0&&(h=[a]),h.reduce(function(m,p){if(p)if(q1(m)){var g=m,v=p(g,d);return v===void 0?m:v}else{if(Cg(m))return R4e(m,function(b){return p(b,d)});var v=p(m,d);if(v===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return m},f)}return c.getInitialState=u,c}function Oqt(e,t){return e+"/"+t}function Fqt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:Nq(e.initialState),r=e.reducers||{},i=Object.keys(r),o={},s={},a={};i.forEach(function(c){var f=r[c],d=Oqt(t,c),h,m;"reducer"in f?(h=f.reducer,m=f.prepare):h=f,o[c]=h,s[d]=h,a[c]=m?Zp(d,m):Zp(d)});function u(){var c=typeof e.extraReducers=="function"?M4e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],m=h===void 0?[]:h,p=c[2],g=p===void 0?void 0:p,v=y1(y1({},d),s);return Pqt(n,function(b){for(var w in v)b.addCase(w,v[w]);for(var E=0,T=m;E<T.length;E++){var C=T[E];b.addMatcher(C.matcher,C.reducer)}g&&b.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:o,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Mqt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$4e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Mqt[Math.random()*64|0];return t},$qt=["name","message","stack","code"],oz=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),eme=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Lqt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=$qt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Zp(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:iz(y1({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),o=Zp(t+"/pending",function(l,c,f){return{payload:void 0,meta:iz(y1({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),s=Zp(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Lqt)(l||"Rejected"),meta:iz(y1({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):$4e(),m=new a,p;function g(b){p=b,m.abort()}var v=function(){return GR(this,null,function(){var b,w,E,T,C,S,I;return WR(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),T=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),jqt(T)?[4,T]:[3,2];case 1:T=R.sent(),R.label=2;case 2:if(T===!1||m.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(P,M){return m.signal.addEventListener("abort",function(){return M({name:"AbortError",message:p||"Aborted"})})}),c(o(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:m.signal,abort:g,rejectWithValue:function(P,M){return new oz(P,M)},fulfillWithValue:function(P,M){return new eme(P,M)}})).then(function(P){if(P instanceof oz)throw P;return P instanceof eme?i(P.payload,h,l,P.meta):i(P,h,l)})])];case 3:return E=R.sent(),[3,5];case 4:return S=R.sent(),E=S instanceof oz?s(null,h,l,S.payload,S.meta):s(S,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&s.match(E)&&E.meta.condition,I||c(E),[2,E]}})})}();return Object.assign(v,{abort:g,requestId:h,arg:l,unwrap:function(){return v.then(Bqt)}})}}return Object.assign(u,{pending:o,rejected:s,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Bqt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function jqt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var zqt=function(e,t){return Tqt(e)?e.match(t):e(t)};function tme(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return zqt(r,n)})}}var Ote=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Pq=function(){},L4e=function(e,t){return t===void 0&&(t=Pq),e.catch(t),e},B4e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},y2=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Uqt="task",j4e="listener",z4e="completed",Fte="cancelled",Vqt="task-"+Fte,Hqt="task-"+z4e,U4e=j4e+"-"+Fte,qqt=j4e+"-"+z4e,ML=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Uqt+" "+Fte+" (reason: "+t+")"}return e}(),v2=function(e){if(e.aborted)throw new ML(e.reason)};function V4e(e,t){var n=Pq;return new Promise(function(r,i){var o=function(){return i(new ML(e.reason))};if(e.aborted){o();return}n=B4e(e,o),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Pq})}var Wqt=function(e,t){return GR(void 0,null,function(){var n,r;return WR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof ML?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},jM=function(e){return function(t){return L4e(V4e(e,t).then(function(n){return v2(e),n}))}},H4e=function(e){var t=jM(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Gqt=Object.assign,nme={},YR="listenerMiddleware",Yqt=function(e,t){var n=function(r){return B4e(e,function(){return y2(r,e.reason)})};return function(r,i){Ote(r,"taskExecutor");var o=new AbortController;n(o);var s=Wqt(function(){return GR(void 0,null,function(){var a;return WR(this,function(u){switch(u.label){case 0:return v2(e),v2(o.signal),[4,r({pause:jM(o.signal),delay:H4e(o.signal),signal:o.signal})];case 1:return a=u.sent(),v2(o.signal),[2,a]}})})},function(){return y2(o,Hqt)});return i!=null&&i.autoJoin&&t.push(s),{result:jM(e)(s),cancel:function(){y2(o,Vqt)}}}},Kqt=function(e,t){var n=function(r,i){return GR(void 0,null,function(){var o,s,a,u;return WR(this,function(l){switch(l.label){case 0:v2(t),o=function(){},s=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,m){m.unsubscribe(),c([h,m.getState(),m.getOriginalState()])}});o=function(){d(),f()}}),a=[s],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,V4e(t,Promise.race(a))];case 2:return u=l.sent(),v2(t),[2,u];case 3:return o(),[7];case 4:return[2]}})})};return function(r,i){return L4e(n(r,i))}},q4e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,o=e.effect;if(t)i=Zp(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ote(o,"options.listener"),{predicate:i,type:t,effect:o}},Xqt=function(e){var t=q4e(e),n=t.type,r=t.predicate,i=t.effect,o=$4e(),s={id:o,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return s},Oq=function(e){e.pending.forEach(function(t){y2(t,U4e)})},Qqt=function(e){return function(){e.forEach(Oq),e.clear()}},rme=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Jqt=Zp(YR+"/add"),Zqt=Zp(YR+"/removeAll"),eWt=Zp(YR+"/remove"),tWt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,qx([YR+"/error"],e))};function nWt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,o=i===void 0?tWt:i;Ote(o,"onError");var s=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(m){h.unsubscribe(),m!=null&&m.cancelActive&&Oq(h)}},a=function(h){for(var m=0,p=Array.from(n.values());m<p.length;m++){var g=p[m];if(h(g))return g}},u=function(h){var m=a(function(p){return p.effect===h.effect});return m||(m=Xqt(h)),s(m)},l=function(h){var m=q4e(h),p=m.type,g=m.effect,v=m.predicate,b=a(function(w){var E=typeof p=="string"?w.type===p:w.predicate===v;return E&&w.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&Oq(b)),!!b},c=function(h,m,p,g){return GR(t,null,function(){var v,b,w,E;return WR(this,function(T){switch(T.label){case 0:v=new AbortController,b=Kqt(u,v.signal),w=[],T.label=1;case 1:return T.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(m,Gqt({},p,{getOriginalState:g,condition:function(C,S){return b(C,S).then(Boolean)},take:b,delay:H4e(v.signal),pause:jM(v.signal),extra:r,signal:v.signal,fork:Yqt(v.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,S,I){C!==v&&(y2(C,U4e),I.delete(C))})}})))];case 2:return T.sent(),[3,6];case 3:return E=T.sent(),E instanceof ML||rme(o,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return T.sent(),y2(v,qqt),h.pending.delete(v),[7];case 6:return[2]}})})},f=Qqt(n),d=function(h){return function(m){return function(p){if(!Cqt(p))return m(p);if(Jqt.match(p))return u(p.payload);if(Zqt.match(p)){f();return}if(eWt.match(p))return l(p.payload);var g=h.getState(),v=function(){if(g===nme)throw new Error(YR+": getOriginalState can only be called synchronously");return g},b;try{if(b=m(p),n.size>0)for(var w=h.getState(),E=Array.from(n.values()),T=0,C=E;T<C.length;T++){var S=C[T],I=!1;try{I=S.predicate(p,w,g)}catch(R){I=!1,rme(o,R,{raisedBy:"predicate"})}I&&c(S,p,h,v)}}finally{g=nme}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var ime;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);sqt();function rWt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let TP;const iWt=new Uint8Array(16);function oWt(){if(!TP&&(TP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!TP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return TP(iWt)}const $a=[];for(let e=0;e<256;++e)$a.push((e+256).toString(16).slice(1));function sWt(e,t=0){return($a[e[t+0]]+$a[e[t+1]]+$a[e[t+2]]+$a[e[t+3]]+"-"+$a[e[t+4]]+$a[e[t+5]]+"-"+$a[e[t+6]]+$a[e[t+7]]+"-"+$a[e[t+8]]+$a[e[t+9]]+"-"+$a[e[t+10]]+$a[e[t+11]]+$a[e[t+12]]+$a[e[t+13]]+$a[e[t+14]]+$a[e[t+15]]).toLowerCase()}const aWt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ome={randomUUID:aWt};function sme(e,t,n){if(ome.randomUUID&&!e)return ome.randomUUID();e=e||{};const r=e.random||(e.rng||oWt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,sWt(r)}class em{static get(){let t=sme();for(;this.ids.has(t);)t=sme();return this.ids.set(t,!0),t}}em.ids=new Map;function Ch(e){return"parent"in e}function uWt(e){return!Ch(e)}function lWt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,o={annotation:[],bookmark:[]},s=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:em.get(),val:i[l],createdOn:Date.now()}),u),o),a=r?[{id:em.get(),createdOn:Date.now(),val:r}]:[];return{id:em.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:s,artifacts:a,state:{type:"checkpoint",val:n}}}function cWt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:o,event:s}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:em.get(),val:i[f],createdOn:Date.now()}),c),a),l=o?[{id:em.get(),createdOn:Date.now(),val:o}]:[];return{id:em.get(),label:n,event:s,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function jo(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=bWt[e],o=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+o)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Wx(e){return!!e&&!!e[Sf]}function W1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===xWt}(e)||Array.isArray(e)||!!e[ek]||!!(!((t=e.constructor)===null||t===void 0)&&t[ek])||$L(e)||LL(e))}function ET(e,t,n){n===void 0&&(n=!1),G1(e)===0?(n?Object.keys:zte)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function G1(e){var t=e[Sf];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:$L(e)?2:LL(e)?3:0}function dI(e,t){return G1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function JO(e,t){return G1(e)===2?e.get(t):e[t]}function W4e(e,t,n){var r=G1(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function fWt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function $L(e){return yWt&&e instanceof Map}function LL(e){return vWt&&e instanceof Set}function Mb(e){return e.o||e.t}function Mte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=wWt(e);delete t[Sf];for(var n=zte(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function $te(e,t){return t===void 0&&(t=!1),Lte(e)||Wx(e)||!W1(e)||(G1(e)>1&&(e.set=e.add=e.clear=e.delete=dWt),Object.freeze(e),t&&ET(e,function(n,r){return $te(r,!0)},!0)),e}function dWt(){jo(2)}function Lte(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function tm(e){var t=Lq[e];return t||jo(18,e),t}function hWt(e,t){Lq[e]||(Lq[e]=t)}function ame(){return{}.NODE_ENV==="production"||TT||jo(0),TT}function sz(e,t){t&&(tm("Patches"),e.u=[],e.s=[],e.v=t)}function zM(e){Fq(e),e.p.forEach(pWt),e.p=null}function Fq(e){e===TT&&(TT=e.l)}function ume(e){return TT={p:[],l:TT,h:e,m:!0,_:0}}function pWt(e){var t=e[Sf];t.i===0||t.i===1?t.j():t.O=!0}function az(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||tm("ES5").S(t,e,r),r?(n[Sf].P&&(zM(t),jo(4)),W1(e)&&(e=UM(t,e),t.l||VM(t,e)),t.u&&tm("Patches").M(n[Sf].t,e,t.u,t.s)):e=UM(t,n,[]),zM(t),t.u&&t.v(t.u,t.s),e!==jte?e:void 0}function UM(e,t,n){if(Lte(t))return t;var r=t[Sf];if(!r)return ET(t,function(o,s){return lme(e,r,t,o,s,n)},!0),t;if(r.A!==e)return t;if(!r.P)return VM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Mte(r.k):r.o;ET(r.i===3?new Set(i):i,function(o,s){return lme(e,r,i,o,s,n)}),VM(e,i,!1),n&&e.u&&tm("Patches").R(r,n,e.u,e.s)}return r.o}function lme(e,t,n,r,i,o){if({}.NODE_ENV!=="production"&&i===n&&jo(5),Wx(i)){var s=UM(e,i,o&&t&&t.i!==3&&!dI(t.D,r)?o.concat(r):void 0);if(W4e(n,r,s),!Wx(s))return;e.m=!1}if(W1(i)&&!Lte(i)){if(!e.h.F&&e._<1)return;UM(e,i),t&&t.A.l||VM(e,i)}}function VM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&$te(t,n)}function uz(e,t){var n=e[Sf];return(n?Mb(n):e)[t]}function cme(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Mq(e){e.P||(e.P=!0,e.l&&Mq(e.l))}function lz(e){e.o||(e.o=Mte(e.t))}function $q(e,t,n){var r=$L(t)?tm("MapSet").N(t,n):LL(t)?tm("MapSet").T(t,n):e.g?function(i,o){var s=Array.isArray(i),a={i:s?1:0,A:o?o.A:ame(),P:!1,I:!1,D:{},l:o,t:i,k:null,o:null,j:null,C:!1},u=a,l=Bq;s&&(u=[a],l=vD);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):tm("ES5").J(t,n);return(n?n.A:ame()).p.push(r),r}function mWt(e){return Wx(e)||jo(22,e),function t(n){if(!W1(n))return n;var r,i=n[Sf],o=G1(n);if(i){if(!i.P&&(i.i<4||!tm("ES5").K(i)))return i.t;i.I=!0,r=fme(n,o),i.I=!1}else r=fme(n,o);return ET(r,function(s,a){i&&JO(i.t,s)===a||W4e(r,s,t(a))}),o===3?new Set(r):r}(e)}function fme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Mte(e)}function gWt(){function e(r){if(!W1(r))return r;if(Array.isArray(r))return r.map(e);if($L(r))return new Map(Array.from(r.entries()).map(function(s){return[s[0],e(s[1])]}));if(LL(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var o in r)i[o]=e(r[o]);return dI(r,ek)&&(i[ek]=r[ek]),i}function t(r){return Wx(r)?e(r):r}var n="add";hWt("Patches",{$:function(r,i){return i.forEach(function(o){for(var s=o.path,a=o.op,u=r,l=0;l<s.length-1;l++){var c=G1(u),f=""+s[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||jo(24),typeof u=="function"&&f==="prototype"&&jo(24),typeof(u=JO(u,f))!="object"&&jo(15,s.join("/"))}var d=G1(u),h=e(o.value),m=s[s.length-1];switch(a){case"replace":switch(d){case 2:return u.set(m,h);case 3:jo(16);default:return u[m]=h}case n:switch(d){case 1:return m==="-"?u.push(h):u.splice(m,0,h);case 2:return u.set(m,h);case 3:return u.add(h);default:return u[m]=h}case"remove":switch(d){case 1:return u.splice(m,1);case 2:return u.delete(m);case 3:return u.delete(o.value);default:return delete u[m]}default:jo(17,a)}}),r},R:function(r,i,o,s){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;ET(a.D,function(h,m){var p=JO(f,h),g=JO(d,h),v=m?dI(f,h)?"replace":n:"remove";if(p!==g||v!=="replace"){var b=u.concat(h);l.push(v==="remove"?{op:v,path:b}:{op:v,path:b,value:g}),c.push(v===n?{op:"remove",path:b}:v==="remove"?{op:n,path:b,value:t(p)}:{op:"replace",path:b,value:t(p)})}})}(r,i,o,s);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var m=[h,f];f=m[0],h=m[1];var p=[c,l];l=p[0],c=p[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var v=u.concat([g]);l.push({op:"replace",path:v,value:t(h[g])}),c.push({op:"replace",path:v,value:t(f[g])})}for(var b=f.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,o,s);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(m){if(!d.has(m)){var p=u.concat([h]);l.push({op:"remove",path:p,value:m}),c.unshift({op:n,path:p,value:m})}h++}),h=0,d.forEach(function(m){if(!f.has(m)){var p=u.concat([h]);l.push({op:n,path:p,value:m}),c.unshift({op:"remove",path:p,value:m})}h++})}(r,i,o,s)}},M:function(r,i,o,s){o.push({op:"replace",path:[],value:i===jte?void 0:i}),s.push({op:"replace",path:[],value:r})}})}var dme,TT,Bte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",yWt=typeof Map<"u",vWt=typeof Set<"u",hme=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",jte=Bte?Symbol.for("immer-nothing"):((dme={})["immer-nothing"]=!0,dme),ek=Bte?Symbol.for("immer-draftable"):"__$immer_draftable",Sf=Bte?Symbol.for("immer-state"):"__$immer_state",bWt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},xWt=""+Object.prototype.constructor,zte=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,wWt=Object.getOwnPropertyDescriptors||function(e){var t={};return zte(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Lq={},Bq={get:function(e,t){if(t===Sf)return e;var n=Mb(e);if(!dI(n,t))return function(i,o,s){var a,u=cme(o,s);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!W1(r)?r:r===uz(e.t,t)?(lz(e),e.o[t]=$q(e.A.h,r,e)):r},has:function(e,t){return t in Mb(e)},ownKeys:function(e){return Reflect.ownKeys(Mb(e))},set:function(e,t,n){var r=cme(Mb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=uz(Mb(e),t),o=i==null?void 0:i[Sf];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(fWt(n,i)&&(n!==void 0||dI(e.t,t)))return!0;lz(e),Mq(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return uz(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,lz(e),Mq(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Mb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){jo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){jo(12)}},vD={};ET(Bq,function(e,t){vD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),vD.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&jo(13),vD.set.call(this,e,t,void 0)},vD.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&jo(14),Bq.set.call(this,e[0],t,n,e[0])};var _Wt=function(){function e(n){var r=this;this.g=hme,this.F=!0,this.produce=function(i,o,s){if(typeof i=="function"&&typeof o!="function"){var a=o;o=i;var u=r;return function(p){var g=this;p===void 0&&(p=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(p,function(E){var T;return(T=o).call.apply(T,[g,E].concat(b))})}}var l;if(typeof o!="function"&&jo(6),s!==void 0&&typeof s!="function"&&jo(7),W1(i)){var c=ume(r),f=$q(r,i,void 0),d=!0;try{l=o(f),d=!1}finally{d?zM(c):Fq(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(p){return sz(c,s),az(p,c)},function(p){throw zM(c),p}):(sz(c,s),az(l,c))}if(!i||typeof i!="object"){if((l=o(i))===void 0&&(l=i),l===jte&&(l=void 0),r.F&&$te(l,!0),s){var h=[],m=[];tm("Patches").M(i,l,h,m),s(h,m)}return l}jo(21,i)},this.produceWithPatches=function(i,o){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var s,a,u=r.produce(i,o,function(l,c){s=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,s,a]}):[u,s,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){W1(n)||jo(8),Wx(n)&&(n=mWt(n));var r=ume(this),i=$q(this,n,void 0);return i[Sf].C=!0,Fq(r),i},t.finishDraft=function(n,r){var i=n&&n[Sf];({}).NODE_ENV!=="production"&&(i&&i.C||jo(9),i.I&&jo(10));var o=i.A;return sz(o,r),az(void 0,o)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!hme&&jo(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var o=r[i];if(o.path.length===0&&o.op==="replace"){n=o.value;break}}i>-1&&(r=r.slice(i+1));var s=tm("Patches").$;return Wx(n)?s(n,r):this.produce(n,function(a){return s(a,r)})},e}(),Af=new _Wt,EWt=Af.produce;Af.produceWithPatches.bind(Af);Af.setAutoFreeze.bind(Af);Af.setUseProxies.bind(Af);Af.applyPatches.bind(Af);Af.createDraft.bind(Af);Af.finishDraft.bind(Af);function TWt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,o=lWt({state:e,label:i,initialArtifact:n,initialMetadata:r}),s={nodes:{[o.id]:o},root:o.id,current:o.id};return Fqt({name:"provenance-graph",initialState:s,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,m)=>(h[m]||(h[m]=[]),h[m].push({type:m,id:em.get(),val:c[m],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:em.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function CWt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=TWt(e),o=nWt();o.startListening({matcher:tme(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=tme(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const s=Rqt({reducer:n,middleware:a=>a().prepend(o.middleware)});return{initialState:i(),get backend(){return s.getState()},get current(){return s.getState().nodes[s.getState().current]},get root(){return s.getState().nodes[s.getState().root]},currentChange(a,u){const l={id:em.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:s.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var SWt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AWt=Object.prototype.hasOwnProperty;function jq(e,t){return AWt.call(e,t)}function zq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)jq(e,i)&&r.push(i);return r}function cc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Uq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function $b(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function G4e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Vq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Vq(e[t]))return!0}else if(typeof e=="object"){for(var r=zq(e),i=r.length,o=0;o<i;o++)if(Vq(e[r[o]]))return!0}}return!1}function pme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var Y4e=function(e){SWt(t,e);function t(n,r,i,o,s){var a=this.constructor,u=e.call(this,pme(n,{name:r,index:i,operation:o,tree:s}))||this;return u.name=r,u.index=i,u.operation=o,u.tree=s,Object.setPrototypeOf(u,a.prototype),u.message=pme(n,{name:r,index:i,operation:o,tree:s}),u}return t}(Error),Lo=Y4e,DWt=cc,WE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=HM(n,this.path);r&&(r=cc(r));var i=px(n,{op:"remove",path:this.from}).removed;return px(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=HM(n,this.from);return px(n,{op:"add",path:this.path,value:cc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:hI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},kWt={add:function(e,t,n){return Uq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:WE.move,copy:WE.copy,test:WE.test,_get:WE._get};function HM(e,t){if(t=="")return e;var n={op:"_get",path:t};return px(e,n),n.value}function px(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):qM(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=HM(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=hI(e,t.value),s.test===!1)throw new Lo("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Lo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=cc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,m=void 0;for(typeof n=="function"?m=n:m=qM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=G4e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&m(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Uq(h))throw new Lo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Uq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Lo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=kWt[t.op].call(t,l,h,e);if(s.test===!1)throw new Lo("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(c>=f){var s=WE[t.op].call(t,l,h,e);if(s.test===!1)throw new Lo("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Lo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function BL(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Lo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=cc(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=px(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function IWt(e,t,n){var r=px(e,t);if(r.test===!1)throw new Lo("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function qM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Lo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(WE[e.op]){if(typeof e.path!="string")throw new Lo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Lo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Lo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Lo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Vq(e.value))throw new Lo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Lo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Lo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=K4e([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Lo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Lo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function K4e(e,t,n){try{if(!Array.isArray(e))throw new Lo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)BL(cc(t),cc(e),n||!0);else{n=n||qM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Lo)return i;throw i}}function hI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!hI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!hI(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const RWt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Lo,_areEquals:hI,applyOperation:px,applyPatch:BL,applyReducer:IWt,deepClone:DWt,getValueByPointer:HM,validate:K4e,validator:qM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Ute=new WeakMap,NWt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),PWt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function OWt(e){return Ute.get(e)}function FWt(e,t){return e.observers.get(t)}function MWt(e,t){e.observers.delete(t.callback)}function $Wt(e,t){t.unobserve()}function LWt(e,t){var n=[],r,i=OWt(e);if(!i)i=new NWt(e),Ute.set(e,i);else{var o=FWt(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=cc(e),t){r.callback=t,r.next=null;var s=function(){Hq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Hq(r),clearTimeout(r.next),MWt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new PWt(t,r)),r}function Hq(e,t){t===void 0&&(t=!1);var n=Ute.get(e.object);Vte(n.value,e.object,e.patches,"",t),e.patches.length&&BL(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Vte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=zq(t),s=zq(e),a=!1,u=s.length-1;u>=0;u--){var l=s[u],c=e[l];if(jq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Vte(c,f,n,r+"/"+$b(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+$b(l),value:cc(c)}),n.push({op:"replace",path:r+"/"+$b(l),value:cc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+$b(l),value:cc(c)}),n.push({op:"remove",path:r+"/"+$b(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var u=0;u<o.length;u++){var l=o[u];!jq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+$b(l),value:cc(t[l])})}}}function X4e(e,t,n){n===void 0&&(n=!1);var r=[];return Vte(e,t,r,"",n),r}const BWt=Object.freeze(Object.defineProperty({__proto__:null,compare:X4e,generate:Hq,observe:LWt,unobserve:$Wt},Symbol.toStringTag,{value:"Module"}));Object.assign({},RWt,BWt,{JsonPatchError:Y4e,deepClone:cc,escapePathComponent:$b,unescapePathComponent:G4e});var bD=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(bD||{});function ZO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],o=J4e(i,e,t);o.shift();const s=o.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=ZO(i,t);return BL(a,cc(s),!0,!1).newDocument}function jWt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function Q4e({registry:e,initialState:t}){let n=!1;const r=rWt(),i=CWt(t);function o(c){return i.backend.nodes[c]}r.listen(bD.TRAVERSAL_START,()=>{n=!0}),r.listen(bD.TRAVERSAL_END,()=>{n=!1});const s={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,m)=>{const p=f[m].at(-1);return p&&(h[m]=p),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){s.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=s.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=s.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){s.add({bookmark:!0},c)},remove(c=i.current.id){s.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=s.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return ZO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:m=!1}){let p=null,g=null;const v=ZO(this.current,this.graph.backend.nodes);if(m)g={type:"checkpoint",val:f};else{const b=X4e(v,f);if(jWt(f,b)==="checkpoint")g={type:"checkpoint",val:f};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:w}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(p=cWt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!p)throw new Error("State Node creation failed!");i.update(i.addNode(p))},async apply(c,f){const d=e.get(f.type),h=ZO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:m=f,undo:p}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[m],undo:[p]},eventType:d.config.eventType})}else{const m=d.func(h,f.payload);this.record({label:c,state:m,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(bD.TRAVERSAL_START);const f=J4e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const m=o(f[h]),p=o(f[h+1]);UWt(m,p)?Ch(m)&&d.push(...m.sideEffects.undo):Ch(p)&&d.push(...p.sideEffects.do)}for(const h of d){const m=e.get(h.type).func;await m(h.payload)}i.update(i.changeCurrent(c)),r.fire(bD.TRAVERSAL_END)},undo(){const{current:c}=i;return Ch(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return Z4e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:s,artifact:a,annotations:u,bookmarks:l}}function zWt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let o=i.level-r.level;for(;Ch(i)&&o!==0;)i=n[i.parent],o-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Ch(r)&&(r=n[r.parent]),Ch(i)&&(i=n[i.parent]);return r.id}function J4e(e,t,n){const r=zWt(e,t,n),i=n[r],o=[],s=[];let[a,u]=[e,t];for(;a.id!==i.id;)o.push(a),Ch(a)&&(a=n[a.parent]);for(o.push(a);u.id!==i.id;)s.push(u),Ch(u)&&(u=n[u.parent]);const l=s.reverse();return[...o,...l].map(c=>c.id)}function UWt(e,t){if(Ch(e)&&e.parent===t.id)return!0;if(Ch(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function Z4e(e,t){return{...e,children:e.children.map(n=>Z4e(t[n],t)),name:`${e.label}`}}gWt();function VWt(e){return e.length===2?EWt(e):e}class jL{static create(){return new jL}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:o=t,eventType:s=t}=r||{};return this.registry.set(t,{func:VWt(n),config:{hasSideEffects:!i,label:typeof o=="string"?()=>o:o,eventType:s}}),Zp(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function HWt({currentConfig:e,provState:t}){const n=Ed(),r=jh(),i=Gu(),[o,s]=F.useState(null),[a,u]=F.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=eu(),[f,d]=F.useState(),{actions:h,trrack:m}=F.useMemo(()=>{const w=jL.create(),E=w.register("signal",(C,S)=>(C.event=S,C)),T=Q4e({registry:w,initialState:{event:{}}});return{actions:{signalAction:E},trrack:T}},[]),p=F.useCallback(({status:w,provenanceGraph:E,answers:T})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:w,values:T,provenanceGraph:E})),i(c(T))},[r,n,i,c,l]),g=F.useCallback((w,E)=>{m.apply(w,h.signalAction({key:w,value:E}))},[h,m]),v=F.useCallback((w,E)=>{const{responseId:T,response:C}=E;p({status:!0,provenanceGraph:m.graph.backend,answers:{[T]:C}})},[p,m.graph.backend]),b=F.useMemo(()=>{var E;const w=(E=o==null?void 0:o.config)==null?void 0:E.signals;return w?w.reduce((T,C)=>(C.name==="revisitAnswer"?T[C.name]=v:T[C.name]=g,T),{}):{}},[v,g,o]);return F.useEffect(()=>{async function w(){u(!0);let E;"path"in e?E=await Fct(e.path):E=e.config,E!==void 0&&s(E),u(!1)}e&&w()},[e]),F.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?A.jsx("div",{children:"Loading..."}):"path"in e&&!o?A.jsx(D1,{path:e.path}):o?A.jsx(Ate,{spec:structuredClone(o),signalListeners:b,onNewView:w=>d(w)}):A.jsx("div",{children:"Failed to load vega config"})}function qWt(){const e=yg(),t=Ed(),n=jh()||"Notfound",r=e.components[n],{storageEngine:i}=Go(),o=F.useRef(null),[s,a]=F.useState(null),{setIsRecording:u}=eu(),l=Zr(R=>R.analysisProvState),c=iC(),f=NK(),d=Zr(R=>R.sequence),[h]=Rg(),m=Zr(R=>R.participantId),p=F.useMemo(()=>h.get("participantId"),[h]);iSe();const g=Gu(),{setAlertModal:v}=eu();F.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&g(v({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[v,i,g]),F.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(o.current&&s&&i.saveAudio(o.current,s),o.current&&(o.current.stream.getTracks().forEach(R=>{var P;R.stop(),(P=o.current)==null||P.stream.removeTrack(R)}),o.current.stream.getAudioTracks().forEach(R=>{var P;R.stop(),(P=o.current)==null||P.stream.removeTrack(R)}),o.current.stop(),o.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(R=>{const P=new MediaRecorder(R);o.current=P,o.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[b,w]=F.useState([]),E=F.useRef([]);F.useEffect(()=>{async function R(){var B;const M=((B=SK(d,t))==null?void 0:B.map(L=>L.currentBlock.id).filter(L=>L!==void 0))||[];w(M)}async function P(){const M=E.current;JSON.stringify(M)!==JSON.stringify(b)&&b.length>0&&i&&await i.addParticipantTags(b),E.current=b}R().then(P)},[t,i,d]);const T=F.useMemo(()=>{var R;return n!=="end"&&!n.startsWith("__")&&fC(r)&&e.baseComponents?RK({},(R=e.baseComponents)==null?void 0:R[r.baseComponent],r):r},[r,e]);if(n==="end")return A.jsx(nTt,{});if(n==="__trainingFailed")return A.jsx(rTt,{});if(n==="__timedOut")return A.jsx(iTt,{});if(n==="Notfound")return A.jsx(D1,{email:e.uiConfig.contactEmail});if(p&&m!==p)return A.jsx(xi,{style:{height:"80vh"},children:A.jsx(Em,{})});const C=T.instruction||"",{instructionLocation:S}=T,I=e.uiConfig.sidebar&&(S==="sidebar"||S===void 0);return A.jsxs(A.Fragment,{children:[S==="aboveStimulus"&&A.jsx(ju,{text:C}),A.jsx(z6,{status:f,config:T,location:"aboveStimulus"},`${t}-above-response-block`),A.jsxs(F.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:[T.type==="markdown"&&A.jsx(q2t,{currentConfig:T}),T.type==="website"&&A.jsx(Oct,{currentConfig:T}),T.type==="image"&&A.jsx($ct,{currentConfig:T}),T.type==="react-component"&&A.jsx(H2t,{currentConfig:T,provState:l}),T.type==="vega"&&A.jsx(HWt,{currentConfig:T,provState:l})]},`${t}-stimulus`),(S==="belowStimulus"||S===void 0&&!I)&&A.jsx(ju,{text:C}),A.jsx(z6,{status:f,config:T,location:"belowStimulus"},`${t}-below-response-block`)]})}function eOe(e){const[t]=Rg();return A.jsx(VG,{...e,to:{pathname:e.to,search:t.toString()}})}var cz,mme;function WWt(){if(mme)return cz;mme=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,u=typeof Bs=="object"&&Bs&&Bs.Object===Object&&Bs,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,m=Math.min,p=function(){return c.Date.now()};function g(T,C,S){var I,R,P,M,B,L,z=0,G=!1,W=!1,te=!0;if(typeof T!="function")throw new TypeError(e);C=E(C)||0,v(S)&&(G=!!S.leading,W="maxWait"in S,P=W?h(E(S.maxWait)||0,C):P,te="trailing"in S?!!S.trailing:te);function Z(Ee){var be=I,Ce=R;return I=R=void 0,z=Ee,M=T.apply(Ce,be),M}function re(Ee){return z=Ee,B=setTimeout(Y,C),G?Z(Ee):M}function q(Ee){var be=Ee-L,Ce=Ee-z,Oe=C-be;return W?m(Oe,P-Ce):Oe}function U(Ee){var be=Ee-L,Ce=Ee-z;return L===void 0||be>=C||be<0||W&&Ce>=P}function Y(){var Ee=p();if(U(Ee))return H(Ee);B=setTimeout(Y,q(Ee))}function H(Ee){return B=void 0,te&&I?Z(Ee):(I=R=void 0,M)}function X(){B!==void 0&&clearTimeout(B),z=0,I=L=R=B=void 0}function ee(){return B===void 0?M:H(p())}function le(){var Ee=p(),be=U(Ee);if(I=arguments,R=this,L=Ee,be){if(B===void 0)return re(L);if(W)return B=setTimeout(Y,C),Z(L)}return B===void 0&&(B=setTimeout(Y,C)),M}return le.cancel=X,le.flush=ee,le}function v(T){var C=typeof T;return!!T&&(C=="object"||C=="function")}function b(T){return!!T&&typeof T=="object"}function w(T){return typeof T=="symbol"||b(T)&&d.call(T)==n}function E(T){if(typeof T=="number")return T;if(w(T))return t;if(v(T)){var C=typeof T.valueOf=="function"?T.valueOf():T;T=v(C)?C+"":C}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var S=o.test(T);return S||s.test(T)?a(T.slice(2),S?2:8):i.test(T)?t:+T}return cz=g,cz}var GWt=WWt();const _0=_c(GWt);function tOe(e,t,n,r){let i=0;for(let o=0;o<e.components.length;o+=1){const s=e.components[o];if(typeof s=="string"){if(r===e.orderPath&&s===t&&o>=n)break;i+=1}else if(i+=tOe(s,t,n,r),r.includes(s.orderPath))break}return i}function nOe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(o=>o.components).includes(r)))n+=1;else if(typeof r!="string"){const o=e.components.find(s=>typeof s!="string"&&s.orderPath===r.orderPath);n+=nOe(o,r)}}),n}function YWt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(o=>typeof o=="string"?o===r:typeof r!="string"&&o.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function KWt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:o,studyConfig:s,subSequence:a,analysisNavigation:u}){const l=dw(),c=Lh(),f=Ed(),[d,{close:h,open:m}]=Xq(!1),p=e in s.components&&s.components[e],g=a&&a.components.slice(r).includes(e)?tOe(n,e,r,a.orderPath):-1,{trialId:v}=om(),[b]=Rg(),w=F.useMemo(()=>b.get("participantId"),[b]),E=v===e,T=o?f===g:f===`reviewer-${e}`,C=u?E:T,S=F.useCallback(()=>c(v?`./../${e}`:`./${e}`),[c,e,v]),R=u?S:()=>c(o?w?`/${l}/${sh(g)}?participantId=${w}`:`/${l}/${sh(g)}`:`/${l}/reviewer-${e}`),P=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,M=e.includes("$")&&P&&e.includes(P)?e.split(P).at(-1):e;return A.jsxs(Xa,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[A.jsx(Xa.Target,{children:A.jsx(Ue,{onMouseEnter:m,onMouseLeave:h,children:A.jsx(_5,{active:C,style:{lineHeight:"32px",height:"32px"},label:A.jsxs(Ue,{children:[i&&A.jsx(cHe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==M&&A.jsx(CHe,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),A.jsx(ct,{size:"sm",span:C,fw:C?"700":void 0,display:"inline",children:M})]}),onClick:R,disabled:t})})}),p&&(p.description||p.meta)&&A.jsx(Xa.Dropdown,{onMouseLeave:h,children:A.jsxs(Ue,{children:[p.description&&A.jsxs(Ue,{children:[A.jsx(ct,{fw:900,display:"inline-block",mr:2,children:"Description:"}),A.jsx(ct,{fw:400,component:"span",children:p.description})]}),p.meta&&A.jsxs(Ue,{children:[A.jsx(ct,{fw:"900",component:"span",children:"Task Meta: "}),A.jsx(ct,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})]})}function WM({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:o}){var a;let s=J0(e.components);return n&&r&&(s=YWt(J0(e.components),J0(n.components))),r||(s=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...s]),A.jsx(A.Fragment,{children:s.map((u,l)=>{if(typeof u=="string")return A.jsx(KWt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:o},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?kh(c).length-nOe(u,c):0,d=kh(u);return A.jsx(_5,{label:A.jsxs(Ue,{style:{opacity:f>0?1:.5},children:[A.jsx(ct,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?A.jsx(Ji,{label:u.order,position:"right",withArrow:!0,children:A.jsx(uHe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&A.jsxs(yh,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&A.jsx(yh,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var m;return typeof h=="string"&&((m=u.interruptions)==null?void 0:m.flatMap(p=>p.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:A.jsx(Ue,{style:{borderLeft:"1px solid #e9ecef"},children:A.jsx(WM,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:o})})},l)})})}function rOe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function gme({text:e}){return A.jsx(Ji,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:A.jsx(YG,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function XWt(){const e=Zr(h=>h.sequence),t=Zr(h=>h.metadata),{toggleStudyBrowser:n}=eu(),r=yg(),i=Gu(),o=dw(),s=jG(`/${o}`),{storageEngine:a}=Go(),u=iC(),l=F.useMemo(()=>{let h=J0(r.sequence);return h=AK(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=F.useState("participant"),d=F.useMemo(()=>c==="allTrials"||u,[c,u]);return A.jsxs(Ci.Aside,{p:"0",children:[A.jsx(Ci.Section,{p:"md",children:A.jsxs(un,{direction:"row",justify:"space-between",children:[A.jsx(ct,{size:"md",fw:700,pt:3,children:"Study Browser"}),A.jsx(Ji,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:A.jsx(wn,{variant:"light",leftSection:A.jsx(KG,{size:14}),onClick:()=>rOe(a,r,t,s),size:"xs",disabled:d,children:"Next Participant"})}),A.jsx(tv,{onClick:()=>i(n()),mt:1})]})}),A.jsx(Ci.Section,{grow:!0,component:ag,p:"md",children:A.jsxs(Nr,{value:c,onChange:f,children:[A.jsx(Ue,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:A.jsxs(Nr.List,{grow:!0,children:[A.jsxs(Nr.Tab,{value:"participant",children:["Participant View",A.jsx(gme,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),A.jsxs(Nr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",A.jsx(gme,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),A.jsx(Nr.Panel,{value:"participant",children:A.jsx(WM,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),A.jsx(Nr.Panel,{value:"allTrials",children:A.jsx(WM,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function QWt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Zr(I=>I.config),r=Zr(I=>I.metadata),i=DK(),o=Gu(),{toggleShowHelpText:s,toggleStudyBrowser:a,incrementHelpCounter:u}=eu(),{storageEngine:l}=Go(),c=jh(),f=Ed(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[m,p]=F.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,v=n==null?void 0:n.uiConfig.withProgressBar,b=dw(),w=jG(`/${b}`),E=F.useRef(null),[T,C]=F.useState(!1),S=Zr(I=>I.isRecording);return F.useEffect(()=>{const I=E.current;I&&C(I.scrollWidth>I.offsetWidth)},[n]),A.jsx(Ci.Header,{p:"md",children:A.jsxs(Mp,{mt:-7,align:"center",children:[A.jsx(Mp.Col,{span:4,children:A.jsxs(un,{align:"center",children:[A.jsx(rv,{w:40,src:`${va}${g}`,alt:"Study Logo"}),A.jsx(ff,{w:"md"}),A.jsx(zo,{ref:E,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:T?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),A.jsx(Mp.Col,{span:4,children:v&&A.jsx(LT,{radius:"md",size:"lg",value:h})}),A.jsx(Mp.Col,{span:4,children:A.jsxs(ui,{wrap:"nowrap",justify:"right",children:[S?A.jsxs(ui,{ml:"xl",gap:20,wrap:"nowrap",children:[A.jsx(ct,{color:"red",children:"Recording audio"}),A.jsx(rSe,{})]}):null,!t&&A.jsx(Ji,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:A.jsx(yh,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&A.jsx(wn,{variant:"outline",onClick:()=>{o(s()),o(u({identifier:`${c}_${f}`}))},children:"Help"}),A.jsxs(cl,{shadow:"md",width:200,withinPortal:!0,opened:m,onChange:p,children:[A.jsx(cl.Target,{children:A.jsx(ev,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:A.jsx(yHe,{})})}),A.jsxs(cl.Dropdown,{children:[e&&A.jsx(cl.Item,{leftSection:A.jsx(IHe,{size:14}),onClick:()=>o(a()),children:"Study Browser"}),A.jsx(cl.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:A.jsx(EHe,{size:14}),children:"Contact"}),e&&A.jsx(cl.Item,{leftSection:A.jsx(KG,{size:14}),onClick:()=>rOe(l,n,r,w),children:"Next Participant"}),e&&A.jsx(cl.Item,{leftSection:A.jsx(sve,{size:14}),component:"a",href:`${va}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function iOe(e,t){var n;return fC(e)&&t.baseComponents?RK({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function JWt(){var u;const e=(u=yg())==null?void 0:u.uiConfig.sidebar,t=yg(),n=jh(),r=t.components[n],i=F.useMemo(()=>r?iOe(r,t):null,[r,t]),o=NK(),s=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?A.jsxs(Ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&s!==""&&A.jsxs(Ci.Section,{bg:"gray.3",p:"md",children:[A.jsx(ct,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),A.jsx(ju,{text:s})]}),A.jsx(Ci.Section,{p:"md",children:A.jsx(z6,{status:o,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):A.jsx(Ci.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:A.jsx(z6,{status:o,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function ZWt(){const e=Zr(u=>u.showHelpText),t=Zr(u=>u.config),n=Gu(),{toggleShowHelpText:r}=eu(),[i,o]=F.useState(""),[s,a]=F.useState(!0);return F.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await OK(t.uiConfig.helpTextPath);l!==void 0&&o(l),a(!1)}u()},[t.uiConfig.helpTextPath]),A.jsx(Co,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:s||i?A.jsx(ju,{text:i}):A.jsx(D1,{path:t.uiConfig.helpTextPath})})}function eGt(){const e=Zr(s=>s.alertModal),{setAlertModal:t}=eu(),n=Gu(),[r,i]=F.useState(e.show),o=F.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return F.useEffect(()=>i(e.show),[e.show]),A.jsx(Co,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:o,children:A.jsxs(Y0,{color:"red",radius:"xs",title:"Alert",icon:A.jsx(aHe,{}),onClose:o,styles:{root:{backgroundColor:"unset"}},children:[A.jsx(ct,{my:"md",children:e.message}),A.jsx(ui,{w:"100%",justify:"end",children:A.jsx(wn,{onClick:o,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const yme=15,vme=3;function tGt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:o}){const s=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,s[u]),u=(u+1)%s.length)})}return A.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return A.jsx("g",{onClick:()=>i(l,c.createdOn,o),children:A.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-vme/2,y:n/2-yme/2,width:vme,height:yme})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?A.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,A.jsx(NW,{position:{bottom:10,left:10},children:A.jsxs(Xa,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[A.jsx(Xa.Target,{children:A.jsx(wn,{children:"Show Legend"})}),A.jsx(Xa.Dropdown,{children:A.jsx(qo,{children:Array.from(a.keys()).map(u=>A.jsxs(ui,{children:[A.jsx(iG,{color:a.get(u)}),A.jsx("span",{children:u})]},u))})})]})})]})}const bme={left:5,top:0,right:5,bottom:0};function nGt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:o,setPlayTime:s,trialName:a}){const u=F.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=F.useCallback((f,d)=>{s(d,(d-e.domain()[0])/u),o(f)},[o,s,u,e]),c=F.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return A.jsx(tGt,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return A.jsxs("svg",{style:{width:n,height:r},children:[A.jsx("line",{stroke:"black",strokeWidth:1,x1:bme.left,x2:n+bme.left,y1:r/2,y2:r/2}),c]})}function rGt(e){const t=F.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return F.useLayoutEffect(()=>{t.current=e}),F.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function iGt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:o,startTime:s}){const a=F.useRef(0),u=F.useRef(Date.now()),[l,c]=F.useState(0);F.useEffect(()=>{s&&(a.current=0,n(s,0))},[s,n]);const f=rGt(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(s+a.current,void 0),c(l+1)});F.useEffect(()=>{i&&a.current>=r&&(n(s,0),u.current=Date.now()-a.current,a.current=0)},[s,i,r,n]),F.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=F.useCallback(h=>{a.current=o.invert(h.clientX-10)-o.domain()[0],u.current=Date.now()-a.current,c(l+1),n(s+a.current,a.current/r)},[r,l,s,n,o]);return A.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:A.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:o(s+a.current),x2:o(s+a.current)})})}function qq(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,o=n<10?`0${n}`:`${n}`,s=t<10?`0${t}`:`${t}`;return`${t>0?`${s}h`:""} ${n>0?`${o}m`:""} ${i}s`}const fz={left:0,top:0,right:0,bottom:0};function oGt(e,t){return t?t.getParticipantData(e):null}function sGt({setTimeString:e}){const[t]=Rg(),n=F.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Go(),i=Zr(Y=>Y.analysisIsPlaying),o=Zr(Y=>Y.analysisHasAudio),s=Zr(Y=>Y.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=eu(),f=Gu(),d=jh(),h=Ed();F.useEffect(()=>{f(a(null))},[h,a,f]);const[m,{width:p}]=mI(),[g,v]=F.useState(0),[b,w]=F.useState(null),[E,T]=F.useState(0),{value:C,status:S}=UF(oGt,[n,r]),[I,R]=_5e(0,100),P=F.useRef(null),[M,B]=F.useState(!0),L=F.useRef(null),z=F.useMemo(()=>`${d}_${h}`,[d,h]);F.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),F.useEffect(()=>{var Y;if(z&&C&&((Y=C.answers[z])!=null&&Y.provenanceGraph)){const H=jL.create(),X=Q4e({registry:H,initialState:{}});C.answers[z].provenanceGraph&&(X.importObject(J0(C.answers[z].provenanceGraph)),f(l(!0)),L.current=X)}else f(l(!1))},[C,z,f,l]);const G=F.useCallback(Y=>{var H;Y&&(z&&C&&L.current&&(f(a(L.current.getState((H=C.answers[z].provenanceGraph)==null?void 0:H.nodes[Y]))),L.current.to(Y)),w(Y))},[C,a,f,z]);F.useEffect(()=>{var X;if(!z||!C||!L.current||!((X=C.answers[z])!=null&&X.provenanceGraph))return;const Y=C.answers[z].provenanceGraph;if(!Y)return;if(!b||!Y.nodes[b]){G(Y.root);return}let H=Y.nodes[b];for(;;)if(I<H.createdOn){if(uWt(H))break;{const ee=H.parent;H=Y.nodes[ee]}}else if(H.children.length>0){const ee=H.children[0];if(I>Y.nodes[ee].createdOn)H=Y.nodes[ee];else break}else break;H.id!==b&&G(H.id)},[G,b,C,n,I,z]);const W=F.useMemo(()=>(C==null?void 0:C.answers[z].startTime)||0,[C,z]);F.useEffect(()=>{E===0?e(""):I!==0&&e(`${qq(I-W)} / ${qq(E*1e3)}`)},[z,C,I,e,W,E]),F.useEffect(()=>{if(!o&&s&&C){const Y=C.answers[z].endTime-C.answers[z].startTime;T(Y>-1?Y/1e3:0)}},[o,s,z,C]);const te=iC(),Z=F.useRef(null),re=F.useCallback(async Y=>{if(Z.current=Y,Y&&C&&te&&z&&r)try{const H=await r.getAudio(z,n);await Y.load(H),B(!1),f(u(!0)),T(Y.getDuration()),v(Y.getWidth()),Y.seekTo(0),Y.on("redrawcomplete",()=>v(Y.getWidth()))}catch(H){throw f(u(!1)),new Error(H)}else f(u(!1)),T(0)},[C,te,z,r,n,f,u]),q=F.useCallback((Y,H)=>{if(Y>E*1e3+W){f(c(!1)),R(Y);return}R(Y),Z.current&&H!==void 0&&setTimeout(()=>{var X;(X=Z.current)==null||X.seekTo(H)})},[c,R,W,f,E]);F.useEffect(()=>{Z.current&&(i?Z.current.play():Z.current.pause())},[Z,i,E,W,R]);const U=F.useMemo(()=>{var X,ee;if(!C||!((X=C.answers[z])!=null&&X.startTime)||!((ee=C.answers[z])!=null&&ee.endTime))return null;const Y=E>0?C.answers[z].startTime+E*1e3:C.answers[z].endTime;return fm([fz.left,p+fz.left+fz.right]).domain([C.answers[z].startTime,Y]).clamp(!0)},[C,z,p,E]);return F.useEffect(()=>{re(Z.current)},[q,re,C,n,Z]),A.jsx(ui,{wrap:"nowrap",gap:10,mx:10,children:A.jsxs(qo,{ref:m,style:{width:"100%"},gap:0,children:[A.jsx(xi,{}),C!==null&&z?A.jsxs(Ue,{ref:P,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:o?"block":"none",id:"waveformDiv",children:[A.jsx(ZCe,{onMount:re,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:A.jsx(eSe,{id:"waveform",height:50})}),M?A.jsx(Em,{}):null]}):null,S==="success"&&C&&U&&z&&C.answers[z].provenanceGraph?A.jsx(nGt,{xScale:U,trialName:z,setPlayTime:q,currentNode:b,setCurrentNode:G,participantData:C,width:g||p,height:25}):null,U&&C&&(o||s)?A.jsx(iGt,{duration:E*1e3,height:(o?50:0)+(s?25:0),isPlaying:i,startTime:W,width:p,xScale:U,updateTimer:q}):null]})})}function aGt(e,t){return t?t.getParticipantData(e):null}function uGt(e){return e?e.getAllParticipantsData():null}function lGt(){const[e]=Rg(),t=F.useMemo(()=>e.get("participantId")||void 0,[e]),n=jh(),r=Ed(),i=Lh(),{setAnalysisIsPlaying:o}=eu(),s=Gu(),a=Zr(v=>v.analysisIsPlaying),{storageEngine:u}=Go(),{value:l,status:c}=UF(aGt,[t,u]),{value:f}=UF(uGt,[u]),[d,h]=F.useMemo(()=>{if(f&&l&&t&&n){const v=f.filter(T=>T.participantConfigHash===l.participantConfigHash),b=v.findIndex(T=>T.participantId===t),w=b<v.length-1?v[b+1]:v[0],E=b>0?v[b-1]:v[v.length-1];return[[w.participantId,kh(w.sequence).indexOf(n)],[E.participantId,kh(E.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),m=F.useMemo(()=>{const v={};return f==null||f.forEach(b=>{v[b.participantConfigHash]||(v[b.participantConfigHash]=new Set),v[b.participantConfigHash].add(b.participantId)}),Object.keys(v).sort((b,w)=>b===(l==null?void 0:l.participantConfigHash)?-1:w===(l==null?void 0:l.participantConfigHash)?1:0).map(b=>({group:`Config version: ${b}`,items:[...v[b]].map(w=>({value:w,label:w,disabled:b!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[p,g]=F.useState("");return A.jsx(Ci.Footer,{zIndex:101,withBorder:!1,children:A.jsxs(Ue,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[A.jsx(yf,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),A.jsx(sGt,{setTimeString:g}),A.jsx(xi,{children:A.jsxs(ui,{gap:"xs",style:{height:"50px"},children:[A.jsx(ct,{size:"sm",ff:"monospace",children:p}),A.jsx(ev,{variant:"filled",size:30,onClick:()=>s(o(!a)),children:a?A.jsx(MHe,{}):A.jsx($He,{})}),A.jsx(ct,{mx:"0",children:"Participant:"}),A.jsx(BT,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:v=>{i(`./../${sh(0)}?participantId=${v}`)},data:m}),A.jsx(wn,{onClick:()=>i(`../${sh(+r-1)}?participantId=${t}`,{relative:"path"}),children:A.jsx(Gre,{})}),A.jsx(wn,{onClick:()=>i(`../${sh(+r+1)}?participantId=${t}`,{relative:"path"}),children:A.jsx(Yre,{})}),A.jsxs(wn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${sh(h[1])}?participantId=${h[0]}`),children:[A.jsx(Gre,{}),A.jsx(Kre,{})]}),A.jsxs(wn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${sh(d[1])}?participantId=${d[0]}`),children:[A.jsx(Kre,{}),A.jsx(Yre,{})]})]})})]})})}function cGt(){const e=F.useRef([]),t=yg(),n=t.uiConfig.windowEventDebounceTime??100,r=Zr(d=>d.showStudyBrowser),i=Zr(d=>d.analysisHasAudio),o=Zr(d=>d.analysisHasProvenance),s=Zr(d=>d.modes);F.useEffect(()=>{const d=_0(T=>{e.current.push([Date.now(),"focus",T.target instanceof HTMLElement?T.target.tagName:""])},n,{maxWait:n}),h=_0(T=>{e.current.push([Date.now(),"input",T.data??""])},n,{maxWait:n}),m=_0(T=>{e.current.push([Date.now(),"keypress",T.key])},n,{maxWait:n}),p=_0(T=>{e.current.push([Date.now(),"mousedown",[T.clientX,T.clientY]])},n,{maxWait:n}),g=_0(T=>{e.current.push([Date.now(),"mouseup",[T.clientX,T.clientY]])},n,{maxWait:n}),v=_0(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=_0(T=>{e.current.push([Date.now(),"mousemove",[T.clientX,T.clientY]])},n,{maxWait:n}),w=_0(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=_0(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",m),window.addEventListener("mousedown",p),window.addEventListener("mouseup",g),window.addEventListener("resize",v),window.addEventListener("mousemove",b),window.addEventListener("scroll",w),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",m),window.addEventListener("mousedown",p),window.addEventListener("mouseup",g),window.removeEventListener("resize",v),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",w),document.removeEventListener("visibilitychange",E)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=F.useMemo(()=>s,[s]),c=F.useMemo(()=>u&&r,[u,r]),f=iC();return A.jsx(K_e.Provider,{value:e,children:A.jsxs(Ci,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(o?25:0)},children:[A.jsx(JWt,{}),A.jsx(XWt,{}),A.jsx(QWt,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),A.jsx(ZWt,{}),A.jsx(eGt,{}),A.jsx(Ci.Main,{children:A.jsx(gVe,{})}),f&&A.jsx(lGt,{})]})})}function fGt(e,t=!1){return typeof e=="number"?xme(e,t):xme(e.length,t).map(r=>r.map(i=>e[i]))}function xme(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let o=0;o<e;o++)o<2?n[o]=o:o%2==0?n[o]=e-o/2:n[o]=Math.floor(o/2)+1;let r=[n],i=n;for(let o=1;o<e;o+=1){let s=i.map(a=>(a+1)%e);r.push(s),i=s}if(t&&e%2>0)for(let o=0;o<e;o+=1)r.push(r[o].slice().reverse());return r}function oOe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const o=r[i];if(typeof o!="string"&&!Array.isArray(o)){const s=e.components.indexOf(o);r[i]=oOe(o,t,`${n}-${s}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const o=[];if(i.spacing!=="random")for(let s=0;s<r.length;s+=1)(s===i.firstLocation||s>i.firstLocation&&s%i.spacing===0)&&o.push(i.components),o.push(r[s]);if(i.spacing==="random"){const s=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;s.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;s.add(l)}const a=Array.from(s).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(o.push(i.components),u+=1),o.push(r[l])}r=o}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function dGt(e,t){const n=J0(e);return oOe(n,t,"root")}function sOe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((o,s)=>{typeof o!="string"&&sOe(o,t,i,s)})}function hGt(e){const t=[];return sOe(e,t,"",0),t}function wme(e,t){const n=t.split("-");let r={};n.forEach(s=>{s==="root"?r=e.sequence:r=r.components[+s]});const i=r.components.map((s,a)=>typeof s=="string"?s:`_componentBlock${a}`);return fGt(i.sort(()=>.5-Math.random()),!0)}function _me(e){const n=hGt(e.sequence).map(o=>({[o]:wme(e,o)})).reduce((o,s)=>({...o,...s}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const o=dGt(e.sequence,n);o.components.push("end"),i.push(o),Object.entries(n).forEach(([s,a])=>{a.length===0&&(n[s]=wme(e,s))})}),i}var CP={exports:{}},dz={},E0={},Tb={},hz={},pz={},mz={},Eme;function GM(){return Eme||(Eme=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,E)=>`${w}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,E)=>(E instanceof n&&(w[E.str]=(w[E.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(v,...b){const w=[v[0]];let E=0;for(;E<b.length;)a(w,b[E]),w.push(v[++E]);return new r(w)}e._=i;const o=new r("+");function s(v,...b){const w=[h(v[0])];let E=0;for(;E<b.length;)w.push(o),a(w,b[E]),w.push(o,h(v[++E]));return u(w),new r(w)}e.str=s;function a(v,b){b instanceof r?v.push(...b._items):b instanceof n?v.push(b):v.push(f(b))}e.addCodeArg=a;function u(v){let b=1;for(;b<v.length-1;){if(v[b]===o){const w=l(v[b-1],v[b+1]);if(w!==void 0){v.splice(b-1,3,w);continue}v[b++]="+"}b++}}function l(v,b){if(b==='""')return v;if(v==='""')return b;if(typeof v=="string")return b instanceof n||v[v.length-1]!=='"'?void 0:typeof b!="string"?`${v.slice(0,-1)}${b}"`:b[0]==='"'?v.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(v instanceof n))return`"${v}${b.slice(1)}`}function c(v,b){return b.emptyStr()?v:v.emptyStr()?b:s`${v}${b}`}e.strConcat=c;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function d(v){return new r(h(v))}e.stringify=d;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function m(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}e.getProperty=m;function p(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=p;function g(v){return new r(v.toString())}e.regexpCode=g}(mz)),mz}var gz={},Tme;function Cme(){return Tme||(Tme=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=GM();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class o extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=o;const s=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?s:t.nil}}get(){return this._scope}name(l){return new o(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,m=(f=c.key)!==null&&f!==void 0?f:c.ref;let p=this._values[h];if(p){const b=p.get(m);if(b)return b}else p=this._values[h]=new Map;p.set(m,d);const g=this._scope[h]||(this._scope[h]=[]),v=g.length;return g[v]=c.ref,d.setValue(c,{property:h,itemIndex:v}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const m in l){const p=l[m];if(!p)continue;const g=f[m]=f[m]||new Map;p.forEach(v=>{if(g.has(v))return;g.set(v,r.Started);let b=c(v);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${v} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(v))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(v);g.set(v,r.Completed)})}return h}}e.ValueScope=a}(gz)),gz}var Sme;function _r(){return Sme||(Sme=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=GM(),n=Cme();var r=GM();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Cme();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(X,ee){return this}}class s extends o{constructor(X,ee,le){super(),this.varKind=X,this.name=ee,this.rhs=le}render({es5:X,_n:ee}){const le=X?n.varKinds.var:this.varKind,Ee=this.rhs===void 0?"":` = ${this.rhs}`;return`${le} ${this.name}${Ee};`+ee}optimizeNames(X,ee){if(X[this.name.str])return this.rhs&&(this.rhs=z(this.rhs,X,ee)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends o{constructor(X,ee,le){super(),this.lhs=X,this.rhs=ee,this.sideEffects=le}render({_n:X}){return`${this.lhs} = ${this.rhs};`+X}optimizeNames(X,ee){if(!(this.lhs instanceof t.Name&&!X[this.lhs.str]&&!this.sideEffects))return this.rhs=z(this.rhs,X,ee),this}get names(){const X=this.lhs instanceof t.Name?{}:{...this.lhs.names};return L(X,this.rhs)}}class u extends a{constructor(X,ee,le,Ee){super(X,le,Ee),this.op=ee}render({_n:X}){return`${this.lhs} ${this.op}= ${this.rhs};`+X}}class l extends o{constructor(X){super(),this.label=X,this.names={}}render({_n:X}){return`${this.label}:`+X}}class c extends o{constructor(X){super(),this.label=X,this.names={}}render({_n:X}){return`break${this.label?` ${this.label}`:""};`+X}}class f extends o{constructor(X){super(),this.error=X}render({_n:X}){return`throw ${this.error};`+X}get names(){return this.error.names}}class d extends o{constructor(X){super(),this.code=X}render({_n:X}){return`${this.code};`+X}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(X,ee){return this.code=z(this.code,X,ee),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends o{constructor(X=[]){super(),this.nodes=X}render(X){return this.nodes.reduce((ee,le)=>ee+le.render(X),"")}optimizeNodes(){const{nodes:X}=this;let ee=X.length;for(;ee--;){const le=X[ee].optimizeNodes();Array.isArray(le)?X.splice(ee,1,...le):le?X[ee]=le:X.splice(ee,1)}return X.length>0?this:void 0}optimizeNames(X,ee){const{nodes:le}=this;let Ee=le.length;for(;Ee--;){const be=le[Ee];be.optimizeNames(X,ee)||(G(X,be.names),le.splice(Ee,1))}return le.length>0?this:void 0}get names(){return this.nodes.reduce((X,ee)=>B(X,ee.names),{})}}class m extends h{render(X){return"{"+X._n+super.render(X)+"}"+X._n}}class p extends h{}class g extends m{}g.kind="else";class v extends m{constructor(X,ee){super(ee),this.condition=X}render(X){let ee=`if(${this.condition})`+super.render(X);return this.else&&(ee+="else "+this.else.render(X)),ee}optimizeNodes(){super.optimizeNodes();const X=this.condition;if(X===!0)return this.nodes;let ee=this.else;if(ee){const le=ee.optimizeNodes();ee=this.else=Array.isArray(le)?new g(le):le}if(ee)return X===!1?ee instanceof v?ee:ee.nodes:this.nodes.length?this:new v(W(X),ee instanceof v?[ee]:ee.nodes);if(!(X===!1||!this.nodes.length))return this}optimizeNames(X,ee){var le;if(this.else=(le=this.else)===null||le===void 0?void 0:le.optimizeNames(X,ee),!!(super.optimizeNames(X,ee)||this.else))return this.condition=z(this.condition,X,ee),this}get names(){const X=super.names;return L(X,this.condition),this.else&&B(X,this.else.names),X}}v.kind="if";class b extends m{}b.kind="for";class w extends b{constructor(X){super(),this.iteration=X}render(X){return`for(${this.iteration})`+super.render(X)}optimizeNames(X,ee){if(super.optimizeNames(X,ee))return this.iteration=z(this.iteration,X,ee),this}get names(){return B(super.names,this.iteration.names)}}class E extends b{constructor(X,ee,le,Ee){super(),this.varKind=X,this.name=ee,this.from=le,this.to=Ee}render(X){const ee=X.es5?n.varKinds.var:this.varKind,{name:le,from:Ee,to:be}=this;return`for(${ee} ${le}=${Ee}; ${le}<${be}; ${le}++)`+super.render(X)}get names(){const X=L(super.names,this.from);return L(X,this.to)}}class T extends b{constructor(X,ee,le,Ee){super(),this.loop=X,this.varKind=ee,this.name=le,this.iterable=Ee}render(X){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(X)}optimizeNames(X,ee){if(super.optimizeNames(X,ee))return this.iterable=z(this.iterable,X,ee),this}get names(){return B(super.names,this.iterable.names)}}class C extends m{constructor(X,ee,le){super(),this.name=X,this.args=ee,this.async=le}render(X){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(X)}}C.kind="func";class S extends h{render(X){return"return "+super.render(X)}}S.kind="return";class I extends m{render(X){let ee="try"+super.render(X);return this.catch&&(ee+=this.catch.render(X)),this.finally&&(ee+=this.finally.render(X)),ee}optimizeNodes(){var X,ee;return super.optimizeNodes(),(X=this.catch)===null||X===void 0||X.optimizeNodes(),(ee=this.finally)===null||ee===void 0||ee.optimizeNodes(),this}optimizeNames(X,ee){var le,Ee;return super.optimizeNames(X,ee),(le=this.catch)===null||le===void 0||le.optimizeNames(X,ee),(Ee=this.finally)===null||Ee===void 0||Ee.optimizeNames(X,ee),this}get names(){const X=super.names;return this.catch&&B(X,this.catch.names),this.finally&&B(X,this.finally.names),X}}class R extends m{constructor(X){super(),this.error=X}render(X){return`catch(${this.error})`+super.render(X)}}R.kind="catch";class P extends m{render(X){return"finally"+super.render(X)}}P.kind="finally";class M{constructor(X,ee={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ee,_n:ee.lines?`
`:""},this._extScope=X,this._scope=new n.Scope({parent:X}),this._nodes=[new p]}toString(){return this._root.render(this.opts)}name(X){return this._scope.name(X)}scopeName(X){return this._extScope.name(X)}scopeValue(X,ee){const le=this._extScope.value(X,ee);return(this._values[le.prefix]||(this._values[le.prefix]=new Set)).add(le),le}getScopeValue(X,ee){return this._extScope.getValue(X,ee)}scopeRefs(X){return this._extScope.scopeRefs(X,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(X,ee,le,Ee){const be=this._scope.toName(ee);return le!==void 0&&Ee&&(this._constants[be.str]=le),this._leafNode(new s(X,be,le)),be}const(X,ee,le){return this._def(n.varKinds.const,X,ee,le)}let(X,ee,le){return this._def(n.varKinds.let,X,ee,le)}var(X,ee,le){return this._def(n.varKinds.var,X,ee,le)}assign(X,ee,le){return this._leafNode(new a(X,ee,le))}add(X,ee){return this._leafNode(new u(X,e.operators.ADD,ee))}code(X){return typeof X=="function"?X():X!==t.nil&&this._leafNode(new d(X)),this}object(...X){const ee=["{"];for(const[le,Ee]of X)ee.length>1&&ee.push(","),ee.push(le),(le!==Ee||this.opts.es5)&&(ee.push(":"),(0,t.addCodeArg)(ee,Ee));return ee.push("}"),new t._Code(ee)}if(X,ee,le){if(this._blockNode(new v(X)),ee&&le)this.code(ee).else().code(le).endIf();else if(ee)this.code(ee).endIf();else if(le)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(X){return this._elseNode(new v(X))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(v,g)}_for(X,ee){return this._blockNode(X),ee&&this.code(ee).endFor(),this}for(X,ee){return this._for(new w(X),ee)}forRange(X,ee,le,Ee,be=this.opts.es5?n.varKinds.var:n.varKinds.let){const Ce=this._scope.toName(X);return this._for(new E(be,Ce,ee,le),()=>Ee(Ce))}forOf(X,ee,le,Ee=n.varKinds.const){const be=this._scope.toName(X);if(this.opts.es5){const Ce=ee instanceof t.Name?ee:this.var("_arr",ee);return this.forRange("_i",0,(0,t._)`${Ce}.length`,Oe=>{this.var(be,(0,t._)`${Ce}[${Oe}]`),le(be)})}return this._for(new T("of",Ee,be,ee),()=>le(be))}forIn(X,ee,le,Ee=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(X,(0,t._)`Object.keys(${ee})`,le);const be=this._scope.toName(X);return this._for(new T("in",Ee,be,ee),()=>le(be))}endFor(){return this._endBlockNode(b)}label(X){return this._leafNode(new l(X))}break(X){return this._leafNode(new c(X))}return(X){const ee=new S;if(this._blockNode(ee),this.code(X),ee.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(X,ee,le){if(!ee&&!le)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ee=new I;if(this._blockNode(Ee),this.code(X),ee){const be=this.name("e");this._currNode=Ee.catch=new R(be),ee(be)}return le&&(this._currNode=Ee.finally=new P,this.code(le)),this._endBlockNode(R,P)}throw(X){return this._leafNode(new f(X))}block(X,ee){return this._blockStarts.push(this._nodes.length),X&&this.code(X).endBlock(ee),this}endBlock(X){const ee=this._blockStarts.pop();if(ee===void 0)throw new Error("CodeGen: not in self-balancing block");const le=this._nodes.length-ee;if(le<0||X!==void 0&&le!==X)throw new Error(`CodeGen: wrong number of nodes: ${le} vs ${X} expected`);return this._nodes.length=ee,this}func(X,ee=t.nil,le,Ee){return this._blockNode(new C(X,ee,le)),Ee&&this.code(Ee).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(X=1){for(;X-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(X){return this._currNode.nodes.push(X),this}_blockNode(X){this._currNode.nodes.push(X),this._nodes.push(X)}_endBlockNode(X,ee){const le=this._currNode;if(le instanceof X||ee&&le instanceof ee)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ee?`${X.kind}/${ee.kind}`:X.kind}"`)}_elseNode(X){const ee=this._currNode;if(!(ee instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=ee.else=X,this}get _root(){return this._nodes[0]}get _currNode(){const X=this._nodes;return X[X.length-1]}set _currNode(X){const ee=this._nodes;ee[ee.length-1]=X}}e.CodeGen=M;function B(H,X){for(const ee in X)H[ee]=(H[ee]||0)+(X[ee]||0);return H}function L(H,X){return X instanceof t._CodeOrName?B(H,X.names):H}function z(H,X,ee){if(H instanceof t.Name)return le(H);if(!Ee(H))return H;return new t._Code(H._items.reduce((be,Ce)=>(Ce instanceof t.Name&&(Ce=le(Ce)),Ce instanceof t._Code?be.push(...Ce._items):be.push(Ce),be),[]));function le(be){const Ce=ee[be.str];return Ce===void 0||X[be.str]!==1?be:(delete X[be.str],Ce)}function Ee(be){return be instanceof t._Code&&be._items.some(Ce=>Ce instanceof t.Name&&X[Ce.str]===1&&ee[Ce.str]!==void 0)}}function G(H,X){for(const ee in X)H[ee]=(H[ee]||0)-(X[ee]||0)}function W(H){return typeof H=="boolean"||typeof H=="number"||H===null?!H:(0,t._)`!${Y(H)}`}e.not=W;const te=U(e.operators.AND);function Z(...H){return H.reduce(te)}e.and=Z;const re=U(e.operators.OR);function q(...H){return H.reduce(re)}e.or=q;function U(H){return(X,ee)=>X===t.nil?ee:ee===t.nil?X:(0,t._)`${Y(X)} ${H} ${Y(ee)}`}function Y(H){return H instanceof t.Name?H:(0,t._)`(${H})`}}(pz)),pz}var fr={},Ame;function ii(){if(Ame)return fr;Ame=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.checkStrictMode=fr.getErrorPath=fr.Type=fr.useFunc=fr.setEvaluated=fr.evaluatedPropsToName=fr.mergeEvaluated=fr.eachItem=fr.unescapeJsonPointer=fr.escapeJsonPointer=fr.escapeFragment=fr.unescapeFragment=fr.schemaRefOrVal=fr.schemaHasRulesButRef=fr.schemaHasRules=fr.checkUnknownRules=fr.alwaysValidSchema=fr.toHash=void 0;const e=_r(),t=GM();function n(T){const C={};for(const S of T)C[S]=!0;return C}fr.toHash=n;function r(T,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(T,C),!o(C,T.self.RULES.all))}fr.alwaysValidSchema=r;function i(T,C=T.schema){const{opts:S,self:I}=T;if(!S.strictSchema||typeof C=="boolean")return;const R=I.RULES.keywords;for(const P in C)R[P]||E(T,`unknown keyword: "${P}"`)}fr.checkUnknownRules=i;function o(T,C){if(typeof T=="boolean")return!T;for(const S in T)if(C[S])return!0;return!1}fr.schemaHasRules=o;function s(T,C){if(typeof T=="boolean")return!T;for(const S in T)if(S!=="$ref"&&C.all[S])return!0;return!1}fr.schemaHasRulesButRef=s;function a({topSchemaRef:T,schemaPath:C},S,I,R){if(!R){if(typeof S=="number"||typeof S=="boolean")return S;if(typeof S=="string")return(0,e._)`${S}`}return(0,e._)`${T}${C}${(0,e.getProperty)(I)}`}fr.schemaRefOrVal=a;function u(T){return f(decodeURIComponent(T))}fr.unescapeFragment=u;function l(T){return encodeURIComponent(c(T))}fr.escapeFragment=l;function c(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}fr.escapeJsonPointer=c;function f(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}fr.unescapeJsonPointer=f;function d(T,C){if(Array.isArray(T))for(const S of T)C(S);else C(T)}fr.eachItem=d;function h({mergeNames:T,mergeToName:C,mergeValues:S,resultToName:I}){return(R,P,M,B)=>{const L=M===void 0?P:M instanceof e.Name?(P instanceof e.Name?T(R,P,M):C(R,P,M),M):P instanceof e.Name?(C(R,M,P),P):S(P,M);return B===e.Name&&!(L instanceof e.Name)?I(R,L):L}}fr.mergeEvaluated={props:h({mergeNames:(T,C,S)=>T.if((0,e._)`${S} !== true && ${C} !== undefined`,()=>{T.if((0,e._)`${C} === true`,()=>T.assign(S,!0),()=>T.assign(S,(0,e._)`${S} || {}`).code((0,e._)`Object.assign(${S}, ${C})`))}),mergeToName:(T,C,S)=>T.if((0,e._)`${S} !== true`,()=>{C===!0?T.assign(S,!0):(T.assign(S,(0,e._)`${S} || {}`),p(T,S,C))}),mergeValues:(T,C)=>T===!0?!0:{...T,...C},resultToName:m}),items:h({mergeNames:(T,C,S)=>T.if((0,e._)`${S} !== true && ${C} !== undefined`,()=>T.assign(S,(0,e._)`${C} === true ? true : ${S} > ${C} ? ${S} : ${C}`)),mergeToName:(T,C,S)=>T.if((0,e._)`${S} !== true`,()=>T.assign(S,C===!0?!0:(0,e._)`${S} > ${C} ? ${S} : ${C}`)),mergeValues:(T,C)=>T===!0?!0:Math.max(T,C),resultToName:(T,C)=>T.var("items",C)})};function m(T,C){if(C===!0)return T.var("props",!0);const S=T.var("props",(0,e._)`{}`);return C!==void 0&&p(T,S,C),S}fr.evaluatedPropsToName=m;function p(T,C,S){Object.keys(S).forEach(I=>T.assign((0,e._)`${C}${(0,e.getProperty)(I)}`,!0))}fr.setEvaluated=p;const g={};function v(T,C){return T.scopeValue("func",{ref:C,code:g[C.code]||(g[C.code]=new t._Code(C.code))})}fr.useFunc=v;var b;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(b||(fr.Type=b={}));function w(T,C,S){if(T instanceof e.Name){const I=C===b.Num;return S?I?(0,e._)`"[" + ${T} + "]"`:(0,e._)`"['" + ${T} + "']"`:I?(0,e._)`"/" + ${T}`:(0,e._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return S?(0,e.getProperty)(T).toString():"/"+c(T)}fr.getErrorPath=w;function E(T,C,S=T.opts.strictSchema){if(S){if(C=`strict mode: ${C}`,S===!0)throw new Error(C);T.self.logger.warn(C)}}return fr.checkStrictMode=E,fr}var SP={},Dme;function Cv(){if(Dme)return SP;Dme=1,Object.defineProperty(SP,"__esModule",{value:!0});const e=_r(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return SP.default=t,SP}var kme;function zL(){return kme||(kme=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=_r(),n=ii(),r=Cv();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:v})=>v?(0,t.str)`"${g}" keyword must be ${v} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,v=e.keywordError,b,w){const{it:E}=g,{gen:T,compositeRule:C,allErrors:S}=E,I=f(g,v,b);w??(C||S)?u(T,I):l(E,(0,t._)`[${I}]`)}e.reportError=i;function o(g,v=e.keywordError,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:C}=w,S=f(g,v,b);u(E,S),T||C||l(w,r.default.vErrors)}e.reportExtraError=o;function s(g,v){g.assign(r.default.errors,v),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(v,()=>g.assign((0,t._)`${r.default.vErrors}.length`,v),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=s;function a({gen:g,keyword:v,schemaValue:b,data:w,errsCount:E,it:T}){if(E===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",E,r.default.errors,S=>{g.const(C,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${v}`),T.opts.verbose&&(g.assign((0,t._)`${C}.schema`,b),g.assign((0,t._)`${C}.data`,w))})}e.extendErrors=a;function u(g,v){const b=g.const("err",v);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,v){const{gen:b,validateName:w,schemaEnv:E}=g;E.$async?b.throw((0,t._)`new ${g.ValidationError}(${v})`):(b.assign((0,t._)`${w}.errors`,v),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,v,b){const{createErrors:w}=g.it;return w===!1?(0,t._)`{}`:d(g,v,b)}function d(g,v,b={}){const{gen:w,it:E}=g,T=[h(E,b),m(g,b)];return p(g,v,T),w.object(...T)}function h({errorPath:g},{instancePath:v}){const b=v?(0,t.str)`${g}${(0,n.getErrorPath)(v,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function m({keyword:g,it:{errSchemaPath:v}},{schemaPath:b,parentSchema:w}){let E=w?v:(0,t.str)`${v}/${g}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function p(g,{params:v,message:b},w){const{keyword:E,data:T,schemaValue:C,it:S}=g,{opts:I,propertyName:R,topSchemaRef:P,schemaPath:M}=S;w.push([c.keyword,E],[c.params,typeof v=="function"?v(g):v||(0,t._)`{}`]),I.messages&&w.push([c.message,typeof b=="function"?b(g):b]),I.verbose&&w.push([c.schema,C],[c.parentSchema,(0,t._)`${P}${M}`],[r.default.data,T]),R&&w.push([c.propertyName,R])}}(hz)),hz}var Ime;function pGt(){if(Ime)return Tb;Ime=1,Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.boolOrEmptySchema=Tb.topBoolOrEmptySchema=void 0;const e=zL(),t=_r(),n=Cv(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?s(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Tb.topBoolOrEmptySchema=i;function o(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),s(a)):l.var(u,!0)}Tb.boolOrEmptySchema=o;function s(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return Tb}var Fa={},Cb={},Rme;function aOe(){if(Rme)return Cb;Rme=1,Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.getRules=Cb.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}Cb.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return Cb.getRules=r,Cb}var T0={},Nme;function uOe(){if(Nme)return T0;Nme=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.shouldUseRule=T0.shouldUseGroup=T0.schemaHasRulesForType=void 0;function e({schema:r,self:i},o){const s=i.RULES.types[o];return s&&s!==!0&&t(r,s)}T0.schemaHasRulesForType=e;function t(r,i){return i.rules.some(o=>n(r,o))}T0.shouldUseGroup=t;function n(r,i){var o;return r[i.keyword]!==void 0||((o=i.definition.implements)===null||o===void 0?void 0:o.some(s=>r[s]!==void 0))}return T0.shouldUseRule=n,T0}var Pme;function YM(){if(Pme)return Fa;Pme=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.reportTypeError=Fa.checkDataTypes=Fa.checkDataType=Fa.coerceAndCheckDataType=Fa.getJSONTypes=Fa.getSchemaTypes=Fa.DataType=void 0;const e=aOe(),t=uOe(),n=zL(),r=_r(),i=ii();var o;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(o||(Fa.DataType=o={}));function s(b){const w=a(b.type);if(w.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&w.push("null")}return w}Fa.getSchemaTypes=s;function a(b){const w=Array.isArray(b)?b:b?[b]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}Fa.getJSONTypes=a;function u(b,w){const{gen:E,data:T,opts:C}=b,S=c(w,C.coerceTypes),I=w.length>0&&!(S.length===0&&w.length===1&&(0,t.schemaHasRulesForType)(b,w[0]));if(I){const R=m(w,T,C.strictNumbers,o.Wrong);E.if(R,()=>{S.length?f(b,w,S):g(b)})}return I}Fa.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(b,w){return w?b.filter(E=>l.has(E)||w==="array"&&E==="array"):[]}function f(b,w,E){const{gen:T,data:C,opts:S}=b,I=T.let("dataType",(0,r._)`typeof ${C}`),R=T.let("coerced",(0,r._)`undefined`);S.coerceTypes==="array"&&T.if((0,r._)`${I} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>T.assign(C,(0,r._)`${C}[0]`).assign(I,(0,r._)`typeof ${C}`).if(m(w,C,S.strictNumbers),()=>T.assign(R,C))),T.if((0,r._)`${R} !== undefined`);for(const M of E)(l.has(M)||M==="array"&&S.coerceTypes==="array")&&P(M);T.else(),g(b),T.endIf(),T.if((0,r._)`${R} !== undefined`,()=>{T.assign(C,R),d(b,R)});function P(M){switch(M){case"string":T.elseIf((0,r._)`${I} == "number" || ${I} == "boolean"`).assign(R,(0,r._)`"" + ${C}`).elseIf((0,r._)`${C} === null`).assign(R,(0,r._)`""`);return;case"number":T.elseIf((0,r._)`${I} == "boolean" || ${C} === null
              || (${I} == "string" && ${C} && ${C} == +${C})`).assign(R,(0,r._)`+${C}`);return;case"integer":T.elseIf((0,r._)`${I} === "boolean" || ${C} === null
              || (${I} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(R,(0,r._)`+${C}`);return;case"boolean":T.elseIf((0,r._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(R,!1).elseIf((0,r._)`${C} === "true" || ${C} === 1`).assign(R,!0);return;case"null":T.elseIf((0,r._)`${C} === "" || ${C} === 0 || ${C} === false`),T.assign(R,null);return;case"array":T.elseIf((0,r._)`${I} === "string" || ${I} === "number"
              || ${I} === "boolean" || ${C} === null`).assign(R,(0,r._)`[${C}]`)}}}function d({gen:b,parentData:w,parentDataProperty:E},T){b.if((0,r._)`${w} !== undefined`,()=>b.assign((0,r._)`${w}[${E}]`,T))}function h(b,w,E,T=o.Correct){const C=T===o.Correct?r.operators.EQ:r.operators.NEQ;let S;switch(b){case"null":return(0,r._)`${w} ${C} null`;case"array":S=(0,r._)`Array.isArray(${w})`;break;case"object":S=(0,r._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":S=I((0,r._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":S=I();break;default:return(0,r._)`typeof ${w} ${C} ${b}`}return T===o.Correct?S:(0,r.not)(S);function I(R=r.nil){return(0,r.and)((0,r._)`typeof ${w} == "number"`,R,E?(0,r._)`isFinite(${w})`:r.nil)}}Fa.checkDataType=h;function m(b,w,E,T){if(b.length===1)return h(b[0],w,E,T);let C;const S=(0,i.toHash)(b);if(S.array&&S.object){const I=(0,r._)`typeof ${w} != "object"`;C=S.null?I:(0,r._)`!${w} || ${I}`,delete S.null,delete S.array,delete S.object}else C=r.nil;S.number&&delete S.integer;for(const I in S)C=(0,r.and)(C,h(I,w,E,T));return C}Fa.checkDataTypes=m;const p={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:w})=>typeof b=="string"?(0,r._)`{type: ${b}}`:(0,r._)`{type: ${w}}`};function g(b){const w=v(b);(0,n.reportError)(w,p)}Fa.reportTypeError=g;function v(b){const{gen:w,data:E,schema:T}=b,C=(0,i.schemaRefOrVal)(b,T,"type");return{gen:w,keyword:"type",data:E,schema:T.type,schemaCode:C,schemaValue:C,parentSchema:T,params:{},it:b}}return Fa}var SA={},Ome;function mGt(){if(Ome)return SA;Ome=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.assignDefaults=void 0;const e=_r(),t=ii();function n(i,o){const{properties:s,items:a}=i.schema;if(o==="object"&&s)for(const u in s)r(i,u,s[u].default);else o==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}SA.assignDefaults=n;function r(i,o,s){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(s===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(o)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(s)}`)}return SA}var Xd={},yi={},Fme;function Xh(){if(Fme)return yi;Fme=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.validateUnion=yi.validateArray=yi.usePattern=yi.callValidateCode=yi.schemaProperties=yi.allSchemaProperties=yi.noPropertyInData=yi.propertyInData=yi.isOwnProperty=yi.hasPropFunc=yi.reportMissingProp=yi.checkMissingProp=yi.checkReportMissingProp=void 0;const e=_r(),t=ii(),n=Cv(),r=ii();function i(b,w){const{gen:E,data:T,it:C}=b;E.if(c(E,T,w,C.opts.ownProperties),()=>{b.setParams({missingProperty:(0,e._)`${w}`},!0),b.error()})}yi.checkReportMissingProp=i;function o({gen:b,data:w,it:{opts:E}},T,C){return(0,e.or)(...T.map(S=>(0,e.and)(c(b,w,S,E.ownProperties),(0,e._)`${C} = ${S}`)))}yi.checkMissingProp=o;function s(b,w){b.setParams({missingProperty:w},!0),b.error()}yi.reportMissingProp=s;function a(b){return b.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}yi.hasPropFunc=a;function u(b,w,E){return(0,e._)`${a(b)}.call(${w}, ${E})`}yi.isOwnProperty=u;function l(b,w,E,T){const C=(0,e._)`${w}${(0,e.getProperty)(E)} !== undefined`;return T?(0,e._)`${C} && ${u(b,w,E)}`:C}yi.propertyInData=l;function c(b,w,E,T){const C=(0,e._)`${w}${(0,e.getProperty)(E)} === undefined`;return T?(0,e.or)(C,(0,e.not)(u(b,w,E))):C}yi.noPropertyInData=c;function f(b){return b?Object.keys(b).filter(w=>w!=="__proto__"):[]}yi.allSchemaProperties=f;function d(b,w){return f(w).filter(E=>!(0,t.alwaysValidSchema)(b,w[E]))}yi.schemaProperties=d;function h({schemaCode:b,data:w,it:{gen:E,topSchemaRef:T,schemaPath:C,errorPath:S},it:I},R,P,M){const B=M?(0,e._)`${b}, ${w}, ${T}${C}`:w,L=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,S)],[n.default.parentData,I.parentData],[n.default.parentDataProperty,I.parentDataProperty],[n.default.rootData,n.default.rootData]];I.opts.dynamicRef&&L.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const z=(0,e._)`${B}, ${E.object(...L)}`;return P!==e.nil?(0,e._)`${R}.call(${P}, ${z})`:(0,e._)`${R}(${z})`}yi.callValidateCode=h;const m=(0,e._)`new RegExp`;function p({gen:b,it:{opts:w}},E){const T=w.unicodeRegExp?"u":"",{regExp:C}=w.code,S=C(E,T);return b.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,e._)`${C.code==="new RegExp"?m:(0,r.useFunc)(b,C)}(${E}, ${T})`})}yi.usePattern=p;function g(b){const{gen:w,data:E,keyword:T,it:C}=b,S=w.name("valid");if(C.allErrors){const R=w.let("valid",!0);return I(()=>w.assign(R,!1)),R}return w.var(S,!0),I(()=>w.break()),S;function I(R){const P=w.const("len",(0,e._)`${E}.length`);w.forRange("i",0,P,M=>{b.subschema({keyword:T,dataProp:M,dataPropType:t.Type.Num},S),w.if((0,e.not)(S),R)})}}yi.validateArray=g;function v(b){const{gen:w,schema:E,keyword:T,it:C}=b;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(P=>(0,t.alwaysValidSchema)(C,P))&&!C.opts.unevaluated)return;const I=w.let("valid",!1),R=w.name("_valid");w.block(()=>E.forEach((P,M)=>{const B=b.subschema({keyword:T,schemaProp:M,compositeRule:!0},R);w.assign(I,(0,e._)`${I} || ${R}`),b.mergeValidEvaluated(B,R)||w.if((0,e.not)(I))})),b.result(I,()=>b.reset(),()=>b.error(!0))}return yi.validateUnion=v,yi}var Mme;function gGt(){if(Mme)return Xd;Mme=1,Object.defineProperty(Xd,"__esModule",{value:!0}),Xd.validateKeywordUsage=Xd.validSchemaType=Xd.funcKeywordCode=Xd.macroKeywordCode=void 0;const e=_r(),t=Cv(),n=Xh(),r=zL();function i(d,h){const{gen:m,keyword:p,schema:g,parentSchema:v,it:b}=d,w=h.macro.call(b.self,g,v,b),E=l(m,p,w);b.opts.validateSchema!==!1&&b.self.validateSchema(w,!0);const T=m.name("valid");d.subschema({schema:w,schemaPath:e.nil,errSchemaPath:`${b.errSchemaPath}/${p}`,topSchemaRef:E,compositeRule:!0},T),d.pass(T,()=>d.error(!0))}Xd.macroKeywordCode=i;function o(d,h){var m;const{gen:p,keyword:g,schema:v,parentSchema:b,$data:w,it:E}=d;u(E,h);const T=!w&&h.compile?h.compile.call(E.self,v,b,E):h.validate,C=l(p,g,T),S=p.let("valid");d.block$data(S,I),d.ok((m=h.valid)!==null&&m!==void 0?m:S);function I(){if(h.errors===!1)M(),h.modifying&&s(d),B(()=>d.error());else{const L=h.async?R():P();h.modifying&&s(d),B(()=>a(d,L))}}function R(){const L=p.let("ruleErrs",null);return p.try(()=>M((0,e._)`await `),z=>p.assign(S,!1).if((0,e._)`${z} instanceof ${E.ValidationError}`,()=>p.assign(L,(0,e._)`${z}.errors`),()=>p.throw(z))),L}function P(){const L=(0,e._)`${C}.errors`;return p.assign(L,null),M(e.nil),L}function M(L=h.async?(0,e._)`await `:e.nil){const z=E.opts.passContext?t.default.this:t.default.self,G=!("compile"in h&&!w||h.schema===!1);p.assign(S,(0,e._)`${L}${(0,n.callValidateCode)(d,C,z,G)}`,h.modifying)}function B(L){var z;p.if((0,e.not)((z=h.valid)!==null&&z!==void 0?z:S),L)}}Xd.funcKeywordCode=o;function s(d){const{gen:h,data:m,it:p}=d;h.if(p.parentData,()=>h.assign(m,(0,e._)`${p.parentData}[${p.parentDataProperty}]`))}function a(d,h){const{gen:m}=d;m.if((0,e._)`Array.isArray(${h})`,()=>{m.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,m){if(m===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof m=="function"?{ref:m}:{ref:m,code:(0,e.stringify)(m)})}function c(d,h,m=!1){return!h.length||h.some(p=>p==="array"?Array.isArray(d):p==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==p||m&&typeof d>"u")}Xd.validSchemaType=c;function f({schema:d,opts:h,self:m,errSchemaPath:p},g,v){if(Array.isArray(g.keyword)?!g.keyword.includes(v):g.keyword!==v)throw new Error("ajv implementation error");const b=g.dependencies;if(b!=null&&b.some(w=>!Object.prototype.hasOwnProperty.call(d,w)))throw new Error(`parent schema must have dependencies of ${v}: ${b.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[v])){const E=`keyword "${v}" value is invalid at path "${p}": `+m.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")m.logger.error(E);else throw new Error(E)}}return Xd.validateKeywordUsage=f,Xd}var C0={},$me;function yGt(){if($me)return C0;$me=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.extendSubschemaMode=C0.extendSubschemaData=C0.getSubschema=void 0;const e=_r(),t=ii();function n(o,{keyword:s,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(s!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(s!==void 0){const d=o.schema[s];return a===void 0?{schema:d,schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(s)}`,errSchemaPath:`${o.errSchemaPath}/${s}`}:{schema:d[a],schemaPath:(0,e._)`${o.schemaPath}${(0,e.getProperty)(s)}${(0,e.getProperty)(a)}`,errSchemaPath:`${o.errSchemaPath}/${s}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}C0.getSubschema=n;function r(o,s,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=s;if(a!==void 0){const{errorPath:m,dataPathArr:p,opts:g}=s,v=d.let("data",(0,e._)`${s.data}${(0,e.getProperty)(a)}`,!0);h(v),o.errorPath=(0,e.str)`${m}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,o.parentDataProperty=(0,e._)`${a}`,o.dataPathArr=[...p,o.parentDataProperty]}if(l!==void 0){const m=l instanceof e.Name?l:d.let("data",l,!0);h(m),f!==void 0&&(o.propertyName=f)}c&&(o.dataTypes=c);function h(m){o.data=m,o.dataLevel=s.dataLevel+1,o.dataTypes=[],s.definedProperties=new Set,o.parentData=s.data,o.dataNames=[...s.dataNames,m]}}C0.extendSubschemaData=r;function i(o,{jtdDiscriminator:s,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(o.compositeRule=u),l!==void 0&&(o.createErrors=l),c!==void 0&&(o.allErrors=c),o.jtdDiscriminator=s,o.jtdMetadata=a}return C0.extendSubschemaMode=i,C0}var ul={},yz={exports:{}},Lme;function vGt(){if(Lme)return yz.exports;Lme=1;var e=yz.exports=function(r,i,o){typeof i=="function"&&(o=i,i={}),o=i.cb||o;var s=typeof o=="function"?o:o.pre||function(){},a=o.post||function(){};t(i,s,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,o,s,a,u,l,c,f,d){if(s&&typeof s=="object"&&!Array.isArray(s)){i(s,a,u,l,c,f,d);for(var h in s){var m=s[h];if(Array.isArray(m)){if(h in e.arrayKeywords)for(var p=0;p<m.length;p++)t(r,i,o,m[p],a+"/"+h+"/"+p,u,a,h,s,p)}else if(h in e.propsKeywords){if(m&&typeof m=="object")for(var g in m)t(r,i,o,m[g],a+"/"+h+"/"+n(g),u,a,h,s,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,o,m,a+"/"+h,u,a,h,s)}o(s,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return yz.exports}var Bme;function UL(){if(Bme)return ul;Bme=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.getSchemaRefs=ul.resolveUrl=ul.normalizeId=ul._getFullPath=ul.getFullPath=ul.inlineRef=void 0;const e=ii(),t=PK(),n=vGt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(p,g=!0){return typeof p=="boolean"?!0:g===!0?!s(p):g?a(p)<=g:!1}ul.inlineRef=i;const o=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function s(p){for(const g in p){if(o.has(g))return!0;const v=p[g];if(Array.isArray(v)&&v.some(s)||typeof v=="object"&&s(v))return!0}return!1}function a(p){let g=0;for(const v in p){if(v==="$ref")return 1/0;if(g++,!r.has(v)&&(typeof p[v]=="object"&&(0,e.eachItem)(p[v],b=>g+=a(b)),g===1/0))return 1/0}return g}function u(p,g="",v){v!==!1&&(g=f(g));const b=p.parse(g);return l(p,b)}ul.getFullPath=u;function l(p,g){return p.serialize(g).split("#")[0]+"#"}ul._getFullPath=l;const c=/#\/?$/;function f(p){return p?p.replace(c,""):""}ul.normalizeId=f;function d(p,g,v){return v=f(v),p.resolve(g,v)}ul.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function m(p,g){if(typeof p=="boolean")return{};const{schemaId:v,uriResolver:b}=this.opts,w=f(p[v]||g),E={"":w},T=u(b,w,!1),C={},S=new Set;return n(p,{allKeys:!0},(P,M,B,L)=>{if(L===void 0)return;const z=T+M;let G=E[L];typeof P[v]=="string"&&(G=W.call(this,P[v])),te.call(this,P.$anchor),te.call(this,P.$dynamicAnchor),E[M]=G;function W(Z){const re=this.opts.uriResolver.resolve;if(Z=f(G?re(G,Z):Z),S.has(Z))throw R(Z);S.add(Z);let q=this.refs[Z];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?I(P,q.schema,Z):Z!==f(z)&&(Z[0]==="#"?(I(P,C[Z],Z),C[Z]=P):this.refs[Z]=z),Z}function te(Z){if(typeof Z=="string"){if(!h.test(Z))throw new Error(`invalid anchor "${Z}"`);W.call(this,`#${Z}`)}}}),C;function I(P,M,B){if(M!==void 0&&!t(P,M))throw R(B)}function R(P){return new Error(`reference "${P}" resolves to more than one schema`)}}return ul.getSchemaRefs=m,ul}var jme;function VL(){if(jme)return E0;jme=1,Object.defineProperty(E0,"__esModule",{value:!0}),E0.getData=E0.KeywordCxt=E0.validateFunctionCode=void 0;const e=pGt(),t=YM(),n=uOe(),r=YM(),i=mGt(),o=gGt(),s=yGt(),a=_r(),u=Cv(),l=UL(),c=ii(),f=zL();function d(me){if(T(me)&&(S(me),E(me))){g(me);return}h(me,()=>(0,e.topBoolOrEmptySchema)(me))}E0.validateFunctionCode=d;function h({gen:me,validateName:he,schema:Fe,schemaEnv:Pe,opts:Je},ut){Je.code.es5?me.func(he,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Pe.$async,()=>{me.code((0,a._)`"use strict"; ${b(Fe,Je)}`),p(me,Je),me.code(ut)}):me.func(he,(0,a._)`${u.default.data}, ${m(Je)}`,Pe.$async,()=>me.code(b(Fe,Je)).code(ut))}function m(me){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${me.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function p(me,he){me.if(u.default.valCxt,()=>{me.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),me.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),me.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),me.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),he.dynamicRef&&me.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{me.var(u.default.instancePath,(0,a._)`""`),me.var(u.default.parentData,(0,a._)`undefined`),me.var(u.default.parentDataProperty,(0,a._)`undefined`),me.var(u.default.rootData,u.default.data),he.dynamicRef&&me.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(me){const{schema:he,opts:Fe,gen:Pe}=me;h(me,()=>{Fe.$comment&&he.$comment&&L(me),P(me),Pe.let(u.default.vErrors,null),Pe.let(u.default.errors,0),Fe.unevaluated&&v(me),I(me),z(me)})}function v(me){const{gen:he,validateName:Fe}=me;me.evaluated=he.const("evaluated",(0,a._)`${Fe}.evaluated`),he.if((0,a._)`${me.evaluated}.dynamicProps`,()=>he.assign((0,a._)`${me.evaluated}.props`,(0,a._)`undefined`)),he.if((0,a._)`${me.evaluated}.dynamicItems`,()=>he.assign((0,a._)`${me.evaluated}.items`,(0,a._)`undefined`))}function b(me,he){const Fe=typeof me=="object"&&me[he.schemaId];return Fe&&(he.code.source||he.code.process)?(0,a._)`/*# sourceURL=${Fe} */`:a.nil}function w(me,he){if(T(me)&&(S(me),E(me))){C(me,he);return}(0,e.boolOrEmptySchema)(me,he)}function E({schema:me,self:he}){if(typeof me=="boolean")return!me;for(const Fe in me)if(he.RULES.all[Fe])return!0;return!1}function T(me){return typeof me.schema!="boolean"}function C(me,he){const{schema:Fe,gen:Pe,opts:Je}=me;Je.$comment&&Fe.$comment&&L(me),M(me),B(me);const ut=Pe.const("_errs",u.default.errors);I(me,ut),Pe.var(he,(0,a._)`${ut} === ${u.default.errors}`)}function S(me){(0,c.checkUnknownRules)(me),R(me)}function I(me,he){if(me.opts.jtd)return W(me,[],!1,he);const Fe=(0,t.getSchemaTypes)(me.schema),Pe=(0,t.coerceAndCheckDataType)(me,Fe);W(me,Fe,!Pe,he)}function R(me){const{schema:he,errSchemaPath:Fe,opts:Pe,self:Je}=me;he.$ref&&Pe.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(he,Je.RULES)&&Je.logger.warn(`$ref: keywords ignored in schema at path "${Fe}"`)}function P(me){const{schema:he,opts:Fe}=me;he.default!==void 0&&Fe.useDefaults&&Fe.strictSchema&&(0,c.checkStrictMode)(me,"default is ignored in the schema root")}function M(me){const he=me.schema[me.opts.schemaId];he&&(me.baseId=(0,l.resolveUrl)(me.opts.uriResolver,me.baseId,he))}function B(me){if(me.schema.$async&&!me.schemaEnv.$async)throw new Error("async schema in sync schema")}function L({gen:me,schemaEnv:he,schema:Fe,errSchemaPath:Pe,opts:Je}){const ut=Fe.$comment;if(Je.$comment===!0)me.code((0,a._)`${u.default.self}.logger.log(${ut})`);else if(typeof Je.$comment=="function"){const Ke=(0,a.str)`${Pe}/$comment`,tt=me.scopeValue("root",{ref:he.root});me.code((0,a._)`${u.default.self}.opts.$comment(${ut}, ${Ke}, ${tt}.schema)`)}}function z(me){const{gen:he,schemaEnv:Fe,validateName:Pe,ValidationError:Je,opts:ut}=me;Fe.$async?he.if((0,a._)`${u.default.errors} === 0`,()=>he.return(u.default.data),()=>he.throw((0,a._)`new ${Je}(${u.default.vErrors})`)):(he.assign((0,a._)`${Pe}.errors`,u.default.vErrors),ut.unevaluated&&G(me),he.return((0,a._)`${u.default.errors} === 0`))}function G({gen:me,evaluated:he,props:Fe,items:Pe}){Fe instanceof a.Name&&me.assign((0,a._)`${he}.props`,Fe),Pe instanceof a.Name&&me.assign((0,a._)`${he}.items`,Pe)}function W(me,he,Fe,Pe){const{gen:Je,schema:ut,data:Ke,allErrors:tt,opts:pt,self:Dt}=me,{RULES:St}=Dt;if(ut.$ref&&(pt.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(ut,St))){Je.block(()=>Ee(me,"$ref",St.all.$ref.definition));return}pt.jtd||Z(me,he),Je.block(()=>{for(const oe of St.rules)$t(oe);$t(St.post)});function $t(oe){(0,n.shouldUseGroup)(ut,oe)&&(oe.type?(Je.if((0,r.checkDataType)(oe.type,Ke,pt.strictNumbers)),te(me,oe),he.length===1&&he[0]===oe.type&&Fe&&(Je.else(),(0,r.reportTypeError)(me)),Je.endIf()):te(me,oe),tt||Je.if((0,a._)`${u.default.errors} === ${Pe||0}`))}}function te(me,he){const{gen:Fe,schema:Pe,opts:{useDefaults:Je}}=me;Je&&(0,i.assignDefaults)(me,he.type),Fe.block(()=>{for(const ut of he.rules)(0,n.shouldUseRule)(Pe,ut)&&Ee(me,ut.keyword,ut.definition,he.type)})}function Z(me,he){me.schemaEnv.meta||!me.opts.strictTypes||(re(me,he),me.opts.allowUnionTypes||q(me,he),U(me,me.dataTypes))}function re(me,he){if(he.length){if(!me.dataTypes.length){me.dataTypes=he;return}he.forEach(Fe=>{H(me.dataTypes,Fe)||ee(me,`type "${Fe}" not allowed by context "${me.dataTypes.join(",")}"`)}),X(me,he)}}function q(me,he){he.length>1&&!(he.length===2&&he.includes("null"))&&ee(me,"use allowUnionTypes to allow union type keyword")}function U(me,he){const Fe=me.self.RULES.all;for(const Pe in Fe){const Je=Fe[Pe];if(typeof Je=="object"&&(0,n.shouldUseRule)(me.schema,Je)){const{type:ut}=Je.definition;ut.length&&!ut.some(Ke=>Y(he,Ke))&&ee(me,`missing type "${ut.join(",")}" for keyword "${Pe}"`)}}}function Y(me,he){return me.includes(he)||he==="number"&&me.includes("integer")}function H(me,he){return me.includes(he)||he==="integer"&&me.includes("number")}function X(me,he){const Fe=[];for(const Pe of me.dataTypes)H(he,Pe)?Fe.push(Pe):he.includes("integer")&&Pe==="number"&&Fe.push("integer");me.dataTypes=Fe}function ee(me,he){const Fe=me.schemaEnv.baseId+me.errSchemaPath;he+=` at "${Fe}" (strictTypes)`,(0,c.checkStrictMode)(me,he,me.opts.strictTypes)}class le{constructor(he,Fe,Pe){if((0,o.validateKeywordUsage)(he,Fe,Pe),this.gen=he.gen,this.allErrors=he.allErrors,this.keyword=Pe,this.data=he.data,this.schema=he.schema[Pe],this.$data=Fe.$data&&he.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(he,this.schema,Pe,this.$data),this.schemaType=Fe.schemaType,this.parentSchema=he.schema,this.params={},this.it=he,this.def=Fe,this.$data)this.schemaCode=he.gen.const("vSchema",Oe(this.$data,he));else if(this.schemaCode=this.schemaValue,!(0,o.validSchemaType)(this.schema,Fe.schemaType,Fe.allowUndefined))throw new Error(`${Pe} value must be ${JSON.stringify(Fe.schemaType)}`);("code"in Fe?Fe.trackErrors:Fe.errors!==!1)&&(this.errsCount=he.gen.const("_errs",u.default.errors))}result(he,Fe,Pe){this.failResult((0,a.not)(he),Fe,Pe)}failResult(he,Fe,Pe){this.gen.if(he),Pe?Pe():this.error(),Fe?(this.gen.else(),Fe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(he,Fe){this.failResult((0,a.not)(he),void 0,Fe)}fail(he){if(he===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(he),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(he){if(!this.$data)return this.fail(he);const{schemaCode:Fe}=this;this.fail((0,a._)`${Fe} !== undefined && (${(0,a.or)(this.invalid$data(),he)})`)}error(he,Fe,Pe){if(Fe){this.setParams(Fe),this._error(he,Pe),this.setParams({});return}this._error(he,Pe)}_error(he,Fe){(he?f.reportExtraError:f.reportError)(this,this.def.error,Fe)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(he){this.allErrors||this.gen.if(he)}setParams(he,Fe){Fe?Object.assign(this.params,he):this.params=he}block$data(he,Fe,Pe=a.nil){this.gen.block(()=>{this.check$data(he,Pe),Fe()})}check$data(he=a.nil,Fe=a.nil){if(!this.$data)return;const{gen:Pe,schemaCode:Je,schemaType:ut,def:Ke}=this;Pe.if((0,a.or)((0,a._)`${Je} === undefined`,Fe)),he!==a.nil&&Pe.assign(he,!0),(ut.length||Ke.validateSchema)&&(Pe.elseIf(this.invalid$data()),this.$dataError(),he!==a.nil&&Pe.assign(he,!1)),Pe.else()}invalid$data(){const{gen:he,schemaCode:Fe,schemaType:Pe,def:Je,it:ut}=this;return(0,a.or)(Ke(),tt());function Ke(){if(Pe.length){if(!(Fe instanceof a.Name))throw new Error("ajv implementation error");const pt=Array.isArray(Pe)?Pe:[Pe];return(0,a._)`${(0,r.checkDataTypes)(pt,Fe,ut.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function tt(){if(Je.validateSchema){const pt=he.scopeValue("validate$data",{ref:Je.validateSchema});return(0,a._)`!${pt}(${Fe})`}return a.nil}}subschema(he,Fe){const Pe=(0,s.getSubschema)(this.it,he);(0,s.extendSubschemaData)(Pe,this.it,he),(0,s.extendSubschemaMode)(Pe,he);const Je={...this.it,...Pe,items:void 0,props:void 0};return w(Je,Fe),Je}mergeEvaluated(he,Fe){const{it:Pe,gen:Je}=this;Pe.opts.unevaluated&&(Pe.props!==!0&&he.props!==void 0&&(Pe.props=c.mergeEvaluated.props(Je,he.props,Pe.props,Fe)),Pe.items!==!0&&he.items!==void 0&&(Pe.items=c.mergeEvaluated.items(Je,he.items,Pe.items,Fe)))}mergeValidEvaluated(he,Fe){const{it:Pe,gen:Je}=this;if(Pe.opts.unevaluated&&(Pe.props!==!0||Pe.items!==!0))return Je.if(Fe,()=>this.mergeEvaluated(he,a.Name)),!0}}E0.KeywordCxt=le;function Ee(me,he,Fe,Pe){const Je=new le(me,Fe,he);"code"in Fe?Fe.code(Je,Pe):Je.$data&&Fe.validate?(0,o.funcKeywordCode)(Je,Fe):"macro"in Fe?(0,o.macroKeywordCode)(Je,Fe):(Fe.compile||Fe.validate)&&(0,o.funcKeywordCode)(Je,Fe)}const be=/^\/(?:[^~]|~0|~1)*$/,Ce=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Oe(me,{dataLevel:he,dataNames:Fe,dataPathArr:Pe}){let Je,ut;if(me==="")return u.default.rootData;if(me[0]==="/"){if(!be.test(me))throw new Error(`Invalid JSON-pointer: ${me}`);Je=me,ut=u.default.rootData}else{const Dt=Ce.exec(me);if(!Dt)throw new Error(`Invalid JSON-pointer: ${me}`);const St=+Dt[1];if(Je=Dt[2],Je==="#"){if(St>=he)throw new Error(pt("property/index",St));return Pe[he-St]}if(St>he)throw new Error(pt("data",St));if(ut=Fe[he-St],!Je)return ut}let Ke=ut;const tt=Je.split("/");for(const Dt of tt)Dt&&(ut=(0,a._)`${ut}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Dt))}`,Ke=(0,a._)`${Ke} && ${ut}`);return Ke;function pt(Dt,St){return`Cannot access ${Dt} ${St} levels up, current level is ${he}`}}return E0.getData=Oe,E0}var AP={},zme;function Hte(){if(zme)return AP;zme=1,Object.defineProperty(AP,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return AP.default=e,AP}var DP={},Ume;function HL(){if(Ume)return DP;Ume=1,Object.defineProperty(DP,"__esModule",{value:!0});const e=UL();class t extends Error{constructor(r,i,o,s){super(s||`can't resolve reference ${o} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,o),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return DP.default=t,DP}var Yc={},Vme;function qte(){if(Vme)return Yc;Vme=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.resolveSchema=Yc.getCompilingSchema=Yc.resolveRef=Yc.compileSchema=Yc.SchemaEnv=void 0;const e=_r(),t=Hte(),n=Cv(),r=UL(),i=ii(),o=VL();class s{constructor(v){var b;this.refs={},this.dynamicAnchors={};let w;typeof v.schema=="object"&&(w=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(b=v.baseId)!==null&&b!==void 0?b:(0,r.normalizeId)(w==null?void 0:w[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=w==null?void 0:w.$async,this.refs={}}}Yc.SchemaEnv=s;function a(g){const v=c.call(this,g);if(v)return v;const b=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:w,lines:E}=this.opts.code,{ownProperties:T}=this.opts,C=new e.CodeGen(this.scope,{es5:w,lines:E,ownProperties:T});let S;g.$async&&(S=C.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const I=C.scopeName("validate");g.validateName=I;const R={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:I,ValidationError:S,schema:g.schema,schemaEnv:g,rootId:b,baseId:g.baseId||b,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let P;try{this._compilations.add(g),(0,o.validateFunctionCode)(R),C.optimize(this.opts.code.optimize);const M=C.toString();P=`${C.scopeRefs(n.default.scope)}return ${M}`,this.opts.code.process&&(P=this.opts.code.process(P,g));const L=new Function(`${n.default.self}`,`${n.default.scope}`,P)(this,this.scope.get());if(this.scope.value(I,{ref:L}),L.errors=null,L.schema=g.schema,L.schemaEnv=g,g.$async&&(L.$async=!0),this.opts.code.source===!0&&(L.source={validateName:I,validateCode:M,scopeValues:C._values}),this.opts.unevaluated){const{props:z,items:G}=R;L.evaluated={props:z instanceof e.Name?void 0:z,items:G instanceof e.Name?void 0:G,dynamicProps:z instanceof e.Name,dynamicItems:G instanceof e.Name},L.source&&(L.source.evaluated=(0,e.stringify)(L.evaluated))}return g.validate=L,g}catch(M){throw delete g.validate,delete g.validateName,P&&this.logger.error("Error compiling schema, function code:",P),M}finally{this._compilations.delete(g)}}Yc.compileSchema=a;function u(g,v,b){var w;b=(0,r.resolveUrl)(this.opts.uriResolver,v,b);const E=g.refs[b];if(E)return E;let T=d.call(this,g,b);if(T===void 0){const C=(w=g.localRefs)===null||w===void 0?void 0:w[b],{schemaId:S}=this.opts;C&&(T=new s({schema:C,schemaId:S,root:g,baseId:v}))}if(T!==void 0)return g.refs[b]=l.call(this,T)}Yc.resolveRef=u;function l(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const v of this._compilations)if(f(v,g))return v}Yc.getCompilingSchema=c;function f(g,v){return g.schema===v.schema&&g.root===v.root&&g.baseId===v.baseId}function d(g,v){let b;for(;typeof(b=this.refs[v])=="string";)v=b;return b||this.schemas[v]||h.call(this,g,v)}function h(g,v){const b=this.opts.uriResolver.parse(v),w=(0,r._getFullPath)(this.opts.uriResolver,b);let E=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&w===E)return p.call(this,b,g);const T=(0,r.normalizeId)(w),C=this.refs[T]||this.schemas[T];if(typeof C=="string"){const S=h.call(this,g,C);return typeof(S==null?void 0:S.schema)!="object"?void 0:p.call(this,b,S)}if(typeof(C==null?void 0:C.schema)=="object"){if(C.validate||a.call(this,C),T===(0,r.normalizeId)(v)){const{schema:S}=C,{schemaId:I}=this.opts,R=S[I];return R&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,R)),new s({schema:S,schemaId:I,root:g,baseId:E})}return p.call(this,b,C)}}Yc.resolveSchema=h;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function p(g,{baseId:v,schema:b,root:w}){var E;if(((E=g.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const S of g.fragment.slice(1).split("/")){if(typeof b=="boolean")return;const I=b[(0,i.unescapeFragment)(S)];if(I===void 0)return;b=I;const R=typeof b=="object"&&b[this.opts.schemaId];!m.has(S)&&R&&(v=(0,r.resolveUrl)(this.opts.uriResolver,v,R))}let T;if(typeof b!="boolean"&&b.$ref&&!(0,i.schemaHasRulesButRef)(b,this.RULES)){const S=(0,r.resolveUrl)(this.opts.uriResolver,v,b.$ref);T=h.call(this,w,S)}const{schemaId:C}=this.opts;if(T=T||new s({schema:b,schemaId:C,root:w,baseId:v}),T.schema!==T.root.schema)return T}return Yc}const bGt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",xGt="Meta-schema for $data reference (JSON AnySchema extension proposal)",wGt="object",_Gt=["$data"],EGt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},TGt=!1,CGt={$id:bGt,description:xGt,type:wGt,required:_Gt,properties:EGt,additionalProperties:TGt};var kP={},AA={exports:{}},vz,Hme;function SGt(){return Hme||(Hme=1,vz={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),vz}var bz,qme;function AGt(){if(qme)return bz;qme=1;const{HEX:e}=SGt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(p){if(a(p,".")<3)return{host:p,isIPV4:!1};const g=p.match(t)||[],[v]=g;return v?{host:s(v,"."),isIPV4:!0}:{host:p,isIPV4:!1}}function r(p,g=!1){let v="",b=!0;for(const w of p){if(e[w]===void 0)return;w!=="0"&&b===!0&&(b=!1),b||(v+=w)}return g&&v.length===0&&(v="0"),v}function i(p){let g=0;const v={error:!1,address:"",zone:""},b=[],w=[];let E=!1,T=!1,C=!1;function S(){if(w.length){if(E===!1){const I=r(w);if(I!==void 0)b.push(I);else return v.error=!0,!1}w.length=0}return!0}for(let I=0;I<p.length;I++){const R=p[I];if(!(R==="["||R==="]"))if(R===":"){if(T===!0&&(C=!0),!S())break;if(g++,b.push(":"),g>7){v.error=!0;break}I-1>=0&&p[I-1]===":"&&(T=!0);continue}else if(R==="%"){if(!S())break;E=!0}else{w.push(R);continue}}return w.length&&(E?v.zone=w.join(""):C?b.push(w.join("")):b.push(r(w))),v.address=b.join(""),v}function o(p){if(a(p,":")<2)return{host:p,isIPV6:!1};const g=i(p);if(g.error)return{host:p,isIPV6:!1};{let v=g.address,b=g.address;return g.zone&&(v+="%"+g.zone,b+="%25"+g.zone),{host:v,escapedHost:b,isIPV6:!0}}}function s(p,g){let v="",b=!0;const w=p.length;for(let E=0;E<w;E++){const T=p[E];T==="0"&&b?(E+1<=w&&p[E+1]===g||E+1===w)&&(v+=T,b=!1):(T===g?b=!0:b=!1,v+=T)}return v}function a(p,g){let v=0;for(let b=0;b<p.length;b++)p[b]===g&&v++;return v}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(p){const g=[];for(;p.length;)if(p.match(u))p=p.replace(u,"");else if(p.match(l))p=p.replace(l,"/");else if(p.match(c))p=p.replace(c,"/"),g.pop();else if(p==="."||p==="..")p="";else{const v=p.match(f);if(v){const b=v[0];p=p.slice(b.length),g.push(b)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(p,g){const v=g!==!0?escape:unescape;return p.scheme!==void 0&&(p.scheme=v(p.scheme)),p.userinfo!==void 0&&(p.userinfo=v(p.userinfo)),p.host!==void 0&&(p.host=v(p.host)),p.path!==void 0&&(p.path=v(p.path)),p.query!==void 0&&(p.query=v(p.query)),p.fragment!==void 0&&(p.fragment=v(p.fragment)),p}function m(p){const g=[];if(p.userinfo!==void 0&&(g.push(p.userinfo),g.push("@")),p.host!==void 0){let v=unescape(p.host);const b=n(v);if(b.isIPV4)v=b.host;else{const w=o(b.host);w.isIPV6===!0?v=`[${w.escapedHost}]`:v=p.host}g.push(v)}return(typeof p.port=="number"||typeof p.port=="string")&&(g.push(":"),g.push(String(p.port))),g.length?g.join(""):void 0}return bz={recomposeAuthority:m,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:o,stringArrayToHexStripped:r},bz}var xz,Wme;function DGt(){if(Wme)return xz;Wme=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(b){return typeof b.secure=="boolean"?b.secure:String(b.scheme).toLowerCase()==="wss"}function r(b){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b}function i(b){const w=String(b.scheme).toLowerCase()==="https";return(b.port===(w?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}function o(b){return b.secure=n(b),b.resourceName=(b.path||"/")+(b.query?"?"+b.query:""),b.path=void 0,b.query=void 0,b}function s(b){if((b.port===(n(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){const[w,E]=b.resourceName.split("?");b.path=w&&w!=="/"?w:void 0,b.query=E,b.resourceName=void 0}return b.fragment=void 0,b}function a(b,w){if(!b.path)return b.error="URN can not be parsed",b;const E=b.path.match(t);if(E){const T=w.scheme||b.scheme||"urn";b.nid=E[1].toLowerCase(),b.nss=E[2];const C=`${T}:${w.nid||b.nid}`,S=v[C];b.path=void 0,S&&(b=S.parse(b,w))}else b.error=b.error||"URN can not be parsed.";return b}function u(b,w){const E=w.scheme||b.scheme||"urn",T=b.nid.toLowerCase(),C=`${E}:${w.nid||T}`,S=v[C];S&&(b=S.serialize(b,w));const I=b,R=b.nss;return I.path=`${T||w.nid}:${R}`,w.skipEscape=!0,I}function l(b,w){const E=b;return E.uuid=E.nss,E.nss=void 0,!w.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(b){const w=b;return w.nss=(b.uuid||"").toLowerCase(),w}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:o,serialize:s},m={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},v={http:f,https:d,ws:h,wss:m,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return xz=v,xz}var Gme;function kGt(){if(Gme)return AA.exports;Gme=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=AGt(),o=DGt();function s(g,v){return typeof g=="string"?g=c(m(g,v),v):typeof g=="object"&&(g=m(c(g,v),v)),g}function a(g,v,b){const w=Object.assign({scheme:"null"},b),E=u(m(g,w),m(v,w),w,!0);return c(E,{...w,skipEscape:!0})}function u(g,v,b,w){const E={};return w||(g=m(c(g,b),b),v=m(c(v,b),b)),b=b||{},!b.tolerant&&v.scheme?(E.scheme=v.scheme,E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.path?(v.path.charAt(0)==="/"?E.path=n(v.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?E.path="/"+v.path:g.path?E.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+v.path:E.path=v.path,E.path=n(E.path)),E.query=v.query):(E.path=g.path,v.query!==void 0?E.query=v.query:E.query=g.query),E.userinfo=g.userinfo,E.host=g.host,E.port=g.port),E.scheme=g.scheme),E.fragment=v.fragment,E}function l(g,v,b){return typeof g=="string"?(g=unescape(g),g=c(i(m(g,b),!0),{...b,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...b,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=c(i(m(v,b),!0),{...b,skipEscape:!0})):typeof v=="object"&&(v=c(i(v,!0),{...b,skipEscape:!0})),g.toLowerCase()===v.toLowerCase()}function c(g,v){const b={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},w=Object.assign({},v),E=[],T=o[(w.scheme||b.scheme||"").toLowerCase()];T&&T.serialize&&T.serialize(b,w),b.path!==void 0&&(w.skipEscape?b.path=unescape(b.path):(b.path=escape(b.path),b.scheme!==void 0&&(b.path=b.path.split("%3A").join(":")))),w.reference!=="suffix"&&b.scheme&&E.push(b.scheme,":");const C=r(b);if(C!==void 0&&(w.reference!=="suffix"&&E.push("//"),E.push(C),b.path&&b.path.charAt(0)!=="/"&&E.push("/")),b.path!==void 0){let S=b.path;!w.absolutePath&&(!T||!T.absolutePath)&&(S=n(S)),C===void 0&&(S=S.replace(/^\/\//u,"/%2F")),E.push(S)}return b.query!==void 0&&E.push("?",b.query),b.fragment!==void 0&&E.push("#",b.fragment),E.join("")}const f=Array.from({length:127},(g,v)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(v)));function d(g){let v=0;for(let b=0,w=g.length;b<w;++b)if(v=g.charCodeAt(b),v>126||f[v])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function m(g,v){const b=Object.assign({},v),w={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=g.indexOf("%")!==-1;let T=!1;b.reference==="suffix"&&(g=(b.scheme?b.scheme+":":"")+"//"+g);const C=g.match(h);if(C){if(w.scheme=C[1],w.userinfo=C[3],w.host=C[4],w.port=parseInt(C[5],10),w.path=C[6]||"",w.query=C[7],w.fragment=C[8],isNaN(w.port)&&(w.port=C[5]),w.host){const I=t(w.host);if(I.isIPV4===!1){const R=e(I.host);w.host=R.host.toLowerCase(),T=R.isIPV6}else w.host=I.host,T=!0}w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&!w.path&&w.query===void 0?w.reference="same-document":w.scheme===void 0?w.reference="relative":w.fragment===void 0?w.reference="absolute":w.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==w.reference&&(w.error=w.error||"URI is not a "+b.reference+" reference.");const S=o[(b.scheme||w.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!S||!S.unicodeSupport)&&w.host&&(b.domainHost||S&&S.domainHost)&&T===!1&&d(w.host))try{w.host=URL.domainToASCII(w.host.toLowerCase())}catch(I){w.error=w.error||"Host's domain name can not be converted to ASCII: "+I}(!S||S&&!S.skipNormalize)&&(E&&w.scheme!==void 0&&(w.scheme=unescape(w.scheme)),E&&w.host!==void 0&&(w.host=unescape(w.host)),w.path&&w.path.length&&(w.path=escape(unescape(w.path))),w.fragment&&w.fragment.length&&(w.fragment=encodeURI(decodeURIComponent(w.fragment)))),S&&S.parse&&S.parse(w,b)}else w.error=w.error||"URI can not be parsed.";return w}const p={SCHEMES:o,normalize:s,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:m};return AA.exports=p,AA.exports.default=p,AA.exports.fastUri=p,AA.exports}var Yme;function IGt(){if(Yme)return kP;Yme=1,Object.defineProperty(kP,"__esModule",{value:!0});const e=kGt();return e.code='require("ajv/dist/runtime/uri").default',kP.default=e,kP}var Kme;function RGt(){return Kme||(Kme=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=VL();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=_r();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Hte(),i=HL(),o=aOe(),s=qte(),a=_r(),u=UL(),l=YM(),c=ii(),f=CGt,d=IGt(),h=(q,U)=>new RegExp(q,U);h.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],p=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w(q){var U,Y,H,X,ee,le,Ee,be,Ce,Oe,me,he,Fe,Pe,Je,ut,Ke,tt,pt,Dt,St,$t,oe,xe,Re;const pe=q.strict,we=(U=q.code)===null||U===void 0?void 0:U.optimize,ke=we===!0||we===void 0?1:we||0,Ge=(H=(Y=q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&H!==void 0?H:h,Ve=(X=q.uriResolver)!==null&&X!==void 0?X:d.default;return{strictSchema:(le=(ee=q.strictSchema)!==null&&ee!==void 0?ee:pe)!==null&&le!==void 0?le:!0,strictNumbers:(be=(Ee=q.strictNumbers)!==null&&Ee!==void 0?Ee:pe)!==null&&be!==void 0?be:!0,strictTypes:(Oe=(Ce=q.strictTypes)!==null&&Ce!==void 0?Ce:pe)!==null&&Oe!==void 0?Oe:"log",strictTuples:(he=(me=q.strictTuples)!==null&&me!==void 0?me:pe)!==null&&he!==void 0?he:"log",strictRequired:(Pe=(Fe=q.strictRequired)!==null&&Fe!==void 0?Fe:pe)!==null&&Pe!==void 0?Pe:!1,code:q.code?{...q.code,optimize:ke,regExp:Ge}:{optimize:ke,regExp:Ge},loopRequired:(Je=q.loopRequired)!==null&&Je!==void 0?Je:b,loopEnum:(ut=q.loopEnum)!==null&&ut!==void 0?ut:b,meta:(Ke=q.meta)!==null&&Ke!==void 0?Ke:!0,messages:(tt=q.messages)!==null&&tt!==void 0?tt:!0,inlineRefs:(pt=q.inlineRefs)!==null&&pt!==void 0?pt:!0,schemaId:(Dt=q.schemaId)!==null&&Dt!==void 0?Dt:"$id",addUsedSchema:(St=q.addUsedSchema)!==null&&St!==void 0?St:!0,validateSchema:($t=q.validateSchema)!==null&&$t!==void 0?$t:!0,validateFormats:(oe=q.validateFormats)!==null&&oe!==void 0?oe:!0,unicodeRegExp:(xe=q.unicodeRegExp)!==null&&xe!==void 0?xe:!0,int32range:(Re=q.int32range)!==null&&Re!==void 0?Re:!0,uriResolver:Ve}}class E{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...w(U)};const{es5:Y,lines:H}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:p,es5:Y,lines:H}),this.logger=B(U.logger);const X=U.validateFormats;U.validateFormats=!1,this.RULES=(0,o.getRules)(),T.call(this,g,U,"NOT SUPPORTED"),T.call(this,v,U,"DEPRECATED","warn"),this._metaOpts=P.call(this),U.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&R.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),S.call(this),U.validateFormats=X}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:Y,schemaId:H}=this.opts;let X=f;H==="id"&&(X={...f},X.id=X.$id,delete X.$id),Y&&U&&this.addMetaSchema(X,X[H],!1)}defaultMeta(){const{meta:U,schemaId:Y}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[Y]||U:void 0}validate(U,Y){let H;if(typeof U=="string"){if(H=this.getSchema(U),!H)throw new Error(`no schema with key or ref "${U}"`)}else H=this.compile(U);const X=H(Y);return"$async"in H||(this.errors=H.errors),X}compile(U,Y){const H=this._addSchema(U,Y);return H.validate||this._compileSchemaEnv(H)}compileAsync(U,Y){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:H}=this.opts;return X.call(this,U,Y);async function X(Oe,me){await ee.call(this,Oe.$schema);const he=this._addSchema(Oe,me);return he.validate||le.call(this,he)}async function ee(Oe){Oe&&!this.getSchema(Oe)&&await X.call(this,{$ref:Oe},!0)}async function le(Oe){try{return this._compileSchemaEnv(Oe)}catch(me){if(!(me instanceof i.default))throw me;return Ee.call(this,me),await be.call(this,me.missingSchema),le.call(this,Oe)}}function Ee({missingSchema:Oe,missingRef:me}){if(this.refs[Oe])throw new Error(`AnySchema ${Oe} is loaded but ${me} cannot be resolved`)}async function be(Oe){const me=await Ce.call(this,Oe);this.refs[Oe]||await ee.call(this,me.$schema),this.refs[Oe]||this.addSchema(me,Oe,Y)}async function Ce(Oe){const me=this._loading[Oe];if(me)return me;try{return await(this._loading[Oe]=H(Oe))}finally{delete this._loading[Oe]}}}addSchema(U,Y,H,X=this.opts.validateSchema){if(Array.isArray(U)){for(const le of U)this.addSchema(le,void 0,H,X);return this}let ee;if(typeof U=="object"){const{schemaId:le}=this.opts;if(ee=U[le],ee!==void 0&&typeof ee!="string")throw new Error(`schema ${le} must be string`)}return Y=(0,u.normalizeId)(Y||ee),this._checkUnique(Y),this.schemas[Y]=this._addSchema(U,H,Y,X,!0),this}addMetaSchema(U,Y,H=this.opts.validateSchema){return this.addSchema(U,Y,!0,H),this}validateSchema(U,Y){if(typeof U=="boolean")return!0;let H;if(H=U.$schema,H!==void 0&&typeof H!="string")throw new Error("$schema must be a string");if(H=H||this.opts.defaultMeta||this.defaultMeta(),!H)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const X=this.validate(H,U);if(!X&&Y){const ee="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ee);else throw new Error(ee)}return X}getSchema(U){let Y;for(;typeof(Y=C.call(this,U))=="string";)U=Y;if(Y===void 0){const{schemaId:H}=this.opts,X=new s.SchemaEnv({schema:{},schemaId:H});if(Y=s.resolveSchema.call(this,X,U),!Y)return;this.refs[U]=Y}return Y.validate||this._compileSchemaEnv(Y)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Y=C.call(this,U);return typeof Y=="object"&&this._cache.delete(Y.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const Y=U;this._cache.delete(Y);let H=U[this.opts.schemaId];return H&&(H=(0,u.normalizeId)(H),delete this.schemas[H],delete this.refs[H]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const Y of U)this.addKeyword(Y);return this}addKeyword(U,Y){let H;if(typeof U=="string")H=U,typeof Y=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Y.keyword=H);else if(typeof U=="object"&&Y===void 0){if(Y=U,H=Y.keyword,Array.isArray(H)&&!H.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(z.call(this,H,Y),!Y)return(0,c.eachItem)(H,ee=>G.call(this,ee)),this;te.call(this,Y);const X={...Y,type:(0,l.getJSONTypes)(Y.type),schemaType:(0,l.getJSONTypes)(Y.schemaType)};return(0,c.eachItem)(H,X.type.length===0?ee=>G.call(this,ee,X):ee=>X.type.forEach(le=>G.call(this,ee,X,le))),this}getKeyword(U){const Y=this.RULES.all[U];return typeof Y=="object"?Y.definition:!!Y}removeKeyword(U){const{RULES:Y}=this;delete Y.keywords[U],delete Y.all[U];for(const H of Y.rules){const X=H.rules.findIndex(ee=>ee.keyword===U);X>=0&&H.rules.splice(X,1)}return this}addFormat(U,Y){return typeof Y=="string"&&(Y=new RegExp(Y)),this.formats[U]=Y,this}errorsText(U=this.errors,{separator:Y=", ",dataVar:H="data"}={}){return!U||U.length===0?"No errors":U.map(X=>`${H}${X.instancePath} ${X.message}`).reduce((X,ee)=>X+Y+ee)}$dataMetaSchema(U,Y){const H=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const X of Y){const ee=X.split("/").slice(1);let le=U;for(const Ee of ee)le=le[Ee];for(const Ee in H){const be=H[Ee];if(typeof be!="object")continue;const{$data:Ce}=be.definition,Oe=le[Ee];Ce&&Oe&&(le[Ee]=re(Oe))}}return U}_removeAllSchemas(U,Y){for(const H in U){const X=U[H];(!Y||Y.test(H))&&(typeof X=="string"?delete U[H]:X&&!X.meta&&(this._cache.delete(X.schema),delete U[H]))}}_addSchema(U,Y,H,X=this.opts.validateSchema,ee=this.opts.addUsedSchema){let le;const{schemaId:Ee}=this.opts;if(typeof U=="object")le=U[Ee];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let be=this._cache.get(U);if(be!==void 0)return be;H=(0,u.normalizeId)(le||H);const Ce=u.getSchemaRefs.call(this,U,H);return be=new s.SchemaEnv({schema:U,schemaId:Ee,meta:Y,baseId:H,localRefs:Ce}),this._cache.set(be.schema,be),ee&&!H.startsWith("#")&&(H&&this._checkUnique(H),this.refs[H]=be),X&&this.validateSchema(U,!0),be}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):s.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const Y=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,U)}finally{this.opts=Y}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function T(q,U,Y,H="error"){for(const X in q){const ee=X;ee in U&&this.logger[H](`${Y}: option ${X}. ${q[ee]}`)}}function C(q){return q=(0,u.normalizeId)(q),this.schemas[q]||this.refs[q]}function S(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const U in q)this.addSchema(q[U],U)}function I(){for(const q in this.opts.formats){const U=this.opts.formats[q];U&&this.addFormat(q,U)}}function R(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in q){const Y=q[U];Y.keyword||(Y.keyword=U),this.addKeyword(Y)}}function P(){const q={...this.opts};for(const U of m)delete q[U];return q}const M={log(){},warn(){},error(){}};function B(q){if(q===!1)return M;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const L=/^[a-z_$][a-z0-9_$:-]*$/i;function z(q,U){const{RULES:Y}=this;if((0,c.eachItem)(q,H=>{if(Y.keywords[H])throw new Error(`Keyword ${H} is already defined`);if(!L.test(H))throw new Error(`Keyword ${H} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function G(q,U,Y){var H;const X=U==null?void 0:U.post;if(Y&&X)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ee}=this;let le=X?ee.post:ee.rules.find(({type:be})=>be===Y);if(le||(le={type:Y,rules:[]},ee.rules.push(le)),ee.keywords[q]=!0,!U)return;const Ee={keyword:q,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?W.call(this,le,Ee,U.before):le.rules.push(Ee),ee.all[q]=Ee,(H=U.implements)===null||H===void 0||H.forEach(be=>this.addKeyword(be))}function W(q,U,Y){const H=q.rules.findIndex(X=>X.keyword===Y);H>=0?q.rules.splice(H,0,U):(q.rules.push(U),this.logger.warn(`rule ${Y} is not defined`))}function te(q){let{metaSchema:U}=q;U!==void 0&&(q.$data&&this.opts.$data&&(U=re(U)),q.validateSchema=this.compile(U,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function re(q){return{anyOf:[q,Z]}}}(dz)),dz}var IP={},RP={},NP={},Xme;function NGt(){if(Xme)return NP;Xme=1,Object.defineProperty(NP,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return NP.default=e,NP}var Ay={},Qme;function PGt(){if(Qme)return Ay;Qme=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.callRef=Ay.getValidate=void 0;const e=HL(),t=Xh(),n=_r(),r=Cv(),i=qte(),o=ii(),s={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:m,validateName:p,opts:g,self:v}=d,{root:b}=m;if((f==="#"||f==="#/")&&h===b.baseId)return E();const w=i.resolveRef.call(v,b,h,f);if(w===void 0)throw new e.default(d.opts.uriResolver,h,f);if(w instanceof i.SchemaEnv)return T(w);return C(w);function E(){if(m===b)return u(l,p,m,m.$async);const S=c.scopeValue("root",{ref:b});return u(l,(0,n._)`${S}.validate`,b,b.$async)}function T(S){const I=a(l,S);u(l,I,S,S.$async)}function C(S){const I=c.scopeValue("schema",g.code.source===!0?{ref:S,code:(0,n.stringify)(S)}:{ref:S}),R=c.name("valid"),P=l.subschema({schema:S,dataTypes:[],schemaPath:n.nil,topSchemaRef:I,errSchemaPath:f},R);l.mergeEvaluated(P),l.ok(R)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}Ay.getValidate=a;function u(l,c,f,d){const{gen:h,it:m}=l,{allErrors:p,schemaEnv:g,opts:v}=m,b=v.passContext?r.default.this:n.nil;d?w():E();function w(){if(!g.$async)throw new Error("async schema referenced by sync schema");const S=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,b)}`),C(c),p||h.assign(S,!0)},I=>{h.if((0,n._)`!(${I} instanceof ${m.ValidationError})`,()=>h.throw(I)),T(I),p||h.assign(S,!1)}),l.ok(S)}function E(){l.result((0,t.callValidateCode)(l,c,b),()=>C(c),()=>T(c))}function T(S){const I=(0,n._)`${S}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${I} : ${r.default.vErrors}.concat(${I})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function C(S){var I;if(!m.opts.unevaluated)return;const R=(I=f==null?void 0:f.validate)===null||I===void 0?void 0:I.evaluated;if(m.props!==!0)if(R&&!R.dynamicProps)R.props!==void 0&&(m.props=o.mergeEvaluated.props(h,R.props,m.props));else{const P=h.var("props",(0,n._)`${S}.evaluated.props`);m.props=o.mergeEvaluated.props(h,P,m.props,n.Name)}if(m.items!==!0)if(R&&!R.dynamicItems)R.items!==void 0&&(m.items=o.mergeEvaluated.items(h,R.items,m.items));else{const P=h.var("items",(0,n._)`${S}.evaluated.items`);m.items=o.mergeEvaluated.items(h,P,m.items,n.Name)}}}return Ay.callRef=u,Ay.default=s,Ay}var Jme;function OGt(){if(Jme)return RP;Jme=1,Object.defineProperty(RP,"__esModule",{value:!0});const e=NGt(),t=PGt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return RP.default=n,RP}var PP={},OP={},Zme;function FGt(){if(Zme)return OP;Zme=1,Object.defineProperty(OP,"__esModule",{value:!0});const e=_r(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:o,schemaCode:s})=>(0,e.str)`must be ${n[o].okStr} ${s}`,params:({keyword:o,schemaCode:s})=>(0,e._)`{comparison: ${n[o].okStr}, limit: ${s}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(o){const{keyword:s,data:a,schemaCode:u}=o;o.fail$data((0,e._)`${a} ${n[s].fail} ${u} || isNaN(${a})`)}};return OP.default=i,OP}var FP={},e0e;function MGt(){if(e0e)return FP;e0e=1,Object.defineProperty(FP,"__esModule",{value:!0});const e=_r(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:o,schemaCode:s,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${s} === 0 || (${l} = ${o}/${s}, ${c}))`)}};return FP.default=n,FP}var MP={},$P={},t0e;function $Gt(){if(t0e)return $P;t0e=1,Object.defineProperty($P,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,o;for(;i<n;)r++,o=t.charCodeAt(i++),o>=55296&&o<=56319&&i<n&&(o=t.charCodeAt(i),(o&64512)===56320&&i++);return r}return $P.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',$P}var n0e;function LGt(){if(n0e)return MP;n0e=1,Object.defineProperty(MP,"__esModule",{value:!0});const e=_r(),t=ii(),n=$Gt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:o,schemaCode:s}){const a=o==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${s} characters`},params:({schemaCode:o})=>(0,e._)`{limit: ${o}}`},code(o){const{keyword:s,data:a,schemaCode:u,it:l}=o,c=s==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(o.gen,n.default)}(${a})`;o.fail$data((0,e._)`${f} ${c} ${u}`)}};return MP.default=i,MP}var LP={},r0e;function BGt(){if(r0e)return LP;r0e=1,Object.defineProperty(LP,"__esModule",{value:!0});const e=Xh(),t=_r(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:o,$data:s,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=s?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${o})`)}};return LP.default=r,LP}var BP={},i0e;function jGt(){if(i0e)return BP;i0e=1,Object.defineProperty(BP,"__esModule",{value:!0});const e=_r(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const o=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:o,schemaCode:s}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${o}).length ${a} ${s}`)}};return BP.default=n,BP}var jP={},o0e;function zGt(){if(o0e)return jP;o0e=1,Object.defineProperty(jP,"__esModule",{value:!0});const e=Xh(),t=_r(),n=ii(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:o}})=>(0,t.str)`must have required property '${o}'`,params:({params:{missingProperty:o}})=>(0,t._)`{missingProperty: ${o}}`},code(o){const{gen:s,schema:a,schemaCode:u,data:l,$data:c,it:f}=o,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?m():p(),d.strictRequired){const b=o.parentSchema.properties,{definedProperties:w}=o.it;for(const E of a)if((b==null?void 0:b[E])===void 0&&!w.has(E)){const T=f.schemaEnv.baseId+f.errSchemaPath,C=`required property "${E}" is not defined at "${T}" (strictRequired)`;(0,n.checkStrictMode)(f,C,f.opts.strictRequired)}}function m(){if(h||c)o.block$data(t.nil,g);else for(const b of a)(0,e.checkReportMissingProp)(o,b)}function p(){const b=s.let("missing");if(h||c){const w=s.let("valid",!0);o.block$data(w,()=>v(b,w)),o.ok(w)}else s.if((0,e.checkMissingProp)(o,a,b)),(0,e.reportMissingProp)(o,b),s.else()}function g(){s.forOf("prop",u,b=>{o.setParams({missingProperty:b}),s.if((0,e.noPropertyInData)(s,l,b,d.ownProperties),()=>o.error())})}function v(b,w){o.setParams({missingProperty:b}),s.forOf(b,u,()=>{s.assign(w,(0,e.propertyInData)(s,l,b,d.ownProperties)),s.if((0,t.not)(w),()=>{o.error(),s.break()})},t.nil)}}};return jP.default=i,jP}var zP={},s0e;function UGt(){if(s0e)return zP;s0e=1,Object.defineProperty(zP,"__esModule",{value:!0});const e=_r(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const o=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${o} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:o,schemaCode:s}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${o}.length ${a} ${s}`)}};return zP.default=n,zP}var UP={},VP={},a0e;function Wte(){if(a0e)return VP;a0e=1,Object.defineProperty(VP,"__esModule",{value:!0});const e=PK();return e.code='require("ajv/dist/runtime/equal").default',VP.default=e,VP}var u0e;function VGt(){if(u0e)return UP;u0e=1,Object.defineProperty(UP,"__esModule",{value:!0});const e=YM(),t=_r(),n=ii(),r=Wte(),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:s,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${s} are identical)`,params:({params:{i:s,j:a}})=>(0,t._)`{i: ${s}, j: ${a}}`},code(s){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=s;if(!l&&!c)return;const m=a.let("valid"),p=f.items?(0,e.getSchemaTypes)(f.items):[];s.block$data(m,g,(0,t._)`${d} === false`),s.ok(m);function g(){const E=a.let("i",(0,t._)`${u}.length`),T=a.let("j");s.setParams({i:E,j:T}),a.assign(m,!0),a.if((0,t._)`${E} > 1`,()=>(v()?b:w)(E,T))}function v(){return p.length>0&&!p.some(E=>E==="object"||E==="array")}function b(E,T){const C=a.name("item"),S=(0,e.checkDataTypes)(p,C,h.opts.strictNumbers,e.DataType.Wrong),I=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(C,(0,t._)`${u}[${E}]`),a.if(S,(0,t._)`continue`),p.length>1&&a.if((0,t._)`typeof ${C} == "string"`,(0,t._)`${C} += "_"`),a.if((0,t._)`typeof ${I}[${C}] == "number"`,()=>{a.assign(T,(0,t._)`${I}[${C}]`),s.error(),a.assign(m,!1).break()}).code((0,t._)`${I}[${C}] = ${E}`)})}function w(E,T){const C=(0,n.useFunc)(a,r.default),S=a.name("outer");a.label(S).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${T} = ${E}; ${T}--;`,()=>a.if((0,t._)`${C}(${u}[${E}], ${u}[${T}])`,()=>{s.error(),a.assign(m,!1).break(S)})))}}};return UP.default=o,UP}var HP={},l0e;function HGt(){if(l0e)return HP;l0e=1,Object.defineProperty(HP,"__esModule",{value:!0});const e=_r(),t=ii(),n=Wte(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:o})=>(0,e._)`{allowedValue: ${o}}`},code(o){const{gen:s,data:a,$data:u,schemaCode:l,schema:c}=o;u||c&&typeof c=="object"?o.fail$data((0,e._)`!${(0,t.useFunc)(s,n.default)}(${a}, ${l})`):o.fail((0,e._)`${c} !== ${a}`)}};return HP.default=i,HP}var qP={},c0e;function qGt(){if(c0e)return qP;c0e=1,Object.defineProperty(qP,"__esModule",{value:!0});const e=_r(),t=ii(),n=Wte(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:o})=>(0,e._)`{allowedValues: ${o}}`},code(o){const{gen:s,data:a,$data:u,schema:l,schemaCode:c,it:f}=o;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const m=()=>h??(h=(0,t.useFunc)(s,n.default));let p;if(d||u)p=s.let("valid"),o.block$data(p,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const b=s.const("vSchema",c);p=(0,e.or)(...l.map((w,E)=>v(b,E)))}o.pass(p);function g(){s.assign(p,!1),s.forOf("v",c,b=>s.if((0,e._)`${m()}(${a}, ${b})`,()=>s.assign(p,!0).break()))}function v(b,w){const E=l[w];return typeof E=="object"&&E!==null?(0,e._)`${m()}(${a}, ${b}[${w}])`:(0,e._)`${a} === ${E}`}}};return qP.default=i,qP}var f0e;function WGt(){if(f0e)return PP;f0e=1,Object.defineProperty(PP,"__esModule",{value:!0});const e=FGt(),t=MGt(),n=LGt(),r=BGt(),i=jGt(),o=zGt(),s=UGt(),a=VGt(),u=HGt(),l=qGt(),c=[e.default,t.default,n.default,r.default,i.default,o.default,s.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return PP.default=c,PP}var WP={},bE={},d0e;function lOe(){if(d0e)return bE;d0e=1,Object.defineProperty(bE,"__esModule",{value:!0}),bE.validateAdditionalItems=void 0;const e=_r(),t=ii(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{parentSchema:s,it:a}=o,{items:u}=s;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(o,u)}};function i(o,s){const{gen:a,schema:u,data:l,keyword:c,it:f}=o;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)o.setParams({len:s.length}),o.pass((0,e._)`${d} <= ${s.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const m=a.var("valid",(0,e._)`${d} <= ${s.length}`);a.if((0,e.not)(m),()=>h(m)),o.ok(m)}function h(m){a.forRange("i",s.length,d,p=>{o.subschema({keyword:c,dataProp:p,dataPropType:t.Type.Num},m),f.allErrors||a.if((0,e.not)(m),()=>a.break())})}}return bE.validateAdditionalItems=i,bE.default=r,bE}var GP={},xE={},h0e;function cOe(){if(h0e)return xE;h0e=1,Object.defineProperty(xE,"__esModule",{value:!0}),xE.validateTuple=void 0;const e=_r(),t=ii(),n=Xh(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(o){const{schema:s,it:a}=o;if(Array.isArray(s))return i(o,"additionalItems",s);a.items=!0,!(0,t.alwaysValidSchema)(a,s)&&o.ok((0,n.validateArray)(o))}};function i(o,s,a=o.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=o;p(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),m=u.const("len",(0,e._)`${c}.length`);a.forEach((g,v)=>{(0,t.alwaysValidSchema)(d,g)||(u.if((0,e._)`${m} > ${v}`,()=>o.subschema({keyword:f,schemaProp:v,dataProp:v},h)),o.ok(h))});function p(g){const{opts:v,errSchemaPath:b}=d,w=a.length,E=w===g.minItems&&(w===g.maxItems||g[s]===!1);if(v.strictTuples&&!E){const T=`"${f}" is ${w}-tuple, but minItems or maxItems/${s} are not specified or different at path "${b}"`;(0,t.checkStrictMode)(d,T,v.strictTuples)}}}return xE.validateTuple=i,xE.default=r,xE}var p0e;function GGt(){if(p0e)return GP;p0e=1,Object.defineProperty(GP,"__esModule",{value:!0});const e=cOe(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return GP.default=t,GP}var YP={},m0e;function YGt(){if(m0e)return YP;m0e=1,Object.defineProperty(YP,"__esModule",{value:!0});const e=_r(),t=ii(),n=Xh(),r=lOe(),o={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{schema:a,parentSchema:u,it:l}=s,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(s,c):s.ok((0,n.validateArray)(s)))}};return YP.default=o,YP}var KP={},g0e;function KGt(){if(g0e)return KP;g0e=1,Object.defineProperty(KP,"__esModule",{value:!0});const e=_r(),t=ii(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:o}})=>o===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${o} valid item(s)`,params:({params:{min:i,max:o}})=>o===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${o}}`},code(i){const{gen:o,schema:s,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const m=o.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,s)){let w=(0,e._)`${m} >= ${c}`;f!==void 0&&(w=(0,e._)`${w} && ${m} <= ${f}`),i.pass(w);return}l.items=!0;const p=o.name("valid");f===void 0&&c===1?v(p,()=>o.if(p,()=>o.break())):c===0?(o.let(p,!0),f!==void 0&&o.if((0,e._)`${u}.length > 0`,g)):(o.let(p,!1),g()),i.result(p,()=>i.reset());function g(){const w=o.name("_valid"),E=o.let("count",0);v(w,()=>o.if(w,()=>b(E)))}function v(w,E){o.forRange("i",0,m,T=>{i.subschema({keyword:"contains",dataProp:T,dataPropType:t.Type.Num,compositeRule:!0},w),E()})}function b(w){o.code((0,e._)`${w}++`),f===void 0?o.if((0,e._)`${w} >= ${c}`,()=>o.assign(p,!0).break()):(o.if((0,e._)`${w} > ${f}`,()=>o.assign(p,!1).break()),c===1?o.assign(p,!0):o.if((0,e._)`${w} >= ${c}`,()=>o.assign(p,!0)))}}};return KP.default=r,KP}var wz={},y0e;function XGt(){return y0e||(y0e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=_r(),n=ii(),r=Xh();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=o(u);s(u,l),a(u,c)}};function o({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function s(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const m in l){const p=l[m];if(p.length===0)continue;const g=(0,r.propertyInData)(c,f,m,d.opts.ownProperties);u.setParams({property:m,depsCount:p.length,deps:p.join(", ")}),d.allErrors?c.if(g,()=>{for(const v of p)(0,r.checkReportMissingProp)(u,v)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,p,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=s;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,m=c.name("valid");for(const p in l)(0,n.alwaysValidSchema)(h,l[p])||(c.if((0,r.propertyInData)(c,f,p,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:p},m);u.mergeValidEvaluated(g,m)},()=>c.var(m,!0)),u.ok(m))}e.validateSchemaDeps=a,e.default=i}(wz)),wz}var XP={},v0e;function QGt(){if(v0e)return XP;v0e=1,Object.defineProperty(XP,"__esModule",{value:!0});const e=_r(),t=ii(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:o,schema:s,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,s))return;const l=o.name("valid");o.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),o.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||o.break()})}),i.ok(l)}};return XP.default=r,XP}var QP={},b0e;function fOe(){if(b0e)return QP;b0e=1,Object.defineProperty(QP,"__esModule",{value:!0});const e=Xh(),t=_r(),n=Cv(),r=ii(),o={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:s})=>(0,t._)`{additionalProperty: ${s.additionalProperty}}`},code(s){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=s;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:m}=d;if(d.props=!0,m.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const p=(0,e.allSchemaProperties)(l.properties),g=(0,e.allSchemaProperties)(l.patternProperties);v(),s.ok((0,t._)`${f} === ${n.default.errors}`);function v(){a.forIn("key",c,C=>{!p.length&&!g.length?E(C):a.if(b(C),()=>E(C))})}function b(C){let S;if(p.length>8){const I=(0,r.schemaRefOrVal)(d,l.properties,"properties");S=(0,e.isOwnProperty)(a,I,C)}else p.length?S=(0,t.or)(...p.map(I=>(0,t._)`${C} === ${I}`)):S=t.nil;return g.length&&(S=(0,t.or)(S,...g.map(I=>(0,t._)`${(0,e.usePattern)(s,I)}.test(${C})`))),(0,t.not)(S)}function w(C){a.code((0,t._)`delete ${c}[${C}]`)}function E(C){if(m.removeAdditional==="all"||m.removeAdditional&&u===!1){w(C);return}if(u===!1){s.setParams({additionalProperty:C}),s.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const S=a.name("valid");m.removeAdditional==="failing"?(T(C,S,!1),a.if((0,t.not)(S),()=>{s.reset(),w(C)})):(T(C,S),h||a.if((0,t.not)(S),()=>a.break()))}}function T(C,S,I){const R={keyword:"additionalProperties",dataProp:C,dataPropType:r.Type.Str};I===!1&&Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1}),s.subschema(R,S)}}};return QP.default=o,QP}var JP={},x0e;function JGt(){if(x0e)return JP;x0e=1,Object.defineProperty(JP,"__esModule",{value:!0});const e=VL(),t=Xh(),n=ii(),r=fOe(),i={keyword:"properties",type:"object",schemaType:"object",code(o){const{gen:s,schema:a,parentSchema:u,data:l,it:c}=o;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const g of f)c.definedProperties.add(g);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(s,(0,n.toHash)(f),c.props));const d=f.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(d.length===0)return;const h=s.name("valid");for(const g of d)m(g)?p(g):(s.if((0,t.propertyInData)(s,l,g,c.opts.ownProperties)),p(g),c.allErrors||s.else().var(h,!0),s.endIf()),o.it.definedProperties.add(g),o.ok(h);function m(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function p(g){o.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return JP.default=i,JP}var ZP={},w0e;function ZGt(){if(w0e)return ZP;w0e=1,Object.defineProperty(ZP,"__esModule",{value:!0});const e=Xh(),t=_r(),n=ii(),r=ii(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(o){const{gen:s,schema:a,data:u,parentSchema:l,it:c}=o,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const m=f.strictSchema&&!f.allowMatchingProperties&&l.properties,p=s.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(s,c.props));const{props:g}=c;v();function v(){for(const E of d)m&&b(E),c.allErrors?w(E):(s.var(p,!0),w(E),s.if(p))}function b(E){for(const T in m)new RegExp(E).test(T)&&(0,n.checkStrictMode)(c,`property ${T} matches pattern ${E} (use allowMatchingProperties)`)}function w(E){s.forIn("key",u,T=>{s.if((0,t._)`${(0,e.usePattern)(o,E)}.test(${T})`,()=>{const C=h.includes(E);C||o.subschema({keyword:"patternProperties",schemaProp:E,dataProp:T,dataPropType:r.Type.Str},p),c.opts.unevaluated&&g!==!0?s.assign((0,t._)`${g}[${T}]`,!0):!C&&!c.allErrors&&s.if((0,t.not)(p),()=>s.break())})})}}};return ZP.default=i,ZP}var e4={},_0e;function eYt(){if(_0e)return e4;_0e=1,Object.defineProperty(e4,"__esModule",{value:!0});const e=ii(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:o}=n;if((0,e.alwaysValidSchema)(o,i)){n.fail();return}const s=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),n.failResult(s,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return e4.default=t,e4}var t4={},E0e;function tYt(){if(E0e)return t4;E0e=1,Object.defineProperty(t4,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Xh().validateUnion,error:{message:"must match a schema in anyOf"}};return t4.default=t,t4}var n4={},T0e;function nYt(){if(T0e)return n4;T0e=1,Object.defineProperty(n4,"__esModule",{value:!0});const e=_r(),t=ii(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:o,schema:s,parentSchema:a,it:u}=i;if(!Array.isArray(s))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=s,c=o.let("valid",!1),f=o.let("passing",null),d=o.name("_valid");i.setParams({passing:f}),o.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((m,p)=>{let g;(0,t.alwaysValidSchema)(u,m)?o.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},d),p>0&&o.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${p}]`).else(),o.if(d,()=>{o.assign(c,!0),o.assign(f,p),g&&i.mergeEvaluated(g,e.Name)})})}}};return n4.default=r,n4}var r4={},C0e;function rYt(){if(C0e)return r4;C0e=1,Object.defineProperty(r4,"__esModule",{value:!0});const e=ii(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:o}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const s=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(o,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},s);n.ok(s),n.mergeEvaluated(l)})}};return r4.default=t,r4}var i4={},S0e;function iYt(){if(S0e)return i4;S0e=1,Object.defineProperty(i4,"__esModule",{value:!0});const e=_r(),t=ii(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:o})=>(0,e.str)`must match "${o.ifClause}" schema`,params:({params:o})=>(0,e._)`{failingKeyword: ${o.ifClause}}`},code(o){const{gen:s,parentSchema:a,it:u}=o;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=s.let("valid",!0),d=s.name("_valid");if(h(),o.reset(),l&&c){const p=s.let("ifClause");o.setParams({ifClause:p}),s.if(d,m("then",p),m("else",p))}else l?s.if(d,m("then")):s.if((0,e.not)(d),m("else"));o.pass(f,()=>o.error(!0));function h(){const p=o.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);o.mergeEvaluated(p)}function m(p,g){return()=>{const v=o.subschema({keyword:p},d);s.assign(f,d),o.mergeValidEvaluated(v,f),g?s.assign(g,(0,e._)`${p}`):o.setParams({ifClause:p})}}}};function i(o,s){const a=o.schema[s];return a!==void 0&&!(0,t.alwaysValidSchema)(o,a)}return i4.default=r,i4}var o4={},A0e;function oYt(){if(A0e)return o4;A0e=1,Object.defineProperty(o4,"__esModule",{value:!0});const e=ii(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return o4.default=t,o4}var D0e;function sYt(){if(D0e)return WP;D0e=1,Object.defineProperty(WP,"__esModule",{value:!0});const e=lOe(),t=GGt(),n=cOe(),r=YGt(),i=KGt(),o=XGt(),s=QGt(),a=fOe(),u=JGt(),l=ZGt(),c=eYt(),f=tYt(),d=nYt(),h=rYt(),m=iYt(),p=oYt();function g(v=!1){const b=[c.default,f.default,d.default,h.default,m.default,p.default,s.default,a.default,o.default,u.default,l.default];return v?b.push(t.default,r.default):b.push(e.default,n.default),b.push(i.default),b}return WP.default=g,WP}var s4={},a4={},k0e;function aYt(){if(k0e)return a4;k0e=1,Object.defineProperty(a4,"__esModule",{value:!0});const e=_r(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:o,data:s,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:m}=c;if(!f.validateFormats)return;a?p():g();function p(){const v=o.scopeValue("formats",{ref:m.formats,code:f.code.formats}),b=o.const("fDef",(0,e._)`${v}[${l}]`),w=o.let("fType"),E=o.let("format");o.if((0,e._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>o.assign(w,(0,e._)`${b}.type || "string"`).assign(E,(0,e._)`${b}.validate`),()=>o.assign(w,(0,e._)`"string"`).assign(E,b)),r.fail$data((0,e.or)(T(),C()));function T(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${E}`}function C(){const S=h.$async?(0,e._)`(${b}.async ? await ${E}(${s}) : ${E}(${s}))`:(0,e._)`${E}(${s})`,I=(0,e._)`(typeof ${E} == "function" ? ${S} : ${E}.test(${s}))`;return(0,e._)`${E} && ${E} !== true && ${w} === ${i} && !${I}`}}function g(){const v=m.formats[u];if(!v){T();return}if(v===!0)return;const[b,w,E]=C(v);b===i&&r.pass(S());function T(){if(f.strictSchema===!1){m.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function C(I){const R=I instanceof RegExp?(0,e.regexpCode)(I):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,P=o.scopeValue("formats",{key:u,ref:I,code:R});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,e._)`${P}.validate`]:["string",I,P]}function S(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${s})`}return typeof w=="function"?(0,e._)`${E}(${s})`:(0,e._)`${E}.test(${s})`}}}};return a4.default=n,a4}var I0e;function uYt(){if(I0e)return s4;I0e=1,Object.defineProperty(s4,"__esModule",{value:!0});const t=[aYt().default];return s4.default=t,s4}var Sb={},R0e;function lYt(){return R0e||(R0e=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.contentVocabulary=Sb.metadataVocabulary=void 0,Sb.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Sb.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Sb}var N0e;function cYt(){if(N0e)return IP;N0e=1,Object.defineProperty(IP,"__esModule",{value:!0});const e=OGt(),t=WGt(),n=sYt(),r=uYt(),i=lYt(),o=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return IP.default=o,IP}var u4={},DA={},P0e;function fYt(){if(P0e)return DA;P0e=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(DA.DiscrError=e={})),DA}var O0e;function dYt(){if(O0e)return u4;O0e=1,Object.defineProperty(u4,"__esModule",{value:!0});const e=_r(),t=fYt(),n=qte(),r=HL(),i=ii(),s={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const m=c.propertyName;if(typeof m!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const p=u.let("valid",!1),g=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(m)}`);u.if((0,e._)`typeof ${g} == "string"`,()=>v(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:m})),a.ok(p);function v(){const E=w();u.if(!1);for(const T in E)u.elseIf((0,e._)`${g} === ${T}`),u.assign(p,b(E[T]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:m}),u.endIf()}function b(E){const T=u.name("valid"),C=a.subschema({keyword:"oneOf",schemaProp:E},T);return a.mergeEvaluated(C,e.Name),T}function w(){var E;const T={},C=I(f);let S=!0;for(let M=0;M<h.length;M++){let B=h[M];if(B!=null&&B.$ref&&!(0,i.schemaHasRulesButRef)(B,d.self.RULES)){const z=B.$ref;if(B=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,z),B instanceof n.SchemaEnv&&(B=B.schema),B===void 0)throw new r.default(d.opts.uriResolver,d.baseId,z)}const L=(E=B==null?void 0:B.properties)===null||E===void 0?void 0:E[m];if(typeof L!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${m}"`);S=S&&(C||I(B)),R(L,M)}if(!S)throw new Error(`discriminator: "${m}" must be required`);return T;function I({required:M}){return Array.isArray(M)&&M.includes(m)}function R(M,B){if(M.const)P(M.const,B);else if(M.enum)for(const L of M.enum)P(L,B);else throw new Error(`discriminator: "properties/${m}" must have "const" or "enum"`)}function P(M,B){if(typeof M!="string"||M in T)throw new Error(`discriminator: "${m}" values must be unique strings`);T[M]=B}}}};return u4.default=s,u4}const hYt="http://json-schema.org/draft-07/schema#",pYt="http://json-schema.org/draft-07/schema#",mYt="Core schema meta-schema",gYt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},yYt=["object","boolean"],vYt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},bYt={$schema:hYt,$id:pYt,title:mYt,definitions:gYt,type:yYt,properties:vYt,default:!0};var F0e;function xYt(){return F0e||(F0e=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=RGt(),r=cYt(),i=dYt(),o=bYt,s=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(o,s):o;this.addMetaSchema(m,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=VL();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=_r();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Hte();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=HL();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(CP,CP.exports)),CP.exports}var wYt=xYt();const Gte=_c(wYt),_Yt="#/definitions/StudyConfig",EYt="http://json-schema.org/draft-07/schema#",TYt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),CYt={$ref:_Yt,$schema:EYt,definitions:TYt},SYt="#/definitions/GlobalConfig",AYt="http://json-schema.org/draft-07/schema#",DYt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},kYt={$ref:SYt,$schema:AYt,definitions:DYt};var xD={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var IYt=xD.exports,M0e;function RYt(){return M0e||(M0e=1,function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,m=1,p=2,g=1,v=2,b=4,w=8,E=16,T=32,C=64,S=128,I=256,R=512,P=30,M="...",B=800,L=16,z=1,G=2,W=3,te=1/0,Z=9007199254740991,re=17976931348623157e292,q=NaN,U=4294967295,Y=U-1,H=U>>>1,X=[["ary",S],["bind",g],["bindKey",v],["curry",w],["curryRight",E],["flip",R],["partial",T],["partialRight",C],["rearg",I]],ee="[object Arguments]",le="[object Array]",Ee="[object AsyncFunction]",be="[object Boolean]",Ce="[object Date]",Oe="[object DOMException]",me="[object Error]",he="[object Function]",Fe="[object GeneratorFunction]",Pe="[object Map]",Je="[object Number]",ut="[object Null]",Ke="[object Object]",tt="[object Promise]",pt="[object Proxy]",Dt="[object RegExp]",St="[object Set]",$t="[object String]",oe="[object Symbol]",xe="[object Undefined]",Re="[object WeakMap]",pe="[object WeakSet]",we="[object ArrayBuffer]",ke="[object DataView]",Ge="[object Float32Array]",Ve="[object Float64Array]",at="[object Int8Array]",rt="[object Int16Array]",ln="[object Int32Array]",xn="[object Uint8Array]",rn="[object Uint8ClampedArray]",bn="[object Uint16Array]",Hn="[object Uint32Array]",$n=/\b__p \+= '';/g,Kr=/\b(__p \+=) '' \+/g,Lr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Br=/&(?:amp|lt|gt|quot|#39);/g,mi=/[&<>"']/g,Er=RegExp(Br.source),Do=RegExp(mi.source),iu=/<%-([\s\S]+?)%>/g,hs=/<%([\s\S]+?)%>/g,Ks=/<%=([\s\S]+?)%>/g,Tr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,li=/^\w*$/,Dr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,no=/[\\^$.*+?()[\]{}|]/g,vr=RegExp(no.source),gi=/^\s+/,ko=/\s/,po=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ko=/\{\n\/\* \[wrapped with (.+)\] \*/,Ea=/,? & /,Sc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pr=/[()=,{}\[\]\/\s]/,ou=/\\(\\)?/g,Ri=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ks=/\w*$/,Xo=/^[-+]0x[0-9a-f]+$/i,Df=/^0b[01]+$/i,Ac=/^\[object .+?Constructor\]$/,Dl=/^0o[0-7]+$/i,kl=/^(?:0|[1-9]\d*)$/,Yu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ku=/($^)/,Is=/['\n\r\u2028\u2029\\]/g,en="\\ud800-\\udfff",Bi="\\u0300-\\u036f",mo="\\ufe20-\\ufe2f",ps="\\u20d0-\\u20ff",Ei=Bi+mo+ps,su="\\u2700-\\u27bf",Dd="a-z\\xdf-\\xf6\\xf8-\\xff",Il="\\xac\\xb1\\xd7\\xf7",Qo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qh="\\u2000-\\u206f",Jo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ue="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",ye=Il+Qo+Qh+Jo,$e="[']",je="["+en+"]",Me="["+ye+"]",lt="["+Ei+"]",wt="\\d+",Tt="["+su+"]",_t="["+Dd+"]",Ot="[^"+en+ye+wt+su+Dd+ue+"]",Wt="\\ud83c[\\udffb-\\udfff]",On="(?:"+lt+"|"+Wt+")",dn="[^"+en+"]",Qn="(?:\\ud83c[\\udde6-\\uddff]){2}",hn="[\\ud800-\\udbff][\\udc00-\\udfff]",lr="["+ue+"]",Io="\\u200d",Ta="(?:"+_t+"|"+Ot+")",Rl="(?:"+lr+"|"+Ot+")",kd="(?:"+$e+"(?:d|ll|m|re|s|t|ve))?",Dc="(?:"+$e+"(?:D|LL|M|RE|S|T|VE))?",Id=On+"?",ms="["+Ae+"]?",Yi="(?:"+Io+"(?:"+[dn,Qn,hn].join("|")+")"+ms+Id+")*",gs="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ca="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kc=ms+Id+Yi,Sa="(?:"+[Tt,Qn,hn].join("|")+")"+kc,au="(?:"+[dn+lt+"?",lt,Qn,hn,je].join("|")+")",Vg=RegExp($e,"g"),Nl=RegExp(lt,"g"),ro=RegExp(Wt+"(?="+Wt+")|"+au+kc,"g"),Sv=RegExp([lr+"?"+_t+"+"+kd+"(?="+[Me,lr,"$"].join("|")+")",Rl+"+"+Dc+"(?="+[Me,lr+Ta,"$"].join("|")+")",lr+"?"+Ta+"+"+kd,lr+"+"+Dc,Ca,gs,wt,Sa].join("|"),"g"),zm=RegExp("["+Io+en+Ei+Ae+"]"),Ic=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hg=-1,cr={};cr[Ge]=cr[Ve]=cr[at]=cr[rt]=cr[ln]=cr[xn]=cr[rn]=cr[bn]=cr[Hn]=!0,cr[ee]=cr[le]=cr[we]=cr[be]=cr[ke]=cr[Ce]=cr[me]=cr[he]=cr[Pe]=cr[Je]=cr[Ke]=cr[Dt]=cr[St]=cr[$t]=cr[Re]=!1;var or={};or[ee]=or[le]=or[we]=or[ke]=or[be]=or[Ce]=or[Ge]=or[Ve]=or[at]=or[rt]=or[ln]=or[Pe]=or[Je]=or[Ke]=or[Dt]=or[St]=or[$t]=or[oe]=or[xn]=or[rn]=or[bn]=or[Hn]=!0,or[me]=or[he]=or[Re]=!1;var Rc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ie={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ze={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},on=parseFloat,Jn=parseInt,br=typeof Bs=="object"&&Bs&&Bs.Object===Object&&Bs,Xr=typeof self=="object"&&self&&self.Object===Object&&self,pn=br||Xr||Function("return this")(),kr=t&&!t.nodeType&&t,jr=kr&&!0&&e&&!e.nodeType&&e,Ro=jr&&jr.exports===kr,uu=Ro&&br.process,Ni=function(){try{var Be=jr&&jr.require&&jr.require("util").types;return Be||uu&&uu.binding&&uu.binding("util")}catch{}}(),If=Ni&&Ni.isArrayBuffer,go=Ni&&Ni.isDate,Pl=Ni&&Ni.isMap,Um=Ni&&Ni.isRegExp,Nc=Ni&&Ni.isSet,Pw=Ni&&Ni.isTypedArray;function ys(Be,ft,Xe){switch(Xe.length){case 0:return Be.call(ft);case 1:return Be.call(ft,Xe[0]);case 2:return Be.call(ft,Xe[0],Xe[1]);case 3:return Be.call(ft,Xe[0],Xe[1],Xe[2])}return Be.apply(ft,Xe)}function Rd(Be,ft,Xe,Xt){for(var jn=-1,zr=Be==null?0:Be.length;++jn<zr;){var No=Be[jn];ft(Xt,No,Xe(No),Be)}return Xt}function Zo(Be,ft){for(var Xe=-1,Xt=Be==null?0:Be.length;++Xe<Xt&&ft(Be[Xe],Xe,Be)!==!1;);return Be}function Vm(Be,ft){for(var Xe=Be==null?0:Be.length;Xe--&&ft(Be[Xe],Xe,Be)!==!1;);return Be}function Hm(Be,ft){for(var Xe=-1,Xt=Be==null?0:Be.length;++Xe<Xt;)if(!ft(Be[Xe],Xe,Be))return!1;return!0}function Ol(Be,ft){for(var Xe=-1,Xt=Be==null?0:Be.length,jn=0,zr=[];++Xe<Xt;){var No=Be[Xe];ft(No,Xe,Be)&&(zr[jn++]=No)}return zr}function qm(Be,ft){var Xe=Be==null?0:Be.length;return!!Xe&&Nd(Be,ft,0)>-1}function Jh(Be,ft,Xe){for(var Xt=-1,jn=Be==null?0:Be.length;++Xt<jn;)if(Xe(ft,Be[Xt]))return!0;return!1}function oi(Be,ft){for(var Xe=-1,Xt=Be==null?0:Be.length,jn=Array(Xt);++Xe<Xt;)jn[Xe]=ft(Be[Xe],Xe,Be);return jn}function Pc(Be,ft){for(var Xe=-1,Xt=ft.length,jn=Be.length;++Xe<Xt;)Be[jn+Xe]=ft[Xe];return Be}function Oc(Be,ft,Xe,Xt){var jn=-1,zr=Be==null?0:Be.length;for(Xt&&zr&&(Xe=Be[++jn]);++jn<zr;)Xe=ft(Xe,Be[jn],jn,Be);return Xe}function Ow(Be,ft,Xe,Xt){var jn=Be==null?0:Be.length;for(Xt&&jn&&(Xe=Be[--jn]);jn--;)Xe=ft(Xe,Be[jn],jn,Be);return Xe}function qg(Be,ft){for(var Xe=-1,Xt=Be==null?0:Be.length;++Xe<Xt;)if(ft(Be[Xe],Xe,Be))return!0;return!1}var Fw=ne("length");function Av(Be){return Be.split("")}function Wg(Be){return Be.match(Sc)||[]}function Xs(Be,ft,Xe){var Xt;return Xe(Be,function(jn,zr,No){if(ft(jn,zr,No))return Xt=zr,!1}),Xt}function Wm(Be,ft,Xe,Xt){for(var jn=Be.length,zr=Xe+(Xt?1:-1);Xt?zr--:++zr<jn;)if(ft(Be[zr],zr,Be))return zr;return-1}function Nd(Be,ft,Xe){return ft===ft?$w(Be,ft,Xe):Wm(Be,N,Xe)}function Rf(Be,ft,Xe,Xt){for(var jn=Xe-1,zr=Be.length;++jn<zr;)if(Xt(Be[jn],ft))return jn;return-1}function N(Be){return Be!==Be}function K(Be,ft){var Xe=Be==null?0:Be.length;return Xe?Ut(Be,ft)/Xe:q}function ne(Be){return function(ft){return ft==null?n:ft[Be]}}function ce(Be){return function(ft){return Be==null?n:Be[ft]}}function He(Be,ft,Xe,Xt,jn){return jn(Be,function(zr,No,ci){Xe=Xt?(Xt=!1,zr):ft(Xe,zr,No,ci)}),Xe}function nt(Be,ft){var Xe=Be.length;for(Be.sort(ft);Xe--;)Be[Xe]=Be[Xe].value;return Be}function Ut(Be,ft){for(var Xe,Xt=-1,jn=Be.length;++Xt<jn;){var zr=ft(Be[Xt]);zr!==n&&(Xe=Xe===n?zr:Xe+zr)}return Xe}function Wr(Be,ft){for(var Xe=-1,Xt=Array(Be);++Xe<Be;)Xt[Xe]=ft(Xe);return Xt}function es(Be,ft){return oi(ft,function(Xe){return[Xe,Be[Xe]]})}function xr(Be){return Be&&Be.slice(0,Lw(Be)+1).replace(gi,"")}function Qr(Be){return function(ft){return Be(ft)}}function io(Be,ft){return oi(ft,function(Xe){return Be[Xe]})}function Qs(Be,ft){return Be.has(ft)}function lu(Be,ft){for(var Xe=-1,Xt=Be.length;++Xe<Xt&&Nd(ft,Be[Xe],0)>-1;);return Xe}function Zh(Be,ft){for(var Xe=Be.length;Xe--&&Nd(ft,Be[Xe],0)>-1;);return Xe}function Gg(Be,ft){for(var Xe=Be.length,Xt=0;Xe--;)Be[Xe]===ft&&++Xt;return Xt}var KR=ce(Rc),XR=ce(ve);function QR(Be){return"\\"+Ze[Be]}function Yg(Be,ft){return Be==null?n:Be[ft]}function Kg(Be){return zm.test(Be)}function qL(Be){return Ic.test(Be)}function WL(Be){for(var ft,Xe=[];!(ft=Be.next()).done;)Xe.push(ft.value);return Xe}function Mw(Be){var ft=-1,Xe=Array(Be.size);return Be.forEach(function(Xt,jn){Xe[++ft]=[jn,Xt]}),Xe}function OC(Be,ft){return function(Xe){return Be(ft(Xe))}}function Fl(Be,ft){for(var Xe=-1,Xt=Be.length,jn=0,zr=[];++Xe<Xt;){var No=Be[Xe];(No===ft||No===c)&&(Be[Xe]=c,zr[jn++]=Xe)}return zr}function ep(Be){var ft=-1,Xe=Array(Be.size);return Be.forEach(function(Xt){Xe[++ft]=Xt}),Xe}function GL(Be){var ft=-1,Xe=Array(Be.size);return Be.forEach(function(Xt){Xe[++ft]=[Xt,Xt]}),Xe}function $w(Be,ft,Xe){for(var Xt=Xe-1,jn=Be.length;++Xt<jn;)if(Be[Xt]===ft)return Xt;return-1}function YL(Be,ft,Xe){for(var Xt=Xe+1;Xt--;)if(Be[Xt]===ft)return Xt;return Xt}function Gm(Be){return Kg(Be)?ZR(Be):Fw(Be)}function Xu(Be){return Kg(Be)?eN(Be):Av(Be)}function Lw(Be){for(var ft=Be.length;ft--&&ko.test(Be.charAt(ft)););return ft}var JR=ce(Ie);function ZR(Be){for(var ft=ro.lastIndex=0;ro.test(Be);)++ft;return ft}function eN(Be){return Be.match(ro)||[]}function KL(Be){return Be.match(Sv)||[]}var XL=function Be(ft){ft=ft==null?pn:Xg.defaults(pn.Object(),ft,Xg.pick(pn,kf));var Xe=ft.Array,Xt=ft.Date,jn=ft.Error,zr=ft.Function,No=ft.Math,ci=ft.Object,Dv=ft.RegExp,QL=ft.String,Ml=ft.TypeError,Pd=Xe.prototype,FC=zr.prototype,Nf=ci.prototype,Qg=ft["__core-js_shared__"],kv=FC.toString,Ur=Nf.hasOwnProperty,Jg=0,Bw=function(){var _=/[^.]+$/.exec(Qg&&Qg.keys&&Qg.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Iv=Nf.toString,jw=kv.call(ci),tN=pn._,nN=Dv("^"+kv.call(Ur).replace(no,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rv=Ro?ft.Buffer:n,Od=ft.Symbol,Nv=ft.Uint8Array,MC=Rv?Rv.allocUnsafe:n,Fc=OC(ci.getPrototypeOf,ci),zw=ci.create,Uw=Nf.propertyIsEnumerable,Vw=Pd.splice,rN=Od?Od.isConcatSpreadable:n,Fd=Od?Od.iterator:n,Ym=Od?Od.toStringTag:n,Pv=function(){try{var _=fp(ci,"defineProperty");return _({},"",{}),_}catch{}}(),iN=ft.clearTimeout!==pn.clearTimeout&&ft.clearTimeout,Pi=Xt&&Xt.now!==pn.Date.now&&Xt.now,$C=ft.setTimeout!==pn.setTimeout&&ft.setTimeout,Km=No.ceil,tp=No.floor,Hw=ci.getOwnPropertySymbols,LC=Rv?Rv.isBuffer:n,Zg=ft.isFinite,qw=Pd.join,ey=OC(ci.keys,ci),Po=No.max,Js=No.min,JL=Xt.now,oN=ft.parseInt,Ov=No.random,Ww=Pd.reverse,Fv=fp(ft,"DataView"),Xm=fp(ft,"Map"),Mv=fp(ft,"Promise"),np=fp(ft,"Set"),$v=fp(ft,"WeakMap"),ty=fp(ci,"create"),Gw=$v&&new $v,ny={},BC=dp(Fv),rp=dp(Xm),sN=dp(Mv),ry=dp(np),Pf=dp($v),ip=Od?Od.prototype:n,Qu=ip?ip.valueOf:n,Yw=ip?ip.toString:n;function ae(_){if(Fo(_)&&!tr(_)&&!(_ instanceof er)){if(_ instanceof Zs)return _;if(Ur.call(_,"__wrapped__"))return ON(_)}return new Zs(_)}var iy=function(){function _(){}return function(D){if(!vo(D))return{};if(zw)return zw(D);_.prototype=D;var $=new _;return _.prototype=n,$}}();function Of(){}function Zs(_,D){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!D,this.__index__=0,this.__values__=n}ae.templateSettings={escape:iu,evaluate:hs,interpolate:Ks,variable:"",imports:{_:ae}},ae.prototype=Of.prototype,ae.prototype.constructor=ae,Zs.prototype=iy(Of.prototype),Zs.prototype.constructor=Zs;function er(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function Kw(){var _=new er(this.__wrapped__);return _.__actions__=Da(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=Da(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=Da(this.__views__),_}function jC(){if(this.__filtered__){var _=new er(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function oy(){var _=this.__wrapped__.value(),D=this.__dir__,$=tr(_),J=D<0,ie=$?_.length:0,fe=pS(0,ie,this.__views__),Te=fe.start,Ne=fe.end,ze=Ne-Te,yt=J?Ne:Te-1,bt=this.__iteratees__,kt=bt.length,Kt=0,vn=Js(ze,this.__takeCount__);if(!$||!J&&ie==ze&&vn==ze)return hy(_,this.__actions__);var Ln=[];e:for(;ze--&&Kt<vn;){yt+=D;for(var ur=-1,Bn=_[yt];++ur<kt;){var wr=bt[ur],Rr=wr.iteratee,qc=wr.type,nl=Rr(Bn);if(qc==G)Bn=nl;else if(!nl){if(qc==z)continue e;break e}}Ln[Kt++]=Bn}return Ln}er.prototype=iy(Of.prototype),er.prototype.constructor=er;function cu(_){var D=-1,$=_==null?0:_.length;for(this.clear();++D<$;){var J=_[D];this.set(J[0],J[1])}}function Oi(){this.__data__=ty?ty(null):{},this.size=0}function Ti(_){var D=this.has(_)&&delete this.__data__[_];return this.size-=D?1:0,D}function op(_){var D=this.__data__;if(ty){var $=D[_];return $===u?n:$}return Ur.call(D,_)?D[_]:n}function ea(_){var D=this.__data__;return ty?D[_]!==n:Ur.call(D,_)}function fu(_,D){var $=this.__data__;return this.size+=this.has(_)?0:1,$[_]=ty&&D===n?u:D,this}cu.prototype.clear=Oi,cu.prototype.delete=Ti,cu.prototype.get=op,cu.prototype.has=ea,cu.prototype.set=fu;function Aa(_){var D=-1,$=_==null?0:_.length;for(this.clear();++D<$;){var J=_[D];this.set(J[0],J[1])}}function sy(){this.__data__=[],this.size=0}function du(_){var D=this.__data__,$=na(D,_);if($<0)return!1;var J=D.length-1;return $==J?D.pop():Vw.call(D,$,1),--this.size,!0}function Xw(_){var D=this.__data__,$=na(D,_);return $<0?n:D[$][1]}function aN(_){return na(this.__data__,_)>-1}function uN(_,D){var $=this.__data__,J=na($,_);return J<0?(++this.size,$.push([_,D])):$[J][1]=D,this}Aa.prototype.clear=sy,Aa.prototype.delete=du,Aa.prototype.get=Xw,Aa.prototype.has=aN,Aa.prototype.set=uN;function $l(_){var D=-1,$=_==null?0:_.length;for(this.clear();++D<$;){var J=_[D];this.set(J[0],J[1])}}function lN(){this.size=0,this.__data__={hash:new cu,map:new(Xm||Aa),string:new cu}}function Md(_){var D=Zv(this,_).delete(_);return this.size-=D?1:0,D}function Qw(_){return Zv(this,_).get(_)}function zC(_){return Zv(this,_).has(_)}function cN(_,D){var $=Zv(this,_),J=$.size;return $.set(_,D),this.size+=$.size==J?0:1,this}$l.prototype.clear=lN,$l.prototype.delete=Md,$l.prototype.get=Qw,$l.prototype.has=zC,$l.prototype.set=cN;function Qm(_){var D=-1,$=_==null?0:_.length;for(this.__data__=new $l;++D<$;)this.add(_[D])}function sp(_){return this.__data__.set(_,u),this}function ay(_){return this.__data__.has(_)}Qm.prototype.add=Qm.prototype.push=sp,Qm.prototype.has=ay;function ta(_){var D=this.__data__=new Aa(_);this.size=D.size}function Jw(){this.__data__=new Aa,this.size=0}function Zw(_){var D=this.__data__,$=D.delete(_);return this.size=D.size,$}function Ll(_){return this.__data__.get(_)}function Bl(_){return this.__data__.has(_)}function Jm(_,D){var $=this.__data__;if($ instanceof Aa){var J=$.__data__;if(!Xm||J.length<i-1)return J.push([_,D]),this.size=++$.size,this;$=this.__data__=new $l(J)}return $.set(_,D),this.size=$.size,this}ta.prototype.clear=Jw,ta.prototype.delete=Zw,ta.prototype.get=Ll,ta.prototype.has=Bl,ta.prototype.set=Jm;function Ff(_,D){var $=tr(_),J=!$&&fb(_),ie=!$&&!J&&Ey(_),fe=!$&&!J&&!ie&&H_(_),Te=$||J||ie||fe,Ne=Te?Wr(_.length,QL):[],ze=Ne.length;for(var yt in _)(D||Ur.call(_,yt))&&!(Te&&(yt=="length"||ie&&(yt=="offset"||yt=="parent")||fe&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||zi(yt,ze)))&&Ne.push(yt);return Ne}function Mf(_){var D=_.length;return D?_[fy(0,D-1)]:n}function Zm(_,D){return C_(Da(_),$d(D,0,_.length))}function fN(_){return C_(Da(_))}function Lv(_,D,$){($!==n&&!Gd(_[D],$)||$===n&&!(D in _))&&$f(_,D,$)}function e0(_,D,$){var J=_[D];(!(Ur.call(_,D)&&Gd(J,$))||$===n&&!(D in _))&&$f(_,D,$)}function na(_,D){for(var $=_.length;$--;)if(Gd(_[$][0],D))return $;return-1}function Ju(_,D,$,J){return Bf(_,function(ie,fe,Te){D(J,ie,$(ie),Te)}),J}function Fi(_,D){return _&&$c(D,oa(D),_)}function Mc(_,D){return _&&$c(D,Yl(D),_)}function $f(_,D,$){D=="__proto__"&&Pv?Pv(_,D,{configurable:!0,enumerable:!0,value:$,writable:!0}):_[D]=$}function e_(_,D){for(var $=-1,J=D.length,ie=Xe(J),fe=_==null;++$<J;)ie[$]=fe?n:x9(_,D[$]);return ie}function $d(_,D,$){return _===_&&($!==n&&(_=_<=$?_:$),D!==n&&(_=_>=D?_:D)),_}function hu(_,D,$,J,ie,fe){var Te,Ne=D&f,ze=D&d,yt=D&h;if($&&(Te=ie?$(_,J,ie,fe):$(_)),Te!==n)return Te;if(!vo(_))return _;var bt=tr(_);if(bt){if(Te=tb(_),!Ne)return Da(_,Te)}else{var kt=Ps(_),Kt=kt==he||kt==Fe;if(Ey(_))return nS(_,Ne);if(kt==Ke||kt==ee||Kt&&!ie){if(Te=ze||Kt?{}:Os(_),!Ne)return ze?e9(_,Mc(Te,_)):h_(_,Fi(Te,_))}else{if(!or[kt])return ie?_:{};Te=t9(_,kt,Ne)}}fe||(fe=new ta);var vn=fe.get(_);if(vn)return vn;fe.set(_,Te),Zte(_)?_.forEach(function(Bn){Te.add(hu(Bn,D,$,Bn,_,fe))}):Qte(_)&&_.forEach(function(Bn,wr){Te.set(wr,hu(Bn,D,$,wr,_,fe))});var Ln=yt?ze?Jv:Qv:ze?Yl:oa,ur=bt?n:Ln(_);return Zo(ur||_,function(Bn,wr){ur&&(wr=Bn,Bn=_[wr]),e0(Te,wr,hu(Bn,D,$,wr,_,fe))}),Te}function dN(_){var D=oa(_);return function($){return Bv($,_,D)}}function Bv(_,D,$){var J=$.length;if(_==null)return!J;for(_=ci(_);J--;){var ie=$[J],fe=D[ie],Te=_[ie];if(Te===n&&!(ie in _)||!fe(Te))return!1}return!0}function UC(_,D,$){if(typeof _!="function")throw new Ml(s);return xy(function(){_.apply(n,$)},D)}function Lf(_,D,$,J){var ie=-1,fe=qm,Te=!0,Ne=_.length,ze=[],yt=D.length;if(!Ne)return ze;$&&(D=oi(D,Qr($))),J?(fe=Jh,Te=!1):D.length>=i&&(fe=Qs,Te=!1,D=new Qm(D));e:for(;++ie<Ne;){var bt=_[ie],kt=$==null?bt:$(bt);if(bt=J||bt!==0?bt:0,Te&&kt===kt){for(var Kt=yt;Kt--;)if(D[Kt]===kt)continue e;ze.push(bt)}else fe(D,kt,J)||ze.push(bt)}return ze}var Bf=Hl(Zu),hN=Hl(ap,!0);function jv(_,D){var $=!0;return Bf(_,function(J,ie,fe){return $=!!D(J,ie,fe),$}),$}function t0(_,D,$){for(var J=-1,ie=_.length;++J<ie;){var fe=_[J],Te=D(fe);if(Te!=null&&(Ne===n?Te===Te&&!Hc(Te):$(Te,Ne)))var Ne=Te,ze=fe}return ze}function pN(_,D,$,J){var ie=_.length;for($=ar($),$<0&&($=-$>ie?0:ie+$),J=J===n||J>ie?ie:ar(J),J<0&&(J+=ie),J=$>J?0:tne(J);$<J;)_[$++]=D;return _}function VC(_,D){var $=[];return Bf(_,function(J,ie,fe){D(J,ie,fe)&&$.push(J)}),$}function oo(_,D,$,J,ie){var fe=-1,Te=_.length;for($||($=__),ie||(ie=[]);++fe<Te;){var Ne=_[fe];D>0&&$(Ne)?D>1?oo(Ne,D-1,$,J,ie):Pc(ie,Ne):J||(ie[ie.length]=Ne)}return ie}var t_=m_(),zv=m_(!0);function Zu(_,D){return _&&t_(_,D,oa)}function ap(_,D){return _&&zv(_,D,oa)}function uy(_,D){return Ol(D,function($){return h0(_[$])})}function Ld(_,D){D=Uf(D,_);for(var $=0,J=D.length;_!=null&&$<J;)_=_[zc(D[$++])];return $&&$==J?_:n}function n_(_,D,$){var J=D(_);return tr(_)?J:Pc(J,$(_))}function Rs(_){return _==null?_===n?xe:ut:Ym&&Ym in ci(_)?w_(_):gS(_)}function up(_,D){return _>D}function jl(_,D){return _!=null&&Ur.call(_,D)}function n0(_,D){return _!=null&&D in ci(_)}function HC(_,D,$){return _>=Js(D,$)&&_<Po(D,$)}function r_(_,D,$){for(var J=$?Jh:qm,ie=_[0].length,fe=_.length,Te=fe,Ne=Xe(fe),ze=1/0,yt=[];Te--;){var bt=_[Te];Te&&D&&(bt=oi(bt,Qr(D))),ze=Js(bt.length,ze),Ne[Te]=!$&&(D||ie>=120&&bt.length>=120)?new Qm(Te&&bt):n}bt=_[0];var kt=-1,Kt=Ne[0];e:for(;++kt<ie&&yt.length<ze;){var vn=bt[kt],Ln=D?D(vn):vn;if(vn=$||vn!==0?vn:0,!(Kt?Qs(Kt,Ln):J(yt,Ln,$))){for(Te=fe;--Te;){var ur=Ne[Te];if(!(ur?Qs(ur,Ln):J(_[Te],Ln,$)))continue e}Kt&&Kt.push(Ln),yt.push(vn)}}return yt}function Bd(_,D,$,J){return Zu(_,function(ie,fe,Te){D(J,$(ie),fe,Te)}),J}function zl(_,D,$){D=Uf(D,_),_=vs(_,D);var J=_==null?_:_[zc(Ra(D))];return J==null?n:ys(J,_,$)}function i_(_){return Fo(_)&&Rs(_)==ee}function mN(_){return Fo(_)&&Rs(_)==we}function jd(_){return Fo(_)&&Rs(_)==Ce}function Ul(_,D,$,J,ie){return _===D?!0:_==null||D==null||!Fo(_)&&!Fo(D)?_!==_&&D!==D:o_(_,D,$,J,Ul,ie)}function o_(_,D,$,J,ie,fe){var Te=tr(_),Ne=tr(D),ze=Te?le:Ps(_),yt=Ne?le:Ps(D);ze=ze==ee?Ke:ze,yt=yt==ee?Ke:yt;var bt=ze==Ke,kt=yt==Ke,Kt=ze==yt;if(Kt&&Ey(_)){if(!Ey(D))return!1;Te=!0,bt=!1}if(Kt&&!bt)return fe||(fe=new ta),Te||H_(_)?dS(_,D,$,J,ie,fe):hS(_,D,ze,$,J,ie,fe);if(!($&m)){var vn=bt&&Ur.call(_,"__wrapped__"),Ln=kt&&Ur.call(D,"__wrapped__");if(vn||Ln){var ur=vn?_.value():_,Bn=Ln?D.value():D;return fe||(fe=new ta),ie(ur,Bn,$,J,fe)}}return Kt?(fe||(fe=new ta),SN(_,D,$,J,ie,fe)):!1}function gN(_){return Fo(_)&&Ps(_)==Pe}function ly(_,D,$,J){var ie=$.length,fe=ie,Te=!J;if(_==null)return!fe;for(_=ci(_);ie--;){var Ne=$[ie];if(Te&&Ne[2]?Ne[1]!==_[Ne[0]]:!(Ne[0]in _))return!1}for(;++ie<fe;){Ne=$[ie];var ze=Ne[0],yt=_[ze],bt=Ne[1];if(Te&&Ne[2]){if(yt===n&&!(ze in _))return!1}else{var kt=new ta;if(J)var Kt=J(yt,bt,ze,_,D,kt);if(!(Kt===n?Ul(bt,yt,m|p,J,kt):Kt))return!1}}return!0}function qC(_){if(!vo(_)||kN(_))return!1;var D=h0(_)?nN:Ac;return D.test(dp(_))}function Uv(_){return Fo(_)&&Rs(_)==Dt}function jf(_){return Fo(_)&&Ps(_)==St}function Vv(_){return Fo(_)&&YN(_.length)&&!!cr[Rs(_)]}function cy(_){return typeof _=="function"?_:_==null?Kl:typeof _=="object"?tr(_)?ji(_[0],_[1]):s_(_):dne(_)}function zd(_){if(!qd(_))return ey(_);var D=[];for(var $ in ci(_))Ur.call(_,$)&&$!="constructor"&&D.push($);return D}function WC(_){if(!vo(_))return NN(_);var D=qd(_),$=[];for(var J in _)J=="constructor"&&(D||!Ur.call(_,J))||$.push(J);return $}function lp(_,D){return _<D}function GC(_,D){var $=-1,J=Gl(_)?Xe(_.length):[];return Bf(_,function(ie,fe,Te){J[++$]=D(ie,fe,Te)}),J}function s_(_){var D=eb(_);return D.length==1&&D[0][2]?E_(D[0][0],D[0][1]):function($){return $===_||ly($,_,D)}}function ji(_,D){return tn(_)&&rb(D)?E_(zc(_),D):function($){var J=x9($,_);return J===n&&J===D?w9($,_):Ul(D,J,m|p)}}function r0(_,D,$,J,ie){_!==D&&t_(D,function(fe,Te){if(ie||(ie=new ta),vo(fe))YC(_,D,Te,$,r0,J,ie);else{var Ne=J?J(qf(_,Te),fe,Te+"",_,D,ie):n;Ne===n&&(Ne=fe),Lv(_,Te,Ne)}},Yl)}function YC(_,D,$,J,ie,fe,Te){var Ne=qf(_,$),ze=qf(D,$),yt=Te.get(ze);if(yt){Lv(_,$,yt);return}var bt=fe?fe(Ne,ze,$+"",_,D,Te):n,kt=bt===n;if(kt){var Kt=tr(ze),vn=!Kt&&Ey(ze),Ln=!Kt&&!vn&&H_(ze);bt=ze,Kt||vn||Ln?tr(Ne)?bt=Ne:is(Ne)?bt=Da(Ne):vn?(kt=!1,bt=nS(ze,!0)):Ln?(kt=!1,bt=wN(ze,!0)):bt=[]:OS(ze)||fb(ze)?(bt=Ne,fb(Ne)?bt=nne(Ne):(!vo(Ne)||h0(Ne))&&(bt=Os(ze))):kt=!1}kt&&(Te.set(ze,bt),ie(bt,ze,J,fe,Te),Te.delete(ze)),Lv(_,$,bt)}function a_(_,D){var $=_.length;if($)return D+=D<0?$:0,zi(D,$)?_[D]:n}function Hv(_,D,$){D.length?D=oi(D,function(fe){return tr(fe)?function(Te){return Ld(Te,fe.length===1?fe[0]:fe)}:fe}):D=[Kl];var J=-1;D=oi(D,Qr(In()));var ie=GC(_,function(fe,Te,Ne){var ze=oi(D,function(yt){return yt(fe)});return{criteria:ze,index:++J,value:fe}});return nt(ie,function(fe,Te){return ZL(fe,Te,$)})}function KC(_,D){return cp(_,D,function($,J){return w9(_,J)})}function cp(_,D,$){for(var J=-1,ie=D.length,fe={};++J<ie;){var Te=D[J],Ne=Ld(_,Te);$(Ne,Te)&&o0(fe,Uf(Te,_),Ne)}return fe}function Ki(_){return function(D){return Ld(D,_)}}function yo(_,D,$,J){var ie=J?Rf:Nd,fe=-1,Te=D.length,Ne=_;for(_===D&&(D=Da(D)),$&&(Ne=oi(_,Qr($)));++fe<Te;)for(var ze=0,yt=D[fe],bt=$?$(yt):yt;(ze=ie(Ne,bt,ze,J))>-1;)Ne!==_&&Vw.call(Ne,ze,1),Vw.call(_,ze,1);return _}function ts(_,D){for(var $=_?D.length:0,J=$-1;$--;){var ie=D[$];if($==J||ie!==fe){var fe=ie;zi(ie)?Vw.call(_,ie,1):c_(_,ie)}}return _}function fy(_,D){return _+tp(Ov()*(D-_+1))}function qv(_,D,$,J){for(var ie=-1,fe=Po(Km((D-_)/($||1)),0),Te=Xe(fe);fe--;)Te[J?fe:++ie]=_,_+=$;return Te}function i0(_,D){var $="";if(!_||D<1||D>Z)return $;do D%2&&($+=_),D=tp(D/2),D&&(_+=_);while(D);return $}function sr(_,D){return el(T_(_,D,Kl),_+"")}function ra(_){return Mf(q_(_))}function XC(_,D){var $=q_(_);return C_($,$d(D,0,$.length))}function o0(_,D,$,J){if(!vo(_))return _;D=Uf(D,_);for(var ie=-1,fe=D.length,Te=fe-1,Ne=_;Ne!=null&&++ie<fe;){var ze=zc(D[ie]),yt=$;if(ze==="__proto__"||ze==="constructor"||ze==="prototype")return _;if(ie!=Te){var bt=Ne[ze];yt=J?J(bt,ze,Ne):n,yt===n&&(yt=vo(bt)?bt:zi(D[ie+1])?[]:{})}e0(Ne,ze,yt),Ne=Ne[ze]}return _}var u_=Gw?function(_,D){return Gw.set(_,D),_}:Kl,zf=Pv?function(_,D){return Pv(_,"toString",{configurable:!0,enumerable:!1,value:E9(D),writable:!0})}:Kl;function Vl(_){return C_(q_(_))}function ia(_,D,$){var J=-1,ie=_.length;D<0&&(D=-D>ie?0:ie+D),$=$>ie?ie:$,$<0&&($+=ie),ie=D>$?0:$-D>>>0,D>>>=0;for(var fe=Xe(ie);++J<ie;)fe[J]=_[J+D];return fe}function QC(_,D){var $;return Bf(_,function(J,ie,fe){return $=D(J,ie,fe),!$}),!!$}function dy(_,D,$){var J=0,ie=_==null?J:_.length;if(typeof D=="number"&&D===D&&ie<=H){for(;J<ie;){var fe=J+ie>>>1,Te=_[fe];Te!==null&&!Hc(Te)&&($?Te<=D:Te<D)?J=fe+1:ie=fe}return ie}return l_(_,D,Kl,$)}function l_(_,D,$,J){var ie=0,fe=_==null?0:_.length;if(fe===0)return 0;D=$(D);for(var Te=D!==D,Ne=D===null,ze=Hc(D),yt=D===n;ie<fe;){var bt=tp((ie+fe)/2),kt=$(_[bt]),Kt=kt!==n,vn=kt===null,Ln=kt===kt,ur=Hc(kt);if(Te)var Bn=J||Ln;else yt?Bn=Ln&&(J||Kt):Ne?Bn=Ln&&Kt&&(J||!vn):ze?Bn=Ln&&Kt&&!vn&&(J||!ur):vn||ur?Bn=!1:Bn=J?kt<=D:kt<D;Bn?ie=bt+1:fe=bt}return Js(fe,Y)}function JC(_,D){for(var $=-1,J=_.length,ie=0,fe=[];++$<J;){var Te=_[$],Ne=D?D(Te):Te;if(!$||!Gd(Ne,ze)){var ze=Ne;fe[ie++]=Te===0?0:Te}}return fe}function ZC(_){return typeof _=="number"?_:Hc(_)?q:+_}function pu(_){if(typeof _=="string")return _;if(tr(_))return oi(_,pu)+"";if(Hc(_))return Yw?Yw.call(_):"";var D=_+"";return D=="0"&&1/_==-1/0?"-0":D}function Ud(_,D,$){var J=-1,ie=qm,fe=_.length,Te=!0,Ne=[],ze=Ne;if($)Te=!1,ie=Jh;else if(fe>=i){var yt=D?null:CN(_);if(yt)return ep(yt);Te=!1,ie=Qs,ze=new Qm}else ze=D?[]:Ne;e:for(;++J<fe;){var bt=_[J],kt=D?D(bt):bt;if(bt=$||bt!==0?bt:0,Te&&kt===kt){for(var Kt=ze.length;Kt--;)if(ze[Kt]===kt)continue e;D&&ze.push(kt),Ne.push(bt)}else ie(ze,kt,$)||(ze!==Ne&&ze.push(kt),Ne.push(bt))}return Ne}function c_(_,D){return D=Uf(D,_),_=vs(_,D),_==null||delete _[zc(Ra(D))]}function eS(_,D,$,J){return o0(_,D,$(Ld(_,D)),J)}function Wv(_,D,$,J){for(var ie=_.length,fe=J?ie:-1;(J?fe--:++fe<ie)&&D(_[fe],fe,_););return $?ia(_,J?0:fe,J?fe+1:ie):ia(_,J?fe+1:0,J?ie:fe)}function hy(_,D){var $=_;return $ instanceof er&&($=$.value()),Oc(D,function(J,ie){return ie.func.apply(ie.thisArg,Pc([J],ie.args))},$)}function f_(_,D,$){var J=_.length;if(J<2)return J?Ud(_[0]):[];for(var ie=-1,fe=Xe(J);++ie<J;)for(var Te=_[ie],Ne=-1;++Ne<J;)Ne!=ie&&(fe[ie]=Lf(fe[ie]||Te,_[Ne],D,$));return Ud(oo(fe,1),D,$)}function Gv(_,D,$){for(var J=-1,ie=_.length,fe=D.length,Te={};++J<ie;){var Ne=J<fe?D[J]:n;$(Te,_[J],Ne)}return Te}function py(_){return is(_)?_:[]}function d_(_){return typeof _=="function"?_:Kl}function Uf(_,D){return tr(_)?_:tn(_,D)?[_]:bS(fi(_))}var yN=sr;function Vd(_,D,$){var J=_.length;return $=$===n?J:$,!D&&$>=J?_:ia(_,D,$)}var tS=iN||function(_){return pn.clearTimeout(_)};function nS(_,D){if(D)return _.slice();var $=_.length,J=MC?MC($):new _.constructor($);return _.copy(J),J}function Yv(_){var D=new _.constructor(_.byteLength);return new Nv(D).set(new Nv(_)),D}function vN(_,D){var $=D?Yv(_.buffer):_.buffer;return new _.constructor($,_.byteOffset,_.byteLength)}function bN(_){var D=new _.constructor(_.source,ks.exec(_));return D.lastIndex=_.lastIndex,D}function xN(_){return Qu?ci(Qu.call(_)):{}}function wN(_,D){var $=D?Yv(_.buffer):_.buffer;return new _.constructor($,_.byteOffset,_.length)}function rS(_,D){if(_!==D){var $=_!==n,J=_===null,ie=_===_,fe=Hc(_),Te=D!==n,Ne=D===null,ze=D===D,yt=Hc(D);if(!Ne&&!yt&&!fe&&_>D||fe&&Te&&ze&&!Ne&&!yt||J&&Te&&ze||!$&&ze||!ie)return 1;if(!J&&!fe&&!yt&&_<D||yt&&$&&ie&&!J&&!fe||Ne&&$&&ie||!Te&&ie||!ze)return-1}return 0}function ZL(_,D,$){for(var J=-1,ie=_.criteria,fe=D.criteria,Te=ie.length,Ne=$.length;++J<Te;){var ze=rS(ie[J],fe[J]);if(ze){if(J>=Ne)return ze;var yt=$[J];return ze*(yt=="desc"?-1:1)}}return _.index-D.index}function _N(_,D,$,J){for(var ie=-1,fe=_.length,Te=$.length,Ne=-1,ze=D.length,yt=Po(fe-Te,0),bt=Xe(ze+yt),kt=!J;++Ne<ze;)bt[Ne]=D[Ne];for(;++ie<Te;)(kt||ie<fe)&&(bt[$[ie]]=_[ie]);for(;yt--;)bt[Ne++]=_[ie++];return bt}function iS(_,D,$,J){for(var ie=-1,fe=_.length,Te=-1,Ne=$.length,ze=-1,yt=D.length,bt=Po(fe-Ne,0),kt=Xe(bt+yt),Kt=!J;++ie<bt;)kt[ie]=_[ie];for(var vn=ie;++ze<yt;)kt[vn+ze]=D[ze];for(;++Te<Ne;)(Kt||ie<fe)&&(kt[vn+$[Te]]=_[ie++]);return kt}function Da(_,D){var $=-1,J=_.length;for(D||(D=Xe(J));++$<J;)D[$]=_[$];return D}function $c(_,D,$,J){var ie=!$;$||($={});for(var fe=-1,Te=D.length;++fe<Te;){var Ne=D[fe],ze=J?J($[Ne],_[Ne],Ne,$,_):n;ze===n&&(ze=_[Ne]),ie?$f($,Ne,ze):e0($,Ne,ze)}return $}function h_(_,D){return $c(_,Lc(_),D)}function e9(_,D){return $c(_,AN(_),D)}function p_(_,D){return function($,J){var ie=tr($)?Rd:Ju,fe=D?D():{};return ie($,_,In(J,2),fe)}}function my(_){return sr(function(D,$){var J=-1,ie=$.length,fe=ie>1?$[ie-1]:n,Te=ie>2?$[2]:n;for(fe=_.length>3&&typeof fe=="function"?(ie--,fe):n,Te&&Ia($[0],$[1],Te)&&(fe=ie<3?n:fe,ie=1),D=ci(D);++J<ie;){var Ne=$[J];Ne&&_(D,Ne,J,fe)}return D})}function Hl(_,D){return function($,J){if($==null)return $;if(!Gl($))return _($,J);for(var ie=$.length,fe=D?ie:-1,Te=ci($);(D?fe--:++fe<ie)&&J(Te[fe],fe,Te)!==!1;);return $}}function m_(_){return function(D,$,J){for(var ie=-1,fe=ci(D),Te=J(D),Ne=Te.length;Ne--;){var ze=Te[_?Ne:++ie];if($(fe[ze],ze,fe)===!1)break}return D}}function g_(_,D,$){var J=D&g,ie=gy(_);function fe(){var Te=this&&this!==pn&&this instanceof fe?ie:_;return Te.apply(J?$:this,arguments)}return fe}function oS(_){return function(D){D=fi(D);var $=Kg(D)?Xu(D):n,J=$?$[0]:D.charAt(0),ie=$?Vd($,1).join(""):D.slice(1);return J[_]()+ie}}function s0(_){return function(D){return Oc(cne(lne(D).replace(Vg,"")),_,"")}}function gy(_){return function(){var D=arguments;switch(D.length){case 0:return new _;case 1:return new _(D[0]);case 2:return new _(D[0],D[1]);case 3:return new _(D[0],D[1],D[2]);case 4:return new _(D[0],D[1],D[2],D[3]);case 5:return new _(D[0],D[1],D[2],D[3],D[4]);case 6:return new _(D[0],D[1],D[2],D[3],D[4],D[5]);case 7:return new _(D[0],D[1],D[2],D[3],D[4],D[5],D[6])}var $=iy(_.prototype),J=_.apply($,D);return vo(J)?J:$}}function sS(_,D,$){var J=gy(_);function ie(){for(var fe=arguments.length,Te=Xe(fe),Ne=fe,ze=Hd(ie);Ne--;)Te[Ne]=arguments[Ne];var yt=fe<3&&Te[0]!==ze&&Te[fe-1]!==ze?[]:Fl(Te,ze);if(fe-=yt.length,fe<$)return ka(_,D,yy,ie.placeholder,n,Te,yt,n,n,$-fe);var bt=this&&this!==pn&&this instanceof ie?J:_;return ys(bt,this,Te)}return ie}function a0(_){return function(D,$,J){var ie=ci(D);if(!Gl(D)){var fe=In($,3);D=oa(D),$=function(Ne){return fe(ie[Ne],Ne,ie)}}var Te=_(D,$,J);return Te>-1?ie[fe?D[Te]:Te]:n}}function y_(_){return Hf(function(D){var $=D.length,J=$,ie=Zs.prototype.thru;for(_&&D.reverse();J--;){var fe=D[J];if(typeof fe!="function")throw new Ml(s);if(ie&&!Te&&vy(fe)=="wrapper")var Te=new Zs([],!0)}for(J=Te?J:$;++J<$;){fe=D[J];var Ne=vy(fe),ze=Ne=="wrapper"?x_(fe):n;ze&&nb(ze[0])&&ze[1]==(S|w|T|I)&&!ze[4].length&&ze[9]==1?Te=Te[vy(ze[0])].apply(Te,ze[3]):Te=fe.length==1&&nb(fe)?Te[Ne]():Te.thru(fe)}return function(){var yt=arguments,bt=yt[0];if(Te&&yt.length==1&&tr(bt))return Te.plant(bt).value();for(var kt=0,Kt=$?D[kt].apply(this,yt):bt;++kt<$;)Kt=D[kt].call(this,Kt);return Kt}})}function yy(_,D,$,J,ie,fe,Te,Ne,ze,yt){var bt=D&S,kt=D&g,Kt=D&v,vn=D&(w|E),Ln=D&R,ur=Kt?n:gy(_);function Bn(){for(var wr=arguments.length,Rr=Xe(wr),qc=wr;qc--;)Rr[qc]=arguments[qc];if(vn)var nl=Hd(Bn),Wc=Gg(Rr,nl);if(J&&(Rr=_N(Rr,J,ie,vn)),fe&&(Rr=iS(Rr,fe,Te,vn)),wr-=Wc,vn&&wr<yt){var os=Fl(Rr,nl);return ka(_,D,yy,Bn.placeholder,$,Rr,os,Ne,ze,yt-wr)}var Yd=kt?$:this,m0=Kt?Yd[_]:_;return wr=Rr.length,Ne?Rr=Bc(Rr,Ne):Ln&&wr>1&&Rr.reverse(),bt&&ze<wr&&(Rr.length=ze),this&&this!==pn&&this instanceof Bn&&(m0=ur||gy(m0)),m0.apply(Yd,Rr)}return Bn}function EN(_,D){return function($,J){return Bd($,_,D(J),{})}}function Kv(_,D){return function($,J){var ie;if($===n&&J===n)return D;if($!==n&&(ie=$),J!==n){if(ie===n)return J;typeof $=="string"||typeof J=="string"?($=pu($),J=pu(J)):($=ZC($),J=ZC(J)),ie=_($,J)}return ie}}function v_(_){return Hf(function(D){return D=oi(D,Qr(In())),sr(function($){var J=this;return _(D,function(ie){return ys(ie,J,$)})})})}function Xv(_,D){D=D===n?" ":pu(D);var $=D.length;if($<2)return $?i0(D,_):D;var J=i0(D,Km(_/Gm(D)));return Kg(D)?Vd(Xu(J),0,_).join(""):J.slice(0,_)}function TN(_,D,$,J){var ie=D&g,fe=gy(_);function Te(){for(var Ne=-1,ze=arguments.length,yt=-1,bt=J.length,kt=Xe(bt+ze),Kt=this&&this!==pn&&this instanceof Te?fe:_;++yt<bt;)kt[yt]=J[yt];for(;ze--;)kt[yt++]=arguments[++Ne];return ys(Kt,ie?$:this,kt)}return Te}function aS(_){return function(D,$,J){return J&&typeof J!="number"&&Ia(D,$,J)&&($=J=n),D=p0(D),$===n?($=D,D=0):$=p0($),J=J===n?D<$?1:-1:p0(J),qv(D,$,J,_)}}function b_(_){return function(D,$){return typeof D=="string"&&typeof $=="string"||(D=Wf(D),$=Wf($)),_(D,$)}}function ka(_,D,$,J,ie,fe,Te,Ne,ze,yt){var bt=D&w,kt=bt?Te:n,Kt=bt?n:Te,vn=bt?fe:n,Ln=bt?n:fe;D|=bt?T:C,D&=~(bt?C:T),D&b||(D&=-4);var ur=[_,D,ie,vn,kt,Ln,Kt,Ne,ze,yt],Bn=$.apply(n,ur);return nb(_)&&yS(Bn,ur),Bn.placeholder=J,vS(Bn,_,D)}function Ns(_){var D=No[_];return function($,J){if($=Wf($),J=J==null?0:Js(ar(J),292),J&&Zg($)){var ie=(fi($)+"e").split("e"),fe=D(ie[0]+"e"+(+ie[1]+J));return ie=(fi(fe)+"e").split("e"),+(ie[0]+"e"+(+ie[1]-J))}return D($)}}var CN=np&&1/ep(new np([,-0]))[1]==te?function(_){return new np(_)}:S9;function uS(_){return function(D){var $=Ps(D);return $==Pe?Mw(D):$==St?GL(D):es(D,_(D))}}function Vf(_,D,$,J,ie,fe,Te,Ne){var ze=D&v;if(!ze&&typeof _!="function")throw new Ml(s);var yt=J?J.length:0;if(yt||(D&=-97,J=ie=n),Te=Te===n?Te:Po(ar(Te),0),Ne=Ne===n?Ne:ar(Ne),yt-=ie?ie.length:0,D&C){var bt=J,kt=ie;J=ie=n}var Kt=ze?n:x_(_),vn=[_,D,$,J,ie,bt,kt,fe,Te,Ne];if(Kt&&RN(vn,Kt),_=vn[0],D=vn[1],$=vn[2],J=vn[3],ie=vn[4],Ne=vn[9]=vn[9]===n?ze?0:_.length:Po(vn[9]-yt,0),!Ne&&D&(w|E)&&(D&=-25),!D||D==g)var Ln=g_(_,D,$);else D==w||D==E?Ln=sS(_,D,Ne):(D==T||D==(g|T))&&!ie.length?Ln=TN(_,D,$,J):Ln=yy.apply(n,vn);var ur=Kt?u_:yS;return vS(ur(Ln,vn),_,D)}function lS(_,D,$,J){return _===n||Gd(_,Nf[$])&&!Ur.call(J,$)?D:_}function cS(_,D,$,J,ie,fe){return vo(_)&&vo(D)&&(fe.set(D,_),r0(_,D,n,cS,fe),fe.delete(D)),_}function fS(_){return OS(_)?n:_}function dS(_,D,$,J,ie,fe){var Te=$&m,Ne=_.length,ze=D.length;if(Ne!=ze&&!(Te&&ze>Ne))return!1;var yt=fe.get(_),bt=fe.get(D);if(yt&&bt)return yt==D&&bt==_;var kt=-1,Kt=!0,vn=$&p?new Qm:n;for(fe.set(_,D),fe.set(D,_);++kt<Ne;){var Ln=_[kt],ur=D[kt];if(J)var Bn=Te?J(ur,Ln,kt,D,_,fe):J(Ln,ur,kt,_,D,fe);if(Bn!==n){if(Bn)continue;Kt=!1;break}if(vn){if(!qg(D,function(wr,Rr){if(!Qs(vn,Rr)&&(Ln===wr||ie(Ln,wr,$,J,fe)))return vn.push(Rr)})){Kt=!1;break}}else if(!(Ln===ur||ie(Ln,ur,$,J,fe))){Kt=!1;break}}return fe.delete(_),fe.delete(D),Kt}function hS(_,D,$,J,ie,fe,Te){switch($){case ke:if(_.byteLength!=D.byteLength||_.byteOffset!=D.byteOffset)return!1;_=_.buffer,D=D.buffer;case we:return!(_.byteLength!=D.byteLength||!fe(new Nv(_),new Nv(D)));case be:case Ce:case Je:return Gd(+_,+D);case me:return _.name==D.name&&_.message==D.message;case Dt:case $t:return _==D+"";case Pe:var Ne=Mw;case St:var ze=J&m;if(Ne||(Ne=ep),_.size!=D.size&&!ze)return!1;var yt=Te.get(_);if(yt)return yt==D;J|=p,Te.set(_,D);var bt=dS(Ne(_),Ne(D),J,ie,fe,Te);return Te.delete(_),bt;case oe:if(Qu)return Qu.call(_)==Qu.call(D)}return!1}function SN(_,D,$,J,ie,fe){var Te=$&m,Ne=Qv(_),ze=Ne.length,yt=Qv(D),bt=yt.length;if(ze!=bt&&!Te)return!1;for(var kt=ze;kt--;){var Kt=Ne[kt];if(!(Te?Kt in D:Ur.call(D,Kt)))return!1}var vn=fe.get(_),Ln=fe.get(D);if(vn&&Ln)return vn==D&&Ln==_;var ur=!0;fe.set(_,D),fe.set(D,_);for(var Bn=Te;++kt<ze;){Kt=Ne[kt];var wr=_[Kt],Rr=D[Kt];if(J)var qc=Te?J(Rr,wr,Kt,D,_,fe):J(wr,Rr,Kt,_,D,fe);if(!(qc===n?wr===Rr||ie(wr,Rr,$,J,fe):qc)){ur=!1;break}Bn||(Bn=Kt=="constructor")}if(ur&&!Bn){var nl=_.constructor,Wc=D.constructor;nl!=Wc&&"constructor"in _&&"constructor"in D&&!(typeof nl=="function"&&nl instanceof nl&&typeof Wc=="function"&&Wc instanceof Wc)&&(ur=!1)}return fe.delete(_),fe.delete(D),ur}function Hf(_){return el(T_(_,n,A_),_+"")}function Qv(_){return n_(_,oa,Lc)}function Jv(_){return n_(_,Yl,AN)}var x_=Gw?function(_){return Gw.get(_)}:S9;function vy(_){for(var D=_.name+"",$=ny[D],J=Ur.call(ny,D)?$.length:0;J--;){var ie=$[J],fe=ie.func;if(fe==null||fe==_)return ie.name}return D}function Hd(_){var D=Ur.call(ae,"placeholder")?ae:_;return D.placeholder}function In(){var _=ae.iteratee||T9;return _=_===T9?cy:_,arguments.length?_(arguments[0],arguments[1]):_}function Zv(_,D){var $=_.__data__;return by(D)?$[typeof D=="string"?"string":"hash"]:$.map}function eb(_){for(var D=oa(_),$=D.length;$--;){var J=D[$],ie=_[J];D[$]=[J,ie,rb(ie)]}return D}function fp(_,D){var $=Yg(_,D);return qC($)?$:n}function w_(_){var D=Ur.call(_,Ym),$=_[Ym];try{_[Ym]=n;var J=!0}catch{}var ie=Iv.call(_);return J&&(D?_[Ym]=$:delete _[Ym]),ie}var Lc=Hw?function(_){return _==null?[]:(_=ci(_),Ol(Hw(_),function(D){return Uw.call(_,D)}))}:A9,AN=Hw?function(_){for(var D=[];_;)Pc(D,Lc(_)),_=Fc(_);return D}:A9,Ps=Rs;(Fv&&Ps(new Fv(new ArrayBuffer(1)))!=ke||Xm&&Ps(new Xm)!=Pe||Mv&&Ps(Mv.resolve())!=tt||np&&Ps(new np)!=St||$v&&Ps(new $v)!=Re)&&(Ps=function(_){var D=Rs(_),$=D==Ke?_.constructor:n,J=$?dp($):"";if(J)switch(J){case BC:return ke;case rp:return Pe;case sN:return tt;case ry:return St;case Pf:return Re}return D});function pS(_,D,$){for(var J=-1,ie=$.length;++J<ie;){var fe=$[J],Te=fe.size;switch(fe.type){case"drop":_+=Te;break;case"dropRight":D-=Te;break;case"take":D=Js(D,_+Te);break;case"takeRight":_=Po(_,D-Te);break}}return{start:_,end:D}}function DN(_){var D=_.match(Ko);return D?D[1].split(Ea):[]}function mS(_,D,$){D=Uf(D,_);for(var J=-1,ie=D.length,fe=!1;++J<ie;){var Te=zc(D[J]);if(!(fe=_!=null&&$(_,Te)))break;_=_[Te]}return fe||++J!=ie?fe:(ie=_==null?0:_.length,!!ie&&YN(ie)&&zi(Te,ie)&&(tr(_)||fb(_)))}function tb(_){var D=_.length,$=new _.constructor(D);return D&&typeof _[0]=="string"&&Ur.call(_,"index")&&($.index=_.index,$.input=_.input),$}function Os(_){return typeof _.constructor=="function"&&!qd(_)?iy(Fc(_)):{}}function t9(_,D,$){var J=_.constructor;switch(D){case we:return Yv(_);case be:case Ce:return new J(+_);case ke:return vN(_,$);case Ge:case Ve:case at:case rt:case ln:case xn:case rn:case bn:case Hn:return wN(_,$);case Pe:return new J;case Je:case $t:return new J(_);case Dt:return bN(_);case St:return new J;case oe:return xN(_)}}function n9(_,D){var $=D.length;if(!$)return _;var J=$-1;return D[J]=($>1?"& ":"")+D[J],D=D.join($>2?", ":" "),_.replace(po,`{
/* [wrapped with `+D+`] */
`)}function __(_){return tr(_)||fb(_)||!!(rN&&_&&_[rN])}function zi(_,D){var $=typeof _;return D=D??Z,!!D&&($=="number"||$!="symbol"&&kl.test(_))&&_>-1&&_%1==0&&_<D}function Ia(_,D,$){if(!vo($))return!1;var J=typeof D;return(J=="number"?Gl($)&&zi(D,$.length):J=="string"&&D in $)?Gd($[D],_):!1}function tn(_,D){if(tr(_))return!1;var $=typeof _;return $=="number"||$=="symbol"||$=="boolean"||_==null||Hc(_)?!0:li.test(_)||!Tr.test(_)||D!=null&&_ in ci(D)}function by(_){var D=typeof _;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?_!=="__proto__":_===null}function nb(_){var D=vy(_),$=ae[D];if(typeof $!="function"||!(D in er.prototype))return!1;if(_===$)return!0;var J=x_($);return!!J&&_===J[0]}function kN(_){return!!Bw&&Bw in _}var r9=Qg?h0:D9;function qd(_){var D=_&&_.constructor,$=typeof D=="function"&&D.prototype||Nf;return _===$}function rb(_){return _===_&&!vo(_)}function E_(_,D){return function($){return $==null?!1:$[_]===D&&(D!==n||_ in ci($))}}function IN(_){var D=Lt(_,function(J){return $.size===l&&$.clear(),J}),$=D.cache;return D}function RN(_,D){var $=_[1],J=D[1],ie=$|J,fe=ie<(g|v|S),Te=J==S&&$==w||J==S&&$==I&&_[7].length<=D[8]||J==(S|I)&&D[7].length<=D[8]&&$==w;if(!(fe||Te))return _;J&g&&(_[2]=D[2],ie|=$&g?0:b);var Ne=D[3];if(Ne){var ze=_[3];_[3]=ze?_N(ze,Ne,D[4]):Ne,_[4]=ze?Fl(_[3],c):D[4]}return Ne=D[5],Ne&&(ze=_[5],_[5]=ze?iS(ze,Ne,D[6]):Ne,_[6]=ze?Fl(_[5],c):D[6]),Ne=D[7],Ne&&(_[7]=Ne),J&S&&(_[8]=_[8]==null?D[8]:Js(_[8],D[8])),_[9]==null&&(_[9]=D[9]),_[0]=D[0],_[1]=ie,_}function NN(_){var D=[];if(_!=null)for(var $ in ci(_))D.push($);return D}function gS(_){return Iv.call(_)}function T_(_,D,$){return D=Po(D===n?_.length-1:D,0),function(){for(var J=arguments,ie=-1,fe=Po(J.length-D,0),Te=Xe(fe);++ie<fe;)Te[ie]=J[D+ie];ie=-1;for(var Ne=Xe(D+1);++ie<D;)Ne[ie]=J[ie];return Ne[D]=$(Te),ys(_,this,Ne)}}function vs(_,D){return D.length<2?_:Ld(_,ia(D,0,-1))}function Bc(_,D){for(var $=_.length,J=Js(D.length,$),ie=Da(_);J--;){var fe=D[J];_[J]=zi(fe,$)?ie[fe]:n}return _}function qf(_,D){if(!(D==="constructor"&&typeof _[D]=="function")&&D!="__proto__")return _[D]}var yS=jc(u_),xy=$C||function(_,D){return pn.setTimeout(_,D)},el=jc(zf);function vS(_,D,$){var J=D+"";return el(_,n9(J,PN(DN(J),$)))}function jc(_){var D=0,$=0;return function(){var J=JL(),ie=L-(J-$);if($=J,ie>0){if(++D>=B)return arguments[0]}else D=0;return _.apply(n,arguments)}}function C_(_,D){var $=-1,J=_.length,ie=J-1;for(D=D===n?J:D;++$<D;){var fe=fy($,ie),Te=_[fe];_[fe]=_[$],_[$]=Te}return _.length=D,_}var bS=IN(function(_){var D=[];return _.charCodeAt(0)===46&&D.push(""),_.replace(Dr,function($,J,ie,fe){D.push(ie?fe.replace(ou,"$1"):J||$)}),D});function zc(_){if(typeof _=="string"||Hc(_))return _;var D=_+"";return D=="0"&&1/_==-1/0?"-0":D}function dp(_){if(_!=null){try{return kv.call(_)}catch{}try{return _+""}catch{}}return""}function PN(_,D){return Zo(X,function($){var J="_."+$[0];D&$[1]&&!qm(_,J)&&_.push(J)}),_.sort()}function ON(_){if(_ instanceof er)return _.clone();var D=new Zs(_.__wrapped__,_.__chain__);return D.__actions__=Da(_.__actions__),D.__index__=_.__index__,D.__values__=_.__values__,D}function S_(_,D,$){($?Ia(_,D,$):D===n)?D=1:D=Po(ar(D),0);var J=_==null?0:_.length;if(!J||D<1)return[];for(var ie=0,fe=0,Te=Xe(Km(J/D));ie<J;)Te[fe++]=ia(_,ie,ie+=D);return Te}function xS(_){for(var D=-1,$=_==null?0:_.length,J=0,ie=[];++D<$;){var fe=_[D];fe&&(ie[J++]=fe)}return ie}function ql(){var _=arguments.length;if(!_)return[];for(var D=Xe(_-1),$=arguments[0],J=_;J--;)D[J-1]=arguments[J];return Pc(tr($)?Da($):[$],oo(D,1))}var Ir=sr(function(_,D){return is(_)?Lf(_,oo(D,1,is,!0)):[]}),bs=sr(function(_,D){var $=Ra(D);return is($)&&($=n),is(_)?Lf(_,oo(D,1,is,!0),In($,2)):[]}),Oo=sr(function(_,D){var $=Ra(D);return is($)&&($=n),is(_)?Lf(_,oo(D,1,is,!0),n,$):[]});function Fs(_,D,$){var J=_==null?0:_.length;return J?(D=$||D===n?1:ar(D),ia(_,D<0?0:D,J)):[]}function tl(_,D,$){var J=_==null?0:_.length;return J?(D=$||D===n?1:ar(D),D=J-D,ia(_,0,D<0?0:D)):[]}function wy(_,D){return _&&_.length?Wv(_,In(D,3),!0,!0):[]}function ns(_,D){return _&&_.length?Wv(_,In(D,3),!0):[]}function ib(_,D,$,J){var ie=_==null?0:_.length;return ie?($&&typeof $!="number"&&Ia(_,D,$)&&($=0,J=ie),pN(_,D,$,J)):[]}function hp(_,D,$){var J=_==null?0:_.length;if(!J)return-1;var ie=$==null?0:ar($);return ie<0&&(ie=Po(J+ie,0)),Wm(_,In(D,3),ie)}function ob(_,D,$){var J=_==null?0:_.length;if(!J)return-1;var ie=J-1;return $!==n&&(ie=ar($),ie=$<0?Po(J+ie,0):Js(ie,J-1)),Wm(_,In(D,3),ie,!0)}function A_(_){var D=_==null?0:_.length;return D?oo(_,1):[]}function sb(_){var D=_==null?0:_.length;return D?oo(_,te):[]}function mu(_,D){var $=_==null?0:_.length;return $?(D=D===n?1:ar(D),oo(_,D)):[]}function wS(_){for(var D=-1,$=_==null?0:_.length,J={};++D<$;){var ie=_[D];J[ie[0]]=ie[1]}return J}function u0(_){return _&&_.length?_[0]:n}function Wd(_,D,$){var J=_==null?0:_.length;if(!J)return-1;var ie=$==null?0:ar($);return ie<0&&(ie=Po(J+ie,0)),Nd(_,D,ie)}function D_(_){var D=_==null?0:_.length;return D?ia(_,0,-1):[]}var _S=sr(function(_){var D=oi(_,py);return D.length&&D[0]===_[0]?r_(D):[]}),pp=sr(function(_){var D=Ra(_),$=oi(_,py);return D===Ra($)?D=n:$.pop(),$.length&&$[0]===_[0]?r_($,In(D,2)):[]}),k_=sr(function(_){var D=Ra(_),$=oi(_,py);return D=typeof D=="function"?D:n,D&&$.pop(),$.length&&$[0]===_[0]?r_($,n,D):[]});function mp(_,D){return _==null?"":qw.call(_,D)}function Ra(_){var D=_==null?0:_.length;return D?_[D-1]:n}function ab(_,D,$){var J=_==null?0:_.length;if(!J)return-1;var ie=J;return $!==n&&(ie=ar($),ie=ie<0?Po(J+ie,0):Js(ie,J-1)),D===D?YL(_,D,ie):Wm(_,N,ie,!0)}function ES(_,D){return _&&_.length?a_(_,ar(D)):n}var I_=sr(ub);function ub(_,D){return _&&_.length&&D&&D.length?yo(_,D):_}function Na(_,D,$){return _&&_.length&&D&&D.length?yo(_,D,In($,2)):_}function gp(_,D,$){return _&&_.length&&D&&D.length?yo(_,D,n,$):_}var Uc=Hf(function(_,D){var $=_==null?0:_.length,J=e_(_,D);return ts(_,oi(D,function(ie){return zi(ie,$)?+ie:ie}).sort(rS)),J});function gu(_,D){var $=[];if(!(_&&_.length))return $;var J=-1,ie=[],fe=_.length;for(D=In(D,3);++J<fe;){var Te=_[J];D(Te,J,_)&&($.push(Te),ie.push(J))}return ts(_,ie),$}function R_(_){return _==null?_:Ww.call(_)}function TS(_,D,$){var J=_==null?0:_.length;return J?($&&typeof $!="number"&&Ia(_,D,$)?(D=0,$=J):(D=D==null?0:ar(D),$=$===n?J:ar($)),ia(_,D,$)):[]}function CS(_,D){return dy(_,D)}function i9(_,D,$){return l_(_,D,In($,2))}function yp(_,D){var $=_==null?0:_.length;if($){var J=dy(_,D);if(J<$&&Gd(_[J],D))return J}return-1}function FN(_,D){return dy(_,D,!0)}function SS(_,D,$){return l_(_,D,In($,2),!0)}function l0(_,D){var $=_==null?0:_.length;if($){var J=dy(_,D,!0)-1;if(Gd(_[J],D))return J}return-1}function AS(_){return _&&_.length?JC(_):[]}function c0(_,D){return _&&_.length?JC(_,In(D,2)):[]}function MN(_){var D=_==null?0:_.length;return D?ia(_,1,D):[]}function $N(_,D,$){return _&&_.length?(D=$||D===n?1:ar(D),ia(_,0,D<0?0:D)):[]}function DS(_,D,$){var J=_==null?0:_.length;return J?(D=$||D===n?1:ar(D),D=J-D,ia(_,D<0?0:D,J)):[]}function N_(_,D){return _&&_.length?Wv(_,In(D,3),!1,!0):[]}function o9(_,D){return _&&_.length?Wv(_,In(D,3)):[]}var s9=sr(function(_){return Ud(oo(_,1,is,!0))}),LN=sr(function(_){var D=Ra(_);return is(D)&&(D=n),Ud(oo(_,1,is,!0),In(D,2))}),BN=sr(function(_){var D=Ra(_);return D=typeof D=="function"?D:n,Ud(oo(_,1,is,!0),n,D)});function f0(_){return _&&_.length?Ud(_):[]}function a9(_,D){return _&&_.length?Ud(_,In(D,2)):[]}function _y(_,D){return D=typeof D=="function"?D:n,_&&_.length?Ud(_,n,D):[]}function P_(_){if(!(_&&_.length))return[];var D=0;return _=Ol(_,function($){if(is($))return D=Po($.length,D),!0}),Wr(D,function($){return oi(_,ne($))})}function Xi(_,D){if(!(_&&_.length))return[];var $=P_(_);return D==null?$:oi($,function(J){return ys(D,n,J)})}var u9=sr(function(_,D){return is(_)?Lf(_,D):[]}),jN=sr(function(_){return f_(Ol(_,is))}),l9=sr(function(_){var D=Ra(_);return is(D)&&(D=n),f_(Ol(_,is),In(D,2))}),c9=sr(function(_){var D=Ra(_);return D=typeof D=="function"?D:n,f_(Ol(_,is),n,D)}),zN=sr(P_);function UN(_,D){return Gv(_||[],D||[],e0)}function f9(_,D){return Gv(_||[],D||[],o0)}var Wl=sr(function(_){var D=_.length,$=D>1?_[D-1]:n;return $=typeof $=="function"?(_.pop(),$):n,Xi(_,$)});function O_(_){var D=ae(_);return D.__chain__=!0,D}function d9(_,D){return D(_),_}function Vc(_,D){return D(_)}var F_=Hf(function(_){var D=_.length,$=D?_[0]:0,J=this.__wrapped__,ie=function(fe){return e_(fe,_)};return D>1||this.__actions__.length||!(J instanceof er)||!zi($)?this.thru(ie):(J=J.slice($,+$+(D?1:0)),J.__actions__.push({func:Vc,args:[ie],thisArg:n}),new Zs(J,this.__chain__).thru(function(fe){return D&&!fe.length&&fe.push(n),fe}))});function d0(){return O_(this)}function M_(){return new Zs(this.value(),this.__chain__)}function kS(){this.__values__===n&&(this.__values__=ene(this.value()));var _=this.__index__>=this.__values__.length,D=_?n:this.__values__[this.__index__++];return{done:_,value:D}}function IS(){return this}function h9(_){for(var D,$=this;$ instanceof Of;){var J=ON($);J.__index__=0,J.__values__=n,D?ie.__wrapped__=J:D=J;var ie=J;$=$.__wrapped__}return ie.__wrapped__=_,D}function RS(){var _=this.__wrapped__;if(_ instanceof er){var D=_;return this.__actions__.length&&(D=new er(this)),D=D.reverse(),D.__actions__.push({func:Vc,args:[R_],thisArg:n}),new Zs(D,this.__chain__)}return this.thru(R_)}function p9(){return hy(this.__wrapped__,this.__actions__)}var VN=p_(function(_,D,$){Ur.call(_,$)?++_[$]:$f(_,$,1)});function HN(_,D,$){var J=tr(_)?Hm:jv;return $&&Ia(_,D,$)&&(D=n),J(_,In(D,3))}function $_(_,D){var $=tr(_)?Ol:VC;return $(_,In(D,3))}var L_=a0(hp),qN=a0(ob);function NS(_,D){return oo(U_(_,D),1)}function WN(_,D){return oo(U_(_,D),te)}function PS(_,D,$){return $=$===n?1:ar($),oo(U_(_,D),$)}function lb(_,D){var $=tr(_)?Zo:Bf;return $(_,In(D,3))}function B_(_,D){var $=tr(_)?Vm:hN;return $(_,In(D,3))}var j_=p_(function(_,D,$){Ur.call(_,$)?_[$].push(D):$f(_,$,[D])});function GN(_,D,$,J){_=Gl(_)?_:q_(_),$=$&&!J?ar($):0;var ie=_.length;return $<0&&($=Po(ie+$,0)),KN(_)?$<=ie&&_.indexOf(D,$)>-1:!!ie&&Nd(_,D,$)>-1}var m9=sr(function(_,D,$){var J=-1,ie=typeof D=="function",fe=Gl(_)?Xe(_.length):[];return Bf(_,function(Te){fe[++J]=ie?ys(D,Te,$):zl(Te,D,$)}),fe}),z_=p_(function(_,D,$){$f(_,$,D)});function U_(_,D){var $=tr(_)?oi:GC;return $(_,In(D,3))}function cb(_,D,$,J){return _==null?[]:(tr(D)||(D=D==null?[]:[D]),$=J?n:$,tr($)||($=$==null?[]:[$]),Hv(_,D,$))}var g9=p_(function(_,D,$){_[$?0:1].push(D)},function(){return[[],[]]});function V_(_,D,$){var J=tr(_)?Oc:He,ie=arguments.length<3;return J(_,In(D,4),$,ie,Bf)}function y(_,D,$){var J=tr(_)?Ow:He,ie=arguments.length<3;return J(_,In(D,4),$,ie,hN)}function x(_,D){var $=tr(_)?Ol:VC;return $(_,fn(In(D,3)))}function k(_){var D=tr(_)?Mf:ra;return D(_)}function O(_,D,$){($?Ia(_,D,$):D===n)?D=1:D=ar(D);var J=tr(_)?Zm:XC;return J(_,D)}function V(_){var D=tr(_)?fN:Vl;return D(_)}function Q(_){if(_==null)return 0;if(Gl(_))return KN(_)?Gm(_):_.length;var D=Ps(_);return D==Pe||D==St?_.size:zd(_).length}function se(_,D,$){var J=tr(_)?qg:QC;return $&&Ia(_,D,$)&&(D=n),J(_,In(D,3))}var _e=sr(function(_,D){if(_==null)return[];var $=D.length;return $>1&&Ia(_,D[0],D[1])?D=[]:$>2&&Ia(D[0],D[1],D[2])&&(D=[D[0]]),Hv(_,oo(D,1),[])}),De=Pi||function(){return pn.Date.now()};function Qe(_,D){if(typeof D!="function")throw new Ml(s);return _=ar(_),function(){if(--_<1)return D.apply(this,arguments)}}function At(_,D,$){return D=$?n:D,D=_&&D==null?_.length:D,Vf(_,S,n,n,n,n,D)}function Nt(_,D){var $;if(typeof D!="function")throw new Ml(s);return _=ar(_),function(){return--_>0&&($=D.apply(this,arguments)),_<=1&&(D=n),$}}var Et=sr(function(_,D,$){var J=g;if($.length){var ie=Fl($,Hd(Et));J|=T}return Vf(_,J,D,$,ie)}),Qt=sr(function(_,D,$){var J=g|v;if($.length){var ie=Fl($,Hd(Qt));J|=T}return Vf(D,J,_,$,ie)});function an(_,D,$){D=$?n:D;var J=Vf(_,w,n,n,n,n,n,D);return J.placeholder=an.placeholder,J}function cn(_,D,$){D=$?n:D;var J=Vf(_,E,n,n,n,n,n,D);return J.placeholder=cn.placeholder,J}function so(_,D,$){var J,ie,fe,Te,Ne,ze,yt=0,bt=!1,kt=!1,Kt=!0;if(typeof _!="function")throw new Ml(s);D=Wf(D)||0,vo($)&&(bt=!!$.leading,kt="maxWait"in $,fe=kt?Po(Wf($.maxWait)||0,D):fe,Kt="trailing"in $?!!$.trailing:Kt);function vn(os){var Yd=J,m0=ie;return J=ie=n,yt=os,Te=_.apply(m0,Yd),Te}function Ln(os){return yt=os,Ne=xy(wr,D),bt?vn(os):Te}function ur(os){var Yd=os-ze,m0=os-yt,hne=D-Yd;return kt?Js(hne,fe-m0):hne}function Bn(os){var Yd=os-ze,m0=os-yt;return ze===n||Yd>=D||Yd<0||kt&&m0>=fe}function wr(){var os=De();if(Bn(os))return Rr(os);Ne=xy(wr,ur(os))}function Rr(os){return Ne=n,Kt&&J?vn(os):(J=ie=n,Te)}function qc(){Ne!==n&&tS(Ne),yt=0,J=ze=ie=Ne=n}function nl(){return Ne===n?Te:Rr(De())}function Wc(){var os=De(),Yd=Bn(os);if(J=arguments,ie=this,ze=os,Yd){if(Ne===n)return Ln(ze);if(kt)return tS(Ne),Ne=xy(wr,D),vn(ze)}return Ne===n&&(Ne=xy(wr,D)),Te}return Wc.cancel=qc,Wc.flush=nl,Wc}var qe=sr(function(_,D){return UC(_,1,D)}),Le=sr(function(_,D,$){return UC(_,Wf(D)||0,$)});function Ye(_){return Vf(_,R)}function Lt(_,D){if(typeof _!="function"||D!=null&&typeof D!="function")throw new Ml(s);var $=function(){var J=arguments,ie=D?D.apply(this,J):J[0],fe=$.cache;if(fe.has(ie))return fe.get(ie);var Te=_.apply(this,J);return $.cache=fe.set(ie,Te)||fe,Te};return $.cache=new(Lt.Cache||$l),$}Lt.Cache=$l;function fn(_){if(typeof _!="function")throw new Ml(s);return function(){var D=arguments;switch(D.length){case 0:return!_.call(this);case 1:return!_.call(this,D[0]);case 2:return!_.call(this,D[0],D[1]);case 3:return!_.call(this,D[0],D[1],D[2])}return!_.apply(this,D)}}function Sn(_){return Nt(2,_)}var An=yN(function(_,D){D=D.length==1&&tr(D[0])?oi(D[0],Qr(In())):oi(oo(D,1),Qr(In()));var $=D.length;return sr(function(J){for(var ie=-1,fe=Js(J.length,$);++ie<fe;)J[ie]=D[ie].call(this,J[ie]);return ys(_,this,J)})}),Fn=sr(function(_,D){var $=Fl(D,Hd(Fn));return Vf(_,T,n,D,$)}),rs=sr(function(_,D){var $=Fl(D,Hd(rs));return Vf(_,C,n,D,$)}),Vr=Hf(function(_,D){return Vf(_,I,n,n,n,D)});function vp(_,D){if(typeof _!="function")throw new Ml(s);return D=D===n?D:ar(D),sr(_,D)}function y9(_,D){if(typeof _!="function")throw new Ml(s);return D=D==null?0:Po(ar(D),0),sr(function($){var J=$[D],ie=Vd($,0,D);return J&&Pc(ie,J),ys(_,this,ie)})}function xOe(_,D,$){var J=!0,ie=!0;if(typeof _!="function")throw new Ml(s);return vo($)&&(J="leading"in $?!!$.leading:J,ie="trailing"in $?!!$.trailing:ie),so(_,D,{leading:J,maxWait:D,trailing:ie})}function wOe(_){return At(_,1)}function _Oe(_,D){return Fn(d_(D),_)}function EOe(){if(!arguments.length)return[];var _=arguments[0];return tr(_)?_:[_]}function TOe(_){return hu(_,h)}function COe(_,D){return D=typeof D=="function"?D:n,hu(_,h,D)}function SOe(_){return hu(_,f|h)}function AOe(_,D){return D=typeof D=="function"?D:n,hu(_,f|h,D)}function DOe(_,D){return D==null||Bv(_,D,oa(D))}function Gd(_,D){return _===D||_!==_&&D!==D}var kOe=b_(up),IOe=b_(function(_,D){return _>=D}),fb=i_(function(){return arguments}())?i_:function(_){return Fo(_)&&Ur.call(_,"callee")&&!Uw.call(_,"callee")},tr=Xe.isArray,ROe=If?Qr(If):mN;function Gl(_){return _!=null&&YN(_.length)&&!h0(_)}function is(_){return Fo(_)&&Gl(_)}function NOe(_){return _===!0||_===!1||Fo(_)&&Rs(_)==be}var Ey=LC||D9,POe=go?Qr(go):jd;function OOe(_){return Fo(_)&&_.nodeType===1&&!OS(_)}function FOe(_){if(_==null)return!0;if(Gl(_)&&(tr(_)||typeof _=="string"||typeof _.splice=="function"||Ey(_)||H_(_)||fb(_)))return!_.length;var D=Ps(_);if(D==Pe||D==St)return!_.size;if(qd(_))return!zd(_).length;for(var $ in _)if(Ur.call(_,$))return!1;return!0}function MOe(_,D){return Ul(_,D)}function $Oe(_,D,$){$=typeof $=="function"?$:n;var J=$?$(_,D):n;return J===n?Ul(_,D,n,$):!!J}function v9(_){if(!Fo(_))return!1;var D=Rs(_);return D==me||D==Oe||typeof _.message=="string"&&typeof _.name=="string"&&!OS(_)}function LOe(_){return typeof _=="number"&&Zg(_)}function h0(_){if(!vo(_))return!1;var D=Rs(_);return D==he||D==Fe||D==Ee||D==pt}function Xte(_){return typeof _=="number"&&_==ar(_)}function YN(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Z}function vo(_){var D=typeof _;return _!=null&&(D=="object"||D=="function")}function Fo(_){return _!=null&&typeof _=="object"}var Qte=Pl?Qr(Pl):gN;function BOe(_,D){return _===D||ly(_,D,eb(D))}function jOe(_,D,$){return $=typeof $=="function"?$:n,ly(_,D,eb(D),$)}function zOe(_){return Jte(_)&&_!=+_}function UOe(_){if(r9(_))throw new jn(o);return qC(_)}function VOe(_){return _===null}function HOe(_){return _==null}function Jte(_){return typeof _=="number"||Fo(_)&&Rs(_)==Je}function OS(_){if(!Fo(_)||Rs(_)!=Ke)return!1;var D=Fc(_);if(D===null)return!0;var $=Ur.call(D,"constructor")&&D.constructor;return typeof $=="function"&&$ instanceof $&&kv.call($)==jw}var b9=Um?Qr(Um):Uv;function qOe(_){return Xte(_)&&_>=-9007199254740991&&_<=Z}var Zte=Nc?Qr(Nc):jf;function KN(_){return typeof _=="string"||!tr(_)&&Fo(_)&&Rs(_)==$t}function Hc(_){return typeof _=="symbol"||Fo(_)&&Rs(_)==oe}var H_=Pw?Qr(Pw):Vv;function WOe(_){return _===n}function GOe(_){return Fo(_)&&Ps(_)==Re}function YOe(_){return Fo(_)&&Rs(_)==pe}var KOe=b_(lp),XOe=b_(function(_,D){return _<=D});function ene(_){if(!_)return[];if(Gl(_))return KN(_)?Xu(_):Da(_);if(Fd&&_[Fd])return WL(_[Fd]());var D=Ps(_),$=D==Pe?Mw:D==St?ep:q_;return $(_)}function p0(_){if(!_)return _===0?_:0;if(_=Wf(_),_===te||_===-1/0){var D=_<0?-1:1;return D*re}return _===_?_:0}function ar(_){var D=p0(_),$=D%1;return D===D?$?D-$:D:0}function tne(_){return _?$d(ar(_),0,U):0}function Wf(_){if(typeof _=="number")return _;if(Hc(_))return q;if(vo(_)){var D=typeof _.valueOf=="function"?_.valueOf():_;_=vo(D)?D+"":D}if(typeof _!="string")return _===0?_:+_;_=xr(_);var $=Df.test(_);return $||Dl.test(_)?Jn(_.slice(2),$?2:8):Xo.test(_)?q:+_}function nne(_){return $c(_,Yl(_))}function QOe(_){return _?$d(ar(_),-9007199254740991,Z):_===0?_:0}function fi(_){return _==null?"":pu(_)}var JOe=my(function(_,D){if(qd(D)||Gl(D)){$c(D,oa(D),_);return}for(var $ in D)Ur.call(D,$)&&e0(_,$,D[$])}),rne=my(function(_,D){$c(D,Yl(D),_)}),XN=my(function(_,D,$,J){$c(D,Yl(D),_,J)}),ZOe=my(function(_,D,$,J){$c(D,oa(D),_,J)}),e6e=Hf(e_);function t6e(_,D){var $=iy(_);return D==null?$:Fi($,D)}var n6e=sr(function(_,D){_=ci(_);var $=-1,J=D.length,ie=J>2?D[2]:n;for(ie&&Ia(D[0],D[1],ie)&&(J=1);++$<J;)for(var fe=D[$],Te=Yl(fe),Ne=-1,ze=Te.length;++Ne<ze;){var yt=Te[Ne],bt=_[yt];(bt===n||Gd(bt,Nf[yt])&&!Ur.call(_,yt))&&(_[yt]=fe[yt])}return _}),r6e=sr(function(_){return _.push(n,cS),ys(ine,n,_)});function i6e(_,D){return Xs(_,In(D,3),Zu)}function o6e(_,D){return Xs(_,In(D,3),ap)}function s6e(_,D){return _==null?_:t_(_,In(D,3),Yl)}function a6e(_,D){return _==null?_:zv(_,In(D,3),Yl)}function u6e(_,D){return _&&Zu(_,In(D,3))}function l6e(_,D){return _&&ap(_,In(D,3))}function c6e(_){return _==null?[]:uy(_,oa(_))}function f6e(_){return _==null?[]:uy(_,Yl(_))}function x9(_,D,$){var J=_==null?n:Ld(_,D);return J===n?$:J}function d6e(_,D){return _!=null&&mS(_,D,jl)}function w9(_,D){return _!=null&&mS(_,D,n0)}var h6e=EN(function(_,D,$){D!=null&&typeof D.toString!="function"&&(D=Iv.call(D)),_[D]=$},E9(Kl)),p6e=EN(function(_,D,$){D!=null&&typeof D.toString!="function"&&(D=Iv.call(D)),Ur.call(_,D)?_[D].push($):_[D]=[$]},In),m6e=sr(zl);function oa(_){return Gl(_)?Ff(_):zd(_)}function Yl(_){return Gl(_)?Ff(_,!0):WC(_)}function g6e(_,D){var $={};return D=In(D,3),Zu(_,function(J,ie,fe){$f($,D(J,ie,fe),J)}),$}function y6e(_,D){var $={};return D=In(D,3),Zu(_,function(J,ie,fe){$f($,ie,D(J,ie,fe))}),$}var v6e=my(function(_,D,$){r0(_,D,$)}),ine=my(function(_,D,$,J){r0(_,D,$,J)}),b6e=Hf(function(_,D){var $={};if(_==null)return $;var J=!1;D=oi(D,function(fe){return fe=Uf(fe,_),J||(J=fe.length>1),fe}),$c(_,Jv(_),$),J&&($=hu($,f|d|h,fS));for(var ie=D.length;ie--;)c_($,D[ie]);return $});function x6e(_,D){return one(_,fn(In(D)))}var w6e=Hf(function(_,D){return _==null?{}:KC(_,D)});function one(_,D){if(_==null)return{};var $=oi(Jv(_),function(J){return[J]});return D=In(D),cp(_,$,function(J,ie){return D(J,ie[0])})}function _6e(_,D,$){D=Uf(D,_);var J=-1,ie=D.length;for(ie||(ie=1,_=n);++J<ie;){var fe=_==null?n:_[zc(D[J])];fe===n&&(J=ie,fe=$),_=h0(fe)?fe.call(_):fe}return _}function E6e(_,D,$){return _==null?_:o0(_,D,$)}function T6e(_,D,$,J){return J=typeof J=="function"?J:n,_==null?_:o0(_,D,$,J)}var sne=uS(oa),ane=uS(Yl);function C6e(_,D,$){var J=tr(_),ie=J||Ey(_)||H_(_);if(D=In(D,4),$==null){var fe=_&&_.constructor;ie?$=J?new fe:[]:vo(_)?$=h0(fe)?iy(Fc(_)):{}:$={}}return(ie?Zo:Zu)(_,function(Te,Ne,ze){return D($,Te,Ne,ze)}),$}function S6e(_,D){return _==null?!0:c_(_,D)}function A6e(_,D,$){return _==null?_:eS(_,D,d_($))}function D6e(_,D,$,J){return J=typeof J=="function"?J:n,_==null?_:eS(_,D,d_($),J)}function q_(_){return _==null?[]:io(_,oa(_))}function k6e(_){return _==null?[]:io(_,Yl(_))}function I6e(_,D,$){return $===n&&($=D,D=n),$!==n&&($=Wf($),$=$===$?$:0),D!==n&&(D=Wf(D),D=D===D?D:0),$d(Wf(_),D,$)}function R6e(_,D,$){return D=p0(D),$===n?($=D,D=0):$=p0($),_=Wf(_),HC(_,D,$)}function N6e(_,D,$){if($&&typeof $!="boolean"&&Ia(_,D,$)&&(D=$=n),$===n&&(typeof D=="boolean"?($=D,D=n):typeof _=="boolean"&&($=_,_=n)),_===n&&D===n?(_=0,D=1):(_=p0(_),D===n?(D=_,_=0):D=p0(D)),_>D){var J=_;_=D,D=J}if($||_%1||D%1){var ie=Ov();return Js(_+ie*(D-_+on("1e-"+((ie+"").length-1))),D)}return fy(_,D)}var P6e=s0(function(_,D,$){return D=D.toLowerCase(),_+($?une(D):D)});function une(_){return _9(fi(_).toLowerCase())}function lne(_){return _=fi(_),_&&_.replace(Yu,KR).replace(Nl,"")}function O6e(_,D,$){_=fi(_),D=pu(D);var J=_.length;$=$===n?J:$d(ar($),0,J);var ie=$;return $-=D.length,$>=0&&_.slice($,ie)==D}function F6e(_){return _=fi(_),_&&Do.test(_)?_.replace(mi,XR):_}function M6e(_){return _=fi(_),_&&vr.test(_)?_.replace(no,"\\$&"):_}var $6e=s0(function(_,D,$){return _+($?"-":"")+D.toLowerCase()}),L6e=s0(function(_,D,$){return _+($?" ":"")+D.toLowerCase()}),B6e=oS("toLowerCase");function j6e(_,D,$){_=fi(_),D=ar(D);var J=D?Gm(_):0;if(!D||J>=D)return _;var ie=(D-J)/2;return Xv(tp(ie),$)+_+Xv(Km(ie),$)}function z6e(_,D,$){_=fi(_),D=ar(D);var J=D?Gm(_):0;return D&&J<D?_+Xv(D-J,$):_}function U6e(_,D,$){_=fi(_),D=ar(D);var J=D?Gm(_):0;return D&&J<D?Xv(D-J,$)+_:_}function V6e(_,D,$){return $||D==null?D=0:D&&(D=+D),oN(fi(_).replace(gi,""),D||0)}function H6e(_,D,$){return($?Ia(_,D,$):D===n)?D=1:D=ar(D),i0(fi(_),D)}function q6e(){var _=arguments,D=fi(_[0]);return _.length<3?D:D.replace(_[1],_[2])}var W6e=s0(function(_,D,$){return _+($?"_":"")+D.toLowerCase()});function G6e(_,D,$){return $&&typeof $!="number"&&Ia(_,D,$)&&(D=$=n),$=$===n?U:$>>>0,$?(_=fi(_),_&&(typeof D=="string"||D!=null&&!b9(D))&&(D=pu(D),!D&&Kg(_))?Vd(Xu(_),0,$):_.split(D,$)):[]}var Y6e=s0(function(_,D,$){return _+($?" ":"")+_9(D)});function K6e(_,D,$){return _=fi(_),$=$==null?0:$d(ar($),0,_.length),D=pu(D),_.slice($,$+D.length)==D}function X6e(_,D,$){var J=ae.templateSettings;$&&Ia(_,D,$)&&(D=n),_=fi(_),D=XN({},D,J,lS);var ie=XN({},D.imports,J.imports,lS),fe=oa(ie),Te=io(ie,fe),Ne,ze,yt=0,bt=D.interpolate||Ku,kt="__p += '",Kt=Dv((D.escape||Ku).source+"|"+bt.source+"|"+(bt===Ks?Ri:Ku).source+"|"+(D.evaluate||Ku).source+"|$","g"),vn="//# sourceURL="+(Ur.call(D,"sourceURL")?(D.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hg+"]")+`
`;_.replace(Kt,function(Bn,wr,Rr,qc,nl,Wc){return Rr||(Rr=qc),kt+=_.slice(yt,Wc).replace(Is,QR),wr&&(Ne=!0,kt+=`' +
__e(`+wr+`) +
'`),nl&&(ze=!0,kt+=`';
`+nl+`;
__p += '`),Rr&&(kt+=`' +
((__t = (`+Rr+`)) == null ? '' : __t) +
'`),yt=Wc+Bn.length,Bn}),kt+=`';
`;var Ln=Ur.call(D,"variable")&&D.variable;if(!Ln)kt=`with (obj) {
`+kt+`
}
`;else if(pr.test(Ln))throw new jn(a);kt=(ze?kt.replace($n,""):kt).replace(Kr,"$1").replace(Lr,"$1;"),kt="function("+(Ln||"obj")+`) {
`+(Ln?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ne?", __e = _.escape":"")+(ze?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+kt+`return __p
}`;var ur=fne(function(){return zr(fe,vn+"return "+kt).apply(n,Te)});if(ur.source=kt,v9(ur))throw ur;return ur}function Q6e(_){return fi(_).toLowerCase()}function J6e(_){return fi(_).toUpperCase()}function Z6e(_,D,$){if(_=fi(_),_&&($||D===n))return xr(_);if(!_||!(D=pu(D)))return _;var J=Xu(_),ie=Xu(D),fe=lu(J,ie),Te=Zh(J,ie)+1;return Vd(J,fe,Te).join("")}function eFe(_,D,$){if(_=fi(_),_&&($||D===n))return _.slice(0,Lw(_)+1);if(!_||!(D=pu(D)))return _;var J=Xu(_),ie=Zh(J,Xu(D))+1;return Vd(J,0,ie).join("")}function tFe(_,D,$){if(_=fi(_),_&&($||D===n))return _.replace(gi,"");if(!_||!(D=pu(D)))return _;var J=Xu(_),ie=lu(J,Xu(D));return Vd(J,ie).join("")}function nFe(_,D){var $=P,J=M;if(vo(D)){var ie="separator"in D?D.separator:ie;$="length"in D?ar(D.length):$,J="omission"in D?pu(D.omission):J}_=fi(_);var fe=_.length;if(Kg(_)){var Te=Xu(_);fe=Te.length}if($>=fe)return _;var Ne=$-Gm(J);if(Ne<1)return J;var ze=Te?Vd(Te,0,Ne).join(""):_.slice(0,Ne);if(ie===n)return ze+J;if(Te&&(Ne+=ze.length-Ne),b9(ie)){if(_.slice(Ne).search(ie)){var yt,bt=ze;for(ie.global||(ie=Dv(ie.source,fi(ks.exec(ie))+"g")),ie.lastIndex=0;yt=ie.exec(bt);)var kt=yt.index;ze=ze.slice(0,kt===n?Ne:kt)}}else if(_.indexOf(pu(ie),Ne)!=Ne){var Kt=ze.lastIndexOf(ie);Kt>-1&&(ze=ze.slice(0,Kt))}return ze+J}function rFe(_){return _=fi(_),_&&Er.test(_)?_.replace(Br,JR):_}var iFe=s0(function(_,D,$){return _+($?" ":"")+D.toUpperCase()}),_9=oS("toUpperCase");function cne(_,D,$){return _=fi(_),D=$?n:D,D===n?qL(_)?KL(_):Wg(_):_.match(D)||[]}var fne=sr(function(_,D){try{return ys(_,n,D)}catch($){return v9($)?$:new jn($)}}),oFe=Hf(function(_,D){return Zo(D,function($){$=zc($),$f(_,$,Et(_[$],_))}),_});function sFe(_){var D=_==null?0:_.length,$=In();return _=D?oi(_,function(J){if(typeof J[1]!="function")throw new Ml(s);return[$(J[0]),J[1]]}):[],sr(function(J){for(var ie=-1;++ie<D;){var fe=_[ie];if(ys(fe[0],this,J))return ys(fe[1],this,J)}})}function aFe(_){return dN(hu(_,f))}function E9(_){return function(){return _}}function uFe(_,D){return _==null||_!==_?D:_}var lFe=y_(),cFe=y_(!0);function Kl(_){return _}function T9(_){return cy(typeof _=="function"?_:hu(_,f))}function fFe(_){return s_(hu(_,f))}function dFe(_,D){return ji(_,hu(D,f))}var hFe=sr(function(_,D){return function($){return zl($,_,D)}}),pFe=sr(function(_,D){return function($){return zl(_,$,D)}});function C9(_,D,$){var J=oa(D),ie=uy(D,J);$==null&&!(vo(D)&&(ie.length||!J.length))&&($=D,D=_,_=this,ie=uy(D,oa(D)));var fe=!(vo($)&&"chain"in $)||!!$.chain,Te=h0(_);return Zo(ie,function(Ne){var ze=D[Ne];_[Ne]=ze,Te&&(_.prototype[Ne]=function(){var yt=this.__chain__;if(fe||yt){var bt=_(this.__wrapped__),kt=bt.__actions__=Da(this.__actions__);return kt.push({func:ze,args:arguments,thisArg:_}),bt.__chain__=yt,bt}return ze.apply(_,Pc([this.value()],arguments))})}),_}function mFe(){return pn._===this&&(pn._=tN),this}function S9(){}function gFe(_){return _=ar(_),sr(function(D){return a_(D,_)})}var yFe=v_(oi),vFe=v_(Hm),bFe=v_(qg);function dne(_){return tn(_)?ne(zc(_)):Ki(_)}function xFe(_){return function(D){return _==null?n:Ld(_,D)}}var wFe=aS(),_Fe=aS(!0);function A9(){return[]}function D9(){return!1}function EFe(){return{}}function TFe(){return""}function CFe(){return!0}function SFe(_,D){if(_=ar(_),_<1||_>Z)return[];var $=U,J=Js(_,U);D=In(D),_-=U;for(var ie=Wr(J,D);++$<_;)D($);return ie}function AFe(_){return tr(_)?oi(_,zc):Hc(_)?[_]:Da(bS(fi(_)))}function DFe(_){var D=++Jg;return fi(_)+D}var kFe=Kv(function(_,D){return _+D},0),IFe=Ns("ceil"),RFe=Kv(function(_,D){return _/D},1),NFe=Ns("floor");function PFe(_){return _&&_.length?t0(_,Kl,up):n}function OFe(_,D){return _&&_.length?t0(_,In(D,2),up):n}function FFe(_){return K(_,Kl)}function MFe(_,D){return K(_,In(D,2))}function $Fe(_){return _&&_.length?t0(_,Kl,lp):n}function LFe(_,D){return _&&_.length?t0(_,In(D,2),lp):n}var BFe=Kv(function(_,D){return _*D},1),jFe=Ns("round"),zFe=Kv(function(_,D){return _-D},0);function UFe(_){return _&&_.length?Ut(_,Kl):0}function VFe(_,D){return _&&_.length?Ut(_,In(D,2)):0}return ae.after=Qe,ae.ary=At,ae.assign=JOe,ae.assignIn=rne,ae.assignInWith=XN,ae.assignWith=ZOe,ae.at=e6e,ae.before=Nt,ae.bind=Et,ae.bindAll=oFe,ae.bindKey=Qt,ae.castArray=EOe,ae.chain=O_,ae.chunk=S_,ae.compact=xS,ae.concat=ql,ae.cond=sFe,ae.conforms=aFe,ae.constant=E9,ae.countBy=VN,ae.create=t6e,ae.curry=an,ae.curryRight=cn,ae.debounce=so,ae.defaults=n6e,ae.defaultsDeep=r6e,ae.defer=qe,ae.delay=Le,ae.difference=Ir,ae.differenceBy=bs,ae.differenceWith=Oo,ae.drop=Fs,ae.dropRight=tl,ae.dropRightWhile=wy,ae.dropWhile=ns,ae.fill=ib,ae.filter=$_,ae.flatMap=NS,ae.flatMapDeep=WN,ae.flatMapDepth=PS,ae.flatten=A_,ae.flattenDeep=sb,ae.flattenDepth=mu,ae.flip=Ye,ae.flow=lFe,ae.flowRight=cFe,ae.fromPairs=wS,ae.functions=c6e,ae.functionsIn=f6e,ae.groupBy=j_,ae.initial=D_,ae.intersection=_S,ae.intersectionBy=pp,ae.intersectionWith=k_,ae.invert=h6e,ae.invertBy=p6e,ae.invokeMap=m9,ae.iteratee=T9,ae.keyBy=z_,ae.keys=oa,ae.keysIn=Yl,ae.map=U_,ae.mapKeys=g6e,ae.mapValues=y6e,ae.matches=fFe,ae.matchesProperty=dFe,ae.memoize=Lt,ae.merge=v6e,ae.mergeWith=ine,ae.method=hFe,ae.methodOf=pFe,ae.mixin=C9,ae.negate=fn,ae.nthArg=gFe,ae.omit=b6e,ae.omitBy=x6e,ae.once=Sn,ae.orderBy=cb,ae.over=yFe,ae.overArgs=An,ae.overEvery=vFe,ae.overSome=bFe,ae.partial=Fn,ae.partialRight=rs,ae.partition=g9,ae.pick=w6e,ae.pickBy=one,ae.property=dne,ae.propertyOf=xFe,ae.pull=I_,ae.pullAll=ub,ae.pullAllBy=Na,ae.pullAllWith=gp,ae.pullAt=Uc,ae.range=wFe,ae.rangeRight=_Fe,ae.rearg=Vr,ae.reject=x,ae.remove=gu,ae.rest=vp,ae.reverse=R_,ae.sampleSize=O,ae.set=E6e,ae.setWith=T6e,ae.shuffle=V,ae.slice=TS,ae.sortBy=_e,ae.sortedUniq=AS,ae.sortedUniqBy=c0,ae.split=G6e,ae.spread=y9,ae.tail=MN,ae.take=$N,ae.takeRight=DS,ae.takeRightWhile=N_,ae.takeWhile=o9,ae.tap=d9,ae.throttle=xOe,ae.thru=Vc,ae.toArray=ene,ae.toPairs=sne,ae.toPairsIn=ane,ae.toPath=AFe,ae.toPlainObject=nne,ae.transform=C6e,ae.unary=wOe,ae.union=s9,ae.unionBy=LN,ae.unionWith=BN,ae.uniq=f0,ae.uniqBy=a9,ae.uniqWith=_y,ae.unset=S6e,ae.unzip=P_,ae.unzipWith=Xi,ae.update=A6e,ae.updateWith=D6e,ae.values=q_,ae.valuesIn=k6e,ae.without=u9,ae.words=cne,ae.wrap=_Oe,ae.xor=jN,ae.xorBy=l9,ae.xorWith=c9,ae.zip=zN,ae.zipObject=UN,ae.zipObjectDeep=f9,ae.zipWith=Wl,ae.entries=sne,ae.entriesIn=ane,ae.extend=rne,ae.extendWith=XN,C9(ae,ae),ae.add=kFe,ae.attempt=fne,ae.camelCase=P6e,ae.capitalize=une,ae.ceil=IFe,ae.clamp=I6e,ae.clone=TOe,ae.cloneDeep=SOe,ae.cloneDeepWith=AOe,ae.cloneWith=COe,ae.conformsTo=DOe,ae.deburr=lne,ae.defaultTo=uFe,ae.divide=RFe,ae.endsWith=O6e,ae.eq=Gd,ae.escape=F6e,ae.escapeRegExp=M6e,ae.every=HN,ae.find=L_,ae.findIndex=hp,ae.findKey=i6e,ae.findLast=qN,ae.findLastIndex=ob,ae.findLastKey=o6e,ae.floor=NFe,ae.forEach=lb,ae.forEachRight=B_,ae.forIn=s6e,ae.forInRight=a6e,ae.forOwn=u6e,ae.forOwnRight=l6e,ae.get=x9,ae.gt=kOe,ae.gte=IOe,ae.has=d6e,ae.hasIn=w9,ae.head=u0,ae.identity=Kl,ae.includes=GN,ae.indexOf=Wd,ae.inRange=R6e,ae.invoke=m6e,ae.isArguments=fb,ae.isArray=tr,ae.isArrayBuffer=ROe,ae.isArrayLike=Gl,ae.isArrayLikeObject=is,ae.isBoolean=NOe,ae.isBuffer=Ey,ae.isDate=POe,ae.isElement=OOe,ae.isEmpty=FOe,ae.isEqual=MOe,ae.isEqualWith=$Oe,ae.isError=v9,ae.isFinite=LOe,ae.isFunction=h0,ae.isInteger=Xte,ae.isLength=YN,ae.isMap=Qte,ae.isMatch=BOe,ae.isMatchWith=jOe,ae.isNaN=zOe,ae.isNative=UOe,ae.isNil=HOe,ae.isNull=VOe,ae.isNumber=Jte,ae.isObject=vo,ae.isObjectLike=Fo,ae.isPlainObject=OS,ae.isRegExp=b9,ae.isSafeInteger=qOe,ae.isSet=Zte,ae.isString=KN,ae.isSymbol=Hc,ae.isTypedArray=H_,ae.isUndefined=WOe,ae.isWeakMap=GOe,ae.isWeakSet=YOe,ae.join=mp,ae.kebabCase=$6e,ae.last=Ra,ae.lastIndexOf=ab,ae.lowerCase=L6e,ae.lowerFirst=B6e,ae.lt=KOe,ae.lte=XOe,ae.max=PFe,ae.maxBy=OFe,ae.mean=FFe,ae.meanBy=MFe,ae.min=$Fe,ae.minBy=LFe,ae.stubArray=A9,ae.stubFalse=D9,ae.stubObject=EFe,ae.stubString=TFe,ae.stubTrue=CFe,ae.multiply=BFe,ae.nth=ES,ae.noConflict=mFe,ae.noop=S9,ae.now=De,ae.pad=j6e,ae.padEnd=z6e,ae.padStart=U6e,ae.parseInt=V6e,ae.random=N6e,ae.reduce=V_,ae.reduceRight=y,ae.repeat=H6e,ae.replace=q6e,ae.result=_6e,ae.round=jFe,ae.runInContext=Be,ae.sample=k,ae.size=Q,ae.snakeCase=W6e,ae.some=se,ae.sortedIndex=CS,ae.sortedIndexBy=i9,ae.sortedIndexOf=yp,ae.sortedLastIndex=FN,ae.sortedLastIndexBy=SS,ae.sortedLastIndexOf=l0,ae.startCase=Y6e,ae.startsWith=K6e,ae.subtract=zFe,ae.sum=UFe,ae.sumBy=VFe,ae.template=X6e,ae.times=SFe,ae.toFinite=p0,ae.toInteger=ar,ae.toLength=tne,ae.toLower=Q6e,ae.toNumber=Wf,ae.toSafeInteger=QOe,ae.toString=fi,ae.toUpper=J6e,ae.trim=Z6e,ae.trimEnd=eFe,ae.trimStart=tFe,ae.truncate=nFe,ae.unescape=rFe,ae.uniqueId=DFe,ae.upperCase=iFe,ae.upperFirst=_9,ae.each=lb,ae.eachRight=B_,ae.first=u0,C9(ae,function(){var _={};return Zu(ae,function(D,$){Ur.call(ae.prototype,$)||(_[$]=D)}),_}(),{chain:!1}),ae.VERSION=r,Zo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){ae[_].placeholder=ae}),Zo(["drop","take"],function(_,D){er.prototype[_]=function($){$=$===n?1:Po(ar($),0);var J=this.__filtered__&&!D?new er(this):this.clone();return J.__filtered__?J.__takeCount__=Js($,J.__takeCount__):J.__views__.push({size:Js($,U),type:_+(J.__dir__<0?"Right":"")}),J},er.prototype[_+"Right"]=function($){return this.reverse()[_]($).reverse()}}),Zo(["filter","map","takeWhile"],function(_,D){var $=D+1,J=$==z||$==W;er.prototype[_]=function(ie){var fe=this.clone();return fe.__iteratees__.push({iteratee:In(ie,3),type:$}),fe.__filtered__=fe.__filtered__||J,fe}}),Zo(["head","last"],function(_,D){var $="take"+(D?"Right":"");er.prototype[_]=function(){return this[$](1).value()[0]}}),Zo(["initial","tail"],function(_,D){var $="drop"+(D?"":"Right");er.prototype[_]=function(){return this.__filtered__?new er(this):this[$](1)}}),er.prototype.compact=function(){return this.filter(Kl)},er.prototype.find=function(_){return this.filter(_).head()},er.prototype.findLast=function(_){return this.reverse().find(_)},er.prototype.invokeMap=sr(function(_,D){return typeof _=="function"?new er(this):this.map(function($){return zl($,_,D)})}),er.prototype.reject=function(_){return this.filter(fn(In(_)))},er.prototype.slice=function(_,D){_=ar(_);var $=this;return $.__filtered__&&(_>0||D<0)?new er($):(_<0?$=$.takeRight(-_):_&&($=$.drop(_)),D!==n&&(D=ar(D),$=D<0?$.dropRight(-D):$.take(D-_)),$)},er.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},er.prototype.toArray=function(){return this.take(U)},Zu(er.prototype,function(_,D){var $=/^(?:filter|find|map|reject)|While$/.test(D),J=/^(?:head|last)$/.test(D),ie=ae[J?"take"+(D=="last"?"Right":""):D],fe=J||/^find/.test(D);ie&&(ae.prototype[D]=function(){var Te=this.__wrapped__,Ne=J?[1]:arguments,ze=Te instanceof er,yt=Ne[0],bt=ze||tr(Te),kt=function(wr){var Rr=ie.apply(ae,Pc([wr],Ne));return J&&Kt?Rr[0]:Rr};bt&&$&&typeof yt=="function"&&yt.length!=1&&(ze=bt=!1);var Kt=this.__chain__,vn=!!this.__actions__.length,Ln=fe&&!Kt,ur=ze&&!vn;if(!fe&&bt){Te=ur?Te:new er(this);var Bn=_.apply(Te,Ne);return Bn.__actions__.push({func:Vc,args:[kt],thisArg:n}),new Zs(Bn,Kt)}return Ln&&ur?_.apply(this,Ne):(Bn=this.thru(kt),Ln?J?Bn.value()[0]:Bn.value():Bn)})}),Zo(["pop","push","shift","sort","splice","unshift"],function(_){var D=Pd[_],$=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",J=/^(?:pop|shift)$/.test(_);ae.prototype[_]=function(){var ie=arguments;if(J&&!this.__chain__){var fe=this.value();return D.apply(tr(fe)?fe:[],ie)}return this[$](function(Te){return D.apply(tr(Te)?Te:[],ie)})}}),Zu(er.prototype,function(_,D){var $=ae[D];if($){var J=$.name+"";Ur.call(ny,J)||(ny[J]=[]),ny[J].push({name:D,func:$})}}),ny[yy(n,v).name]=[{name:"wrapper",func:n}],er.prototype.clone=Kw,er.prototype.reverse=jC,er.prototype.value=oy,ae.prototype.at=F_,ae.prototype.chain=d0,ae.prototype.commit=M_,ae.prototype.next=kS,ae.prototype.plant=h9,ae.prototype.reverse=RS,ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=p9,ae.prototype.first=ae.prototype.head,Fd&&(ae.prototype[Fd]=IS),ae},Xg=XL();jr?((jr.exports=Xg)._=Xg,kr._=Xg):pn._=Xg}).call(IYt)}(xD,xD.exports)),xD.exports}var NYt=RYt();const PYt="#/definitions/LibraryConfig",OYt="http://json-schema.org/draft-07/schema#",FYt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.2/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/2.0.0-rc7/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),MYt={$ref:PYt,$schema:OYt,definitions:FYt},dOe=new Gte;dOe.addSchema(MYt);const $Yt=dOe.getSchema("#/definitions/LibraryConfig");function hOe(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?hOe(n,t):`$${t}.components.${n}`)}}function pOe(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return pOe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[o,s]=r.split(i),a=o.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[s];if(!l){const c={message:`Sequence ${s} not found in library ${o}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=hOe(l,a),l}return r})}}function LYt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([o,s])=>{var a;fC(s)&&!((a=i.baseComponents)!=null&&a[s.baseComponent])&&t.push({message:`Base component \`${s.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${o}`,params:{action:"add the base component to the baseComponents object"}})})})}function BYt(e,t){let n=!1,r;try{r=JSON.parse(e),n=$Yt(r)}catch{n=!1}const i=[],o=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:o}}async function jYt(e){const t=await(await fetch(`${va}libraries/${e}/config.json`)).text();return BYt(t,e)}async function zYt(e,t,n){const r=e.map(async o=>{const s=await jYt(o);return s.errors&&t.push(...s.errors),s.warnings&&n.push(...s.warnings),[o,s]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([o,s])=>{s.components||delete i[o]}),e.forEach(o=>{i[o]&&(i[o].components=Object.fromEntries(Object.entries(i[o].components).map(([s,a])=>{if(fC(a)){const u=NYt.merge({},i[o].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${o}.components.${s}`,u],[`$${o}.co.${s}`,u]]}return[[`$${o}.components.${s}`,a],[`$${o}.co.${s}`,a]]}).reduce((s,[a,u])=>(s.push(a,u),s),[])))}),i}const mOe=new Gte;mOe.addSchema(kYt);const $0e=mOe.getSchema("#/definitions/GlobalConfig"),gOe=new Gte;gOe.addSchema(CYt);const L0e=gOe.getSchema("#/definitions/StudyConfig");function UYt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function VYt(e){const t=JSON.parse(e),n=$0e(t),r=UYt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...$0e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function yOe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,o)=>i===e.id?o:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((o,s)=>o===r?s:null).forEach(o=>{o!==null&&t.splice(o,1)}):yOe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function HYt(e,t){const n=[],r=[];LYt(e,n,t),Object.entries(e.components).forEach(([s,a])=>{var u;fC(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const i=U_e(e.sequence);i.forEach(s=>{var a;e.components[s]||n.push({message:(a=e.baseComponents)!=null&&a[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!i.includes(s)&&!s.includes(".se.")&&!s.includes(".sequences.")&&!s.includes(".co.")&&!s.includes(".components.")).forEach(s=>{r.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const o=[];return yOe(e.sequence,o),o.forEach(s=>{n.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Yte(e){let t=!1,n;try{n=JSON.parse(e),t=L0e(n)}catch{t=!1}let r=L0e.errors||[],i=[];if(t&&n){const o=n.importedLibraries||[],s=await zYt(o,r,i);Object.values(s).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=pOe(n.sequence,s,r);const{errors:a,warnings:u}=HYt(n,s);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function qYt(e){const t=await(await fetch(`${va}${e}`)).text();return await Yte(t)}async function Kte(e,t){const n=t.configsList.find(r=>dve(r)===e);if(n){const r=t.configs[n];return await qYt(`${r.path}`)}return null}async function WYt(e){const t={},n=e.configsList.map(async i=>Kte(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,o)=>{t[i]=r[o]}),t}function GYt({globalConfig:e}){const t=dw(),[n,r]=F.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";F.useEffect(()=>{if(t!=="__revisit-widget")return Kte(t,e).then(m=>{r(m)}),()=>{};if(e&&t){const m=p=>{p.data.type==="revisitWidget/CONFIG"&&Yte(p.data.payload).then(async g=>{r(g);const v=await _me(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:v},"*")})};return window.addEventListener("message",m),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",m)}}return()=>{}},[e,t]);const[o,s]=F.useState([]),[a,u]=F.useState(null),{storageEngine:l}=Go(),[c]=Rg(),f=F.useMemo(()=>c.get("participantId"),[c]);F.useEffect(()=>{async function m(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await _me(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,v=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(I=>""),w=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:w.ip},T=await l.initializeParticipantSession(t,v,n,E,f||g),C=await l.getModes(t),S=await Out(t,n,T.sequence,E,T.answers,C,T.participantId);u(S),s([{element:A.jsx(cGt,{}),children:[{path:"/",element:A.jsx(eOe,{to:sh(0),replace:!0})},{path:"/:index",element:n.errors.length>0?A.jsxs(A.Fragment,{children:[A.jsx(zo,{order:2,mb:8,children:"Error loading config"}),A.jsx(_4,{issues:n.errors,type:"error"})]}):A.jsx(qWt,{})}]}])}m()},[l,n,t,c,f]);const d=J1e(o);let h=null;return i?o.length===0?h=A.jsx(yf,{visible:!0}):h=d&&a?A.jsx(W_e.Provider,{value:a,children:A.jsx(Oat,{store:a.store,children:d})}):A.jsx(D1,{}):h=A.jsx(D1,{}),h}function e6({studyIds:e}){const t=Lh(),{studyId:n}=om(),r=wd(),i=e.map(s=>({value:s,label:s})).sort((s,a)=>s.label.localeCompare(a.label)),o=r.pathname.includes("analysis");return A.jsx(Ci.Header,{p:"md",children:A.jsxs(Mp,{mt:-7,align:"center",children:[A.jsx(Mp.Col,{span:6,children:A.jsxs(un,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[A.jsx(rv,{w:40,src:`${va}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),A.jsx(ff,{w:"md"}),A.jsx(zo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),A.jsx(Mp.Col,{span:6,children:A.jsxs(un,{justify:"flex-end",direction:"row",children:[o&&A.jsxs(A.Fragment,{children:[A.jsx(BT,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:s=>t(`/analysis/stats/${s}`),mr:16}),A.jsx(wn,{component:"a",href:`${va}${n}`,target:"_blank",leftSection:A.jsx(ave,{}),mr:"sm",children:"Go to Study"})]}),A.jsx(lve,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:o?6:void 0}})]})})]})})}function vOe({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:o,close:s}]=Xq(!1),[a,u]=F.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;BX(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),o()};return A.jsxs(A.Fragment,{children:[A.jsxs(ui,{style:{gap:n},children:[A.jsx(Ji,{label:"Download all participants data as JSON",children:A.jsx(wn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:A.jsx(gHe,{})})}),A.jsx(Ji,{label:"Download all participants data as a tidy CSV",children:A.jsx(wn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:A.jsx(cve,{})})})]}),i&&a.length>0&&A.jsx(tTt,{opened:i,close:s,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function YYt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?A.jsx(Dn.Td,{children:A.jsx(qo,{miw:100,children:e.timedOut?A.jsx(ct,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>A.jsxs(Ue,{children:[A.jsxs(ct,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?A.jsx(ct,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):A.jsx(ct,{span:!0,children:n})]},`cell-${t}`))})}):A.jsx(Dn.Td,{children:"N/A"})}function B0e({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=oSe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?A.jsxs(Dn.Td,{children:[t.toFixed(1)," ","s",n&&A.jsxs(A.Fragment,{children:[A.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):A.jsx(Dn.Td,{children:"N/A"})}function KYt(e){const{metaData:t}=e;return A.jsx(Dn.Td,{children:A.jsx(DG,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:A.jsxs(qo,{gap:"xs",children:[A.jsxs(Ue,{children:["IP:"," ",t.ip]}),A.jsxs(Ue,{children:["Language:"," ",t.language]}),A.jsxs(Ue,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),A.jsxs(Ue,{children:["User Agent:"," ",t.userAgent]})]})})})}function XYt({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Go(),{studyId:i}=om(),{user:o}=rC(),s=async(E,T)=>{if(r&&i)if(o.isAdmin){const C=T===""?"Rejected by admin":T;await r.rejectParticipant(i,E,C),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=F.useState([]),[l,c]=F.useState(!1),[f,d]=F.useState(!1),[h,m]=F.useState(""),p=async()=>{c(!0),d(!1);const E=a.map(async T=>await s(T,h));await Promise.all(E),u([]),await n(),c(!1)};function g(E){E==="all"?a.length===e.length?u([]):u(e.map(T=>T.participantId)):a.includes(E)?u(a.filter(T=>T!==E)):u([...a,E])}const v=q_e(t.sequence),b=[A.jsx(Dn.Th,{children:A.jsx(un,{justify:"center",children:A.jsx(Ru,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),A.jsx(Dn.Th,{children:"ID"},"ID"),A.jsx(Dn.Th,{children:"Status"},"status"),A.jsx(Dn.Th,{children:"Tags"},"tags"),A.jsx(Dn.Th,{children:"Meta"},"meta"),...v.flatMap(E=>[A.jsx(Dn.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),A.jsxs(Dn.Th,{children:[A.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)]),A.jsx(Dn.Th,{children:"Total Duration (clean)"},"total-duration")],w=e.map(E=>A.jsxs(Dn.Tr,{children:[A.jsx(Dn.Td,{children:A.jsx(un,{justify:"center",children:A.jsx(Ru,{mb:-4,checked:a.includes(E.participantId),onChange:()=>g(E.participantId)})})}),A.jsx(Dn.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),A.jsx(Dn.Td,{children:A.jsxs(un,{direction:"column",miw:100,children:[A.jsxs(un,{direction:"row",align:"center",children:[E.rejected?A.jsx(Ji,{label:"Rejected",children:A.jsx(DI,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?A.jsx(Ji,{label:"Completed",children:A.jsx(R5,{size:16,color:"teal",style:{marginBottom:-3}})}):A.jsx(Ji,{label:"In Progress",children:A.jsx(uve,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&A.jsxs(ct,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([T,C])=>C.endTime!==-1&&C.endTime!==void 0).length/(kh(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&A.jsx(ct,{mt:5,fz:10,children:E.rejected.reason})]})}),A.jsx(Dn.Td,{children:A.jsx(un,{direction:"column",miw:100,children:(E.participantTags||[]).map(T=>A.jsxs(ct,{fz:10,children:["-"," ",T]},`tag-${T}`))})}),E.metadata?A.jsx(KYt,{metaData:E.metadata}):A.jsx(Dn.Td,{children:"N/A"}),v.map(T=>{const C=SK(E.sequence,T.orderPath),S=C&&Object.entries(E.answers).sort((I,R)=>{const P=parseInt(I[0].slice(I[0].lastIndexOf("_")+1),10),M=parseInt(R[0].slice(R[0].lastIndexOf("_")+1),10);return P-M}).filter(([I])=>{const R=I.slice(0,I.lastIndexOf("_")),P=parseInt(I.slice(I.lastIndexOf("_")+1),10);return R===T.componentName&&P<=C[0].lastIndex&&P>=C[0].firstIndex});return S!==null&&S.length>=T.timesSeenInBlock+1&&S[T.timesSeenInBlock][1].endTime!==-1?A.jsxs(Gr.Fragment,{children:[A.jsx(YYt,{cellData:S[T.timesSeenInBlock][1]}),A.jsx(B0e,{cellData:S[T.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`):A.jsxs(Gr.Fragment,{children:[A.jsx(Dn.Td,{children:"N/A"}),A.jsx(Dn.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`)}),A.jsx(B0e,{cellData:{startTime:Math.min(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.startTime)),endTime:Math.max(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(E.answers).flatMap(T=>T.windowEvents),timedOut:!1}},`cell-${E.participantId}-total-duration`)]},E.participantId));return e.length>0?A.jsxs(A.Fragment,{children:[A.jsx(yf,{visible:l,overlayProps:{blur:2}}),A.jsxs(un,{justify:"space-between",mb:8,p:8,children:[A.jsx(ui,{children:A.jsx(BT,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:A.jsx(RHe,{size:14}),onChange:E=>E&&g(E)})}),A.jsxs(ui,{children:[A.jsx(vOe,{visibleParticipants:e,studyId:i||""}),A.jsxs(wn,{disabled:a.length===0||!o.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),A.jsx(un,{direction:"column",style:{width:"100%",overflow:"auto"},children:A.jsxs(Dn,{striped:!0,withTableBorder:!0,children:[A.jsx(Dn.Thead,{children:A.jsx(Dn.Tr,{children:b})}),A.jsx(Dn.Tbody,{children:w})]})}),A.jsxs(Co,{opened:f,onClose:()=>d(!1),title:A.jsxs(ct,{children:["Reject Participants (",a.length,")"]}),children:[A.jsx(M0,{label:"Please enter the reason for rejection.",onChange:E=>m(E.target.value)}),A.jsxs(un,{mt:"sm",justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),m("")},children:"Cancel"}),A.jsx(wn,{color:"red",onClick:()=>p(),children:"Reject Participants"})]})]})]}):A.jsxs(A.Fragment,{children:[A.jsx(ff,{h:"xl"}),A.jsx(un,{justify:"center",align:"center",children:A.jsx(ct,{children:"No data available"})})]})}function QYt({studyId:e,refresh:t}){const[n,r]=F.useState(!1),[i,o]=F.useState(!1),[s,a]=F.useState(!1),[u,l]=F.useState(!1),[c,f]=F.useState(""),[d,h]=F.useState([]),[m,p]=F.useState(""),[g,v]=F.useState(""),[b,w]=F.useState(!1),[E,T]=F.useState(!1),{storageEngine:C}=Go(),S=C,I=F.useCallback(async()=>{T(!0);const q=await S.getSnapshots(e);h(q),T(!1)},[S,e]);F.useEffect(()=>{I()},[I]);const R=async(q,...U)=>{w(!0);const Y=await q(...U);Y.status==="SUCCESS"?(I(),w(!1),await t(),Y.notifications&&Y.notifications.forEach(H=>{jk(H)})):(w(!1),jk({title:Y.error.title,message:Y.error.message,color:"red"}))},P=async()=>{await R(S.createSnapshot.bind(S),e,!1)},M=async()=>{p(""),r(!1),await R(S.createSnapshot.bind(S),e,!0)},B=async()=>{a(!1),await R(S.renameSnapshot.bind(S),c,g)},L=async q=>{await R(S.restoreSnapshot.bind(S),e,q)},z=async()=>{p(""),o(!1),await R(S.removeSnapshotOrLive.bind(S),c,!0)},G=async()=>{p(""),l(!1),await R(S.removeSnapshotOrLive.bind(S),e,!0)},W=()=>qre({title:"Create a Snapshot",children:A.jsx(ct,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>P()}),te=q=>qre({title:"Restore Snapshot",children:A.jsx(ct,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>L(q)}),Z=q=>{const U=/-snapshot-(.+)$/,Y=q.match(U);return Y&&Y[1]?Y[1].replace("T"," "):null},re=async q=>{const U=q.slice(q.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(U)};return A.jsxs(A.Fragment,{children:[A.jsx(yf,{visible:b}),A.jsxs(un,{justify:"space-between",align:"center",children:[A.jsxs(Ue,{style:{width:"70%"},children:[A.jsx(zo,{order:5,children:"Create a Snapshot"}),A.jsxs(ct,{children:["This will create a snapshot of the live"," ",A.jsx(ct,{span:!0,fw:700,children:e})," ","database. It will"," ",A.jsx(ct,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),A.jsx(Ji,{label:"Create a snapshot",children:A.jsx(wn,{onClick:W,children:"Snapshot"})})]}),A.jsx(ff,{h:"lg"}),A.jsxs(un,{justify:"space-between",align:"center",children:[A.jsxs(Ue,{style:{width:"70%"},children:[A.jsx(zo,{order:5,children:"Archive Data"}),A.jsxs(ct,{children:["This will create a snapshot of the live"," ",A.jsx(ct,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),A.jsx(Ji,{label:"Snapshot and Delete Data",children:A.jsx(wn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),A.jsx(ff,{h:"lg"}),A.jsxs(un,{justify:"space-between",align:"center",children:[A.jsxs(Ue,{style:{width:"70%"},children:[A.jsx(zo,{order:5,children:"Delete Data"}),A.jsxs(ct,{children:["This will delete the live"," ",A.jsx(ct,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),A.jsx(Ji,{label:"Delete Data",children:A.jsx(wn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),A.jsx(ff,{h:"xl"}),A.jsxs(un,{direction:"column",children:[A.jsx(un,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:A.jsx(zo,{order:5,children:"Snapshots"})}),A.jsxs(Ue,{style:{position:"relative"},children:[A.jsx(yf,{visible:E}),d.length>0?A.jsxs(Dn,{children:[A.jsx(Dn.Thead,{children:A.jsxs(Dn.Tr,{children:[A.jsx(Dn.Th,{children:"Snapshot Name"}),A.jsx(Dn.Th,{children:"Date Created"}),A.jsx(Dn.Th,{children:"Actions"})]})}),A.jsx(Dn.Tbody,{children:d.map(q=>A.jsxs(Dn.Tr,{children:[A.jsx(Dn.Td,{children:q.alternateName}),A.jsx(Dn.Td,{children:Z(q.originalName)}),A.jsx(Dn.Td,{children:A.jsxs(un,{children:[A.jsx(Ji,{label:"Rename",children:A.jsx(wn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(q.originalName)},children:A.jsx(SHe,{})})}),A.jsx(Ji,{label:"Restore Snapshot",children:A.jsx(wn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{te(q.originalName)},children:A.jsx(kHe,{})})}),A.jsx(Ji,{label:"Delete Snapshot",children:A.jsx(wn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{o(!0),f(q.originalName)},children:A.jsx(fve,{})})}),A.jsx(vOe,{visibleParticipants:()=>re(q.originalName),studyId:e,gap:"10px",fileName:q.alternateName})]})})]},q.originalName))})]}):A.jsx(ct,{children:"No snapshots."})]})]}),A.jsxs(Co,{opened:n,onClose:()=>{r(!1),p("")},title:A.jsx(ct,{children:"Archive Data"}),children:[A.jsx(ct,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),A.jsx(M0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:q=>p(q.target.value)}),A.jsxs(un,{mt:"sm",justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),p("")},children:"Cancel"}),A.jsx(wn,{color:"red",onClick:M,disabled:m!==e,children:"Archive"})]})]}),A.jsxs(Co,{opened:i,onClose:()=>{o(!1),p("")},title:A.jsx(ct,{children:"Delete Snapshot"}),children:[A.jsxs(ct,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",A.jsx(ct,{span:!0,fw:700,children:"irreversible"}),"."]}),A.jsx(M0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:q=>p(q.target.value)}),A.jsxs(un,{mt:"sm",justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{o(!1),p("")},children:"Cancel"}),A.jsx(wn,{color:"red",onClick:z,disabled:m!==e,children:"Delete"})]})]}),A.jsxs(Co,{opened:s,onClose:()=>{a(!1),v("")},title:A.jsx(ct,{children:"Rename Snapshot"}),children:[A.jsx(M0,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:q=>v(q.target.value)}),A.jsxs(un,{mt:"sm",justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),v("")},children:"Cancel"}),A.jsx(wn,{color:"green",onClick:B,disabled:!g||g.length===0,children:"Rename"})]})]}),A.jsxs(Co,{opened:u,onClose:()=>{l(!1),p("")},title:A.jsx(ct,{children:"Delete Live Data"}),children:[A.jsxs(ct,{mb:"sm",children:["This will permanently delete the live"," ",A.jsx(ct,{span:!0,fw:700,children:e})," ","data. This action is"," ",A.jsx(ct,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),A.jsx(M0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:q=>p(q.target.value)}),A.jsxs(un,{mt:"sm",justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),p("")},children:"Cancel"}),A.jsx(wn,{color:"red",onClick:G,disabled:m!==e,children:"Delete"})]})]})]})}function JYt({studyId:e}){const{storageEngine:t}=Go(),[n,r]=F.useState(!1),[i,o]=F.useState(!1),[s,a]=F.useState(!1),[u,l]=F.useState(!1);F.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);o(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?o(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&A.jsxs(qo,{children:[A.jsx(rx,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),A.jsx(rx,{label:"Study Navigator Enabled",checked:s,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),A.jsx(rx,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function ZYt({studyId:e,refresh:t}){const{storageEngine:n}=Go();return A.jsx(lg,{children:A.jsxs(Su,{multiple:!0,variant:"contained",children:[A.jsxs(Su.Item,{value:"ReVISit Modes",children:[A.jsx(Su.Control,{children:A.jsx(zo,{order:5,children:"ReVISit Modes"})}),A.jsx(Su.Panel,{children:A.jsx(JYt,{studyId:e})})]},"modes"),A.jsxs(Su.Item,{value:"Data Management",children:[A.jsx(Su.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:A.jsx(zo,{order:5,children:"Data Management"})}),A.jsx(Su.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&A.jsx(QYt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function eKt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:o}]=Xq(!0),[s,a]=mI(),u=F.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=F.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=F.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(p=>Object.entries(p.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(p=>p.filter(([g,v])=>v.endTime!==-1).map(([g,v])=>(v.endTime-v.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,m;return e.type==="numerical"&&(h=e.min,m=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),m=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,m=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&m!==void 0?{domain:[h,m]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return A.jsxs(ST,{p:"lg",withBorder:!0,ref:s,children:[A.jsxs(un,{direction:"row",justify:"space-between",onClick:o,children:[A.jsxs(un,{align:"center",children:[e.type==="metadata"&&A.jsx(mHe,{size:20}),e.type==="numerical"&&A.jsx(THe,{size:20}),(e.type==="shortText"||e.type==="longText")&&A.jsx(dHe,{size:20}),e.type==="likert"&&A.jsx(vHe,{size:20}),e.type==="dropdown"&&A.jsx(NHe,{size:20}),e.type==="slider"&&A.jsx(sHe,{size:20}),e.type==="radio"&&A.jsx(DHe,{size:20}),e.type==="checkbox"&&A.jsx(PHe,{size:20}),e.type==="reactive"&&A.jsx(wHe,{size:20}),A.jsx(zo,{order:5,ml:4,children:e.id})]}),A.jsx(pHe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),A.jsxs(n5,{in:i,mah:400,children:[A.jsx(Ue,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:A.jsx(Zx,{})}),A.jsxs(SG,{cols:2,h:360,children:[A.jsx(ag,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?A.jsx(zpe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):A.jsxs(un,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&A.jsx(_D,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&A.jsxs(A.Fragment,{children:[A.jsx(ct,{fw:700,children:"Response Values: "}),u.map((f,d)=>A.jsx(un,{align:"center",gap:"xs",children:A.jsx(ct,{children:f[e.id]})},d))]})]})}),A.jsx(ag,{mih:200,children:e.type==="metadata"?A.jsx(zpe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):A.jsxs(A.Fragment,{children:[A.jsx(ct,{fw:700,children:"Response Specification: "}),A.jsx(_D,{block:!0,children:JSON.stringify(e,null,2)}),A.jsx("br",{}),l&&A.jsxs(A.Fragment,{children:[A.jsx(ct,{fw:700,children:"Correct Answer: "}),A.jsx(_D,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function tKt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&iOe(t.components[n],t),i=F.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?A.jsx(un,{w:"100%",direction:"column",gap:"xs",children:i.map(o=>A.jsx(eKt,{response:o,participantData:e,trialId:n,trialConfig:r},o.id))}):A.jsx(un,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:A.jsx(ct,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function nKt({studyConfig:e,visibleParticipants:t}){const n=F.useMemo(()=>{let i=J0(e.sequence);return i=AK(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=om();return A.jsx(ST,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?A.jsx(un,{justify:"center",align:"center",pt:"lg",pb:"md",children:A.jsx(ct,{children:"No data available."})}):A.jsxs(un,{direction:"row",children:[A.jsx(Ue,{w:340,children:A.jsx(WM,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),A.jsx(Zx,{orientation:"vertical",mx:"md"}),A.jsx(tKt,{participantData:t,studyConfig:e,trialId:r})]})})}function rKt({xScale:e,answer:t,height:n,labelHeight:r=0}){return A.jsx("g",{children:A.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const l4=3,wE=25,c4=25,f4=20,j0e=1,_z=15;function iKt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:o,labelHeight:s=0,isCorrect:a,hasCorrect:u}){const[l,c]=F.useState(!1),[f,{width:d}]=mI();return A.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[A.jsx("rect",{opacity:1,fill:l||o?"cornflowerblue":"lightgray",x:e(t.startTime)+j0e,width:e(t.endTime)-e(t.startTime)-j0e*2,y:r-wE,height:wE}),A.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-l4,width:d+l4*2+(u?_z:0),y:r-wE-c4-s,height:f4,fill:"whitesmoke"}),A.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-l4,x2:d+e(t.startTime)+l4+(u?_z:0),y1:r-wE-c4+f4-s,y2:r-wE-c4+f4-s}),A.jsx("foreignObject",{x:e(t.startTime),width:d+(u?_z:0),y:r-wE-c4-s,height:f4,children:A.jsx(xi,{style:{width:"fit-content"},children:A.jsxs(ui,{wrap:"nowrap",gap:2,children:[A.jsx(ct,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?A.jsx(R5,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):A.jsx(DI,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const z0e=25,oKt=8,Ez={left:20,top:0,right:20,bottom:0};function sKt({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:o,maxLength:s}){const a=F.useCallback(g=>{const v=g.split("_"),b=+v[v.length-1];window.open(`${va}${i}/${sh(b)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=F.useMemo(()=>{const g=Object.values(e.answers||{}).filter(w=>w.startTime).map(w=>[w.startTime,w.endTime]).flat(),v=Hct(g);return fm([Ez.left,t-Ez.left-Ez.right]).domain([v[0],s?v[0]+s:v[1]]).clamp(!0)},[s,e.answers,t]),[l,c,f]=F.useMemo(()=>{let g=0;const v=Object.entries(e.answers||{}).filter(T=>!!T[1].startTime).sort((T,C)=>T[1].startTime-C[1].startTime);let b=0,w=0;const E=v.map((T,C)=>{const[S,I]=T,R=C>0?v[C-g-1]:null;R&&R[0].length*(oKt+1)+u(R[1].startTime)>u(I.startTime)?g+=1:g=0;const P=S.split("_"),M=P.slice(0,P.length-1).join("_"),B=o==null?void 0:o.components[M];let L=!0,z=!1;return B&&B.correctAnswer?(B.correctAnswer.forEach(G=>{const{id:W,answer:te}=G;(!B||!B.correctAnswer||I.answer[W]!==te)&&(L=!1)}),z=!0):z=!1,z&&(w+=1,L&&(b+=1)),{line:A.jsx(rKt,{labelHeight:g*z0e,answer:I,height:n,xScale:u},S),label:A.jsx(Ji,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:A.jsx(qo,{gap:0,children:Object.entries(I.answer).map(G=>{var re,q;const[W,te]=G,Z=(q=(re=B==null?void 0:B.correctAnswer)==null?void 0:re.find(U=>U.id===W))==null?void 0:q.answer;return A.jsx(ct,{children:`${W}: ${te} ${Z?`[${Z}]`:""}`},W)})}),children:A.jsx("g",{children:A.jsx(iKt,{isCorrect:L,hasCorrect:z,labelHeight:g*z0e,isSelected:r===S,setSelectedTask:a,answer:I,height:n,name:S,xScale:u},S)})})}});return[b,w,E]},[e.answers,u,o==null?void 0:o.components,n,r,a]),d=F.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(v=>v.startTime).sort((v,b)=>v.startTime-b.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=F.useMemo(()=>Object.entries(e.answers||{}).sort((v,b)=>v[1].startTime-b[1].startTime).map(v=>{const[b,w]=v,E=[];let T=[-1,-1],C="visible";if(w.windowEvents)for(let S=0;S<w.windowEvents.length;S+=1)w.windowEvents[S][1]==="visibility"&&(w.windowEvents[S][2]==="hidden"&&C==="visible"?(T=[w.windowEvents[S][0],-1],C="hidden"):w.windowEvents[S][2]==="visible"&&C==="hidden"&&(T[1]=w.windowEvents[S][0],E.push(T),T=[-1,-1],C="visible"));return E.map((S,I)=>A.jsx(Ji,{withinPortal:!0,label:"Browsed away",children:A.jsx("rect",{x:u(S[0]),width:u(S[1])-u(S[0]),y:n-5,height:10})},I))}),[u,n,e.answers]),m=F.useMemo(()=>{if(o!=null&&o.uiConfig&&o.uiConfig.participantNameField){const[g,v]=o.uiConfig.participantNameField.split("."),b=Object.keys(e.answers).find(w=>w.startsWith(g));if(b)return`${e.answers[b].answer[v]}`}return null},[e.answers,o]),p=F.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,w)=>b.startTime-w.startTime),v=new Date(g[g.length-1].endTime);return e.completed?`${v.toLocaleDateString()} ${v.toLocaleTimeString()}`:""},[e]);return A.jsx(xi,{children:A.jsxs(qo,{gap:15,style:{width:"100%"},children:[A.jsx(Zx,{size:"md"}),A.jsxs(ui,{justify:"space-between",children:[A.jsxs(ui,{justify:"center",children:[e.participantIndex?A.jsx(ct,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,A.jsx(ct,{size:"md",fw:700,children:m||e.participantId}),A.jsx(ct,{size:"md",children:p}),e.completed?null:A.jsx(ct,{size:"xl",c:"red",children:"Not completed"}),A.jsxs(ui,{gap:10,children:[A.jsx(yh,{variant:"light",size:"lg",color:"green",leftSection:A.jsx(R5,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),A.jsx(yh,{variant:"light",size:"lg",color:"red",leftSection:A.jsx(DI,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),A.jsx(yh,{variant:"light",size:"lg",color:"gray",leftSection:A.jsx(xHe,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:qq(d)})]})]}),A.jsx(wn,{rightSection:A.jsx(bHe,{size:14}),component:"a",href:`${va}${i}/${sh(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?A.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(g=>g.line),f.map(g=>g.label),h]}):null]})})}function aKt({visibleParticipants:e,studyConfig:t}){const{studyId:n}=om(),[r,{width:i}]=mI(),[o,s]=F.useState(!1),a=F.useMemo(()=>o?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[o,e]);return A.jsxs(qo,{ref:r,style:{width:"100%"},children:[A.jsx(ui,{children:A.jsx(rx,{checked:o,label:"Scale by time",onChange:u=>s(u.currentTarget.checked)})}),e.map(u=>A.jsx(sKt,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function uKt({globalConfig:e}){const{studyId:t}=om(),[n,r]=F.useState([]),[i,o]=F.useState(void 0),[s,a]=F.useState(!1),{storageEngine:u}=Go(),l=Lh(),{tab:c}=om(),{user:f}=rC();F.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const w=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&u){const T=await Yte(E.data.payload);o(T)}};return window.addEventListener("message",w),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",w)}}return Kte(t,e).then(w=>{w&&o(w)}),()=>{}},[t,e,u]);const d=F.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const w=await u.getAllParticipantsData();r(w),a(!1)}},[u,t,i]);F.useEffect(()=>{d()},[e,u,t,d]);const[h,m]=F.useState([]),[p,g,v]=F.useMemo(()=>{const w=n.filter(C=>!C.rejected&&C.completed),E=n.filter(C=>!C.rejected&&!C.completed),T=n.filter(C=>C.rejected);return m([...w,...E,...T]),[w,E,T]},[n]),b=F.useCallback(w=>{const E=[];w.includes("completed")&&E.push(...p),w.includes("inprogress")&&E.push(...g),w.includes("rejected")&&E.push(...v),m(E)},[p,g,v]);return A.jsxs(A.Fragment,{children:[A.jsx(e6,{studyIds:e.configsList}),A.jsx(Ci.Main,{children:A.jsxs(lg,{fluid:!0,style:{height:"100%",position:"relative"},children:[A.jsx(yf,{visible:s}),A.jsxs(un,{direction:"row",align:"center",justify:"space-between",children:[A.jsx(zo,{order:5,children:t}),A.jsxs(un,{direction:"row",align:"center",children:[A.jsx(ct,{mt:-2,size:"sm",children:"Participants: "}),A.jsx(Ru.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:A.jsxs(ui,{children:[A.jsx(Ru,{value:"completed",label:"Completed"}),A.jsx(Ru,{value:"inprogress",label:"In Progress"}),A.jsx(Ru,{value:"rejected",label:"Rejected"})]})})]})]}),A.jsx(ff,{h:"xs"}),A.jsxs(Nr,{variant:"outline",value:c,onChange:w=>l(`/analysis/stats/${t}/${w}`),style:{height:"100%"},children:[A.jsxs(Nr.List,{children:[A.jsx(Nr.Tab,{value:"table",leftSection:A.jsx(OHe,{size:16}),children:"Table View"}),A.jsx(Nr.Tab,{value:"stats",leftSection:A.jsx(hHe,{size:16}),children:"Trial Stats"}),A.jsx(Nr.Tab,{value:"replay",leftSection:A.jsx(AHe,{size:16}),children:"Participant Replay"}),A.jsx(Nr.Tab,{value:"manage",leftSection:A.jsx(lve,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),A.jsx(Nr.Panel,{value:"table",pt:"xs",children:i&&A.jsx(XYt,{visibleParticipants:h,studyConfig:i,refresh:d})}),A.jsx(Nr.Panel,{value:"stats",pt:"xs",children:i&&A.jsx(nKt,{studyConfig:i,visibleParticipants:h})}),A.jsx(Nr.Panel,{value:"replay",pt:"xs",children:A.jsx(aKt,{visibleParticipants:h,studyConfig:i})}),A.jsx(Nr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?A.jsx(ZYt,{studyId:t,refresh:d}):A.jsx(lg,{mt:20,children:A.jsx(Y0,{title:"Unauthorized Access",variant:"light",color:"red",icon:A.jsx(YG,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function U0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:o}=rC(),{storageEngine:s}=Go(),[a,u]=F.useState(!1),l=om();return F.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||o()}catch(f){o(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!s?A.jsx(yf,{visible:r.determiningStatus||!(s!=null&&s.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?A.jsx(VG,{to:"/login"}):A.jsx(A.Fragment,{children:e})}async function bOe(e,t){if(e instanceof Qf){t(!0);const n=new P0,r=P6();try{await xst(r,n,E_e)}catch(i){jk({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function lKt(){const{user:e}=rC(),[t,n]=F.useState(!1),{storageEngine:r}=Go();return F.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&jk({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?A.jsx(VG,{to:"/"}):A.jsx(lg,{children:A.jsx(FT,{padding:"lg",children:A.jsxs(un,{align:"center",direction:"column",justify:"center",children:[A.jsx(rv,{maw:200,mt:50,mb:100,src:`${va}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),A.jsxs(A.Fragment,{children:[A.jsx(ct,{mb:20,children:"To access admin settings, please sign in using your Google account."}),A.jsx(wn,{onClick:()=>bOe(r,n),leftSection:A.jsx(FHe,{}),variant:"filled",children:"Sign In With Google"})]}),A.jsx(yf,{visible:t})]})})})}function cKt(){const{user:e,triggerAuth:t,logout:n}=rC(),{storageEngine:r}=Go(),[i,o]=F.useState(!1),[s,a]=F.useState([]),[u,l]=F.useState(!1),[c,f]=F.useState(!1),[d,h]=F.useState(!1),[m,p]=F.useState(!1),[g,v]=F.useState(!1),[b,w]=F.useState(""),[E,T]=F.useState(null),C=Q_e({initialValues:{email:""},validate:{email:pct("Invalid email")}});F.useEffect(()=>{(async()=>{if(l(!0),r instanceof Qf){const z=await(r==null?void 0:r.getUserManagementData("authentication"));o((z==null?void 0:z.isEnabled)||!1);const G=await(r==null?void 0:r.getUserManagementData("adminUsers"));G&&G.adminUsersList&&a(G==null?void 0:G.adminUsersList.map(W=>W.email))}else o(!1);l(!1)})()},[r]);const S=async()=>{if(l(!0),r instanceof Qf){const L=await bOe(r,l);L&&L.email?(T({email:L.email,uid:L.uid}),p(!0)):v(!0)}l(!1)},I=async L=>{l(!0),r instanceof Qf&&L&&(await r.changeAuth(!0),await r.addAdminUser(L),a([L.email]),o(!0),t()),p(!1),l(!1)},R=async()=>{if(l(!0),r instanceof Qf){await r.addAdminUser({email:C.values.email,uid:null});const L=await r.getUserManagementData("adminUsers");a((L==null?void 0:L.adminUsersList.map(z=>z.email))||[])}l(!1),f(!1),C.setValues({email:""})},P=L=>{h(!0),w(L)},M=async()=>{if(l(!0),r instanceof Qf){await r.removeAdminUser(b);const L=await r.getUserManagementData("adminUsers");a((L==null?void 0:L.adminUsersList.map(z=>z.email))||[])}h(!1),l(!1)},B=F.useMemo(()=>r instanceof Qf,[r]);return A.jsxs(A.Fragment,{children:[A.jsx(lg,{children:A.jsxs(FT,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[A.jsx(zo,{mb:20,order:3,children:"Authentication"}),i?A.jsx(un,{children:A.jsx(ct,{children:"Authentication is enabled."})}):A.jsxs(un,{justify:"space-between",children:[A.jsx(Ue,{children:A.jsx(ct,{children:"Authentication is currently disabled."})}),A.jsx(Ji,{label:"You can only enable auth when using Firebase",disabled:B,children:A.jsx(wn,{onClick:L=>B?S():L.preventDefault(),color:"green","data-disabled":B?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?A.jsxs(un,{mt:40,direction:"column",children:[A.jsxs(un,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[A.jsx(zo,{order:6,children:"Enabled Users"}),A.jsx(KG,{style:{cursor:"pointer"},onClick:()=>f(!0)})]}),s.length>0?s.map(L=>{var z;return A.jsxs(un,{justify:"space-between",mb:10,children:[A.jsx(ct,{children:L}),L===((z=e.user)==null?void 0:z.email)?A.jsx(ct,{color:"blue",size:"xs",children:"You"}):A.jsx(ev,{variant:"subtle",onClick:()=>P(L),children:A.jsx(fve,{color:"red"})})]},L)}):null,A.jsx(un,{direction:"row",justify:"left",children:A.jsx(wn,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),A.jsx(Co,{opened:c,onClose:()=>f(!1),title:"Add Admin User",children:A.jsxs(Ue,{component:"form",onSubmit:C.onSubmit(()=>R()),children:[A.jsx(M0,{leftSection:A.jsx(lHe,{}),placeholder:"User Gmail Account",...C.getInputProps("email")}),A.jsxs(un,{mt:30,justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),A.jsx(wn,{type:"submit",children:"Save"})]})]})}),A.jsxs(Co,{opened:d,size:"large",onClose:()=>h(!1),title:A.jsxs(ct,{fw:700,children:["Remove",b,"?"]}),children:[A.jsxs(ct,{mt:40,children:["Are you sure you want to remove",A.jsx("b",{children:b})," ","as an administrator?"]}),A.jsxs(un,{mt:40,justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),A.jsx(wn,{onClick:()=>M(),children:"Yes, I'm sure."})]})]}),A.jsxs(Co,{opened:m,size:"md",onClose:()=>p(!1),title:A.jsx(ct,{fw:700,children:"Enable Authentication?"}),children:[A.jsxs(ct,{mt:40,children:["User"," ",A.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),A.jsxs(un,{mt:40,justify:"right",children:[A.jsx(wn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),A.jsx(wn,{onClick:()=>I(E),children:"Yes, I'm sure."})]})]}),A.jsxs(Co,{opened:g,size:"md",onClose:()=>v(!1),title:A.jsx(ct,{fw:700,children:"An Error Occurred."}),children:[A.jsxs(ct,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",A.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),A.jsx(un,{mt:40,justify:"right",children:A.jsx(wn,{mr:5,onClick:()=>v(!1),children:"Okay"})})]}),A.jsx(yf,{visible:u})]})}class fKt extends T_e{constructor(){super("localStorage");rl(this,"studyDatabase");rl(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await kE.createInstance({name:n});const i=await this.getCurrentConfigHash(),o=await F6(JSON.stringify(r));i&&i!==o&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",o);const s=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...s,[o]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,o,s){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await F6(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:o,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await kE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=O6();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=kE.createInstance({name:n}),i=[];return await r.iterate((o,s)=>{s!=="config"&&s!=="currentParticipant"&&s!=="sequenceArray"&&s!=="configs"&&s!=="currentConfigHash"&&s!=="modes"&&i.push(o)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=O6();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const o=await this.studyDatabase.getItem(r);if(!o)throw new Error("Participant not found");if(o.rejected)return;o.rejected={reason:i,timestamp:new Date().getTime()};const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(o.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,o)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await kE.createInstance({name:n});const o=await this.studyDatabase.getItem("modes");if(!o)throw new Error("Modes not initialized");o[r]=i,this.studyDatabase.setItem("modes",o)}async getModes(n){this.studyDatabase=await kE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,o=r.filter(l=>l.rejected).length,s=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:o,inProgress:s,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function dKt(){let e,t=!1;{const n=new Qf;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new fKt;await n.connect(),e=n}return e}function kA({title:e}){const t=wd();return F.useEffect(()=>{document.title=e},[t,e]),null}async function hKt(){const t=await(await fetch(`${va}global.json`)).text();return VYt(t)}function pKt(){const[e,t]=F.useState(null),[n,r]=F.useState({});F.useEffect(()=>{async function a(){e&&r(await WYt(e))}a()},[e]),F.useEffect(()=>{e||hKt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:o}=Go();F.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await dKt();o(u)}a()},[o,i]);const s=async a=>i instanceof Qf?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?A.jsx(VVe,{basename:va,children:A.jsx(yat,{children:A.jsx(iHe,{children:A.jsxs(vVe,{children:[A.jsx(kb,{path:"/",element:A.jsxs(A.Fragment,{children:[A.jsx(kA,{title:"ReVISit | Home"}),A.jsxs(Ci,{padding:"md",header:{height:70},children:[A.jsx(e6,{studyIds:e.configsList}),A.jsx(bat,{globalConfig:e,studyConfigs:n})]})]})}),A.jsx(kb,{path:"/:studyId/*",element:A.jsxs(A.Fragment,{children:[A.jsx(kA,{title:"ReVISit | Study"}),A.jsx(GYt,{globalConfig:e})]})}),A.jsx(kb,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:A.jsxs(A.Fragment,{children:[A.jsx(kA,{title:"ReVISit | Analysis"}),A.jsx(U0e,{paramToCheck:"studyId",paramCallback:s,children:A.jsx(Ci,{padding:"md",header:{height:70},children:A.jsx(uKt,{globalConfig:e})})})]})}),A.jsx(kb,{path:"/analysis/stats/:studyId",element:A.jsx(eOe,{to:"./table",replace:!0})}),A.jsx(kb,{path:"/settings",element:A.jsxs(U0e,{children:[A.jsx(kA,{title:"ReVISit | Settings"}),A.jsxs(Ci,{padding:"md",header:{height:70},children:[A.jsx(e6,{studyIds:e.configsList}),A.jsx(Ci.Main,{children:A.jsx(cKt,{})})]})]})}),A.jsx(kb,{path:"/login",element:A.jsxs(A.Fragment,{children:[A.jsx(kA,{title:"ReVISit | Login"}),A.jsxs(Ci,{padding:"md",header:{height:70},children:[A.jsx(e6,{studyIds:e.configsList}),A.jsx(Ci.Main,{children:A.jsx(lKt,{})})]})]})})]})})})}):null}iMe.createRoot(document.getElementById("root")).render(A.jsx(Gr.StrictMode,{children:A.jsx(AUe,{children:A.jsxs(fge,{children:[A.jsx(Ig,{}),A.jsx(pKt,{})]})})}))});export default mKt();
